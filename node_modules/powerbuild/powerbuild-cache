{"processed":{"/Users/brad/WebstormProjects/psycloud/src/main.coffee":{"id":1,"canonicalName":"src/main.coffee","code":"var Dots, Exp, Kinetic, Psy, Q, canvas, components, csv, datatable, design, factory, html, include, layout, lib, libs, match, samplers, stimresp, utils, _, _i, _len;\nExp = require('2', module);\nPsy = require('3', module);\nDots = require('4', module);\nutils = require('5', module);\ndatatable = require('6', module);\nsamplers = require('7', module);\nstimresp = require('8', module);\nlayout = require('9', module);\ndesign = require('10', module);\ncanvas = require('11', module);\nhtml = require('12', module);\ncomponents = require('13', module);\nfactory = require('14', module);\nKinetic = require('15', module).Kinetic;\n_ = require('16', module);\nQ = require('17', module);\ncsv = require('18', module);\nmatch = require('19', module).match;\ninclude = function (lib) {\n    var key, value, _results;\n    _results = [];\n    for (key in lib) {\n        value = lib[key];\n        _results.push(exports[key] = value);\n    }\n    return _results;\n};\nlibs = [\n    Exp,\n    Psy,\n    Dots,\n    utils,\n    datatable,\n    samplers,\n    stimresp,\n    layout,\n    design,\n    canvas,\n    html,\n    components,\n    factory,\n    match\n];\nfor (_i = 0, _len = libs.length; _i < _len; _i++) {\n    lib = libs[_i];\n    include(lib);\n}\nexports.Q = Q;\nexports._ = _;\nexports.Kinetic = Kinetic;\nexports.csv = csv;\nexports.match = match;\nif (!String.prototype.trim) {\n    String.prototype.trim = function () {\n        return this.replace(/^\\s+|\\s+$/g, '');\n    };\n}","map":"{\"version\":3,\"sources\":[\"src/main.coffee\"],\"names\":[\"Dots\",\"Exp\",\"Kinetic\",\"Psy\",\"Q\",\"canvas\",\"components\",\"csv\",\"datatable\",\"design\",\"factory\",\"html\",\"include\",\"layout\",\"lib\",\"libs\",\"match\",\"samplers\",\"stimresp\",\"utils\",\"_\",\"_i\",\"_len\",\"require\",\"key\",\"value\",\"_results\",\"push\",\"exports\",\"length\",\"String\",\"prototype\",\"trim\",\"replace\"],\"mappings\":\"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\"}","lineCount":58,"mtime":1391547870000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/src/elements.js","canonicalName":"src/elements.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/psycloud.js","canonicalName":"src/psycloud.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/dotmotion.js","canonicalName":"src/dotmotion.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/utils.js","canonicalName":"src/utils.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/datatable.js","canonicalName":"src/datatable.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/samplers.js","canonicalName":"src/samplers.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/layout.js","canonicalName":"src/layout.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/design.js","canonicalName":"src/design.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/canvas/canvas.js","canonicalName":"src/components/canvas/canvas.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/html/html.js","canonicalName":"src/components/html/html.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/components.js","canonicalName":"src/components/components.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/factory.js","canonicalName":"src/factory.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/q/q.js","canonicalName":"node_modules/q/q.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/jquery.csv.js","canonicalName":"jslibs/jquery.csv.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/coffee-pattern/pattern.js","canonicalName":"node_modules/coffee-pattern/pattern.js","isNpmModule":true,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"realCanonicalName":null,"src":"Exp = require(\"./elements\")\nPsy = require(\"./psycloud\")\nDots = require(\"./dotmotion\")\nutils = require(\"./utils\")\ndatatable = require(\"./datatable\")\nsamplers = require(\"./samplers\")\nstimresp = require(\"./stimresp\")\nlayout = require(\"./layout\")\ndesign = require(\"./design\")\ncanvas = require(\"./components/canvas/canvas\")\nhtml = require(\"./components/html/html\")\ncomponents = require(\"./components/components\")\nfactory = require(\"./factory\")\nKinetic = require(\"../jslibs/kinetic\").Kinetic\n_ = require('lodash')\nQ = require(\"q\")\n\ncsv = require('../jslibs/jquery.csv.js')\n{match} = require(\"coffee-pattern\")\n\n\ninclude = (lib) ->\n  for key, value of lib\n    exports[key] = value\n\n#libs = [Exp, Psy, Dots, utils, datatable, samplers, stimresp, layout]\n\nlibs = [Exp, Psy, Dots, utils, datatable, samplers, stimresp, layout, design, canvas, html, components, factory, match]\n\nfor lib in libs\n  include(lib)\n\n\nexports.Q = Q\nexports._ = _\nexports.Kinetic = Kinetic\nexports.csv = csv\nexports.match = match\n#exports.recline = recline\n\n\nif not String.prototype.trim\n  String.prototype.trim = ->\n    this.replace(/^\\s+|\\s+$/g,'')\n\n\n\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/node_modules/coffee-pattern/pattern.js":{"id":19,"canonicalName":"node_modules/coffee-pattern/pattern.js","code":"(function () {\n    var divide_list, get_type, __slice = [].slice;\n    get_type = function (varable) {\n        var as_string;\n        as_string = Object.prototype.toString.call(varable);\n        return as_string.slice(1, -1).split(' ')[1].toLowerCase();\n    };\n    divide_list = function (stack, long_list) {\n        var keys;\n        if (long_list.length > 0) {\n            if (get_type(long_list[0]) === 'object') {\n                keys = Object.keys(long_list[0]);\n                keys.forEach(function (key) {\n                    return stack.push({\n                        pattern: key,\n                        result: long_list[0][key]\n                    });\n                });\n                return divide_list(stack, long_list.slice(1));\n            } else {\n                stack.push({\n                    pattern: long_list[0],\n                    result: long_list[1]\n                });\n                return divide_list(stack, long_list.slice(2));\n            }\n        } else {\n            return stack;\n        }\n    };\n    exports.match = function () {\n        var choices, chosen, data, possible, sure;\n        data = arguments[0], choices = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n        possible = divide_list([], choices).filter(function (solution) {\n            var the_type;\n            the_type = get_type(solution.pattern);\n            if (solution.pattern === void 0) {\n                return true;\n            } else if (the_type === 'regexp') {\n                if (get_type(data) === 'string') {\n                    return data.match(solution.pattern);\n                } else {\n                    return false;\n                }\n            } else if (the_type === 'function') {\n                return solution.pattern(data);\n            } else {\n                return data === solution.pattern;\n            }\n        });\n        sure = possible.filter(function (solution) {\n            return solution.pattern != null;\n        });\n        chosen = sure.length > 0 ? sure[0] : possible[0];\n        if (chosen != null) {\n            if (get_type(chosen.result) === 'function') {\n                return chosen.result(data);\n            } else {\n                return chosen.result;\n            }\n        } else {\n            return chosen;\n        }\n    };\n}.call(this));","map":"{\"version\":3,\"sources\":[\"node_modules/coffee-pattern/pattern.js\"],\"names\":[\"divide_list\",\"get_type\",\"__slice\",\"slice\",\"varable\",\"as_string\",\"Object\",\"prototype\",\"toString\",\"call\",\"split\",\"toLowerCase\",\"stack\",\"long_list\",\"keys\",\"length\",\"forEach\",\"key\",\"push\",\"pattern\",\"result\",\"exports\",\"match\",\"choices\",\"chosen\",\"data\",\"possible\",\"sure\",\"arguments\",\"filter\",\"solution\",\"the_type\"],\"mappings\":\"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\"}","lineCount":65,"mtime":1391547282000,"deps":[],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":true,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.6.3\n(function() {\n  var divide_list, get_type,\n    __slice = [].slice;\n\n  get_type = function(varable) {\n    var as_string;\n    as_string = Object.prototype.toString.call(varable);\n    return as_string.slice(1, -1).split(' ')[1].toLowerCase();\n  };\n\n  divide_list = function(stack, long_list) {\n    var keys;\n    if (long_list.length > 0) {\n      if ((get_type(long_list[0])) === 'object') {\n        keys = Object.keys(long_list[0]);\n        keys.forEach(function(key) {\n          return stack.push({\n            pattern: key,\n            result: long_list[0][key]\n          });\n        });\n        return divide_list(stack, long_list.slice(1));\n      } else {\n        stack.push({\n          pattern: long_list[0],\n          result: long_list[1]\n        });\n        return divide_list(stack, long_list.slice(2));\n      }\n    } else {\n      return stack;\n    }\n  };\n\n  exports.match = function() {\n    var choices, chosen, data, possible, sure;\n    data = arguments[0], choices = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n    possible = (divide_list([], choices)).filter(function(solution) {\n      var the_type;\n      the_type = get_type(solution.pattern);\n      if (solution.pattern === void 0) {\n        return true;\n      } else if (the_type === 'regexp') {\n        if ((get_type(data)) === 'string') {\n          return data.match(solution.pattern);\n        } else {\n          return false;\n        }\n      } else if (the_type === 'function') {\n        return solution.pattern(data);\n      } else {\n        return data === solution.pattern;\n      }\n    });\n    sure = possible.filter(function(solution) {\n      return solution.pattern != null;\n    });\n    chosen = sure.length > 0 ? sure[0] : possible[0];\n    if (chosen != null) {\n      if ((get_type(chosen.result)) === 'function') {\n        return chosen.result(data);\n      } else {\n        return chosen.result;\n      }\n    } else {\n      return chosen;\n    }\n  };\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/jslibs/jquery.csv.js":{"id":18,"canonicalName":"jslibs/jquery.csv.js","code":"RegExp.escape = function (s) {\n    return s.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n};\n(function (undefined) {\n    'use strict';\n    var $;\n    if (typeof jQuery !== 'undefined' && jQuery) {\n        $ = jQuery;\n    } else {\n        $ = {};\n    }\n    $.csv = {\n        defaults: {\n            separator: ',',\n            delimiter: '\"',\n            headers: true\n        },\n        hooks: {\n            castToScalar: function (value, state) {\n                var hasDot = /\\./;\n                if (isNaN(value)) {\n                    return value;\n                } else {\n                    if (hasDot.test(value)) {\n                        return parseFloat(value);\n                    } else {\n                        var integer = parseInt(value);\n                        if (isNaN(integer)) {\n                            return null;\n                        } else {\n                            return integer;\n                        }\n                    }\n                }\n            }\n        },\n        parsers: {\n            parse: function (csv, options) {\n                var separator = options.separator;\n                var delimiter = options.delimiter;\n                if (!options.state.rowNum) {\n                    options.state.rowNum = 1;\n                }\n                if (!options.state.colNum) {\n                    options.state.colNum = 1;\n                }\n                var data = [];\n                var entry = [];\n                var state = 0;\n                var value = '';\n                var exit = false;\n                function endOfEntry() {\n                    state = 0;\n                    value = '';\n                    if (options.start && options.state.rowNum < options.start) {\n                        entry = [];\n                        options.state.rowNum++;\n                        options.state.colNum = 1;\n                        return;\n                    }\n                    if (options.onParseEntry === undefined) {\n                        data.push(entry);\n                    } else {\n                        var hookVal = options.onParseEntry(entry, options.state);\n                        if (hookVal !== false) {\n                            data.push(hookVal);\n                        }\n                    }\n                    entry = [];\n                    if (options.end && options.state.rowNum >= options.end) {\n                        exit = true;\n                    }\n                    options.state.rowNum++;\n                    options.state.colNum = 1;\n                }\n                function endOfValue() {\n                    if (options.onParseValue === undefined) {\n                        entry.push(value);\n                    } else {\n                        var hook = options.onParseValue(value, options.state);\n                        if (hook !== false) {\n                            entry.push(hook);\n                        }\n                    }\n                    value = '';\n                    state = 0;\n                    options.state.colNum++;\n                }\n                var escSeparator = RegExp.escape(separator);\n                var escDelimiter = RegExp.escape(delimiter);\n                var match = /(D|S|\\r\\n|\\n|\\r|[^DS\\r\\n]+)/;\n                var matchSrc = match.source;\n                matchSrc = matchSrc.replace(/S/g, escSeparator);\n                matchSrc = matchSrc.replace(/D/g, escDelimiter);\n                match = RegExp(matchSrc, 'gm');\n                csv.replace(match, function (m0) {\n                    if (exit) {\n                        return;\n                    }\n                    switch (state) {\n                    case 0:\n                        if (m0 === separator) {\n                            value += '';\n                            endOfValue();\n                            break;\n                        }\n                        if (m0 === delimiter) {\n                            state = 1;\n                            break;\n                        }\n                        if (/^(\\r\\n|\\n|\\r)$/.test(m0)) {\n                            endOfValue();\n                            endOfEntry();\n                            break;\n                        }\n                        value += m0;\n                        state = 3;\n                        break;\n                    case 1:\n                        if (m0 === delimiter) {\n                            state = 2;\n                            break;\n                        }\n                        value += m0;\n                        state = 1;\n                        break;\n                    case 2:\n                        if (m0 === delimiter) {\n                            value += m0;\n                            state = 1;\n                            break;\n                        }\n                        if (m0 === separator) {\n                            endOfValue();\n                            break;\n                        }\n                        if (/^(\\r\\n|\\n|\\r)$/.test(m0)) {\n                            endOfValue();\n                            endOfEntry();\n                            break;\n                        }\n                        throw new Error('CSVDataError: Illegal State [Row:' + options.state.rowNum + '][Col:' + options.state.colNum + ']');\n                    case 3:\n                        if (m0 === separator) {\n                            endOfValue();\n                            break;\n                        }\n                        if (/^(\\r\\n|\\n|\\r)$/.test(m0)) {\n                            endOfValue();\n                            endOfEntry();\n                            break;\n                        }\n                        if (m0 === delimiter) {\n                            throw new Error('CSVDataError: Illegal Quote [Row:' + options.state.rowNum + '][Col:' + options.state.colNum + ']');\n                        }\n                        throw new Error('CSVDataError: Illegal Data [Row:' + options.state.rowNum + '][Col:' + options.state.colNum + ']');\n                    default:\n                        throw new Error('CSVDataError: Unknown State [Row:' + options.state.rowNum + '][Col:' + options.state.colNum + ']');\n                    }\n                });\n                if (entry.length !== 0) {\n                    endOfValue();\n                    endOfEntry();\n                }\n                return data;\n            },\n            splitLines: function (csv, options) {\n                var separator = options.separator;\n                var delimiter = options.delimiter;\n                if (!options.state.rowNum) {\n                    options.state.rowNum = 1;\n                }\n                var entries = [];\n                var state = 0;\n                var entry = '';\n                var exit = false;\n                function endOfLine() {\n                    state = 0;\n                    if (options.start && options.state.rowNum < options.start) {\n                        entry = '';\n                        options.state.rowNum++;\n                        return;\n                    }\n                    if (options.onParseEntry === undefined) {\n                        entries.push(entry);\n                    } else {\n                        var hookVal = options.onParseEntry(entry, options.state);\n                        if (hookVal !== false) {\n                            entries.push(hookVal);\n                        }\n                    }\n                    entry = '';\n                    if (options.end && options.state.rowNum >= options.end) {\n                        exit = true;\n                    }\n                    options.state.rowNum++;\n                }\n                var escSeparator = RegExp.escape(separator);\n                var escDelimiter = RegExp.escape(delimiter);\n                var match = /(D|S|\\n|\\r|[^DS\\r\\n]+)/;\n                var matchSrc = match.source;\n                matchSrc = matchSrc.replace(/S/g, escSeparator);\n                matchSrc = matchSrc.replace(/D/g, escDelimiter);\n                match = RegExp(matchSrc, 'gm');\n                csv.replace(match, function (m0) {\n                    if (exit) {\n                        return;\n                    }\n                    switch (state) {\n                    case 0:\n                        if (m0 === separator) {\n                            entry += m0;\n                            state = 0;\n                            break;\n                        }\n                        if (m0 === delimiter) {\n                            entry += m0;\n                            state = 1;\n                            break;\n                        }\n                        if (m0 === '\\n') {\n                            endOfLine();\n                            break;\n                        }\n                        if (/^\\r$/.test(m0)) {\n                            break;\n                        }\n                        entry += m0;\n                        state = 3;\n                        break;\n                    case 1:\n                        if (m0 === delimiter) {\n                            entry += m0;\n                            state = 2;\n                            break;\n                        }\n                        entry += m0;\n                        state = 1;\n                        break;\n                    case 2:\n                        var prevChar = entry.substr(entry.length - 1);\n                        if (m0 === delimiter && prevChar === delimiter) {\n                            entry += m0;\n                            state = 1;\n                            break;\n                        }\n                        if (m0 === separator) {\n                            entry += m0;\n                            state = 0;\n                            break;\n                        }\n                        if (m0 === '\\n') {\n                            endOfLine();\n                            break;\n                        }\n                        if (m0 === '\\r') {\n                            break;\n                        }\n                        throw new Error('CSVDataError: Illegal state [Row:' + options.state.rowNum + ']');\n                    case 3:\n                        if (m0 === separator) {\n                            entry += m0;\n                            state = 0;\n                            break;\n                        }\n                        if (m0 === '\\n') {\n                            endOfLine();\n                            break;\n                        }\n                        if (m0 === '\\r') {\n                            break;\n                        }\n                        if (m0 === delimiter) {\n                            throw new Error('CSVDataError: Illegal quote [Row:' + options.state.rowNum + ']');\n                        }\n                        throw new Error('CSVDataError: Illegal state [Row:' + options.state.rowNum + ']');\n                    default:\n                        throw new Error('CSVDataError: Unknown state [Row:' + options.state.rowNum + ']');\n                    }\n                });\n                if (entry !== '') {\n                    endOfLine();\n                }\n                return entries;\n            },\n            parseEntry: function (csv, options) {\n                var separator = options.separator;\n                var delimiter = options.delimiter;\n                if (!options.state.rowNum) {\n                    options.state.rowNum = 1;\n                }\n                if (!options.state.colNum) {\n                    options.state.colNum = 1;\n                }\n                var entry = [];\n                var state = 0;\n                var value = '';\n                function endOfValue() {\n                    if (options.onParseValue === undefined) {\n                        entry.push(value);\n                    } else {\n                        var hook = options.onParseValue(value, options.state);\n                        if (hook !== false) {\n                            entry.push(hook);\n                        }\n                    }\n                    value = '';\n                    state = 0;\n                    options.state.colNum++;\n                }\n                if (!options.match) {\n                    var escSeparator = RegExp.escape(separator);\n                    var escDelimiter = RegExp.escape(delimiter);\n                    var match = /(D|S|\\n|\\r|[^DS\\r\\n]+)/;\n                    var matchSrc = match.source;\n                    matchSrc = matchSrc.replace(/S/g, escSeparator);\n                    matchSrc = matchSrc.replace(/D/g, escDelimiter);\n                    options.match = RegExp(matchSrc, 'gm');\n                }\n                csv.replace(options.match, function (m0) {\n                    switch (state) {\n                    case 0:\n                        if (m0 === separator) {\n                            value += '';\n                            endOfValue();\n                            break;\n                        }\n                        if (m0 === delimiter) {\n                            state = 1;\n                            break;\n                        }\n                        if (m0 === '\\n' || m0 === '\\r') {\n                            break;\n                        }\n                        value += m0;\n                        state = 3;\n                        break;\n                    case 1:\n                        if (m0 === delimiter) {\n                            state = 2;\n                            break;\n                        }\n                        value += m0;\n                        state = 1;\n                        break;\n                    case 2:\n                        if (m0 === delimiter) {\n                            value += m0;\n                            state = 1;\n                            break;\n                        }\n                        if (m0 === separator) {\n                            endOfValue();\n                            break;\n                        }\n                        if (m0 === '\\n' || m0 === '\\r') {\n                            break;\n                        }\n                        throw new Error('CSVDataError: Illegal State [Row:' + options.state.rowNum + '][Col:' + options.state.colNum + ']');\n                    case 3:\n                        if (m0 === separator) {\n                            endOfValue();\n                            break;\n                        }\n                        if (m0 === '\\n' || m0 === '\\r') {\n                            break;\n                        }\n                        if (m0 === delimiter) {\n                            throw new Error('CSVDataError: Illegal Quote [Row:' + options.state.rowNum + '][Col:' + options.state.colNum + ']');\n                        }\n                        throw new Error('CSVDataError: Illegal Data [Row:' + options.state.rowNum + '][Col:' + options.state.colNum + ']');\n                    default:\n                        throw new Error('CSVDataError: Unknown State [Row:' + options.state.rowNum + '][Col:' + options.state.colNum + ']');\n                    }\n                });\n                endOfValue();\n                return entry;\n            }\n        },\n        helpers: {\n            collectPropertyNames: function (objects) {\n                var o, propName, props = [];\n                for (o in objects) {\n                    for (propName in objects[o]) {\n                        if (objects[o].hasOwnProperty(propName) && props.indexOf(propName) < 0 && typeof objects[o][propName] !== 'function') {\n                            props.push(propName);\n                        }\n                    }\n                }\n                return props;\n            }\n        },\n        toArray: function (csv, options, callback) {\n            var options = options !== undefined ? options : {};\n            var config = {};\n            config.callback = callback !== undefined && typeof callback === 'function' ? callback : false;\n            config.separator = 'separator' in options ? options.separator : $.csv.defaults.separator;\n            config.delimiter = 'delimiter' in options ? options.delimiter : $.csv.defaults.delimiter;\n            var state = options.state !== undefined ? options.state : {};\n            var options = {\n                    delimiter: config.delimiter,\n                    separator: config.separator,\n                    onParseEntry: options.onParseEntry,\n                    onParseValue: options.onParseValue,\n                    state: state\n                };\n            var entry = $.csv.parsers.parseEntry(csv, options);\n            if (!config.callback) {\n                return entry;\n            } else {\n                config.callback('', entry);\n            }\n        },\n        toArrays: function (csv, options, callback) {\n            var options = options !== undefined ? options : {};\n            var config = {};\n            config.callback = callback !== undefined && typeof callback === 'function' ? callback : false;\n            config.separator = 'separator' in options ? options.separator : $.csv.defaults.separator;\n            config.delimiter = 'delimiter' in options ? options.delimiter : $.csv.defaults.delimiter;\n            var data = [];\n            var options = {\n                    delimiter: config.delimiter,\n                    separator: config.separator,\n                    onParseEntry: options.onParseEntry,\n                    onParseValue: options.onParseValue,\n                    start: options.start,\n                    end: options.end,\n                    state: {\n                        rowNum: 1,\n                        colNum: 1\n                    }\n                };\n            data = $.csv.parsers.parse(csv, options);\n            if (!config.callback) {\n                return data;\n            } else {\n                config.callback('', data);\n            }\n        },\n        toObjects: function (csv, options, callback) {\n            var options = options !== undefined ? options : {};\n            var config = {};\n            config.callback = callback !== undefined && typeof callback === 'function' ? callback : false;\n            config.separator = 'separator' in options ? options.separator : $.csv.defaults.separator;\n            config.delimiter = 'delimiter' in options ? options.delimiter : $.csv.defaults.delimiter;\n            config.headers = 'headers' in options ? options.headers : $.csv.defaults.headers;\n            options.start = 'start' in options ? options.start : 1;\n            if (config.headers) {\n                options.start++;\n            }\n            if (options.end && config.headers) {\n                options.end++;\n            }\n            var lines = [];\n            var data = [];\n            var options = {\n                    delimiter: config.delimiter,\n                    separator: config.separator,\n                    onParseEntry: options.onParseEntry,\n                    onParseValue: options.onParseValue,\n                    start: options.start,\n                    end: options.end,\n                    state: {\n                        rowNum: 1,\n                        colNum: 1\n                    },\n                    match: false,\n                    transform: options.transform\n                };\n            var headerOptions = {\n                    delimiter: config.delimiter,\n                    separator: config.separator,\n                    start: 1,\n                    end: 1,\n                    state: {\n                        rowNum: 1,\n                        colNum: 1\n                    }\n                };\n            var headerLine = $.csv.parsers.splitLines(csv, headerOptions);\n            var headers = $.csv.toArray(headerLine[0], options);\n            var lines = $.csv.parsers.splitLines(csv, options);\n            options.state.colNum = 1;\n            if (headers) {\n                options.state.rowNum = 2;\n            } else {\n                options.state.rowNum = 1;\n            }\n            for (var i = 0, len = lines.length; i < len; i++) {\n                var entry = $.csv.toArray(lines[i], options);\n                var object = {};\n                for (var j in headers) {\n                    object[headers[j]] = entry[j];\n                }\n                if (options.transform !== undefined) {\n                    data.push(options.transform.call(undefined, object));\n                } else {\n                    data.push(object);\n                }\n                options.state.rowNum++;\n            }\n            if (!config.callback) {\n                return data;\n            } else {\n                config.callback('', data);\n            }\n        },\n        fromArrays: function (arrays, options, callback) {\n            var options = options !== undefined ? options : {};\n            var config = {};\n            config.callback = callback !== undefined && typeof callback === 'function' ? callback : false;\n            config.separator = 'separator' in options ? options.separator : $.csv.defaults.separator;\n            config.delimiter = 'delimiter' in options ? options.delimiter : $.csv.defaults.delimiter;\n            var output = '', line, lineValues, i, j;\n            for (i = 0; i < arrays.length; i++) {\n                line = arrays[i];\n                lineValues = [];\n                for (j = 0; j < line.length; j++) {\n                    var strValue = line[j] === undefined || line[j] === null ? '' : line[j].toString();\n                    if (strValue.indexOf(config.delimiter) > -1) {\n                        strValue = strValue.replace(config.delimiter, config.delimiter + config.delimiter);\n                    }\n                    var escMatcher = '\\n|\\r|S|D';\n                    escMatcher = escMatcher.replace('S', config.separator);\n                    escMatcher = escMatcher.replace('D', config.delimiter);\n                    if (strValue.search(escMatcher) > -1) {\n                        strValue = config.delimiter + strValue + config.delimiter;\n                    }\n                    lineValues.push(strValue);\n                }\n                output += lineValues.join(config.separator) + '\\r\\n';\n            }\n            if (!config.callback) {\n                return output;\n            } else {\n                config.callback('', output);\n            }\n        },\n        fromObjects: function (objects, options, callback) {\n            var options = options !== undefined ? options : {};\n            var config = {};\n            config.callback = callback !== undefined && typeof callback === 'function' ? callback : false;\n            config.separator = 'separator' in options ? options.separator : $.csv.defaults.separator;\n            config.delimiter = 'delimiter' in options ? options.delimiter : $.csv.defaults.delimiter;\n            config.headers = 'headers' in options ? options.headers : $.csv.defaults.headers;\n            config.sortOrder = 'sortOrder' in options ? options.sortOrder : 'declare';\n            config.manualOrder = 'manualOrder' in options ? options.manualOrder : [];\n            config.transform = options.transform;\n            if (typeof config.manualOrder === 'string') {\n                config.manualOrder = $.csv.toArray(config.manualOrder, config);\n            }\n            if (config.transform !== undefined) {\n                var origObjects = objects;\n                objects = [];\n                var i;\n                for (i = 0; i < origObjects.length; i++) {\n                    objects.push(config.transform.call(undefined, origObjects[i]));\n                }\n            }\n            var props = $.csv.helpers.collectPropertyNames(objects);\n            if (config.sortOrder === 'alpha') {\n                props.sort();\n            }\n            if (config.manualOrder.length > 0) {\n                var propsManual = [].concat(config.manualOrder);\n                var p;\n                for (p = 0; p < props.length; p++) {\n                    if (propsManual.indexOf(props[p]) < 0) {\n                        propsManual.push(props[p]);\n                    }\n                }\n                props = propsManual;\n            }\n            var o, p, line, output = [], propName;\n            if (config.headers) {\n                output.push(props);\n            }\n            for (o = 0; o < objects.length; o++) {\n                line = [];\n                for (p = 0; p < props.length; p++) {\n                    propName = props[p];\n                    if (propName in objects[o] && typeof objects[o][propName] !== 'function') {\n                        line.push(objects[o][propName]);\n                    } else {\n                        line.push('');\n                    }\n                }\n                output.push(line);\n            }\n            return $.csv.fromArrays(output, options, config.callback);\n        }\n    };\n    $.csvEntry2Array = $.csv.toArray;\n    $.csv2Array = $.csv.toArrays;\n    $.csv2Dictionary = $.csv.toObjects;\n    if (typeof module !== 'undefined' && module.exports) {\n        module.exports = $.csv;\n    }\n}.call(this));","map":"{\"version\":3,\"sources\":[\"jslibs/jquery.csv.js\"],\"names\":[\"RegExp\",\"escape\",\"s\",\"replace\",\"undefined\",\"$\",\"jQuery\",\"csv\",\"defaults\",\"separator\",\"delimiter\",\"headers\",\"hooks\",\"castToScalar\",\"value\",\"state\",\"hasDot\",\"isNaN\",\"test\",\"parseFloat\",\"integer\",\"parseInt\",\"parsers\",\"parse\",\"options\",\"rowNum\",\"colNum\",\"data\",\"entry\",\"exit\",\"endOfEntry\",\"start\",\"onParseEntry\",\"push\",\"hookVal\",\"end\",\"endOfValue\",\"onParseValue\",\"hook\",\"escSeparator\",\"escDelimiter\",\"match\",\"matchSrc\",\"source\",\"m0\",\"Error\",\"length\",\"splitLines\",\"entries\",\"endOfLine\",\"prevChar\",\"substr\",\"parseEntry\",\"helpers\",\"collectPropertyNames\",\"objects\",\"o\",\"propName\",\"props\",\"hasOwnProperty\",\"indexOf\",\"toArray\",\"callback\",\"config\",\"toArrays\",\"toObjects\",\"lines\",\"transform\",\"headerOptions\",\"headerLine\",\"i\",\"len\",\"object\",\"j\",\"call\",\"fromArrays\",\"arrays\",\"output\",\"line\",\"lineValues\",\"strValue\",\"toString\",\"escMatcher\",\"search\",\"join\",\"fromObjects\",\"sortOrder\",\"manualOrder\",\"origObjects\",\"sort\",\"propsManual\",\"concat\",\"p\",\"csvEntry2Array\",\"csv2Array\",\"csv2Dictionary\",\"module\",\"exports\"],\"mappings\":\"AA6BAA,MAAA,CAAOC,MAAP,GAAe,UAASC,CAAT,EAAY;AAAA,IACvB,OAAOA,CAAA,CAAEC,OAAF,CAAU,wBAAV,EAAoC,MAApC,CAAP,CADuB;AAAA,CAA3B,CA7BA;AAiCA,CAAC,UAAUC,SAAV,EAAqB;AAAA,IACpB,aADoB;AAAA,IAGpB,IAAIC,CAAJ,CAHoB;AAAA,IAMpB,IAAI,OAAOC,MAAP,KAAkB,WAAlB,IAAiCA,MAArC,EAA6C;AAAA,QAC3CD,CAAA,GAAIC,MAAJ,CAD2C;AAAA,KAA7C,MAEO;AAAA,QACLD,CAAA,GAAI,EAAJ,CADK;AAAA,KARa;AAAA,IAkBpBA,CAAA,CAAEE,GAAF,GAAQ;AAAA,QACNC,QAAA,EAAU;AAAA,YACRC,SAAA,EAAU,GADF;AAAA,YAERC,SAAA,EAAU,GAFF;AAAA,YAGRC,OAAA,EAAQ,IAHA;AAAA,SADJ;AAAA,QAONC,KAAA,EAAO;AAAA,YACLC,YAAA,EAAc,UAASC,KAAT,EAAgBC,KAAhB,EAAuB;AAAA,gBACnC,IAAIC,MAAA,GAAS,IAAb,CADmC;AAAA,gBAEnC,IAAIC,KAAA,CAAMH,KAAN,CAAJ,EAAkB;AAAA,oBAChB,OAAOA,KAAP,CADgB;AAAA,iBAAlB,MAEO;AAAA,oBACL,IAAIE,MAAA,CAAOE,IAAP,CAAYJ,KAAZ,CAAJ,EAAwB;AAAA,wBACtB,OAAOK,UAAA,CAAWL,KAAX,CAAP,CADsB;AAAA,qBAAxB,MAEO;AAAA,wBACL,IAAIM,OAAA,GAAUC,QAAA,CAASP,KAAT,CAAd,CADK;AAAA,wBAEL,IAAGG,KAAA,CAAMG,OAAN,CAAH,EAAmB;AAAA,4BACjB,OAAO,IAAP,CADiB;AAAA,yBAAnB,MAEO;AAAA,4BACL,OAAOA,OAAP,CADK;AAAA,yBAJF;AAAA,qBAHF;AAAA,iBAJ4B;AAAA,aADhC;AAAA,SAPD;AAAA,QA2BNE,OAAA,EAAS;AAAA,YACPC,KAAA,EAAO,UAAShB,GAAT,EAAciB,OAAd,EAAuB;AAAA,gBAE5B,IAAIf,SAAA,GAAYe,OAAA,CAAQf,SAAxB,CAF4B;AAAA,gBAG5B,IAAIC,SAAA,GAAYc,OAAA,CAAQd,SAAxB,CAH4B;AAAA,gBAM5B,IAAG,CAACc,OAAA,CAAQT,KAAR,CAAcU,MAAlB,EAA0B;AAAA,oBACxBD,OAAA,CAAQT,KAAR,CAAcU,MAAd,GAAuB,CAAvB,CADwB;AAAA,iBANE;AAAA,gBAS5B,IAAG,CAACD,OAAA,CAAQT,KAAR,CAAcW,MAAlB,EAA0B;AAAA,oBACxBF,OAAA,CAAQT,KAAR,CAAcW,MAAd,GAAuB,CAAvB,CADwB;AAAA,iBATE;AAAA,gBAc5B,IAAIC,IAAA,GAAO,EAAX,CAd4B;AAAA,gBAe5B,IAAIC,KAAA,GAAQ,EAAZ,CAf4B;AAAA,gBAgB5B,IAAIb,KAAA,GAAQ,CAAZ,CAhB4B;AAAA,gBAiB5B,IAAID,KAAA,GAAQ,EAAZ,CAjB4B;AAAA,gBAkB5B,IAAIe,IAAA,GAAO,KAAX,CAlB4B;AAAA,gBAoB5B,SAASC,UAAT,GAAsB;AAAA,oBAEpBf,KAAA,GAAQ,CAAR,CAFoB;AAAA,oBAGpBD,KAAA,GAAQ,EAAR,CAHoB;AAAA,oBAMpB,IAAGU,OAAA,CAAQO,KAAR,IAAiBP,OAAA,CAAQT,KAAR,CAAcU,MAAd,GAAuBD,OAAA,CAAQO,KAAnD,EAA0D;AAAA,wBAExDH,KAAA,GAAQ,EAAR,CAFwD;AAAA,wBAGxDJ,OAAA,CAAQT,KAAR,CAAcU,MAAd,GAHwD;AAAA,wBAIxDD,OAAA,CAAQT,KAAR,CAAcW,MAAd,GAAuB,CAAvB,CAJwD;AAAA,wBAKxD,OALwD;AAAA,qBANtC;AAAA,oBAcpB,IAAGF,OAAA,CAAQQ,YAAR,KAAyB5B,SAA5B,EAAuC;AAAA,wBAErCuB,IAAA,CAAKM,IAAL,CAAUL,KAAV,EAFqC;AAAA,qBAAvC,MAGO;AAAA,wBACL,IAAIM,OAAA,GAAUV,OAAA,CAAQQ,YAAR,CAAqBJ,KAArB,EAA4BJ,OAAA,CAAQT,KAApC,CAAd,CADK;AAAA,wBAGL,IAAGmB,OAAA,KAAY,KAAf,EAAsB;AAAA,4BACpBP,IAAA,CAAKM,IAAL,CAAUC,OAAV,EADoB;AAAA,yBAHjB;AAAA,qBAjBa;AAAA,oBA2BpBN,KAAA,GAAQ,EAAR,CA3BoB;AAAA,oBA8BpB,IAAGJ,OAAA,CAAQW,GAAR,IAAeX,OAAA,CAAQT,KAAR,CAAcU,MAAd,IAAwBD,OAAA,CAAQW,GAAlD,EAAuD;AAAA,wBACrDN,IAAA,GAAO,IAAP,CADqD;AAAA,qBA9BnC;AAAA,oBAmCpBL,OAAA,CAAQT,KAAR,CAAcU,MAAd,GAnCoB;AAAA,oBAoCpBD,OAAA,CAAQT,KAAR,CAAcW,MAAd,GAAuB,CAAvB,CApCoB;AAAA,iBApBM;AAAA,gBA2D5B,SAASU,UAAT,GAAsB;AAAA,oBACpB,IAAGZ,OAAA,CAAQa,YAAR,KAAyBjC,SAA5B,EAAuC;AAAA,wBAErCwB,KAAA,CAAMK,IAAN,CAAWnB,KAAX,EAFqC;AAAA,qBAAvC,MAGO;AAAA,wBACL,IAAIwB,IAAA,GAAOd,OAAA,CAAQa,YAAR,CAAqBvB,KAArB,EAA4BU,OAAA,CAAQT,KAApC,CAAX,CADK;AAAA,wBAGL,IAAGuB,IAAA,KAAS,KAAZ,EAAmB;AAAA,4BACjBV,KAAA,CAAMK,IAAN,CAAWK,IAAX,EADiB;AAAA,yBAHd;AAAA,qBAJa;AAAA,oBAapBxB,KAAA,GAAQ,EAAR,CAboB;AAAA,oBAcpBC,KAAA,GAAQ,CAAR,CAdoB;AAAA,oBAgBpBS,OAAA,CAAQT,KAAR,CAAcW,MAAd,GAhBoB;AAAA,iBA3DM;AAAA,gBA+E5B,IAAIa,YAAA,GAAevC,MAAA,CAAOC,MAAP,CAAcQ,SAAd,CAAnB,CA/E4B;AAAA,gBAgF5B,IAAI+B,YAAA,GAAexC,MAAA,CAAOC,MAAP,CAAcS,SAAd,CAAnB,CAhF4B;AAAA,gBAmF5B,IAAI+B,KAAA,GAAQ,6BAAZ,CAnF4B;AAAA,gBAoF5B,IAAIC,QAAA,GAAWD,KAAA,CAAME,MAArB,CApF4B;AAAA,gBAqF5BD,QAAA,GAAWA,QAAA,CAASvC,OAAT,CAAiB,IAAjB,EAAuBoC,YAAvB,CAAX,CArF4B;AAAA,gBAsF5BG,QAAA,GAAWA,QAAA,CAASvC,OAAT,CAAiB,IAAjB,EAAuBqC,YAAvB,CAAX,CAtF4B;AAAA,gBAuF5BC,KAAA,GAAQzC,MAAA,CAAO0C,QAAP,EAAiB,IAAjB,CAAR,CAvF4B;AAAA,gBA2F5BnC,GAAA,CAAIJ,OAAJ,CAAYsC,KAAZ,EAAmB,UAAUG,EAAV,EAAc;AAAA,oBAC/B,IAAGf,IAAH,EAAS;AAAA,wBACP,OADO;AAAA,qBADsB;AAAA,oBAI/B,QAAQd,KAAR;AAAA,oBAEE,KAAK,CAAL;AAAA,wBAEE,IAAI6B,EAAA,KAAOnC,SAAX,EAAsB;AAAA,4BACpBK,KAAA,IAAS,EAAT,CADoB;AAAA,4BAEpBsB,UAAA,GAFoB;AAAA,4BAGpB,MAHoB;AAAA,yBAFxB;AAAA,wBAQE,IAAIQ,EAAA,KAAOlC,SAAX,EAAsB;AAAA,4BACpBK,KAAA,GAAQ,CAAR,CADoB;AAAA,4BAEpB,MAFoB;AAAA,yBARxB;AAAA,wBAaE,IAAI,iBAAiBG,IAAjB,CAAsB0B,EAAtB,CAAJ,EAA+B;AAAA,4BAC7BR,UAAA,GAD6B;AAAA,4BAE7BN,UAAA,GAF6B;AAAA,4BAG7B,MAH6B;AAAA,yBAbjC;AAAA,wBAmBEhB,KAAA,IAAS8B,EAAT,CAnBF;AAAA,wBAoBE7B,KAAA,GAAQ,CAAR,CApBF;AAAA,wBAqBE,MAvBJ;AAAA,oBA0BE,KAAK,CAAL;AAAA,wBAEE,IAAI6B,EAAA,KAAOlC,SAAX,EAAsB;AAAA,4BACpBK,KAAA,GAAQ,CAAR,CADoB;AAAA,4BAEpB,MAFoB;AAAA,yBAFxB;AAAA,wBAOED,KAAA,IAAS8B,EAAT,CAPF;AAAA,wBAQE7B,KAAA,GAAQ,CAAR,CARF;AAAA,wBASE,MAnCJ;AAAA,oBAsCE,KAAK,CAAL;AAAA,wBAEE,IAAI6B,EAAA,KAAOlC,SAAX,EAAsB;AAAA,4BACpBI,KAAA,IAAS8B,EAAT,CADoB;AAAA,4BAEpB7B,KAAA,GAAQ,CAAR,CAFoB;AAAA,4BAGpB,MAHoB;AAAA,yBAFxB;AAAA,wBAQE,IAAI6B,EAAA,KAAOnC,SAAX,EAAsB;AAAA,4BACpB2B,UAAA,GADoB;AAAA,4BAEpB,MAFoB;AAAA,yBARxB;AAAA,wBAaE,IAAI,iBAAiBlB,IAAjB,CAAsB0B,EAAtB,CAAJ,EAA+B;AAAA,4BAC7BR,UAAA,GAD6B;AAAA,4BAE7BN,UAAA,GAF6B;AAAA,4BAG7B,MAH6B;AAAA,yBAbjC;AAAA,wBAmBE,MAAM,IAAIe,KAAJ,CAAU,sCAAsCrB,OAAA,CAAQT,KAAR,CAAcU,MAApD,GAA6D,QAA7D,GAAwED,OAAA,CAAQT,KAAR,CAAcW,MAAtF,GAA+F,GAAzG,CAAN,CAzDJ;AAAA,oBA4DE,KAAK,CAAL;AAAA,wBAEE,IAAIkB,EAAA,KAAOnC,SAAX,EAAsB;AAAA,4BACpB2B,UAAA,GADoB;AAAA,4BAEpB,MAFoB;AAAA,yBAFxB;AAAA,wBAOE,IAAI,iBAAiBlB,IAAjB,CAAsB0B,EAAtB,CAAJ,EAA+B;AAAA,4BAC7BR,UAAA,GAD6B;AAAA,4BAE7BN,UAAA,GAF6B;AAAA,4BAG7B,MAH6B;AAAA,yBAPjC;AAAA,wBAYE,IAAIc,EAAA,KAAOlC,SAAX,EAAsB;AAAA,4BAEpB,MAAM,IAAImC,KAAJ,CAAU,sCAAsCrB,OAAA,CAAQT,KAAR,CAAcU,MAApD,GAA6D,QAA7D,GAAwED,OAAA,CAAQT,KAAR,CAAcW,MAAtF,GAA+F,GAAzG,CAAN,CAFoB;AAAA,yBAZxB;AAAA,wBAiBE,MAAM,IAAImB,KAAJ,CAAU,qCAAqCrB,OAAA,CAAQT,KAAR,CAAcU,MAAnD,GAA4D,QAA5D,GAAuED,OAAA,CAAQT,KAAR,CAAcW,MAArF,GAA8F,GAAxG,CAAN,CA7EJ;AAAA,oBA8EE;AAAA,wBAEE,MAAM,IAAImB,KAAJ,CAAU,sCAAsCrB,OAAA,CAAQT,KAAR,CAAcU,MAApD,GAA6D,QAA7D,GAAwED,OAAA,CAAQT,KAAR,CAAcW,MAAtF,GAA+F,GAAzG,CAAN,CAhFJ;AAAA,qBAJ+B;AAAA,iBAAjC,EA3F4B;AAAA,gBAsL5B,IAAGE,KAAA,CAAMkB,MAAN,KAAiB,CAApB,EAAuB;AAAA,oBACrBV,UAAA,GADqB;AAAA,oBAErBN,UAAA,GAFqB;AAAA,iBAtLK;AAAA,gBA2L5B,OAAOH,IAAP,CA3L4B;AAAA,aADvB;AAAA,YAgMPoB,UAAA,EAAY,UAASxC,GAAT,EAAciB,OAAd,EAAuB;AAAA,gBAEjC,IAAIf,SAAA,GAAYe,OAAA,CAAQf,SAAxB,CAFiC;AAAA,gBAGjC,IAAIC,SAAA,GAAYc,OAAA,CAAQd,SAAxB,CAHiC;AAAA,gBAMjC,IAAG,CAACc,OAAA,CAAQT,KAAR,CAAcU,MAAlB,EAA0B;AAAA,oBACxBD,OAAA,CAAQT,KAAR,CAAcU,MAAd,GAAuB,CAAvB,CADwB;AAAA,iBANO;AAAA,gBAWjC,IAAIuB,OAAA,GAAU,EAAd,CAXiC;AAAA,gBAYjC,IAAIjC,KAAA,GAAQ,CAAZ,CAZiC;AAAA,gBAajC,IAAIa,KAAA,GAAQ,EAAZ,CAbiC;AAAA,gBAcjC,IAAIC,IAAA,GAAO,KAAX,CAdiC;AAAA,gBAgBjC,SAASoB,SAAT,GAAqB;AAAA,oBAEnBlC,KAAA,GAAQ,CAAR,CAFmB;AAAA,oBAKnB,IAAGS,OAAA,CAAQO,KAAR,IAAiBP,OAAA,CAAQT,KAAR,CAAcU,MAAd,GAAuBD,OAAA,CAAQO,KAAnD,EAA0D;AAAA,wBAExDH,KAAA,GAAQ,EAAR,CAFwD;AAAA,wBAGxDJ,OAAA,CAAQT,KAAR,CAAcU,MAAd,GAHwD;AAAA,wBAIxD,OAJwD;AAAA,qBALvC;AAAA,oBAYnB,IAAGD,OAAA,CAAQQ,YAAR,KAAyB5B,SAA5B,EAAuC;AAAA,wBAErC4C,OAAA,CAAQf,IAAR,CAAaL,KAAb,EAFqC;AAAA,qBAAvC,MAGO;AAAA,wBACL,IAAIM,OAAA,GAAUV,OAAA,CAAQQ,YAAR,CAAqBJ,KAArB,EAA4BJ,OAAA,CAAQT,KAApC,CAAd,CADK;AAAA,wBAGL,IAAGmB,OAAA,KAAY,KAAf,EAAsB;AAAA,4BACpBc,OAAA,CAAQf,IAAR,CAAaC,OAAb,EADoB;AAAA,yBAHjB;AAAA,qBAfY;AAAA,oBAwBnBN,KAAA,GAAQ,EAAR,CAxBmB;AAAA,oBA2BnB,IAAGJ,OAAA,CAAQW,GAAR,IAAeX,OAAA,CAAQT,KAAR,CAAcU,MAAd,IAAwBD,OAAA,CAAQW,GAAlD,EAAuD;AAAA,wBACrDN,IAAA,GAAO,IAAP,CADqD;AAAA,qBA3BpC;AAAA,oBAgCnBL,OAAA,CAAQT,KAAR,CAAcU,MAAd,GAhCmB;AAAA,iBAhBY;AAAA,gBAoDjC,IAAIc,YAAA,GAAevC,MAAA,CAAOC,MAAP,CAAcQ,SAAd,CAAnB,CApDiC;AAAA,gBAqDjC,IAAI+B,YAAA,GAAexC,MAAA,CAAOC,MAAP,CAAcS,SAAd,CAAnB,CArDiC;AAAA,gBAwDjC,IAAI+B,KAAA,GAAQ,wBAAZ,CAxDiC;AAAA,gBAyDjC,IAAIC,QAAA,GAAWD,KAAA,CAAME,MAArB,CAzDiC;AAAA,gBA0DjCD,QAAA,GAAWA,QAAA,CAASvC,OAAT,CAAiB,IAAjB,EAAuBoC,YAAvB,CAAX,CA1DiC;AAAA,gBA2DjCG,QAAA,GAAWA,QAAA,CAASvC,OAAT,CAAiB,IAAjB,EAAuBqC,YAAvB,CAAX,CA3DiC;AAAA,gBA4DjCC,KAAA,GAAQzC,MAAA,CAAO0C,QAAP,EAAiB,IAAjB,CAAR,CA5DiC;AAAA,gBAgEjCnC,GAAA,CAAIJ,OAAJ,CAAYsC,KAAZ,EAAmB,UAAUG,EAAV,EAAc;AAAA,oBAC/B,IAAGf,IAAH,EAAS;AAAA,wBACP,OADO;AAAA,qBADsB;AAAA,oBAI/B,QAAQd,KAAR;AAAA,oBAEE,KAAK,CAAL;AAAA,wBAEE,IAAI6B,EAAA,KAAOnC,SAAX,EAAsB;AAAA,4BACpBmB,KAAA,IAASgB,EAAT,CADoB;AAAA,4BAEpB7B,KAAA,GAAQ,CAAR,CAFoB;AAAA,4BAGpB,MAHoB;AAAA,yBAFxB;AAAA,wBAQE,IAAI6B,EAAA,KAAOlC,SAAX,EAAsB;AAAA,4BACpBkB,KAAA,IAASgB,EAAT,CADoB;AAAA,4BAEpB7B,KAAA,GAAQ,CAAR,CAFoB;AAAA,4BAGpB,MAHoB;AAAA,yBARxB;AAAA,wBAcE,IAAI6B,EAAA,KAAO,IAAX,EAAiB;AAAA,4BACfK,SAAA,GADe;AAAA,4BAEf,MAFe;AAAA,yBAdnB;AAAA,wBAmBE,IAAI,OAAO/B,IAAP,CAAY0B,EAAZ,CAAJ,EAAqB;AAAA,4BACnB,MADmB;AAAA,yBAnBvB;AAAA,wBAuBEhB,KAAA,IAASgB,EAAT,CAvBF;AAAA,wBAwBE7B,KAAA,GAAQ,CAAR,CAxBF;AAAA,wBAyBE,MA3BJ;AAAA,oBA8BE,KAAK,CAAL;AAAA,wBAEE,IAAI6B,EAAA,KAAOlC,SAAX,EAAsB;AAAA,4BACpBkB,KAAA,IAASgB,EAAT,CADoB;AAAA,4BAEpB7B,KAAA,GAAQ,CAAR,CAFoB;AAAA,4BAGpB,MAHoB;AAAA,yBAFxB;AAAA,wBAQEa,KAAA,IAASgB,EAAT,CARF;AAAA,wBASE7B,KAAA,GAAQ,CAAR,CATF;AAAA,wBAUE,MAxCJ;AAAA,oBA2CE,KAAK,CAAL;AAAA,wBAEE,IAAImC,QAAA,GAAWtB,KAAA,CAAMuB,MAAN,CAAavB,KAAA,CAAMkB,MAAN,GAAe,CAA5B,CAAf,CAFF;AAAA,wBAGE,IAAIF,EAAA,KAAOlC,SAAP,IAAoBwC,QAAA,KAAaxC,SAArC,EAAgD;AAAA,4BAC9CkB,KAAA,IAASgB,EAAT,CAD8C;AAAA,4BAE9C7B,KAAA,GAAQ,CAAR,CAF8C;AAAA,4BAG9C,MAH8C;AAAA,yBAHlD;AAAA,wBASE,IAAI6B,EAAA,KAAOnC,SAAX,EAAsB;AAAA,4BACpBmB,KAAA,IAASgB,EAAT,CADoB;AAAA,4BAEpB7B,KAAA,GAAQ,CAAR,CAFoB;AAAA,4BAGpB,MAHoB;AAAA,yBATxB;AAAA,wBAeE,IAAI6B,EAAA,KAAO,IAAX,EAAiB;AAAA,4BACfK,SAAA,GADe;AAAA,4BAEf,MAFe;AAAA,yBAfnB;AAAA,wBAoBE,IAAIL,EAAA,KAAO,IAAX,EAAiB;AAAA,4BACf,MADe;AAAA,yBApBnB;AAAA,wBAwBE,MAAM,IAAIC,KAAJ,CAAU,sCAAsCrB,OAAA,CAAQT,KAAR,CAAcU,MAApD,GAA6D,GAAvE,CAAN,CAnEJ;AAAA,oBAsEE,KAAK,CAAL;AAAA,wBAEE,IAAImB,EAAA,KAAOnC,SAAX,EAAsB;AAAA,4BACpBmB,KAAA,IAASgB,EAAT,CADoB;AAAA,4BAEpB7B,KAAA,GAAQ,CAAR,CAFoB;AAAA,4BAGpB,MAHoB;AAAA,yBAFxB;AAAA,wBAQE,IAAI6B,EAAA,KAAO,IAAX,EAAiB;AAAA,4BACfK,SAAA,GADe;AAAA,4BAEf,MAFe;AAAA,yBARnB;AAAA,wBAaE,IAAIL,EAAA,KAAO,IAAX,EAAiB;AAAA,4BACf,MADe;AAAA,yBAbnB;AAAA,wBAiBE,IAAIA,EAAA,KAAOlC,SAAX,EAAsB;AAAA,4BACpB,MAAM,IAAImC,KAAJ,CAAU,sCAAsCrB,OAAA,CAAQT,KAAR,CAAcU,MAApD,GAA6D,GAAvE,CAAN,CADoB;AAAA,yBAjBxB;AAAA,wBAqBE,MAAM,IAAIoB,KAAJ,CAAU,sCAAsCrB,OAAA,CAAQT,KAAR,CAAcU,MAApD,GAA6D,GAAvE,CAAN,CA3FJ;AAAA,oBA4FE;AAAA,wBAEE,MAAM,IAAIoB,KAAJ,CAAU,sCAAsCrB,OAAA,CAAQT,KAAR,CAAcU,MAApD,GAA6D,GAAvE,CAAN,CA9FJ;AAAA,qBAJ+B;AAAA,iBAAjC,EAhEiC;AAAA,gBAyKjC,IAAGG,KAAA,KAAU,EAAb,EAAiB;AAAA,oBACfqB,SAAA,GADe;AAAA,iBAzKgB;AAAA,gBA6KjC,OAAOD,OAAP,CA7KiC;AAAA,aAhM5B;AAAA,YAiXPI,UAAA,EAAY,UAAS7C,GAAT,EAAciB,OAAd,EAAuB;AAAA,gBAEjC,IAAIf,SAAA,GAAYe,OAAA,CAAQf,SAAxB,CAFiC;AAAA,gBAGjC,IAAIC,SAAA,GAAYc,OAAA,CAAQd,SAAxB,CAHiC;AAAA,gBAMjC,IAAG,CAACc,OAAA,CAAQT,KAAR,CAAcU,MAAlB,EAA0B;AAAA,oBACxBD,OAAA,CAAQT,KAAR,CAAcU,MAAd,GAAuB,CAAvB,CADwB;AAAA,iBANO;AAAA,gBASjC,IAAG,CAACD,OAAA,CAAQT,KAAR,CAAcW,MAAlB,EAA0B;AAAA,oBACxBF,OAAA,CAAQT,KAAR,CAAcW,MAAd,GAAuB,CAAvB,CADwB;AAAA,iBATO;AAAA,gBAcjC,IAAIE,KAAA,GAAQ,EAAZ,CAdiC;AAAA,gBAejC,IAAIb,KAAA,GAAQ,CAAZ,CAfiC;AAAA,gBAgBjC,IAAID,KAAA,GAAQ,EAAZ,CAhBiC;AAAA,gBAkBjC,SAASsB,UAAT,GAAsB;AAAA,oBACpB,IAAGZ,OAAA,CAAQa,YAAR,KAAyBjC,SAA5B,EAAuC;AAAA,wBAErCwB,KAAA,CAAMK,IAAN,CAAWnB,KAAX,EAFqC;AAAA,qBAAvC,MAGO;AAAA,wBACL,IAAIwB,IAAA,GAAOd,OAAA,CAAQa,YAAR,CAAqBvB,KAArB,EAA4BU,OAAA,CAAQT,KAApC,CAAX,CADK;AAAA,wBAGL,IAAGuB,IAAA,KAAS,KAAZ,EAAmB;AAAA,4BACjBV,KAAA,CAAMK,IAAN,CAAWK,IAAX,EADiB;AAAA,yBAHd;AAAA,qBAJa;AAAA,oBAYpBxB,KAAA,GAAQ,EAAR,CAZoB;AAAA,oBAapBC,KAAA,GAAQ,CAAR,CAboB;AAAA,oBAepBS,OAAA,CAAQT,KAAR,CAAcW,MAAd,GAfoB;AAAA,iBAlBW;AAAA,gBAqCjC,IAAG,CAACF,OAAA,CAAQiB,KAAZ,EAAmB;AAAA,oBAEjB,IAAIF,YAAA,GAAevC,MAAA,CAAOC,MAAP,CAAcQ,SAAd,CAAnB,CAFiB;AAAA,oBAGjB,IAAI+B,YAAA,GAAexC,MAAA,CAAOC,MAAP,CAAcS,SAAd,CAAnB,CAHiB;AAAA,oBAMjB,IAAI+B,KAAA,GAAQ,wBAAZ,CANiB;AAAA,oBAOjB,IAAIC,QAAA,GAAWD,KAAA,CAAME,MAArB,CAPiB;AAAA,oBAQjBD,QAAA,GAAWA,QAAA,CAASvC,OAAT,CAAiB,IAAjB,EAAuBoC,YAAvB,CAAX,CARiB;AAAA,oBASjBG,QAAA,GAAWA,QAAA,CAASvC,OAAT,CAAiB,IAAjB,EAAuBqC,YAAvB,CAAX,CATiB;AAAA,oBAUjBhB,OAAA,CAAQiB,KAAR,GAAgBzC,MAAA,CAAO0C,QAAP,EAAiB,IAAjB,CAAhB,CAViB;AAAA,iBArCc;AAAA,gBAoDjCnC,GAAA,CAAIJ,OAAJ,CAAYqB,OAAA,CAAQiB,KAApB,EAA2B,UAAUG,EAAV,EAAc;AAAA,oBACvC,QAAQ7B,KAAR;AAAA,oBAEE,KAAK,CAAL;AAAA,wBAEE,IAAI6B,EAAA,KAAOnC,SAAX,EAAsB;AAAA,4BACpBK,KAAA,IAAS,EAAT,CADoB;AAAA,4BAEpBsB,UAAA,GAFoB;AAAA,4BAGpB,MAHoB;AAAA,yBAFxB;AAAA,wBAQE,IAAIQ,EAAA,KAAOlC,SAAX,EAAsB;AAAA,4BACpBK,KAAA,GAAQ,CAAR,CADoB;AAAA,4BAEpB,MAFoB;AAAA,yBARxB;AAAA,wBAaE,IAAI6B,EAAA,KAAO,IAAP,IAAeA,EAAA,KAAO,IAA1B,EAAgC;AAAA,4BAC9B,MAD8B;AAAA,yBAblC;AAAA,wBAiBE9B,KAAA,IAAS8B,EAAT,CAjBF;AAAA,wBAkBE7B,KAAA,GAAQ,CAAR,CAlBF;AAAA,wBAmBE,MArBJ;AAAA,oBAwBE,KAAK,CAAL;AAAA,wBAEE,IAAI6B,EAAA,KAAOlC,SAAX,EAAsB;AAAA,4BACpBK,KAAA,GAAQ,CAAR,CADoB;AAAA,4BAEpB,MAFoB;AAAA,yBAFxB;AAAA,wBAOED,KAAA,IAAS8B,EAAT,CAPF;AAAA,wBAQE7B,KAAA,GAAQ,CAAR,CARF;AAAA,wBASE,MAjCJ;AAAA,oBAoCE,KAAK,CAAL;AAAA,wBAEE,IAAI6B,EAAA,KAAOlC,SAAX,EAAsB;AAAA,4BACpBI,KAAA,IAAS8B,EAAT,CADoB;AAAA,4BAEpB7B,KAAA,GAAQ,CAAR,CAFoB;AAAA,4BAGpB,MAHoB;AAAA,yBAFxB;AAAA,wBAQE,IAAI6B,EAAA,KAAOnC,SAAX,EAAsB;AAAA,4BACpB2B,UAAA,GADoB;AAAA,4BAEpB,MAFoB;AAAA,yBARxB;AAAA,wBAaE,IAAIQ,EAAA,KAAO,IAAP,IAAeA,EAAA,KAAO,IAA1B,EAAgC;AAAA,4BAC9B,MAD8B;AAAA,yBAblC;AAAA,wBAiBE,MAAM,IAAIC,KAAJ,CAAU,sCAAsCrB,OAAA,CAAQT,KAAR,CAAcU,MAApD,GAA6D,QAA7D,GAAwED,OAAA,CAAQT,KAAR,CAAcW,MAAtF,GAA+F,GAAzG,CAAN,CArDJ;AAAA,oBAwDE,KAAK,CAAL;AAAA,wBAEE,IAAIkB,EAAA,KAAOnC,SAAX,EAAsB;AAAA,4BACpB2B,UAAA,GADoB;AAAA,4BAEpB,MAFoB;AAAA,yBAFxB;AAAA,wBAOE,IAAIQ,EAAA,KAAO,IAAP,IAAeA,EAAA,KAAO,IAA1B,EAAgC;AAAA,4BAC9B,MAD8B;AAAA,yBAPlC;AAAA,wBAWE,IAAIA,EAAA,KAAOlC,SAAX,EAAsB;AAAA,4BACpB,MAAM,IAAImC,KAAJ,CAAU,sCAAsCrB,OAAA,CAAQT,KAAR,CAAcU,MAApD,GAA6D,QAA7D,GAAwED,OAAA,CAAQT,KAAR,CAAcW,MAAtF,GAA+F,GAAzG,CAAN,CADoB;AAAA,yBAXxB;AAAA,wBAeE,MAAM,IAAImB,KAAJ,CAAU,qCAAqCrB,OAAA,CAAQT,KAAR,CAAcU,MAAnD,GAA4D,QAA5D,GAAuED,OAAA,CAAQT,KAAR,CAAcW,MAArF,GAA8F,GAAxG,CAAN,CAvEJ;AAAA,oBAwEE;AAAA,wBAEE,MAAM,IAAImB,KAAJ,CAAU,sCAAsCrB,OAAA,CAAQT,KAAR,CAAcU,MAApD,GAA6D,QAA7D,GAAwED,OAAA,CAAQT,KAAR,CAAcW,MAAtF,GAA+F,GAAzG,CAAN,CA1EJ;AAAA,qBADuC;AAAA,iBAAzC,EApDiC;AAAA,gBAqIjCU,UAAA,GArIiC;AAAA,gBAuIjC,OAAOR,KAAP,CAvIiC;AAAA,aAjX5B;AAAA,SA3BH;AAAA,QAuhBNyB,OAAA,EAAS;AAAA,YAWPC,oBAAA,EAAsB,UAAUC,OAAV,EAAmB;AAAA,gBAEvC,IAAIC,CAAJ,EAAOC,QAAP,EAAiBC,KAAA,GAAQ,EAAzB,CAFuC;AAAA,gBAGvC,KAAKF,CAAL,IAAUD,OAAV,EAAmB;AAAA,oBACjB,KAAKE,QAAL,IAAiBF,OAAA,CAAQC,CAAR,CAAjB,EAA6B;AAAA,wBAC3B,IAAKD,OAAA,CAAQC,CAAR,EAAWG,cAAX,CAA0BF,QAA1B,CAAD,IACIC,KAAA,CAAME,OAAN,CAAcH,QAAd,IAA0B,CAD9B,IAEI,OAAOF,OAAA,CAAQC,CAAR,EAAWC,QAAX,CAAP,KAAgC,UAFxC,EAEqD;AAAA,4BAEnDC,KAAA,CAAMzB,IAAN,CAAWwB,QAAX,EAFmD;AAAA,yBAH1B;AAAA,qBADZ;AAAA,iBAHoB;AAAA,gBAavC,OAAOC,KAAP,CAbuC;AAAA,aAXlC;AAAA,SAvhBH;AAAA,QAgkBNG,OAAA,EAAS,UAAStD,GAAT,EAAciB,OAAd,EAAuBsC,QAAvB,EAAiC;AAAA,YACxC,IAAItC,OAAA,GAAWA,OAAA,KAAYpB,SAAZ,GAAwBoB,OAAxB,GAAkC,EAAjD,CADwC;AAAA,YAExC,IAAIuC,MAAA,GAAS,EAAb,CAFwC;AAAA,YAGxCA,MAAA,CAAOD,QAAP,GAAoBA,QAAA,KAAa1D,SAAb,IAA0B,OAAO0D,QAAP,KAAqB,UAAhD,GAA8DA,QAA9D,GAAyE,KAA5F,CAHwC;AAAA,YAIxCC,MAAA,CAAOtD,SAAP,GAAmB,eAAee,OAAf,GAAyBA,OAAA,CAAQf,SAAjC,GAA6CJ,CAAA,CAAEE,GAAF,CAAMC,QAAN,CAAeC,SAA/E,CAJwC;AAAA,YAKxCsD,MAAA,CAAOrD,SAAP,GAAmB,eAAec,OAAf,GAAyBA,OAAA,CAAQd,SAAjC,GAA6CL,CAAA,CAAEE,GAAF,CAAMC,QAAN,CAAeE,SAA/E,CALwC;AAAA,YAMxC,IAAIK,KAAA,GAASS,OAAA,CAAQT,KAAR,KAAkBX,SAAlB,GAA8BoB,OAAA,CAAQT,KAAtC,GAA8C,EAA3D,CANwC;AAAA,YASxC,IAAIS,OAAA,GAAU;AAAA,oBACZd,SAAA,EAAWqD,MAAA,CAAOrD,SADN;AAAA,oBAEZD,SAAA,EAAWsD,MAAA,CAAOtD,SAFN;AAAA,oBAGZuB,YAAA,EAAcR,OAAA,CAAQQ,YAHV;AAAA,oBAIZK,YAAA,EAAcb,OAAA,CAAQa,YAJV;AAAA,oBAKZtB,KAAA,EAAOA,KALK;AAAA,iBAAd,CATwC;AAAA,YAiBxC,IAAIa,KAAA,GAAQvB,CAAA,CAAEE,GAAF,CAAMe,OAAN,CAAc8B,UAAd,CAAyB7C,GAAzB,EAA8BiB,OAA9B,CAAZ,CAjBwC;AAAA,YAoBxC,IAAG,CAACuC,MAAA,CAAOD,QAAX,EAAqB;AAAA,gBACnB,OAAOlC,KAAP,CADmB;AAAA,aAArB,MAEO;AAAA,gBACLmC,MAAA,CAAOD,QAAP,CAAgB,EAAhB,EAAoBlC,KAApB,EADK;AAAA,aAtBiC;AAAA,SAhkBpC;AAAA,QAwmBNoC,QAAA,EAAU,UAASzD,GAAT,EAAciB,OAAd,EAAuBsC,QAAvB,EAAiC;AAAA,YACzC,IAAItC,OAAA,GAAWA,OAAA,KAAYpB,SAAZ,GAAwBoB,OAAxB,GAAkC,EAAjD,CADyC;AAAA,YAEzC,IAAIuC,MAAA,GAAS,EAAb,CAFyC;AAAA,YAGzCA,MAAA,CAAOD,QAAP,GAAoBA,QAAA,KAAa1D,SAAb,IAA0B,OAAO0D,QAAP,KAAqB,UAAhD,GAA8DA,QAA9D,GAAyE,KAA5F,CAHyC;AAAA,YAIzCC,MAAA,CAAOtD,SAAP,GAAmB,eAAee,OAAf,GAAyBA,OAAA,CAAQf,SAAjC,GAA6CJ,CAAA,CAAEE,GAAF,CAAMC,QAAN,CAAeC,SAA/E,CAJyC;AAAA,YAKzCsD,MAAA,CAAOrD,SAAP,GAAmB,eAAec,OAAf,GAAyBA,OAAA,CAAQd,SAAjC,GAA6CL,CAAA,CAAEE,GAAF,CAAMC,QAAN,CAAeE,SAA/E,CALyC;AAAA,YAQzC,IAAIiB,IAAA,GAAO,EAAX,CARyC;AAAA,YASzC,IAAIH,OAAA,GAAU;AAAA,oBACZd,SAAA,EAAWqD,MAAA,CAAOrD,SADN;AAAA,oBAEZD,SAAA,EAAWsD,MAAA,CAAOtD,SAFN;AAAA,oBAGZuB,YAAA,EAAcR,OAAA,CAAQQ,YAHV;AAAA,oBAIZK,YAAA,EAAcb,OAAA,CAAQa,YAJV;AAAA,oBAKZN,KAAA,EAAOP,OAAA,CAAQO,KALH;AAAA,oBAMZI,GAAA,EAAKX,OAAA,CAAQW,GAND;AAAA,oBAOZpB,KAAA,EAAO;AAAA,wBACLU,MAAA,EAAQ,CADH;AAAA,wBAELC,MAAA,EAAQ,CAFH;AAAA,qBAPK;AAAA,iBAAd,CATyC;AAAA,YAuBzCC,IAAA,GAAOtB,CAAA,CAAEE,GAAF,CAAMe,OAAN,CAAcC,KAAd,CAAoBhB,GAApB,EAAyBiB,OAAzB,CAAP,CAvByC;AAAA,YA0BzC,IAAG,CAACuC,MAAA,CAAOD,QAAX,EAAqB;AAAA,gBACnB,OAAOnC,IAAP,CADmB;AAAA,aAArB,MAEO;AAAA,gBACLoC,MAAA,CAAOD,QAAP,CAAgB,EAAhB,EAAoBnC,IAApB,EADK;AAAA,aA5BkC;AAAA,SAxmBrC;AAAA,QAqpBNsC,SAAA,EAAW,UAAS1D,GAAT,EAAciB,OAAd,EAAuBsC,QAAvB,EAAiC;AAAA,YAC1C,IAAItC,OAAA,GAAWA,OAAA,KAAYpB,SAAZ,GAAwBoB,OAAxB,GAAkC,EAAjD,CAD0C;AAAA,YAE1C,IAAIuC,MAAA,GAAS,EAAb,CAF0C;AAAA,YAG1CA,MAAA,CAAOD,QAAP,GAAoBA,QAAA,KAAa1D,SAAb,IAA0B,OAAO0D,QAAP,KAAqB,UAAhD,GAA8DA,QAA9D,GAAyE,KAA5F,CAH0C;AAAA,YAI1CC,MAAA,CAAOtD,SAAP,GAAmB,eAAee,OAAf,GAAyBA,OAAA,CAAQf,SAAjC,GAA6CJ,CAAA,CAAEE,GAAF,CAAMC,QAAN,CAAeC,SAA/E,CAJ0C;AAAA,YAK1CsD,MAAA,CAAOrD,SAAP,GAAmB,eAAec,OAAf,GAAyBA,OAAA,CAAQd,SAAjC,GAA6CL,CAAA,CAAEE,GAAF,CAAMC,QAAN,CAAeE,SAA/E,CAL0C;AAAA,YAM1CqD,MAAA,CAAOpD,OAAP,GAAiB,aAAaa,OAAb,GAAuBA,OAAA,CAAQb,OAA/B,GAAyCN,CAAA,CAAEE,GAAF,CAAMC,QAAN,CAAeG,OAAzE,CAN0C;AAAA,YAO1Ca,OAAA,CAAQO,KAAR,GAAgB,WAAWP,OAAX,GAAqBA,OAAA,CAAQO,KAA7B,GAAqC,CAArD,CAP0C;AAAA,YAU1C,IAAGgC,MAAA,CAAOpD,OAAV,EAAmB;AAAA,gBACjBa,OAAA,CAAQO,KAAR,GADiB;AAAA,aAVuB;AAAA,YAa1C,IAAGP,OAAA,CAAQW,GAAR,IAAe4B,MAAA,CAAOpD,OAAzB,EAAkC;AAAA,gBAChCa,OAAA,CAAQW,GAAR,GADgC;AAAA,aAbQ;AAAA,YAkB1C,IAAI+B,KAAA,GAAQ,EAAZ,CAlB0C;AAAA,YAmB1C,IAAIvC,IAAA,GAAO,EAAX,CAnB0C;AAAA,YAqB1C,IAAIH,OAAA,GAAU;AAAA,oBACZd,SAAA,EAAWqD,MAAA,CAAOrD,SADN;AAAA,oBAEZD,SAAA,EAAWsD,MAAA,CAAOtD,SAFN;AAAA,oBAGZuB,YAAA,EAAcR,OAAA,CAAQQ,YAHV;AAAA,oBAIZK,YAAA,EAAcb,OAAA,CAAQa,YAJV;AAAA,oBAKZN,KAAA,EAAOP,OAAA,CAAQO,KALH;AAAA,oBAMZI,GAAA,EAAKX,OAAA,CAAQW,GAND;AAAA,oBAOZpB,KAAA,EAAO;AAAA,wBACLU,MAAA,EAAQ,CADH;AAAA,wBAELC,MAAA,EAAQ,CAFH;AAAA,qBAPK;AAAA,oBAWZe,KAAA,EAAO,KAXK;AAAA,oBAYZ0B,SAAA,EAAW3C,OAAA,CAAQ2C,SAZP;AAAA,iBAAd,CArB0C;AAAA,YAqC1C,IAAIC,aAAA,GAAgB;AAAA,oBAClB1D,SAAA,EAAWqD,MAAA,CAAOrD,SADA;AAAA,oBAElBD,SAAA,EAAWsD,MAAA,CAAOtD,SAFA;AAAA,oBAGlBsB,KAAA,EAAO,CAHW;AAAA,oBAIlBI,GAAA,EAAK,CAJa;AAAA,oBAKlBpB,KAAA,EAAO;AAAA,wBACLU,MAAA,EAAO,CADF;AAAA,wBAELC,MAAA,EAAO,CAFF;AAAA,qBALW;AAAA,iBAApB,CArC0C;AAAA,YA+C1C,IAAI2C,UAAA,GAAahE,CAAA,CAAEE,GAAF,CAAMe,OAAN,CAAcyB,UAAd,CAAyBxC,GAAzB,EAA8B6D,aAA9B,CAAjB,CA/C0C;AAAA,YAgD1C,IAAIzD,OAAA,GAAUN,CAAA,CAAEE,GAAF,CAAMsD,OAAN,CAAcQ,UAAA,CAAW,CAAX,CAAd,EAA6B7C,OAA7B,CAAd,CAhD0C;AAAA,YAmD1C,IAAI0C,KAAA,GAAQ7D,CAAA,CAAEE,GAAF,CAAMe,OAAN,CAAcyB,UAAd,CAAyBxC,GAAzB,EAA8BiB,OAA9B,CAAZ,CAnD0C;AAAA,YAsD1CA,OAAA,CAAQT,KAAR,CAAcW,MAAd,GAAuB,CAAvB,CAtD0C;AAAA,YAuD1C,IAAGf,OAAH,EAAW;AAAA,gBACTa,OAAA,CAAQT,KAAR,CAAcU,MAAd,GAAuB,CAAvB,CADS;AAAA,aAAX,MAEO;AAAA,gBACLD,OAAA,CAAQT,KAAR,CAAcU,MAAd,GAAuB,CAAvB,CADK;AAAA,aAzDmC;AAAA,YA8D1C,KAAI,IAAI6C,CAAA,GAAE,CAAN,EAASC,GAAA,GAAIL,KAAA,CAAMpB,MAAnB,CAAJ,CAA+BwB,CAAA,GAAEC,GAAjC,EAAsCD,CAAA,EAAtC,EAA2C;AAAA,gBACzC,IAAI1C,KAAA,GAAQvB,CAAA,CAAEE,GAAF,CAAMsD,OAAN,CAAcK,KAAA,CAAMI,CAAN,CAAd,EAAwB9C,OAAxB,CAAZ,CADyC;AAAA,gBAEzC,IAAIgD,MAAA,GAAS,EAAb,CAFyC;AAAA,gBAGzC,SAAQC,CAAR,IAAa9D,OAAb,EAAsB;AAAA,oBACpB6D,MAAA,CAAO7D,OAAA,CAAQ8D,CAAR,CAAP,IAAqB7C,KAAA,CAAM6C,CAAN,CAArB,CADoB;AAAA,iBAHmB;AAAA,gBAMzC,IAAIjD,OAAA,CAAQ2C,SAAR,KAAsB/D,SAA1B,EAAqC;AAAA,oBACnCuB,IAAA,CAAKM,IAAL,CAAUT,OAAA,CAAQ2C,SAAR,CAAkBO,IAAlB,CAAuBtE,SAAvB,EAAkCoE,MAAlC,CAAV,EADmC;AAAA,iBAArC,MAEO;AAAA,oBACL7C,IAAA,CAAKM,IAAL,CAAUuC,MAAV,EADK;AAAA,iBARkC;AAAA,gBAazChD,OAAA,CAAQT,KAAR,CAAcU,MAAd,GAbyC;AAAA,aA9DD;AAAA,YA+E1C,IAAG,CAACsC,MAAA,CAAOD,QAAX,EAAqB;AAAA,gBACnB,OAAOnC,IAAP,CADmB;AAAA,aAArB,MAEO;AAAA,gBACLoC,MAAA,CAAOD,QAAP,CAAgB,EAAhB,EAAoBnC,IAApB,EADK;AAAA,aAjFmC;AAAA,SArpBtC;AAAA,QAsvBNgD,UAAA,EAAY,UAASC,MAAT,EAAiBpD,OAAjB,EAA0BsC,QAA1B,EAAoC;AAAA,YAC9C,IAAItC,OAAA,GAAWA,OAAA,KAAYpB,SAAZ,GAAwBoB,OAAxB,GAAkC,EAAjD,CAD8C;AAAA,YAE9C,IAAIuC,MAAA,GAAS,EAAb,CAF8C;AAAA,YAG9CA,MAAA,CAAOD,QAAP,GAAoBA,QAAA,KAAa1D,SAAb,IAA0B,OAAO0D,QAAP,KAAqB,UAAhD,GAA8DA,QAA9D,GAAyE,KAA5F,CAH8C;AAAA,YAI9CC,MAAA,CAAOtD,SAAP,GAAmB,eAAee,OAAf,GAAyBA,OAAA,CAAQf,SAAjC,GAA6CJ,CAAA,CAAEE,GAAF,CAAMC,QAAN,CAAeC,SAA/E,CAJ8C;AAAA,YAK9CsD,MAAA,CAAOrD,SAAP,GAAmB,eAAec,OAAf,GAAyBA,OAAA,CAAQd,SAAjC,GAA6CL,CAAA,CAAEE,GAAF,CAAMC,QAAN,CAAeE,SAA/E,CAL8C;AAAA,YAO9C,IAAImE,MAAA,GAAS,EAAb,EACIC,IADJ,EAEIC,UAFJ,EAGIT,CAHJ,EAGOG,CAHP,CAP8C;AAAA,YAY9C,KAAKH,CAAA,GAAI,CAAT,EAAYA,CAAA,GAAIM,MAAA,CAAO9B,MAAvB,EAA+BwB,CAAA,EAA/B,EAAoC;AAAA,gBAClCQ,IAAA,GAAOF,MAAA,CAAON,CAAP,CAAP,CADkC;AAAA,gBAElCS,UAAA,GAAa,EAAb,CAFkC;AAAA,gBAGlC,KAAKN,CAAA,GAAI,CAAT,EAAYA,CAAA,GAAIK,IAAA,CAAKhC,MAArB,EAA6B2B,CAAA,EAA7B,EAAkC;AAAA,oBAChC,IAAIO,QAAA,GAAYF,IAAA,CAAKL,CAAL,MAAYrE,SAAZ,IAAyB0E,IAAA,CAAKL,CAAL,MAAY,IAAtC,GACA,EADA,GAEAK,IAAA,CAAKL,CAAL,EAAQQ,QAAR,EAFf,CADgC;AAAA,oBAIhC,IAAID,QAAA,CAASpB,OAAT,CAAiBG,MAAA,CAAOrD,SAAxB,IAAqC,CAAC,CAA1C,EAA6C;AAAA,wBAC3CsE,QAAA,GAAWA,QAAA,CAAS7E,OAAT,CAAiB4D,MAAA,CAAOrD,SAAxB,EAAmCqD,MAAA,CAAOrD,SAAP,GAAmBqD,MAAA,CAAOrD,SAA7D,CAAX,CAD2C;AAAA,qBAJb;AAAA,oBAQhC,IAAIwE,UAAA,GAAa,WAAjB,CARgC;AAAA,oBAShCA,UAAA,GAAaA,UAAA,CAAW/E,OAAX,CAAmB,GAAnB,EAAwB4D,MAAA,CAAOtD,SAA/B,CAAb,CATgC;AAAA,oBAUhCyE,UAAA,GAAaA,UAAA,CAAW/E,OAAX,CAAmB,GAAnB,EAAwB4D,MAAA,CAAOrD,SAA/B,CAAb,CAVgC;AAAA,oBAYhC,IAAIsE,QAAA,CAASG,MAAT,CAAgBD,UAAhB,IAA8B,CAAC,CAAnC,EAAsC;AAAA,wBACpCF,QAAA,GAAWjB,MAAA,CAAOrD,SAAP,GAAmBsE,QAAnB,GAA8BjB,MAAA,CAAOrD,SAAhD,CADoC;AAAA,qBAZN;AAAA,oBAehCqE,UAAA,CAAW9C,IAAX,CAAgB+C,QAAhB,EAfgC;AAAA,iBAHA;AAAA,gBAoBlCH,MAAA,IAAUE,UAAA,CAAWK,IAAX,CAAgBrB,MAAA,CAAOtD,SAAvB,IAAoC,MAA9C,CApBkC;AAAA,aAZU;AAAA,YAoC9C,IAAG,CAACsD,MAAA,CAAOD,QAAX,EAAqB;AAAA,gBACnB,OAAOe,MAAP,CADmB;AAAA,aAArB,MAEO;AAAA,gBACLd,MAAA,CAAOD,QAAP,CAAgB,EAAhB,EAAoBe,MAApB,EADK;AAAA,aAtCuC;AAAA,SAtvB1C;AAAA,QAuzBNQ,WAAA,EAAa,UAAS9B,OAAT,EAAkB/B,OAAlB,EAA2BsC,QAA3B,EAAqC;AAAA,YAChD,IAAItC,OAAA,GAAWA,OAAA,KAAYpB,SAAZ,GAAwBoB,OAAxB,GAAkC,EAAjD,CADgD;AAAA,YAEhD,IAAIuC,MAAA,GAAS,EAAb,CAFgD;AAAA,YAGhDA,MAAA,CAAOD,QAAP,GAAoBA,QAAA,KAAa1D,SAAb,IAA0B,OAAO0D,QAAP,KAAqB,UAAhD,GAA8DA,QAA9D,GAAyE,KAA5F,CAHgD;AAAA,YAIhDC,MAAA,CAAOtD,SAAP,GAAmB,eAAee,OAAf,GAAyBA,OAAA,CAAQf,SAAjC,GAA6CJ,CAAA,CAAEE,GAAF,CAAMC,QAAN,CAAeC,SAA/E,CAJgD;AAAA,YAKhDsD,MAAA,CAAOrD,SAAP,GAAmB,eAAec,OAAf,GAAyBA,OAAA,CAAQd,SAAjC,GAA6CL,CAAA,CAAEE,GAAF,CAAMC,QAAN,CAAeE,SAA/E,CALgD;AAAA,YAMhDqD,MAAA,CAAOpD,OAAP,GAAiB,aAAaa,OAAb,GAAuBA,OAAA,CAAQb,OAA/B,GAAyCN,CAAA,CAAEE,GAAF,CAAMC,QAAN,CAAeG,OAAzE,CANgD;AAAA,YAOhDoD,MAAA,CAAOuB,SAAP,GAAmB,eAAe9D,OAAf,GAAyBA,OAAA,CAAQ8D,SAAjC,GAA6C,SAAhE,CAPgD;AAAA,YAQhDvB,MAAA,CAAOwB,WAAP,GAAqB,iBAAiB/D,OAAjB,GAA2BA,OAAA,CAAQ+D,WAAnC,GAAiD,EAAtE,CARgD;AAAA,YAShDxB,MAAA,CAAOI,SAAP,GAAmB3C,OAAA,CAAQ2C,SAA3B,CATgD;AAAA,YAWhD,IAAI,OAAOJ,MAAA,CAAOwB,WAAd,KAA8B,QAAlC,EAA4C;AAAA,gBAC1CxB,MAAA,CAAOwB,WAAP,GAAqBlF,CAAA,CAAEE,GAAF,CAAMsD,OAAN,CAAcE,MAAA,CAAOwB,WAArB,EAAkCxB,MAAlC,CAArB,CAD0C;AAAA,aAXI;AAAA,YAehD,IAAIA,MAAA,CAAOI,SAAP,KAAqB/D,SAAzB,EAAoC;AAAA,gBAClC,IAAIoF,WAAA,GAAcjC,OAAlB,CADkC;AAAA,gBAElCA,OAAA,GAAU,EAAV,CAFkC;AAAA,gBAIlC,IAAIe,CAAJ,CAJkC;AAAA,gBAKlC,KAAKA,CAAA,GAAI,CAAT,EAAYA,CAAA,GAAIkB,WAAA,CAAY1C,MAA5B,EAAoCwB,CAAA,EAApC,EAAyC;AAAA,oBACvCf,OAAA,CAAQtB,IAAR,CAAa8B,MAAA,CAAOI,SAAP,CAAiBO,IAAjB,CAAsBtE,SAAtB,EAAiCoF,WAAA,CAAYlB,CAAZ,CAAjC,CAAb,EADuC;AAAA,iBALP;AAAA,aAfY;AAAA,YAyBhD,IAAIZ,KAAA,GAAQrD,CAAA,CAAEE,GAAF,CAAM8C,OAAN,CAAcC,oBAAd,CAAmCC,OAAnC,CAAZ,CAzBgD;AAAA,YA2BhD,IAAIQ,MAAA,CAAOuB,SAAP,KAAqB,OAAzB,EAAkC;AAAA,gBAChC5B,KAAA,CAAM+B,IAAN,GADgC;AAAA,aA3Bc;AAAA,YA+BhD,IAAI1B,MAAA,CAAOwB,WAAP,CAAmBzC,MAAnB,GAA4B,CAAhC,EAAmC;AAAA,gBAEjC,IAAI4C,WAAA,GAAc,GAAGC,MAAH,CAAU5B,MAAA,CAAOwB,WAAjB,CAAlB,CAFiC;AAAA,gBAGjC,IAAIK,CAAJ,CAHiC;AAAA,gBAIjC,KAAKA,CAAA,GAAI,CAAT,EAAYA,CAAA,GAAIlC,KAAA,CAAMZ,MAAtB,EAA8B8C,CAAA,EAA9B,EAAmC;AAAA,oBACjC,IAAIF,WAAA,CAAY9B,OAAZ,CAAqBF,KAAA,CAAMkC,CAAN,CAArB,IAAkC,CAAtC,EAAyC;AAAA,wBACvCF,WAAA,CAAYzD,IAAZ,CAAkByB,KAAA,CAAMkC,CAAN,CAAlB,EADuC;AAAA,qBADR;AAAA,iBAJF;AAAA,gBASjClC,KAAA,GAAQgC,WAAR,CATiC;AAAA,aA/Ba;AAAA,YA2ChD,IAAIlC,CAAJ,EAAOoC,CAAP,EAAUd,IAAV,EAAgBD,MAAA,GAAS,EAAzB,EAA6BpB,QAA7B,CA3CgD;AAAA,YA4ChD,IAAIM,MAAA,CAAOpD,OAAX,EAAoB;AAAA,gBAClBkE,MAAA,CAAO5C,IAAP,CAAYyB,KAAZ,EADkB;AAAA,aA5C4B;AAAA,YAgDhD,KAAKF,CAAA,GAAI,CAAT,EAAYA,CAAA,GAAID,OAAA,CAAQT,MAAxB,EAAgCU,CAAA,EAAhC,EAAqC;AAAA,gBACnCsB,IAAA,GAAO,EAAP,CADmC;AAAA,gBAEnC,KAAKc,CAAA,GAAI,CAAT,EAAYA,CAAA,GAAIlC,KAAA,CAAMZ,MAAtB,EAA8B8C,CAAA,EAA9B,EAAmC;AAAA,oBACjCnC,QAAA,GAAWC,KAAA,CAAMkC,CAAN,CAAX,CADiC;AAAA,oBAEjC,IAAInC,QAAA,IAAYF,OAAA,CAAQC,CAAR,CAAZ,IAA0B,OAAOD,OAAA,CAAQC,CAAR,EAAWC,QAAX,CAAP,KAAgC,UAA9D,EAA0E;AAAA,wBACxEqB,IAAA,CAAK7C,IAAL,CAAUsB,OAAA,CAAQC,CAAR,EAAWC,QAAX,CAAV,EADwE;AAAA,qBAA1E,MAEO;AAAA,wBACLqB,IAAA,CAAK7C,IAAL,CAAU,EAAV,EADK;AAAA,qBAJ0B;AAAA,iBAFA;AAAA,gBAUnC4C,MAAA,CAAO5C,IAAP,CAAY6C,IAAZ,EAVmC;AAAA,aAhDW;AAAA,YA8DhD,OAAOzE,CAAA,CAAEE,GAAF,CAAMoE,UAAN,CAAiBE,MAAjB,EAAyBrD,OAAzB,EAAkCuC,MAAA,CAAOD,QAAzC,CAAP,CA9DgD;AAAA,SAvzB5C;AAAA,KAAR,CAlBoB;AAAA,IA64BpBzD,CAAA,CAAEwF,cAAF,GAAmBxF,CAAA,CAAEE,GAAF,CAAMsD,OAAzB,CA74BoB;AAAA,IA84BpBxD,CAAA,CAAEyF,SAAF,GAAczF,CAAA,CAAEE,GAAF,CAAMyD,QAApB,CA94BoB;AAAA,IA+4BpB3D,CAAA,CAAE0F,cAAF,GAAmB1F,CAAA,CAAEE,GAAF,CAAM0D,SAAzB,CA/4BoB;AAAA,IAk5BpB,IAAI,OAAO+B,MAAP,KAAkB,WAAlB,IAAiCA,MAAA,CAAOC,OAA5C,EAAqD;AAAA,QACnDD,MAAA,CAAOC,OAAP,GAAiB5F,CAAA,CAAEE,GAAnB,CADmD;AAAA,KAl5BjC;AAAA,CAAtB,CAs5BGmE,IAt5BH,CAs5BS,IAt5BT\"}","lineCount":599,"mtime":1390364932000,"deps":[],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"/**\n * jQuery-csv (jQuery Plugin)\n * version: 0.70 (2012-11-04)\n *\n * This document is licensed as free software under the terms of the\n * MIT License: http://www.opensource.org/licenses/mit-license.php\n *\n * Acknowledgements:\n * The original design and influence to implement this library as a jquery\n * plugin is influenced by jquery-json (http://code.google.com/p/jquery-json/).\n * If you're looking to use native JSON.Stringify but want additional backwards\n * compatibility for browsers that don't support it, I highly recommend you\n * check it out.\n *\n * A special thanks goes out to rwk@acm.org for providing a lot of valuable\n * feedback to the project including the core for the new FSM\n * (Finite State Machine) parsers. If you're looking for a stable TSV parser\n * be sure to take a look at jquery-tsv (http://code.google.com/p/jquery-tsv/).\n\n * For legal purposes I'll include the \"NO WARRANTY EXPRESSED OR IMPLIED.\n * USE AT YOUR OWN RISK.\". Which, in 'layman's terms' means, by using this\n * library you are accepting responsibility if it breaks your code.\n *\n * Legal jargon aside, I will do my best to provide a useful and stable core\n * that can effectively be built on.\n *\n * Copyrighted 2012 by Evan Plaice.\n */\n\nRegExp.escape= function(s) {\n    return s.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n};\n\n(function (undefined) {\n  'use strict'\n\n  var $;\n\n  // to keep backwards compatibility\n  if (typeof jQuery !== 'undefined' && jQuery) {\n    $ = jQuery;\n  } else {\n    $ = {};\n  }\n\n\n  /**\n   * jQuery.csv.defaults\n   * Encapsulates the method paramater defaults for the CSV plugin module.\n   */\n\n  $.csv = {\n    defaults: {\n      separator:',',\n      delimiter:'\"',\n      headers:true\n    },\n\n    hooks: {\n      castToScalar: function(value, state) {\n        var hasDot = /\\./;\n        if (isNaN(value)) {\n          return value;\n        } else {\n          if (hasDot.test(value)) {\n            return parseFloat(value);\n          } else {\n            var integer = parseInt(value);\n            if(isNaN(integer)) {\n              return null;\n            } else {\n              return integer;\n            }\n          }\n        }\n      }\n    },\n\n    parsers: {\n      parse: function(csv, options) {\n        // cache settings\n        var separator = options.separator;\n        var delimiter = options.delimiter;\n\n        // set initial state if it's missing\n        if(!options.state.rowNum) {\n          options.state.rowNum = 1;\n        }\n        if(!options.state.colNum) {\n          options.state.colNum = 1;\n        }\n\n        // clear initial state\n        var data = [];\n        var entry = [];\n        var state = 0;\n        var value = '';\n        var exit = false;\n\n        function endOfEntry() {\n          // reset the state\n          state = 0;\n          value = '';\n\n          // if 'start' hasn't been met, don't output\n          if(options.start && options.state.rowNum < options.start) {\n            // update global state\n            entry = [];\n            options.state.rowNum++;\n            options.state.colNum = 1;\n            return;\n          }\n          \n          if(options.onParseEntry === undefined) {\n            // onParseEntry hook not set\n            data.push(entry);\n          } else {\n            var hookVal = options.onParseEntry(entry, options.state); // onParseEntry Hook\n            // false skips the row, configurable through a hook\n            if(hookVal !== false) {\n              data.push(hookVal);\n            }\n          }\n          //console.log('entry:' + entry);\n          \n          // cleanup\n          entry = [];\n\n          // if 'end' is met, stop parsing\n          if(options.end && options.state.rowNum >= options.end) {\n            exit = true;\n          }\n          \n          // update global state\n          options.state.rowNum++;\n          options.state.colNum = 1;\n        }\n\n        function endOfValue() {\n          if(options.onParseValue === undefined) {\n            // onParseValue hook not set\n            entry.push(value);\n          } else {\n            var hook = options.onParseValue(value, options.state); // onParseValue Hook\n            // false skips the row, configurable through a hook\n            if(hook !== false) {\n              entry.push(hook);\n            }\n          }\n          //console.log('value:' + value);\n          // reset the state\n          value = '';\n          state = 0;\n          // update global state\n          options.state.colNum++;\n        }\n\n        // escape regex-specific control chars\n        var escSeparator = RegExp.escape(separator);\n        var escDelimiter = RegExp.escape(delimiter);\n\n        // compile the regEx str using the custom delimiter/separator\n        var match = /(D|S|\\r\\n|\\n|\\r|[^DS\\r\\n]+)/;\n        var matchSrc = match.source;\n        matchSrc = matchSrc.replace(/S/g, escSeparator);\n        matchSrc = matchSrc.replace(/D/g, escDelimiter);\n        match = RegExp(matchSrc, 'gm');\n\n        // put on your fancy pants...\n        // process control chars individually, use look-ahead on non-control chars\n        csv.replace(match, function (m0) {\n          if(exit) {\n            return;\n          }\n          switch (state) {\n            // the start of a value\n            case 0:\n              // null last value\n              if (m0 === separator) {\n                value += '';\n                endOfValue();\n                break;\n              }\n              // opening delimiter\n              if (m0 === delimiter) {\n                state = 1;\n                break;\n              }\n              // null last value\n              if (/^(\\r\\n|\\n|\\r)$/.test(m0)) {\n                endOfValue();\n                endOfEntry();\n                break;\n              }\n              // un-delimited value\n              value += m0;\n              state = 3;\n              break;\n\n            // delimited input\n            case 1:\n              // second delimiter? check further\n              if (m0 === delimiter) {\n                state = 2;\n                break;\n              }\n              // delimited data\n              value += m0;\n              state = 1;\n              break;\n\n            // delimiter found in delimited input\n            case 2:\n              // escaped delimiter?\n              if (m0 === delimiter) {\n                value += m0;\n                state = 1;\n                break;\n              }\n              // null value\n              if (m0 === separator) {\n                endOfValue();\n                break;\n              }\n              // end of entry\n              if (/^(\\r\\n|\\n|\\r)$/.test(m0)) {\n                endOfValue();\n                endOfEntry();\n                break;\n              }\n              // broken paser?\n              throw new Error('CSVDataError: Illegal State [Row:' + options.state.rowNum + '][Col:' + options.state.colNum + ']');\n\n            // un-delimited input\n            case 3:\n              // null last value\n              if (m0 === separator) {\n                endOfValue();\n                break;\n              }\n              // end of entry\n              if (/^(\\r\\n|\\n|\\r)$/.test(m0)) {\n                endOfValue();\n                endOfEntry();\n                break;\n              }\n              if (m0 === delimiter) {\n              // non-compliant data\n                throw new Error('CSVDataError: Illegal Quote [Row:' + options.state.rowNum + '][Col:' + options.state.colNum + ']');\n              }\n              // broken parser?\n              throw new Error('CSVDataError: Illegal Data [Row:' + options.state.rowNum + '][Col:' + options.state.colNum + ']');\n            default:\n              // shenanigans\n              throw new Error('CSVDataError: Unknown State [Row:' + options.state.rowNum + '][Col:' + options.state.colNum + ']');\n          }\n          //console.log('val:' + m0 + ' state:' + state);\n        });\n\n        // submit the last entry\n        // ignore null last line\n        if(entry.length !== 0) {\n          endOfValue();\n          endOfEntry();\n        }\n\n        return data;\n      },\n\n      // a csv-specific line splitter\n      splitLines: function(csv, options) {\n        // cache settings\n        var separator = options.separator;\n        var delimiter = options.delimiter;\n\n        // set initial state if it's missing\n        if(!options.state.rowNum) {\n          options.state.rowNum = 1;\n        }\n\n        // clear initial state\n        var entries = [];\n        var state = 0;\n        var entry = '';\n        var exit = false;\n\n        function endOfLine() {          \n          // reset the state\n          state = 0;\n          \n          // if 'start' hasn't been met, don't output\n          if(options.start && options.state.rowNum < options.start) {\n            // update global state\n            entry = '';\n            options.state.rowNum++;\n            return;\n          }\n          \n          if(options.onParseEntry === undefined) {\n            // onParseEntry hook not set\n            entries.push(entry);\n          } else {\n            var hookVal = options.onParseEntry(entry, options.state); // onParseEntry Hook\n            // false skips the row, configurable through a hook\n            if(hookVal !== false) {\n              entries.push(hookVal);\n            }\n          }\n\n          // cleanup\n          entry = '';\n\n          // if 'end' is met, stop parsing\n          if(options.end && options.state.rowNum >= options.end) {\n            exit = true;\n          }\n          \n          // update global state\n          options.state.rowNum++;\n        }\n\n        // escape regex-specific control chars\n        var escSeparator = RegExp.escape(separator);\n        var escDelimiter = RegExp.escape(delimiter);\n\n        // compile the regEx str using the custom delimiter/separator\n        var match = /(D|S|\\n|\\r|[^DS\\r\\n]+)/;\n        var matchSrc = match.source;\n        matchSrc = matchSrc.replace(/S/g, escSeparator);\n        matchSrc = matchSrc.replace(/D/g, escDelimiter);\n        match = RegExp(matchSrc, 'gm');\n        \n        // put on your fancy pants...\n        // process control chars individually, use look-ahead on non-control chars\n        csv.replace(match, function (m0) {\n          if(exit) {\n            return;\n          }\n          switch (state) {\n            // the start of a value/entry\n            case 0:\n              // null value\n              if (m0 === separator) {\n                entry += m0;\n                state = 0;\n                break;\n              }\n              // opening delimiter\n              if (m0 === delimiter) {\n                entry += m0;\n                state = 1;\n                break;\n              }\n              // end of line\n              if (m0 === '\\n') {\n                endOfLine();\n                break;\n              }\n              // phantom carriage return\n              if (/^\\r$/.test(m0)) {\n                break;\n              }\n              // un-delimit value\n              entry += m0;\n              state = 3;\n              break;\n\n            // delimited input\n            case 1:\n              // second delimiter? check further\n              if (m0 === delimiter) {\n                entry += m0;\n                state = 2;\n                break;\n              }\n              // delimited data\n              entry += m0;\n              state = 1;\n              break;\n\n            // delimiter found in delimited input\n            case 2:\n              // escaped delimiter?\n              var prevChar = entry.substr(entry.length - 1);\n              if (m0 === delimiter && prevChar === delimiter) {\n                entry += m0;\n                state = 1;\n                break;\n              }\n              // end of value\n              if (m0 === separator) {\n                entry += m0;\n                state = 0;\n                break;\n              }\n              // end of line\n              if (m0 === '\\n') {\n                endOfLine();\n                break;\n              }\n              // phantom carriage return\n              if (m0 === '\\r') {\n                break;\n              }\n              // broken paser?\n              throw new Error('CSVDataError: Illegal state [Row:' + options.state.rowNum + ']');\n\n            // un-delimited input\n            case 3:\n              // null value\n              if (m0 === separator) {\n                entry += m0;\n                state = 0;\n                break;\n              }\n              // end of line\n              if (m0 === '\\n') {\n                endOfLine();\n                break;\n              }\n              // phantom carriage return\n              if (m0 === '\\r') {\n                break;\n              }\n              // non-compliant data\n              if (m0 === delimiter) {\n                throw new Error('CSVDataError: Illegal quote [Row:' + options.state.rowNum + ']');\n              }\n              // broken parser?\n              throw new Error('CSVDataError: Illegal state [Row:' + options.state.rowNum + ']');\n            default:\n              // shenanigans\n              throw new Error('CSVDataError: Unknown state [Row:' + options.state.rowNum + ']');\n          }\n          //console.log('val:' + m0 + ' state:' + state);\n        });\n\n        // submit the last entry\n        // ignore null last line\n        if(entry !== '') {\n          endOfLine();\n        }\n\n        return entries;\n      },\n\n      // a csv entry parser\n      parseEntry: function(csv, options) {\n        // cache settings\n        var separator = options.separator;\n        var delimiter = options.delimiter;\n        \n        // set initial state if it's missing\n        if(!options.state.rowNum) {\n          options.state.rowNum = 1;\n        }\n        if(!options.state.colNum) {\n          options.state.colNum = 1;\n        }\n\n        // clear initial state\n        var entry = [];\n        var state = 0;\n        var value = '';\n\n        function endOfValue() {\n          if(options.onParseValue === undefined) {\n            // onParseValue hook not set\n            entry.push(value);\n          } else {\n            var hook = options.onParseValue(value, options.state); // onParseValue Hook\n            // false skips the value, configurable through a hook\n            if(hook !== false) {\n              entry.push(hook);\n            }\n          }\n          // reset the state\n          value = '';\n          state = 0;\n          // update global state\n          options.state.colNum++;\n        }\n\n        // checked for a cached regEx first\n        if(!options.match) {\n          // escape regex-specific control chars\n          var escSeparator = RegExp.escape(separator);\n          var escDelimiter = RegExp.escape(delimiter);\n          \n          // compile the regEx str using the custom delimiter/separator\n          var match = /(D|S|\\n|\\r|[^DS\\r\\n]+)/;\n          var matchSrc = match.source;\n          matchSrc = matchSrc.replace(/S/g, escSeparator);\n          matchSrc = matchSrc.replace(/D/g, escDelimiter);\n          options.match = RegExp(matchSrc, 'gm');\n        }\n\n        // put on your fancy pants...\n        // process control chars individually, use look-ahead on non-control chars\n        csv.replace(options.match, function (m0) {\n          switch (state) {\n            // the start of a value\n            case 0:\n              // null last value\n              if (m0 === separator) {\n                value += '';\n                endOfValue();\n                break;\n              }\n              // opening delimiter\n              if (m0 === delimiter) {\n                state = 1;\n                break;\n              }\n              // skip un-delimited new-lines\n              if (m0 === '\\n' || m0 === '\\r') {\n                break;\n              }\n              // un-delimited value\n              value += m0;\n              state = 3;\n              break;\n\n            // delimited input\n            case 1:\n              // second delimiter? check further\n              if (m0 === delimiter) {\n                state = 2;\n                break;\n              }\n              // delimited data\n              value += m0;\n              state = 1;\n              break;\n\n            // delimiter found in delimited input\n            case 2:\n              // escaped delimiter?\n              if (m0 === delimiter) {\n                value += m0;\n                state = 1;\n                break;\n              }\n              // null value\n              if (m0 === separator) {\n                endOfValue();\n                break;\n              }\n              // skip un-delimited new-lines\n              if (m0 === '\\n' || m0 === '\\r') {\n                break;\n              }\n              // broken paser?\n              throw new Error('CSVDataError: Illegal State [Row:' + options.state.rowNum + '][Col:' + options.state.colNum + ']');\n\n            // un-delimited input\n            case 3:\n              // null last value\n              if (m0 === separator) {\n                endOfValue();\n                break;\n              }\n              // skip un-delimited new-lines\n              if (m0 === '\\n' || m0 === '\\r') {\n                break;\n              }\n              // non-compliant data\n              if (m0 === delimiter) {\n                throw new Error('CSVDataError: Illegal Quote [Row:' + options.state.rowNum + '][Col:' + options.state.colNum + ']');\n              }\n              // broken parser?\n              throw new Error('CSVDataError: Illegal Data [Row:' + options.state.rowNum + '][Col:' + options.state.colNum + ']');\n            default:\n              // shenanigans\n              throw new Error('CSVDataError: Unknown State [Row:' + options.state.rowNum + '][Col:' + options.state.colNum + ']');\n          }\n          //console.log('val:' + m0 + ' state:' + state);\n        });\n\n        // submit the last value\n        endOfValue();\n\n        return entry;\n      }\n    },\n\n    helpers: {\n\n      /**\n       * $.csv.helpers.collectPropertyNames(objectsArray)\n       * Collects all unique property names from all passed objects.\n       *\n       * @param {Array} objects Objects to collect properties from.\n       *\n       * Returns an array of property names (array will be empty,\n       * if objects have no own properties).\n       */\n      collectPropertyNames: function (objects) {\n\n        var o, propName, props = [];\n        for (o in objects) {\n          for (propName in objects[o]) {\n            if ((objects[o].hasOwnProperty(propName))\n                && (props.indexOf(propName) < 0)\n                && (typeof objects[o][propName] !== 'function')) {\n\n              props.push(propName);\n            }\n          }\n        }\n        return props;\n      }\n    },\n\n    /**\n     * $.csv.toArray(csv)\n     * Converts a CSV entry string to a javascript array.\n     *\n     * @param {Array} csv The string containing the CSV data.\n     * @param {Object} [options] An object containing user-defined options.\n     * @param {Character} [separator] An override for the separator character. Defaults to a comma(,).\n     * @param {Character} [delimiter] An override for the delimiter character. Defaults to a double-quote(\").\n     *\n     * This method deals with simple CSV strings only. It's useful if you only\n     * need to parse a single entry. If you need to parse more than one line,\n     * use $.csv2Array instead.\n     */\n    toArray: function(csv, options, callback) {\n      var options = (options !== undefined ? options : {});\n      var config = {};\n      config.callback = ((callback !== undefined && typeof(callback) === 'function') ? callback : false);\n      config.separator = 'separator' in options ? options.separator : $.csv.defaults.separator;\n      config.delimiter = 'delimiter' in options ? options.delimiter : $.csv.defaults.delimiter;\n      var state = (options.state !== undefined ? options.state : {});\n\n      // setup\n      var options = {\n        delimiter: config.delimiter,\n        separator: config.separator,\n        onParseEntry: options.onParseEntry,\n        onParseValue: options.onParseValue,\n        state: state\n      }\n\n      var entry = $.csv.parsers.parseEntry(csv, options);\n\n      // push the value to a callback if one is defined\n      if(!config.callback) {\n        return entry;\n      } else {\n        config.callback('', entry);\n      }\n    },\n\n    /**\n     * $.csv.toArrays(csv)\n     * Converts a CSV string to a javascript array.\n     *\n     * @param {String} csv The string containing the raw CSV data.\n     * @param {Object} [options] An object containing user-defined options.\n     * @param {Character} [separator] An override for the separator character. Defaults to a comma(,).\n     * @param {Character} [delimiter] An override for the delimiter character. Defaults to a double-quote(\").\n     *\n     * This method deals with multi-line CSV. The breakdown is simple. The first\n     * dimension of the array represents the line (or entry/row) while the second\n     * dimension contains the values (or values/columns).\n     */\n    toArrays: function(csv, options, callback) {\n      var options = (options !== undefined ? options : {});\n      var config = {};\n      config.callback = ((callback !== undefined && typeof(callback) === 'function') ? callback : false);\n      config.separator = 'separator' in options ? options.separator : $.csv.defaults.separator;\n      config.delimiter = 'delimiter' in options ? options.delimiter : $.csv.defaults.delimiter;\n      \n      // setup\n      var data = [];\n      var options = {\n        delimiter: config.delimiter,\n        separator: config.separator,\n        onParseEntry: options.onParseEntry,\n        onParseValue: options.onParseValue,\n        start: options.start,\n        end: options.end,\n        state: {\n          rowNum: 1,\n          colNum: 1\n        }\n      };\n\n      // break the data down to lines\n      data = $.csv.parsers.parse(csv, options);\n\n      // push the value to a callback if one is defined\n      if(!config.callback) {\n        return data;\n      } else {\n        config.callback('', data);\n      }\n    },\n\n    /**\n     * $.csv.toObjects(csv)\n     * Converts a CSV string to a javascript object.\n     * @param {String} csv The string containing the raw CSV data.\n     * @param {Object} [options] An object containing user-defined options.\n     * @param {Character} [separator] An override for the separator character. Defaults to a comma(,).\n     * @param {Character} [delimiter] An override for the delimiter character. Defaults to a double-quote(\").\n     * @param {Boolean} [headers] Indicates whether the data contains a header line. Defaults to true.\n     *\n     * This method deals with multi-line CSV strings. Where the headers line is\n     * used as the key for each value per entry.\n     */\n    toObjects: function(csv, options, callback) {\n      var options = (options !== undefined ? options : {});\n      var config = {};\n      config.callback = ((callback !== undefined && typeof(callback) === 'function') ? callback : false);\n      config.separator = 'separator' in options ? options.separator : $.csv.defaults.separator;\n      config.delimiter = 'delimiter' in options ? options.delimiter : $.csv.defaults.delimiter;\n      config.headers = 'headers' in options ? options.headers : $.csv.defaults.headers;\n      options.start = 'start' in options ? options.start : 1;\n      \n      // account for headers\n      if(config.headers) {\n        options.start++;\n      }\n      if(options.end && config.headers) {\n        options.end++;\n      }\n      \n      // setup\n      var lines = [];\n      var data = [];\n      \n      var options = {\n        delimiter: config.delimiter,\n        separator: config.separator,\n        onParseEntry: options.onParseEntry,\n        onParseValue: options.onParseValue,\n        start: options.start,\n        end: options.end,\n        state: {\n          rowNum: 1,\n          colNum: 1\n        },\n        match: false,\n        transform: options.transform\n      };\n\n      // fetch the headers\n      var headerOptions = {\n        delimiter: config.delimiter,\n        separator: config.separator,\n        start: 1,\n        end: 1,\n        state: {\n          rowNum:1,\n          colNum:1\n        }\n      }\n      var headerLine = $.csv.parsers.splitLines(csv, headerOptions);\n      var headers = $.csv.toArray(headerLine[0], options);\n\n      // fetch the data\n      var lines = $.csv.parsers.splitLines(csv, options);\n      \n      // reset the state for re-use\n      options.state.colNum = 1;\n      if(headers){\n        options.state.rowNum = 2;\n      } else {\n        options.state.rowNum = 1;\n      }\n      \n      // convert data to objects\n      for(var i=0, len=lines.length; i<len; i++) {\n        var entry = $.csv.toArray(lines[i], options);\n        var object = {};\n        for(var j in headers) {\n          object[headers[j]] = entry[j];\n        }\n        if (options.transform !== undefined) {\n          data.push(options.transform.call(undefined, object));\n        } else {\n          data.push(object);\n        }\n        \n        // update row state\n        options.state.rowNum++;\n      }\n\n      // push the value to a callback if one is defined\n      if(!config.callback) {\n        return data;\n      } else {\n        config.callback('', data);\n      }\n    },\n\n     /**\n     * $.csv.fromArrays(arrays)\n     * Converts a javascript array to a CSV String.\n     *\n     * @param {Array} arrays An array containing an array of CSV entries.\n     * @param {Object} [options] An object containing user-defined options.\n     * @param {Character} [separator] An override for the separator character. Defaults to a comma(,).\n     * @param {Character} [delimiter] An override for the delimiter character. Defaults to a double-quote(\").\n     *\n     * This method generates a CSV file from an array of arrays (representing entries).\n     */\n    fromArrays: function(arrays, options, callback) {\n      var options = (options !== undefined ? options : {});\n      var config = {};\n      config.callback = ((callback !== undefined && typeof(callback) === 'function') ? callback : false);\n      config.separator = 'separator' in options ? options.separator : $.csv.defaults.separator;\n      config.delimiter = 'delimiter' in options ? options.delimiter : $.csv.defaults.delimiter;\n\n      var output = '',\n          line,\n          lineValues,\n          i, j;\n\n      for (i = 0; i < arrays.length; i++) {\n        line = arrays[i];\n        lineValues = [];\n        for (j = 0; j < line.length; j++) {\n          var strValue = (line[j] === undefined || line[j] === null)\n                       ? ''\n                       : line[j].toString();\n          if (strValue.indexOf(config.delimiter) > -1) {\n            strValue = strValue.replace(config.delimiter, config.delimiter + config.delimiter);\n          }\n\n          var escMatcher = '\\n|\\r|S|D';\n          escMatcher = escMatcher.replace('S', config.separator);\n          escMatcher = escMatcher.replace('D', config.delimiter);\n\n          if (strValue.search(escMatcher) > -1) {\n            strValue = config.delimiter + strValue + config.delimiter;\n          }\n          lineValues.push(strValue);\n        }\n        output += lineValues.join(config.separator) + '\\r\\n';\n      }\n\n      // push the value to a callback if one is defined\n      if(!config.callback) {\n        return output;\n      } else {\n        config.callback('', output);\n      }\n    },\n\n    /**\n     * $.csv.fromObjects(objects)\n     * Converts a javascript dictionary to a CSV string.\n     *\n     * @param {Object} objects An array of objects containing the data.\n     * @param {Object} [options] An object containing user-defined options.\n     * @param {Character} [separator] An override for the separator character. Defaults to a comma(,).\n     * @param {Character} [delimiter] An override for the delimiter character. Defaults to a double-quote(\").\n     * @param {Character} [sortOrder] Sort order of columns (named after\n     *   object properties). Use 'alpha' for alphabetic. Default is 'declare',\n     *   which means, that properties will _probably_ appear in order they were\n     *   declared for the object. But without any guarantee.\n     * @param {Character or Array} [manualOrder] Manually order columns. May be\n     * a strin in a same csv format as an output or an array of header names\n     * (array items won't be parsed). All the properties, not present in\n     * `manualOrder` will be appended to the end in accordance with `sortOrder`\n     * option. So the `manualOrder` always takes preference, if present.\n     *\n     * This method generates a CSV file from an array of objects (name:value pairs).\n     * It starts by detecting the headers and adding them as the first line of\n     * the CSV file, followed by a structured dump of the data.\n     */\n    fromObjects: function(objects, options, callback) {\n      var options = (options !== undefined ? options : {});\n      var config = {};\n      config.callback = ((callback !== undefined && typeof(callback) === 'function') ? callback : false);\n      config.separator = 'separator' in options ? options.separator : $.csv.defaults.separator;\n      config.delimiter = 'delimiter' in options ? options.delimiter : $.csv.defaults.delimiter;\n      config.headers = 'headers' in options ? options.headers : $.csv.defaults.headers;\n      config.sortOrder = 'sortOrder' in options ? options.sortOrder : 'declare';\n      config.manualOrder = 'manualOrder' in options ? options.manualOrder : [];\n      config.transform = options.transform;\n\n      if (typeof config.manualOrder === 'string') {\n        config.manualOrder = $.csv.toArray(config.manualOrder, config);\n      }\n\n      if (config.transform !== undefined) {\n        var origObjects = objects;\n        objects = [];\n\n        var i;\n        for (i = 0; i < origObjects.length; i++) {\n          objects.push(config.transform.call(undefined, origObjects[i]));\n        }\n      }\n\n      var props = $.csv.helpers.collectPropertyNames(objects);\n\n      if (config.sortOrder === 'alpha') {\n        props.sort();\n      } // else {} - nothing to do for 'declare' order\n\n      if (config.manualOrder.length > 0) {\n\n        var propsManual = [].concat(config.manualOrder);\n        var p;\n        for (p = 0; p < props.length; p++) {\n          if (propsManual.indexOf( props[p] ) < 0) {\n            propsManual.push( props[p] );\n          }\n        }\n        props = propsManual;\n      }\n\n      var o, p, line, output = [], propName;\n      if (config.headers) {\n        output.push(props);\n      }\n\n      for (o = 0; o < objects.length; o++) {\n        line = [];\n        for (p = 0; p < props.length; p++) {\n          propName = props[p];\n          if (propName in objects[o] && typeof objects[o][propName] !== 'function') {\n            line.push(objects[o][propName]);\n          } else {\n            line.push('');\n          }\n        }\n        output.push(line);\n      }\n\n      // push the value to a callback if one is defined\n      return $.csv.fromArrays(output, options, config.callback);\n    }\n  };\n\n  // Maintenance code to maintain backward-compatibility\n  // Will be removed in release 1.0\n  $.csvEntry2Array = $.csv.toArray;\n  $.csv2Array = $.csv.toArrays;\n  $.csv2Dictionary = $.csv.toObjects;\n\n  // CommonJS module is defined\n  if (typeof module !== 'undefined' && module.exports) {\n    module.exports = $.csv;\n  }\n\n}).call( this );\n\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/node_modules/q/q.js":{"id":17,"canonicalName":"node_modules/q/q.js","code":"(function (definition) {\n    if (typeof bootstrap === 'function') {\n        bootstrap('promise', definition);\n    } else if (typeof exports === 'object') {\n        module.exports = definition();\n    } else if (typeof define === 'function' && define.amd) {\n        define(definition);\n    } else if (typeof ses !== 'undefined') {\n        if (!ses.ok()) {\n            return;\n        } else {\n            ses.makeQ = definition;\n        }\n    } else {\n        Q = definition();\n    }\n}(function () {\n    'use strict';\n    var hasStacks = false;\n    try {\n        throw new Error();\n    } catch (e) {\n        hasStacks = !!e.stack;\n    }\n    var qStartingLine = captureLine();\n    var qFileName;\n    var noop = function () {\n    };\n    var nextTick = function () {\n            var head = {\n                    task: void 0,\n                    next: null\n                };\n            var tail = head;\n            var flushing = false;\n            var requestTick = void 0;\n            var isNodeJS = false;\n            function flush() {\n                while (head.next) {\n                    head = head.next;\n                    var task = head.task;\n                    head.task = void 0;\n                    var domain = head.domain;\n                    if (domain) {\n                        head.domain = void 0;\n                        domain.enter();\n                    }\n                    try {\n                        task();\n                    } catch (e) {\n                        if (isNodeJS) {\n                            if (domain) {\n                                domain.exit();\n                            }\n                            setTimeout(flush, 0);\n                            if (domain) {\n                                domain.enter();\n                            }\n                            throw e;\n                        } else {\n                            setTimeout(function () {\n                                throw e;\n                            }, 0);\n                        }\n                    }\n                    if (domain) {\n                        domain.exit();\n                    }\n                }\n                flushing = false;\n            }\n            nextTick = function (task) {\n                tail = tail.next = {\n                    task: task,\n                    domain: isNodeJS && process.domain,\n                    next: null\n                };\n                if (!flushing) {\n                    flushing = true;\n                    requestTick();\n                }\n            };\n            if (typeof process !== 'undefined' && process.nextTick) {\n                isNodeJS = true;\n                requestTick = function () {\n                    process.nextTick(flush);\n                };\n            } else if (typeof setImmediate === 'function') {\n                if (typeof window !== 'undefined') {\n                    requestTick = setImmediate.bind(window, flush);\n                } else {\n                    requestTick = function () {\n                        setImmediate(flush);\n                    };\n                }\n            } else if (typeof MessageChannel !== 'undefined') {\n                var channel = new MessageChannel();\n                channel.port1.onmessage = function () {\n                    requestTick = requestPortTick;\n                    channel.port1.onmessage = flush;\n                    flush();\n                };\n                var requestPortTick = function () {\n                    channel.port2.postMessage(0);\n                };\n                requestTick = function () {\n                    setTimeout(flush, 0);\n                    requestPortTick();\n                };\n            } else {\n                requestTick = function () {\n                    setTimeout(flush, 0);\n                };\n            }\n            return nextTick;\n        }();\n    var call = Function.call;\n    function uncurryThis(f) {\n        return function () {\n            return call.apply(f, arguments);\n        };\n    }\n    var array_slice = uncurryThis(Array.prototype.slice);\n    var array_reduce = uncurryThis(Array.prototype.reduce || function (callback, basis) {\n            var index = 0, length = this.length;\n            if (arguments.length === 1) {\n                do {\n                    if (index in this) {\n                        basis = this[index++];\n                        break;\n                    }\n                    if (++index >= length) {\n                        throw new TypeError();\n                    }\n                } while (1);\n            }\n            for (; index < length; index++) {\n                if (index in this) {\n                    basis = callback(basis, this[index], index);\n                }\n            }\n            return basis;\n        });\n    var array_indexOf = uncurryThis(Array.prototype.indexOf || function (value) {\n            for (var i = 0; i < this.length; i++) {\n                if (this[i] === value) {\n                    return i;\n                }\n            }\n            return -1;\n        });\n    var array_map = uncurryThis(Array.prototype.map || function (callback, thisp) {\n            var self = this;\n            var collect = [];\n            array_reduce(self, function (undefined, value, index) {\n                collect.push(callback.call(thisp, value, index, self));\n            }, void 0);\n            return collect;\n        });\n    var object_create = Object.create || function (prototype) {\n            function Type() {\n            }\n            Type.prototype = prototype;\n            return new Type();\n        };\n    var object_hasOwnProperty = uncurryThis(Object.prototype.hasOwnProperty);\n    var object_keys = Object.keys || function (object) {\n            var keys = [];\n            for (var key in object) {\n                if (object_hasOwnProperty(object, key)) {\n                    keys.push(key);\n                }\n            }\n            return keys;\n        };\n    var object_toString = uncurryThis(Object.prototype.toString);\n    function isObject(value) {\n        return value === Object(value);\n    }\n    function isStopIteration(exception) {\n        return object_toString(exception) === '[object StopIteration]' || exception instanceof QReturnValue;\n    }\n    var QReturnValue;\n    if (typeof ReturnValue !== 'undefined') {\n        QReturnValue = ReturnValue;\n    } else {\n        QReturnValue = function (value) {\n            this.value = value;\n        };\n    }\n    var hasES6Generators;\n    try {\n        new Function('(function* (){ yield 1; })');\n        hasES6Generators = true;\n    } catch (e) {\n        hasES6Generators = false;\n    }\n    var STACK_JUMP_SEPARATOR = 'From previous event:';\n    function makeStackTraceLong(error, promise) {\n        if (hasStacks && promise.stack && typeof error === 'object' && error !== null && error.stack && error.stack.indexOf(STACK_JUMP_SEPARATOR) === -1) {\n            var stacks = [];\n            for (var p = promise; !!p; p = p.source) {\n                if (p.stack) {\n                    stacks.unshift(p.stack);\n                }\n            }\n            stacks.unshift(error.stack);\n            var concatedStacks = stacks.join('\\n' + STACK_JUMP_SEPARATOR + '\\n');\n            error.stack = filterStackString(concatedStacks);\n        }\n    }\n    function filterStackString(stackString) {\n        var lines = stackString.split('\\n');\n        var desiredLines = [];\n        for (var i = 0; i < lines.length; ++i) {\n            var line = lines[i];\n            if (!isInternalFrame(line) && !isNodeFrame(line) && line) {\n                desiredLines.push(line);\n            }\n        }\n        return desiredLines.join('\\n');\n    }\n    function isNodeFrame(stackLine) {\n        return stackLine.indexOf('(module.js:') !== -1 || stackLine.indexOf('(node.js:') !== -1;\n    }\n    function getFileNameAndLineNumber(stackLine) {\n        var attempt1 = /at .+ \\((.+):(\\d+):(?:\\d+)\\)$/.exec(stackLine);\n        if (attempt1) {\n            return [\n                attempt1[1],\n                Number(attempt1[2])\n            ];\n        }\n        var attempt2 = /at ([^ ]+):(\\d+):(?:\\d+)$/.exec(stackLine);\n        if (attempt2) {\n            return [\n                attempt2[1],\n                Number(attempt2[2])\n            ];\n        }\n        var attempt3 = /.*@(.+):(\\d+)$/.exec(stackLine);\n        if (attempt3) {\n            return [\n                attempt3[1],\n                Number(attempt3[2])\n            ];\n        }\n    }\n    function isInternalFrame(stackLine) {\n        var fileNameAndLineNumber = getFileNameAndLineNumber(stackLine);\n        if (!fileNameAndLineNumber) {\n            return false;\n        }\n        var fileName = fileNameAndLineNumber[0];\n        var lineNumber = fileNameAndLineNumber[1];\n        return fileName === qFileName && lineNumber >= qStartingLine && lineNumber <= qEndingLine;\n    }\n    function captureLine() {\n        if (!hasStacks) {\n            return;\n        }\n        try {\n            throw new Error();\n        } catch (e) {\n            var lines = e.stack.split('\\n');\n            var firstLine = lines[0].indexOf('@') > 0 ? lines[1] : lines[2];\n            var fileNameAndLineNumber = getFileNameAndLineNumber(firstLine);\n            if (!fileNameAndLineNumber) {\n                return;\n            }\n            qFileName = fileNameAndLineNumber[0];\n            return fileNameAndLineNumber[1];\n        }\n    }\n    function deprecate(callback, name, alternative) {\n        return function () {\n            if (typeof console !== 'undefined' && typeof console.warn === 'function') {\n                console.warn(name + ' is deprecated, use ' + alternative + ' instead.', new Error('').stack);\n            }\n            return callback.apply(callback, arguments);\n        };\n    }\n    function Q(value) {\n        if (isPromise(value)) {\n            return value;\n        }\n        if (isPromiseAlike(value)) {\n            return coerce(value);\n        } else {\n            return fulfill(value);\n        }\n    }\n    Q.resolve = Q;\n    Q.nextTick = nextTick;\n    Q.longStackSupport = false;\n    Q.defer = defer;\n    function defer() {\n        var messages = [], progressListeners = [], resolvedPromise;\n        var deferred = object_create(defer.prototype);\n        var promise = object_create(Promise.prototype);\n        promise.promiseDispatch = function (resolve, op, operands) {\n            var args = array_slice(arguments);\n            if (messages) {\n                messages.push(args);\n                if (op === 'when' && operands[1]) {\n                    progressListeners.push(operands[1]);\n                }\n            } else {\n                nextTick(function () {\n                    resolvedPromise.promiseDispatch.apply(resolvedPromise, args);\n                });\n            }\n        };\n        promise.valueOf = function () {\n            if (messages) {\n                return promise;\n            }\n            var nearerValue = nearer(resolvedPromise);\n            if (isPromise(nearerValue)) {\n                resolvedPromise = nearerValue;\n            }\n            return nearerValue;\n        };\n        promise.inspect = function () {\n            if (!resolvedPromise) {\n                return { state: 'pending' };\n            }\n            return resolvedPromise.inspect();\n        };\n        if (Q.longStackSupport && hasStacks) {\n            try {\n                throw new Error();\n            } catch (e) {\n                promise.stack = e.stack.substring(e.stack.indexOf('\\n') + 1);\n            }\n        }\n        function become(newPromise) {\n            resolvedPromise = newPromise;\n            promise.source = newPromise;\n            array_reduce(messages, function (undefined, message) {\n                nextTick(function () {\n                    newPromise.promiseDispatch.apply(newPromise, message);\n                });\n            }, void 0);\n            messages = void 0;\n            progressListeners = void 0;\n        }\n        deferred.promise = promise;\n        deferred.resolve = function (value) {\n            if (resolvedPromise) {\n                return;\n            }\n            become(Q(value));\n        };\n        deferred.fulfill = function (value) {\n            if (resolvedPromise) {\n                return;\n            }\n            become(fulfill(value));\n        };\n        deferred.reject = function (reason) {\n            if (resolvedPromise) {\n                return;\n            }\n            become(reject(reason));\n        };\n        deferred.notify = function (progress) {\n            if (resolvedPromise) {\n                return;\n            }\n            array_reduce(progressListeners, function (undefined, progressListener) {\n                nextTick(function () {\n                    progressListener(progress);\n                });\n            }, void 0);\n        };\n        return deferred;\n    }\n    defer.prototype.makeNodeResolver = function () {\n        var self = this;\n        return function (error, value) {\n            if (error) {\n                self.reject(error);\n            } else if (arguments.length > 2) {\n                self.resolve(array_slice(arguments, 1));\n            } else {\n                self.resolve(value);\n            }\n        };\n    };\n    Q.promise = promise;\n    function promise(resolver) {\n        if (typeof resolver !== 'function') {\n            throw new TypeError('resolver must be a function.');\n        }\n        var deferred = defer();\n        try {\n            resolver(deferred.resolve, deferred.reject, deferred.notify);\n        } catch (reason) {\n            deferred.reject(reason);\n        }\n        return deferred.promise;\n    }\n    Q.passByCopy = function (object) {\n        return object;\n    };\n    Promise.prototype.passByCopy = function () {\n        return this;\n    };\n    Q.join = function (x, y) {\n        return Q(x).join(y);\n    };\n    Promise.prototype.join = function (that) {\n        return Q([\n            this,\n            that\n        ]).spread(function (x, y) {\n            if (x === y) {\n                return x;\n            } else {\n                throw new Error('Can\\'t join: not the same: ' + x + ' ' + y);\n            }\n        });\n    };\n    Q.race = race;\n    function race(answerPs) {\n        return promise(function (resolve, reject) {\n            for (var i = 0, len = answerPs.length; i < len; i++) {\n                Q(answerPs[i]).then(resolve, reject);\n            }\n        });\n    }\n    Promise.prototype.race = function () {\n        return this.then(Q.race);\n    };\n    Q.makePromise = Promise;\n    function Promise(descriptor, fallback, inspect) {\n        if (fallback === void 0) {\n            fallback = function (op) {\n                return reject(new Error('Promise does not support operation: ' + op));\n            };\n        }\n        if (inspect === void 0) {\n            inspect = function () {\n                return { state: 'unknown' };\n            };\n        }\n        var promise = object_create(Promise.prototype);\n        promise.promiseDispatch = function (resolve, op, args) {\n            var result;\n            try {\n                if (descriptor[op]) {\n                    result = descriptor[op].apply(promise, args);\n                } else {\n                    result = fallback.call(promise, op, args);\n                }\n            } catch (exception) {\n                result = reject(exception);\n            }\n            if (resolve) {\n                resolve(result);\n            }\n        };\n        promise.inspect = inspect;\n        if (inspect) {\n            var inspected = inspect();\n            if (inspected.state === 'rejected') {\n                promise.exception = inspected.reason;\n            }\n            promise.valueOf = function () {\n                var inspected = inspect();\n                if (inspected.state === 'pending' || inspected.state === 'rejected') {\n                    return promise;\n                }\n                return inspected.value;\n            };\n        }\n        return promise;\n    }\n    Promise.prototype.toString = function () {\n        return '[object Promise]';\n    };\n    Promise.prototype.then = function (fulfilled, rejected, progressed) {\n        var self = this;\n        var deferred = defer();\n        var done = false;\n        function _fulfilled(value) {\n            try {\n                return typeof fulfilled === 'function' ? fulfilled(value) : value;\n            } catch (exception) {\n                return reject(exception);\n            }\n        }\n        function _rejected(exception) {\n            if (typeof rejected === 'function') {\n                makeStackTraceLong(exception, self);\n                try {\n                    return rejected(exception);\n                } catch (newException) {\n                    return reject(newException);\n                }\n            }\n            return reject(exception);\n        }\n        function _progressed(value) {\n            return typeof progressed === 'function' ? progressed(value) : value;\n        }\n        nextTick(function () {\n            self.promiseDispatch(function (value) {\n                if (done) {\n                    return;\n                }\n                done = true;\n                deferred.resolve(_fulfilled(value));\n            }, 'when', [function (exception) {\n                    if (done) {\n                        return;\n                    }\n                    done = true;\n                    deferred.resolve(_rejected(exception));\n                }]);\n        });\n        self.promiseDispatch(void 0, 'when', [\n            void 0,\n            function (value) {\n                var newValue;\n                var threw = false;\n                try {\n                    newValue = _progressed(value);\n                } catch (e) {\n                    threw = true;\n                    if (Q.onerror) {\n                        Q.onerror(e);\n                    } else {\n                        throw e;\n                    }\n                }\n                if (!threw) {\n                    deferred.notify(newValue);\n                }\n            }\n        ]);\n        return deferred.promise;\n    };\n    Q.when = when;\n    function when(value, fulfilled, rejected, progressed) {\n        return Q(value).then(fulfilled, rejected, progressed);\n    }\n    Promise.prototype.thenResolve = function (value) {\n        return this.then(function () {\n            return value;\n        });\n    };\n    Q.thenResolve = function (promise, value) {\n        return Q(promise).thenResolve(value);\n    };\n    Promise.prototype.thenReject = function (reason) {\n        return this.then(function () {\n            throw reason;\n        });\n    };\n    Q.thenReject = function (promise, reason) {\n        return Q(promise).thenReject(reason);\n    };\n    Q.nearer = nearer;\n    function nearer(value) {\n        if (isPromise(value)) {\n            var inspected = value.inspect();\n            if (inspected.state === 'fulfilled') {\n                return inspected.value;\n            }\n        }\n        return value;\n    }\n    Q.isPromise = isPromise;\n    function isPromise(object) {\n        return isObject(object) && typeof object.promiseDispatch === 'function' && typeof object.inspect === 'function';\n    }\n    Q.isPromiseAlike = isPromiseAlike;\n    function isPromiseAlike(object) {\n        return isObject(object) && typeof object.then === 'function';\n    }\n    Q.isPending = isPending;\n    function isPending(object) {\n        return isPromise(object) && object.inspect().state === 'pending';\n    }\n    Promise.prototype.isPending = function () {\n        return this.inspect().state === 'pending';\n    };\n    Q.isFulfilled = isFulfilled;\n    function isFulfilled(object) {\n        return !isPromise(object) || object.inspect().state === 'fulfilled';\n    }\n    Promise.prototype.isFulfilled = function () {\n        return this.inspect().state === 'fulfilled';\n    };\n    Q.isRejected = isRejected;\n    function isRejected(object) {\n        return isPromise(object) && object.inspect().state === 'rejected';\n    }\n    Promise.prototype.isRejected = function () {\n        return this.inspect().state === 'rejected';\n    };\n    var unhandledReasons = [];\n    var unhandledRejections = [];\n    var unhandledReasonsDisplayed = false;\n    var trackUnhandledRejections = true;\n    function displayUnhandledReasons() {\n        if (!unhandledReasonsDisplayed && typeof window !== 'undefined' && window.console) {\n            console.warn('[Q] Unhandled rejection reasons (should be empty):', unhandledReasons);\n        }\n        unhandledReasonsDisplayed = true;\n    }\n    function logUnhandledReasons() {\n        for (var i = 0; i < unhandledReasons.length; i++) {\n            var reason = unhandledReasons[i];\n            console.warn('Unhandled rejection reason:', reason);\n        }\n    }\n    function resetUnhandledRejections() {\n        unhandledReasons.length = 0;\n        unhandledRejections.length = 0;\n        unhandledReasonsDisplayed = false;\n        if (!trackUnhandledRejections) {\n            trackUnhandledRejections = true;\n            if (typeof process !== 'undefined' && process.on) {\n                process.on('exit', logUnhandledReasons);\n            }\n        }\n    }\n    function trackRejection(promise, reason) {\n        if (!trackUnhandledRejections) {\n            return;\n        }\n        unhandledRejections.push(promise);\n        if (reason && typeof reason.stack !== 'undefined') {\n            unhandledReasons.push(reason.stack);\n        } else {\n            unhandledReasons.push('(no stack) ' + reason);\n        }\n        displayUnhandledReasons();\n    }\n    function untrackRejection(promise) {\n        if (!trackUnhandledRejections) {\n            return;\n        }\n        var at = array_indexOf(unhandledRejections, promise);\n        if (at !== -1) {\n            unhandledRejections.splice(at, 1);\n            unhandledReasons.splice(at, 1);\n        }\n    }\n    Q.resetUnhandledRejections = resetUnhandledRejections;\n    Q.getUnhandledReasons = function () {\n        return unhandledReasons.slice();\n    };\n    Q.stopUnhandledRejectionTracking = function () {\n        resetUnhandledRejections();\n        if (typeof process !== 'undefined' && process.on) {\n            process.removeListener('exit', logUnhandledReasons);\n        }\n        trackUnhandledRejections = false;\n    };\n    resetUnhandledRejections();\n    Q.reject = reject;\n    function reject(reason) {\n        var rejection = Promise({\n                'when': function (rejected) {\n                    if (rejected) {\n                        untrackRejection(this);\n                    }\n                    return rejected ? rejected(reason) : this;\n                }\n            }, function fallback() {\n                return this;\n            }, function inspect() {\n                return {\n                    state: 'rejected',\n                    reason: reason\n                };\n            });\n        trackRejection(rejection, reason);\n        return rejection;\n    }\n    Q.fulfill = fulfill;\n    function fulfill(value) {\n        return Promise({\n            'when': function () {\n                return value;\n            },\n            'get': function (name) {\n                return value[name];\n            },\n            'set': function (name, rhs) {\n                value[name] = rhs;\n            },\n            'delete': function (name) {\n                delete value[name];\n            },\n            'post': function (name, args) {\n                if (name === null || name === void 0) {\n                    return value.apply(void 0, args);\n                } else {\n                    return value[name].apply(value, args);\n                }\n            },\n            'apply': function (thisp, args) {\n                return value.apply(thisp, args);\n            },\n            'keys': function () {\n                return object_keys(value);\n            }\n        }, void 0, function inspect() {\n            return {\n                state: 'fulfilled',\n                value: value\n            };\n        });\n    }\n    function coerce(promise) {\n        var deferred = defer();\n        nextTick(function () {\n            try {\n                promise.then(deferred.resolve, deferred.reject, deferred.notify);\n            } catch (exception) {\n                deferred.reject(exception);\n            }\n        });\n        return deferred.promise;\n    }\n    Q.master = master;\n    function master(object) {\n        return Promise({\n            'isDef': function () {\n            }\n        }, function fallback(op, args) {\n            return dispatch(object, op, args);\n        }, function () {\n            return Q(object).inspect();\n        });\n    }\n    Q.spread = spread;\n    function spread(value, fulfilled, rejected) {\n        return Q(value).spread(fulfilled, rejected);\n    }\n    Promise.prototype.spread = function (fulfilled, rejected) {\n        return this.all().then(function (array) {\n            return fulfilled.apply(void 0, array);\n        }, rejected);\n    };\n    Q.async = async;\n    function async(makeGenerator) {\n        return function () {\n            function continuer(verb, arg) {\n                var result;\n                if (hasES6Generators) {\n                    try {\n                        result = generator[verb](arg);\n                    } catch (exception) {\n                        return reject(exception);\n                    }\n                    if (result.done) {\n                        return result.value;\n                    } else {\n                        return when(result.value, callback, errback);\n                    }\n                } else {\n                    try {\n                        result = generator[verb](arg);\n                    } catch (exception) {\n                        if (isStopIteration(exception)) {\n                            return exception.value;\n                        } else {\n                            return reject(exception);\n                        }\n                    }\n                    return when(result, callback, errback);\n                }\n            }\n            var generator = makeGenerator.apply(this, arguments);\n            var callback = continuer.bind(continuer, 'next');\n            var errback = continuer.bind(continuer, 'throw');\n            return callback();\n        };\n    }\n    Q.spawn = spawn;\n    function spawn(makeGenerator) {\n        Q.done(Q.async(makeGenerator)());\n    }\n    Q['return'] = _return;\n    function _return(value) {\n        throw new QReturnValue(value);\n    }\n    Q.promised = promised;\n    function promised(callback) {\n        return function () {\n            return spread([\n                this,\n                all(arguments)\n            ], function (self, args) {\n                return callback.apply(self, args);\n            });\n        };\n    }\n    Q.dispatch = dispatch;\n    function dispatch(object, op, args) {\n        return Q(object).dispatch(op, args);\n    }\n    Promise.prototype.dispatch = function (op, args) {\n        var self = this;\n        var deferred = defer();\n        nextTick(function () {\n            self.promiseDispatch(deferred.resolve, op, args);\n        });\n        return deferred.promise;\n    };\n    Q.get = function (object, key) {\n        return Q(object).dispatch('get', [key]);\n    };\n    Promise.prototype.get = function (key) {\n        return this.dispatch('get', [key]);\n    };\n    Q.set = function (object, key, value) {\n        return Q(object).dispatch('set', [\n            key,\n            value\n        ]);\n    };\n    Promise.prototype.set = function (key, value) {\n        return this.dispatch('set', [\n            key,\n            value\n        ]);\n    };\n    Q.del = Q['delete'] = function (object, key) {\n        return Q(object).dispatch('delete', [key]);\n    };\n    Promise.prototype.del = Promise.prototype['delete'] = function (key) {\n        return this.dispatch('delete', [key]);\n    };\n    Q.mapply = Q.post = function (object, name, args) {\n        return Q(object).dispatch('post', [\n            name,\n            args\n        ]);\n    };\n    Promise.prototype.mapply = Promise.prototype.post = function (name, args) {\n        return this.dispatch('post', [\n            name,\n            args\n        ]);\n    };\n    Q.send = Q.mcall = Q.invoke = function (object, name) {\n        return Q(object).dispatch('post', [\n            name,\n            array_slice(arguments, 2)\n        ]);\n    };\n    Promise.prototype.send = Promise.prototype.mcall = Promise.prototype.invoke = function (name) {\n        return this.dispatch('post', [\n            name,\n            array_slice(arguments, 1)\n        ]);\n    };\n    Q.fapply = function (object, args) {\n        return Q(object).dispatch('apply', [\n            void 0,\n            args\n        ]);\n    };\n    Promise.prototype.fapply = function (args) {\n        return this.dispatch('apply', [\n            void 0,\n            args\n        ]);\n    };\n    Q['try'] = Q.fcall = function (object) {\n        return Q(object).dispatch('apply', [\n            void 0,\n            array_slice(arguments, 1)\n        ]);\n    };\n    Promise.prototype.fcall = function () {\n        return this.dispatch('apply', [\n            void 0,\n            array_slice(arguments)\n        ]);\n    };\n    Q.fbind = function (object) {\n        var promise = Q(object);\n        var args = array_slice(arguments, 1);\n        return function fbound() {\n            return promise.dispatch('apply', [\n                this,\n                args.concat(array_slice(arguments))\n            ]);\n        };\n    };\n    Promise.prototype.fbind = function () {\n        var promise = this;\n        var args = array_slice(arguments);\n        return function fbound() {\n            return promise.dispatch('apply', [\n                this,\n                args.concat(array_slice(arguments))\n            ]);\n        };\n    };\n    Q.keys = function (object) {\n        return Q(object).dispatch('keys', []);\n    };\n    Promise.prototype.keys = function () {\n        return this.dispatch('keys', []);\n    };\n    Q.all = all;\n    function all(promises) {\n        return when(promises, function (promises) {\n            var countDown = 0;\n            var deferred = defer();\n            array_reduce(promises, function (undefined, promise, index) {\n                var snapshot;\n                if (isPromise(promise) && (snapshot = promise.inspect()).state === 'fulfilled') {\n                    promises[index] = snapshot.value;\n                } else {\n                    ++countDown;\n                    when(promise, function (value) {\n                        promises[index] = value;\n                        if (--countDown === 0) {\n                            deferred.resolve(promises);\n                        }\n                    }, deferred.reject, function (progress) {\n                        deferred.notify({\n                            index: index,\n                            value: progress\n                        });\n                    });\n                }\n            }, void 0);\n            if (countDown === 0) {\n                deferred.resolve(promises);\n            }\n            return deferred.promise;\n        });\n    }\n    Promise.prototype.all = function () {\n        return all(this);\n    };\n    Q.allResolved = deprecate(allResolved, 'allResolved', 'allSettled');\n    function allResolved(promises) {\n        return when(promises, function (promises) {\n            promises = array_map(promises, Q);\n            return when(all(array_map(promises, function (promise) {\n                return when(promise, noop, noop);\n            })), function () {\n                return promises;\n            });\n        });\n    }\n    Promise.prototype.allResolved = function () {\n        return allResolved(this);\n    };\n    Q.allSettled = allSettled;\n    function allSettled(promises) {\n        return Q(promises).allSettled();\n    }\n    Promise.prototype.allSettled = function () {\n        return this.then(function (promises) {\n            return all(array_map(promises, function (promise) {\n                promise = Q(promise);\n                function regardless() {\n                    return promise.inspect();\n                }\n                return promise.then(regardless, regardless);\n            }));\n        });\n    };\n    Q.fail = Q['catch'] = function (object, rejected) {\n        return Q(object).then(void 0, rejected);\n    };\n    Promise.prototype.fail = Promise.prototype['catch'] = function (rejected) {\n        return this.then(void 0, rejected);\n    };\n    Q.progress = progress;\n    function progress(object, progressed) {\n        return Q(object).then(void 0, void 0, progressed);\n    }\n    Promise.prototype.progress = function (progressed) {\n        return this.then(void 0, void 0, progressed);\n    };\n    Q.fin = Q['finally'] = function (object, callback) {\n        return Q(object)['finally'](callback);\n    };\n    Promise.prototype.fin = Promise.prototype['finally'] = function (callback) {\n        callback = Q(callback);\n        return this.then(function (value) {\n            return callback.fcall().then(function () {\n                return value;\n            });\n        }, function (reason) {\n            return callback.fcall().then(function () {\n                throw reason;\n            });\n        });\n    };\n    Q.done = function (object, fulfilled, rejected, progress) {\n        return Q(object).done(fulfilled, rejected, progress);\n    };\n    Promise.prototype.done = function (fulfilled, rejected, progress) {\n        var onUnhandledError = function (error) {\n            nextTick(function () {\n                makeStackTraceLong(error, promise);\n                if (Q.onerror) {\n                    Q.onerror(error);\n                } else {\n                    throw error;\n                }\n            });\n        };\n        var promise = fulfilled || rejected || progress ? this.then(fulfilled, rejected, progress) : this;\n        if (typeof process === 'object' && process && process.domain) {\n            onUnhandledError = process.domain.bind(onUnhandledError);\n        }\n        promise.then(void 0, onUnhandledError);\n    };\n    Q.timeout = function (object, ms, message) {\n        return Q(object).timeout(ms, message);\n    };\n    Promise.prototype.timeout = function (ms, message) {\n        var deferred = defer();\n        var timeoutId = setTimeout(function () {\n                deferred.reject(new Error(message || 'Timed out after ' + ms + ' ms'));\n            }, ms);\n        this.then(function (value) {\n            clearTimeout(timeoutId);\n            deferred.resolve(value);\n        }, function (exception) {\n            clearTimeout(timeoutId);\n            deferred.reject(exception);\n        }, deferred.notify);\n        return deferred.promise;\n    };\n    Q.delay = function (object, timeout) {\n        if (timeout === void 0) {\n            timeout = object;\n            object = void 0;\n        }\n        return Q(object).delay(timeout);\n    };\n    Promise.prototype.delay = function (timeout) {\n        return this.then(function (value) {\n            var deferred = defer();\n            setTimeout(function () {\n                deferred.resolve(value);\n            }, timeout);\n            return deferred.promise;\n        });\n    };\n    Q.nfapply = function (callback, args) {\n        return Q(callback).nfapply(args);\n    };\n    Promise.prototype.nfapply = function (args) {\n        var deferred = defer();\n        var nodeArgs = array_slice(args);\n        nodeArgs.push(deferred.makeNodeResolver());\n        this.fapply(nodeArgs).fail(deferred.reject);\n        return deferred.promise;\n    };\n    Q.nfcall = function (callback) {\n        var args = array_slice(arguments, 1);\n        return Q(callback).nfapply(args);\n    };\n    Promise.prototype.nfcall = function () {\n        var nodeArgs = array_slice(arguments);\n        var deferred = defer();\n        nodeArgs.push(deferred.makeNodeResolver());\n        this.fapply(nodeArgs).fail(deferred.reject);\n        return deferred.promise;\n    };\n    Q.nfbind = Q.denodeify = function (callback) {\n        var baseArgs = array_slice(arguments, 1);\n        return function () {\n            var nodeArgs = baseArgs.concat(array_slice(arguments));\n            var deferred = defer();\n            nodeArgs.push(deferred.makeNodeResolver());\n            Q(callback).fapply(nodeArgs).fail(deferred.reject);\n            return deferred.promise;\n        };\n    };\n    Promise.prototype.nfbind = Promise.prototype.denodeify = function () {\n        var args = array_slice(arguments);\n        args.unshift(this);\n        return Q.denodeify.apply(void 0, args);\n    };\n    Q.nbind = function (callback, thisp) {\n        var baseArgs = array_slice(arguments, 2);\n        return function () {\n            var nodeArgs = baseArgs.concat(array_slice(arguments));\n            var deferred = defer();\n            nodeArgs.push(deferred.makeNodeResolver());\n            function bound() {\n                return callback.apply(thisp, arguments);\n            }\n            Q(bound).fapply(nodeArgs).fail(deferred.reject);\n            return deferred.promise;\n        };\n    };\n    Promise.prototype.nbind = function () {\n        var args = array_slice(arguments, 0);\n        args.unshift(this);\n        return Q.nbind.apply(void 0, args);\n    };\n    Q.nmapply = Q.npost = function (object, name, args) {\n        return Q(object).npost(name, args);\n    };\n    Promise.prototype.nmapply = Promise.prototype.npost = function (name, args) {\n        var nodeArgs = array_slice(args || []);\n        var deferred = defer();\n        nodeArgs.push(deferred.makeNodeResolver());\n        this.dispatch('post', [\n            name,\n            nodeArgs\n        ]).fail(deferred.reject);\n        return deferred.promise;\n    };\n    Q.nsend = Q.nmcall = Q.ninvoke = function (object, name) {\n        var nodeArgs = array_slice(arguments, 2);\n        var deferred = defer();\n        nodeArgs.push(deferred.makeNodeResolver());\n        Q(object).dispatch('post', [\n            name,\n            nodeArgs\n        ]).fail(deferred.reject);\n        return deferred.promise;\n    };\n    Promise.prototype.nsend = Promise.prototype.nmcall = Promise.prototype.ninvoke = function (name) {\n        var nodeArgs = array_slice(arguments, 1);\n        var deferred = defer();\n        nodeArgs.push(deferred.makeNodeResolver());\n        this.dispatch('post', [\n            name,\n            nodeArgs\n        ]).fail(deferred.reject);\n        return deferred.promise;\n    };\n    Q.nodeify = nodeify;\n    function nodeify(object, nodeback) {\n        return Q(object).nodeify(nodeback);\n    }\n    Promise.prototype.nodeify = function (nodeback) {\n        if (nodeback) {\n            this.then(function (value) {\n                nextTick(function () {\n                    nodeback(null, value);\n                });\n            }, function (error) {\n                nextTick(function () {\n                    nodeback(error);\n                });\n            });\n        } else {\n            return this;\n        }\n    };\n    var qEndingLine = captureLine();\n    return Q;\n}));","map":"{\"version\":3,\"sources\":[\"node_modules/q/q.js\"],\"names\":[\"definition\",\"bootstrap\",\"exports\",\"module\",\"define\",\"amd\",\"ses\",\"ok\",\"makeQ\",\"Q\",\"hasStacks\",\"Error\",\"e\",\"stack\",\"qStartingLine\",\"captureLine\",\"qFileName\",\"noop\",\"nextTick\",\"head\",\"task\",\"next\",\"tail\",\"flushing\",\"requestTick\",\"isNodeJS\",\"flush\",\"domain\",\"enter\",\"exit\",\"setTimeout\",\"process\",\"setImmediate\",\"window\",\"bind\",\"MessageChannel\",\"channel\",\"port1\",\"onmessage\",\"requestPortTick\",\"port2\",\"postMessage\",\"call\",\"Function\",\"uncurryThis\",\"f\",\"apply\",\"arguments\",\"array_slice\",\"Array\",\"prototype\",\"slice\",\"array_reduce\",\"reduce\",\"callback\",\"basis\",\"index\",\"length\",\"TypeError\",\"array_indexOf\",\"indexOf\",\"value\",\"i\",\"array_map\",\"map\",\"thisp\",\"self\",\"collect\",\"undefined\",\"push\",\"object_create\",\"Object\",\"create\",\"Type\",\"object_hasOwnProperty\",\"hasOwnProperty\",\"object_keys\",\"keys\",\"object\",\"key\",\"object_toString\",\"toString\",\"isObject\",\"isStopIteration\",\"exception\",\"QReturnValue\",\"ReturnValue\",\"hasES6Generators\",\"STACK_JUMP_SEPARATOR\",\"makeStackTraceLong\",\"error\",\"promise\",\"stacks\",\"p\",\"source\",\"unshift\",\"concatedStacks\",\"join\",\"filterStackString\",\"stackString\",\"lines\",\"split\",\"desiredLines\",\"line\",\"isInternalFrame\",\"isNodeFrame\",\"stackLine\",\"getFileNameAndLineNumber\",\"attempt1\",\"exec\",\"Number\",\"attempt2\",\"attempt3\",\"fileNameAndLineNumber\",\"fileName\",\"lineNumber\",\"qEndingLine\",\"firstLine\",\"deprecate\",\"name\",\"alternative\",\"console\",\"warn\",\"isPromise\",\"isPromiseAlike\",\"coerce\",\"fulfill\",\"resolve\",\"longStackSupport\",\"defer\",\"messages\",\"progressListeners\",\"resolvedPromise\",\"deferred\",\"Promise\",\"promiseDispatch\",\"op\",\"operands\",\"args\",\"valueOf\",\"nearerValue\",\"nearer\",\"inspect\",\"state\",\"substring\",\"become\",\"newPromise\",\"message\",\"reject\",\"reason\",\"notify\",\"progress\",\"progressListener\",\"makeNodeResolver\",\"resolver\",\"passByCopy\",\"x\",\"y\",\"that\",\"spread\",\"race\",\"answerPs\",\"len\",\"then\",\"makePromise\",\"descriptor\",\"fallback\",\"result\",\"inspected\",\"fulfilled\",\"rejected\",\"progressed\",\"done\",\"_fulfilled\",\"_rejected\",\"newException\",\"_progressed\",\"newValue\",\"threw\",\"onerror\",\"when\",\"thenResolve\",\"thenReject\",\"isPending\",\"isFulfilled\",\"isRejected\",\"unhandledReasons\",\"unhandledRejections\",\"unhandledReasonsDisplayed\",\"trackUnhandledRejections\",\"displayUnhandledReasons\",\"logUnhandledReasons\",\"resetUnhandledRejections\",\"on\",\"trackRejection\",\"untrackRejection\",\"at\",\"splice\",\"getUnhandledReasons\",\"stopUnhandledRejectionTracking\",\"removeListener\",\"rejection\",\"rhs\",\"master\",\"dispatch\",\"all\",\"array\",\"async\",\"makeGenerator\",\"continuer\",\"verb\",\"arg\",\"generator\",\"errback\",\"spawn\",\"_return\",\"promised\",\"get\",\"set\",\"del\",\"mapply\",\"post\",\"send\",\"mcall\",\"invoke\",\"fapply\",\"fcall\",\"fbind\",\"fbound\",\"concat\",\"promises\",\"countDown\",\"snapshot\",\"allResolved\",\"allSettled\",\"regardless\",\"fail\",\"fin\",\"onUnhandledError\",\"timeout\",\"ms\",\"timeoutId\",\"clearTimeout\",\"delay\",\"nfapply\",\"nodeArgs\",\"nfcall\",\"nfbind\",\"denodeify\",\"baseArgs\",\"nbind\",\"bound\",\"nmapply\",\"npost\",\"nsend\",\"nmcall\",\"ninvoke\",\"nodeify\",\"nodeback\"],\"mappings\":\"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\"}","lineCount":1166,"mtime":1388855815000,"deps":[],"nodeFeatures":{"__filename":false,"__dirname":false,"setImmediate":"/Users/brad/WebstormProjects/psycloud/node_modules/powerbuild/node_modules/browser-builtins/builtin/timers.js","console":"/Users/brad/WebstormProjects/psycloud/node_modules/powerbuild/node_modules/browser-builtins/node_modules/console-browserify/index.js"},"isNpmModule":true,"isCoreModule":false,"realCanonicalName":null,"src":"// vim:ts=4:sts=4:sw=4:\n/*!\n *\n * Copyright 2009-2012 Kris Kowal under the terms of the MIT\n * license found at http://github.com/kriskowal/q/raw/master/LICENSE\n *\n * With parts by Tyler Close\n * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found\n * at http://www.opensource.org/licenses/mit-license.html\n * Forked at ref_send.js version: 2009-05-11\n *\n * With parts by Mark Miller\n * Copyright (C) 2011 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\n(function (definition) {\n    // Turn off strict mode for this function so we can assign to global.Q\n    /* jshint strict: false */\n\n    // This file will function properly as a <script> tag, or a module\n    // using CommonJS and NodeJS or RequireJS module formats.  In\n    // Common/Node/RequireJS, the module exports the Q API and when\n    // executed as a simple <script>, it creates a Q global instead.\n\n    // Montage Require\n    if (typeof bootstrap === \"function\") {\n        bootstrap(\"promise\", definition);\n\n    // CommonJS\n    } else if (typeof exports === \"object\") {\n        module.exports = definition();\n\n    // RequireJS\n    } else if (typeof define === \"function\" && define.amd) {\n        define(definition);\n\n    // SES (Secure EcmaScript)\n    } else if (typeof ses !== \"undefined\") {\n        if (!ses.ok()) {\n            return;\n        } else {\n            ses.makeQ = definition;\n        }\n\n    // <script>\n    } else {\n        Q = definition();\n    }\n\n})(function () {\n\"use strict\";\n\nvar hasStacks = false;\ntry {\n    throw new Error();\n} catch (e) {\n    hasStacks = !!e.stack;\n}\n\n// All code after this point will be filtered from stack traces reported\n// by Q.\nvar qStartingLine = captureLine();\nvar qFileName;\n\n// shims\n\n// used for fallback in \"allResolved\"\nvar noop = function () {};\n\n// Use the fastest possible means to execute a task in a future turn\n// of the event loop.\nvar nextTick =(function () {\n    // linked list of tasks (single, with head node)\n    var head = {task: void 0, next: null};\n    var tail = head;\n    var flushing = false;\n    var requestTick = void 0;\n    var isNodeJS = false;\n\n    function flush() {\n        /* jshint loopfunc: true */\n\n        while (head.next) {\n            head = head.next;\n            var task = head.task;\n            head.task = void 0;\n            var domain = head.domain;\n\n            if (domain) {\n                head.domain = void 0;\n                domain.enter();\n            }\n\n            try {\n                task();\n\n            } catch (e) {\n                if (isNodeJS) {\n                    // In node, uncaught exceptions are considered fatal errors.\n                    // Re-throw them synchronously to interrupt flushing!\n\n                    // Ensure continuation if the uncaught exception is suppressed\n                    // listening \"uncaughtException\" events (as domains does).\n                    // Continue in next event to avoid tick recursion.\n                    if (domain) {\n                        domain.exit();\n                    }\n                    setTimeout(flush, 0);\n                    if (domain) {\n                        domain.enter();\n                    }\n\n                    throw e;\n\n                } else {\n                    // In browsers, uncaught exceptions are not fatal.\n                    // Re-throw them asynchronously to avoid slow-downs.\n                    setTimeout(function() {\n                       throw e;\n                    }, 0);\n                }\n            }\n\n            if (domain) {\n                domain.exit();\n            }\n        }\n\n        flushing = false;\n    }\n\n    nextTick = function (task) {\n        tail = tail.next = {\n            task: task,\n            domain: isNodeJS && process.domain,\n            next: null\n        };\n\n        if (!flushing) {\n            flushing = true;\n            requestTick();\n        }\n    };\n\n    if (typeof process !== \"undefined\" && process.nextTick) {\n        // Node.js before 0.9. Note that some fake-Node environments, like the\n        // Mocha test runner, introduce a `process` global without a `nextTick`.\n        isNodeJS = true;\n\n        requestTick = function () {\n            process.nextTick(flush);\n        };\n\n    } else if (typeof setImmediate === \"function\") {\n        // In IE10, Node.js 0.9+, or https://github.com/NobleJS/setImmediate\n        if (typeof window !== \"undefined\") {\n            requestTick = setImmediate.bind(window, flush);\n        } else {\n            requestTick = function () {\n                setImmediate(flush);\n            };\n        }\n\n    } else if (typeof MessageChannel !== \"undefined\") {\n        // modern browsers\n        // http://www.nonblocking.io/2011/06/windownexttick.html\n        var channel = new MessageChannel();\n        // At least Safari Version 6.0.5 (8536.30.1) intermittently cannot create\n        // working message ports the first time a page loads.\n        channel.port1.onmessage = function () {\n            requestTick = requestPortTick;\n            channel.port1.onmessage = flush;\n            flush();\n        };\n        var requestPortTick = function () {\n            // Opera requires us to provide a message payload, regardless of\n            // whether we use it.\n            channel.port2.postMessage(0);\n        };\n        requestTick = function () {\n            setTimeout(flush, 0);\n            requestPortTick();\n        };\n\n    } else {\n        // old browsers\n        requestTick = function () {\n            setTimeout(flush, 0);\n        };\n    }\n\n    return nextTick;\n})();\n\n// Attempt to make generics safe in the face of downstream\n// modifications.\n// There is no situation where this is necessary.\n// If you need a security guarantee, these primordials need to be\n// deeply frozen anyway, and if you dont need a security guarantee,\n// this is just plain paranoid.\n// However, this **might** have the nice side-effect of reducing the size of\n// the minified code by reducing x.call() to merely x()\n// See Mark Millers explanation of what this does.\n// http://wiki.ecmascript.org/doku.php?id=conventions:safe_meta_programming\nvar call = Function.call;\nfunction uncurryThis(f) {\n    return function () {\n        return call.apply(f, arguments);\n    };\n}\n// This is equivalent, but slower:\n// uncurryThis = Function_bind.bind(Function_bind.call);\n// http://jsperf.com/uncurrythis\n\nvar array_slice = uncurryThis(Array.prototype.slice);\n\nvar array_reduce = uncurryThis(\n    Array.prototype.reduce || function (callback, basis) {\n        var index = 0,\n            length = this.length;\n        // concerning the initial value, if one is not provided\n        if (arguments.length === 1) {\n            // seek to the first value in the array, accounting\n            // for the possibility that is is a sparse array\n            do {\n                if (index in this) {\n                    basis = this[index++];\n                    break;\n                }\n                if (++index >= length) {\n                    throw new TypeError();\n                }\n            } while (1);\n        }\n        // reduce\n        for (; index < length; index++) {\n            // account for the possibility that the array is sparse\n            if (index in this) {\n                basis = callback(basis, this[index], index);\n            }\n        }\n        return basis;\n    }\n);\n\nvar array_indexOf = uncurryThis(\n    Array.prototype.indexOf || function (value) {\n        // not a very good shim, but good enough for our one use of it\n        for (var i = 0; i < this.length; i++) {\n            if (this[i] === value) {\n                return i;\n            }\n        }\n        return -1;\n    }\n);\n\nvar array_map = uncurryThis(\n    Array.prototype.map || function (callback, thisp) {\n        var self = this;\n        var collect = [];\n        array_reduce(self, function (undefined, value, index) {\n            collect.push(callback.call(thisp, value, index, self));\n        }, void 0);\n        return collect;\n    }\n);\n\nvar object_create = Object.create || function (prototype) {\n    function Type() { }\n    Type.prototype = prototype;\n    return new Type();\n};\n\nvar object_hasOwnProperty = uncurryThis(Object.prototype.hasOwnProperty);\n\nvar object_keys = Object.keys || function (object) {\n    var keys = [];\n    for (var key in object) {\n        if (object_hasOwnProperty(object, key)) {\n            keys.push(key);\n        }\n    }\n    return keys;\n};\n\nvar object_toString = uncurryThis(Object.prototype.toString);\n\nfunction isObject(value) {\n    return value === Object(value);\n}\n\n// generator related shims\n\n// FIXME: Remove this function once ES6 generators are in SpiderMonkey.\nfunction isStopIteration(exception) {\n    return (\n        object_toString(exception) === \"[object StopIteration]\" ||\n        exception instanceof QReturnValue\n    );\n}\n\n// FIXME: Remove this helper and Q.return once ES6 generators are in\n// SpiderMonkey.\nvar QReturnValue;\nif (typeof ReturnValue !== \"undefined\") {\n    QReturnValue = ReturnValue;\n} else {\n    QReturnValue = function (value) {\n        this.value = value;\n    };\n}\n\n// Until V8 3.19 / Chromium 29 is released, SpiderMonkey is the only\n// engine that has a deployed base of browsers that support generators.\n// However, SM's generators use the Python-inspired semantics of\n// outdated ES6 drafts.  We would like to support ES6, but we'd also\n// like to make it possible to use generators in deployed browsers, so\n// we also support Python-style generators.  At some point we can remove\n// this block.\nvar hasES6Generators;\ntry {\n    /* jshint evil: true, nonew: false */\n    new Function(\"(function* (){ yield 1; })\");\n    hasES6Generators = true;\n} catch (e) {\n    hasES6Generators = false;\n}\n\n// long stack traces\n\nvar STACK_JUMP_SEPARATOR = \"From previous event:\";\n\nfunction makeStackTraceLong(error, promise) {\n    // If possible, transform the error stack trace by removing Node and Q\n    // cruft, then concatenating with the stack trace of `promise`. See #57.\n    if (hasStacks &&\n        promise.stack &&\n        typeof error === \"object\" &&\n        error !== null &&\n        error.stack &&\n        error.stack.indexOf(STACK_JUMP_SEPARATOR) === -1\n    ) {\n        var stacks = [];\n        for (var p = promise; !!p; p = p.source) {\n            if (p.stack) {\n                stacks.unshift(p.stack);\n            }\n        }\n        stacks.unshift(error.stack);\n\n        var concatedStacks = stacks.join(\"\\n\" + STACK_JUMP_SEPARATOR + \"\\n\");\n        error.stack = filterStackString(concatedStacks);\n    }\n}\n\nfunction filterStackString(stackString) {\n    var lines = stackString.split(\"\\n\");\n    var desiredLines = [];\n    for (var i = 0; i < lines.length; ++i) {\n        var line = lines[i];\n\n        if (!isInternalFrame(line) && !isNodeFrame(line) && line) {\n            desiredLines.push(line);\n        }\n    }\n    return desiredLines.join(\"\\n\");\n}\n\nfunction isNodeFrame(stackLine) {\n    return stackLine.indexOf(\"(module.js:\") !== -1 ||\n           stackLine.indexOf(\"(node.js:\") !== -1;\n}\n\nfunction getFileNameAndLineNumber(stackLine) {\n    // Named functions: \"at functionName (filename:lineNumber:columnNumber)\"\n    // In IE10 function name can have spaces (\"Anonymous function\") O_o\n    var attempt1 = /at .+ \\((.+):(\\d+):(?:\\d+)\\)$/.exec(stackLine);\n    if (attempt1) {\n        return [attempt1[1], Number(attempt1[2])];\n    }\n\n    // Anonymous functions: \"at filename:lineNumber:columnNumber\"\n    var attempt2 = /at ([^ ]+):(\\d+):(?:\\d+)$/.exec(stackLine);\n    if (attempt2) {\n        return [attempt2[1], Number(attempt2[2])];\n    }\n\n    // Firefox style: \"function@filename:lineNumber or @filename:lineNumber\"\n    var attempt3 = /.*@(.+):(\\d+)$/.exec(stackLine);\n    if (attempt3) {\n        return [attempt3[1], Number(attempt3[2])];\n    }\n}\n\nfunction isInternalFrame(stackLine) {\n    var fileNameAndLineNumber = getFileNameAndLineNumber(stackLine);\n\n    if (!fileNameAndLineNumber) {\n        return false;\n    }\n\n    var fileName = fileNameAndLineNumber[0];\n    var lineNumber = fileNameAndLineNumber[1];\n\n    return fileName === qFileName &&\n        lineNumber >= qStartingLine &&\n        lineNumber <= qEndingLine;\n}\n\n// discover own file name and line number range for filtering stack\n// traces\nfunction captureLine() {\n    if (!hasStacks) {\n        return;\n    }\n\n    try {\n        throw new Error();\n    } catch (e) {\n        var lines = e.stack.split(\"\\n\");\n        var firstLine = lines[0].indexOf(\"@\") > 0 ? lines[1] : lines[2];\n        var fileNameAndLineNumber = getFileNameAndLineNumber(firstLine);\n        if (!fileNameAndLineNumber) {\n            return;\n        }\n\n        qFileName = fileNameAndLineNumber[0];\n        return fileNameAndLineNumber[1];\n    }\n}\n\nfunction deprecate(callback, name, alternative) {\n    return function () {\n        if (typeof console !== \"undefined\" &&\n            typeof console.warn === \"function\") {\n            console.warn(name + \" is deprecated, use \" + alternative +\n                         \" instead.\", new Error(\"\").stack);\n        }\n        return callback.apply(callback, arguments);\n    };\n}\n\n// end of shims\n// beginning of real work\n\n/**\n * Constructs a promise for an immediate reference, passes promises through, or\n * coerces promises from different systems.\n * @param value immediate reference or promise\n */\nfunction Q(value) {\n    // If the object is already a Promise, return it directly.  This enables\n    // the resolve function to both be used to created references from objects,\n    // but to tolerably coerce non-promises to promises.\n    if (isPromise(value)) {\n        return value;\n    }\n\n    // assimilate thenables\n    if (isPromiseAlike(value)) {\n        return coerce(value);\n    } else {\n        return fulfill(value);\n    }\n}\nQ.resolve = Q;\n\n/**\n * Performs a task in a future turn of the event loop.\n * @param {Function} task\n */\nQ.nextTick = nextTick;\n\n/**\n * Controls whether or not long stack traces will be on\n */\nQ.longStackSupport = false;\n\n/**\n * Constructs a {promise, resolve, reject} object.\n *\n * `resolve` is a callback to invoke with a more resolved value for the\n * promise. To fulfill the promise, invoke `resolve` with any value that is\n * not a thenable. To reject the promise, invoke `resolve` with a rejected\n * thenable, or invoke `reject` with the reason directly. To resolve the\n * promise to another thenable, thus putting it in the same state, invoke\n * `resolve` with that other thenable.\n */\nQ.defer = defer;\nfunction defer() {\n    // if \"messages\" is an \"Array\", that indicates that the promise has not yet\n    // been resolved.  If it is \"undefined\", it has been resolved.  Each\n    // element of the messages array is itself an array of complete arguments to\n    // forward to the resolved promise.  We coerce the resolution value to a\n    // promise using the `resolve` function because it handles both fully\n    // non-thenable values and other thenables gracefully.\n    var messages = [], progressListeners = [], resolvedPromise;\n\n    var deferred = object_create(defer.prototype);\n    var promise = object_create(Promise.prototype);\n\n    promise.promiseDispatch = function (resolve, op, operands) {\n        var args = array_slice(arguments);\n        if (messages) {\n            messages.push(args);\n            if (op === \"when\" && operands[1]) { // progress operand\n                progressListeners.push(operands[1]);\n            }\n        } else {\n            nextTick(function () {\n                resolvedPromise.promiseDispatch.apply(resolvedPromise, args);\n            });\n        }\n    };\n\n    // XXX deprecated\n    promise.valueOf = function () {\n        if (messages) {\n            return promise;\n        }\n        var nearerValue = nearer(resolvedPromise);\n        if (isPromise(nearerValue)) {\n            resolvedPromise = nearerValue; // shorten chain\n        }\n        return nearerValue;\n    };\n\n    promise.inspect = function () {\n        if (!resolvedPromise) {\n            return { state: \"pending\" };\n        }\n        return resolvedPromise.inspect();\n    };\n\n    if (Q.longStackSupport && hasStacks) {\n        try {\n            throw new Error();\n        } catch (e) {\n            // NOTE: don't try to use `Error.captureStackTrace` or transfer the\n            // accessor around; that causes memory leaks as per GH-111. Just\n            // reify the stack trace as a string ASAP.\n            //\n            // At the same time, cut off the first line; it's always just\n            // \"[object Promise]\\n\", as per the `toString`.\n            promise.stack = e.stack.substring(e.stack.indexOf(\"\\n\") + 1);\n        }\n    }\n\n    // NOTE: we do the checks for `resolvedPromise` in each method, instead of\n    // consolidating them into `become`, since otherwise we'd create new\n    // promises with the lines `become(whatever(value))`. See e.g. GH-252.\n\n    function become(newPromise) {\n        resolvedPromise = newPromise;\n        promise.source = newPromise;\n\n        array_reduce(messages, function (undefined, message) {\n            nextTick(function () {\n                newPromise.promiseDispatch.apply(newPromise, message);\n            });\n        }, void 0);\n\n        messages = void 0;\n        progressListeners = void 0;\n    }\n\n    deferred.promise = promise;\n    deferred.resolve = function (value) {\n        if (resolvedPromise) {\n            return;\n        }\n\n        become(Q(value));\n    };\n\n    deferred.fulfill = function (value) {\n        if (resolvedPromise) {\n            return;\n        }\n\n        become(fulfill(value));\n    };\n    deferred.reject = function (reason) {\n        if (resolvedPromise) {\n            return;\n        }\n\n        become(reject(reason));\n    };\n    deferred.notify = function (progress) {\n        if (resolvedPromise) {\n            return;\n        }\n\n        array_reduce(progressListeners, function (undefined, progressListener) {\n            nextTick(function () {\n                progressListener(progress);\n            });\n        }, void 0);\n    };\n\n    return deferred;\n}\n\n/**\n * Creates a Node-style callback that will resolve or reject the deferred\n * promise.\n * @returns a nodeback\n */\ndefer.prototype.makeNodeResolver = function () {\n    var self = this;\n    return function (error, value) {\n        if (error) {\n            self.reject(error);\n        } else if (arguments.length > 2) {\n            self.resolve(array_slice(arguments, 1));\n        } else {\n            self.resolve(value);\n        }\n    };\n};\n\n/**\n * @param resolver {Function} a function that returns nothing and accepts\n * the resolve, reject, and notify functions for a deferred.\n * @returns a promise that may be resolved with the given resolve and reject\n * functions, or rejected by a thrown exception in resolver\n */\nQ.promise = promise;\nfunction promise(resolver) {\n    if (typeof resolver !== \"function\") {\n        throw new TypeError(\"resolver must be a function.\");\n    }\n    var deferred = defer();\n    try {\n        resolver(deferred.resolve, deferred.reject, deferred.notify);\n    } catch (reason) {\n        deferred.reject(reason);\n    }\n    return deferred.promise;\n}\n\n// XXX experimental.  This method is a way to denote that a local value is\n// serializable and should be immediately dispatched to a remote upon request,\n// instead of passing a reference.\nQ.passByCopy = function (object) {\n    //freeze(object);\n    //passByCopies.set(object, true);\n    return object;\n};\n\nPromise.prototype.passByCopy = function () {\n    //freeze(object);\n    //passByCopies.set(object, true);\n    return this;\n};\n\n/**\n * If two promises eventually fulfill to the same value, promises that value,\n * but otherwise rejects.\n * @param x {Any*}\n * @param y {Any*}\n * @returns {Any*} a promise for x and y if they are the same, but a rejection\n * otherwise.\n *\n */\nQ.join = function (x, y) {\n    return Q(x).join(y);\n};\n\nPromise.prototype.join = function (that) {\n    return Q([this, that]).spread(function (x, y) {\n        if (x === y) {\n            // TODO: \"===\" should be Object.is or equiv\n            return x;\n        } else {\n            throw new Error(\"Can't join: not the same: \" + x + \" \" + y);\n        }\n    });\n};\n\n/**\n * Returns a promise for the first of an array of promises to become fulfilled.\n * @param answers {Array[Any*]} promises to race\n * @returns {Any*} the first promise to be fulfilled\n */\nQ.race = race;\nfunction race(answerPs) {\n    return promise(function(resolve, reject) {\n        // Switch to this once we can assume at least ES5\n        // answerPs.forEach(function(answerP) {\n        //     Q(answerP).then(resolve, reject);\n        // });\n        // Use this in the meantime\n        for (var i = 0, len = answerPs.length; i < len; i++) {\n            Q(answerPs[i]).then(resolve, reject);\n        }\n    });\n}\n\nPromise.prototype.race = function () {\n    return this.then(Q.race);\n};\n\n/**\n * Constructs a Promise with a promise descriptor object and optional fallback\n * function.  The descriptor contains methods like when(rejected), get(name),\n * set(name, value), post(name, args), and delete(name), which all\n * return either a value, a promise for a value, or a rejection.  The fallback\n * accepts the operation name, a resolver, and any further arguments that would\n * have been forwarded to the appropriate method above had a method been\n * provided with the proper name.  The API makes no guarantees about the nature\n * of the returned object, apart from that it is usable whereever promises are\n * bought and sold.\n */\nQ.makePromise = Promise;\nfunction Promise(descriptor, fallback, inspect) {\n    if (fallback === void 0) {\n        fallback = function (op) {\n            return reject(new Error(\n                \"Promise does not support operation: \" + op\n            ));\n        };\n    }\n    if (inspect === void 0) {\n        inspect = function () {\n            return {state: \"unknown\"};\n        };\n    }\n\n    var promise = object_create(Promise.prototype);\n\n    promise.promiseDispatch = function (resolve, op, args) {\n        var result;\n        try {\n            if (descriptor[op]) {\n                result = descriptor[op].apply(promise, args);\n            } else {\n                result = fallback.call(promise, op, args);\n            }\n        } catch (exception) {\n            result = reject(exception);\n        }\n        if (resolve) {\n            resolve(result);\n        }\n    };\n\n    promise.inspect = inspect;\n\n    // XXX deprecated `valueOf` and `exception` support\n    if (inspect) {\n        var inspected = inspect();\n        if (inspected.state === \"rejected\") {\n            promise.exception = inspected.reason;\n        }\n\n        promise.valueOf = function () {\n            var inspected = inspect();\n            if (inspected.state === \"pending\" ||\n                inspected.state === \"rejected\") {\n                return promise;\n            }\n            return inspected.value;\n        };\n    }\n\n    return promise;\n}\n\nPromise.prototype.toString = function () {\n    return \"[object Promise]\";\n};\n\nPromise.prototype.then = function (fulfilled, rejected, progressed) {\n    var self = this;\n    var deferred = defer();\n    var done = false;   // ensure the untrusted promise makes at most a\n                        // single call to one of the callbacks\n\n    function _fulfilled(value) {\n        try {\n            return typeof fulfilled === \"function\" ? fulfilled(value) : value;\n        } catch (exception) {\n            return reject(exception);\n        }\n    }\n\n    function _rejected(exception) {\n        if (typeof rejected === \"function\") {\n            makeStackTraceLong(exception, self);\n            try {\n                return rejected(exception);\n            } catch (newException) {\n                return reject(newException);\n            }\n        }\n        return reject(exception);\n    }\n\n    function _progressed(value) {\n        return typeof progressed === \"function\" ? progressed(value) : value;\n    }\n\n    nextTick(function () {\n        self.promiseDispatch(function (value) {\n            if (done) {\n                return;\n            }\n            done = true;\n\n            deferred.resolve(_fulfilled(value));\n        }, \"when\", [function (exception) {\n            if (done) {\n                return;\n            }\n            done = true;\n\n            deferred.resolve(_rejected(exception));\n        }]);\n    });\n\n    // Progress propagator need to be attached in the current tick.\n    self.promiseDispatch(void 0, \"when\", [void 0, function (value) {\n        var newValue;\n        var threw = false;\n        try {\n            newValue = _progressed(value);\n        } catch (e) {\n            threw = true;\n            if (Q.onerror) {\n                Q.onerror(e);\n            } else {\n                throw e;\n            }\n        }\n\n        if (!threw) {\n            deferred.notify(newValue);\n        }\n    }]);\n\n    return deferred.promise;\n};\n\n/**\n * Registers an observer on a promise.\n *\n * Guarantees:\n *\n * 1. that fulfilled and rejected will be called only once.\n * 2. that either the fulfilled callback or the rejected callback will be\n *    called, but not both.\n * 3. that fulfilled and rejected will not be called in this turn.\n *\n * @param value      promise or immediate reference to observe\n * @param fulfilled  function to be called with the fulfilled value\n * @param rejected   function to be called with the rejection exception\n * @param progressed function to be called on any progress notifications\n * @return promise for the return value from the invoked callback\n */\nQ.when = when;\nfunction when(value, fulfilled, rejected, progressed) {\n    return Q(value).then(fulfilled, rejected, progressed);\n}\n\nPromise.prototype.thenResolve = function (value) {\n    return this.then(function () { return value; });\n};\n\nQ.thenResolve = function (promise, value) {\n    return Q(promise).thenResolve(value);\n};\n\nPromise.prototype.thenReject = function (reason) {\n    return this.then(function () { throw reason; });\n};\n\nQ.thenReject = function (promise, reason) {\n    return Q(promise).thenReject(reason);\n};\n\n/**\n * If an object is not a promise, it is as \"near\" as possible.\n * If a promise is rejected, it is as \"near\" as possible too.\n * If its a fulfilled promise, the fulfillment value is nearer.\n * If its a deferred promise and the deferred has been resolved, the\n * resolution is \"nearer\".\n * @param object\n * @returns most resolved (nearest) form of the object\n */\n\n// XXX should we re-do this?\nQ.nearer = nearer;\nfunction nearer(value) {\n    if (isPromise(value)) {\n        var inspected = value.inspect();\n        if (inspected.state === \"fulfilled\") {\n            return inspected.value;\n        }\n    }\n    return value;\n}\n\n/**\n * @returns whether the given object is a promise.\n * Otherwise it is a fulfilled value.\n */\nQ.isPromise = isPromise;\nfunction isPromise(object) {\n    return isObject(object) &&\n        typeof object.promiseDispatch === \"function\" &&\n        typeof object.inspect === \"function\";\n}\n\nQ.isPromiseAlike = isPromiseAlike;\nfunction isPromiseAlike(object) {\n    return isObject(object) && typeof object.then === \"function\";\n}\n\n/**\n * @returns whether the given object is a pending promise, meaning not\n * fulfilled or rejected.\n */\nQ.isPending = isPending;\nfunction isPending(object) {\n    return isPromise(object) && object.inspect().state === \"pending\";\n}\n\nPromise.prototype.isPending = function () {\n    return this.inspect().state === \"pending\";\n};\n\n/**\n * @returns whether the given object is a value or fulfilled\n * promise.\n */\nQ.isFulfilled = isFulfilled;\nfunction isFulfilled(object) {\n    return !isPromise(object) || object.inspect().state === \"fulfilled\";\n}\n\nPromise.prototype.isFulfilled = function () {\n    return this.inspect().state === \"fulfilled\";\n};\n\n/**\n * @returns whether the given object is a rejected promise.\n */\nQ.isRejected = isRejected;\nfunction isRejected(object) {\n    return isPromise(object) && object.inspect().state === \"rejected\";\n}\n\nPromise.prototype.isRejected = function () {\n    return this.inspect().state === \"rejected\";\n};\n\n//// BEGIN UNHANDLED REJECTION TRACKING\n\n// This promise library consumes exceptions thrown in handlers so they can be\n// handled by a subsequent promise.  The exceptions get added to this array when\n// they are created, and removed when they are handled.  Note that in ES6 or\n// shimmed environments, this would naturally be a `Set`.\nvar unhandledReasons = [];\nvar unhandledRejections = [];\nvar unhandledReasonsDisplayed = false;\nvar trackUnhandledRejections = true;\nfunction displayUnhandledReasons() {\n    if (\n        !unhandledReasonsDisplayed &&\n        typeof window !== \"undefined\" &&\n        window.console\n    ) {\n        console.warn(\"[Q] Unhandled rejection reasons (should be empty):\",\n                     unhandledReasons);\n    }\n\n    unhandledReasonsDisplayed = true;\n}\n\nfunction logUnhandledReasons() {\n    for (var i = 0; i < unhandledReasons.length; i++) {\n        var reason = unhandledReasons[i];\n        console.warn(\"Unhandled rejection reason:\", reason);\n    }\n}\n\nfunction resetUnhandledRejections() {\n    unhandledReasons.length = 0;\n    unhandledRejections.length = 0;\n    unhandledReasonsDisplayed = false;\n\n    if (!trackUnhandledRejections) {\n        trackUnhandledRejections = true;\n\n        // Show unhandled rejection reasons if Node exits without handling an\n        // outstanding rejection.  (Note that Browserify presently produces a\n        // `process` global without the `EventEmitter` `on` method.)\n        if (typeof process !== \"undefined\" && process.on) {\n            process.on(\"exit\", logUnhandledReasons);\n        }\n    }\n}\n\nfunction trackRejection(promise, reason) {\n    if (!trackUnhandledRejections) {\n        return;\n    }\n\n    unhandledRejections.push(promise);\n    if (reason && typeof reason.stack !== \"undefined\") {\n        unhandledReasons.push(reason.stack);\n    } else {\n        unhandledReasons.push(\"(no stack) \" + reason);\n    }\n    displayUnhandledReasons();\n}\n\nfunction untrackRejection(promise) {\n    if (!trackUnhandledRejections) {\n        return;\n    }\n\n    var at = array_indexOf(unhandledRejections, promise);\n    if (at !== -1) {\n        unhandledRejections.splice(at, 1);\n        unhandledReasons.splice(at, 1);\n    }\n}\n\nQ.resetUnhandledRejections = resetUnhandledRejections;\n\nQ.getUnhandledReasons = function () {\n    // Make a copy so that consumers can't interfere with our internal state.\n    return unhandledReasons.slice();\n};\n\nQ.stopUnhandledRejectionTracking = function () {\n    resetUnhandledRejections();\n    if (typeof process !== \"undefined\" && process.on) {\n        process.removeListener(\"exit\", logUnhandledReasons);\n    }\n    trackUnhandledRejections = false;\n};\n\nresetUnhandledRejections();\n\n//// END UNHANDLED REJECTION TRACKING\n\n/**\n * Constructs a rejected promise.\n * @param reason value describing the failure\n */\nQ.reject = reject;\nfunction reject(reason) {\n    var rejection = Promise({\n        \"when\": function (rejected) {\n            // note that the error has been handled\n            if (rejected) {\n                untrackRejection(this);\n            }\n            return rejected ? rejected(reason) : this;\n        }\n    }, function fallback() {\n        return this;\n    }, function inspect() {\n        return { state: \"rejected\", reason: reason };\n    });\n\n    // Note that the reason has not been handled.\n    trackRejection(rejection, reason);\n\n    return rejection;\n}\n\n/**\n * Constructs a fulfilled promise for an immediate reference.\n * @param value immediate reference\n */\nQ.fulfill = fulfill;\nfunction fulfill(value) {\n    return Promise({\n        \"when\": function () {\n            return value;\n        },\n        \"get\": function (name) {\n            return value[name];\n        },\n        \"set\": function (name, rhs) {\n            value[name] = rhs;\n        },\n        \"delete\": function (name) {\n            delete value[name];\n        },\n        \"post\": function (name, args) {\n            // Mark Miller proposes that post with no name should apply a\n            // promised function.\n            if (name === null || name === void 0) {\n                return value.apply(void 0, args);\n            } else {\n                return value[name].apply(value, args);\n            }\n        },\n        \"apply\": function (thisp, args) {\n            return value.apply(thisp, args);\n        },\n        \"keys\": function () {\n            return object_keys(value);\n        }\n    }, void 0, function inspect() {\n        return { state: \"fulfilled\", value: value };\n    });\n}\n\n/**\n * Converts thenables to Q promises.\n * @param promise thenable promise\n * @returns a Q promise\n */\nfunction coerce(promise) {\n    var deferred = defer();\n    nextTick(function () {\n        try {\n            promise.then(deferred.resolve, deferred.reject, deferred.notify);\n        } catch (exception) {\n            deferred.reject(exception);\n        }\n    });\n    return deferred.promise;\n}\n\n/**\n * Annotates an object such that it will never be\n * transferred away from this process over any promise\n * communication channel.\n * @param object\n * @returns promise a wrapping of that object that\n * additionally responds to the \"isDef\" message\n * without a rejection.\n */\nQ.master = master;\nfunction master(object) {\n    return Promise({\n        \"isDef\": function () {}\n    }, function fallback(op, args) {\n        return dispatch(object, op, args);\n    }, function () {\n        return Q(object).inspect();\n    });\n}\n\n/**\n * Spreads the values of a promised array of arguments into the\n * fulfillment callback.\n * @param fulfilled callback that receives variadic arguments from the\n * promised array\n * @param rejected callback that receives the exception if the promise\n * is rejected.\n * @returns a promise for the return value or thrown exception of\n * either callback.\n */\nQ.spread = spread;\nfunction spread(value, fulfilled, rejected) {\n    return Q(value).spread(fulfilled, rejected);\n}\n\nPromise.prototype.spread = function (fulfilled, rejected) {\n    return this.all().then(function (array) {\n        return fulfilled.apply(void 0, array);\n    }, rejected);\n};\n\n/**\n * The async function is a decorator for generator functions, turning\n * them into asynchronous generators.  Although generators are only part\n * of the newest ECMAScript 6 drafts, this code does not cause syntax\n * errors in older engines.  This code should continue to work and will\n * in fact improve over time as the language improves.\n *\n * ES6 generators are currently part of V8 version 3.19 with the\n * --harmony-generators runtime flag enabled.  SpiderMonkey has had them\n * for longer, but under an older Python-inspired form.  This function\n * works on both kinds of generators.\n *\n * Decorates a generator function such that:\n *  - it may yield promises\n *  - execution will continue when that promise is fulfilled\n *  - the value of the yield expression will be the fulfilled value\n *  - it returns a promise for the return value (when the generator\n *    stops iterating)\n *  - the decorated function returns a promise for the return value\n *    of the generator or the first rejected promise among those\n *    yielded.\n *  - if an error is thrown in the generator, it propagates through\n *    every following yield until it is caught, or until it escapes\n *    the generator function altogether, and is translated into a\n *    rejection for the promise returned by the decorated generator.\n */\nQ.async = async;\nfunction async(makeGenerator) {\n    return function () {\n        // when verb is \"send\", arg is a value\n        // when verb is \"throw\", arg is an exception\n        function continuer(verb, arg) {\n            var result;\n            if (hasES6Generators) {\n                try {\n                    result = generator[verb](arg);\n                } catch (exception) {\n                    return reject(exception);\n                }\n                if (result.done) {\n                    return result.value;\n                } else {\n                    return when(result.value, callback, errback);\n                }\n            } else {\n                // FIXME: Remove this case when SM does ES6 generators.\n                try {\n                    result = generator[verb](arg);\n                } catch (exception) {\n                    if (isStopIteration(exception)) {\n                        return exception.value;\n                    } else {\n                        return reject(exception);\n                    }\n                }\n                return when(result, callback, errback);\n            }\n        }\n        var generator = makeGenerator.apply(this, arguments);\n        var callback = continuer.bind(continuer, \"next\");\n        var errback = continuer.bind(continuer, \"throw\");\n        return callback();\n    };\n}\n\n/**\n * The spawn function is a small wrapper around async that immediately\n * calls the generator and also ends the promise chain, so that any\n * unhandled errors are thrown instead of forwarded to the error\n * handler. This is useful because it's extremely common to run\n * generators at the top-level to work with libraries.\n */\nQ.spawn = spawn;\nfunction spawn(makeGenerator) {\n    Q.done(Q.async(makeGenerator)());\n}\n\n// FIXME: Remove this interface once ES6 generators are in SpiderMonkey.\n/**\n * Throws a ReturnValue exception to stop an asynchronous generator.\n *\n * This interface is a stop-gap measure to support generator return\n * values in older Firefox/SpiderMonkey.  In browsers that support ES6\n * generators like Chromium 29, just use \"return\" in your generator\n * functions.\n *\n * @param value the return value for the surrounding generator\n * @throws ReturnValue exception with the value.\n * @example\n * // ES6 style\n * Q.async(function* () {\n *      var foo = yield getFooPromise();\n *      var bar = yield getBarPromise();\n *      return foo + bar;\n * })\n * // Older SpiderMonkey style\n * Q.async(function () {\n *      var foo = yield getFooPromise();\n *      var bar = yield getBarPromise();\n *      Q.return(foo + bar);\n * })\n */\nQ[\"return\"] = _return;\nfunction _return(value) {\n    throw new QReturnValue(value);\n}\n\n/**\n * The promised function decorator ensures that any promise arguments\n * are settled and passed as values (`this` is also settled and passed\n * as a value).  It will also ensure that the result of a function is\n * always a promise.\n *\n * @example\n * var add = Q.promised(function (a, b) {\n *     return a + b;\n * });\n * add(Q(a), Q(B));\n *\n * @param {function} callback The function to decorate\n * @returns {function} a function that has been decorated.\n */\nQ.promised = promised;\nfunction promised(callback) {\n    return function () {\n        return spread([this, all(arguments)], function (self, args) {\n            return callback.apply(self, args);\n        });\n    };\n}\n\n/**\n * sends a message to a value in a future turn\n * @param object* the recipient\n * @param op the name of the message operation, e.g., \"when\",\n * @param args further arguments to be forwarded to the operation\n * @returns result {Promise} a promise for the result of the operation\n */\nQ.dispatch = dispatch;\nfunction dispatch(object, op, args) {\n    return Q(object).dispatch(op, args);\n}\n\nPromise.prototype.dispatch = function (op, args) {\n    var self = this;\n    var deferred = defer();\n    nextTick(function () {\n        self.promiseDispatch(deferred.resolve, op, args);\n    });\n    return deferred.promise;\n};\n\n/**\n * Gets the value of a property in a future turn.\n * @param object    promise or immediate reference for target object\n * @param name      name of property to get\n * @return promise for the property value\n */\nQ.get = function (object, key) {\n    return Q(object).dispatch(\"get\", [key]);\n};\n\nPromise.prototype.get = function (key) {\n    return this.dispatch(\"get\", [key]);\n};\n\n/**\n * Sets the value of a property in a future turn.\n * @param object    promise or immediate reference for object object\n * @param name      name of property to set\n * @param value     new value of property\n * @return promise for the return value\n */\nQ.set = function (object, key, value) {\n    return Q(object).dispatch(\"set\", [key, value]);\n};\n\nPromise.prototype.set = function (key, value) {\n    return this.dispatch(\"set\", [key, value]);\n};\n\n/**\n * Deletes a property in a future turn.\n * @param object    promise or immediate reference for target object\n * @param name      name of property to delete\n * @return promise for the return value\n */\nQ.del = // XXX legacy\nQ[\"delete\"] = function (object, key) {\n    return Q(object).dispatch(\"delete\", [key]);\n};\n\nPromise.prototype.del = // XXX legacy\nPromise.prototype[\"delete\"] = function (key) {\n    return this.dispatch(\"delete\", [key]);\n};\n\n/**\n * Invokes a method in a future turn.\n * @param object    promise or immediate reference for target object\n * @param name      name of method to invoke\n * @param value     a value to post, typically an array of\n *                  invocation arguments for promises that\n *                  are ultimately backed with `resolve` values,\n *                  as opposed to those backed with URLs\n *                  wherein the posted value can be any\n *                  JSON serializable object.\n * @return promise for the return value\n */\n// bound locally because it is used by other methods\nQ.mapply = // XXX As proposed by \"Redsandro\"\nQ.post = function (object, name, args) {\n    return Q(object).dispatch(\"post\", [name, args]);\n};\n\nPromise.prototype.mapply = // XXX As proposed by \"Redsandro\"\nPromise.prototype.post = function (name, args) {\n    return this.dispatch(\"post\", [name, args]);\n};\n\n/**\n * Invokes a method in a future turn.\n * @param object    promise or immediate reference for target object\n * @param name      name of method to invoke\n * @param ...args   array of invocation arguments\n * @return promise for the return value\n */\nQ.send = // XXX Mark Miller's proposed parlance\nQ.mcall = // XXX As proposed by \"Redsandro\"\nQ.invoke = function (object, name /*...args*/) {\n    return Q(object).dispatch(\"post\", [name, array_slice(arguments, 2)]);\n};\n\nPromise.prototype.send = // XXX Mark Miller's proposed parlance\nPromise.prototype.mcall = // XXX As proposed by \"Redsandro\"\nPromise.prototype.invoke = function (name /*...args*/) {\n    return this.dispatch(\"post\", [name, array_slice(arguments, 1)]);\n};\n\n/**\n * Applies the promised function in a future turn.\n * @param object    promise or immediate reference for target function\n * @param args      array of application arguments\n */\nQ.fapply = function (object, args) {\n    return Q(object).dispatch(\"apply\", [void 0, args]);\n};\n\nPromise.prototype.fapply = function (args) {\n    return this.dispatch(\"apply\", [void 0, args]);\n};\n\n/**\n * Calls the promised function in a future turn.\n * @param object    promise or immediate reference for target function\n * @param ...args   array of application arguments\n */\nQ[\"try\"] =\nQ.fcall = function (object /* ...args*/) {\n    return Q(object).dispatch(\"apply\", [void 0, array_slice(arguments, 1)]);\n};\n\nPromise.prototype.fcall = function (/*...args*/) {\n    return this.dispatch(\"apply\", [void 0, array_slice(arguments)]);\n};\n\n/**\n * Binds the promised function, transforming return values into a fulfilled\n * promise and thrown errors into a rejected one.\n * @param object    promise or immediate reference for target function\n * @param ...args   array of application arguments\n */\nQ.fbind = function (object /*...args*/) {\n    var promise = Q(object);\n    var args = array_slice(arguments, 1);\n    return function fbound() {\n        return promise.dispatch(\"apply\", [\n            this,\n            args.concat(array_slice(arguments))\n        ]);\n    };\n};\nPromise.prototype.fbind = function (/*...args*/) {\n    var promise = this;\n    var args = array_slice(arguments);\n    return function fbound() {\n        return promise.dispatch(\"apply\", [\n            this,\n            args.concat(array_slice(arguments))\n        ]);\n    };\n};\n\n/**\n * Requests the names of the owned properties of a promised\n * object in a future turn.\n * @param object    promise or immediate reference for target object\n * @return promise for the keys of the eventually settled object\n */\nQ.keys = function (object) {\n    return Q(object).dispatch(\"keys\", []);\n};\n\nPromise.prototype.keys = function () {\n    return this.dispatch(\"keys\", []);\n};\n\n/**\n * Turns an array of promises into a promise for an array.  If any of\n * the promises gets rejected, the whole array is rejected immediately.\n * @param {Array*} an array (or promise for an array) of values (or\n * promises for values)\n * @returns a promise for an array of the corresponding values\n */\n// By Mark Miller\n// http://wiki.ecmascript.org/doku.php?id=strawman:concurrency&rev=1308776521#allfulfilled\nQ.all = all;\nfunction all(promises) {\n    return when(promises, function (promises) {\n        var countDown = 0;\n        var deferred = defer();\n        array_reduce(promises, function (undefined, promise, index) {\n            var snapshot;\n            if (\n                isPromise(promise) &&\n                (snapshot = promise.inspect()).state === \"fulfilled\"\n            ) {\n                promises[index] = snapshot.value;\n            } else {\n                ++countDown;\n                when(\n                    promise,\n                    function (value) {\n                        promises[index] = value;\n                        if (--countDown === 0) {\n                            deferred.resolve(promises);\n                        }\n                    },\n                    deferred.reject,\n                    function (progress) {\n                        deferred.notify({ index: index, value: progress });\n                    }\n                );\n            }\n        }, void 0);\n        if (countDown === 0) {\n            deferred.resolve(promises);\n        }\n        return deferred.promise;\n    });\n}\n\nPromise.prototype.all = function () {\n    return all(this);\n};\n\n/**\n * Waits for all promises to be settled, either fulfilled or\n * rejected.  This is distinct from `all` since that would stop\n * waiting at the first rejection.  The promise returned by\n * `allResolved` will never be rejected.\n * @param promises a promise for an array (or an array) of promises\n * (or values)\n * @return a promise for an array of promises\n */\nQ.allResolved = deprecate(allResolved, \"allResolved\", \"allSettled\");\nfunction allResolved(promises) {\n    return when(promises, function (promises) {\n        promises = array_map(promises, Q);\n        return when(all(array_map(promises, function (promise) {\n            return when(promise, noop, noop);\n        })), function () {\n            return promises;\n        });\n    });\n}\n\nPromise.prototype.allResolved = function () {\n    return allResolved(this);\n};\n\n/**\n * @see Promise#allSettled\n */\nQ.allSettled = allSettled;\nfunction allSettled(promises) {\n    return Q(promises).allSettled();\n}\n\n/**\n * Turns an array of promises into a promise for an array of their states (as\n * returned by `inspect`) when they have all settled.\n * @param {Array[Any*]} values an array (or promise for an array) of values (or\n * promises for values)\n * @returns {Array[State]} an array of states for the respective values.\n */\nPromise.prototype.allSettled = function () {\n    return this.then(function (promises) {\n        return all(array_map(promises, function (promise) {\n            promise = Q(promise);\n            function regardless() {\n                return promise.inspect();\n            }\n            return promise.then(regardless, regardless);\n        }));\n    });\n};\n\n/**\n * Captures the failure of a promise, giving an oportunity to recover\n * with a callback.  If the given promise is fulfilled, the returned\n * promise is fulfilled.\n * @param {Any*} promise for something\n * @param {Function} callback to fulfill the returned promise if the\n * given promise is rejected\n * @returns a promise for the return value of the callback\n */\nQ.fail = // XXX legacy\nQ[\"catch\"] = function (object, rejected) {\n    return Q(object).then(void 0, rejected);\n};\n\nPromise.prototype.fail = // XXX legacy\nPromise.prototype[\"catch\"] = function (rejected) {\n    return this.then(void 0, rejected);\n};\n\n/**\n * Attaches a listener that can respond to progress notifications from a\n * promise's originating deferred. This listener receives the exact arguments\n * passed to ``deferred.notify``.\n * @param {Any*} promise for something\n * @param {Function} callback to receive any progress notifications\n * @returns the given promise, unchanged\n */\nQ.progress = progress;\nfunction progress(object, progressed) {\n    return Q(object).then(void 0, void 0, progressed);\n}\n\nPromise.prototype.progress = function (progressed) {\n    return this.then(void 0, void 0, progressed);\n};\n\n/**\n * Provides an opportunity to observe the settling of a promise,\n * regardless of whether the promise is fulfilled or rejected.  Forwards\n * the resolution to the returned promise when the callback is done.\n * The callback can return a promise to defer completion.\n * @param {Any*} promise\n * @param {Function} callback to observe the resolution of the given\n * promise, takes no arguments.\n * @returns a promise for the resolution of the given promise when\n * ``fin`` is done.\n */\nQ.fin = // XXX legacy\nQ[\"finally\"] = function (object, callback) {\n    return Q(object)[\"finally\"](callback);\n};\n\nPromise.prototype.fin = // XXX legacy\nPromise.prototype[\"finally\"] = function (callback) {\n    callback = Q(callback);\n    return this.then(function (value) {\n        return callback.fcall().then(function () {\n            return value;\n        });\n    }, function (reason) {\n        // TODO attempt to recycle the rejection with \"this\".\n        return callback.fcall().then(function () {\n            throw reason;\n        });\n    });\n};\n\n/**\n * Terminates a chain of promises, forcing rejections to be\n * thrown as exceptions.\n * @param {Any*} promise at the end of a chain of promises\n * @returns nothing\n */\nQ.done = function (object, fulfilled, rejected, progress) {\n    return Q(object).done(fulfilled, rejected, progress);\n};\n\nPromise.prototype.done = function (fulfilled, rejected, progress) {\n    var onUnhandledError = function (error) {\n        // forward to a future turn so that ``when``\n        // does not catch it and turn it into a rejection.\n        nextTick(function () {\n            makeStackTraceLong(error, promise);\n            if (Q.onerror) {\n                Q.onerror(error);\n            } else {\n                throw error;\n            }\n        });\n    };\n\n    // Avoid unnecessary `nextTick`ing via an unnecessary `when`.\n    var promise = fulfilled || rejected || progress ?\n        this.then(fulfilled, rejected, progress) :\n        this;\n\n    if (typeof process === \"object\" && process && process.domain) {\n        onUnhandledError = process.domain.bind(onUnhandledError);\n    }\n\n    promise.then(void 0, onUnhandledError);\n};\n\n/**\n * Causes a promise to be rejected if it does not get fulfilled before\n * some milliseconds time out.\n * @param {Any*} promise\n * @param {Number} milliseconds timeout\n * @param {String} custom error message (optional)\n * @returns a promise for the resolution of the given promise if it is\n * fulfilled before the timeout, otherwise rejected.\n */\nQ.timeout = function (object, ms, message) {\n    return Q(object).timeout(ms, message);\n};\n\nPromise.prototype.timeout = function (ms, message) {\n    var deferred = defer();\n    var timeoutId = setTimeout(function () {\n        deferred.reject(new Error(message || \"Timed out after \" + ms + \" ms\"));\n    }, ms);\n\n    this.then(function (value) {\n        clearTimeout(timeoutId);\n        deferred.resolve(value);\n    }, function (exception) {\n        clearTimeout(timeoutId);\n        deferred.reject(exception);\n    }, deferred.notify);\n\n    return deferred.promise;\n};\n\n/**\n * Returns a promise for the given value (or promised value), some\n * milliseconds after it resolved. Passes rejections immediately.\n * @param {Any*} promise\n * @param {Number} milliseconds\n * @returns a promise for the resolution of the given promise after milliseconds\n * time has elapsed since the resolution of the given promise.\n * If the given promise rejects, that is passed immediately.\n */\nQ.delay = function (object, timeout) {\n    if (timeout === void 0) {\n        timeout = object;\n        object = void 0;\n    }\n    return Q(object).delay(timeout);\n};\n\nPromise.prototype.delay = function (timeout) {\n    return this.then(function (value) {\n        var deferred = defer();\n        setTimeout(function () {\n            deferred.resolve(value);\n        }, timeout);\n        return deferred.promise;\n    });\n};\n\n/**\n * Passes a continuation to a Node function, which is called with the given\n * arguments provided as an array, and returns a promise.\n *\n *      Q.nfapply(FS.readFile, [__filename])\n *      .then(function (content) {\n *      })\n *\n */\nQ.nfapply = function (callback, args) {\n    return Q(callback).nfapply(args);\n};\n\nPromise.prototype.nfapply = function (args) {\n    var deferred = defer();\n    var nodeArgs = array_slice(args);\n    nodeArgs.push(deferred.makeNodeResolver());\n    this.fapply(nodeArgs).fail(deferred.reject);\n    return deferred.promise;\n};\n\n/**\n * Passes a continuation to a Node function, which is called with the given\n * arguments provided individually, and returns a promise.\n * @example\n * Q.nfcall(FS.readFile, __filename)\n * .then(function (content) {\n * })\n *\n */\nQ.nfcall = function (callback /*...args*/) {\n    var args = array_slice(arguments, 1);\n    return Q(callback).nfapply(args);\n};\n\nPromise.prototype.nfcall = function (/*...args*/) {\n    var nodeArgs = array_slice(arguments);\n    var deferred = defer();\n    nodeArgs.push(deferred.makeNodeResolver());\n    this.fapply(nodeArgs).fail(deferred.reject);\n    return deferred.promise;\n};\n\n/**\n * Wraps a NodeJS continuation passing function and returns an equivalent\n * version that returns a promise.\n * @example\n * Q.nfbind(FS.readFile, __filename)(\"utf-8\")\n * .then(console.log)\n * .done()\n */\nQ.nfbind =\nQ.denodeify = function (callback /*...args*/) {\n    var baseArgs = array_slice(arguments, 1);\n    return function () {\n        var nodeArgs = baseArgs.concat(array_slice(arguments));\n        var deferred = defer();\n        nodeArgs.push(deferred.makeNodeResolver());\n        Q(callback).fapply(nodeArgs).fail(deferred.reject);\n        return deferred.promise;\n    };\n};\n\nPromise.prototype.nfbind =\nPromise.prototype.denodeify = function (/*...args*/) {\n    var args = array_slice(arguments);\n    args.unshift(this);\n    return Q.denodeify.apply(void 0, args);\n};\n\nQ.nbind = function (callback, thisp /*...args*/) {\n    var baseArgs = array_slice(arguments, 2);\n    return function () {\n        var nodeArgs = baseArgs.concat(array_slice(arguments));\n        var deferred = defer();\n        nodeArgs.push(deferred.makeNodeResolver());\n        function bound() {\n            return callback.apply(thisp, arguments);\n        }\n        Q(bound).fapply(nodeArgs).fail(deferred.reject);\n        return deferred.promise;\n    };\n};\n\nPromise.prototype.nbind = function (/*thisp, ...args*/) {\n    var args = array_slice(arguments, 0);\n    args.unshift(this);\n    return Q.nbind.apply(void 0, args);\n};\n\n/**\n * Calls a method of a Node-style object that accepts a Node-style\n * callback with a given array of arguments, plus a provided callback.\n * @param object an object that has the named method\n * @param {String} name name of the method of object\n * @param {Array} args arguments to pass to the method; the callback\n * will be provided by Q and appended to these arguments.\n * @returns a promise for the value or error\n */\nQ.nmapply = // XXX As proposed by \"Redsandro\"\nQ.npost = function (object, name, args) {\n    return Q(object).npost(name, args);\n};\n\nPromise.prototype.nmapply = // XXX As proposed by \"Redsandro\"\nPromise.prototype.npost = function (name, args) {\n    var nodeArgs = array_slice(args || []);\n    var deferred = defer();\n    nodeArgs.push(deferred.makeNodeResolver());\n    this.dispatch(\"post\", [name, nodeArgs]).fail(deferred.reject);\n    return deferred.promise;\n};\n\n/**\n * Calls a method of a Node-style object that accepts a Node-style\n * callback, forwarding the given variadic arguments, plus a provided\n * callback argument.\n * @param object an object that has the named method\n * @param {String} name name of the method of object\n * @param ...args arguments to pass to the method; the callback will\n * be provided by Q and appended to these arguments.\n * @returns a promise for the value or error\n */\nQ.nsend = // XXX Based on Mark Miller's proposed \"send\"\nQ.nmcall = // XXX Based on \"Redsandro's\" proposal\nQ.ninvoke = function (object, name /*...args*/) {\n    var nodeArgs = array_slice(arguments, 2);\n    var deferred = defer();\n    nodeArgs.push(deferred.makeNodeResolver());\n    Q(object).dispatch(\"post\", [name, nodeArgs]).fail(deferred.reject);\n    return deferred.promise;\n};\n\nPromise.prototype.nsend = // XXX Based on Mark Miller's proposed \"send\"\nPromise.prototype.nmcall = // XXX Based on \"Redsandro's\" proposal\nPromise.prototype.ninvoke = function (name /*...args*/) {\n    var nodeArgs = array_slice(arguments, 1);\n    var deferred = defer();\n    nodeArgs.push(deferred.makeNodeResolver());\n    this.dispatch(\"post\", [name, nodeArgs]).fail(deferred.reject);\n    return deferred.promise;\n};\n\n/**\n * If a function would like to support both Node continuation-passing-style and\n * promise-returning-style, it can end its internal promise chain with\n * `nodeify(nodeback)`, forwarding the optional nodeback argument.  If the user\n * elects to use a nodeback, the result will be sent there.  If they do not\n * pass a nodeback, they will receive the result promise.\n * @param object a result (or a promise for a result)\n * @param {Function} nodeback a Node.js-style callback\n * @returns either the promise or nothing\n */\nQ.nodeify = nodeify;\nfunction nodeify(object, nodeback) {\n    return Q(object).nodeify(nodeback);\n}\n\nPromise.prototype.nodeify = function (nodeback) {\n    if (nodeback) {\n        this.then(function (value) {\n            nextTick(function () {\n                nodeback(null, value);\n            });\n        }, function (error) {\n            nextTick(function () {\n                nodeback(error);\n            });\n        });\n    } else {\n        return this;\n    }\n};\n\n// All code before this point will be filtered from stack traces.\nvar qEndingLine = captureLine();\n\nreturn Q;\n\n});\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js":{"id":16,"canonicalName":"node_modules/lodash/dist/lodash.js","code":";\n(function () {\n    var undefined;\n    var arrayPool = [], objectPool = [];\n    var idCounter = 0;\n    var keyPrefix = +new Date() + '';\n    var largeArraySize = 75;\n    var maxPoolSize = 40;\n    var whitespace = ' \\t\\x0B\\f\\xa0\\ufeff' + '\\n\\r\\u2028\\u2029' + '\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000';\n    var reEmptyStringLeading = /\\b__p \\+= '';/g, reEmptyStringMiddle = /\\b(__p \\+=) '' \\+/g, reEmptyStringTrailing = /(__e\\(.*?\\)|\\b__t\\)) \\+\\n'';/g;\n    var reEsTemplate = /\\$\\{([^\\\\}]*(?:\\\\.[^\\\\}]*)*)\\}/g;\n    var reFlags = /\\w*$/;\n    var reFuncName = /^\\s*function[ \\n\\r\\t]+\\w/;\n    var reInterpolate = /<%=([\\s\\S]+?)%>/g;\n    var reLeadingSpacesAndZeros = RegExp('^[' + whitespace + ']*0+(?=.$)');\n    var reNoMatch = /($^)/;\n    var reThis = /\\bthis\\b/;\n    var reUnescapedString = /['\\n\\r\\t\\u2028\\u2029\\\\]/g;\n    var contextProps = [\n            'Array',\n            'Boolean',\n            'Date',\n            'Function',\n            'Math',\n            'Number',\n            'Object',\n            'RegExp',\n            'String',\n            '_',\n            'attachEvent',\n            'clearTimeout',\n            'isFinite',\n            'isNaN',\n            'parseInt',\n            'setTimeout'\n        ];\n    var templateCounter = 0;\n    var argsClass = '[object Arguments]', arrayClass = '[object Array]', boolClass = '[object Boolean]', dateClass = '[object Date]', funcClass = '[object Function]', numberClass = '[object Number]', objectClass = '[object Object]', regexpClass = '[object RegExp]', stringClass = '[object String]';\n    var cloneableClasses = {};\n    cloneableClasses[funcClass] = false;\n    cloneableClasses[argsClass] = cloneableClasses[arrayClass] = cloneableClasses[boolClass] = cloneableClasses[dateClass] = cloneableClasses[numberClass] = cloneableClasses[objectClass] = cloneableClasses[regexpClass] = cloneableClasses[stringClass] = true;\n    var debounceOptions = {\n            'leading': false,\n            'maxWait': 0,\n            'trailing': false\n        };\n    var descriptor = {\n            'configurable': false,\n            'enumerable': false,\n            'value': null,\n            'writable': false\n        };\n    var objectTypes = {\n            'boolean': false,\n            'function': true,\n            'object': true,\n            'number': false,\n            'string': false,\n            'undefined': false\n        };\n    var stringEscapes = {\n            '\\\\': '\\\\',\n            '\\'': '\\'',\n            '\\n': 'n',\n            '\\r': 'r',\n            '\\t': 't',\n            '\\u2028': 'u2028',\n            '\\u2029': 'u2029'\n        };\n    var root = objectTypes[typeof window] && window || this;\n    var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;\n    var freeModule = objectTypes[typeof module] && module && !module.nodeType && module;\n    var moduleExports = freeModule && freeModule.exports === freeExports && freeExports;\n    var freeGlobal = objectTypes[typeof global] && global;\n    if (freeGlobal && (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal)) {\n        root = freeGlobal;\n    }\n    function baseIndexOf(array, value, fromIndex) {\n        var index = (fromIndex || 0) - 1, length = array ? array.length : 0;\n        while (++index < length) {\n            if (array[index] === value) {\n                return index;\n            }\n        }\n        return -1;\n    }\n    function cacheIndexOf(cache, value) {\n        var type = typeof value;\n        cache = cache.cache;\n        if (type == 'boolean' || value == null) {\n            return cache[value] ? 0 : -1;\n        }\n        if (type != 'number' && type != 'string') {\n            type = 'object';\n        }\n        var key = type == 'number' ? value : keyPrefix + value;\n        cache = (cache = cache[type]) && cache[key];\n        return type == 'object' ? cache && baseIndexOf(cache, value) > -1 ? 0 : -1 : cache ? 0 : -1;\n    }\n    function cachePush(value) {\n        var cache = this.cache, type = typeof value;\n        if (type == 'boolean' || value == null) {\n            cache[value] = true;\n        } else {\n            if (type != 'number' && type != 'string') {\n                type = 'object';\n            }\n            var key = type == 'number' ? value : keyPrefix + value, typeCache = cache[type] || (cache[type] = {});\n            if (type == 'object') {\n                (typeCache[key] || (typeCache[key] = [])).push(value);\n            } else {\n                typeCache[key] = true;\n            }\n        }\n    }\n    function charAtCallback(value) {\n        return value.charCodeAt(0);\n    }\n    function compareAscending(a, b) {\n        var ac = a.criteria, bc = b.criteria, index = -1, length = ac.length;\n        while (++index < length) {\n            var value = ac[index], other = bc[index];\n            if (value !== other) {\n                if (value > other || typeof value == 'undefined') {\n                    return 1;\n                }\n                if (value < other || typeof other == 'undefined') {\n                    return -1;\n                }\n            }\n        }\n        return a.index - b.index;\n    }\n    function createCache(array) {\n        var index = -1, length = array.length, first = array[0], mid = array[length / 2 | 0], last = array[length - 1];\n        if (first && typeof first == 'object' && mid && typeof mid == 'object' && last && typeof last == 'object') {\n            return false;\n        }\n        var cache = getObject();\n        cache['false'] = cache['null'] = cache['true'] = cache['undefined'] = false;\n        var result = getObject();\n        result.array = array;\n        result.cache = cache;\n        result.push = cachePush;\n        while (++index < length) {\n            result.push(array[index]);\n        }\n        return result;\n    }\n    function escapeStringChar(match) {\n        return '\\\\' + stringEscapes[match];\n    }\n    function getArray() {\n        return arrayPool.pop() || [];\n    }\n    function getObject() {\n        return objectPool.pop() || {\n            'array': null,\n            'cache': null,\n            'criteria': null,\n            'false': false,\n            'index': 0,\n            'null': false,\n            'number': null,\n            'object': null,\n            'push': null,\n            'string': null,\n            'true': false,\n            'undefined': false,\n            'value': null\n        };\n    }\n    function releaseArray(array) {\n        array.length = 0;\n        if (arrayPool.length < maxPoolSize) {\n            arrayPool.push(array);\n        }\n    }\n    function releaseObject(object) {\n        var cache = object.cache;\n        if (cache) {\n            releaseObject(cache);\n        }\n        object.array = object.cache = object.criteria = object.object = object.number = object.string = object.value = null;\n        if (objectPool.length < maxPoolSize) {\n            objectPool.push(object);\n        }\n    }\n    function slice(array, start, end) {\n        start || (start = 0);\n        if (typeof end == 'undefined') {\n            end = array ? array.length : 0;\n        }\n        var index = -1, length = end - start || 0, result = Array(length < 0 ? 0 : length);\n        while (++index < length) {\n            result[index] = array[start + index];\n        }\n        return result;\n    }\n    function runInContext(context) {\n        context = context ? _.defaults(root.Object(), context, _.pick(root, contextProps)) : root;\n        var Array = context.Array, Boolean = context.Boolean, Date = context.Date, Function = context.Function, Math = context.Math, Number = context.Number, Object = context.Object, RegExp = context.RegExp, String = context.String, TypeError = context.TypeError;\n        var arrayRef = [];\n        var objectProto = Object.prototype;\n        var oldDash = context._;\n        var toString = objectProto.toString;\n        var reNative = RegExp('^' + String(toString).replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&').replace(/toString| for [^\\]]+/g, '.*?') + '$');\n        var ceil = Math.ceil, clearTimeout = context.clearTimeout, floor = Math.floor, fnToString = Function.prototype.toString, getPrototypeOf = isNative(getPrototypeOf = Object.getPrototypeOf) && getPrototypeOf, hasOwnProperty = objectProto.hasOwnProperty, push = arrayRef.push, setTimeout = context.setTimeout, splice = arrayRef.splice, unshift = arrayRef.unshift;\n        var defineProperty = function () {\n                try {\n                    var o = {}, func = isNative(func = Object.defineProperty) && func, result = func(o, o, o) && func;\n                } catch (e) {\n                }\n                return result;\n            }();\n        var nativeCreate = isNative(nativeCreate = Object.create) && nativeCreate, nativeIsArray = isNative(nativeIsArray = Array.isArray) && nativeIsArray, nativeIsFinite = context.isFinite, nativeIsNaN = context.isNaN, nativeKeys = isNative(nativeKeys = Object.keys) && nativeKeys, nativeMax = Math.max, nativeMin = Math.min, nativeParseInt = context.parseInt, nativeRandom = Math.random;\n        var ctorByClass = {};\n        ctorByClass[arrayClass] = Array;\n        ctorByClass[boolClass] = Boolean;\n        ctorByClass[dateClass] = Date;\n        ctorByClass[funcClass] = Function;\n        ctorByClass[objectClass] = Object;\n        ctorByClass[numberClass] = Number;\n        ctorByClass[regexpClass] = RegExp;\n        ctorByClass[stringClass] = String;\n        function lodash(value) {\n            return value && typeof value == 'object' && !isArray(value) && hasOwnProperty.call(value, '__wrapped__') ? value : new lodashWrapper(value);\n        }\n        function lodashWrapper(value, chainAll) {\n            this.__chain__ = !!chainAll;\n            this.__wrapped__ = value;\n        }\n        lodashWrapper.prototype = lodash.prototype;\n        var support = lodash.support = {};\n        support.funcDecomp = !isNative(context.WinRTError) && reThis.test(runInContext);\n        support.funcNames = typeof Function.name == 'string';\n        lodash.templateSettings = {\n            'escape': /<%-([\\s\\S]+?)%>/g,\n            'evaluate': /<%([\\s\\S]+?)%>/g,\n            'interpolate': reInterpolate,\n            'variable': '',\n            'imports': { '_': lodash }\n        };\n        function baseBind(bindData) {\n            var func = bindData[0], partialArgs = bindData[2], thisArg = bindData[4];\n            function bound() {\n                if (partialArgs) {\n                    var args = slice(partialArgs);\n                    push.apply(args, arguments);\n                }\n                if (this instanceof bound) {\n                    var thisBinding = baseCreate(func.prototype), result = func.apply(thisBinding, args || arguments);\n                    return isObject(result) ? result : thisBinding;\n                }\n                return func.apply(thisArg, args || arguments);\n            }\n            setBindData(bound, bindData);\n            return bound;\n        }\n        function baseClone(value, isDeep, callback, stackA, stackB) {\n            if (callback) {\n                var result = callback(value);\n                if (typeof result != 'undefined') {\n                    return result;\n                }\n            }\n            var isObj = isObject(value);\n            if (isObj) {\n                var className = toString.call(value);\n                if (!cloneableClasses[className]) {\n                    return value;\n                }\n                var ctor = ctorByClass[className];\n                switch (className) {\n                case boolClass:\n                case dateClass:\n                    return new ctor(+value);\n                case numberClass:\n                case stringClass:\n                    return new ctor(value);\n                case regexpClass:\n                    result = ctor(value.source, reFlags.exec(value));\n                    result.lastIndex = value.lastIndex;\n                    return result;\n                }\n            } else {\n                return value;\n            }\n            var isArr = isArray(value);\n            if (isDeep) {\n                var initedStack = !stackA;\n                stackA || (stackA = getArray());\n                stackB || (stackB = getArray());\n                var length = stackA.length;\n                while (length--) {\n                    if (stackA[length] == value) {\n                        return stackB[length];\n                    }\n                }\n                result = isArr ? ctor(value.length) : {};\n            } else {\n                result = isArr ? slice(value) : assign({}, value);\n            }\n            if (isArr) {\n                if (hasOwnProperty.call(value, 'index')) {\n                    result.index = value.index;\n                }\n                if (hasOwnProperty.call(value, 'input')) {\n                    result.input = value.input;\n                }\n            }\n            if (!isDeep) {\n                return result;\n            }\n            stackA.push(value);\n            stackB.push(result);\n            (isArr ? forEach : forOwn)(value, function (objValue, key) {\n                result[key] = baseClone(objValue, isDeep, callback, stackA, stackB);\n            });\n            if (initedStack) {\n                releaseArray(stackA);\n                releaseArray(stackB);\n            }\n            return result;\n        }\n        function baseCreate(prototype, properties) {\n            return isObject(prototype) ? nativeCreate(prototype) : {};\n        }\n        if (!nativeCreate) {\n            baseCreate = function () {\n                function Object() {\n                }\n                return function (prototype) {\n                    if (isObject(prototype)) {\n                        Object.prototype = prototype;\n                        var result = new Object();\n                        Object.prototype = null;\n                    }\n                    return result || context.Object();\n                };\n            }();\n        }\n        function baseCreateCallback(func, thisArg, argCount) {\n            if (typeof func != 'function') {\n                return identity;\n            }\n            if (typeof thisArg == 'undefined' || !('prototype' in func)) {\n                return func;\n            }\n            var bindData = func.__bindData__;\n            if (typeof bindData == 'undefined') {\n                if (support.funcNames) {\n                    bindData = !func.name;\n                }\n                bindData = bindData || !support.funcDecomp;\n                if (!bindData) {\n                    var source = fnToString.call(func);\n                    if (!support.funcNames) {\n                        bindData = !reFuncName.test(source);\n                    }\n                    if (!bindData) {\n                        bindData = reThis.test(source);\n                        setBindData(func, bindData);\n                    }\n                }\n            }\n            if (bindData === false || bindData !== true && bindData[1] & 1) {\n                return func;\n            }\n            switch (argCount) {\n            case 1:\n                return function (value) {\n                    return func.call(thisArg, value);\n                };\n            case 2:\n                return function (a, b) {\n                    return func.call(thisArg, a, b);\n                };\n            case 3:\n                return function (value, index, collection) {\n                    return func.call(thisArg, value, index, collection);\n                };\n            case 4:\n                return function (accumulator, value, index, collection) {\n                    return func.call(thisArg, accumulator, value, index, collection);\n                };\n            }\n            return bind(func, thisArg);\n        }\n        function baseCreateWrapper(bindData) {\n            var func = bindData[0], bitmask = bindData[1], partialArgs = bindData[2], partialRightArgs = bindData[3], thisArg = bindData[4], arity = bindData[5];\n            var isBind = bitmask & 1, isBindKey = bitmask & 2, isCurry = bitmask & 4, isCurryBound = bitmask & 8, key = func;\n            function bound() {\n                var thisBinding = isBind ? thisArg : this;\n                if (partialArgs) {\n                    var args = slice(partialArgs);\n                    push.apply(args, arguments);\n                }\n                if (partialRightArgs || isCurry) {\n                    args || (args = slice(arguments));\n                    if (partialRightArgs) {\n                        push.apply(args, partialRightArgs);\n                    }\n                    if (isCurry && args.length < arity) {\n                        bitmask |= 16 & ~32;\n                        return baseCreateWrapper([\n                            func,\n                            isCurryBound ? bitmask : bitmask & ~3,\n                            args,\n                            null,\n                            thisArg,\n                            arity\n                        ]);\n                    }\n                }\n                args || (args = arguments);\n                if (isBindKey) {\n                    func = thisBinding[key];\n                }\n                if (this instanceof bound) {\n                    thisBinding = baseCreate(func.prototype);\n                    var result = func.apply(thisBinding, args);\n                    return isObject(result) ? result : thisBinding;\n                }\n                return func.apply(thisBinding, args);\n            }\n            setBindData(bound, bindData);\n            return bound;\n        }\n        function baseDifference(array, values) {\n            var index = -1, indexOf = getIndexOf(), length = array ? array.length : 0, isLarge = length >= largeArraySize && indexOf === baseIndexOf, result = [];\n            if (isLarge) {\n                var cache = createCache(values);\n                if (cache) {\n                    indexOf = cacheIndexOf;\n                    values = cache;\n                } else {\n                    isLarge = false;\n                }\n            }\n            while (++index < length) {\n                var value = array[index];\n                if (indexOf(values, value) < 0) {\n                    result.push(value);\n                }\n            }\n            if (isLarge) {\n                releaseObject(values);\n            }\n            return result;\n        }\n        function baseFlatten(array, isShallow, isStrict, fromIndex) {\n            var index = (fromIndex || 0) - 1, length = array ? array.length : 0, result = [];\n            while (++index < length) {\n                var value = array[index];\n                if (value && typeof value == 'object' && typeof value.length == 'number' && (isArray(value) || isArguments(value))) {\n                    if (!isShallow) {\n                        value = baseFlatten(value, isShallow, isStrict);\n                    }\n                    var valIndex = -1, valLength = value.length, resIndex = result.length;\n                    result.length += valLength;\n                    while (++valIndex < valLength) {\n                        result[resIndex++] = value[valIndex];\n                    }\n                } else if (!isStrict) {\n                    result.push(value);\n                }\n            }\n            return result;\n        }\n        function baseIsEqual(a, b, callback, isWhere, stackA, stackB) {\n            if (callback) {\n                var result = callback(a, b);\n                if (typeof result != 'undefined') {\n                    return !!result;\n                }\n            }\n            if (a === b) {\n                return a !== 0 || 1 / a == 1 / b;\n            }\n            var type = typeof a, otherType = typeof b;\n            if (a === a && !(a && objectTypes[type]) && !(b && objectTypes[otherType])) {\n                return false;\n            }\n            if (a == null || b == null) {\n                return a === b;\n            }\n            var className = toString.call(a), otherClass = toString.call(b);\n            if (className == argsClass) {\n                className = objectClass;\n            }\n            if (otherClass == argsClass) {\n                otherClass = objectClass;\n            }\n            if (className != otherClass) {\n                return false;\n            }\n            switch (className) {\n            case boolClass:\n            case dateClass:\n                return +a == +b;\n            case numberClass:\n                return a != +a ? b != +b : a == 0 ? 1 / a == 1 / b : a == +b;\n            case regexpClass:\n            case stringClass:\n                return a == String(b);\n            }\n            var isArr = className == arrayClass;\n            if (!isArr) {\n                var aWrapped = hasOwnProperty.call(a, '__wrapped__'), bWrapped = hasOwnProperty.call(b, '__wrapped__');\n                if (aWrapped || bWrapped) {\n                    return baseIsEqual(aWrapped ? a.__wrapped__ : a, bWrapped ? b.__wrapped__ : b, callback, isWhere, stackA, stackB);\n                }\n                if (className != objectClass) {\n                    return false;\n                }\n                var ctorA = a.constructor, ctorB = b.constructor;\n                if (ctorA != ctorB && !(isFunction(ctorA) && ctorA instanceof ctorA && isFunction(ctorB) && ctorB instanceof ctorB) && ('constructor' in a && 'constructor' in b)) {\n                    return false;\n                }\n            }\n            var initedStack = !stackA;\n            stackA || (stackA = getArray());\n            stackB || (stackB = getArray());\n            var length = stackA.length;\n            while (length--) {\n                if (stackA[length] == a) {\n                    return stackB[length] == b;\n                }\n            }\n            var size = 0;\n            result = true;\n            stackA.push(a);\n            stackB.push(b);\n            if (isArr) {\n                length = a.length;\n                size = b.length;\n                result = size == length;\n                if (result || isWhere) {\n                    while (size--) {\n                        var index = length, value = b[size];\n                        if (isWhere) {\n                            while (index--) {\n                                if (result = baseIsEqual(a[index], value, callback, isWhere, stackA, stackB)) {\n                                    break;\n                                }\n                            }\n                        } else if (!(result = baseIsEqual(a[size], value, callback, isWhere, stackA, stackB))) {\n                            break;\n                        }\n                    }\n                }\n            } else {\n                forIn(b, function (value, key, b) {\n                    if (hasOwnProperty.call(b, key)) {\n                        size++;\n                        return result = hasOwnProperty.call(a, key) && baseIsEqual(a[key], value, callback, isWhere, stackA, stackB);\n                    }\n                });\n                if (result && !isWhere) {\n                    forIn(a, function (value, key, a) {\n                        if (hasOwnProperty.call(a, key)) {\n                            return result = --size > -1;\n                        }\n                    });\n                }\n            }\n            stackA.pop();\n            stackB.pop();\n            if (initedStack) {\n                releaseArray(stackA);\n                releaseArray(stackB);\n            }\n            return result;\n        }\n        function baseMerge(object, source, callback, stackA, stackB) {\n            (isArray(source) ? forEach : forOwn)(source, function (source, key) {\n                var found, isArr, result = source, value = object[key];\n                if (source && ((isArr = isArray(source)) || isPlainObject(source))) {\n                    var stackLength = stackA.length;\n                    while (stackLength--) {\n                        if (found = stackA[stackLength] == source) {\n                            value = stackB[stackLength];\n                            break;\n                        }\n                    }\n                    if (!found) {\n                        var isShallow;\n                        if (callback) {\n                            result = callback(value, source);\n                            if (isShallow = typeof result != 'undefined') {\n                                value = result;\n                            }\n                        }\n                        if (!isShallow) {\n                            value = isArr ? isArray(value) ? value : [] : isPlainObject(value) ? value : {};\n                        }\n                        stackA.push(source);\n                        stackB.push(value);\n                        if (!isShallow) {\n                            baseMerge(value, source, callback, stackA, stackB);\n                        }\n                    }\n                } else {\n                    if (callback) {\n                        result = callback(value, source);\n                        if (typeof result == 'undefined') {\n                            result = source;\n                        }\n                    }\n                    if (typeof result != 'undefined') {\n                        value = result;\n                    }\n                }\n                object[key] = value;\n            });\n        }\n        function baseRandom(min, max) {\n            return min + floor(nativeRandom() * (max - min + 1));\n        }\n        function baseUniq(array, isSorted, callback) {\n            var index = -1, indexOf = getIndexOf(), length = array ? array.length : 0, result = [];\n            var isLarge = !isSorted && length >= largeArraySize && indexOf === baseIndexOf, seen = callback || isLarge ? getArray() : result;\n            if (isLarge) {\n                var cache = createCache(seen);\n                indexOf = cacheIndexOf;\n                seen = cache;\n            }\n            while (++index < length) {\n                var value = array[index], computed = callback ? callback(value, index, array) : value;\n                if (isSorted ? !index || seen[seen.length - 1] !== computed : indexOf(seen, computed) < 0) {\n                    if (callback || isLarge) {\n                        seen.push(computed);\n                    }\n                    result.push(value);\n                }\n            }\n            if (isLarge) {\n                releaseArray(seen.array);\n                releaseObject(seen);\n            } else if (callback) {\n                releaseArray(seen);\n            }\n            return result;\n        }\n        function createAggregator(setter) {\n            return function (collection, callback, thisArg) {\n                var result = {};\n                callback = lodash.createCallback(callback, thisArg, 3);\n                var index = -1, length = collection ? collection.length : 0;\n                if (typeof length == 'number') {\n                    while (++index < length) {\n                        var value = collection[index];\n                        setter(result, value, callback(value, index, collection), collection);\n                    }\n                } else {\n                    forOwn(collection, function (value, key, collection) {\n                        setter(result, value, callback(value, key, collection), collection);\n                    });\n                }\n                return result;\n            };\n        }\n        function createWrapper(func, bitmask, partialArgs, partialRightArgs, thisArg, arity) {\n            var isBind = bitmask & 1, isBindKey = bitmask & 2, isCurry = bitmask & 4, isCurryBound = bitmask & 8, isPartial = bitmask & 16, isPartialRight = bitmask & 32;\n            if (!isBindKey && !isFunction(func)) {\n                throw new TypeError();\n            }\n            if (isPartial && !partialArgs.length) {\n                bitmask &= ~16;\n                isPartial = partialArgs = false;\n            }\n            if (isPartialRight && !partialRightArgs.length) {\n                bitmask &= ~32;\n                isPartialRight = partialRightArgs = false;\n            }\n            var bindData = func && func.__bindData__;\n            if (bindData && bindData !== true) {\n                bindData = slice(bindData);\n                if (bindData[2]) {\n                    bindData[2] = slice(bindData[2]);\n                }\n                if (bindData[3]) {\n                    bindData[3] = slice(bindData[3]);\n                }\n                if (isBind && !(bindData[1] & 1)) {\n                    bindData[4] = thisArg;\n                }\n                if (!isBind && bindData[1] & 1) {\n                    bitmask |= 8;\n                }\n                if (isCurry && !(bindData[1] & 4)) {\n                    bindData[5] = arity;\n                }\n                if (isPartial) {\n                    push.apply(bindData[2] || (bindData[2] = []), partialArgs);\n                }\n                if (isPartialRight) {\n                    unshift.apply(bindData[3] || (bindData[3] = []), partialRightArgs);\n                }\n                bindData[1] |= bitmask;\n                return createWrapper.apply(null, bindData);\n            }\n            var creater = bitmask == 1 || bitmask === 17 ? baseBind : baseCreateWrapper;\n            return creater([\n                func,\n                bitmask,\n                partialArgs,\n                partialRightArgs,\n                thisArg,\n                arity\n            ]);\n        }\n        function escapeHtmlChar(match) {\n            return htmlEscapes[match];\n        }\n        function getIndexOf() {\n            var result = (result = lodash.indexOf) === indexOf ? baseIndexOf : result;\n            return result;\n        }\n        function isNative(value) {\n            return typeof value == 'function' && reNative.test(value);\n        }\n        var setBindData = !defineProperty ? noop : function (func, value) {\n                descriptor.value = value;\n                defineProperty(func, '__bindData__', descriptor);\n            };\n        function shimIsPlainObject(value) {\n            var ctor, result;\n            if (!(value && toString.call(value) == objectClass) || (ctor = value.constructor, isFunction(ctor) && !(ctor instanceof ctor))) {\n                return false;\n            }\n            forIn(value, function (value, key) {\n                result = key;\n            });\n            return typeof result == 'undefined' || hasOwnProperty.call(value, result);\n        }\n        function unescapeHtmlChar(match) {\n            return htmlUnescapes[match];\n        }\n        function isArguments(value) {\n            return value && typeof value == 'object' && typeof value.length == 'number' && toString.call(value) == argsClass || false;\n        }\n        var isArray = nativeIsArray || function (value) {\n                return value && typeof value == 'object' && typeof value.length == 'number' && toString.call(value) == arrayClass || false;\n            };\n        var shimKeys = function (object) {\n            var index, iterable = object, result = [];\n            if (!iterable)\n                return result;\n            if (!objectTypes[typeof object])\n                return result;\n            for (index in iterable) {\n                if (hasOwnProperty.call(iterable, index)) {\n                    result.push(index);\n                }\n            }\n            return result;\n        };\n        var keys = !nativeKeys ? shimKeys : function (object) {\n                if (!isObject(object)) {\n                    return [];\n                }\n                return nativeKeys(object);\n            };\n        var htmlEscapes = {\n                '&': '&amp;',\n                '<': '&lt;',\n                '>': '&gt;',\n                '\"': '&quot;',\n                '\\'': '&#39;'\n            };\n        var htmlUnescapes = invert(htmlEscapes);\n        var reEscapedHtml = RegExp('(' + keys(htmlUnescapes).join('|') + ')', 'g'), reUnescapedHtml = RegExp('[' + keys(htmlEscapes).join('') + ']', 'g');\n        var assign = function (object, source, guard) {\n            var index, iterable = object, result = iterable;\n            if (!iterable)\n                return result;\n            var args = arguments, argsIndex = 0, argsLength = typeof guard == 'number' ? 2 : args.length;\n            if (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n                var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n            } else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n                callback = args[--argsLength];\n            }\n            while (++argsIndex < argsLength) {\n                iterable = args[argsIndex];\n                if (iterable && objectTypes[typeof iterable]) {\n                    var ownIndex = -1, ownProps = objectTypes[typeof iterable] && keys(iterable), length = ownProps ? ownProps.length : 0;\n                    while (++ownIndex < length) {\n                        index = ownProps[ownIndex];\n                        result[index] = callback ? callback(result[index], iterable[index]) : iterable[index];\n                    }\n                }\n            }\n            return result;\n        };\n        function clone(value, isDeep, callback, thisArg) {\n            if (typeof isDeep != 'boolean' && isDeep != null) {\n                thisArg = callback;\n                callback = isDeep;\n                isDeep = false;\n            }\n            return baseClone(value, isDeep, typeof callback == 'function' && baseCreateCallback(callback, thisArg, 1));\n        }\n        function cloneDeep(value, callback, thisArg) {\n            return baseClone(value, true, typeof callback == 'function' && baseCreateCallback(callback, thisArg, 1));\n        }\n        function create(prototype, properties) {\n            var result = baseCreate(prototype);\n            return properties ? assign(result, properties) : result;\n        }\n        var defaults = function (object, source, guard) {\n            var index, iterable = object, result = iterable;\n            if (!iterable)\n                return result;\n            var args = arguments, argsIndex = 0, argsLength = typeof guard == 'number' ? 2 : args.length;\n            while (++argsIndex < argsLength) {\n                iterable = args[argsIndex];\n                if (iterable && objectTypes[typeof iterable]) {\n                    var ownIndex = -1, ownProps = objectTypes[typeof iterable] && keys(iterable), length = ownProps ? ownProps.length : 0;\n                    while (++ownIndex < length) {\n                        index = ownProps[ownIndex];\n                        if (typeof result[index] == 'undefined')\n                            result[index] = iterable[index];\n                    }\n                }\n            }\n            return result;\n        };\n        function findKey(object, callback, thisArg) {\n            var result;\n            callback = lodash.createCallback(callback, thisArg, 3);\n            forOwn(object, function (value, key, object) {\n                if (callback(value, key, object)) {\n                    result = key;\n                    return false;\n                }\n            });\n            return result;\n        }\n        function findLastKey(object, callback, thisArg) {\n            var result;\n            callback = lodash.createCallback(callback, thisArg, 3);\n            forOwnRight(object, function (value, key, object) {\n                if (callback(value, key, object)) {\n                    result = key;\n                    return false;\n                }\n            });\n            return result;\n        }\n        var forIn = function (collection, callback, thisArg) {\n            var index, iterable = collection, result = iterable;\n            if (!iterable)\n                return result;\n            if (!objectTypes[typeof iterable])\n                return result;\n            callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3);\n            for (index in iterable) {\n                if (callback(iterable[index], index, collection) === false)\n                    return result;\n            }\n            return result;\n        };\n        function forInRight(object, callback, thisArg) {\n            var pairs = [];\n            forIn(object, function (value, key) {\n                pairs.push(key, value);\n            });\n            var length = pairs.length;\n            callback = baseCreateCallback(callback, thisArg, 3);\n            while (length--) {\n                if (callback(pairs[length--], pairs[length], object) === false) {\n                    break;\n                }\n            }\n            return object;\n        }\n        var forOwn = function (collection, callback, thisArg) {\n            var index, iterable = collection, result = iterable;\n            if (!iterable)\n                return result;\n            if (!objectTypes[typeof iterable])\n                return result;\n            callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3);\n            var ownIndex = -1, ownProps = objectTypes[typeof iterable] && keys(iterable), length = ownProps ? ownProps.length : 0;\n            while (++ownIndex < length) {\n                index = ownProps[ownIndex];\n                if (callback(iterable[index], index, collection) === false)\n                    return result;\n            }\n            return result;\n        };\n        function forOwnRight(object, callback, thisArg) {\n            var props = keys(object), length = props.length;\n            callback = baseCreateCallback(callback, thisArg, 3);\n            while (length--) {\n                var key = props[length];\n                if (callback(object[key], key, object) === false) {\n                    break;\n                }\n            }\n            return object;\n        }\n        function functions(object) {\n            var result = [];\n            forIn(object, function (value, key) {\n                if (isFunction(value)) {\n                    result.push(key);\n                }\n            });\n            return result.sort();\n        }\n        function has(object, key) {\n            return object ? hasOwnProperty.call(object, key) : false;\n        }\n        function invert(object) {\n            var index = -1, props = keys(object), length = props.length, result = {};\n            while (++index < length) {\n                var key = props[index];\n                result[object[key]] = key;\n            }\n            return result;\n        }\n        function isBoolean(value) {\n            return value === true || value === false || value && typeof value == 'object' && toString.call(value) == boolClass || false;\n        }\n        function isDate(value) {\n            return value && typeof value == 'object' && toString.call(value) == dateClass || false;\n        }\n        function isElement(value) {\n            return value && value.nodeType === 1 || false;\n        }\n        function isEmpty(value) {\n            var result = true;\n            if (!value) {\n                return result;\n            }\n            var className = toString.call(value), length = value.length;\n            if (className == arrayClass || className == stringClass || className == argsClass || className == objectClass && typeof length == 'number' && isFunction(value.splice)) {\n                return !length;\n            }\n            forOwn(value, function () {\n                return result = false;\n            });\n            return result;\n        }\n        function isEqual(a, b, callback, thisArg) {\n            return baseIsEqual(a, b, typeof callback == 'function' && baseCreateCallback(callback, thisArg, 2));\n        }\n        function isFinite(value) {\n            return nativeIsFinite(value) && !nativeIsNaN(parseFloat(value));\n        }\n        function isFunction(value) {\n            return typeof value == 'function';\n        }\n        function isObject(value) {\n            return !!(value && objectTypes[typeof value]);\n        }\n        function isNaN(value) {\n            return isNumber(value) && value != +value;\n        }\n        function isNull(value) {\n            return value === null;\n        }\n        function isNumber(value) {\n            return typeof value == 'number' || value && typeof value == 'object' && toString.call(value) == numberClass || false;\n        }\n        var isPlainObject = !getPrototypeOf ? shimIsPlainObject : function (value) {\n                if (!(value && toString.call(value) == objectClass)) {\n                    return false;\n                }\n                var valueOf = value.valueOf, objProto = isNative(valueOf) && (objProto = getPrototypeOf(valueOf)) && getPrototypeOf(objProto);\n                return objProto ? value == objProto || getPrototypeOf(value) == objProto : shimIsPlainObject(value);\n            };\n        function isRegExp(value) {\n            return value && typeof value == 'object' && toString.call(value) == regexpClass || false;\n        }\n        function isString(value) {\n            return typeof value == 'string' || value && typeof value == 'object' && toString.call(value) == stringClass || false;\n        }\n        function isUndefined(value) {\n            return typeof value == 'undefined';\n        }\n        function mapValues(object, callback, thisArg) {\n            var result = {};\n            callback = lodash.createCallback(callback, thisArg, 3);\n            forOwn(object, function (value, key, object) {\n                result[key] = callback(value, key, object);\n            });\n            return result;\n        }\n        function merge(object) {\n            var args = arguments, length = 2;\n            if (!isObject(object)) {\n                return object;\n            }\n            if (typeof args[2] != 'number') {\n                length = args.length;\n            }\n            if (length > 3 && typeof args[length - 2] == 'function') {\n                var callback = baseCreateCallback(args[--length - 1], args[length--], 2);\n            } else if (length > 2 && typeof args[length - 1] == 'function') {\n                callback = args[--length];\n            }\n            var sources = slice(arguments, 1, length), index = -1, stackA = getArray(), stackB = getArray();\n            while (++index < length) {\n                baseMerge(object, sources[index], callback, stackA, stackB);\n            }\n            releaseArray(stackA);\n            releaseArray(stackB);\n            return object;\n        }\n        function omit(object, callback, thisArg) {\n            var result = {};\n            if (typeof callback != 'function') {\n                var props = [];\n                forIn(object, function (value, key) {\n                    props.push(key);\n                });\n                props = baseDifference(props, baseFlatten(arguments, true, false, 1));\n                var index = -1, length = props.length;\n                while (++index < length) {\n                    var key = props[index];\n                    result[key] = object[key];\n                }\n            } else {\n                callback = lodash.createCallback(callback, thisArg, 3);\n                forIn(object, function (value, key, object) {\n                    if (!callback(value, key, object)) {\n                        result[key] = value;\n                    }\n                });\n            }\n            return result;\n        }\n        function pairs(object) {\n            var index = -1, props = keys(object), length = props.length, result = Array(length);\n            while (++index < length) {\n                var key = props[index];\n                result[index] = [\n                    key,\n                    object[key]\n                ];\n            }\n            return result;\n        }\n        function pick(object, callback, thisArg) {\n            var result = {};\n            if (typeof callback != 'function') {\n                var index = -1, props = baseFlatten(arguments, true, false, 1), length = isObject(object) ? props.length : 0;\n                while (++index < length) {\n                    var key = props[index];\n                    if (key in object) {\n                        result[key] = object[key];\n                    }\n                }\n            } else {\n                callback = lodash.createCallback(callback, thisArg, 3);\n                forIn(object, function (value, key, object) {\n                    if (callback(value, key, object)) {\n                        result[key] = value;\n                    }\n                });\n            }\n            return result;\n        }\n        function transform(object, callback, accumulator, thisArg) {\n            var isArr = isArray(object);\n            if (accumulator == null) {\n                if (isArr) {\n                    accumulator = [];\n                } else {\n                    var ctor = object && object.constructor, proto = ctor && ctor.prototype;\n                    accumulator = baseCreate(proto);\n                }\n            }\n            if (callback) {\n                callback = lodash.createCallback(callback, thisArg, 4);\n                (isArr ? forEach : forOwn)(object, function (value, index, object) {\n                    return callback(accumulator, value, index, object);\n                });\n            }\n            return accumulator;\n        }\n        function values(object) {\n            var index = -1, props = keys(object), length = props.length, result = Array(length);\n            while (++index < length) {\n                result[index] = object[props[index]];\n            }\n            return result;\n        }\n        function at(collection) {\n            var args = arguments, index = -1, props = baseFlatten(args, true, false, 1), length = args[2] && args[2][args[1]] === collection ? 1 : props.length, result = Array(length);\n            while (++index < length) {\n                result[index] = collection[props[index]];\n            }\n            return result;\n        }\n        function contains(collection, target, fromIndex) {\n            var index = -1, indexOf = getIndexOf(), length = collection ? collection.length : 0, result = false;\n            fromIndex = (fromIndex < 0 ? nativeMax(0, length + fromIndex) : fromIndex) || 0;\n            if (isArray(collection)) {\n                result = indexOf(collection, target, fromIndex) > -1;\n            } else if (typeof length == 'number') {\n                result = (isString(collection) ? collection.indexOf(target, fromIndex) : indexOf(collection, target, fromIndex)) > -1;\n            } else {\n                forOwn(collection, function (value) {\n                    if (++index >= fromIndex) {\n                        return !(result = value === target);\n                    }\n                });\n            }\n            return result;\n        }\n        var countBy = createAggregator(function (result, value, key) {\n                hasOwnProperty.call(result, key) ? result[key]++ : result[key] = 1;\n            });\n        function every(collection, callback, thisArg) {\n            var result = true;\n            callback = lodash.createCallback(callback, thisArg, 3);\n            var index = -1, length = collection ? collection.length : 0;\n            if (typeof length == 'number') {\n                while (++index < length) {\n                    if (!(result = !!callback(collection[index], index, collection))) {\n                        break;\n                    }\n                }\n            } else {\n                forOwn(collection, function (value, index, collection) {\n                    return result = !!callback(value, index, collection);\n                });\n            }\n            return result;\n        }\n        function filter(collection, callback, thisArg) {\n            var result = [];\n            callback = lodash.createCallback(callback, thisArg, 3);\n            var index = -1, length = collection ? collection.length : 0;\n            if (typeof length == 'number') {\n                while (++index < length) {\n                    var value = collection[index];\n                    if (callback(value, index, collection)) {\n                        result.push(value);\n                    }\n                }\n            } else {\n                forOwn(collection, function (value, index, collection) {\n                    if (callback(value, index, collection)) {\n                        result.push(value);\n                    }\n                });\n            }\n            return result;\n        }\n        function find(collection, callback, thisArg) {\n            callback = lodash.createCallback(callback, thisArg, 3);\n            var index = -1, length = collection ? collection.length : 0;\n            if (typeof length == 'number') {\n                while (++index < length) {\n                    var value = collection[index];\n                    if (callback(value, index, collection)) {\n                        return value;\n                    }\n                }\n            } else {\n                var result;\n                forOwn(collection, function (value, index, collection) {\n                    if (callback(value, index, collection)) {\n                        result = value;\n                        return false;\n                    }\n                });\n                return result;\n            }\n        }\n        function findLast(collection, callback, thisArg) {\n            var result;\n            callback = lodash.createCallback(callback, thisArg, 3);\n            forEachRight(collection, function (value, index, collection) {\n                if (callback(value, index, collection)) {\n                    result = value;\n                    return false;\n                }\n            });\n            return result;\n        }\n        function forEach(collection, callback, thisArg) {\n            var index = -1, length = collection ? collection.length : 0;\n            callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3);\n            if (typeof length == 'number') {\n                while (++index < length) {\n                    if (callback(collection[index], index, collection) === false) {\n                        break;\n                    }\n                }\n            } else {\n                forOwn(collection, callback);\n            }\n            return collection;\n        }\n        function forEachRight(collection, callback, thisArg) {\n            var length = collection ? collection.length : 0;\n            callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3);\n            if (typeof length == 'number') {\n                while (length--) {\n                    if (callback(collection[length], length, collection) === false) {\n                        break;\n                    }\n                }\n            } else {\n                var props = keys(collection);\n                length = props.length;\n                forOwn(collection, function (value, key, collection) {\n                    key = props ? props[--length] : --length;\n                    return callback(collection[key], key, collection);\n                });\n            }\n            return collection;\n        }\n        var groupBy = createAggregator(function (result, value, key) {\n                (hasOwnProperty.call(result, key) ? result[key] : result[key] = []).push(value);\n            });\n        var indexBy = createAggregator(function (result, value, key) {\n                result[key] = value;\n            });\n        function invoke(collection, methodName) {\n            var args = slice(arguments, 2), index = -1, isFunc = typeof methodName == 'function', length = collection ? collection.length : 0, result = Array(typeof length == 'number' ? length : 0);\n            forEach(collection, function (value) {\n                result[++index] = (isFunc ? methodName : value[methodName]).apply(value, args);\n            });\n            return result;\n        }\n        function map(collection, callback, thisArg) {\n            var index = -1, length = collection ? collection.length : 0;\n            callback = lodash.createCallback(callback, thisArg, 3);\n            if (typeof length == 'number') {\n                var result = Array(length);\n                while (++index < length) {\n                    result[index] = callback(collection[index], index, collection);\n                }\n            } else {\n                result = [];\n                forOwn(collection, function (value, key, collection) {\n                    result[++index] = callback(value, key, collection);\n                });\n            }\n            return result;\n        }\n        function max(collection, callback, thisArg) {\n            var computed = -Infinity, result = computed;\n            if (typeof callback != 'function' && thisArg && thisArg[callback] === collection) {\n                callback = null;\n            }\n            if (callback == null && isArray(collection)) {\n                var index = -1, length = collection.length;\n                while (++index < length) {\n                    var value = collection[index];\n                    if (value > result) {\n                        result = value;\n                    }\n                }\n            } else {\n                callback = callback == null && isString(collection) ? charAtCallback : lodash.createCallback(callback, thisArg, 3);\n                forEach(collection, function (value, index, collection) {\n                    var current = callback(value, index, collection);\n                    if (current > computed) {\n                        computed = current;\n                        result = value;\n                    }\n                });\n            }\n            return result;\n        }\n        function min(collection, callback, thisArg) {\n            var computed = Infinity, result = computed;\n            if (typeof callback != 'function' && thisArg && thisArg[callback] === collection) {\n                callback = null;\n            }\n            if (callback == null && isArray(collection)) {\n                var index = -1, length = collection.length;\n                while (++index < length) {\n                    var value = collection[index];\n                    if (value < result) {\n                        result = value;\n                    }\n                }\n            } else {\n                callback = callback == null && isString(collection) ? charAtCallback : lodash.createCallback(callback, thisArg, 3);\n                forEach(collection, function (value, index, collection) {\n                    var current = callback(value, index, collection);\n                    if (current < computed) {\n                        computed = current;\n                        result = value;\n                    }\n                });\n            }\n            return result;\n        }\n        var pluck = map;\n        function reduce(collection, callback, accumulator, thisArg) {\n            if (!collection)\n                return accumulator;\n            var noaccum = arguments.length < 3;\n            callback = lodash.createCallback(callback, thisArg, 4);\n            var index = -1, length = collection.length;\n            if (typeof length == 'number') {\n                if (noaccum) {\n                    accumulator = collection[++index];\n                }\n                while (++index < length) {\n                    accumulator = callback(accumulator, collection[index], index, collection);\n                }\n            } else {\n                forOwn(collection, function (value, index, collection) {\n                    accumulator = noaccum ? (noaccum = false, value) : callback(accumulator, value, index, collection);\n                });\n            }\n            return accumulator;\n        }\n        function reduceRight(collection, callback, accumulator, thisArg) {\n            var noaccum = arguments.length < 3;\n            callback = lodash.createCallback(callback, thisArg, 4);\n            forEachRight(collection, function (value, index, collection) {\n                accumulator = noaccum ? (noaccum = false, value) : callback(accumulator, value, index, collection);\n            });\n            return accumulator;\n        }\n        function reject(collection, callback, thisArg) {\n            callback = lodash.createCallback(callback, thisArg, 3);\n            return filter(collection, function (value, index, collection) {\n                return !callback(value, index, collection);\n            });\n        }\n        function sample(collection, n, guard) {\n            if (collection && typeof collection.length != 'number') {\n                collection = values(collection);\n            }\n            if (n == null || guard) {\n                return collection ? collection[baseRandom(0, collection.length - 1)] : undefined;\n            }\n            var result = shuffle(collection);\n            result.length = nativeMin(nativeMax(0, n), result.length);\n            return result;\n        }\n        function shuffle(collection) {\n            var index = -1, length = collection ? collection.length : 0, result = Array(typeof length == 'number' ? length : 0);\n            forEach(collection, function (value) {\n                var rand = baseRandom(0, ++index);\n                result[index] = result[rand];\n                result[rand] = value;\n            });\n            return result;\n        }\n        function size(collection) {\n            var length = collection ? collection.length : 0;\n            return typeof length == 'number' ? length : keys(collection).length;\n        }\n        function some(collection, callback, thisArg) {\n            var result;\n            callback = lodash.createCallback(callback, thisArg, 3);\n            var index = -1, length = collection ? collection.length : 0;\n            if (typeof length == 'number') {\n                while (++index < length) {\n                    if (result = callback(collection[index], index, collection)) {\n                        break;\n                    }\n                }\n            } else {\n                forOwn(collection, function (value, index, collection) {\n                    return !(result = callback(value, index, collection));\n                });\n            }\n            return !!result;\n        }\n        function sortBy(collection, callback, thisArg) {\n            var index = -1, isArr = isArray(callback), length = collection ? collection.length : 0, result = Array(typeof length == 'number' ? length : 0);\n            if (!isArr) {\n                callback = lodash.createCallback(callback, thisArg, 3);\n            }\n            forEach(collection, function (value, key, collection) {\n                var object = result[++index] = getObject();\n                if (isArr) {\n                    object.criteria = map(callback, function (key) {\n                        return value[key];\n                    });\n                } else {\n                    (object.criteria = getArray())[0] = callback(value, key, collection);\n                }\n                object.index = index;\n                object.value = value;\n            });\n            length = result.length;\n            result.sort(compareAscending);\n            while (length--) {\n                var object = result[length];\n                result[length] = object.value;\n                if (!isArr) {\n                    releaseArray(object.criteria);\n                }\n                releaseObject(object);\n            }\n            return result;\n        }\n        function toArray(collection) {\n            if (collection && typeof collection.length == 'number') {\n                return slice(collection);\n            }\n            return values(collection);\n        }\n        var where = filter;\n        function compact(array) {\n            var index = -1, length = array ? array.length : 0, result = [];\n            while (++index < length) {\n                var value = array[index];\n                if (value) {\n                    result.push(value);\n                }\n            }\n            return result;\n        }\n        function difference(array) {\n            return baseDifference(array, baseFlatten(arguments, true, true, 1));\n        }\n        function findIndex(array, callback, thisArg) {\n            var index = -1, length = array ? array.length : 0;\n            callback = lodash.createCallback(callback, thisArg, 3);\n            while (++index < length) {\n                if (callback(array[index], index, array)) {\n                    return index;\n                }\n            }\n            return -1;\n        }\n        function findLastIndex(array, callback, thisArg) {\n            var length = array ? array.length : 0;\n            callback = lodash.createCallback(callback, thisArg, 3);\n            while (length--) {\n                if (callback(array[length], length, array)) {\n                    return length;\n                }\n            }\n            return -1;\n        }\n        function first(array, callback, thisArg) {\n            var n = 0, length = array ? array.length : 0;\n            if (typeof callback != 'number' && callback != null) {\n                var index = -1;\n                callback = lodash.createCallback(callback, thisArg, 3);\n                while (++index < length && callback(array[index], index, array)) {\n                    n++;\n                }\n            } else {\n                n = callback;\n                if (n == null || thisArg) {\n                    return array ? array[0] : undefined;\n                }\n            }\n            return slice(array, 0, nativeMin(nativeMax(0, n), length));\n        }\n        function flatten(array, isShallow, callback, thisArg) {\n            if (typeof isShallow != 'boolean' && isShallow != null) {\n                thisArg = callback;\n                callback = typeof isShallow != 'function' && thisArg && thisArg[isShallow] === array ? null : isShallow;\n                isShallow = false;\n            }\n            if (callback != null) {\n                array = map(array, callback, thisArg);\n            }\n            return baseFlatten(array, isShallow);\n        }\n        function indexOf(array, value, fromIndex) {\n            if (typeof fromIndex == 'number') {\n                var length = array ? array.length : 0;\n                fromIndex = fromIndex < 0 ? nativeMax(0, length + fromIndex) : fromIndex || 0;\n            } else if (fromIndex) {\n                var index = sortedIndex(array, value);\n                return array[index] === value ? index : -1;\n            }\n            return baseIndexOf(array, value, fromIndex);\n        }\n        function initial(array, callback, thisArg) {\n            var n = 0, length = array ? array.length : 0;\n            if (typeof callback != 'number' && callback != null) {\n                var index = length;\n                callback = lodash.createCallback(callback, thisArg, 3);\n                while (index-- && callback(array[index], index, array)) {\n                    n++;\n                }\n            } else {\n                n = callback == null || thisArg ? 1 : callback || n;\n            }\n            return slice(array, 0, nativeMin(nativeMax(0, length - n), length));\n        }\n        function intersection() {\n            var args = [], argsIndex = -1, argsLength = arguments.length, caches = getArray(), indexOf = getIndexOf(), trustIndexOf = indexOf === baseIndexOf, seen = getArray();\n            while (++argsIndex < argsLength) {\n                var value = arguments[argsIndex];\n                if (isArray(value) || isArguments(value)) {\n                    args.push(value);\n                    caches.push(trustIndexOf && value.length >= largeArraySize && createCache(argsIndex ? args[argsIndex] : seen));\n                }\n            }\n            var array = args[0], index = -1, length = array ? array.length : 0, result = [];\n            outer:\n                while (++index < length) {\n                    var cache = caches[0];\n                    value = array[index];\n                    if ((cache ? cacheIndexOf(cache, value) : indexOf(seen, value)) < 0) {\n                        argsIndex = argsLength;\n                        (cache || seen).push(value);\n                        while (--argsIndex) {\n                            cache = caches[argsIndex];\n                            if ((cache ? cacheIndexOf(cache, value) : indexOf(args[argsIndex], value)) < 0) {\n                                continue outer;\n                            }\n                        }\n                        result.push(value);\n                    }\n                }\n            while (argsLength--) {\n                cache = caches[argsLength];\n                if (cache) {\n                    releaseObject(cache);\n                }\n            }\n            releaseArray(caches);\n            releaseArray(seen);\n            return result;\n        }\n        function last(array, callback, thisArg) {\n            var n = 0, length = array ? array.length : 0;\n            if (typeof callback != 'number' && callback != null) {\n                var index = length;\n                callback = lodash.createCallback(callback, thisArg, 3);\n                while (index-- && callback(array[index], index, array)) {\n                    n++;\n                }\n            } else {\n                n = callback;\n                if (n == null || thisArg) {\n                    return array ? array[length - 1] : undefined;\n                }\n            }\n            return slice(array, nativeMax(0, length - n));\n        }\n        function lastIndexOf(array, value, fromIndex) {\n            var index = array ? array.length : 0;\n            if (typeof fromIndex == 'number') {\n                index = (fromIndex < 0 ? nativeMax(0, index + fromIndex) : nativeMin(fromIndex, index - 1)) + 1;\n            }\n            while (index--) {\n                if (array[index] === value) {\n                    return index;\n                }\n            }\n            return -1;\n        }\n        function pull(array) {\n            var args = arguments, argsIndex = 0, argsLength = args.length, length = array ? array.length : 0;\n            while (++argsIndex < argsLength) {\n                var index = -1, value = args[argsIndex];\n                while (++index < length) {\n                    if (array[index] === value) {\n                        splice.call(array, index--, 1);\n                        length--;\n                    }\n                }\n            }\n            return array;\n        }\n        function range(start, end, step) {\n            start = +start || 0;\n            step = typeof step == 'number' ? step : +step || 1;\n            if (end == null) {\n                end = start;\n                start = 0;\n            }\n            var index = -1, length = nativeMax(0, ceil((end - start) / (step || 1))), result = Array(length);\n            while (++index < length) {\n                result[index] = start;\n                start += step;\n            }\n            return result;\n        }\n        function remove(array, callback, thisArg) {\n            var index = -1, length = array ? array.length : 0, result = [];\n            callback = lodash.createCallback(callback, thisArg, 3);\n            while (++index < length) {\n                var value = array[index];\n                if (callback(value, index, array)) {\n                    result.push(value);\n                    splice.call(array, index--, 1);\n                    length--;\n                }\n            }\n            return result;\n        }\n        function rest(array, callback, thisArg) {\n            if (typeof callback != 'number' && callback != null) {\n                var n = 0, index = -1, length = array ? array.length : 0;\n                callback = lodash.createCallback(callback, thisArg, 3);\n                while (++index < length && callback(array[index], index, array)) {\n                    n++;\n                }\n            } else {\n                n = callback == null || thisArg ? 1 : nativeMax(0, callback);\n            }\n            return slice(array, n);\n        }\n        function sortedIndex(array, value, callback, thisArg) {\n            var low = 0, high = array ? array.length : low;\n            callback = callback ? lodash.createCallback(callback, thisArg, 1) : identity;\n            value = callback(value);\n            while (low < high) {\n                var mid = low + high >>> 1;\n                callback(array[mid]) < value ? low = mid + 1 : high = mid;\n            }\n            return low;\n        }\n        function union() {\n            return baseUniq(baseFlatten(arguments, true, true));\n        }\n        function uniq(array, isSorted, callback, thisArg) {\n            if (typeof isSorted != 'boolean' && isSorted != null) {\n                thisArg = callback;\n                callback = typeof isSorted != 'function' && thisArg && thisArg[isSorted] === array ? null : isSorted;\n                isSorted = false;\n            }\n            if (callback != null) {\n                callback = lodash.createCallback(callback, thisArg, 3);\n            }\n            return baseUniq(array, isSorted, callback);\n        }\n        function without(array) {\n            return baseDifference(array, slice(arguments, 1));\n        }\n        function xor() {\n            var index = -1, length = arguments.length;\n            while (++index < length) {\n                var array = arguments[index];\n                if (isArray(array) || isArguments(array)) {\n                    var result = result ? baseUniq(baseDifference(result, array).concat(baseDifference(array, result))) : array;\n                }\n            }\n            return result || [];\n        }\n        function zip() {\n            var array = arguments.length > 1 ? arguments : arguments[0], index = -1, length = array ? max(pluck(array, 'length')) : 0, result = Array(length < 0 ? 0 : length);\n            while (++index < length) {\n                result[index] = pluck(array, index);\n            }\n            return result;\n        }\n        function zipObject(keys, values) {\n            var index = -1, length = keys ? keys.length : 0, result = {};\n            if (!values && length && !isArray(keys[0])) {\n                values = [];\n            }\n            while (++index < length) {\n                var key = keys[index];\n                if (values) {\n                    result[key] = values[index];\n                } else if (key) {\n                    result[key[0]] = key[1];\n                }\n            }\n            return result;\n        }\n        function after(n, func) {\n            if (!isFunction(func)) {\n                throw new TypeError();\n            }\n            return function () {\n                if (--n < 1) {\n                    return func.apply(this, arguments);\n                }\n            };\n        }\n        function bind(func, thisArg) {\n            return arguments.length > 2 ? createWrapper(func, 17, slice(arguments, 2), null, thisArg) : createWrapper(func, 1, null, null, thisArg);\n        }\n        function bindAll(object) {\n            var funcs = arguments.length > 1 ? baseFlatten(arguments, true, false, 1) : functions(object), index = -1, length = funcs.length;\n            while (++index < length) {\n                var key = funcs[index];\n                object[key] = createWrapper(object[key], 1, null, null, object);\n            }\n            return object;\n        }\n        function bindKey(object, key) {\n            return arguments.length > 2 ? createWrapper(key, 19, slice(arguments, 2), null, object) : createWrapper(key, 3, null, null, object);\n        }\n        function compose() {\n            var funcs = arguments, length = funcs.length;\n            while (length--) {\n                if (!isFunction(funcs[length])) {\n                    throw new TypeError();\n                }\n            }\n            return function () {\n                var args = arguments, length = funcs.length;\n                while (length--) {\n                    args = [funcs[length].apply(this, args)];\n                }\n                return args[0];\n            };\n        }\n        function curry(func, arity) {\n            arity = typeof arity == 'number' ? arity : +arity || func.length;\n            return createWrapper(func, 4, null, null, null, arity);\n        }\n        function debounce(func, wait, options) {\n            var args, maxTimeoutId, result, stamp, thisArg, timeoutId, trailingCall, lastCalled = 0, maxWait = false, trailing = true;\n            if (!isFunction(func)) {\n                throw new TypeError();\n            }\n            wait = nativeMax(0, wait) || 0;\n            if (options === true) {\n                var leading = true;\n                trailing = false;\n            } else if (isObject(options)) {\n                leading = options.leading;\n                maxWait = 'maxWait' in options && (nativeMax(wait, options.maxWait) || 0);\n                trailing = 'trailing' in options ? options.trailing : trailing;\n            }\n            var delayed = function () {\n                var remaining = wait - (now() - stamp);\n                if (remaining <= 0) {\n                    if (maxTimeoutId) {\n                        clearTimeout(maxTimeoutId);\n                    }\n                    var isCalled = trailingCall;\n                    maxTimeoutId = timeoutId = trailingCall = undefined;\n                    if (isCalled) {\n                        lastCalled = now();\n                        result = func.apply(thisArg, args);\n                        if (!timeoutId && !maxTimeoutId) {\n                            args = thisArg = null;\n                        }\n                    }\n                } else {\n                    timeoutId = setTimeout(delayed, remaining);\n                }\n            };\n            var maxDelayed = function () {\n                if (timeoutId) {\n                    clearTimeout(timeoutId);\n                }\n                maxTimeoutId = timeoutId = trailingCall = undefined;\n                if (trailing || maxWait !== wait) {\n                    lastCalled = now();\n                    result = func.apply(thisArg, args);\n                    if (!timeoutId && !maxTimeoutId) {\n                        args = thisArg = null;\n                    }\n                }\n            };\n            return function () {\n                args = arguments;\n                stamp = now();\n                thisArg = this;\n                trailingCall = trailing && (timeoutId || !leading);\n                if (maxWait === false) {\n                    var leadingCall = leading && !timeoutId;\n                } else {\n                    if (!maxTimeoutId && !leading) {\n                        lastCalled = stamp;\n                    }\n                    var remaining = maxWait - (stamp - lastCalled), isCalled = remaining <= 0;\n                    if (isCalled) {\n                        if (maxTimeoutId) {\n                            maxTimeoutId = clearTimeout(maxTimeoutId);\n                        }\n                        lastCalled = stamp;\n                        result = func.apply(thisArg, args);\n                    } else if (!maxTimeoutId) {\n                        maxTimeoutId = setTimeout(maxDelayed, remaining);\n                    }\n                }\n                if (isCalled && timeoutId) {\n                    timeoutId = clearTimeout(timeoutId);\n                } else if (!timeoutId && wait !== maxWait) {\n                    timeoutId = setTimeout(delayed, wait);\n                }\n                if (leadingCall) {\n                    isCalled = true;\n                    result = func.apply(thisArg, args);\n                }\n                if (isCalled && !timeoutId && !maxTimeoutId) {\n                    args = thisArg = null;\n                }\n                return result;\n            };\n        }\n        function defer(func) {\n            if (!isFunction(func)) {\n                throw new TypeError();\n            }\n            var args = slice(arguments, 1);\n            return setTimeout(function () {\n                func.apply(undefined, args);\n            }, 1);\n        }\n        function delay(func, wait) {\n            if (!isFunction(func)) {\n                throw new TypeError();\n            }\n            var args = slice(arguments, 2);\n            return setTimeout(function () {\n                func.apply(undefined, args);\n            }, wait);\n        }\n        function memoize(func, resolver) {\n            if (!isFunction(func)) {\n                throw new TypeError();\n            }\n            var memoized = function () {\n                var cache = memoized.cache, key = resolver ? resolver.apply(this, arguments) : keyPrefix + arguments[0];\n                return hasOwnProperty.call(cache, key) ? cache[key] : cache[key] = func.apply(this, arguments);\n            };\n            memoized.cache = {};\n            return memoized;\n        }\n        function once(func) {\n            var ran, result;\n            if (!isFunction(func)) {\n                throw new TypeError();\n            }\n            return function () {\n                if (ran) {\n                    return result;\n                }\n                ran = true;\n                result = func.apply(this, arguments);\n                func = null;\n                return result;\n            };\n        }\n        function partial(func) {\n            return createWrapper(func, 16, slice(arguments, 1));\n        }\n        function partialRight(func) {\n            return createWrapper(func, 32, null, slice(arguments, 1));\n        }\n        function throttle(func, wait, options) {\n            var leading = true, trailing = true;\n            if (!isFunction(func)) {\n                throw new TypeError();\n            }\n            if (options === false) {\n                leading = false;\n            } else if (isObject(options)) {\n                leading = 'leading' in options ? options.leading : leading;\n                trailing = 'trailing' in options ? options.trailing : trailing;\n            }\n            debounceOptions.leading = leading;\n            debounceOptions.maxWait = wait;\n            debounceOptions.trailing = trailing;\n            return debounce(func, wait, debounceOptions);\n        }\n        function wrap(value, wrapper) {\n            return createWrapper(wrapper, 16, [value]);\n        }\n        function constant(value) {\n            return function () {\n                return value;\n            };\n        }\n        function createCallback(func, thisArg, argCount) {\n            var type = typeof func;\n            if (func == null || type == 'function') {\n                return baseCreateCallback(func, thisArg, argCount);\n            }\n            if (type != 'object') {\n                return property(func);\n            }\n            var props = keys(func), key = props[0], a = func[key];\n            if (props.length == 1 && a === a && !isObject(a)) {\n                return function (object) {\n                    var b = object[key];\n                    return a === b && (a !== 0 || 1 / a == 1 / b);\n                };\n            }\n            return function (object) {\n                var length = props.length, result = false;\n                while (length--) {\n                    if (!(result = baseIsEqual(object[props[length]], func[props[length]], null, true))) {\n                        break;\n                    }\n                }\n                return result;\n            };\n        }\n        function escape(string) {\n            return string == null ? '' : String(string).replace(reUnescapedHtml, escapeHtmlChar);\n        }\n        function identity(value) {\n            return value;\n        }\n        function mixin(object, source, options) {\n            var chain = true, methodNames = source && functions(source);\n            if (!source || !options && !methodNames.length) {\n                if (options == null) {\n                    options = source;\n                }\n                ctor = lodashWrapper;\n                source = object;\n                object = lodash;\n                methodNames = functions(source);\n            }\n            if (options === false) {\n                chain = false;\n            } else if (isObject(options) && 'chain' in options) {\n                chain = options.chain;\n            }\n            var ctor = object, isFunc = isFunction(ctor);\n            forEach(methodNames, function (methodName) {\n                var func = object[methodName] = source[methodName];\n                if (isFunc) {\n                    ctor.prototype[methodName] = function () {\n                        var chainAll = this.__chain__, value = this.__wrapped__, args = [value];\n                        push.apply(args, arguments);\n                        var result = func.apply(object, args);\n                        if (chain || chainAll) {\n                            if (value === result && isObject(result)) {\n                                return this;\n                            }\n                            result = new ctor(result);\n                            result.__chain__ = chainAll;\n                        }\n                        return result;\n                    };\n                }\n            });\n        }\n        function noConflict() {\n            context._ = oldDash;\n            return this;\n        }\n        function noop() {\n        }\n        var now = isNative(now = Date.now) && now || function () {\n                return new Date().getTime();\n            };\n        var parseInt = nativeParseInt(whitespace + '08') == 8 ? nativeParseInt : function (value, radix) {\n                return nativeParseInt(isString(value) ? value.replace(reLeadingSpacesAndZeros, '') : value, radix || 0);\n            };\n        function property(key) {\n            return function (object) {\n                return object[key];\n            };\n        }\n        function random(min, max, floating) {\n            var noMin = min == null, noMax = max == null;\n            if (floating == null) {\n                if (typeof min == 'boolean' && noMax) {\n                    floating = min;\n                    min = 1;\n                } else if (!noMax && typeof max == 'boolean') {\n                    floating = max;\n                    noMax = true;\n                }\n            }\n            if (noMin && noMax) {\n                max = 1;\n            }\n            min = +min || 0;\n            if (noMax) {\n                max = min;\n                min = 0;\n            } else {\n                max = +max || 0;\n            }\n            if (floating || min % 1 || max % 1) {\n                var rand = nativeRandom();\n                return nativeMin(min + rand * (max - min + parseFloat('1e-' + ((rand + '').length - 1))), max);\n            }\n            return baseRandom(min, max);\n        }\n        function result(object, key) {\n            if (object) {\n                var value = object[key];\n                return isFunction(value) ? object[key]() : value;\n            }\n        }\n        function template(text, data, options) {\n            var settings = lodash.templateSettings;\n            text = String(text || '');\n            options = defaults({}, options, settings);\n            var imports = defaults({}, options.imports, settings.imports), importsKeys = keys(imports), importsValues = values(imports);\n            var isEvaluating, index = 0, interpolate = options.interpolate || reNoMatch, source = '__p += \\'';\n            var reDelimiters = RegExp((options.escape || reNoMatch).source + '|' + interpolate.source + '|' + (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + '|' + (options.evaluate || reNoMatch).source + '|$', 'g');\n            text.replace(reDelimiters, function (match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {\n                interpolateValue || (interpolateValue = esTemplateValue);\n                source += text.slice(index, offset).replace(reUnescapedString, escapeStringChar);\n                if (escapeValue) {\n                    source += '\\' +\\n__e(' + escapeValue + ') +\\n\\'';\n                }\n                if (evaluateValue) {\n                    isEvaluating = true;\n                    source += '\\';\\n' + evaluateValue + ';\\n__p += \\'';\n                }\n                if (interpolateValue) {\n                    source += '\\' +\\n((__t = (' + interpolateValue + ')) == null ? \\'\\' : __t) +\\n\\'';\n                }\n                index = offset + match.length;\n                return match;\n            });\n            source += '\\';\\n';\n            var variable = options.variable, hasVariable = variable;\n            if (!hasVariable) {\n                variable = 'obj';\n                source = 'with (' + variable + ') {\\n' + source + '\\n}\\n';\n            }\n            source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source).replace(reEmptyStringMiddle, '$1').replace(reEmptyStringTrailing, '$1;');\n            source = 'function(' + variable + ') {\\n' + (hasVariable ? '' : variable + ' || (' + variable + ' = {});\\n') + 'var __t, __p = \\'\\', __e = _.escape' + (isEvaluating ? ', __j = Array.prototype.join;\\n' + 'function print() { __p += __j.call(arguments, \\'\\') }\\n' : ';\\n') + source + 'return __p\\n}';\n            var sourceURL = '\\n/*\\n//# sourceURL=' + (options.sourceURL || '/lodash/template/source[' + templateCounter++ + ']') + '\\n*/';\n            try {\n                var result = Function(importsKeys, 'return ' + source + sourceURL).apply(undefined, importsValues);\n            } catch (e) {\n                e.source = source;\n                throw e;\n            }\n            if (data) {\n                return result(data);\n            }\n            result.source = source;\n            return result;\n        }\n        function times(n, callback, thisArg) {\n            n = (n = +n) > -1 ? n : 0;\n            var index = -1, result = Array(n);\n            callback = baseCreateCallback(callback, thisArg, 1);\n            while (++index < n) {\n                result[index] = callback(index);\n            }\n            return result;\n        }\n        function unescape(string) {\n            return string == null ? '' : String(string).replace(reEscapedHtml, unescapeHtmlChar);\n        }\n        function uniqueId(prefix) {\n            var id = ++idCounter;\n            return String(prefix == null ? '' : prefix) + id;\n        }\n        function chain(value) {\n            value = new lodashWrapper(value);\n            value.__chain__ = true;\n            return value;\n        }\n        function tap(value, interceptor) {\n            interceptor(value);\n            return value;\n        }\n        function wrapperChain() {\n            this.__chain__ = true;\n            return this;\n        }\n        function wrapperToString() {\n            return String(this.__wrapped__);\n        }\n        function wrapperValueOf() {\n            return this.__wrapped__;\n        }\n        lodash.after = after;\n        lodash.assign = assign;\n        lodash.at = at;\n        lodash.bind = bind;\n        lodash.bindAll = bindAll;\n        lodash.bindKey = bindKey;\n        lodash.chain = chain;\n        lodash.compact = compact;\n        lodash.compose = compose;\n        lodash.constant = constant;\n        lodash.countBy = countBy;\n        lodash.create = create;\n        lodash.createCallback = createCallback;\n        lodash.curry = curry;\n        lodash.debounce = debounce;\n        lodash.defaults = defaults;\n        lodash.defer = defer;\n        lodash.delay = delay;\n        lodash.difference = difference;\n        lodash.filter = filter;\n        lodash.flatten = flatten;\n        lodash.forEach = forEach;\n        lodash.forEachRight = forEachRight;\n        lodash.forIn = forIn;\n        lodash.forInRight = forInRight;\n        lodash.forOwn = forOwn;\n        lodash.forOwnRight = forOwnRight;\n        lodash.functions = functions;\n        lodash.groupBy = groupBy;\n        lodash.indexBy = indexBy;\n        lodash.initial = initial;\n        lodash.intersection = intersection;\n        lodash.invert = invert;\n        lodash.invoke = invoke;\n        lodash.keys = keys;\n        lodash.map = map;\n        lodash.mapValues = mapValues;\n        lodash.max = max;\n        lodash.memoize = memoize;\n        lodash.merge = merge;\n        lodash.min = min;\n        lodash.omit = omit;\n        lodash.once = once;\n        lodash.pairs = pairs;\n        lodash.partial = partial;\n        lodash.partialRight = partialRight;\n        lodash.pick = pick;\n        lodash.pluck = pluck;\n        lodash.property = property;\n        lodash.pull = pull;\n        lodash.range = range;\n        lodash.reject = reject;\n        lodash.remove = remove;\n        lodash.rest = rest;\n        lodash.shuffle = shuffle;\n        lodash.sortBy = sortBy;\n        lodash.tap = tap;\n        lodash.throttle = throttle;\n        lodash.times = times;\n        lodash.toArray = toArray;\n        lodash.transform = transform;\n        lodash.union = union;\n        lodash.uniq = uniq;\n        lodash.values = values;\n        lodash.where = where;\n        lodash.without = without;\n        lodash.wrap = wrap;\n        lodash.xor = xor;\n        lodash.zip = zip;\n        lodash.zipObject = zipObject;\n        lodash.collect = map;\n        lodash.drop = rest;\n        lodash.each = forEach;\n        lodash.eachRight = forEachRight;\n        lodash.extend = assign;\n        lodash.methods = functions;\n        lodash.object = zipObject;\n        lodash.select = filter;\n        lodash.tail = rest;\n        lodash.unique = uniq;\n        lodash.unzip = zip;\n        mixin(lodash);\n        lodash.clone = clone;\n        lodash.cloneDeep = cloneDeep;\n        lodash.contains = contains;\n        lodash.escape = escape;\n        lodash.every = every;\n        lodash.find = find;\n        lodash.findIndex = findIndex;\n        lodash.findKey = findKey;\n        lodash.findLast = findLast;\n        lodash.findLastIndex = findLastIndex;\n        lodash.findLastKey = findLastKey;\n        lodash.has = has;\n        lodash.identity = identity;\n        lodash.indexOf = indexOf;\n        lodash.isArguments = isArguments;\n        lodash.isArray = isArray;\n        lodash.isBoolean = isBoolean;\n        lodash.isDate = isDate;\n        lodash.isElement = isElement;\n        lodash.isEmpty = isEmpty;\n        lodash.isEqual = isEqual;\n        lodash.isFinite = isFinite;\n        lodash.isFunction = isFunction;\n        lodash.isNaN = isNaN;\n        lodash.isNull = isNull;\n        lodash.isNumber = isNumber;\n        lodash.isObject = isObject;\n        lodash.isPlainObject = isPlainObject;\n        lodash.isRegExp = isRegExp;\n        lodash.isString = isString;\n        lodash.isUndefined = isUndefined;\n        lodash.lastIndexOf = lastIndexOf;\n        lodash.mixin = mixin;\n        lodash.noConflict = noConflict;\n        lodash.noop = noop;\n        lodash.now = now;\n        lodash.parseInt = parseInt;\n        lodash.random = random;\n        lodash.reduce = reduce;\n        lodash.reduceRight = reduceRight;\n        lodash.result = result;\n        lodash.runInContext = runInContext;\n        lodash.size = size;\n        lodash.some = some;\n        lodash.sortedIndex = sortedIndex;\n        lodash.template = template;\n        lodash.unescape = unescape;\n        lodash.uniqueId = uniqueId;\n        lodash.all = every;\n        lodash.any = some;\n        lodash.detect = find;\n        lodash.findWhere = find;\n        lodash.foldl = reduce;\n        lodash.foldr = reduceRight;\n        lodash.include = contains;\n        lodash.inject = reduce;\n        mixin(function () {\n            var source = {};\n            forOwn(lodash, function (func, methodName) {\n                if (!lodash.prototype[methodName]) {\n                    source[methodName] = func;\n                }\n            });\n            return source;\n        }(), false);\n        lodash.first = first;\n        lodash.last = last;\n        lodash.sample = sample;\n        lodash.take = first;\n        lodash.head = first;\n        forOwn(lodash, function (func, methodName) {\n            var callbackable = methodName !== 'sample';\n            if (!lodash.prototype[methodName]) {\n                lodash.prototype[methodName] = function (n, guard) {\n                    var chainAll = this.__chain__, result = func(this.__wrapped__, n, guard);\n                    return !chainAll && (n == null || guard && !(callbackable && typeof n == 'function')) ? result : new lodashWrapper(result, chainAll);\n                };\n            }\n        });\n        lodash.VERSION = '2.4.1';\n        lodash.prototype.chain = wrapperChain;\n        lodash.prototype.toString = wrapperToString;\n        lodash.prototype.value = wrapperValueOf;\n        lodash.prototype.valueOf = wrapperValueOf;\n        forEach([\n            'join',\n            'pop',\n            'shift'\n        ], function (methodName) {\n            var func = arrayRef[methodName];\n            lodash.prototype[methodName] = function () {\n                var chainAll = this.__chain__, result = func.apply(this.__wrapped__, arguments);\n                return chainAll ? new lodashWrapper(result, chainAll) : result;\n            };\n        });\n        forEach([\n            'push',\n            'reverse',\n            'sort',\n            'unshift'\n        ], function (methodName) {\n            var func = arrayRef[methodName];\n            lodash.prototype[methodName] = function () {\n                func.apply(this.__wrapped__, arguments);\n                return this;\n            };\n        });\n        forEach([\n            'concat',\n            'slice',\n            'splice'\n        ], function (methodName) {\n            var func = arrayRef[methodName];\n            lodash.prototype[methodName] = function () {\n                return new lodashWrapper(func.apply(this.__wrapped__, arguments), this.__chain__);\n            };\n        });\n        return lodash;\n    }\n    var _ = runInContext();\n    if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {\n        root._ = _;\n        define(function () {\n            return _;\n        });\n    } else if (freeExports && freeModule) {\n        if (moduleExports) {\n            (freeModule.exports = _)._ = _;\n        } else {\n            freeExports._ = _;\n        }\n    } else {\n        root._ = _;\n    }\n}.call(this));","map":"{\"version\":3,\"sources\":[\"node_modules/lodash/dist/lodash.js\"],\"names\":[\"undefined\",\"arrayPool\",\"objectPool\",\"idCounter\",\"keyPrefix\",\"Date\",\"largeArraySize\",\"maxPoolSize\",\"whitespace\",\"reEmptyStringLeading\",\"reEmptyStringMiddle\",\"reEmptyStringTrailing\",\"reEsTemplate\",\"reFlags\",\"reFuncName\",\"reInterpolate\",\"reLeadingSpacesAndZeros\",\"RegExp\",\"reNoMatch\",\"reThis\",\"reUnescapedString\",\"contextProps\",\"templateCounter\",\"argsClass\",\"arrayClass\",\"boolClass\",\"dateClass\",\"funcClass\",\"numberClass\",\"objectClass\",\"regexpClass\",\"stringClass\",\"cloneableClasses\",\"debounceOptions\",\"descriptor\",\"objectTypes\",\"stringEscapes\",\"root\",\"window\",\"freeExports\",\"exports\",\"nodeType\",\"freeModule\",\"module\",\"moduleExports\",\"freeGlobal\",\"global\",\"baseIndexOf\",\"array\",\"value\",\"fromIndex\",\"index\",\"length\",\"cacheIndexOf\",\"cache\",\"type\",\"key\",\"cachePush\",\"typeCache\",\"push\",\"charAtCallback\",\"charCodeAt\",\"compareAscending\",\"a\",\"b\",\"ac\",\"criteria\",\"bc\",\"other\",\"createCache\",\"first\",\"mid\",\"last\",\"getObject\",\"result\",\"escapeStringChar\",\"match\",\"getArray\",\"pop\",\"releaseArray\",\"releaseObject\",\"object\",\"number\",\"string\",\"slice\",\"start\",\"end\",\"Array\",\"runInContext\",\"context\",\"_\",\"defaults\",\"Object\",\"pick\",\"Boolean\",\"Function\",\"Math\",\"Number\",\"String\",\"TypeError\",\"arrayRef\",\"objectProto\",\"prototype\",\"oldDash\",\"toString\",\"reNative\",\"replace\",\"ceil\",\"clearTimeout\",\"floor\",\"fnToString\",\"getPrototypeOf\",\"isNative\",\"hasOwnProperty\",\"setTimeout\",\"splice\",\"unshift\",\"defineProperty\",\"o\",\"func\",\"e\",\"nativeCreate\",\"create\",\"nativeIsArray\",\"isArray\",\"nativeIsFinite\",\"isFinite\",\"nativeIsNaN\",\"isNaN\",\"nativeKeys\",\"keys\",\"nativeMax\",\"max\",\"nativeMin\",\"min\",\"nativeParseInt\",\"parseInt\",\"nativeRandom\",\"random\",\"ctorByClass\",\"lodash\",\"call\",\"lodashWrapper\",\"chainAll\",\"__chain__\",\"__wrapped__\",\"support\",\"funcDecomp\",\"WinRTError\",\"test\",\"funcNames\",\"name\",\"templateSettings\",\"baseBind\",\"bindData\",\"partialArgs\",\"thisArg\",\"bound\",\"args\",\"apply\",\"arguments\",\"thisBinding\",\"baseCreate\",\"isObject\",\"setBindData\",\"baseClone\",\"isDeep\",\"callback\",\"stackA\",\"stackB\",\"isObj\",\"className\",\"ctor\",\"source\",\"exec\",\"lastIndex\",\"isArr\",\"initedStack\",\"assign\",\"input\",\"forEach\",\"forOwn\",\"objValue\",\"properties\",\"baseCreateCallback\",\"argCount\",\"identity\",\"__bindData__\",\"collection\",\"accumulator\",\"bind\",\"baseCreateWrapper\",\"bitmask\",\"partialRightArgs\",\"arity\",\"isBind\",\"isBindKey\",\"isCurry\",\"isCurryBound\",\"baseDifference\",\"values\",\"indexOf\",\"getIndexOf\",\"isLarge\",\"baseFlatten\",\"isShallow\",\"isStrict\",\"isArguments\",\"valIndex\",\"valLength\",\"resIndex\",\"baseIsEqual\",\"isWhere\",\"otherType\",\"otherClass\",\"aWrapped\",\"bWrapped\",\"ctorA\",\"constructor\",\"ctorB\",\"isFunction\",\"size\",\"forIn\",\"baseMerge\",\"found\",\"isPlainObject\",\"stackLength\",\"baseRandom\",\"baseUniq\",\"isSorted\",\"seen\",\"computed\",\"createAggregator\",\"setter\",\"createCallback\",\"createWrapper\",\"isPartial\",\"isPartialRight\",\"creater\",\"escapeHtmlChar\",\"htmlEscapes\",\"noop\",\"shimIsPlainObject\",\"unescapeHtmlChar\",\"htmlUnescapes\",\"shimKeys\",\"iterable\",\"invert\",\"reEscapedHtml\",\"join\",\"reUnescapedHtml\",\"guard\",\"argsIndex\",\"argsLength\",\"ownIndex\",\"ownProps\",\"clone\",\"cloneDeep\",\"findKey\",\"findLastKey\",\"forOwnRight\",\"forInRight\",\"pairs\",\"props\",\"functions\",\"sort\",\"has\",\"isBoolean\",\"isDate\",\"isElement\",\"isEmpty\",\"isEqual\",\"parseFloat\",\"isNumber\",\"isNull\",\"valueOf\",\"objProto\",\"isRegExp\",\"isString\",\"isUndefined\",\"mapValues\",\"merge\",\"sources\",\"omit\",\"transform\",\"proto\",\"at\",\"contains\",\"target\",\"countBy\",\"every\",\"filter\",\"find\",\"findLast\",\"forEachRight\",\"groupBy\",\"indexBy\",\"invoke\",\"methodName\",\"isFunc\",\"map\",\"Infinity\",\"current\",\"pluck\",\"reduce\",\"noaccum\",\"reduceRight\",\"reject\",\"sample\",\"n\",\"shuffle\",\"rand\",\"some\",\"sortBy\",\"toArray\",\"where\",\"compact\",\"difference\",\"findIndex\",\"findLastIndex\",\"flatten\",\"sortedIndex\",\"initial\",\"intersection\",\"caches\",\"trustIndexOf\",\"lastIndexOf\",\"pull\",\"range\",\"step\",\"remove\",\"rest\",\"low\",\"high\",\"union\",\"uniq\",\"without\",\"xor\",\"concat\",\"zip\",\"zipObject\",\"after\",\"bindAll\",\"funcs\",\"bindKey\",\"compose\",\"curry\",\"debounce\",\"wait\",\"options\",\"maxTimeoutId\",\"stamp\",\"timeoutId\",\"trailingCall\",\"lastCalled\",\"maxWait\",\"trailing\",\"leading\",\"delayed\",\"remaining\",\"now\",\"isCalled\",\"maxDelayed\",\"leadingCall\",\"defer\",\"delay\",\"memoize\",\"resolver\",\"memoized\",\"once\",\"ran\",\"partial\",\"partialRight\",\"throttle\",\"wrap\",\"wrapper\",\"constant\",\"property\",\"escape\",\"mixin\",\"chain\",\"methodNames\",\"noConflict\",\"getTime\",\"radix\",\"floating\",\"noMin\",\"noMax\",\"template\",\"text\",\"data\",\"settings\",\"imports\",\"importsKeys\",\"importsValues\",\"isEvaluating\",\"interpolate\",\"reDelimiters\",\"evaluate\",\"escapeValue\",\"interpolateValue\",\"esTemplateValue\",\"evaluateValue\",\"offset\",\"variable\",\"hasVariable\",\"sourceURL\",\"times\",\"unescape\",\"uniqueId\",\"prefix\",\"id\",\"tap\",\"interceptor\",\"wrapperChain\",\"wrapperToString\",\"wrapperValueOf\",\"collect\",\"drop\",\"each\",\"eachRight\",\"extend\",\"methods\",\"select\",\"tail\",\"unique\",\"unzip\",\"all\",\"any\",\"detect\",\"findWhere\",\"foldl\",\"foldr\",\"include\",\"inject\",\"take\",\"head\",\"callbackable\",\"VERSION\",\"define\",\"amd\"],\"mappings\":\"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\"}","lineCount":2282,"mtime":1386055096000,"deps":[],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":true,"isCoreModule":false,"realCanonicalName":null,"src":"/**\n * @license\n * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>\n * Build: `lodash modern -o ./dist/lodash.js`\n * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <http://lodash.com/license>\n */\n;(function() {\n\n  /** Used as a safe reference for `undefined` in pre ES5 environments */\n  var undefined;\n\n  /** Used to pool arrays and objects used internally */\n  var arrayPool = [],\n      objectPool = [];\n\n  /** Used to generate unique IDs */\n  var idCounter = 0;\n\n  /** Used to prefix keys to avoid issues with `__proto__` and properties on `Object.prototype` */\n  var keyPrefix = +new Date + '';\n\n  /** Used as the size when optimizations are enabled for large arrays */\n  var largeArraySize = 75;\n\n  /** Used as the max size of the `arrayPool` and `objectPool` */\n  var maxPoolSize = 40;\n\n  /** Used to detect and test whitespace */\n  var whitespace = (\n    // whitespace\n    ' \\t\\x0B\\f\\xA0\\ufeff' +\n\n    // line terminators\n    '\\n\\r\\u2028\\u2029' +\n\n    // unicode category \"Zs\" space separators\n    '\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000'\n  );\n\n  /** Used to match empty string literals in compiled template source */\n  var reEmptyStringLeading = /\\b__p \\+= '';/g,\n      reEmptyStringMiddle = /\\b(__p \\+=) '' \\+/g,\n      reEmptyStringTrailing = /(__e\\(.*?\\)|\\b__t\\)) \\+\\n'';/g;\n\n  /**\n   * Used to match ES6 template delimiters\n   * http://people.mozilla.org/~jorendorff/es6-draft.html#sec-literals-string-literals\n   */\n  var reEsTemplate = /\\$\\{([^\\\\}]*(?:\\\\.[^\\\\}]*)*)\\}/g;\n\n  /** Used to match regexp flags from their coerced string values */\n  var reFlags = /\\w*$/;\n\n  /** Used to detected named functions */\n  var reFuncName = /^\\s*function[ \\n\\r\\t]+\\w/;\n\n  /** Used to match \"interpolate\" template delimiters */\n  var reInterpolate = /<%=([\\s\\S]+?)%>/g;\n\n  /** Used to match leading whitespace and zeros to be removed */\n  var reLeadingSpacesAndZeros = RegExp('^[' + whitespace + ']*0+(?=.$)');\n\n  /** Used to ensure capturing order of template delimiters */\n  var reNoMatch = /($^)/;\n\n  /** Used to detect functions containing a `this` reference */\n  var reThis = /\\bthis\\b/;\n\n  /** Used to match unescaped characters in compiled string literals */\n  var reUnescapedString = /['\\n\\r\\t\\u2028\\u2029\\\\]/g;\n\n  /** Used to assign default `context` object properties */\n  var contextProps = [\n    'Array', 'Boolean', 'Date', 'Function', 'Math', 'Number', 'Object',\n    'RegExp', 'String', '_', 'attachEvent', 'clearTimeout', 'isFinite', 'isNaN',\n    'parseInt', 'setTimeout'\n  ];\n\n  /** Used to make template sourceURLs easier to identify */\n  var templateCounter = 0;\n\n  /** `Object#toString` result shortcuts */\n  var argsClass = '[object Arguments]',\n      arrayClass = '[object Array]',\n      boolClass = '[object Boolean]',\n      dateClass = '[object Date]',\n      funcClass = '[object Function]',\n      numberClass = '[object Number]',\n      objectClass = '[object Object]',\n      regexpClass = '[object RegExp]',\n      stringClass = '[object String]';\n\n  /** Used to identify object classifications that `_.clone` supports */\n  var cloneableClasses = {};\n  cloneableClasses[funcClass] = false;\n  cloneableClasses[argsClass] = cloneableClasses[arrayClass] =\n  cloneableClasses[boolClass] = cloneableClasses[dateClass] =\n  cloneableClasses[numberClass] = cloneableClasses[objectClass] =\n  cloneableClasses[regexpClass] = cloneableClasses[stringClass] = true;\n\n  /** Used as an internal `_.debounce` options object */\n  var debounceOptions = {\n    'leading': false,\n    'maxWait': 0,\n    'trailing': false\n  };\n\n  /** Used as the property descriptor for `__bindData__` */\n  var descriptor = {\n    'configurable': false,\n    'enumerable': false,\n    'value': null,\n    'writable': false\n  };\n\n  /** Used to determine if values are of the language type Object */\n  var objectTypes = {\n    'boolean': false,\n    'function': true,\n    'object': true,\n    'number': false,\n    'string': false,\n    'undefined': false\n  };\n\n  /** Used to escape characters for inclusion in compiled string literals */\n  var stringEscapes = {\n    '\\\\': '\\\\',\n    \"'\": \"'\",\n    '\\n': 'n',\n    '\\r': 'r',\n    '\\t': 't',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  /** Used as a reference to the global object */\n  var root = (objectTypes[typeof window] && window) || this;\n\n  /** Detect free variable `exports` */\n  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;\n\n  /** Detect free variable `module` */\n  var freeModule = objectTypes[typeof module] && module && !module.nodeType && module;\n\n  /** Detect the popular CommonJS extension `module.exports` */\n  var moduleExports = freeModule && freeModule.exports === freeExports && freeExports;\n\n  /** Detect free variable `global` from Node.js or Browserified code and use it as `root` */\n  var freeGlobal = objectTypes[typeof global] && global;\n  if (freeGlobal && (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal)) {\n    root = freeGlobal;\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * The base implementation of `_.indexOf` without support for binary searches\n   * or `fromIndex` constraints.\n   *\n   * @private\n   * @param {Array} array The array to search.\n   * @param {*} value The value to search for.\n   * @param {number} [fromIndex=0] The index to search from.\n   * @returns {number} Returns the index of the matched value or `-1`.\n   */\n  function baseIndexOf(array, value, fromIndex) {\n    var index = (fromIndex || 0) - 1,\n        length = array ? array.length : 0;\n\n    while (++index < length) {\n      if (array[index] === value) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * An implementation of `_.contains` for cache objects that mimics the return\n   * signature of `_.indexOf` by returning `0` if the value is found, else `-1`.\n   *\n   * @private\n   * @param {Object} cache The cache object to inspect.\n   * @param {*} value The value to search for.\n   * @returns {number} Returns `0` if `value` is found, else `-1`.\n   */\n  function cacheIndexOf(cache, value) {\n    var type = typeof value;\n    cache = cache.cache;\n\n    if (type == 'boolean' || value == null) {\n      return cache[value] ? 0 : -1;\n    }\n    if (type != 'number' && type != 'string') {\n      type = 'object';\n    }\n    var key = type == 'number' ? value : keyPrefix + value;\n    cache = (cache = cache[type]) && cache[key];\n\n    return type == 'object'\n      ? (cache && baseIndexOf(cache, value) > -1 ? 0 : -1)\n      : (cache ? 0 : -1);\n  }\n\n  /**\n   * Adds a given value to the corresponding cache object.\n   *\n   * @private\n   * @param {*} value The value to add to the cache.\n   */\n  function cachePush(value) {\n    var cache = this.cache,\n        type = typeof value;\n\n    if (type == 'boolean' || value == null) {\n      cache[value] = true;\n    } else {\n      if (type != 'number' && type != 'string') {\n        type = 'object';\n      }\n      var key = type == 'number' ? value : keyPrefix + value,\n          typeCache = cache[type] || (cache[type] = {});\n\n      if (type == 'object') {\n        (typeCache[key] || (typeCache[key] = [])).push(value);\n      } else {\n        typeCache[key] = true;\n      }\n    }\n  }\n\n  /**\n   * Used by `_.max` and `_.min` as the default callback when a given\n   * collection is a string value.\n   *\n   * @private\n   * @param {string} value The character to inspect.\n   * @returns {number} Returns the code unit of given character.\n   */\n  function charAtCallback(value) {\n    return value.charCodeAt(0);\n  }\n\n  /**\n   * Used by `sortBy` to compare transformed `collection` elements, stable sorting\n   * them in ascending order.\n   *\n   * @private\n   * @param {Object} a The object to compare to `b`.\n   * @param {Object} b The object to compare to `a`.\n   * @returns {number} Returns the sort order indicator of `1` or `-1`.\n   */\n  function compareAscending(a, b) {\n    var ac = a.criteria,\n        bc = b.criteria,\n        index = -1,\n        length = ac.length;\n\n    while (++index < length) {\n      var value = ac[index],\n          other = bc[index];\n\n      if (value !== other) {\n        if (value > other || typeof value == 'undefined') {\n          return 1;\n        }\n        if (value < other || typeof other == 'undefined') {\n          return -1;\n        }\n      }\n    }\n    // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n    // that causes it, under certain circumstances, to return the same value for\n    // `a` and `b`. See https://github.com/jashkenas/underscore/pull/1247\n    //\n    // This also ensures a stable sort in V8 and other engines.\n    // See http://code.google.com/p/v8/issues/detail?id=90\n    return a.index - b.index;\n  }\n\n  /**\n   * Creates a cache object to optimize linear searches of large arrays.\n   *\n   * @private\n   * @param {Array} [array=[]] The array to search.\n   * @returns {null|Object} Returns the cache object or `null` if caching should not be used.\n   */\n  function createCache(array) {\n    var index = -1,\n        length = array.length,\n        first = array[0],\n        mid = array[(length / 2) | 0],\n        last = array[length - 1];\n\n    if (first && typeof first == 'object' &&\n        mid && typeof mid == 'object' && last && typeof last == 'object') {\n      return false;\n    }\n    var cache = getObject();\n    cache['false'] = cache['null'] = cache['true'] = cache['undefined'] = false;\n\n    var result = getObject();\n    result.array = array;\n    result.cache = cache;\n    result.push = cachePush;\n\n    while (++index < length) {\n      result.push(array[index]);\n    }\n    return result;\n  }\n\n  /**\n   * Used by `template` to escape characters for inclusion in compiled\n   * string literals.\n   *\n   * @private\n   * @param {string} match The matched character to escape.\n   * @returns {string} Returns the escaped character.\n   */\n  function escapeStringChar(match) {\n    return '\\\\' + stringEscapes[match];\n  }\n\n  /**\n   * Gets an array from the array pool or creates a new one if the pool is empty.\n   *\n   * @private\n   * @returns {Array} The array from the pool.\n   */\n  function getArray() {\n    return arrayPool.pop() || [];\n  }\n\n  /**\n   * Gets an object from the object pool or creates a new one if the pool is empty.\n   *\n   * @private\n   * @returns {Object} The object from the pool.\n   */\n  function getObject() {\n    return objectPool.pop() || {\n      'array': null,\n      'cache': null,\n      'criteria': null,\n      'false': false,\n      'index': 0,\n      'null': false,\n      'number': null,\n      'object': null,\n      'push': null,\n      'string': null,\n      'true': false,\n      'undefined': false,\n      'value': null\n    };\n  }\n\n  /**\n   * Releases the given array back to the array pool.\n   *\n   * @private\n   * @param {Array} [array] The array to release.\n   */\n  function releaseArray(array) {\n    array.length = 0;\n    if (arrayPool.length < maxPoolSize) {\n      arrayPool.push(array);\n    }\n  }\n\n  /**\n   * Releases the given object back to the object pool.\n   *\n   * @private\n   * @param {Object} [object] The object to release.\n   */\n  function releaseObject(object) {\n    var cache = object.cache;\n    if (cache) {\n      releaseObject(cache);\n    }\n    object.array = object.cache = object.criteria = object.object = object.number = object.string = object.value = null;\n    if (objectPool.length < maxPoolSize) {\n      objectPool.push(object);\n    }\n  }\n\n  /**\n   * Slices the `collection` from the `start` index up to, but not including,\n   * the `end` index.\n   *\n   * Note: This function is used instead of `Array#slice` to support node lists\n   * in IE < 9 and to ensure dense arrays are returned.\n   *\n   * @private\n   * @param {Array|Object|string} collection The collection to slice.\n   * @param {number} start The start index.\n   * @param {number} end The end index.\n   * @returns {Array} Returns the new array.\n   */\n  function slice(array, start, end) {\n    start || (start = 0);\n    if (typeof end == 'undefined') {\n      end = array ? array.length : 0;\n    }\n    var index = -1,\n        length = end - start || 0,\n        result = Array(length < 0 ? 0 : length);\n\n    while (++index < length) {\n      result[index] = array[start + index];\n    }\n    return result;\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Create a new `lodash` function using the given context object.\n   *\n   * @static\n   * @memberOf _\n   * @category Utilities\n   * @param {Object} [context=root] The context object.\n   * @returns {Function} Returns the `lodash` function.\n   */\n  function runInContext(context) {\n    // Avoid issues with some ES3 environments that attempt to use values, named\n    // after built-in constructors like `Object`, for the creation of literals.\n    // ES5 clears this up by stating that literals must use built-in constructors.\n    // See http://es5.github.io/#x11.1.5.\n    context = context ? _.defaults(root.Object(), context, _.pick(root, contextProps)) : root;\n\n    /** Native constructor references */\n    var Array = context.Array,\n        Boolean = context.Boolean,\n        Date = context.Date,\n        Function = context.Function,\n        Math = context.Math,\n        Number = context.Number,\n        Object = context.Object,\n        RegExp = context.RegExp,\n        String = context.String,\n        TypeError = context.TypeError;\n\n    /**\n     * Used for `Array` method references.\n     *\n     * Normally `Array.prototype` would suffice, however, using an array literal\n     * avoids issues in Narwhal.\n     */\n    var arrayRef = [];\n\n    /** Used for native method references */\n    var objectProto = Object.prototype;\n\n    /** Used to restore the original `_` reference in `noConflict` */\n    var oldDash = context._;\n\n    /** Used to resolve the internal [[Class]] of values */\n    var toString = objectProto.toString;\n\n    /** Used to detect if a method is native */\n    var reNative = RegExp('^' +\n      String(toString)\n        .replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')\n        .replace(/toString| for [^\\]]+/g, '.*?') + '$'\n    );\n\n    /** Native method shortcuts */\n    var ceil = Math.ceil,\n        clearTimeout = context.clearTimeout,\n        floor = Math.floor,\n        fnToString = Function.prototype.toString,\n        getPrototypeOf = isNative(getPrototypeOf = Object.getPrototypeOf) && getPrototypeOf,\n        hasOwnProperty = objectProto.hasOwnProperty,\n        push = arrayRef.push,\n        setTimeout = context.setTimeout,\n        splice = arrayRef.splice,\n        unshift = arrayRef.unshift;\n\n    /** Used to set meta data on functions */\n    var defineProperty = (function() {\n      // IE 8 only accepts DOM elements\n      try {\n        var o = {},\n            func = isNative(func = Object.defineProperty) && func,\n            result = func(o, o, o) && func;\n      } catch(e) { }\n      return result;\n    }());\n\n    /* Native method shortcuts for methods with the same name as other `lodash` methods */\n    var nativeCreate = isNative(nativeCreate = Object.create) && nativeCreate,\n        nativeIsArray = isNative(nativeIsArray = Array.isArray) && nativeIsArray,\n        nativeIsFinite = context.isFinite,\n        nativeIsNaN = context.isNaN,\n        nativeKeys = isNative(nativeKeys = Object.keys) && nativeKeys,\n        nativeMax = Math.max,\n        nativeMin = Math.min,\n        nativeParseInt = context.parseInt,\n        nativeRandom = Math.random;\n\n    /** Used to lookup a built-in constructor by [[Class]] */\n    var ctorByClass = {};\n    ctorByClass[arrayClass] = Array;\n    ctorByClass[boolClass] = Boolean;\n    ctorByClass[dateClass] = Date;\n    ctorByClass[funcClass] = Function;\n    ctorByClass[objectClass] = Object;\n    ctorByClass[numberClass] = Number;\n    ctorByClass[regexpClass] = RegExp;\n    ctorByClass[stringClass] = String;\n\n    /*--------------------------------------------------------------------------*/\n\n    /**\n     * Creates a `lodash` object which wraps the given value to enable intuitive\n     * method chaining.\n     *\n     * In addition to Lo-Dash methods, wrappers also have the following `Array` methods:\n     * `concat`, `join`, `pop`, `push`, `reverse`, `shift`, `slice`, `sort`, `splice`,\n     * and `unshift`\n     *\n     * Chaining is supported in custom builds as long as the `value` method is\n     * implicitly or explicitly included in the build.\n     *\n     * The chainable wrapper functions are:\n     * `after`, `assign`, `bind`, `bindAll`, `bindKey`, `chain`, `compact`,\n     * `compose`, `concat`, `countBy`, `create`, `createCallback`, `curry`,\n     * `debounce`, `defaults`, `defer`, `delay`, `difference`, `filter`, `flatten`,\n     * `forEach`, `forEachRight`, `forIn`, `forInRight`, `forOwn`, `forOwnRight`,\n     * `functions`, `groupBy`, `indexBy`, `initial`, `intersection`, `invert`,\n     * `invoke`, `keys`, `map`, `max`, `memoize`, `merge`, `min`, `object`, `omit`,\n     * `once`, `pairs`, `partial`, `partialRight`, `pick`, `pluck`, `pull`, `push`,\n     * `range`, `reject`, `remove`, `rest`, `reverse`, `shuffle`, `slice`, `sort`,\n     * `sortBy`, `splice`, `tap`, `throttle`, `times`, `toArray`, `transform`,\n     * `union`, `uniq`, `unshift`, `unzip`, `values`, `where`, `without`, `wrap`,\n     * and `zip`\n     *\n     * The non-chainable wrapper functions are:\n     * `clone`, `cloneDeep`, `contains`, `escape`, `every`, `find`, `findIndex`,\n     * `findKey`, `findLast`, `findLastIndex`, `findLastKey`, `has`, `identity`,\n     * `indexOf`, `isArguments`, `isArray`, `isBoolean`, `isDate`, `isElement`,\n     * `isEmpty`, `isEqual`, `isFinite`, `isFunction`, `isNaN`, `isNull`, `isNumber`,\n     * `isObject`, `isPlainObject`, `isRegExp`, `isString`, `isUndefined`, `join`,\n     * `lastIndexOf`, `mixin`, `noConflict`, `parseInt`, `pop`, `random`, `reduce`,\n     * `reduceRight`, `result`, `shift`, `size`, `some`, `sortedIndex`, `runInContext`,\n     * `template`, `unescape`, `uniqueId`, and `value`\n     *\n     * The wrapper functions `first` and `last` return wrapped values when `n` is\n     * provided, otherwise they return unwrapped values.\n     *\n     * Explicit chaining can be enabled by using the `_.chain` method.\n     *\n     * @name _\n     * @constructor\n     * @category Chaining\n     * @param {*} value The value to wrap in a `lodash` instance.\n     * @returns {Object} Returns a `lodash` instance.\n     * @example\n     *\n     * var wrapped = _([1, 2, 3]);\n     *\n     * // returns an unwrapped value\n     * wrapped.reduce(function(sum, num) {\n     *   return sum + num;\n     * });\n     * // => 6\n     *\n     * // returns a wrapped value\n     * var squares = wrapped.map(function(num) {\n     *   return num * num;\n     * });\n     *\n     * _.isArray(squares);\n     * // => false\n     *\n     * _.isArray(squares.value());\n     * // => true\n     */\n    function lodash(value) {\n      // don't wrap if already wrapped, even if wrapped by a different `lodash` constructor\n      return (value && typeof value == 'object' && !isArray(value) && hasOwnProperty.call(value, '__wrapped__'))\n       ? value\n       : new lodashWrapper(value);\n    }\n\n    /**\n     * A fast path for creating `lodash` wrapper objects.\n     *\n     * @private\n     * @param {*} value The value to wrap in a `lodash` instance.\n     * @param {boolean} chainAll A flag to enable chaining for all methods\n     * @returns {Object} Returns a `lodash` instance.\n     */\n    function lodashWrapper(value, chainAll) {\n      this.__chain__ = !!chainAll;\n      this.__wrapped__ = value;\n    }\n    // ensure `new lodashWrapper` is an instance of `lodash`\n    lodashWrapper.prototype = lodash.prototype;\n\n    /**\n     * An object used to flag environments features.\n     *\n     * @static\n     * @memberOf _\n     * @type Object\n     */\n    var support = lodash.support = {};\n\n    /**\n     * Detect if functions can be decompiled by `Function#toString`\n     * (all but PS3 and older Opera mobile browsers & avoided in Windows 8 apps).\n     *\n     * @memberOf _.support\n     * @type boolean\n     */\n    support.funcDecomp = !isNative(context.WinRTError) && reThis.test(runInContext);\n\n    /**\n     * Detect if `Function#name` is supported (all but IE).\n     *\n     * @memberOf _.support\n     * @type boolean\n     */\n    support.funcNames = typeof Function.name == 'string';\n\n    /**\n     * By default, the template delimiters used by Lo-Dash are similar to those in\n     * embedded Ruby (ERB). Change the following template settings to use alternative\n     * delimiters.\n     *\n     * @static\n     * @memberOf _\n     * @type Object\n     */\n    lodash.templateSettings = {\n\n      /**\n       * Used to detect `data` property values to be HTML-escaped.\n       *\n       * @memberOf _.templateSettings\n       * @type RegExp\n       */\n      'escape': /<%-([\\s\\S]+?)%>/g,\n\n      /**\n       * Used to detect code to be evaluated.\n       *\n       * @memberOf _.templateSettings\n       * @type RegExp\n       */\n      'evaluate': /<%([\\s\\S]+?)%>/g,\n\n      /**\n       * Used to detect `data` property values to inject.\n       *\n       * @memberOf _.templateSettings\n       * @type RegExp\n       */\n      'interpolate': reInterpolate,\n\n      /**\n       * Used to reference the data object in the template text.\n       *\n       * @memberOf _.templateSettings\n       * @type string\n       */\n      'variable': '',\n\n      /**\n       * Used to import variables into the compiled template.\n       *\n       * @memberOf _.templateSettings\n       * @type Object\n       */\n      'imports': {\n\n        /**\n         * A reference to the `lodash` function.\n         *\n         * @memberOf _.templateSettings.imports\n         * @type Function\n         */\n        '_': lodash\n      }\n    };\n\n    /*--------------------------------------------------------------------------*/\n\n    /**\n     * The base implementation of `_.bind` that creates the bound function and\n     * sets its meta data.\n     *\n     * @private\n     * @param {Array} bindData The bind data array.\n     * @returns {Function} Returns the new bound function.\n     */\n    function baseBind(bindData) {\n      var func = bindData[0],\n          partialArgs = bindData[2],\n          thisArg = bindData[4];\n\n      function bound() {\n        // `Function#bind` spec\n        // http://es5.github.io/#x15.3.4.5\n        if (partialArgs) {\n          // avoid `arguments` object deoptimizations by using `slice` instead\n          // of `Array.prototype.slice.call` and not assigning `arguments` to a\n          // variable as a ternary expression\n          var args = slice(partialArgs);\n          push.apply(args, arguments);\n        }\n        // mimic the constructor's `return` behavior\n        // http://es5.github.io/#x13.2.2\n        if (this instanceof bound) {\n          // ensure `new bound` is an instance of `func`\n          var thisBinding = baseCreate(func.prototype),\n              result = func.apply(thisBinding, args || arguments);\n          return isObject(result) ? result : thisBinding;\n        }\n        return func.apply(thisArg, args || arguments);\n      }\n      setBindData(bound, bindData);\n      return bound;\n    }\n\n    /**\n     * The base implementation of `_.clone` without argument juggling or support\n     * for `thisArg` binding.\n     *\n     * @private\n     * @param {*} value The value to clone.\n     * @param {boolean} [isDeep=false] Specify a deep clone.\n     * @param {Function} [callback] The function to customize cloning values.\n     * @param {Array} [stackA=[]] Tracks traversed source objects.\n     * @param {Array} [stackB=[]] Associates clones with source counterparts.\n     * @returns {*} Returns the cloned value.\n     */\n    function baseClone(value, isDeep, callback, stackA, stackB) {\n      if (callback) {\n        var result = callback(value);\n        if (typeof result != 'undefined') {\n          return result;\n        }\n      }\n      // inspect [[Class]]\n      var isObj = isObject(value);\n      if (isObj) {\n        var className = toString.call(value);\n        if (!cloneableClasses[className]) {\n          return value;\n        }\n        var ctor = ctorByClass[className];\n        switch (className) {\n          case boolClass:\n          case dateClass:\n            return new ctor(+value);\n\n          case numberClass:\n          case stringClass:\n            return new ctor(value);\n\n          case regexpClass:\n            result = ctor(value.source, reFlags.exec(value));\n            result.lastIndex = value.lastIndex;\n            return result;\n        }\n      } else {\n        return value;\n      }\n      var isArr = isArray(value);\n      if (isDeep) {\n        // check for circular references and return corresponding clone\n        var initedStack = !stackA;\n        stackA || (stackA = getArray());\n        stackB || (stackB = getArray());\n\n        var length = stackA.length;\n        while (length--) {\n          if (stackA[length] == value) {\n            return stackB[length];\n          }\n        }\n        result = isArr ? ctor(value.length) : {};\n      }\n      else {\n        result = isArr ? slice(value) : assign({}, value);\n      }\n      // add array properties assigned by `RegExp#exec`\n      if (isArr) {\n        if (hasOwnProperty.call(value, 'index')) {\n          result.index = value.index;\n        }\n        if (hasOwnProperty.call(value, 'input')) {\n          result.input = value.input;\n        }\n      }\n      // exit for shallow clone\n      if (!isDeep) {\n        return result;\n      }\n      // add the source value to the stack of traversed objects\n      // and associate it with its clone\n      stackA.push(value);\n      stackB.push(result);\n\n      // recursively populate clone (susceptible to call stack limits)\n      (isArr ? forEach : forOwn)(value, function(objValue, key) {\n        result[key] = baseClone(objValue, isDeep, callback, stackA, stackB);\n      });\n\n      if (initedStack) {\n        releaseArray(stackA);\n        releaseArray(stackB);\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.create` without support for assigning\n     * properties to the created object.\n     *\n     * @private\n     * @param {Object} prototype The object to inherit from.\n     * @returns {Object} Returns the new object.\n     */\n    function baseCreate(prototype, properties) {\n      return isObject(prototype) ? nativeCreate(prototype) : {};\n    }\n    // fallback for browsers without `Object.create`\n    if (!nativeCreate) {\n      baseCreate = (function() {\n        function Object() {}\n        return function(prototype) {\n          if (isObject(prototype)) {\n            Object.prototype = prototype;\n            var result = new Object;\n            Object.prototype = null;\n          }\n          return result || context.Object();\n        };\n      }());\n    }\n\n    /**\n     * The base implementation of `_.createCallback` without support for creating\n     * \"_.pluck\" or \"_.where\" style callbacks.\n     *\n     * @private\n     * @param {*} [func=identity] The value to convert to a callback.\n     * @param {*} [thisArg] The `this` binding of the created callback.\n     * @param {number} [argCount] The number of arguments the callback accepts.\n     * @returns {Function} Returns a callback function.\n     */\n    function baseCreateCallback(func, thisArg, argCount) {\n      if (typeof func != 'function') {\n        return identity;\n      }\n      // exit early for no `thisArg` or already bound by `Function#bind`\n      if (typeof thisArg == 'undefined' || !('prototype' in func)) {\n        return func;\n      }\n      var bindData = func.__bindData__;\n      if (typeof bindData == 'undefined') {\n        if (support.funcNames) {\n          bindData = !func.name;\n        }\n        bindData = bindData || !support.funcDecomp;\n        if (!bindData) {\n          var source = fnToString.call(func);\n          if (!support.funcNames) {\n            bindData = !reFuncName.test(source);\n          }\n          if (!bindData) {\n            // checks if `func` references the `this` keyword and stores the result\n            bindData = reThis.test(source);\n            setBindData(func, bindData);\n          }\n        }\n      }\n      // exit early if there are no `this` references or `func` is bound\n      if (bindData === false || (bindData !== true && bindData[1] & 1)) {\n        return func;\n      }\n      switch (argCount) {\n        case 1: return function(value) {\n          return func.call(thisArg, value);\n        };\n        case 2: return function(a, b) {\n          return func.call(thisArg, a, b);\n        };\n        case 3: return function(value, index, collection) {\n          return func.call(thisArg, value, index, collection);\n        };\n        case 4: return function(accumulator, value, index, collection) {\n          return func.call(thisArg, accumulator, value, index, collection);\n        };\n      }\n      return bind(func, thisArg);\n    }\n\n    /**\n     * The base implementation of `createWrapper` that creates the wrapper and\n     * sets its meta data.\n     *\n     * @private\n     * @param {Array} bindData The bind data array.\n     * @returns {Function} Returns the new function.\n     */\n    function baseCreateWrapper(bindData) {\n      var func = bindData[0],\n          bitmask = bindData[1],\n          partialArgs = bindData[2],\n          partialRightArgs = bindData[3],\n          thisArg = bindData[4],\n          arity = bindData[5];\n\n      var isBind = bitmask & 1,\n          isBindKey = bitmask & 2,\n          isCurry = bitmask & 4,\n          isCurryBound = bitmask & 8,\n          key = func;\n\n      function bound() {\n        var thisBinding = isBind ? thisArg : this;\n        if (partialArgs) {\n          var args = slice(partialArgs);\n          push.apply(args, arguments);\n        }\n        if (partialRightArgs || isCurry) {\n          args || (args = slice(arguments));\n          if (partialRightArgs) {\n            push.apply(args, partialRightArgs);\n          }\n          if (isCurry && args.length < arity) {\n            bitmask |= 16 & ~32;\n            return baseCreateWrapper([func, (isCurryBound ? bitmask : bitmask & ~3), args, null, thisArg, arity]);\n          }\n        }\n        args || (args = arguments);\n        if (isBindKey) {\n          func = thisBinding[key];\n        }\n        if (this instanceof bound) {\n          thisBinding = baseCreate(func.prototype);\n          var result = func.apply(thisBinding, args);\n          return isObject(result) ? result : thisBinding;\n        }\n        return func.apply(thisBinding, args);\n      }\n      setBindData(bound, bindData);\n      return bound;\n    }\n\n    /**\n     * The base implementation of `_.difference` that accepts a single array\n     * of values to exclude.\n     *\n     * @private\n     * @param {Array} array The array to process.\n     * @param {Array} [values] The array of values to exclude.\n     * @returns {Array} Returns a new array of filtered values.\n     */\n    function baseDifference(array, values) {\n      var index = -1,\n          indexOf = getIndexOf(),\n          length = array ? array.length : 0,\n          isLarge = length >= largeArraySize && indexOf === baseIndexOf,\n          result = [];\n\n      if (isLarge) {\n        var cache = createCache(values);\n        if (cache) {\n          indexOf = cacheIndexOf;\n          values = cache;\n        } else {\n          isLarge = false;\n        }\n      }\n      while (++index < length) {\n        var value = array[index];\n        if (indexOf(values, value) < 0) {\n          result.push(value);\n        }\n      }\n      if (isLarge) {\n        releaseObject(values);\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.flatten` without support for callback\n     * shorthands or `thisArg` binding.\n     *\n     * @private\n     * @param {Array} array The array to flatten.\n     * @param {boolean} [isShallow=false] A flag to restrict flattening to a single level.\n     * @param {boolean} [isStrict=false] A flag to restrict flattening to arrays and `arguments` objects.\n     * @param {number} [fromIndex=0] The index to start from.\n     * @returns {Array} Returns a new flattened array.\n     */\n    function baseFlatten(array, isShallow, isStrict, fromIndex) {\n      var index = (fromIndex || 0) - 1,\n          length = array ? array.length : 0,\n          result = [];\n\n      while (++index < length) {\n        var value = array[index];\n\n        if (value && typeof value == 'object' && typeof value.length == 'number'\n            && (isArray(value) || isArguments(value))) {\n          // recursively flatten arrays (susceptible to call stack limits)\n          if (!isShallow) {\n            value = baseFlatten(value, isShallow, isStrict);\n          }\n          var valIndex = -1,\n              valLength = value.length,\n              resIndex = result.length;\n\n          result.length += valLength;\n          while (++valIndex < valLength) {\n            result[resIndex++] = value[valIndex];\n          }\n        } else if (!isStrict) {\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.isEqual`, without support for `thisArg` binding,\n     * that allows partial \"_.where\" style comparisons.\n     *\n     * @private\n     * @param {*} a The value to compare.\n     * @param {*} b The other value to compare.\n     * @param {Function} [callback] The function to customize comparing values.\n     * @param {Function} [isWhere=false] A flag to indicate performing partial comparisons.\n     * @param {Array} [stackA=[]] Tracks traversed `a` objects.\n     * @param {Array} [stackB=[]] Tracks traversed `b` objects.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     */\n    function baseIsEqual(a, b, callback, isWhere, stackA, stackB) {\n      // used to indicate that when comparing objects, `a` has at least the properties of `b`\n      if (callback) {\n        var result = callback(a, b);\n        if (typeof result != 'undefined') {\n          return !!result;\n        }\n      }\n      // exit early for identical values\n      if (a === b) {\n        // treat `+0` vs. `-0` as not equal\n        return a !== 0 || (1 / a == 1 / b);\n      }\n      var type = typeof a,\n          otherType = typeof b;\n\n      // exit early for unlike primitive values\n      if (a === a &&\n          !(a && objectTypes[type]) &&\n          !(b && objectTypes[otherType])) {\n        return false;\n      }\n      // exit early for `null` and `undefined` avoiding ES3's Function#call behavior\n      // http://es5.github.io/#x15.3.4.4\n      if (a == null || b == null) {\n        return a === b;\n      }\n      // compare [[Class]] names\n      var className = toString.call(a),\n          otherClass = toString.call(b);\n\n      if (className == argsClass) {\n        className = objectClass;\n      }\n      if (otherClass == argsClass) {\n        otherClass = objectClass;\n      }\n      if (className != otherClass) {\n        return false;\n      }\n      switch (className) {\n        case boolClass:\n        case dateClass:\n          // coerce dates and booleans to numbers, dates to milliseconds and booleans\n          // to `1` or `0` treating invalid dates coerced to `NaN` as not equal\n          return +a == +b;\n\n        case numberClass:\n          // treat `NaN` vs. `NaN` as equal\n          return (a != +a)\n            ? b != +b\n            // but treat `+0` vs. `-0` as not equal\n            : (a == 0 ? (1 / a == 1 / b) : a == +b);\n\n        case regexpClass:\n        case stringClass:\n          // coerce regexes to strings (http://es5.github.io/#x15.10.6.4)\n          // treat string primitives and their corresponding object instances as equal\n          return a == String(b);\n      }\n      var isArr = className == arrayClass;\n      if (!isArr) {\n        // unwrap any `lodash` wrapped values\n        var aWrapped = hasOwnProperty.call(a, '__wrapped__'),\n            bWrapped = hasOwnProperty.call(b, '__wrapped__');\n\n        if (aWrapped || bWrapped) {\n          return baseIsEqual(aWrapped ? a.__wrapped__ : a, bWrapped ? b.__wrapped__ : b, callback, isWhere, stackA, stackB);\n        }\n        // exit for functions and DOM nodes\n        if (className != objectClass) {\n          return false;\n        }\n        // in older versions of Opera, `arguments` objects have `Array` constructors\n        var ctorA = a.constructor,\n            ctorB = b.constructor;\n\n        // non `Object` object instances with different constructors are not equal\n        if (ctorA != ctorB &&\n              !(isFunction(ctorA) && ctorA instanceof ctorA && isFunction(ctorB) && ctorB instanceof ctorB) &&\n              ('constructor' in a && 'constructor' in b)\n            ) {\n          return false;\n        }\n      }\n      // assume cyclic structures are equal\n      // the algorithm for detecting cyclic structures is adapted from ES 5.1\n      // section 15.12.3, abstract operation `JO` (http://es5.github.io/#x15.12.3)\n      var initedStack = !stackA;\n      stackA || (stackA = getArray());\n      stackB || (stackB = getArray());\n\n      var length = stackA.length;\n      while (length--) {\n        if (stackA[length] == a) {\n          return stackB[length] == b;\n        }\n      }\n      var size = 0;\n      result = true;\n\n      // add `a` and `b` to the stack of traversed objects\n      stackA.push(a);\n      stackB.push(b);\n\n      // recursively compare objects and arrays (susceptible to call stack limits)\n      if (isArr) {\n        // compare lengths to determine if a deep comparison is necessary\n        length = a.length;\n        size = b.length;\n        result = size == length;\n\n        if (result || isWhere) {\n          // deep compare the contents, ignoring non-numeric properties\n          while (size--) {\n            var index = length,\n                value = b[size];\n\n            if (isWhere) {\n              while (index--) {\n                if ((result = baseIsEqual(a[index], value, callback, isWhere, stackA, stackB))) {\n                  break;\n                }\n              }\n            } else if (!(result = baseIsEqual(a[size], value, callback, isWhere, stackA, stackB))) {\n              break;\n            }\n          }\n        }\n      }\n      else {\n        // deep compare objects using `forIn`, instead of `forOwn`, to avoid `Object.keys`\n        // which, in this case, is more costly\n        forIn(b, function(value, key, b) {\n          if (hasOwnProperty.call(b, key)) {\n            // count the number of properties.\n            size++;\n            // deep compare each property value.\n            return (result = hasOwnProperty.call(a, key) && baseIsEqual(a[key], value, callback, isWhere, stackA, stackB));\n          }\n        });\n\n        if (result && !isWhere) {\n          // ensure both objects have the same number of properties\n          forIn(a, function(value, key, a) {\n            if (hasOwnProperty.call(a, key)) {\n              // `size` will be `-1` if `a` has more properties than `b`\n              return (result = --size > -1);\n            }\n          });\n        }\n      }\n      stackA.pop();\n      stackB.pop();\n\n      if (initedStack) {\n        releaseArray(stackA);\n        releaseArray(stackB);\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.merge` without argument juggling or support\n     * for `thisArg` binding.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @param {Function} [callback] The function to customize merging properties.\n     * @param {Array} [stackA=[]] Tracks traversed source objects.\n     * @param {Array} [stackB=[]] Associates values with source counterparts.\n     */\n    function baseMerge(object, source, callback, stackA, stackB) {\n      (isArray(source) ? forEach : forOwn)(source, function(source, key) {\n        var found,\n            isArr,\n            result = source,\n            value = object[key];\n\n        if (source && ((isArr = isArray(source)) || isPlainObject(source))) {\n          // avoid merging previously merged cyclic sources\n          var stackLength = stackA.length;\n          while (stackLength--) {\n            if ((found = stackA[stackLength] == source)) {\n              value = stackB[stackLength];\n              break;\n            }\n          }\n          if (!found) {\n            var isShallow;\n            if (callback) {\n              result = callback(value, source);\n              if ((isShallow = typeof result != 'undefined')) {\n                value = result;\n              }\n            }\n            if (!isShallow) {\n              value = isArr\n                ? (isArray(value) ? value : [])\n                : (isPlainObject(value) ? value : {});\n            }\n            // add `source` and associated `value` to the stack of traversed objects\n            stackA.push(source);\n            stackB.push(value);\n\n            // recursively merge objects and arrays (susceptible to call stack limits)\n            if (!isShallow) {\n              baseMerge(value, source, callback, stackA, stackB);\n            }\n          }\n        }\n        else {\n          if (callback) {\n            result = callback(value, source);\n            if (typeof result == 'undefined') {\n              result = source;\n            }\n          }\n          if (typeof result != 'undefined') {\n            value = result;\n          }\n        }\n        object[key] = value;\n      });\n    }\n\n    /**\n     * The base implementation of `_.random` without argument juggling or support\n     * for returning floating-point numbers.\n     *\n     * @private\n     * @param {number} min The minimum possible value.\n     * @param {number} max The maximum possible value.\n     * @returns {number} Returns a random number.\n     */\n    function baseRandom(min, max) {\n      return min + floor(nativeRandom() * (max - min + 1));\n    }\n\n    /**\n     * The base implementation of `_.uniq` without support for callback shorthands\n     * or `thisArg` binding.\n     *\n     * @private\n     * @param {Array} array The array to process.\n     * @param {boolean} [isSorted=false] A flag to indicate that `array` is sorted.\n     * @param {Function} [callback] The function called per iteration.\n     * @returns {Array} Returns a duplicate-value-free array.\n     */\n    function baseUniq(array, isSorted, callback) {\n      var index = -1,\n          indexOf = getIndexOf(),\n          length = array ? array.length : 0,\n          result = [];\n\n      var isLarge = !isSorted && length >= largeArraySize && indexOf === baseIndexOf,\n          seen = (callback || isLarge) ? getArray() : result;\n\n      if (isLarge) {\n        var cache = createCache(seen);\n        indexOf = cacheIndexOf;\n        seen = cache;\n      }\n      while (++index < length) {\n        var value = array[index],\n            computed = callback ? callback(value, index, array) : value;\n\n        if (isSorted\n              ? !index || seen[seen.length - 1] !== computed\n              : indexOf(seen, computed) < 0\n            ) {\n          if (callback || isLarge) {\n            seen.push(computed);\n          }\n          result.push(value);\n        }\n      }\n      if (isLarge) {\n        releaseArray(seen.array);\n        releaseObject(seen);\n      } else if (callback) {\n        releaseArray(seen);\n      }\n      return result;\n    }\n\n    /**\n     * Creates a function that aggregates a collection, creating an object composed\n     * of keys generated from the results of running each element of the collection\n     * through a callback. The given `setter` function sets the keys and values\n     * of the composed object.\n     *\n     * @private\n     * @param {Function} setter The setter function.\n     * @returns {Function} Returns the new aggregator function.\n     */\n    function createAggregator(setter) {\n      return function(collection, callback, thisArg) {\n        var result = {};\n        callback = lodash.createCallback(callback, thisArg, 3);\n\n        var index = -1,\n            length = collection ? collection.length : 0;\n\n        if (typeof length == 'number') {\n          while (++index < length) {\n            var value = collection[index];\n            setter(result, value, callback(value, index, collection), collection);\n          }\n        } else {\n          forOwn(collection, function(value, key, collection) {\n            setter(result, value, callback(value, key, collection), collection);\n          });\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Creates a function that, when called, either curries or invokes `func`\n     * with an optional `this` binding and partially applied arguments.\n     *\n     * @private\n     * @param {Function|string} func The function or method name to reference.\n     * @param {number} bitmask The bitmask of method flags to compose.\n     *  The bitmask may be composed of the following flags:\n     *  1 - `_.bind`\n     *  2 - `_.bindKey`\n     *  4 - `_.curry`\n     *  8 - `_.curry` (bound)\n     *  16 - `_.partial`\n     *  32 - `_.partialRight`\n     * @param {Array} [partialArgs] An array of arguments to prepend to those\n     *  provided to the new function.\n     * @param {Array} [partialRightArgs] An array of arguments to append to those\n     *  provided to the new function.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new function.\n     */\n    function createWrapper(func, bitmask, partialArgs, partialRightArgs, thisArg, arity) {\n      var isBind = bitmask & 1,\n          isBindKey = bitmask & 2,\n          isCurry = bitmask & 4,\n          isCurryBound = bitmask & 8,\n          isPartial = bitmask & 16,\n          isPartialRight = bitmask & 32;\n\n      if (!isBindKey && !isFunction(func)) {\n        throw new TypeError;\n      }\n      if (isPartial && !partialArgs.length) {\n        bitmask &= ~16;\n        isPartial = partialArgs = false;\n      }\n      if (isPartialRight && !partialRightArgs.length) {\n        bitmask &= ~32;\n        isPartialRight = partialRightArgs = false;\n      }\n      var bindData = func && func.__bindData__;\n      if (bindData && bindData !== true) {\n        // clone `bindData`\n        bindData = slice(bindData);\n        if (bindData[2]) {\n          bindData[2] = slice(bindData[2]);\n        }\n        if (bindData[3]) {\n          bindData[3] = slice(bindData[3]);\n        }\n        // set `thisBinding` is not previously bound\n        if (isBind && !(bindData[1] & 1)) {\n          bindData[4] = thisArg;\n        }\n        // set if previously bound but not currently (subsequent curried functions)\n        if (!isBind && bindData[1] & 1) {\n          bitmask |= 8;\n        }\n        // set curried arity if not yet set\n        if (isCurry && !(bindData[1] & 4)) {\n          bindData[5] = arity;\n        }\n        // append partial left arguments\n        if (isPartial) {\n          push.apply(bindData[2] || (bindData[2] = []), partialArgs);\n        }\n        // append partial right arguments\n        if (isPartialRight) {\n          unshift.apply(bindData[3] || (bindData[3] = []), partialRightArgs);\n        }\n        // merge flags\n        bindData[1] |= bitmask;\n        return createWrapper.apply(null, bindData);\n      }\n      // fast path for `_.bind`\n      var creater = (bitmask == 1 || bitmask === 17) ? baseBind : baseCreateWrapper;\n      return creater([func, bitmask, partialArgs, partialRightArgs, thisArg, arity]);\n    }\n\n    /**\n     * Used by `escape` to convert characters to HTML entities.\n     *\n     * @private\n     * @param {string} match The matched character to escape.\n     * @returns {string} Returns the escaped character.\n     */\n    function escapeHtmlChar(match) {\n      return htmlEscapes[match];\n    }\n\n    /**\n     * Gets the appropriate \"indexOf\" function. If the `_.indexOf` method is\n     * customized, this method returns the custom method, otherwise it returns\n     * the `baseIndexOf` function.\n     *\n     * @private\n     * @returns {Function} Returns the \"indexOf\" function.\n     */\n    function getIndexOf() {\n      var result = (result = lodash.indexOf) === indexOf ? baseIndexOf : result;\n      return result;\n    }\n\n    /**\n     * Checks if `value` is a native function.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if the `value` is a native function, else `false`.\n     */\n    function isNative(value) {\n      return typeof value == 'function' && reNative.test(value);\n    }\n\n    /**\n     * Sets `this` binding data on a given function.\n     *\n     * @private\n     * @param {Function} func The function to set data on.\n     * @param {Array} value The data array to set.\n     */\n    var setBindData = !defineProperty ? noop : function(func, value) {\n      descriptor.value = value;\n      defineProperty(func, '__bindData__', descriptor);\n    };\n\n    /**\n     * A fallback implementation of `isPlainObject` which checks if a given value\n     * is an object created by the `Object` constructor, assuming objects created\n     * by the `Object` constructor have no inherited enumerable properties and that\n     * there are no `Object.prototype` extensions.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n     */\n    function shimIsPlainObject(value) {\n      var ctor,\n          result;\n\n      // avoid non Object objects, `arguments` objects, and DOM elements\n      if (!(value && toString.call(value) == objectClass) ||\n          (ctor = value.constructor, isFunction(ctor) && !(ctor instanceof ctor))) {\n        return false;\n      }\n      // In most environments an object's own properties are iterated before\n      // its inherited properties. If the last iterated property is an object's\n      // own property then there are no inherited enumerable properties.\n      forIn(value, function(value, key) {\n        result = key;\n      });\n      return typeof result == 'undefined' || hasOwnProperty.call(value, result);\n    }\n\n    /**\n     * Used by `unescape` to convert HTML entities to characters.\n     *\n     * @private\n     * @param {string} match The matched character to unescape.\n     * @returns {string} Returns the unescaped character.\n     */\n    function unescapeHtmlChar(match) {\n      return htmlUnescapes[match];\n    }\n\n    /*--------------------------------------------------------------------------*/\n\n    /**\n     * Checks if `value` is an `arguments` object.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if the `value` is an `arguments` object, else `false`.\n     * @example\n     *\n     * (function() { return _.isArguments(arguments); })(1, 2, 3);\n     * // => true\n     *\n     * _.isArguments([1, 2, 3]);\n     * // => false\n     */\n    function isArguments(value) {\n      return value && typeof value == 'object' && typeof value.length == 'number' &&\n        toString.call(value) == argsClass || false;\n    }\n\n    /**\n     * Checks if `value` is an array.\n     *\n     * @static\n     * @memberOf _\n     * @type Function\n     * @category Objects\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if the `value` is an array, else `false`.\n     * @example\n     *\n     * (function() { return _.isArray(arguments); })();\n     * // => false\n     *\n     * _.isArray([1, 2, 3]);\n     * // => true\n     */\n    var isArray = nativeIsArray || function(value) {\n      return value && typeof value == 'object' && typeof value.length == 'number' &&\n        toString.call(value) == arrayClass || false;\n    };\n\n    /**\n     * A fallback implementation of `Object.keys` which produces an array of the\n     * given object's own enumerable property names.\n     *\n     * @private\n     * @type Function\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns an array of property names.\n     */\n    var shimKeys = function(object) {\n      var index, iterable = object, result = [];\n      if (!iterable) return result;\n      if (!(objectTypes[typeof object])) return result;\n        for (index in iterable) {\n          if (hasOwnProperty.call(iterable, index)) {\n            result.push(index);\n          }\n        }\n      return result\n    };\n\n    /**\n     * Creates an array composed of the own enumerable property names of an object.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns an array of property names.\n     * @example\n     *\n     * _.keys({ 'one': 1, 'two': 2, 'three': 3 });\n     * // => ['one', 'two', 'three'] (property order is not guaranteed across environments)\n     */\n    var keys = !nativeKeys ? shimKeys : function(object) {\n      if (!isObject(object)) {\n        return [];\n      }\n      return nativeKeys(object);\n    };\n\n    /**\n     * Used to convert characters to HTML entities:\n     *\n     * Though the `>` character is escaped for symmetry, characters like `>` and `/`\n     * don't require escaping in HTML and have no special meaning unless they're part\n     * of a tag or an unquoted attribute value.\n     * http://mathiasbynens.be/notes/ambiguous-ampersands (under \"semi-related fun fact\")\n     */\n    var htmlEscapes = {\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '\"': '&quot;',\n      \"'\": '&#39;'\n    };\n\n    /** Used to convert HTML entities to characters */\n    var htmlUnescapes = invert(htmlEscapes);\n\n    /** Used to match HTML entities and HTML characters */\n    var reEscapedHtml = RegExp('(' + keys(htmlUnescapes).join('|') + ')', 'g'),\n        reUnescapedHtml = RegExp('[' + keys(htmlEscapes).join('') + ']', 'g');\n\n    /*--------------------------------------------------------------------------*/\n\n    /**\n     * Assigns own enumerable properties of source object(s) to the destination\n     * object. Subsequent sources will overwrite property assignments of previous\n     * sources. If a callback is provided it will be executed to produce the\n     * assigned values. The callback is bound to `thisArg` and invoked with two\n     * arguments; (objectValue, sourceValue).\n     *\n     * @static\n     * @memberOf _\n     * @type Function\n     * @alias extend\n     * @category Objects\n     * @param {Object} object The destination object.\n     * @param {...Object} [source] The source objects.\n     * @param {Function} [callback] The function to customize assigning values.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Object} Returns the destination object.\n     * @example\n     *\n     * _.assign({ 'name': 'fred' }, { 'employer': 'slate' });\n     * // => { 'name': 'fred', 'employer': 'slate' }\n     *\n     * var defaults = _.partialRight(_.assign, function(a, b) {\n     *   return typeof a == 'undefined' ? b : a;\n     * });\n     *\n     * var object = { 'name': 'barney' };\n     * defaults(object, { 'name': 'fred', 'employer': 'slate' });\n     * // => { 'name': 'barney', 'employer': 'slate' }\n     */\n    var assign = function(object, source, guard) {\n      var index, iterable = object, result = iterable;\n      if (!iterable) return result;\n      var args = arguments,\n          argsIndex = 0,\n          argsLength = typeof guard == 'number' ? 2 : args.length;\n      if (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n        var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n      } else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n        callback = args[--argsLength];\n      }\n      while (++argsIndex < argsLength) {\n        iterable = args[argsIndex];\n        if (iterable && objectTypes[typeof iterable]) {\n        var ownIndex = -1,\n            ownProps = objectTypes[typeof iterable] && keys(iterable),\n            length = ownProps ? ownProps.length : 0;\n\n        while (++ownIndex < length) {\n          index = ownProps[ownIndex];\n          result[index] = callback ? callback(result[index], iterable[index]) : iterable[index];\n        }\n        }\n      }\n      return result\n    };\n\n    /**\n     * Creates a clone of `value`. If `isDeep` is `true` nested objects will also\n     * be cloned, otherwise they will be assigned by reference. If a callback\n     * is provided it will be executed to produce the cloned values. If the\n     * callback returns `undefined` cloning will be handled by the method instead.\n     * The callback is bound to `thisArg` and invoked with one argument; (value).\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {*} value The value to clone.\n     * @param {boolean} [isDeep=false] Specify a deep clone.\n     * @param {Function} [callback] The function to customize cloning values.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {*} Returns the cloned value.\n     * @example\n     *\n     * var characters = [\n     *   { 'name': 'barney', 'age': 36 },\n     *   { 'name': 'fred',   'age': 40 }\n     * ];\n     *\n     * var shallow = _.clone(characters);\n     * shallow[0] === characters[0];\n     * // => true\n     *\n     * var deep = _.clone(characters, true);\n     * deep[0] === characters[0];\n     * // => false\n     *\n     * _.mixin({\n     *   'clone': _.partialRight(_.clone, function(value) {\n     *     return _.isElement(value) ? value.cloneNode(false) : undefined;\n     *   })\n     * });\n     *\n     * var clone = _.clone(document.body);\n     * clone.childNodes.length;\n     * // => 0\n     */\n    function clone(value, isDeep, callback, thisArg) {\n      // allows working with \"Collections\" methods without using their `index`\n      // and `collection` arguments for `isDeep` and `callback`\n      if (typeof isDeep != 'boolean' && isDeep != null) {\n        thisArg = callback;\n        callback = isDeep;\n        isDeep = false;\n      }\n      return baseClone(value, isDeep, typeof callback == 'function' && baseCreateCallback(callback, thisArg, 1));\n    }\n\n    /**\n     * Creates a deep clone of `value`. If a callback is provided it will be\n     * executed to produce the cloned values. If the callback returns `undefined`\n     * cloning will be handled by the method instead. The callback is bound to\n     * `thisArg` and invoked with one argument; (value).\n     *\n     * Note: This method is loosely based on the structured clone algorithm. Functions\n     * and DOM nodes are **not** cloned. The enumerable properties of `arguments` objects and\n     * objects created by constructors other than `Object` are cloned to plain `Object` objects.\n     * See http://www.w3.org/TR/html5/infrastructure.html#internal-structured-cloning-algorithm.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {*} value The value to deep clone.\n     * @param {Function} [callback] The function to customize cloning values.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {*} Returns the deep cloned value.\n     * @example\n     *\n     * var characters = [\n     *   { 'name': 'barney', 'age': 36 },\n     *   { 'name': 'fred',   'age': 40 }\n     * ];\n     *\n     * var deep = _.cloneDeep(characters);\n     * deep[0] === characters[0];\n     * // => false\n     *\n     * var view = {\n     *   'label': 'docs',\n     *   'node': element\n     * };\n     *\n     * var clone = _.cloneDeep(view, function(value) {\n     *   return _.isElement(value) ? value.cloneNode(true) : undefined;\n     * });\n     *\n     * clone.node == view.node;\n     * // => false\n     */\n    function cloneDeep(value, callback, thisArg) {\n      return baseClone(value, true, typeof callback == 'function' && baseCreateCallback(callback, thisArg, 1));\n    }\n\n    /**\n     * Creates an object that inherits from the given `prototype` object. If a\n     * `properties` object is provided its own enumerable properties are assigned\n     * to the created object.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} prototype The object to inherit from.\n     * @param {Object} [properties] The properties to assign to the object.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * function Shape() {\n     *   this.x = 0;\n     *   this.y = 0;\n     * }\n     *\n     * function Circle() {\n     *   Shape.call(this);\n     * }\n     *\n     * Circle.prototype = _.create(Shape.prototype, { 'constructor': Circle });\n     *\n     * var circle = new Circle;\n     * circle instanceof Circle;\n     * // => true\n     *\n     * circle instanceof Shape;\n     * // => true\n     */\n    function create(prototype, properties) {\n      var result = baseCreate(prototype);\n      return properties ? assign(result, properties) : result;\n    }\n\n    /**\n     * Assigns own enumerable properties of source object(s) to the destination\n     * object for all destination properties that resolve to `undefined`. Once a\n     * property is set, additional defaults of the same property will be ignored.\n     *\n     * @static\n     * @memberOf _\n     * @type Function\n     * @category Objects\n     * @param {Object} object The destination object.\n     * @param {...Object} [source] The source objects.\n     * @param- {Object} [guard] Allows working with `_.reduce` without using its\n     *  `key` and `object` arguments as sources.\n     * @returns {Object} Returns the destination object.\n     * @example\n     *\n     * var object = { 'name': 'barney' };\n     * _.defaults(object, { 'name': 'fred', 'employer': 'slate' });\n     * // => { 'name': 'barney', 'employer': 'slate' }\n     */\n    var defaults = function(object, source, guard) {\n      var index, iterable = object, result = iterable;\n      if (!iterable) return result;\n      var args = arguments,\n          argsIndex = 0,\n          argsLength = typeof guard == 'number' ? 2 : args.length;\n      while (++argsIndex < argsLength) {\n        iterable = args[argsIndex];\n        if (iterable && objectTypes[typeof iterable]) {\n        var ownIndex = -1,\n            ownProps = objectTypes[typeof iterable] && keys(iterable),\n            length = ownProps ? ownProps.length : 0;\n\n        while (++ownIndex < length) {\n          index = ownProps[ownIndex];\n          if (typeof result[index] == 'undefined') result[index] = iterable[index];\n        }\n        }\n      }\n      return result\n    };\n\n    /**\n     * This method is like `_.findIndex` except that it returns the key of the\n     * first element that passes the callback check, instead of the element itself.\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The object to search.\n     * @param {Function|Object|string} [callback=identity] The function called per\n     *  iteration. If a property name or object is provided it will be used to\n     *  create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {string|undefined} Returns the key of the found element, else `undefined`.\n     * @example\n     *\n     * var characters = {\n     *   'barney': {  'age': 36, 'blocked': false },\n     *   'fred': {    'age': 40, 'blocked': true },\n     *   'pebbles': { 'age': 1,  'blocked': false }\n     * };\n     *\n     * _.findKey(characters, function(chr) {\n     *   return chr.age < 40;\n     * });\n     * // => 'barney' (property order is not guaranteed across environments)\n     *\n     * // using \"_.where\" callback shorthand\n     * _.findKey(characters, { 'age': 1 });\n     * // => 'pebbles'\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.findKey(characters, 'blocked');\n     * // => 'fred'\n     */\n    function findKey(object, callback, thisArg) {\n      var result;\n      callback = lodash.createCallback(callback, thisArg, 3);\n      forOwn(object, function(value, key, object) {\n        if (callback(value, key, object)) {\n          result = key;\n          return false;\n        }\n      });\n      return result;\n    }\n\n    /**\n     * This method is like `_.findKey` except that it iterates over elements\n     * of a `collection` in the opposite order.\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The object to search.\n     * @param {Function|Object|string} [callback=identity] The function called per\n     *  iteration. If a property name or object is provided it will be used to\n     *  create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {string|undefined} Returns the key of the found element, else `undefined`.\n     * @example\n     *\n     * var characters = {\n     *   'barney': {  'age': 36, 'blocked': true },\n     *   'fred': {    'age': 40, 'blocked': false },\n     *   'pebbles': { 'age': 1,  'blocked': true }\n     * };\n     *\n     * _.findLastKey(characters, function(chr) {\n     *   return chr.age < 40;\n     * });\n     * // => returns `pebbles`, assuming `_.findKey` returns `barney`\n     *\n     * // using \"_.where\" callback shorthand\n     * _.findLastKey(characters, { 'age': 40 });\n     * // => 'fred'\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.findLastKey(characters, 'blocked');\n     * // => 'pebbles'\n     */\n    function findLastKey(object, callback, thisArg) {\n      var result;\n      callback = lodash.createCallback(callback, thisArg, 3);\n      forOwnRight(object, function(value, key, object) {\n        if (callback(value, key, object)) {\n          result = key;\n          return false;\n        }\n      });\n      return result;\n    }\n\n    /**\n     * Iterates over own and inherited enumerable properties of an object,\n     * executing the callback for each property. The callback is bound to `thisArg`\n     * and invoked with three arguments; (value, key, object). Callbacks may exit\n     * iteration early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @type Function\n     * @category Objects\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [callback=identity] The function called per iteration.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * function Shape() {\n     *   this.x = 0;\n     *   this.y = 0;\n     * }\n     *\n     * Shape.prototype.move = function(x, y) {\n     *   this.x += x;\n     *   this.y += y;\n     * };\n     *\n     * _.forIn(new Shape, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => logs 'x', 'y', and 'move' (property order is not guaranteed across environments)\n     */\n    var forIn = function(collection, callback, thisArg) {\n      var index, iterable = collection, result = iterable;\n      if (!iterable) return result;\n      if (!objectTypes[typeof iterable]) return result;\n      callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3);\n        for (index in iterable) {\n          if (callback(iterable[index], index, collection) === false) return result;\n        }\n      return result\n    };\n\n    /**\n     * This method is like `_.forIn` except that it iterates over elements\n     * of a `collection` in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [callback=identity] The function called per iteration.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * function Shape() {\n     *   this.x = 0;\n     *   this.y = 0;\n     * }\n     *\n     * Shape.prototype.move = function(x, y) {\n     *   this.x += x;\n     *   this.y += y;\n     * };\n     *\n     * _.forInRight(new Shape, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => logs 'move', 'y', and 'x' assuming `_.forIn ` logs 'x', 'y', and 'move'\n     */\n    function forInRight(object, callback, thisArg) {\n      var pairs = [];\n\n      forIn(object, function(value, key) {\n        pairs.push(key, value);\n      });\n\n      var length = pairs.length;\n      callback = baseCreateCallback(callback, thisArg, 3);\n      while (length--) {\n        if (callback(pairs[length--], pairs[length], object) === false) {\n          break;\n        }\n      }\n      return object;\n    }\n\n    /**\n     * Iterates over own enumerable properties of an object, executing the callback\n     * for each property. The callback is bound to `thisArg` and invoked with three\n     * arguments; (value, key, object). Callbacks may exit iteration early by\n     * explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @type Function\n     * @category Objects\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [callback=identity] The function called per iteration.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * _.forOwn({ '0': 'zero', '1': 'one', 'length': 2 }, function(num, key) {\n     *   console.log(key);\n     * });\n     * // => logs '0', '1', and 'length' (property order is not guaranteed across environments)\n     */\n    var forOwn = function(collection, callback, thisArg) {\n      var index, iterable = collection, result = iterable;\n      if (!iterable) return result;\n      if (!objectTypes[typeof iterable]) return result;\n      callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3);\n        var ownIndex = -1,\n            ownProps = objectTypes[typeof iterable] && keys(iterable),\n            length = ownProps ? ownProps.length : 0;\n\n        while (++ownIndex < length) {\n          index = ownProps[ownIndex];\n          if (callback(iterable[index], index, collection) === false) return result;\n        }\n      return result\n    };\n\n    /**\n     * This method is like `_.forOwn` except that it iterates over elements\n     * of a `collection` in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [callback=identity] The function called per iteration.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * _.forOwnRight({ '0': 'zero', '1': 'one', 'length': 2 }, function(num, key) {\n     *   console.log(key);\n     * });\n     * // => logs 'length', '1', and '0' assuming `_.forOwn` logs '0', '1', and 'length'\n     */\n    function forOwnRight(object, callback, thisArg) {\n      var props = keys(object),\n          length = props.length;\n\n      callback = baseCreateCallback(callback, thisArg, 3);\n      while (length--) {\n        var key = props[length];\n        if (callback(object[key], key, object) === false) {\n          break;\n        }\n      }\n      return object;\n    }\n\n    /**\n     * Creates a sorted array of property names of all enumerable properties,\n     * own and inherited, of `object` that have function values.\n     *\n     * @static\n     * @memberOf _\n     * @alias methods\n     * @category Objects\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns an array of property names that have function values.\n     * @example\n     *\n     * _.functions(_);\n     * // => ['all', 'any', 'bind', 'bindAll', 'clone', 'compact', 'compose', ...]\n     */\n    function functions(object) {\n      var result = [];\n      forIn(object, function(value, key) {\n        if (isFunction(value)) {\n          result.push(key);\n        }\n      });\n      return result.sort();\n    }\n\n    /**\n     * Checks if the specified property name exists as a direct property of `object`,\n     * instead of an inherited property.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The object to inspect.\n     * @param {string} key The name of the property to check.\n     * @returns {boolean} Returns `true` if key is a direct property, else `false`.\n     * @example\n     *\n     * _.has({ 'a': 1, 'b': 2, 'c': 3 }, 'b');\n     * // => true\n     */\n    function has(object, key) {\n      return object ? hasOwnProperty.call(object, key) : false;\n    }\n\n    /**\n     * Creates an object composed of the inverted keys and values of the given object.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The object to invert.\n     * @returns {Object} Returns the created inverted object.\n     * @example\n     *\n     * _.invert({ 'first': 'fred', 'second': 'barney' });\n     * // => { 'fred': 'first', 'barney': 'second' }\n     */\n    function invert(object) {\n      var index = -1,\n          props = keys(object),\n          length = props.length,\n          result = {};\n\n      while (++index < length) {\n        var key = props[index];\n        result[object[key]] = key;\n      }\n      return result;\n    }\n\n    /**\n     * Checks if `value` is a boolean value.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if the `value` is a boolean value, else `false`.\n     * @example\n     *\n     * _.isBoolean(null);\n     * // => false\n     */\n    function isBoolean(value) {\n      return value === true || value === false ||\n        value && typeof value == 'object' && toString.call(value) == boolClass || false;\n    }\n\n    /**\n     * Checks if `value` is a date.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if the `value` is a date, else `false`.\n     * @example\n     *\n     * _.isDate(new Date);\n     * // => true\n     */\n    function isDate(value) {\n      return value && typeof value == 'object' && toString.call(value) == dateClass || false;\n    }\n\n    /**\n     * Checks if `value` is a DOM element.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if the `value` is a DOM element, else `false`.\n     * @example\n     *\n     * _.isElement(document.body);\n     * // => true\n     */\n    function isElement(value) {\n      return value && value.nodeType === 1 || false;\n    }\n\n    /**\n     * Checks if `value` is empty. Arrays, strings, or `arguments` objects with a\n     * length of `0` and objects with no own enumerable properties are considered\n     * \"empty\".\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Array|Object|string} value The value to inspect.\n     * @returns {boolean} Returns `true` if the `value` is empty, else `false`.\n     * @example\n     *\n     * _.isEmpty([1, 2, 3]);\n     * // => false\n     *\n     * _.isEmpty({});\n     * // => true\n     *\n     * _.isEmpty('');\n     * // => true\n     */\n    function isEmpty(value) {\n      var result = true;\n      if (!value) {\n        return result;\n      }\n      var className = toString.call(value),\n          length = value.length;\n\n      if ((className == arrayClass || className == stringClass || className == argsClass ) ||\n          (className == objectClass && typeof length == 'number' && isFunction(value.splice))) {\n        return !length;\n      }\n      forOwn(value, function() {\n        return (result = false);\n      });\n      return result;\n    }\n\n    /**\n     * Performs a deep comparison between two values to determine if they are\n     * equivalent to each other. If a callback is provided it will be executed\n     * to compare values. If the callback returns `undefined` comparisons will\n     * be handled by the method instead. The callback is bound to `thisArg` and\n     * invoked with two arguments; (a, b).\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {*} a The value to compare.\n     * @param {*} b The other value to compare.\n     * @param {Function} [callback] The function to customize comparing values.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     * @example\n     *\n     * var object = { 'name': 'fred' };\n     * var copy = { 'name': 'fred' };\n     *\n     * object == copy;\n     * // => false\n     *\n     * _.isEqual(object, copy);\n     * // => true\n     *\n     * var words = ['hello', 'goodbye'];\n     * var otherWords = ['hi', 'goodbye'];\n     *\n     * _.isEqual(words, otherWords, function(a, b) {\n     *   var reGreet = /^(?:hello|hi)$/i,\n     *       aGreet = _.isString(a) && reGreet.test(a),\n     *       bGreet = _.isString(b) && reGreet.test(b);\n     *\n     *   return (aGreet || bGreet) ? (aGreet == bGreet) : undefined;\n     * });\n     * // => true\n     */\n    function isEqual(a, b, callback, thisArg) {\n      return baseIsEqual(a, b, typeof callback == 'function' && baseCreateCallback(callback, thisArg, 2));\n    }\n\n    /**\n     * Checks if `value` is, or can be coerced to, a finite number.\n     *\n     * Note: This is not the same as native `isFinite` which will return true for\n     * booleans and empty strings. See http://es5.github.io/#x15.1.2.5.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if the `value` is finite, else `false`.\n     * @example\n     *\n     * _.isFinite(-101);\n     * // => true\n     *\n     * _.isFinite('10');\n     * // => true\n     *\n     * _.isFinite(true);\n     * // => false\n     *\n     * _.isFinite('');\n     * // => false\n     *\n     * _.isFinite(Infinity);\n     * // => false\n     */\n    function isFinite(value) {\n      return nativeIsFinite(value) && !nativeIsNaN(parseFloat(value));\n    }\n\n    /**\n     * Checks if `value` is a function.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if the `value` is a function, else `false`.\n     * @example\n     *\n     * _.isFunction(_);\n     * // => true\n     */\n    function isFunction(value) {\n      return typeof value == 'function';\n    }\n\n    /**\n     * Checks if `value` is the language type of Object.\n     * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if the `value` is an object, else `false`.\n     * @example\n     *\n     * _.isObject({});\n     * // => true\n     *\n     * _.isObject([1, 2, 3]);\n     * // => true\n     *\n     * _.isObject(1);\n     * // => false\n     */\n    function isObject(value) {\n      // check if the value is the ECMAScript language type of Object\n      // http://es5.github.io/#x8\n      // and avoid a V8 bug\n      // http://code.google.com/p/v8/issues/detail?id=2291\n      return !!(value && objectTypes[typeof value]);\n    }\n\n    /**\n     * Checks if `value` is `NaN`.\n     *\n     * Note: This is not the same as native `isNaN` which will return `true` for\n     * `undefined` and other non-numeric values. See http://es5.github.io/#x15.1.2.4.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if the `value` is `NaN`, else `false`.\n     * @example\n     *\n     * _.isNaN(NaN);\n     * // => true\n     *\n     * _.isNaN(new Number(NaN));\n     * // => true\n     *\n     * isNaN(undefined);\n     * // => true\n     *\n     * _.isNaN(undefined);\n     * // => false\n     */\n    function isNaN(value) {\n      // `NaN` as a primitive is the only value that is not equal to itself\n      // (perform the [[Class]] check first to avoid errors with some host objects in IE)\n      return isNumber(value) && value != +value;\n    }\n\n    /**\n     * Checks if `value` is `null`.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if the `value` is `null`, else `false`.\n     * @example\n     *\n     * _.isNull(null);\n     * // => true\n     *\n     * _.isNull(undefined);\n     * // => false\n     */\n    function isNull(value) {\n      return value === null;\n    }\n\n    /**\n     * Checks if `value` is a number.\n     *\n     * Note: `NaN` is considered a number. See http://es5.github.io/#x8.5.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if the `value` is a number, else `false`.\n     * @example\n     *\n     * _.isNumber(8.4 * 5);\n     * // => true\n     */\n    function isNumber(value) {\n      return typeof value == 'number' ||\n        value && typeof value == 'object' && toString.call(value) == numberClass || false;\n    }\n\n    /**\n     * Checks if `value` is an object created by the `Object` constructor.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n     * @example\n     *\n     * function Shape() {\n     *   this.x = 0;\n     *   this.y = 0;\n     * }\n     *\n     * _.isPlainObject(new Shape);\n     * // => false\n     *\n     * _.isPlainObject([1, 2, 3]);\n     * // => false\n     *\n     * _.isPlainObject({ 'x': 0, 'y': 0 });\n     * // => true\n     */\n    var isPlainObject = !getPrototypeOf ? shimIsPlainObject : function(value) {\n      if (!(value && toString.call(value) == objectClass)) {\n        return false;\n      }\n      var valueOf = value.valueOf,\n          objProto = isNative(valueOf) && (objProto = getPrototypeOf(valueOf)) && getPrototypeOf(objProto);\n\n      return objProto\n        ? (value == objProto || getPrototypeOf(value) == objProto)\n        : shimIsPlainObject(value);\n    };\n\n    /**\n     * Checks if `value` is a regular expression.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if the `value` is a regular expression, else `false`.\n     * @example\n     *\n     * _.isRegExp(/fred/);\n     * // => true\n     */\n    function isRegExp(value) {\n      return value && typeof value == 'object' && toString.call(value) == regexpClass || false;\n    }\n\n    /**\n     * Checks if `value` is a string.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if the `value` is a string, else `false`.\n     * @example\n     *\n     * _.isString('fred');\n     * // => true\n     */\n    function isString(value) {\n      return typeof value == 'string' ||\n        value && typeof value == 'object' && toString.call(value) == stringClass || false;\n    }\n\n    /**\n     * Checks if `value` is `undefined`.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if the `value` is `undefined`, else `false`.\n     * @example\n     *\n     * _.isUndefined(void 0);\n     * // => true\n     */\n    function isUndefined(value) {\n      return typeof value == 'undefined';\n    }\n\n    /**\n     * Creates an object with the same keys as `object` and values generated by\n     * running each own enumerable property of `object` through the callback.\n     * The callback is bound to `thisArg` and invoked with three arguments;\n     * (value, key, object).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The object to iterate over.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Array} Returns a new object with values of the results of each `callback` execution.\n     * @example\n     *\n     * _.mapValues({ 'a': 1, 'b': 2, 'c': 3} , function(num) { return num * 3; });\n     * // => { 'a': 3, 'b': 6, 'c': 9 }\n     *\n     * var characters = {\n     *   'fred': { 'name': 'fred', 'age': 40 },\n     *   'pebbles': { 'name': 'pebbles', 'age': 1 }\n     * };\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.mapValues(characters, 'age');\n     * // => { 'fred': 40, 'pebbles': 1 }\n     */\n    function mapValues(object, callback, thisArg) {\n      var result = {};\n      callback = lodash.createCallback(callback, thisArg, 3);\n\n      forOwn(object, function(value, key, object) {\n        result[key] = callback(value, key, object);\n      });\n      return result;\n    }\n\n    /**\n     * Recursively merges own enumerable properties of the source object(s), that\n     * don't resolve to `undefined` into the destination object. Subsequent sources\n     * will overwrite property assignments of previous sources. If a callback is\n     * provided it will be executed to produce the merged values of the destination\n     * and source properties. If the callback returns `undefined` merging will\n     * be handled by the method instead. The callback is bound to `thisArg` and\n     * invoked with two arguments; (objectValue, sourceValue).\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The destination object.\n     * @param {...Object} [source] The source objects.\n     * @param {Function} [callback] The function to customize merging properties.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Object} Returns the destination object.\n     * @example\n     *\n     * var names = {\n     *   'characters': [\n     *     { 'name': 'barney' },\n     *     { 'name': 'fred' }\n     *   ]\n     * };\n     *\n     * var ages = {\n     *   'characters': [\n     *     { 'age': 36 },\n     *     { 'age': 40 }\n     *   ]\n     * };\n     *\n     * _.merge(names, ages);\n     * // => { 'characters': [{ 'name': 'barney', 'age': 36 }, { 'name': 'fred', 'age': 40 }] }\n     *\n     * var food = {\n     *   'fruits': ['apple'],\n     *   'vegetables': ['beet']\n     * };\n     *\n     * var otherFood = {\n     *   'fruits': ['banana'],\n     *   'vegetables': ['carrot']\n     * };\n     *\n     * _.merge(food, otherFood, function(a, b) {\n     *   return _.isArray(a) ? a.concat(b) : undefined;\n     * });\n     * // => { 'fruits': ['apple', 'banana'], 'vegetables': ['beet', 'carrot] }\n     */\n    function merge(object) {\n      var args = arguments,\n          length = 2;\n\n      if (!isObject(object)) {\n        return object;\n      }\n      // allows working with `_.reduce` and `_.reduceRight` without using\n      // their `index` and `collection` arguments\n      if (typeof args[2] != 'number') {\n        length = args.length;\n      }\n      if (length > 3 && typeof args[length - 2] == 'function') {\n        var callback = baseCreateCallback(args[--length - 1], args[length--], 2);\n      } else if (length > 2 && typeof args[length - 1] == 'function') {\n        callback = args[--length];\n      }\n      var sources = slice(arguments, 1, length),\n          index = -1,\n          stackA = getArray(),\n          stackB = getArray();\n\n      while (++index < length) {\n        baseMerge(object, sources[index], callback, stackA, stackB);\n      }\n      releaseArray(stackA);\n      releaseArray(stackB);\n      return object;\n    }\n\n    /**\n     * Creates a shallow clone of `object` excluding the specified properties.\n     * Property names may be specified as individual arguments or as arrays of\n     * property names. If a callback is provided it will be executed for each\n     * property of `object` omitting the properties the callback returns truey\n     * for. The callback is bound to `thisArg` and invoked with three arguments;\n     * (value, key, object).\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The source object.\n     * @param {Function|...string|string[]} [callback] The properties to omit or the\n     *  function called per iteration.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Object} Returns an object without the omitted properties.\n     * @example\n     *\n     * _.omit({ 'name': 'fred', 'age': 40 }, 'age');\n     * // => { 'name': 'fred' }\n     *\n     * _.omit({ 'name': 'fred', 'age': 40 }, function(value) {\n     *   return typeof value == 'number';\n     * });\n     * // => { 'name': 'fred' }\n     */\n    function omit(object, callback, thisArg) {\n      var result = {};\n      if (typeof callback != 'function') {\n        var props = [];\n        forIn(object, function(value, key) {\n          props.push(key);\n        });\n        props = baseDifference(props, baseFlatten(arguments, true, false, 1));\n\n        var index = -1,\n            length = props.length;\n\n        while (++index < length) {\n          var key = props[index];\n          result[key] = object[key];\n        }\n      } else {\n        callback = lodash.createCallback(callback, thisArg, 3);\n        forIn(object, function(value, key, object) {\n          if (!callback(value, key, object)) {\n            result[key] = value;\n          }\n        });\n      }\n      return result;\n    }\n\n    /**\n     * Creates a two dimensional array of an object's key-value pairs,\n     * i.e. `[[key1, value1], [key2, value2]]`.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns new array of key-value pairs.\n     * @example\n     *\n     * _.pairs({ 'barney': 36, 'fred': 40 });\n     * // => [['barney', 36], ['fred', 40]] (property order is not guaranteed across environments)\n     */\n    function pairs(object) {\n      var index = -1,\n          props = keys(object),\n          length = props.length,\n          result = Array(length);\n\n      while (++index < length) {\n        var key = props[index];\n        result[index] = [key, object[key]];\n      }\n      return result;\n    }\n\n    /**\n     * Creates a shallow clone of `object` composed of the specified properties.\n     * Property names may be specified as individual arguments or as arrays of\n     * property names. If a callback is provided it will be executed for each\n     * property of `object` picking the properties the callback returns truey\n     * for. The callback is bound to `thisArg` and invoked with three arguments;\n     * (value, key, object).\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The source object.\n     * @param {Function|...string|string[]} [callback] The function called per\n     *  iteration or property names to pick, specified as individual property\n     *  names or arrays of property names.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Object} Returns an object composed of the picked properties.\n     * @example\n     *\n     * _.pick({ 'name': 'fred', '_userid': 'fred1' }, 'name');\n     * // => { 'name': 'fred' }\n     *\n     * _.pick({ 'name': 'fred', '_userid': 'fred1' }, function(value, key) {\n     *   return key.charAt(0) != '_';\n     * });\n     * // => { 'name': 'fred' }\n     */\n    function pick(object, callback, thisArg) {\n      var result = {};\n      if (typeof callback != 'function') {\n        var index = -1,\n            props = baseFlatten(arguments, true, false, 1),\n            length = isObject(object) ? props.length : 0;\n\n        while (++index < length) {\n          var key = props[index];\n          if (key in object) {\n            result[key] = object[key];\n          }\n        }\n      } else {\n        callback = lodash.createCallback(callback, thisArg, 3);\n        forIn(object, function(value, key, object) {\n          if (callback(value, key, object)) {\n            result[key] = value;\n          }\n        });\n      }\n      return result;\n    }\n\n    /**\n     * An alternative to `_.reduce` this method transforms `object` to a new\n     * `accumulator` object which is the result of running each of its own\n     * enumerable properties through a callback, with each callback execution\n     * potentially mutating the `accumulator` object. The callback is bound to\n     * `thisArg` and invoked with four arguments; (accumulator, value, key, object).\n     * Callbacks may exit iteration early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Array|Object} object The object to iterate over.\n     * @param {Function} [callback=identity] The function called per iteration.\n     * @param {*} [accumulator] The custom accumulator value.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {*} Returns the accumulated value.\n     * @example\n     *\n     * var squares = _.transform([1, 2, 3, 4, 5, 6, 7, 8, 9, 10], function(result, num) {\n     *   num *= num;\n     *   if (num % 2) {\n     *     return result.push(num) < 3;\n     *   }\n     * });\n     * // => [1, 9, 25]\n     *\n     * var mapped = _.transform({ 'a': 1, 'b': 2, 'c': 3 }, function(result, num, key) {\n     *   result[key] = num * 3;\n     * });\n     * // => { 'a': 3, 'b': 6, 'c': 9 }\n     */\n    function transform(object, callback, accumulator, thisArg) {\n      var isArr = isArray(object);\n      if (accumulator == null) {\n        if (isArr) {\n          accumulator = [];\n        } else {\n          var ctor = object && object.constructor,\n              proto = ctor && ctor.prototype;\n\n          accumulator = baseCreate(proto);\n        }\n      }\n      if (callback) {\n        callback = lodash.createCallback(callback, thisArg, 4);\n        (isArr ? forEach : forOwn)(object, function(value, index, object) {\n          return callback(accumulator, value, index, object);\n        });\n      }\n      return accumulator;\n    }\n\n    /**\n     * Creates an array composed of the own enumerable property values of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @category Objects\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns an array of property values.\n     * @example\n     *\n     * _.values({ 'one': 1, 'two': 2, 'three': 3 });\n     * // => [1, 2, 3] (property order is not guaranteed across environments)\n     */\n    function values(object) {\n      var index = -1,\n          props = keys(object),\n          length = props.length,\n          result = Array(length);\n\n      while (++index < length) {\n        result[index] = object[props[index]];\n      }\n      return result;\n    }\n\n    /*--------------------------------------------------------------------------*/\n\n    /**\n     * Creates an array of elements from the specified indexes, or keys, of the\n     * `collection`. Indexes may be specified as individual arguments or as arrays\n     * of indexes.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {...(number|number[]|string|string[])} [index] The indexes of `collection`\n     *   to retrieve, specified as individual indexes or arrays of indexes.\n     * @returns {Array} Returns a new array of elements corresponding to the\n     *  provided indexes.\n     * @example\n     *\n     * _.at(['a', 'b', 'c', 'd', 'e'], [0, 2, 4]);\n     * // => ['a', 'c', 'e']\n     *\n     * _.at(['fred', 'barney', 'pebbles'], 0, 2);\n     * // => ['fred', 'pebbles']\n     */\n    function at(collection) {\n      var args = arguments,\n          index = -1,\n          props = baseFlatten(args, true, false, 1),\n          length = (args[2] && args[2][args[1]] === collection) ? 1 : props.length,\n          result = Array(length);\n\n      while(++index < length) {\n        result[index] = collection[props[index]];\n      }\n      return result;\n    }\n\n    /**\n     * Checks if a given value is present in a collection using strict equality\n     * for comparisons, i.e. `===`. If `fromIndex` is negative, it is used as the\n     * offset from the end of the collection.\n     *\n     * @static\n     * @memberOf _\n     * @alias include\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {*} target The value to check for.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @returns {boolean} Returns `true` if the `target` element is found, else `false`.\n     * @example\n     *\n     * _.contains([1, 2, 3], 1);\n     * // => true\n     *\n     * _.contains([1, 2, 3], 1, 2);\n     * // => false\n     *\n     * _.contains({ 'name': 'fred', 'age': 40 }, 'fred');\n     * // => true\n     *\n     * _.contains('pebbles', 'eb');\n     * // => true\n     */\n    function contains(collection, target, fromIndex) {\n      var index = -1,\n          indexOf = getIndexOf(),\n          length = collection ? collection.length : 0,\n          result = false;\n\n      fromIndex = (fromIndex < 0 ? nativeMax(0, length + fromIndex) : fromIndex) || 0;\n      if (isArray(collection)) {\n        result = indexOf(collection, target, fromIndex) > -1;\n      } else if (typeof length == 'number') {\n        result = (isString(collection) ? collection.indexOf(target, fromIndex) : indexOf(collection, target, fromIndex)) > -1;\n      } else {\n        forOwn(collection, function(value) {\n          if (++index >= fromIndex) {\n            return !(result = value === target);\n          }\n        });\n      }\n      return result;\n    }\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` through the callback. The corresponding value\n     * of each key is the number of times the key was returned by the callback.\n     * The callback is bound to `thisArg` and invoked with three arguments;\n     * (value, index|key, collection).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * _.countBy([4.3, 6.1, 6.4], function(num) { return Math.floor(num); });\n     * // => { '4': 1, '6': 2 }\n     *\n     * _.countBy([4.3, 6.1, 6.4], function(num) { return this.floor(num); }, Math);\n     * // => { '4': 1, '6': 2 }\n     *\n     * _.countBy(['one', 'two', 'three'], 'length');\n     * // => { '3': 2, '5': 1 }\n     */\n    var countBy = createAggregator(function(result, value, key) {\n      (hasOwnProperty.call(result, key) ? result[key]++ : result[key] = 1);\n    });\n\n    /**\n     * Checks if the given callback returns truey value for **all** elements of\n     * a collection. The callback is bound to `thisArg` and invoked with three\n     * arguments; (value, index|key, collection).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias all\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {boolean} Returns `true` if all elements passed the callback check,\n     *  else `false`.\n     * @example\n     *\n     * _.every([true, 1, null, 'yes']);\n     * // => false\n     *\n     * var characters = [\n     *   { 'name': 'barney', 'age': 36 },\n     *   { 'name': 'fred',   'age': 40 }\n     * ];\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.every(characters, 'age');\n     * // => true\n     *\n     * // using \"_.where\" callback shorthand\n     * _.every(characters, { 'age': 36 });\n     * // => false\n     */\n    function every(collection, callback, thisArg) {\n      var result = true;\n      callback = lodash.createCallback(callback, thisArg, 3);\n\n      var index = -1,\n          length = collection ? collection.length : 0;\n\n      if (typeof length == 'number') {\n        while (++index < length) {\n          if (!(result = !!callback(collection[index], index, collection))) {\n            break;\n          }\n        }\n      } else {\n        forOwn(collection, function(value, index, collection) {\n          return (result = !!callback(value, index, collection));\n        });\n      }\n      return result;\n    }\n\n    /**\n     * Iterates over elements of a collection, returning an array of all elements\n     * the callback returns truey for. The callback is bound to `thisArg` and\n     * invoked with three arguments; (value, index|key, collection).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias select\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Array} Returns a new array of elements that passed the callback check.\n     * @example\n     *\n     * var evens = _.filter([1, 2, 3, 4, 5, 6], function(num) { return num % 2 == 0; });\n     * // => [2, 4, 6]\n     *\n     * var characters = [\n     *   { 'name': 'barney', 'age': 36, 'blocked': false },\n     *   { 'name': 'fred',   'age': 40, 'blocked': true }\n     * ];\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.filter(characters, 'blocked');\n     * // => [{ 'name': 'fred', 'age': 40, 'blocked': true }]\n     *\n     * // using \"_.where\" callback shorthand\n     * _.filter(characters, { 'age': 36 });\n     * // => [{ 'name': 'barney', 'age': 36, 'blocked': false }]\n     */\n    function filter(collection, callback, thisArg) {\n      var result = [];\n      callback = lodash.createCallback(callback, thisArg, 3);\n\n      var index = -1,\n          length = collection ? collection.length : 0;\n\n      if (typeof length == 'number') {\n        while (++index < length) {\n          var value = collection[index];\n          if (callback(value, index, collection)) {\n            result.push(value);\n          }\n        }\n      } else {\n        forOwn(collection, function(value, index, collection) {\n          if (callback(value, index, collection)) {\n            result.push(value);\n          }\n        });\n      }\n      return result;\n    }\n\n    /**\n     * Iterates over elements of a collection, returning the first element that\n     * the callback returns truey for. The callback is bound to `thisArg` and\n     * invoked with three arguments; (value, index|key, collection).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias detect, findWhere\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {*} Returns the found element, else `undefined`.\n     * @example\n     *\n     * var characters = [\n     *   { 'name': 'barney',  'age': 36, 'blocked': false },\n     *   { 'name': 'fred',    'age': 40, 'blocked': true },\n     *   { 'name': 'pebbles', 'age': 1,  'blocked': false }\n     * ];\n     *\n     * _.find(characters, function(chr) {\n     *   return chr.age < 40;\n     * });\n     * // => { 'name': 'barney', 'age': 36, 'blocked': false }\n     *\n     * // using \"_.where\" callback shorthand\n     * _.find(characters, { 'age': 1 });\n     * // =>  { 'name': 'pebbles', 'age': 1, 'blocked': false }\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.find(characters, 'blocked');\n     * // => { 'name': 'fred', 'age': 40, 'blocked': true }\n     */\n    function find(collection, callback, thisArg) {\n      callback = lodash.createCallback(callback, thisArg, 3);\n\n      var index = -1,\n          length = collection ? collection.length : 0;\n\n      if (typeof length == 'number') {\n        while (++index < length) {\n          var value = collection[index];\n          if (callback(value, index, collection)) {\n            return value;\n          }\n        }\n      } else {\n        var result;\n        forOwn(collection, function(value, index, collection) {\n          if (callback(value, index, collection)) {\n            result = value;\n            return false;\n          }\n        });\n        return result;\n      }\n    }\n\n    /**\n     * This method is like `_.find` except that it iterates over elements\n     * of a `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {*} Returns the found element, else `undefined`.\n     * @example\n     *\n     * _.findLast([1, 2, 3, 4], function(num) {\n     *   return num % 2 == 1;\n     * });\n     * // => 3\n     */\n    function findLast(collection, callback, thisArg) {\n      var result;\n      callback = lodash.createCallback(callback, thisArg, 3);\n      forEachRight(collection, function(value, index, collection) {\n        if (callback(value, index, collection)) {\n          result = value;\n          return false;\n        }\n      });\n      return result;\n    }\n\n    /**\n     * Iterates over elements of a collection, executing the callback for each\n     * element. The callback is bound to `thisArg` and invoked with three arguments;\n     * (value, index|key, collection). Callbacks may exit iteration early by\n     * explicitly returning `false`.\n     *\n     * Note: As with other \"Collections\" methods, objects with a `length` property\n     * are iterated like arrays. To avoid this behavior `_.forIn` or `_.forOwn`\n     * may be used for object iteration.\n     *\n     * @static\n     * @memberOf _\n     * @alias each\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function} [callback=identity] The function called per iteration.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Array|Object|string} Returns `collection`.\n     * @example\n     *\n     * _([1, 2, 3]).forEach(function(num) { console.log(num); }).join(',');\n     * // => logs each number and returns '1,2,3'\n     *\n     * _.forEach({ 'one': 1, 'two': 2, 'three': 3 }, function(num) { console.log(num); });\n     * // => logs each number and returns the object (property order is not guaranteed across environments)\n     */\n    function forEach(collection, callback, thisArg) {\n      var index = -1,\n          length = collection ? collection.length : 0;\n\n      callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3);\n      if (typeof length == 'number') {\n        while (++index < length) {\n          if (callback(collection[index], index, collection) === false) {\n            break;\n          }\n        }\n      } else {\n        forOwn(collection, callback);\n      }\n      return collection;\n    }\n\n    /**\n     * This method is like `_.forEach` except that it iterates over elements\n     * of a `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @alias eachRight\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function} [callback=identity] The function called per iteration.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Array|Object|string} Returns `collection`.\n     * @example\n     *\n     * _([1, 2, 3]).forEachRight(function(num) { console.log(num); }).join(',');\n     * // => logs each number from right to left and returns '3,2,1'\n     */\n    function forEachRight(collection, callback, thisArg) {\n      var length = collection ? collection.length : 0;\n      callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3);\n      if (typeof length == 'number') {\n        while (length--) {\n          if (callback(collection[length], length, collection) === false) {\n            break;\n          }\n        }\n      } else {\n        var props = keys(collection);\n        length = props.length;\n        forOwn(collection, function(value, key, collection) {\n          key = props ? props[--length] : --length;\n          return callback(collection[key], key, collection);\n        });\n      }\n      return collection;\n    }\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of a collection through the callback. The corresponding value\n     * of each key is an array of the elements responsible for generating the key.\n     * The callback is bound to `thisArg` and invoked with three arguments;\n     * (value, index|key, collection).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * _.groupBy([4.2, 6.1, 6.4], function(num) { return Math.floor(num); });\n     * // => { '4': [4.2], '6': [6.1, 6.4] }\n     *\n     * _.groupBy([4.2, 6.1, 6.4], function(num) { return this.floor(num); }, Math);\n     * // => { '4': [4.2], '6': [6.1, 6.4] }\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.groupBy(['one', 'two', 'three'], 'length');\n     * // => { '3': ['one', 'two'], '5': ['three'] }\n     */\n    var groupBy = createAggregator(function(result, value, key) {\n      (hasOwnProperty.call(result, key) ? result[key] : result[key] = []).push(value);\n    });\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of the collection through the given callback. The corresponding\n     * value of each key is the last element responsible for generating the key.\n     * The callback is bound to `thisArg` and invoked with three arguments;\n     * (value, index|key, collection).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * var keys = [\n     *   { 'dir': 'left', 'code': 97 },\n     *   { 'dir': 'right', 'code': 100 }\n     * ];\n     *\n     * _.indexBy(keys, 'dir');\n     * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }\n     *\n     * _.indexBy(keys, function(key) { return String.fromCharCode(key.code); });\n     * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }\n     *\n     * _.indexBy(characters, function(key) { this.fromCharCode(key.code); }, String);\n     * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }\n     */\n    var indexBy = createAggregator(function(result, value, key) {\n      result[key] = value;\n    });\n\n    /**\n     * Invokes the method named by `methodName` on each element in the `collection`\n     * returning an array of the results of each invoked method. Additional arguments\n     * will be provided to each invoked method. If `methodName` is a function it\n     * will be invoked for, and `this` bound to, each element in the `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|string} methodName The name of the method to invoke or\n     *  the function invoked per iteration.\n     * @param {...*} [arg] Arguments to invoke the method with.\n     * @returns {Array} Returns a new array of the results of each invoked method.\n     * @example\n     *\n     * _.invoke([[5, 1, 7], [3, 2, 1]], 'sort');\n     * // => [[1, 5, 7], [1, 2, 3]]\n     *\n     * _.invoke([123, 456], String.prototype.split, '');\n     * // => [['1', '2', '3'], ['4', '5', '6']]\n     */\n    function invoke(collection, methodName) {\n      var args = slice(arguments, 2),\n          index = -1,\n          isFunc = typeof methodName == 'function',\n          length = collection ? collection.length : 0,\n          result = Array(typeof length == 'number' ? length : 0);\n\n      forEach(collection, function(value) {\n        result[++index] = (isFunc ? methodName : value[methodName]).apply(value, args);\n      });\n      return result;\n    }\n\n    /**\n     * Creates an array of values by running each element in the collection\n     * through the callback. The callback is bound to `thisArg` and invoked with\n     * three arguments; (value, index|key, collection).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias collect\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Array} Returns a new array of the results of each `callback` execution.\n     * @example\n     *\n     * _.map([1, 2, 3], function(num) { return num * 3; });\n     * // => [3, 6, 9]\n     *\n     * _.map({ 'one': 1, 'two': 2, 'three': 3 }, function(num) { return num * 3; });\n     * // => [3, 6, 9] (property order is not guaranteed across environments)\n     *\n     * var characters = [\n     *   { 'name': 'barney', 'age': 36 },\n     *   { 'name': 'fred',   'age': 40 }\n     * ];\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.map(characters, 'name');\n     * // => ['barney', 'fred']\n     */\n    function map(collection, callback, thisArg) {\n      var index = -1,\n          length = collection ? collection.length : 0;\n\n      callback = lodash.createCallback(callback, thisArg, 3);\n      if (typeof length == 'number') {\n        var result = Array(length);\n        while (++index < length) {\n          result[index] = callback(collection[index], index, collection);\n        }\n      } else {\n        result = [];\n        forOwn(collection, function(value, key, collection) {\n          result[++index] = callback(value, key, collection);\n        });\n      }\n      return result;\n    }\n\n    /**\n     * Retrieves the maximum value of a collection. If the collection is empty or\n     * falsey `-Infinity` is returned. If a callback is provided it will be executed\n     * for each value in the collection to generate the criterion by which the value\n     * is ranked. The callback is bound to `thisArg` and invoked with three\n     * arguments; (value, index, collection).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {*} Returns the maximum value.\n     * @example\n     *\n     * _.max([4, 2, 8, 6]);\n     * // => 8\n     *\n     * var characters = [\n     *   { 'name': 'barney', 'age': 36 },\n     *   { 'name': 'fred',   'age': 40 }\n     * ];\n     *\n     * _.max(characters, function(chr) { return chr.age; });\n     * // => { 'name': 'fred', 'age': 40 };\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.max(characters, 'age');\n     * // => { 'name': 'fred', 'age': 40 };\n     */\n    function max(collection, callback, thisArg) {\n      var computed = -Infinity,\n          result = computed;\n\n      // allows working with functions like `_.map` without using\n      // their `index` argument as a callback\n      if (typeof callback != 'function' && thisArg && thisArg[callback] === collection) {\n        callback = null;\n      }\n      if (callback == null && isArray(collection)) {\n        var index = -1,\n            length = collection.length;\n\n        while (++index < length) {\n          var value = collection[index];\n          if (value > result) {\n            result = value;\n          }\n        }\n      } else {\n        callback = (callback == null && isString(collection))\n          ? charAtCallback\n          : lodash.createCallback(callback, thisArg, 3);\n\n        forEach(collection, function(value, index, collection) {\n          var current = callback(value, index, collection);\n          if (current > computed) {\n            computed = current;\n            result = value;\n          }\n        });\n      }\n      return result;\n    }\n\n    /**\n     * Retrieves the minimum value of a collection. If the collection is empty or\n     * falsey `Infinity` is returned. If a callback is provided it will be executed\n     * for each value in the collection to generate the criterion by which the value\n     * is ranked. The callback is bound to `thisArg` and invoked with three\n     * arguments; (value, index, collection).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {*} Returns the minimum value.\n     * @example\n     *\n     * _.min([4, 2, 8, 6]);\n     * // => 2\n     *\n     * var characters = [\n     *   { 'name': 'barney', 'age': 36 },\n     *   { 'name': 'fred',   'age': 40 }\n     * ];\n     *\n     * _.min(characters, function(chr) { return chr.age; });\n     * // => { 'name': 'barney', 'age': 36 };\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.min(characters, 'age');\n     * // => { 'name': 'barney', 'age': 36 };\n     */\n    function min(collection, callback, thisArg) {\n      var computed = Infinity,\n          result = computed;\n\n      // allows working with functions like `_.map` without using\n      // their `index` argument as a callback\n      if (typeof callback != 'function' && thisArg && thisArg[callback] === collection) {\n        callback = null;\n      }\n      if (callback == null && isArray(collection)) {\n        var index = -1,\n            length = collection.length;\n\n        while (++index < length) {\n          var value = collection[index];\n          if (value < result) {\n            result = value;\n          }\n        }\n      } else {\n        callback = (callback == null && isString(collection))\n          ? charAtCallback\n          : lodash.createCallback(callback, thisArg, 3);\n\n        forEach(collection, function(value, index, collection) {\n          var current = callback(value, index, collection);\n          if (current < computed) {\n            computed = current;\n            result = value;\n          }\n        });\n      }\n      return result;\n    }\n\n    /**\n     * Retrieves the value of a specified property from all elements in the collection.\n     *\n     * @static\n     * @memberOf _\n     * @type Function\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {string} property The name of the property to pluck.\n     * @returns {Array} Returns a new array of property values.\n     * @example\n     *\n     * var characters = [\n     *   { 'name': 'barney', 'age': 36 },\n     *   { 'name': 'fred',   'age': 40 }\n     * ];\n     *\n     * _.pluck(characters, 'name');\n     * // => ['barney', 'fred']\n     */\n    var pluck = map;\n\n    /**\n     * Reduces a collection to a value which is the accumulated result of running\n     * each element in the collection through the callback, where each successive\n     * callback execution consumes the return value of the previous execution. If\n     * `accumulator` is not provided the first element of the collection will be\n     * used as the initial `accumulator` value. The callback is bound to `thisArg`\n     * and invoked with four arguments; (accumulator, value, index|key, collection).\n     *\n     * @static\n     * @memberOf _\n     * @alias foldl, inject\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function} [callback=identity] The function called per iteration.\n     * @param {*} [accumulator] Initial value of the accumulator.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {*} Returns the accumulated value.\n     * @example\n     *\n     * var sum = _.reduce([1, 2, 3], function(sum, num) {\n     *   return sum + num;\n     * });\n     * // => 6\n     *\n     * var mapped = _.reduce({ 'a': 1, 'b': 2, 'c': 3 }, function(result, num, key) {\n     *   result[key] = num * 3;\n     *   return result;\n     * }, {});\n     * // => { 'a': 3, 'b': 6, 'c': 9 }\n     */\n    function reduce(collection, callback, accumulator, thisArg) {\n      if (!collection) return accumulator;\n      var noaccum = arguments.length < 3;\n      callback = lodash.createCallback(callback, thisArg, 4);\n\n      var index = -1,\n          length = collection.length;\n\n      if (typeof length == 'number') {\n        if (noaccum) {\n          accumulator = collection[++index];\n        }\n        while (++index < length) {\n          accumulator = callback(accumulator, collection[index], index, collection);\n        }\n      } else {\n        forOwn(collection, function(value, index, collection) {\n          accumulator = noaccum\n            ? (noaccum = false, value)\n            : callback(accumulator, value, index, collection)\n        });\n      }\n      return accumulator;\n    }\n\n    /**\n     * This method is like `_.reduce` except that it iterates over elements\n     * of a `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @alias foldr\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function} [callback=identity] The function called per iteration.\n     * @param {*} [accumulator] Initial value of the accumulator.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {*} Returns the accumulated value.\n     * @example\n     *\n     * var list = [[0, 1], [2, 3], [4, 5]];\n     * var flat = _.reduceRight(list, function(a, b) { return a.concat(b); }, []);\n     * // => [4, 5, 2, 3, 0, 1]\n     */\n    function reduceRight(collection, callback, accumulator, thisArg) {\n      var noaccum = arguments.length < 3;\n      callback = lodash.createCallback(callback, thisArg, 4);\n      forEachRight(collection, function(value, index, collection) {\n        accumulator = noaccum\n          ? (noaccum = false, value)\n          : callback(accumulator, value, index, collection);\n      });\n      return accumulator;\n    }\n\n    /**\n     * The opposite of `_.filter` this method returns the elements of a\n     * collection that the callback does **not** return truey for.\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Array} Returns a new array of elements that failed the callback check.\n     * @example\n     *\n     * var odds = _.reject([1, 2, 3, 4, 5, 6], function(num) { return num % 2 == 0; });\n     * // => [1, 3, 5]\n     *\n     * var characters = [\n     *   { 'name': 'barney', 'age': 36, 'blocked': false },\n     *   { 'name': 'fred',   'age': 40, 'blocked': true }\n     * ];\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.reject(characters, 'blocked');\n     * // => [{ 'name': 'barney', 'age': 36, 'blocked': false }]\n     *\n     * // using \"_.where\" callback shorthand\n     * _.reject(characters, { 'age': 36 });\n     * // => [{ 'name': 'fred', 'age': 40, 'blocked': true }]\n     */\n    function reject(collection, callback, thisArg) {\n      callback = lodash.createCallback(callback, thisArg, 3);\n      return filter(collection, function(value, index, collection) {\n        return !callback(value, index, collection);\n      });\n    }\n\n    /**\n     * Retrieves a random element or `n` random elements from a collection.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to sample.\n     * @param {number} [n] The number of elements to sample.\n     * @param- {Object} [guard] Allows working with functions like `_.map`\n     *  without using their `index` arguments as `n`.\n     * @returns {Array} Returns the random sample(s) of `collection`.\n     * @example\n     *\n     * _.sample([1, 2, 3, 4]);\n     * // => 2\n     *\n     * _.sample([1, 2, 3, 4], 2);\n     * // => [3, 1]\n     */\n    function sample(collection, n, guard) {\n      if (collection && typeof collection.length != 'number') {\n        collection = values(collection);\n      }\n      if (n == null || guard) {\n        return collection ? collection[baseRandom(0, collection.length - 1)] : undefined;\n      }\n      var result = shuffle(collection);\n      result.length = nativeMin(nativeMax(0, n), result.length);\n      return result;\n    }\n\n    /**\n     * Creates an array of shuffled values, using a version of the Fisher-Yates\n     * shuffle. See http://en.wikipedia.org/wiki/Fisher-Yates_shuffle.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to shuffle.\n     * @returns {Array} Returns a new shuffled collection.\n     * @example\n     *\n     * _.shuffle([1, 2, 3, 4, 5, 6]);\n     * // => [4, 1, 6, 3, 5, 2]\n     */\n    function shuffle(collection) {\n      var index = -1,\n          length = collection ? collection.length : 0,\n          result = Array(typeof length == 'number' ? length : 0);\n\n      forEach(collection, function(value) {\n        var rand = baseRandom(0, ++index);\n        result[index] = result[rand];\n        result[rand] = value;\n      });\n      return result;\n    }\n\n    /**\n     * Gets the size of the `collection` by returning `collection.length` for arrays\n     * and array-like objects or the number of own enumerable properties for objects.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to inspect.\n     * @returns {number} Returns `collection.length` or number of own enumerable properties.\n     * @example\n     *\n     * _.size([1, 2]);\n     * // => 2\n     *\n     * _.size({ 'one': 1, 'two': 2, 'three': 3 });\n     * // => 3\n     *\n     * _.size('pebbles');\n     * // => 7\n     */\n    function size(collection) {\n      var length = collection ? collection.length : 0;\n      return typeof length == 'number' ? length : keys(collection).length;\n    }\n\n    /**\n     * Checks if the callback returns a truey value for **any** element of a\n     * collection. The function returns as soon as it finds a passing value and\n     * does not iterate over the entire collection. The callback is bound to\n     * `thisArg` and invoked with three arguments; (value, index|key, collection).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias any\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {boolean} Returns `true` if any element passed the callback check,\n     *  else `false`.\n     * @example\n     *\n     * _.some([null, 0, 'yes', false], Boolean);\n     * // => true\n     *\n     * var characters = [\n     *   { 'name': 'barney', 'age': 36, 'blocked': false },\n     *   { 'name': 'fred',   'age': 40, 'blocked': true }\n     * ];\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.some(characters, 'blocked');\n     * // => true\n     *\n     * // using \"_.where\" callback shorthand\n     * _.some(characters, { 'age': 1 });\n     * // => false\n     */\n    function some(collection, callback, thisArg) {\n      var result;\n      callback = lodash.createCallback(callback, thisArg, 3);\n\n      var index = -1,\n          length = collection ? collection.length : 0;\n\n      if (typeof length == 'number') {\n        while (++index < length) {\n          if ((result = callback(collection[index], index, collection))) {\n            break;\n          }\n        }\n      } else {\n        forOwn(collection, function(value, index, collection) {\n          return !(result = callback(value, index, collection));\n        });\n      }\n      return !!result;\n    }\n\n    /**\n     * Creates an array of elements, sorted in ascending order by the results of\n     * running each element in a collection through the callback. This method\n     * performs a stable sort, that is, it will preserve the original sort order\n     * of equal elements. The callback is bound to `thisArg` and invoked with\n     * three arguments; (value, index|key, collection).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an array of property names is provided for `callback` the collection\n     * will be sorted by each property value.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Array|Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Array} Returns a new array of sorted elements.\n     * @example\n     *\n     * _.sortBy([1, 2, 3], function(num) { return Math.sin(num); });\n     * // => [3, 1, 2]\n     *\n     * _.sortBy([1, 2, 3], function(num) { return this.sin(num); }, Math);\n     * // => [3, 1, 2]\n     *\n     * var characters = [\n     *   { 'name': 'barney',  'age': 36 },\n     *   { 'name': 'fred',    'age': 40 },\n     *   { 'name': 'barney',  'age': 26 },\n     *   { 'name': 'fred',    'age': 30 }\n     * ];\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.map(_.sortBy(characters, 'age'), _.values);\n     * // => [['barney', 26], ['fred', 30], ['barney', 36], ['fred', 40]]\n     *\n     * // sorting by multiple properties\n     * _.map(_.sortBy(characters, ['name', 'age']), _.values);\n     * // = > [['barney', 26], ['barney', 36], ['fred', 30], ['fred', 40]]\n     */\n    function sortBy(collection, callback, thisArg) {\n      var index = -1,\n          isArr = isArray(callback),\n          length = collection ? collection.length : 0,\n          result = Array(typeof length == 'number' ? length : 0);\n\n      if (!isArr) {\n        callback = lodash.createCallback(callback, thisArg, 3);\n      }\n      forEach(collection, function(value, key, collection) {\n        var object = result[++index] = getObject();\n        if (isArr) {\n          object.criteria = map(callback, function(key) { return value[key]; });\n        } else {\n          (object.criteria = getArray())[0] = callback(value, key, collection);\n        }\n        object.index = index;\n        object.value = value;\n      });\n\n      length = result.length;\n      result.sort(compareAscending);\n      while (length--) {\n        var object = result[length];\n        result[length] = object.value;\n        if (!isArr) {\n          releaseArray(object.criteria);\n        }\n        releaseObject(object);\n      }\n      return result;\n    }\n\n    /**\n     * Converts the `collection` to an array.\n     *\n     * @static\n     * @memberOf _\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to convert.\n     * @returns {Array} Returns the new converted array.\n     * @example\n     *\n     * (function() { return _.toArray(arguments).slice(1); })(1, 2, 3, 4);\n     * // => [2, 3, 4]\n     */\n    function toArray(collection) {\n      if (collection && typeof collection.length == 'number') {\n        return slice(collection);\n      }\n      return values(collection);\n    }\n\n    /**\n     * Performs a deep comparison of each element in a `collection` to the given\n     * `properties` object, returning an array of all elements that have equivalent\n     * property values.\n     *\n     * @static\n     * @memberOf _\n     * @type Function\n     * @category Collections\n     * @param {Array|Object|string} collection The collection to iterate over.\n     * @param {Object} props The object of property values to filter by.\n     * @returns {Array} Returns a new array of elements that have the given properties.\n     * @example\n     *\n     * var characters = [\n     *   { 'name': 'barney', 'age': 36, 'pets': ['hoppy'] },\n     *   { 'name': 'fred',   'age': 40, 'pets': ['baby puss', 'dino'] }\n     * ];\n     *\n     * _.where(characters, { 'age': 36 });\n     * // => [{ 'name': 'barney', 'age': 36, 'pets': ['hoppy'] }]\n     *\n     * _.where(characters, { 'pets': ['dino'] });\n     * // => [{ 'name': 'fred', 'age': 40, 'pets': ['baby puss', 'dino'] }]\n     */\n    var where = filter;\n\n    /*--------------------------------------------------------------------------*/\n\n    /**\n     * Creates an array with all falsey values removed. The values `false`, `null`,\n     * `0`, `\"\"`, `undefined`, and `NaN` are all falsey.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to compact.\n     * @returns {Array} Returns a new array of filtered values.\n     * @example\n     *\n     * _.compact([0, 1, false, 2, '', 3]);\n     * // => [1, 2, 3]\n     */\n    function compact(array) {\n      var index = -1,\n          length = array ? array.length : 0,\n          result = [];\n\n      while (++index < length) {\n        var value = array[index];\n        if (value) {\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Creates an array excluding all values of the provided arrays using strict\n     * equality for comparisons, i.e. `===`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to process.\n     * @param {...Array} [values] The arrays of values to exclude.\n     * @returns {Array} Returns a new array of filtered values.\n     * @example\n     *\n     * _.difference([1, 2, 3, 4, 5], [5, 2, 10]);\n     * // => [1, 3, 4]\n     */\n    function difference(array) {\n      return baseDifference(array, baseFlatten(arguments, true, true, 1));\n    }\n\n    /**\n     * This method is like `_.find` except that it returns the index of the first\n     * element that passes the callback check, instead of the element itself.\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to search.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {number} Returns the index of the found element, else `-1`.\n     * @example\n     *\n     * var characters = [\n     *   { 'name': 'barney',  'age': 36, 'blocked': false },\n     *   { 'name': 'fred',    'age': 40, 'blocked': true },\n     *   { 'name': 'pebbles', 'age': 1,  'blocked': false }\n     * ];\n     *\n     * _.findIndex(characters, function(chr) {\n     *   return chr.age < 20;\n     * });\n     * // => 2\n     *\n     * // using \"_.where\" callback shorthand\n     * _.findIndex(characters, { 'age': 36 });\n     * // => 0\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.findIndex(characters, 'blocked');\n     * // => 1\n     */\n    function findIndex(array, callback, thisArg) {\n      var index = -1,\n          length = array ? array.length : 0;\n\n      callback = lodash.createCallback(callback, thisArg, 3);\n      while (++index < length) {\n        if (callback(array[index], index, array)) {\n          return index;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * This method is like `_.findIndex` except that it iterates over elements\n     * of a `collection` from right to left.\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to search.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {number} Returns the index of the found element, else `-1`.\n     * @example\n     *\n     * var characters = [\n     *   { 'name': 'barney',  'age': 36, 'blocked': true },\n     *   { 'name': 'fred',    'age': 40, 'blocked': false },\n     *   { 'name': 'pebbles', 'age': 1,  'blocked': true }\n     * ];\n     *\n     * _.findLastIndex(characters, function(chr) {\n     *   return chr.age > 30;\n     * });\n     * // => 1\n     *\n     * // using \"_.where\" callback shorthand\n     * _.findLastIndex(characters, { 'age': 36 });\n     * // => 0\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.findLastIndex(characters, 'blocked');\n     * // => 2\n     */\n    function findLastIndex(array, callback, thisArg) {\n      var length = array ? array.length : 0;\n      callback = lodash.createCallback(callback, thisArg, 3);\n      while (length--) {\n        if (callback(array[length], length, array)) {\n          return length;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * Gets the first element or first `n` elements of an array. If a callback\n     * is provided elements at the beginning of the array are returned as long\n     * as the callback returns truey. The callback is bound to `thisArg` and\n     * invoked with three arguments; (value, index, array).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias head, take\n     * @category Arrays\n     * @param {Array} array The array to query.\n     * @param {Function|Object|number|string} [callback] The function called\n     *  per element or the number of elements to return. If a property name or\n     *  object is provided it will be used to create a \"_.pluck\" or \"_.where\"\n     *  style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {*} Returns the first element(s) of `array`.\n     * @example\n     *\n     * _.first([1, 2, 3]);\n     * // => 1\n     *\n     * _.first([1, 2, 3], 2);\n     * // => [1, 2]\n     *\n     * _.first([1, 2, 3], function(num) {\n     *   return num < 3;\n     * });\n     * // => [1, 2]\n     *\n     * var characters = [\n     *   { 'name': 'barney',  'blocked': true,  'employer': 'slate' },\n     *   { 'name': 'fred',    'blocked': false, 'employer': 'slate' },\n     *   { 'name': 'pebbles', 'blocked': true,  'employer': 'na' }\n     * ];\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.first(characters, 'blocked');\n     * // => [{ 'name': 'barney', 'blocked': true, 'employer': 'slate' }]\n     *\n     * // using \"_.where\" callback shorthand\n     * _.pluck(_.first(characters, { 'employer': 'slate' }), 'name');\n     * // => ['barney', 'fred']\n     */\n    function first(array, callback, thisArg) {\n      var n = 0,\n          length = array ? array.length : 0;\n\n      if (typeof callback != 'number' && callback != null) {\n        var index = -1;\n        callback = lodash.createCallback(callback, thisArg, 3);\n        while (++index < length && callback(array[index], index, array)) {\n          n++;\n        }\n      } else {\n        n = callback;\n        if (n == null || thisArg) {\n          return array ? array[0] : undefined;\n        }\n      }\n      return slice(array, 0, nativeMin(nativeMax(0, n), length));\n    }\n\n    /**\n     * Flattens a nested array (the nesting can be to any depth). If `isShallow`\n     * is truey, the array will only be flattened a single level. If a callback\n     * is provided each element of the array is passed through the callback before\n     * flattening. The callback is bound to `thisArg` and invoked with three\n     * arguments; (value, index, array).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to flatten.\n     * @param {boolean} [isShallow=false] A flag to restrict flattening to a single level.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Array} Returns a new flattened array.\n     * @example\n     *\n     * _.flatten([1, [2], [3, [[4]]]]);\n     * // => [1, 2, 3, 4];\n     *\n     * _.flatten([1, [2], [3, [[4]]]], true);\n     * // => [1, 2, 3, [[4]]];\n     *\n     * var characters = [\n     *   { 'name': 'barney', 'age': 30, 'pets': ['hoppy'] },\n     *   { 'name': 'fred',   'age': 40, 'pets': ['baby puss', 'dino'] }\n     * ];\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.flatten(characters, 'pets');\n     * // => ['hoppy', 'baby puss', 'dino']\n     */\n    function flatten(array, isShallow, callback, thisArg) {\n      // juggle arguments\n      if (typeof isShallow != 'boolean' && isShallow != null) {\n        thisArg = callback;\n        callback = (typeof isShallow != 'function' && thisArg && thisArg[isShallow] === array) ? null : isShallow;\n        isShallow = false;\n      }\n      if (callback != null) {\n        array = map(array, callback, thisArg);\n      }\n      return baseFlatten(array, isShallow);\n    }\n\n    /**\n     * Gets the index at which the first occurrence of `value` is found using\n     * strict equality for comparisons, i.e. `===`. If the array is already sorted\n     * providing `true` for `fromIndex` will run a faster binary search.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to search.\n     * @param {*} value The value to search for.\n     * @param {boolean|number} [fromIndex=0] The index to search from or `true`\n     *  to perform a binary search on a sorted array.\n     * @returns {number} Returns the index of the matched value or `-1`.\n     * @example\n     *\n     * _.indexOf([1, 2, 3, 1, 2, 3], 2);\n     * // => 1\n     *\n     * _.indexOf([1, 2, 3, 1, 2, 3], 2, 3);\n     * // => 4\n     *\n     * _.indexOf([1, 1, 2, 2, 3, 3], 2, true);\n     * // => 2\n     */\n    function indexOf(array, value, fromIndex) {\n      if (typeof fromIndex == 'number') {\n        var length = array ? array.length : 0;\n        fromIndex = (fromIndex < 0 ? nativeMax(0, length + fromIndex) : fromIndex || 0);\n      } else if (fromIndex) {\n        var index = sortedIndex(array, value);\n        return array[index] === value ? index : -1;\n      }\n      return baseIndexOf(array, value, fromIndex);\n    }\n\n    /**\n     * Gets all but the last element or last `n` elements of an array. If a\n     * callback is provided elements at the end of the array are excluded from\n     * the result as long as the callback returns truey. The callback is bound\n     * to `thisArg` and invoked with three arguments; (value, index, array).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to query.\n     * @param {Function|Object|number|string} [callback=1] The function called\n     *  per element or the number of elements to exclude. If a property name or\n     *  object is provided it will be used to create a \"_.pluck\" or \"_.where\"\n     *  style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Array} Returns a slice of `array`.\n     * @example\n     *\n     * _.initial([1, 2, 3]);\n     * // => [1, 2]\n     *\n     * _.initial([1, 2, 3], 2);\n     * // => [1]\n     *\n     * _.initial([1, 2, 3], function(num) {\n     *   return num > 1;\n     * });\n     * // => [1]\n     *\n     * var characters = [\n     *   { 'name': 'barney',  'blocked': false, 'employer': 'slate' },\n     *   { 'name': 'fred',    'blocked': true,  'employer': 'slate' },\n     *   { 'name': 'pebbles', 'blocked': true,  'employer': 'na' }\n     * ];\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.initial(characters, 'blocked');\n     * // => [{ 'name': 'barney',  'blocked': false, 'employer': 'slate' }]\n     *\n     * // using \"_.where\" callback shorthand\n     * _.pluck(_.initial(characters, { 'employer': 'na' }), 'name');\n     * // => ['barney', 'fred']\n     */\n    function initial(array, callback, thisArg) {\n      var n = 0,\n          length = array ? array.length : 0;\n\n      if (typeof callback != 'number' && callback != null) {\n        var index = length;\n        callback = lodash.createCallback(callback, thisArg, 3);\n        while (index-- && callback(array[index], index, array)) {\n          n++;\n        }\n      } else {\n        n = (callback == null || thisArg) ? 1 : callback || n;\n      }\n      return slice(array, 0, nativeMin(nativeMax(0, length - n), length));\n    }\n\n    /**\n     * Creates an array of unique values present in all provided arrays using\n     * strict equality for comparisons, i.e. `===`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {...Array} [array] The arrays to inspect.\n     * @returns {Array} Returns an array of shared values.\n     * @example\n     *\n     * _.intersection([1, 2, 3], [5, 2, 1, 4], [2, 1]);\n     * // => [1, 2]\n     */\n    function intersection() {\n      var args = [],\n          argsIndex = -1,\n          argsLength = arguments.length,\n          caches = getArray(),\n          indexOf = getIndexOf(),\n          trustIndexOf = indexOf === baseIndexOf,\n          seen = getArray();\n\n      while (++argsIndex < argsLength) {\n        var value = arguments[argsIndex];\n        if (isArray(value) || isArguments(value)) {\n          args.push(value);\n          caches.push(trustIndexOf && value.length >= largeArraySize &&\n            createCache(argsIndex ? args[argsIndex] : seen));\n        }\n      }\n      var array = args[0],\n          index = -1,\n          length = array ? array.length : 0,\n          result = [];\n\n      outer:\n      while (++index < length) {\n        var cache = caches[0];\n        value = array[index];\n\n        if ((cache ? cacheIndexOf(cache, value) : indexOf(seen, value)) < 0) {\n          argsIndex = argsLength;\n          (cache || seen).push(value);\n          while (--argsIndex) {\n            cache = caches[argsIndex];\n            if ((cache ? cacheIndexOf(cache, value) : indexOf(args[argsIndex], value)) < 0) {\n              continue outer;\n            }\n          }\n          result.push(value);\n        }\n      }\n      while (argsLength--) {\n        cache = caches[argsLength];\n        if (cache) {\n          releaseObject(cache);\n        }\n      }\n      releaseArray(caches);\n      releaseArray(seen);\n      return result;\n    }\n\n    /**\n     * Gets the last element or last `n` elements of an array. If a callback is\n     * provided elements at the end of the array are returned as long as the\n     * callback returns truey. The callback is bound to `thisArg` and invoked\n     * with three arguments; (value, index, array).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to query.\n     * @param {Function|Object|number|string} [callback] The function called\n     *  per element or the number of elements to return. If a property name or\n     *  object is provided it will be used to create a \"_.pluck\" or \"_.where\"\n     *  style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {*} Returns the last element(s) of `array`.\n     * @example\n     *\n     * _.last([1, 2, 3]);\n     * // => 3\n     *\n     * _.last([1, 2, 3], 2);\n     * // => [2, 3]\n     *\n     * _.last([1, 2, 3], function(num) {\n     *   return num > 1;\n     * });\n     * // => [2, 3]\n     *\n     * var characters = [\n     *   { 'name': 'barney',  'blocked': false, 'employer': 'slate' },\n     *   { 'name': 'fred',    'blocked': true,  'employer': 'slate' },\n     *   { 'name': 'pebbles', 'blocked': true,  'employer': 'na' }\n     * ];\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.pluck(_.last(characters, 'blocked'), 'name');\n     * // => ['fred', 'pebbles']\n     *\n     * // using \"_.where\" callback shorthand\n     * _.last(characters, { 'employer': 'na' });\n     * // => [{ 'name': 'pebbles', 'blocked': true, 'employer': 'na' }]\n     */\n    function last(array, callback, thisArg) {\n      var n = 0,\n          length = array ? array.length : 0;\n\n      if (typeof callback != 'number' && callback != null) {\n        var index = length;\n        callback = lodash.createCallback(callback, thisArg, 3);\n        while (index-- && callback(array[index], index, array)) {\n          n++;\n        }\n      } else {\n        n = callback;\n        if (n == null || thisArg) {\n          return array ? array[length - 1] : undefined;\n        }\n      }\n      return slice(array, nativeMax(0, length - n));\n    }\n\n    /**\n     * Gets the index at which the last occurrence of `value` is found using strict\n     * equality for comparisons, i.e. `===`. If `fromIndex` is negative, it is used\n     * as the offset from the end of the collection.\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to search.\n     * @param {*} value The value to search for.\n     * @param {number} [fromIndex=array.length-1] The index to search from.\n     * @returns {number} Returns the index of the matched value or `-1`.\n     * @example\n     *\n     * _.lastIndexOf([1, 2, 3, 1, 2, 3], 2);\n     * // => 4\n     *\n     * _.lastIndexOf([1, 2, 3, 1, 2, 3], 2, 3);\n     * // => 1\n     */\n    function lastIndexOf(array, value, fromIndex) {\n      var index = array ? array.length : 0;\n      if (typeof fromIndex == 'number') {\n        index = (fromIndex < 0 ? nativeMax(0, index + fromIndex) : nativeMin(fromIndex, index - 1)) + 1;\n      }\n      while (index--) {\n        if (array[index] === value) {\n          return index;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * Removes all provided values from the given array using strict equality for\n     * comparisons, i.e. `===`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to modify.\n     * @param {...*} [value] The values to remove.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [1, 2, 3, 1, 2, 3];\n     * _.pull(array, 2, 3);\n     * console.log(array);\n     * // => [1, 1]\n     */\n    function pull(array) {\n      var args = arguments,\n          argsIndex = 0,\n          argsLength = args.length,\n          length = array ? array.length : 0;\n\n      while (++argsIndex < argsLength) {\n        var index = -1,\n            value = args[argsIndex];\n        while (++index < length) {\n          if (array[index] === value) {\n            splice.call(array, index--, 1);\n            length--;\n          }\n        }\n      }\n      return array;\n    }\n\n    /**\n     * Creates an array of numbers (positive and/or negative) progressing from\n     * `start` up to but not including `end`. If `start` is less than `stop` a\n     * zero-length range is created unless a negative `step` is specified.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {number} [start=0] The start of the range.\n     * @param {number} end The end of the range.\n     * @param {number} [step=1] The value to increment or decrement by.\n     * @returns {Array} Returns a new range array.\n     * @example\n     *\n     * _.range(4);\n     * // => [0, 1, 2, 3]\n     *\n     * _.range(1, 5);\n     * // => [1, 2, 3, 4]\n     *\n     * _.range(0, 20, 5);\n     * // => [0, 5, 10, 15]\n     *\n     * _.range(0, -4, -1);\n     * // => [0, -1, -2, -3]\n     *\n     * _.range(1, 4, 0);\n     * // => [1, 1, 1]\n     *\n     * _.range(0);\n     * // => []\n     */\n    function range(start, end, step) {\n      start = +start || 0;\n      step = typeof step == 'number' ? step : (+step || 1);\n\n      if (end == null) {\n        end = start;\n        start = 0;\n      }\n      // use `Array(length)` so engines like Chakra and V8 avoid slower modes\n      // http://youtu.be/XAqIpGU8ZZk#t=17m25s\n      var index = -1,\n          length = nativeMax(0, ceil((end - start) / (step || 1))),\n          result = Array(length);\n\n      while (++index < length) {\n        result[index] = start;\n        start += step;\n      }\n      return result;\n    }\n\n    /**\n     * Removes all elements from an array that the callback returns truey for\n     * and returns an array of removed elements. The callback is bound to `thisArg`\n     * and invoked with three arguments; (value, index, array).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to modify.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Array} Returns a new array of removed elements.\n     * @example\n     *\n     * var array = [1, 2, 3, 4, 5, 6];\n     * var evens = _.remove(array, function(num) { return num % 2 == 0; });\n     *\n     * console.log(array);\n     * // => [1, 3, 5]\n     *\n     * console.log(evens);\n     * // => [2, 4, 6]\n     */\n    function remove(array, callback, thisArg) {\n      var index = -1,\n          length = array ? array.length : 0,\n          result = [];\n\n      callback = lodash.createCallback(callback, thisArg, 3);\n      while (++index < length) {\n        var value = array[index];\n        if (callback(value, index, array)) {\n          result.push(value);\n          splice.call(array, index--, 1);\n          length--;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The opposite of `_.initial` this method gets all but the first element or\n     * first `n` elements of an array. If a callback function is provided elements\n     * at the beginning of the array are excluded from the result as long as the\n     * callback returns truey. The callback is bound to `thisArg` and invoked\n     * with three arguments; (value, index, array).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias drop, tail\n     * @category Arrays\n     * @param {Array} array The array to query.\n     * @param {Function|Object|number|string} [callback=1] The function called\n     *  per element or the number of elements to exclude. If a property name or\n     *  object is provided it will be used to create a \"_.pluck\" or \"_.where\"\n     *  style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Array} Returns a slice of `array`.\n     * @example\n     *\n     * _.rest([1, 2, 3]);\n     * // => [2, 3]\n     *\n     * _.rest([1, 2, 3], 2);\n     * // => [3]\n     *\n     * _.rest([1, 2, 3], function(num) {\n     *   return num < 3;\n     * });\n     * // => [3]\n     *\n     * var characters = [\n     *   { 'name': 'barney',  'blocked': true,  'employer': 'slate' },\n     *   { 'name': 'fred',    'blocked': false,  'employer': 'slate' },\n     *   { 'name': 'pebbles', 'blocked': true, 'employer': 'na' }\n     * ];\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.pluck(_.rest(characters, 'blocked'), 'name');\n     * // => ['fred', 'pebbles']\n     *\n     * // using \"_.where\" callback shorthand\n     * _.rest(characters, { 'employer': 'slate' });\n     * // => [{ 'name': 'pebbles', 'blocked': true, 'employer': 'na' }]\n     */\n    function rest(array, callback, thisArg) {\n      if (typeof callback != 'number' && callback != null) {\n        var n = 0,\n            index = -1,\n            length = array ? array.length : 0;\n\n        callback = lodash.createCallback(callback, thisArg, 3);\n        while (++index < length && callback(array[index], index, array)) {\n          n++;\n        }\n      } else {\n        n = (callback == null || thisArg) ? 1 : nativeMax(0, callback);\n      }\n      return slice(array, n);\n    }\n\n    /**\n     * Uses a binary search to determine the smallest index at which a value\n     * should be inserted into a given sorted array in order to maintain the sort\n     * order of the array. If a callback is provided it will be executed for\n     * `value` and each element of `array` to compute their sort ranking. The\n     * callback is bound to `thisArg` and invoked with one argument; (value).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * _.sortedIndex([20, 30, 50], 40);\n     * // => 2\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.sortedIndex([{ 'x': 20 }, { 'x': 30 }, { 'x': 50 }], { 'x': 40 }, 'x');\n     * // => 2\n     *\n     * var dict = {\n     *   'wordToNumber': { 'twenty': 20, 'thirty': 30, 'fourty': 40, 'fifty': 50 }\n     * };\n     *\n     * _.sortedIndex(['twenty', 'thirty', 'fifty'], 'fourty', function(word) {\n     *   return dict.wordToNumber[word];\n     * });\n     * // => 2\n     *\n     * _.sortedIndex(['twenty', 'thirty', 'fifty'], 'fourty', function(word) {\n     *   return this.wordToNumber[word];\n     * }, dict);\n     * // => 2\n     */\n    function sortedIndex(array, value, callback, thisArg) {\n      var low = 0,\n          high = array ? array.length : low;\n\n      // explicitly reference `identity` for better inlining in Firefox\n      callback = callback ? lodash.createCallback(callback, thisArg, 1) : identity;\n      value = callback(value);\n\n      while (low < high) {\n        var mid = (low + high) >>> 1;\n        (callback(array[mid]) < value)\n          ? low = mid + 1\n          : high = mid;\n      }\n      return low;\n    }\n\n    /**\n     * Creates an array of unique values, in order, of the provided arrays using\n     * strict equality for comparisons, i.e. `===`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {...Array} [array] The arrays to inspect.\n     * @returns {Array} Returns an array of combined values.\n     * @example\n     *\n     * _.union([1, 2, 3], [5, 2, 1, 4], [2, 1]);\n     * // => [1, 2, 3, 5, 4]\n     */\n    function union() {\n      return baseUniq(baseFlatten(arguments, true, true));\n    }\n\n    /**\n     * Creates a duplicate-value-free version of an array using strict equality\n     * for comparisons, i.e. `===`. If the array is sorted, providing\n     * `true` for `isSorted` will use a faster algorithm. If a callback is provided\n     * each element of `array` is passed through the callback before uniqueness\n     * is computed. The callback is bound to `thisArg` and invoked with three\n     * arguments; (value, index, array).\n     *\n     * If a property name is provided for `callback` the created \"_.pluck\" style\n     * callback will return the property value of the given element.\n     *\n     * If an object is provided for `callback` the created \"_.where\" style callback\n     * will return `true` for elements that have the properties of the given object,\n     * else `false`.\n     *\n     * @static\n     * @memberOf _\n     * @alias unique\n     * @category Arrays\n     * @param {Array} array The array to process.\n     * @param {boolean} [isSorted=false] A flag to indicate that `array` is sorted.\n     * @param {Function|Object|string} [callback=identity] The function called\n     *  per iteration. If a property name or object is provided it will be used\n     *  to create a \"_.pluck\" or \"_.where\" style callback, respectively.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Array} Returns a duplicate-value-free array.\n     * @example\n     *\n     * _.uniq([1, 2, 1, 3, 1]);\n     * // => [1, 2, 3]\n     *\n     * _.uniq([1, 1, 2, 2, 3], true);\n     * // => [1, 2, 3]\n     *\n     * _.uniq(['A', 'b', 'C', 'a', 'B', 'c'], function(letter) { return letter.toLowerCase(); });\n     * // => ['A', 'b', 'C']\n     *\n     * _.uniq([1, 2.5, 3, 1.5, 2, 3.5], function(num) { return this.floor(num); }, Math);\n     * // => [1, 2.5, 3]\n     *\n     * // using \"_.pluck\" callback shorthand\n     * _.uniq([{ 'x': 1 }, { 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 1 }, { 'x': 2 }]\n     */\n    function uniq(array, isSorted, callback, thisArg) {\n      // juggle arguments\n      if (typeof isSorted != 'boolean' && isSorted != null) {\n        thisArg = callback;\n        callback = (typeof isSorted != 'function' && thisArg && thisArg[isSorted] === array) ? null : isSorted;\n        isSorted = false;\n      }\n      if (callback != null) {\n        callback = lodash.createCallback(callback, thisArg, 3);\n      }\n      return baseUniq(array, isSorted, callback);\n    }\n\n    /**\n     * Creates an array excluding all provided values using strict equality for\n     * comparisons, i.e. `===`.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {Array} array The array to filter.\n     * @param {...*} [value] The values to exclude.\n     * @returns {Array} Returns a new array of filtered values.\n     * @example\n     *\n     * _.without([1, 2, 1, 0, 3, 1, 4], 0, 1);\n     * // => [2, 3, 4]\n     */\n    function without(array) {\n      return baseDifference(array, slice(arguments, 1));\n    }\n\n    /**\n     * Creates an array that is the symmetric difference of the provided arrays.\n     * See http://en.wikipedia.org/wiki/Symmetric_difference.\n     *\n     * @static\n     * @memberOf _\n     * @category Arrays\n     * @param {...Array} [array] The arrays to inspect.\n     * @returns {Array} Returns an array of values.\n     * @example\n     *\n     * _.xor([1, 2, 3], [5, 2, 1, 4]);\n     * // => [3, 5, 4]\n     *\n     * _.xor([1, 2, 5], [2, 3, 5], [3, 4, 5]);\n     * // => [1, 4, 5]\n     */\n    function xor() {\n      var index = -1,\n          length = arguments.length;\n\n      while (++index < length) {\n        var array = arguments[index];\n        if (isArray(array) || isArguments(array)) {\n          var result = result\n            ? baseUniq(baseDifference(result, array).concat(baseDifference(array, result)))\n            : array;\n        }\n      }\n      return result || [];\n    }\n\n    /**\n     * Creates an array of grouped elements, the first of which contains the first\n     * elements of the given arrays, the second of which contains the second\n     * elements of the given arrays, and so on.\n     *\n     * @static\n     * @memberOf _\n     * @alias unzip\n     * @category Arrays\n     * @param {...Array} [array] Arrays to process.\n     * @returns {Array} Returns a new array of grouped elements.\n     * @example\n     *\n     * _.zip(['fred', 'barney'], [30, 40], [true, false]);\n     * // => [['fred', 30, true], ['barney', 40, false]]\n     */\n    function zip() {\n      var array = arguments.length > 1 ? arguments : arguments[0],\n          index = -1,\n          length = array ? max(pluck(array, 'length')) : 0,\n          result = Array(length < 0 ? 0 : length);\n\n      while (++index < length) {\n        result[index] = pluck(array, index);\n      }\n      return result;\n    }\n\n    /**\n     * Creates an object composed from arrays of `keys` and `values`. Provide\n     * either a single two dimensional array, i.e. `[[key1, value1], [key2, value2]]`\n     * or two arrays, one of `keys` and one of corresponding `values`.\n     *\n     * @static\n     * @memberOf _\n     * @alias object\n     * @category Arrays\n     * @param {Array} keys The array of keys.\n     * @param {Array} [values=[]] The array of values.\n     * @returns {Object} Returns an object composed of the given keys and\n     *  corresponding values.\n     * @example\n     *\n     * _.zipObject(['fred', 'barney'], [30, 40]);\n     * // => { 'fred': 30, 'barney': 40 }\n     */\n    function zipObject(keys, values) {\n      var index = -1,\n          length = keys ? keys.length : 0,\n          result = {};\n\n      if (!values && length && !isArray(keys[0])) {\n        values = [];\n      }\n      while (++index < length) {\n        var key = keys[index];\n        if (values) {\n          result[key] = values[index];\n        } else if (key) {\n          result[key[0]] = key[1];\n        }\n      }\n      return result;\n    }\n\n    /*--------------------------------------------------------------------------*/\n\n    /**\n     * Creates a function that executes `func`, with  the `this` binding and\n     * arguments of the created function, only after being called `n` times.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {number} n The number of times the function must be called before\n     *  `func` is executed.\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * var saves = ['profile', 'settings'];\n     *\n     * var done = _.after(saves.length, function() {\n     *   console.log('Done saving!');\n     * });\n     *\n     * _.forEach(saves, function(type) {\n     *   asyncSave({ 'type': type, 'complete': done });\n     * });\n     * // => logs 'Done saving!', after all saves have completed\n     */\n    function after(n, func) {\n      if (!isFunction(func)) {\n        throw new TypeError;\n      }\n      return function() {\n        if (--n < 1) {\n          return func.apply(this, arguments);\n        }\n      };\n    }\n\n    /**\n     * Creates a function that, when called, invokes `func` with the `this`\n     * binding of `thisArg` and prepends any additional `bind` arguments to those\n     * provided to the bound function.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Function} func The function to bind.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {...*} [arg] Arguments to be partially applied.\n     * @returns {Function} Returns the new bound function.\n     * @example\n     *\n     * var func = function(greeting) {\n     *   return greeting + ' ' + this.name;\n     * };\n     *\n     * func = _.bind(func, { 'name': 'fred' }, 'hi');\n     * func();\n     * // => 'hi fred'\n     */\n    function bind(func, thisArg) {\n      return arguments.length > 2\n        ? createWrapper(func, 17, slice(arguments, 2), null, thisArg)\n        : createWrapper(func, 1, null, null, thisArg);\n    }\n\n    /**\n     * Binds methods of an object to the object itself, overwriting the existing\n     * method. Method names may be specified as individual arguments or as arrays\n     * of method names. If no method names are provided all the function properties\n     * of `object` will be bound.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Object} object The object to bind and assign the bound methods to.\n     * @param {...string} [methodName] The object method names to\n     *  bind, specified as individual method names or arrays of method names.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var view = {\n     *   'label': 'docs',\n     *   'onClick': function() { console.log('clicked ' + this.label); }\n     * };\n     *\n     * _.bindAll(view);\n     * jQuery('#docs').on('click', view.onClick);\n     * // => logs 'clicked docs', when the button is clicked\n     */\n    function bindAll(object) {\n      var funcs = arguments.length > 1 ? baseFlatten(arguments, true, false, 1) : functions(object),\n          index = -1,\n          length = funcs.length;\n\n      while (++index < length) {\n        var key = funcs[index];\n        object[key] = createWrapper(object[key], 1, null, null, object);\n      }\n      return object;\n    }\n\n    /**\n     * Creates a function that, when called, invokes the method at `object[key]`\n     * and prepends any additional `bindKey` arguments to those provided to the bound\n     * function. This method differs from `_.bind` by allowing bound functions to\n     * reference methods that will be redefined or don't yet exist.\n     * See http://michaux.ca/articles/lazy-function-definition-pattern.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Object} object The object the method belongs to.\n     * @param {string} key The key of the method.\n     * @param {...*} [arg] Arguments to be partially applied.\n     * @returns {Function} Returns the new bound function.\n     * @example\n     *\n     * var object = {\n     *   'name': 'fred',\n     *   'greet': function(greeting) {\n     *     return greeting + ' ' + this.name;\n     *   }\n     * };\n     *\n     * var func = _.bindKey(object, 'greet', 'hi');\n     * func();\n     * // => 'hi fred'\n     *\n     * object.greet = function(greeting) {\n     *   return greeting + 'ya ' + this.name + '!';\n     * };\n     *\n     * func();\n     * // => 'hiya fred!'\n     */\n    function bindKey(object, key) {\n      return arguments.length > 2\n        ? createWrapper(key, 19, slice(arguments, 2), null, object)\n        : createWrapper(key, 3, null, null, object);\n    }\n\n    /**\n     * Creates a function that is the composition of the provided functions,\n     * where each function consumes the return value of the function that follows.\n     * For example, composing the functions `f()`, `g()`, and `h()` produces `f(g(h()))`.\n     * Each function is executed with the `this` binding of the composed function.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {...Function} [func] Functions to compose.\n     * @returns {Function} Returns the new composed function.\n     * @example\n     *\n     * var realNameMap = {\n     *   'pebbles': 'penelope'\n     * };\n     *\n     * var format = function(name) {\n     *   name = realNameMap[name.toLowerCase()] || name;\n     *   return name.charAt(0).toUpperCase() + name.slice(1).toLowerCase();\n     * };\n     *\n     * var greet = function(formatted) {\n     *   return 'Hiya ' + formatted + '!';\n     * };\n     *\n     * var welcome = _.compose(greet, format);\n     * welcome('pebbles');\n     * // => 'Hiya Penelope!'\n     */\n    function compose() {\n      var funcs = arguments,\n          length = funcs.length;\n\n      while (length--) {\n        if (!isFunction(funcs[length])) {\n          throw new TypeError;\n        }\n      }\n      return function() {\n        var args = arguments,\n            length = funcs.length;\n\n        while (length--) {\n          args = [funcs[length].apply(this, args)];\n        }\n        return args[0];\n      };\n    }\n\n    /**\n     * Creates a function which accepts one or more arguments of `func` that when\n     * invoked either executes `func` returning its result, if all `func` arguments\n     * have been provided, or returns a function that accepts one or more of the\n     * remaining `func` arguments, and so on. The arity of `func` can be specified\n     * if `func.length` is not sufficient.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Function} func The function to curry.\n     * @param {number} [arity=func.length] The arity of `func`.\n     * @returns {Function} Returns the new curried function.\n     * @example\n     *\n     * var curried = _.curry(function(a, b, c) {\n     *   console.log(a + b + c);\n     * });\n     *\n     * curried(1)(2)(3);\n     * // => 6\n     *\n     * curried(1, 2)(3);\n     * // => 6\n     *\n     * curried(1, 2, 3);\n     * // => 6\n     */\n    function curry(func, arity) {\n      arity = typeof arity == 'number' ? arity : (+arity || func.length);\n      return createWrapper(func, 4, null, null, null, arity);\n    }\n\n    /**\n     * Creates a function that will delay the execution of `func` until after\n     * `wait` milliseconds have elapsed since the last time it was invoked.\n     * Provide an options object to indicate that `func` should be invoked on\n     * the leading and/or trailing edge of the `wait` timeout. Subsequent calls\n     * to the debounced function will return the result of the last `func` call.\n     *\n     * Note: If `leading` and `trailing` options are `true` `func` will be called\n     * on the trailing edge of the timeout only if the the debounced function is\n     * invoked more than once during the `wait` timeout.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Function} func The function to debounce.\n     * @param {number} wait The number of milliseconds to delay.\n     * @param {Object} [options] The options object.\n     * @param {boolean} [options.leading=false] Specify execution on the leading edge of the timeout.\n     * @param {number} [options.maxWait] The maximum time `func` is allowed to be delayed before it's called.\n     * @param {boolean} [options.trailing=true] Specify execution on the trailing edge of the timeout.\n     * @returns {Function} Returns the new debounced function.\n     * @example\n     *\n     * // avoid costly calculations while the window size is in flux\n     * var lazyLayout = _.debounce(calculateLayout, 150);\n     * jQuery(window).on('resize', lazyLayout);\n     *\n     * // execute `sendMail` when the click event is fired, debouncing subsequent calls\n     * jQuery('#postbox').on('click', _.debounce(sendMail, 300, {\n     *   'leading': true,\n     *   'trailing': false\n     * });\n     *\n     * // ensure `batchLog` is executed once after 1 second of debounced calls\n     * var source = new EventSource('/stream');\n     * source.addEventListener('message', _.debounce(batchLog, 250, {\n     *   'maxWait': 1000\n     * }, false);\n     */\n    function debounce(func, wait, options) {\n      var args,\n          maxTimeoutId,\n          result,\n          stamp,\n          thisArg,\n          timeoutId,\n          trailingCall,\n          lastCalled = 0,\n          maxWait = false,\n          trailing = true;\n\n      if (!isFunction(func)) {\n        throw new TypeError;\n      }\n      wait = nativeMax(0, wait) || 0;\n      if (options === true) {\n        var leading = true;\n        trailing = false;\n      } else if (isObject(options)) {\n        leading = options.leading;\n        maxWait = 'maxWait' in options && (nativeMax(wait, options.maxWait) || 0);\n        trailing = 'trailing' in options ? options.trailing : trailing;\n      }\n      var delayed = function() {\n        var remaining = wait - (now() - stamp);\n        if (remaining <= 0) {\n          if (maxTimeoutId) {\n            clearTimeout(maxTimeoutId);\n          }\n          var isCalled = trailingCall;\n          maxTimeoutId = timeoutId = trailingCall = undefined;\n          if (isCalled) {\n            lastCalled = now();\n            result = func.apply(thisArg, args);\n            if (!timeoutId && !maxTimeoutId) {\n              args = thisArg = null;\n            }\n          }\n        } else {\n          timeoutId = setTimeout(delayed, remaining);\n        }\n      };\n\n      var maxDelayed = function() {\n        if (timeoutId) {\n          clearTimeout(timeoutId);\n        }\n        maxTimeoutId = timeoutId = trailingCall = undefined;\n        if (trailing || (maxWait !== wait)) {\n          lastCalled = now();\n          result = func.apply(thisArg, args);\n          if (!timeoutId && !maxTimeoutId) {\n            args = thisArg = null;\n          }\n        }\n      };\n\n      return function() {\n        args = arguments;\n        stamp = now();\n        thisArg = this;\n        trailingCall = trailing && (timeoutId || !leading);\n\n        if (maxWait === false) {\n          var leadingCall = leading && !timeoutId;\n        } else {\n          if (!maxTimeoutId && !leading) {\n            lastCalled = stamp;\n          }\n          var remaining = maxWait - (stamp - lastCalled),\n              isCalled = remaining <= 0;\n\n          if (isCalled) {\n            if (maxTimeoutId) {\n              maxTimeoutId = clearTimeout(maxTimeoutId);\n            }\n            lastCalled = stamp;\n            result = func.apply(thisArg, args);\n          }\n          else if (!maxTimeoutId) {\n            maxTimeoutId = setTimeout(maxDelayed, remaining);\n          }\n        }\n        if (isCalled && timeoutId) {\n          timeoutId = clearTimeout(timeoutId);\n        }\n        else if (!timeoutId && wait !== maxWait) {\n          timeoutId = setTimeout(delayed, wait);\n        }\n        if (leadingCall) {\n          isCalled = true;\n          result = func.apply(thisArg, args);\n        }\n        if (isCalled && !timeoutId && !maxTimeoutId) {\n          args = thisArg = null;\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Defers executing the `func` function until the current call stack has cleared.\n     * Additional arguments will be provided to `func` when it is invoked.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Function} func The function to defer.\n     * @param {...*} [arg] Arguments to invoke the function with.\n     * @returns {number} Returns the timer id.\n     * @example\n     *\n     * _.defer(function(text) { console.log(text); }, 'deferred');\n     * // logs 'deferred' after one or more milliseconds\n     */\n    function defer(func) {\n      if (!isFunction(func)) {\n        throw new TypeError;\n      }\n      var args = slice(arguments, 1);\n      return setTimeout(function() { func.apply(undefined, args); }, 1);\n    }\n\n    /**\n     * Executes the `func` function after `wait` milliseconds. Additional arguments\n     * will be provided to `func` when it is invoked.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Function} func The function to delay.\n     * @param {number} wait The number of milliseconds to delay execution.\n     * @param {...*} [arg] Arguments to invoke the function with.\n     * @returns {number} Returns the timer id.\n     * @example\n     *\n     * _.delay(function(text) { console.log(text); }, 1000, 'later');\n     * // => logs 'later' after one second\n     */\n    function delay(func, wait) {\n      if (!isFunction(func)) {\n        throw new TypeError;\n      }\n      var args = slice(arguments, 2);\n      return setTimeout(function() { func.apply(undefined, args); }, wait);\n    }\n\n    /**\n     * Creates a function that memoizes the result of `func`. If `resolver` is\n     * provided it will be used to determine the cache key for storing the result\n     * based on the arguments provided to the memoized function. By default, the\n     * first argument provided to the memoized function is used as the cache key.\n     * The `func` is executed with the `this` binding of the memoized function.\n     * The result cache is exposed as the `cache` property on the memoized function.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Function} func The function to have its output memoized.\n     * @param {Function} [resolver] A function used to resolve the cache key.\n     * @returns {Function} Returns the new memoizing function.\n     * @example\n     *\n     * var fibonacci = _.memoize(function(n) {\n     *   return n < 2 ? n : fibonacci(n - 1) + fibonacci(n - 2);\n     * });\n     *\n     * fibonacci(9)\n     * // => 34\n     *\n     * var data = {\n     *   'fred': { 'name': 'fred', 'age': 40 },\n     *   'pebbles': { 'name': 'pebbles', 'age': 1 }\n     * };\n     *\n     * // modifying the result cache\n     * var get = _.memoize(function(name) { return data[name]; }, _.identity);\n     * get('pebbles');\n     * // => { 'name': 'pebbles', 'age': 1 }\n     *\n     * get.cache.pebbles.name = 'penelope';\n     * get('pebbles');\n     * // => { 'name': 'penelope', 'age': 1 }\n     */\n    function memoize(func, resolver) {\n      if (!isFunction(func)) {\n        throw new TypeError;\n      }\n      var memoized = function() {\n        var cache = memoized.cache,\n            key = resolver ? resolver.apply(this, arguments) : keyPrefix + arguments[0];\n\n        return hasOwnProperty.call(cache, key)\n          ? cache[key]\n          : (cache[key] = func.apply(this, arguments));\n      }\n      memoized.cache = {};\n      return memoized;\n    }\n\n    /**\n     * Creates a function that is restricted to execute `func` once. Repeat calls to\n     * the function will return the value of the first call. The `func` is executed\n     * with the `this` binding of the created function.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * var initialize = _.once(createApplication);\n     * initialize();\n     * initialize();\n     * // `initialize` executes `createApplication` once\n     */\n    function once(func) {\n      var ran,\n          result;\n\n      if (!isFunction(func)) {\n        throw new TypeError;\n      }\n      return function() {\n        if (ran) {\n          return result;\n        }\n        ran = true;\n        result = func.apply(this, arguments);\n\n        // clear the `func` variable so the function may be garbage collected\n        func = null;\n        return result;\n      };\n    }\n\n    /**\n     * Creates a function that, when called, invokes `func` with any additional\n     * `partial` arguments prepended to those provided to the new function. This\n     * method is similar to `_.bind` except it does **not** alter the `this` binding.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Function} func The function to partially apply arguments to.\n     * @param {...*} [arg] Arguments to be partially applied.\n     * @returns {Function} Returns the new partially applied function.\n     * @example\n     *\n     * var greet = function(greeting, name) { return greeting + ' ' + name; };\n     * var hi = _.partial(greet, 'hi');\n     * hi('fred');\n     * // => 'hi fred'\n     */\n    function partial(func) {\n      return createWrapper(func, 16, slice(arguments, 1));\n    }\n\n    /**\n     * This method is like `_.partial` except that `partial` arguments are\n     * appended to those provided to the new function.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Function} func The function to partially apply arguments to.\n     * @param {...*} [arg] Arguments to be partially applied.\n     * @returns {Function} Returns the new partially applied function.\n     * @example\n     *\n     * var defaultsDeep = _.partialRight(_.merge, _.defaults);\n     *\n     * var options = {\n     *   'variable': 'data',\n     *   'imports': { 'jq': $ }\n     * };\n     *\n     * defaultsDeep(options, _.templateSettings);\n     *\n     * options.variable\n     * // => 'data'\n     *\n     * options.imports\n     * // => { '_': _, 'jq': $ }\n     */\n    function partialRight(func) {\n      return createWrapper(func, 32, null, slice(arguments, 1));\n    }\n\n    /**\n     * Creates a function that, when executed, will only call the `func` function\n     * at most once per every `wait` milliseconds. Provide an options object to\n     * indicate that `func` should be invoked on the leading and/or trailing edge\n     * of the `wait` timeout. Subsequent calls to the throttled function will\n     * return the result of the last `func` call.\n     *\n     * Note: If `leading` and `trailing` options are `true` `func` will be called\n     * on the trailing edge of the timeout only if the the throttled function is\n     * invoked more than once during the `wait` timeout.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {Function} func The function to throttle.\n     * @param {number} wait The number of milliseconds to throttle executions to.\n     * @param {Object} [options] The options object.\n     * @param {boolean} [options.leading=true] Specify execution on the leading edge of the timeout.\n     * @param {boolean} [options.trailing=true] Specify execution on the trailing edge of the timeout.\n     * @returns {Function} Returns the new throttled function.\n     * @example\n     *\n     * // avoid excessively updating the position while scrolling\n     * var throttled = _.throttle(updatePosition, 100);\n     * jQuery(window).on('scroll', throttled);\n     *\n     * // execute `renewToken` when the click event is fired, but not more than once every 5 minutes\n     * jQuery('.interactive').on('click', _.throttle(renewToken, 300000, {\n     *   'trailing': false\n     * }));\n     */\n    function throttle(func, wait, options) {\n      var leading = true,\n          trailing = true;\n\n      if (!isFunction(func)) {\n        throw new TypeError;\n      }\n      if (options === false) {\n        leading = false;\n      } else if (isObject(options)) {\n        leading = 'leading' in options ? options.leading : leading;\n        trailing = 'trailing' in options ? options.trailing : trailing;\n      }\n      debounceOptions.leading = leading;\n      debounceOptions.maxWait = wait;\n      debounceOptions.trailing = trailing;\n\n      return debounce(func, wait, debounceOptions);\n    }\n\n    /**\n     * Creates a function that provides `value` to the wrapper function as its\n     * first argument. Additional arguments provided to the function are appended\n     * to those provided to the wrapper function. The wrapper is executed with\n     * the `this` binding of the created function.\n     *\n     * @static\n     * @memberOf _\n     * @category Functions\n     * @param {*} value The value to wrap.\n     * @param {Function} wrapper The wrapper function.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var p = _.wrap(_.escape, function(func, text) {\n     *   return '<p>' + func(text) + '</p>';\n     * });\n     *\n     * p('Fred, Wilma, & Pebbles');\n     * // => '<p>Fred, Wilma, &amp; Pebbles</p>'\n     */\n    function wrap(value, wrapper) {\n      return createWrapper(wrapper, 16, [value]);\n    }\n\n    /*--------------------------------------------------------------------------*/\n\n    /**\n     * Creates a function that returns `value`.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {*} value The value to return from the new function.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var object = { 'name': 'fred' };\n     * var getter = _.constant(object);\n     * getter() === object;\n     * // => true\n     */\n    function constant(value) {\n      return function() {\n        return value;\n      };\n    }\n\n    /**\n     * Produces a callback bound to an optional `thisArg`. If `func` is a property\n     * name the created callback will return the property value for a given element.\n     * If `func` is an object the created callback will return `true` for elements\n     * that contain the equivalent object properties, otherwise it will return `false`.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {*} [func=identity] The value to convert to a callback.\n     * @param {*} [thisArg] The `this` binding of the created callback.\n     * @param {number} [argCount] The number of arguments the callback accepts.\n     * @returns {Function} Returns a callback function.\n     * @example\n     *\n     * var characters = [\n     *   { 'name': 'barney', 'age': 36 },\n     *   { 'name': 'fred',   'age': 40 }\n     * ];\n     *\n     * // wrap to create custom callback shorthands\n     * _.createCallback = _.wrap(_.createCallback, function(func, callback, thisArg) {\n     *   var match = /^(.+?)__([gl]t)(.+)$/.exec(callback);\n     *   return !match ? func(callback, thisArg) : function(object) {\n     *     return match[2] == 'gt' ? object[match[1]] > match[3] : object[match[1]] < match[3];\n     *   };\n     * });\n     *\n     * _.filter(characters, 'age__gt38');\n     * // => [{ 'name': 'fred', 'age': 40 }]\n     */\n    function createCallback(func, thisArg, argCount) {\n      var type = typeof func;\n      if (func == null || type == 'function') {\n        return baseCreateCallback(func, thisArg, argCount);\n      }\n      // handle \"_.pluck\" style callback shorthands\n      if (type != 'object') {\n        return property(func);\n      }\n      var props = keys(func),\n          key = props[0],\n          a = func[key];\n\n      // handle \"_.where\" style callback shorthands\n      if (props.length == 1 && a === a && !isObject(a)) {\n        // fast path the common case of providing an object with a single\n        // property containing a primitive value\n        return function(object) {\n          var b = object[key];\n          return a === b && (a !== 0 || (1 / a == 1 / b));\n        };\n      }\n      return function(object) {\n        var length = props.length,\n            result = false;\n\n        while (length--) {\n          if (!(result = baseIsEqual(object[props[length]], func[props[length]], null, true))) {\n            break;\n          }\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Converts the characters `&`, `<`, `>`, `\"`, and `'` in `string` to their\n     * corresponding HTML entities.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {string} string The string to escape.\n     * @returns {string} Returns the escaped string.\n     * @example\n     *\n     * _.escape('Fred, Wilma, & Pebbles');\n     * // => 'Fred, Wilma, &amp; Pebbles'\n     */\n    function escape(string) {\n      return string == null ? '' : String(string).replace(reUnescapedHtml, escapeHtmlChar);\n    }\n\n    /**\n     * This method returns the first argument provided to it.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {*} value Any value.\n     * @returns {*} Returns `value`.\n     * @example\n     *\n     * var object = { 'name': 'fred' };\n     * _.identity(object) === object;\n     * // => true\n     */\n    function identity(value) {\n      return value;\n    }\n\n    /**\n     * Adds function properties of a source object to the destination object.\n     * If `object` is a function methods will be added to its prototype as well.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {Function|Object} [object=lodash] object The destination object.\n     * @param {Object} source The object of functions to add.\n     * @param {Object} [options] The options object.\n     * @param {boolean} [options.chain=true] Specify whether the functions added are chainable.\n     * @example\n     *\n     * function capitalize(string) {\n     *   return string.charAt(0).toUpperCase() + string.slice(1).toLowerCase();\n     * }\n     *\n     * _.mixin({ 'capitalize': capitalize });\n     * _.capitalize('fred');\n     * // => 'Fred'\n     *\n     * _('fred').capitalize().value();\n     * // => 'Fred'\n     *\n     * _.mixin({ 'capitalize': capitalize }, { 'chain': false });\n     * _('fred').capitalize();\n     * // => 'Fred'\n     */\n    function mixin(object, source, options) {\n      var chain = true,\n          methodNames = source && functions(source);\n\n      if (!source || (!options && !methodNames.length)) {\n        if (options == null) {\n          options = source;\n        }\n        ctor = lodashWrapper;\n        source = object;\n        object = lodash;\n        methodNames = functions(source);\n      }\n      if (options === false) {\n        chain = false;\n      } else if (isObject(options) && 'chain' in options) {\n        chain = options.chain;\n      }\n      var ctor = object,\n          isFunc = isFunction(ctor);\n\n      forEach(methodNames, function(methodName) {\n        var func = object[methodName] = source[methodName];\n        if (isFunc) {\n          ctor.prototype[methodName] = function() {\n            var chainAll = this.__chain__,\n                value = this.__wrapped__,\n                args = [value];\n\n            push.apply(args, arguments);\n            var result = func.apply(object, args);\n            if (chain || chainAll) {\n              if (value === result && isObject(result)) {\n                return this;\n              }\n              result = new ctor(result);\n              result.__chain__ = chainAll;\n            }\n            return result;\n          };\n        }\n      });\n    }\n\n    /**\n     * Reverts the '_' variable to its previous value and returns a reference to\n     * the `lodash` function.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @returns {Function} Returns the `lodash` function.\n     * @example\n     *\n     * var lodash = _.noConflict();\n     */\n    function noConflict() {\n      context._ = oldDash;\n      return this;\n    }\n\n    /**\n     * A no-operation function.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @example\n     *\n     * var object = { 'name': 'fred' };\n     * _.noop(object) === undefined;\n     * // => true\n     */\n    function noop() {\n      // no operation performed\n    }\n\n    /**\n     * Gets the number of milliseconds that have elapsed since the Unix epoch\n     * (1 January 1970 00:00:00 UTC).\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @example\n     *\n     * var stamp = _.now();\n     * _.defer(function() { console.log(_.now() - stamp); });\n     * // => logs the number of milliseconds it took for the deferred function to be called\n     */\n    var now = isNative(now = Date.now) && now || function() {\n      return new Date().getTime();\n    };\n\n    /**\n     * Converts the given value into an integer of the specified radix.\n     * If `radix` is `undefined` or `0` a `radix` of `10` is used unless the\n     * `value` is a hexadecimal, in which case a `radix` of `16` is used.\n     *\n     * Note: This method avoids differences in native ES3 and ES5 `parseInt`\n     * implementations. See http://es5.github.io/#E.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {string} value The value to parse.\n     * @param {number} [radix] The radix used to interpret the value to parse.\n     * @returns {number} Returns the new integer value.\n     * @example\n     *\n     * _.parseInt('08');\n     * // => 8\n     */\n    var parseInt = nativeParseInt(whitespace + '08') == 8 ? nativeParseInt : function(value, radix) {\n      // Firefox < 21 and Opera < 15 follow the ES3 specified implementation of `parseInt`\n      return nativeParseInt(isString(value) ? value.replace(reLeadingSpacesAndZeros, '') : value, radix || 0);\n    };\n\n    /**\n     * Creates a \"_.pluck\" style function, which returns the `key` value of a\n     * given object.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {string} key The name of the property to retrieve.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var characters = [\n     *   { 'name': 'fred',   'age': 40 },\n     *   { 'name': 'barney', 'age': 36 }\n     * ];\n     *\n     * var getName = _.property('name');\n     *\n     * _.map(characters, getName);\n     * // => ['barney', 'fred']\n     *\n     * _.sortBy(characters, getName);\n     * // => [{ 'name': 'barney', 'age': 36 }, { 'name': 'fred',   'age': 40 }]\n     */\n    function property(key) {\n      return function(object) {\n        return object[key];\n      };\n    }\n\n    /**\n     * Produces a random number between `min` and `max` (inclusive). If only one\n     * argument is provided a number between `0` and the given number will be\n     * returned. If `floating` is truey or either `min` or `max` are floats a\n     * floating-point number will be returned instead of an integer.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {number} [min=0] The minimum possible value.\n     * @param {number} [max=1] The maximum possible value.\n     * @param {boolean} [floating=false] Specify returning a floating-point number.\n     * @returns {number} Returns a random number.\n     * @example\n     *\n     * _.random(0, 5);\n     * // => an integer between 0 and 5\n     *\n     * _.random(5);\n     * // => also an integer between 0 and 5\n     *\n     * _.random(5, true);\n     * // => a floating-point number between 0 and 5\n     *\n     * _.random(1.2, 5.2);\n     * // => a floating-point number between 1.2 and 5.2\n     */\n    function random(min, max, floating) {\n      var noMin = min == null,\n          noMax = max == null;\n\n      if (floating == null) {\n        if (typeof min == 'boolean' && noMax) {\n          floating = min;\n          min = 1;\n        }\n        else if (!noMax && typeof max == 'boolean') {\n          floating = max;\n          noMax = true;\n        }\n      }\n      if (noMin && noMax) {\n        max = 1;\n      }\n      min = +min || 0;\n      if (noMax) {\n        max = min;\n        min = 0;\n      } else {\n        max = +max || 0;\n      }\n      if (floating || min % 1 || max % 1) {\n        var rand = nativeRandom();\n        return nativeMin(min + (rand * (max - min + parseFloat('1e-' + ((rand +'').length - 1)))), max);\n      }\n      return baseRandom(min, max);\n    }\n\n    /**\n     * Resolves the value of property `key` on `object`. If `key` is a function\n     * it will be invoked with the `this` binding of `object` and its result returned,\n     * else the property value is returned. If `object` is falsey then `undefined`\n     * is returned.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {Object} object The object to inspect.\n     * @param {string} key The name of the property to resolve.\n     * @returns {*} Returns the resolved value.\n     * @example\n     *\n     * var object = {\n     *   'cheese': 'crumpets',\n     *   'stuff': function() {\n     *     return 'nonsense';\n     *   }\n     * };\n     *\n     * _.result(object, 'cheese');\n     * // => 'crumpets'\n     *\n     * _.result(object, 'stuff');\n     * // => 'nonsense'\n     */\n    function result(object, key) {\n      if (object) {\n        var value = object[key];\n        return isFunction(value) ? object[key]() : value;\n      }\n    }\n\n    /**\n     * A micro-templating method that handles arbitrary delimiters, preserves\n     * whitespace, and correctly escapes quotes within interpolated code.\n     *\n     * Note: In the development build, `_.template` utilizes sourceURLs for easier\n     * debugging. See http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl\n     *\n     * For more information on precompiling templates see:\n     * http://lodash.com/custom-builds\n     *\n     * For more information on Chrome extension sandboxes see:\n     * http://developer.chrome.com/stable/extensions/sandboxingEval.html\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {string} text The template text.\n     * @param {Object} data The data object used to populate the text.\n     * @param {Object} [options] The options object.\n     * @param {RegExp} [options.escape] The \"escape\" delimiter.\n     * @param {RegExp} [options.evaluate] The \"evaluate\" delimiter.\n     * @param {Object} [options.imports] An object to import into the template as local variables.\n     * @param {RegExp} [options.interpolate] The \"interpolate\" delimiter.\n     * @param {string} [sourceURL] The sourceURL of the template's compiled source.\n     * @param {string} [variable] The data object variable name.\n     * @returns {Function|string} Returns a compiled function when no `data` object\n     *  is given, else it returns the interpolated text.\n     * @example\n     *\n     * // using the \"interpolate\" delimiter to create a compiled template\n     * var compiled = _.template('hello <%= name %>');\n     * compiled({ 'name': 'fred' });\n     * // => 'hello fred'\n     *\n     * // using the \"escape\" delimiter to escape HTML in data property values\n     * _.template('<b><%- value %></b>', { 'value': '<script>' });\n     * // => '<b>&lt;script&gt;</b>'\n     *\n     * // using the \"evaluate\" delimiter to generate HTML\n     * var list = '<% _.forEach(people, function(name) { %><li><%- name %></li><% }); %>';\n     * _.template(list, { 'people': ['fred', 'barney'] });\n     * // => '<li>fred</li><li>barney</li>'\n     *\n     * // using the ES6 delimiter as an alternative to the default \"interpolate\" delimiter\n     * _.template('hello ${ name }', { 'name': 'pebbles' });\n     * // => 'hello pebbles'\n     *\n     * // using the internal `print` function in \"evaluate\" delimiters\n     * _.template('<% print(\"hello \" + name); %>!', { 'name': 'barney' });\n     * // => 'hello barney!'\n     *\n     * // using a custom template delimiters\n     * _.templateSettings = {\n     *   'interpolate': /{{([\\s\\S]+?)}}/g\n     * };\n     *\n     * _.template('hello {{ name }}!', { 'name': 'mustache' });\n     * // => 'hello mustache!'\n     *\n     * // using the `imports` option to import jQuery\n     * var list = '<% jq.each(people, function(name) { %><li><%- name %></li><% }); %>';\n     * _.template(list, { 'people': ['fred', 'barney'] }, { 'imports': { 'jq': jQuery } });\n     * // => '<li>fred</li><li>barney</li>'\n     *\n     * // using the `sourceURL` option to specify a custom sourceURL for the template\n     * var compiled = _.template('hello <%= name %>', null, { 'sourceURL': '/basic/greeting.jst' });\n     * compiled(data);\n     * // => find the source of \"greeting.jst\" under the Sources tab or Resources panel of the web inspector\n     *\n     * // using the `variable` option to ensure a with-statement isn't used in the compiled template\n     * var compiled = _.template('hi <%= data.name %>!', null, { 'variable': 'data' });\n     * compiled.source;\n     * // => function(data) {\n     *   var __t, __p = '', __e = _.escape;\n     *   __p += 'hi ' + ((__t = ( data.name )) == null ? '' : __t) + '!';\n     *   return __p;\n     * }\n     *\n     * // using the `source` property to inline compiled templates for meaningful\n     * // line numbers in error messages and a stack trace\n     * fs.writeFileSync(path.join(cwd, 'jst.js'), '\\\n     *   var JST = {\\\n     *     \"main\": ' + _.template(mainText).source + '\\\n     *   };\\\n     * ');\n     */\n    function template(text, data, options) {\n      // based on John Resig's `tmpl` implementation\n      // http://ejohn.org/blog/javascript-micro-templating/\n      // and Laura Doktorova's doT.js\n      // https://github.com/olado/doT\n      var settings = lodash.templateSettings;\n      text = String(text || '');\n\n      // avoid missing dependencies when `iteratorTemplate` is not defined\n      options = defaults({}, options, settings);\n\n      var imports = defaults({}, options.imports, settings.imports),\n          importsKeys = keys(imports),\n          importsValues = values(imports);\n\n      var isEvaluating,\n          index = 0,\n          interpolate = options.interpolate || reNoMatch,\n          source = \"__p += '\";\n\n      // compile the regexp to match each delimiter\n      var reDelimiters = RegExp(\n        (options.escape || reNoMatch).source + '|' +\n        interpolate.source + '|' +\n        (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + '|' +\n        (options.evaluate || reNoMatch).source + '|$'\n      , 'g');\n\n      text.replace(reDelimiters, function(match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {\n        interpolateValue || (interpolateValue = esTemplateValue);\n\n        // escape characters that cannot be included in string literals\n        source += text.slice(index, offset).replace(reUnescapedString, escapeStringChar);\n\n        // replace delimiters with snippets\n        if (escapeValue) {\n          source += \"' +\\n__e(\" + escapeValue + \") +\\n'\";\n        }\n        if (evaluateValue) {\n          isEvaluating = true;\n          source += \"';\\n\" + evaluateValue + \";\\n__p += '\";\n        }\n        if (interpolateValue) {\n          source += \"' +\\n((__t = (\" + interpolateValue + \")) == null ? '' : __t) +\\n'\";\n        }\n        index = offset + match.length;\n\n        // the JS engine embedded in Adobe products requires returning the `match`\n        // string in order to produce the correct `offset` value\n        return match;\n      });\n\n      source += \"';\\n\";\n\n      // if `variable` is not specified, wrap a with-statement around the generated\n      // code to add the data object to the top of the scope chain\n      var variable = options.variable,\n          hasVariable = variable;\n\n      if (!hasVariable) {\n        variable = 'obj';\n        source = 'with (' + variable + ') {\\n' + source + '\\n}\\n';\n      }\n      // cleanup code by stripping empty strings\n      source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source)\n        .replace(reEmptyStringMiddle, '$1')\n        .replace(reEmptyStringTrailing, '$1;');\n\n      // frame code as the function body\n      source = 'function(' + variable + ') {\\n' +\n        (hasVariable ? '' : variable + ' || (' + variable + ' = {});\\n') +\n        \"var __t, __p = '', __e = _.escape\" +\n        (isEvaluating\n          ? ', __j = Array.prototype.join;\\n' +\n            \"function print() { __p += __j.call(arguments, '') }\\n\"\n          : ';\\n'\n        ) +\n        source +\n        'return __p\\n}';\n\n      // Use a sourceURL for easier debugging.\n      // http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl\n      var sourceURL = '\\n/*\\n//# sourceURL=' + (options.sourceURL || '/lodash/template/source[' + (templateCounter++) + ']') + '\\n*/';\n\n      try {\n        var result = Function(importsKeys, 'return ' + source + sourceURL).apply(undefined, importsValues);\n      } catch(e) {\n        e.source = source;\n        throw e;\n      }\n      if (data) {\n        return result(data);\n      }\n      // provide the compiled function's source by its `toString` method, in\n      // supported environments, or the `source` property as a convenience for\n      // inlining compiled templates during the build process\n      result.source = source;\n      return result;\n    }\n\n    /**\n     * Executes the callback `n` times, returning an array of the results\n     * of each callback execution. The callback is bound to `thisArg` and invoked\n     * with one argument; (index).\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {number} n The number of times to execute the callback.\n     * @param {Function} callback The function called per iteration.\n     * @param {*} [thisArg] The `this` binding of `callback`.\n     * @returns {Array} Returns an array of the results of each `callback` execution.\n     * @example\n     *\n     * var diceRolls = _.times(3, _.partial(_.random, 1, 6));\n     * // => [3, 6, 4]\n     *\n     * _.times(3, function(n) { mage.castSpell(n); });\n     * // => calls `mage.castSpell(n)` three times, passing `n` of `0`, `1`, and `2` respectively\n     *\n     * _.times(3, function(n) { this.cast(n); }, mage);\n     * // => also calls `mage.castSpell(n)` three times\n     */\n    function times(n, callback, thisArg) {\n      n = (n = +n) > -1 ? n : 0;\n      var index = -1,\n          result = Array(n);\n\n      callback = baseCreateCallback(callback, thisArg, 1);\n      while (++index < n) {\n        result[index] = callback(index);\n      }\n      return result;\n    }\n\n    /**\n     * The inverse of `_.escape` this method converts the HTML entities\n     * `&amp;`, `&lt;`, `&gt;`, `&quot;`, and `&#39;` in `string` to their\n     * corresponding characters.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {string} string The string to unescape.\n     * @returns {string} Returns the unescaped string.\n     * @example\n     *\n     * _.unescape('Fred, Barney &amp; Pebbles');\n     * // => 'Fred, Barney & Pebbles'\n     */\n    function unescape(string) {\n      return string == null ? '' : String(string).replace(reEscapedHtml, unescapeHtmlChar);\n    }\n\n    /**\n     * Generates a unique ID. If `prefix` is provided the ID will be appended to it.\n     *\n     * @static\n     * @memberOf _\n     * @category Utilities\n     * @param {string} [prefix] The value to prefix the ID with.\n     * @returns {string} Returns the unique ID.\n     * @example\n     *\n     * _.uniqueId('contact_');\n     * // => 'contact_104'\n     *\n     * _.uniqueId();\n     * // => '105'\n     */\n    function uniqueId(prefix) {\n      var id = ++idCounter;\n      return String(prefix == null ? '' : prefix) + id;\n    }\n\n    /*--------------------------------------------------------------------------*/\n\n    /**\n     * Creates a `lodash` object that wraps the given value with explicit\n     * method chaining enabled.\n     *\n     * @static\n     * @memberOf _\n     * @category Chaining\n     * @param {*} value The value to wrap.\n     * @returns {Object} Returns the wrapper object.\n     * @example\n     *\n     * var characters = [\n     *   { 'name': 'barney',  'age': 36 },\n     *   { 'name': 'fred',    'age': 40 },\n     *   { 'name': 'pebbles', 'age': 1 }\n     * ];\n     *\n     * var youngest = _.chain(characters)\n     *     .sortBy('age')\n     *     .map(function(chr) { return chr.name + ' is ' + chr.age; })\n     *     .first()\n     *     .value();\n     * // => 'pebbles is 1'\n     */\n    function chain(value) {\n      value = new lodashWrapper(value);\n      value.__chain__ = true;\n      return value;\n    }\n\n    /**\n     * Invokes `interceptor` with the `value` as the first argument and then\n     * returns `value`. The purpose of this method is to \"tap into\" a method\n     * chain in order to perform operations on intermediate results within\n     * the chain.\n     *\n     * @static\n     * @memberOf _\n     * @category Chaining\n     * @param {*} value The value to provide to `interceptor`.\n     * @param {Function} interceptor The function to invoke.\n     * @returns {*} Returns `value`.\n     * @example\n     *\n     * _([1, 2, 3, 4])\n     *  .tap(function(array) { array.pop(); })\n     *  .reverse()\n     *  .value();\n     * // => [3, 2, 1]\n     */\n    function tap(value, interceptor) {\n      interceptor(value);\n      return value;\n    }\n\n    /**\n     * Enables explicit method chaining on the wrapper object.\n     *\n     * @name chain\n     * @memberOf _\n     * @category Chaining\n     * @returns {*} Returns the wrapper object.\n     * @example\n     *\n     * var characters = [\n     *   { 'name': 'barney', 'age': 36 },\n     *   { 'name': 'fred',   'age': 40 }\n     * ];\n     *\n     * // without explicit chaining\n     * _(characters).first();\n     * // => { 'name': 'barney', 'age': 36 }\n     *\n     * // with explicit chaining\n     * _(characters).chain()\n     *   .first()\n     *   .pick('age')\n     *   .value();\n     * // => { 'age': 36 }\n     */\n    function wrapperChain() {\n      this.__chain__ = true;\n      return this;\n    }\n\n    /**\n     * Produces the `toString` result of the wrapped value.\n     *\n     * @name toString\n     * @memberOf _\n     * @category Chaining\n     * @returns {string} Returns the string result.\n     * @example\n     *\n     * _([1, 2, 3]).toString();\n     * // => '1,2,3'\n     */\n    function wrapperToString() {\n      return String(this.__wrapped__);\n    }\n\n    /**\n     * Extracts the wrapped value.\n     *\n     * @name valueOf\n     * @memberOf _\n     * @alias value\n     * @category Chaining\n     * @returns {*} Returns the wrapped value.\n     * @example\n     *\n     * _([1, 2, 3]).valueOf();\n     * // => [1, 2, 3]\n     */\n    function wrapperValueOf() {\n      return this.__wrapped__;\n    }\n\n    /*--------------------------------------------------------------------------*/\n\n    // add functions that return wrapped values when chaining\n    lodash.after = after;\n    lodash.assign = assign;\n    lodash.at = at;\n    lodash.bind = bind;\n    lodash.bindAll = bindAll;\n    lodash.bindKey = bindKey;\n    lodash.chain = chain;\n    lodash.compact = compact;\n    lodash.compose = compose;\n    lodash.constant = constant;\n    lodash.countBy = countBy;\n    lodash.create = create;\n    lodash.createCallback = createCallback;\n    lodash.curry = curry;\n    lodash.debounce = debounce;\n    lodash.defaults = defaults;\n    lodash.defer = defer;\n    lodash.delay = delay;\n    lodash.difference = difference;\n    lodash.filter = filter;\n    lodash.flatten = flatten;\n    lodash.forEach = forEach;\n    lodash.forEachRight = forEachRight;\n    lodash.forIn = forIn;\n    lodash.forInRight = forInRight;\n    lodash.forOwn = forOwn;\n    lodash.forOwnRight = forOwnRight;\n    lodash.functions = functions;\n    lodash.groupBy = groupBy;\n    lodash.indexBy = indexBy;\n    lodash.initial = initial;\n    lodash.intersection = intersection;\n    lodash.invert = invert;\n    lodash.invoke = invoke;\n    lodash.keys = keys;\n    lodash.map = map;\n    lodash.mapValues = mapValues;\n    lodash.max = max;\n    lodash.memoize = memoize;\n    lodash.merge = merge;\n    lodash.min = min;\n    lodash.omit = omit;\n    lodash.once = once;\n    lodash.pairs = pairs;\n    lodash.partial = partial;\n    lodash.partialRight = partialRight;\n    lodash.pick = pick;\n    lodash.pluck = pluck;\n    lodash.property = property;\n    lodash.pull = pull;\n    lodash.range = range;\n    lodash.reject = reject;\n    lodash.remove = remove;\n    lodash.rest = rest;\n    lodash.shuffle = shuffle;\n    lodash.sortBy = sortBy;\n    lodash.tap = tap;\n    lodash.throttle = throttle;\n    lodash.times = times;\n    lodash.toArray = toArray;\n    lodash.transform = transform;\n    lodash.union = union;\n    lodash.uniq = uniq;\n    lodash.values = values;\n    lodash.where = where;\n    lodash.without = without;\n    lodash.wrap = wrap;\n    lodash.xor = xor;\n    lodash.zip = zip;\n    lodash.zipObject = zipObject;\n\n    // add aliases\n    lodash.collect = map;\n    lodash.drop = rest;\n    lodash.each = forEach;\n    lodash.eachRight = forEachRight;\n    lodash.extend = assign;\n    lodash.methods = functions;\n    lodash.object = zipObject;\n    lodash.select = filter;\n    lodash.tail = rest;\n    lodash.unique = uniq;\n    lodash.unzip = zip;\n\n    // add functions to `lodash.prototype`\n    mixin(lodash);\n\n    /*--------------------------------------------------------------------------*/\n\n    // add functions that return unwrapped values when chaining\n    lodash.clone = clone;\n    lodash.cloneDeep = cloneDeep;\n    lodash.contains = contains;\n    lodash.escape = escape;\n    lodash.every = every;\n    lodash.find = find;\n    lodash.findIndex = findIndex;\n    lodash.findKey = findKey;\n    lodash.findLast = findLast;\n    lodash.findLastIndex = findLastIndex;\n    lodash.findLastKey = findLastKey;\n    lodash.has = has;\n    lodash.identity = identity;\n    lodash.indexOf = indexOf;\n    lodash.isArguments = isArguments;\n    lodash.isArray = isArray;\n    lodash.isBoolean = isBoolean;\n    lodash.isDate = isDate;\n    lodash.isElement = isElement;\n    lodash.isEmpty = isEmpty;\n    lodash.isEqual = isEqual;\n    lodash.isFinite = isFinite;\n    lodash.isFunction = isFunction;\n    lodash.isNaN = isNaN;\n    lodash.isNull = isNull;\n    lodash.isNumber = isNumber;\n    lodash.isObject = isObject;\n    lodash.isPlainObject = isPlainObject;\n    lodash.isRegExp = isRegExp;\n    lodash.isString = isString;\n    lodash.isUndefined = isUndefined;\n    lodash.lastIndexOf = lastIndexOf;\n    lodash.mixin = mixin;\n    lodash.noConflict = noConflict;\n    lodash.noop = noop;\n    lodash.now = now;\n    lodash.parseInt = parseInt;\n    lodash.random = random;\n    lodash.reduce = reduce;\n    lodash.reduceRight = reduceRight;\n    lodash.result = result;\n    lodash.runInContext = runInContext;\n    lodash.size = size;\n    lodash.some = some;\n    lodash.sortedIndex = sortedIndex;\n    lodash.template = template;\n    lodash.unescape = unescape;\n    lodash.uniqueId = uniqueId;\n\n    // add aliases\n    lodash.all = every;\n    lodash.any = some;\n    lodash.detect = find;\n    lodash.findWhere = find;\n    lodash.foldl = reduce;\n    lodash.foldr = reduceRight;\n    lodash.include = contains;\n    lodash.inject = reduce;\n\n    mixin(function() {\n      var source = {}\n      forOwn(lodash, function(func, methodName) {\n        if (!lodash.prototype[methodName]) {\n          source[methodName] = func;\n        }\n      });\n      return source;\n    }(), false);\n\n    /*--------------------------------------------------------------------------*/\n\n    // add functions capable of returning wrapped and unwrapped values when chaining\n    lodash.first = first;\n    lodash.last = last;\n    lodash.sample = sample;\n\n    // add aliases\n    lodash.take = first;\n    lodash.head = first;\n\n    forOwn(lodash, function(func, methodName) {\n      var callbackable = methodName !== 'sample';\n      if (!lodash.prototype[methodName]) {\n        lodash.prototype[methodName]= function(n, guard) {\n          var chainAll = this.__chain__,\n              result = func(this.__wrapped__, n, guard);\n\n          return !chainAll && (n == null || (guard && !(callbackable && typeof n == 'function')))\n            ? result\n            : new lodashWrapper(result, chainAll);\n        };\n      }\n    });\n\n    /*--------------------------------------------------------------------------*/\n\n    /**\n     * The semantic version number.\n     *\n     * @static\n     * @memberOf _\n     * @type string\n     */\n    lodash.VERSION = '2.4.1';\n\n    // add \"Chaining\" functions to the wrapper\n    lodash.prototype.chain = wrapperChain;\n    lodash.prototype.toString = wrapperToString;\n    lodash.prototype.value = wrapperValueOf;\n    lodash.prototype.valueOf = wrapperValueOf;\n\n    // add `Array` functions that return unwrapped values\n    forEach(['join', 'pop', 'shift'], function(methodName) {\n      var func = arrayRef[methodName];\n      lodash.prototype[methodName] = function() {\n        var chainAll = this.__chain__,\n            result = func.apply(this.__wrapped__, arguments);\n\n        return chainAll\n          ? new lodashWrapper(result, chainAll)\n          : result;\n      };\n    });\n\n    // add `Array` functions that return the existing wrapped value\n    forEach(['push', 'reverse', 'sort', 'unshift'], function(methodName) {\n      var func = arrayRef[methodName];\n      lodash.prototype[methodName] = function() {\n        func.apply(this.__wrapped__, arguments);\n        return this;\n      };\n    });\n\n    // add `Array` functions that return new wrapped values\n    forEach(['concat', 'slice', 'splice'], function(methodName) {\n      var func = arrayRef[methodName];\n      lodash.prototype[methodName] = function() {\n        return new lodashWrapper(func.apply(this.__wrapped__, arguments), this.__chain__);\n      };\n    });\n\n    return lodash;\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  // expose Lo-Dash\n  var _ = runInContext();\n\n  // some AMD build optimizers like r.js check for condition patterns like the following:\n  if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {\n    // Expose Lo-Dash to the global object even when an AMD loader is present in\n    // case Lo-Dash is loaded with a RequireJS shim config.\n    // See http://requirejs.org/docs/api.html#config-shim\n    root._ = _;\n\n    // define as an anonymous module so, through path mapping, it can be\n    // referenced as the \"underscore\" module\n    define(function() {\n      return _;\n    });\n  }\n  // check for `exports` after `define` in case a build optimizer adds an `exports` object\n  else if (freeExports && freeModule) {\n    // in Node.js or RingoJS\n    if (moduleExports) {\n      (freeModule.exports = _)._ = _;\n    }\n    // in Narwhal or Rhino -require\n    else {\n      freeExports._ = _;\n    }\n  }\n  else {\n    // in a browser or Rhino\n    root._ = _;\n  }\n}.call(this));\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js":{"id":15,"canonicalName":"jslibs/kinetic.js","code":"(function () {\n    exports.Kinetic = require('20', module);\n}.call(this));","map":"{\"version\":3,\"sources\":[\"jslibs/kinetic.js\"],\"names\":[\"exports\",\"Kinetic\",\"require\",\"call\"],\"mappings\":\"AACA,CAAC,YAAW;AAAA,IACVA,OAAA,CAAQC,OAAR,GAAkBC,OAAA,C,IAAA,E,MAAA,CAAlB,CADU;AAAA,CAAZ,CAGGC,IAHH,CAGQ,IAHR\"}","lineCount":3,"mtime":1390100822000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic-v4.7.1.js","canonicalName":"jslibs/kinetic-v4.7.1.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.6.3\n(function() {\n  exports.Kinetic = require(\"./kinetic-v4.7.1.js\");\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic-v4.7.1.js":{"id":20,"canonicalName":"jslibs/kinetic-v4.7.1.js","code":"var Kinetic = {};\n(function () {\n    Kinetic = {\n        version: '4.7.1',\n        stages: [],\n        idCounter: 0,\n        ids: {},\n        names: {},\n        shapes: {},\n        listenClickTap: false,\n        inDblClickWindow: false,\n        enableTrace: false,\n        traceArrMax: 100,\n        dblClickWindow: 400,\n        pixelRatio: undefined,\n        UA: function () {\n            var ua = navigator.userAgent.toLowerCase(), match = /(chrome)[ \\/]([\\w.]+)/.exec(ua) || /(webkit)[ \\/]([\\w.]+)/.exec(ua) || /(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec(ua) || /(msie) ([\\w.]+)/.exec(ua) || ua.indexOf('compatible') < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(ua) || [];\n            return {\n                browser: match[1] || '',\n                version: match[2] || '0'\n            };\n        }(),\n        Filters: {},\n        Node: function (config) {\n            this._init(config);\n        },\n        Shape: function (config) {\n            this.__init(config);\n        },\n        Container: function (config) {\n            this.__init(config);\n        },\n        Stage: function (config) {\n            this.___init(config);\n        },\n        Layer: function (config) {\n            this.___init(config);\n        },\n        Group: function (config) {\n            this.___init(config);\n        },\n        isDragging: function () {\n            var dd = Kinetic.DD;\n            if (!dd) {\n                return false;\n            } else {\n                return dd.isDragging;\n            }\n        },\n        isDragReady: function () {\n            var dd = Kinetic.DD;\n            if (!dd) {\n                return false;\n            } else {\n                return !!dd.node;\n            }\n        },\n        _addId: function (node, id) {\n            if (id !== undefined) {\n                this.ids[id] = node;\n            }\n        },\n        _removeId: function (id) {\n            if (id !== undefined) {\n                delete this.ids[id];\n            }\n        },\n        _addName: function (node, name) {\n            if (name !== undefined) {\n                if (this.names[name] === undefined) {\n                    this.names[name] = [];\n                }\n                this.names[name].push(node);\n            }\n        },\n        _removeName: function (name, _id) {\n            if (name !== undefined) {\n                var nodes = this.names[name];\n                if (nodes !== undefined) {\n                    for (var n = 0; n < nodes.length; n++) {\n                        var no = nodes[n];\n                        if (no._id === _id) {\n                            nodes.splice(n, 1);\n                        }\n                    }\n                    if (nodes.length === 0) {\n                        delete this.names[name];\n                    }\n                }\n            }\n        }\n    };\n}());\n(function (root, factory) {\n    if (typeof exports === 'object') {\n        module.exports = factory();\n    } else if (typeof define === 'function' && define.amd) {\n        define(factory);\n    } else {\n        root.returnExports = factory();\n    }\n}(this, function () {\n    return Kinetic;\n}));\n;\n(function () {\n    Kinetic.Collection = function () {\n        var args = [].slice.call(arguments), length = args.length, i = 0;\n        this.length = length;\n        for (; i < length; i++) {\n            this[i] = args[i];\n        }\n        return this;\n    };\n    Kinetic.Collection.prototype = [];\n    Kinetic.Collection.prototype.each = function (func) {\n        for (var n = 0; n < this.length; n++) {\n            func(this[n], n);\n        }\n    };\n    Kinetic.Collection.prototype.toArray = function () {\n        var arr = [], len = this.length, n;\n        for (n = 0; n < len; n++) {\n            arr.push(this[n]);\n        }\n        return arr;\n    };\n    Kinetic.Collection.toCollection = function (arr) {\n        var collection = new Kinetic.Collection(), len = arr.length, n;\n        for (n = 0; n < len; n++) {\n            collection.push(arr[n]);\n        }\n        return collection;\n    };\n    Kinetic.Collection.mapMethods = function (arr) {\n        var leng = arr.length, n;\n        for (n = 0; n < leng; n++) {\n            (function (i) {\n                var method = arr[i];\n                Kinetic.Collection.prototype[method] = function () {\n                    var len = this.length, i;\n                    args = [].slice.call(arguments);\n                    for (i = 0; i < len; i++) {\n                        this[i][method].apply(this[i], args);\n                    }\n                };\n            }(n));\n        }\n    };\n    Kinetic.Transform = function () {\n        this.m = [\n            1,\n            0,\n            0,\n            1,\n            0,\n            0\n        ];\n    };\n    Kinetic.Transform.prototype = {\n        translate: function (x, y) {\n            this.m[4] += this.m[0] * x + this.m[2] * y;\n            this.m[5] += this.m[1] * x + this.m[3] * y;\n        },\n        scale: function (sx, sy) {\n            this.m[0] *= sx;\n            this.m[1] *= sx;\n            this.m[2] *= sy;\n            this.m[3] *= sy;\n        },\n        rotate: function (rad) {\n            var c = Math.cos(rad);\n            var s = Math.sin(rad);\n            var m11 = this.m[0] * c + this.m[2] * s;\n            var m12 = this.m[1] * c + this.m[3] * s;\n            var m21 = this.m[0] * -s + this.m[2] * c;\n            var m22 = this.m[1] * -s + this.m[3] * c;\n            this.m[0] = m11;\n            this.m[1] = m12;\n            this.m[2] = m21;\n            this.m[3] = m22;\n        },\n        getTranslation: function () {\n            return {\n                x: this.m[4],\n                y: this.m[5]\n            };\n        },\n        skew: function (sx, sy) {\n            var m11 = this.m[0] + this.m[2] * sy;\n            var m12 = this.m[1] + this.m[3] * sy;\n            var m21 = this.m[2] + this.m[0] * sx;\n            var m22 = this.m[3] + this.m[1] * sx;\n            this.m[0] = m11;\n            this.m[1] = m12;\n            this.m[2] = m21;\n            this.m[3] = m22;\n        },\n        multiply: function (matrix) {\n            var m11 = this.m[0] * matrix.m[0] + this.m[2] * matrix.m[1];\n            var m12 = this.m[1] * matrix.m[0] + this.m[3] * matrix.m[1];\n            var m21 = this.m[0] * matrix.m[2] + this.m[2] * matrix.m[3];\n            var m22 = this.m[1] * matrix.m[2] + this.m[3] * matrix.m[3];\n            var dx = this.m[0] * matrix.m[4] + this.m[2] * matrix.m[5] + this.m[4];\n            var dy = this.m[1] * matrix.m[4] + this.m[3] * matrix.m[5] + this.m[5];\n            this.m[0] = m11;\n            this.m[1] = m12;\n            this.m[2] = m21;\n            this.m[3] = m22;\n            this.m[4] = dx;\n            this.m[5] = dy;\n        },\n        invert: function () {\n            var d = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]);\n            var m0 = this.m[3] * d;\n            var m1 = -this.m[1] * d;\n            var m2 = -this.m[2] * d;\n            var m3 = this.m[0] * d;\n            var m4 = d * (this.m[2] * this.m[5] - this.m[3] * this.m[4]);\n            var m5 = d * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);\n            this.m[0] = m0;\n            this.m[1] = m1;\n            this.m[2] = m2;\n            this.m[3] = m3;\n            this.m[4] = m4;\n            this.m[5] = m5;\n        },\n        getMatrix: function () {\n            return this.m;\n        },\n        setAbsolutePosition: function (x, y) {\n            var m0 = this.m[0], m1 = this.m[1], m2 = this.m[2], m3 = this.m[3], m4 = this.m[4], m5 = this.m[5], yt = (m0 * (y - m5) - m1 * (x - m4)) / (m0 * m3 - m1 * m2), xt = (x - m4 - m2 * yt) / m0;\n            this.translate(xt, yt);\n        }\n    };\n    var CANVAS = 'canvas', CONTEXT_2D = '2d', OBJECT_ARRAY = '[object Array]', OBJECT_NUMBER = '[object Number]', OBJECT_STRING = '[object String]', PI_OVER_DEG180 = Math.PI / 180, DEG180_OVER_PI = 180 / Math.PI, HASH = '#', EMPTY_STRING = '', ZERO = '0', KINETIC_WARNING = 'Kinetic warning: ', KINETIC_ERROR = 'Kinetic error: ', RGB_PAREN = 'rgb(', COLORS = {\n            aqua: [\n                0,\n                255,\n                255\n            ],\n            lime: [\n                0,\n                255,\n                0\n            ],\n            silver: [\n                192,\n                192,\n                192\n            ],\n            black: [\n                0,\n                0,\n                0\n            ],\n            maroon: [\n                128,\n                0,\n                0\n            ],\n            teal: [\n                0,\n                128,\n                128\n            ],\n            blue: [\n                0,\n                0,\n                255\n            ],\n            navy: [\n                0,\n                0,\n                128\n            ],\n            white: [\n                255,\n                255,\n                255\n            ],\n            fuchsia: [\n                255,\n                0,\n                255\n            ],\n            olive: [\n                128,\n                128,\n                0\n            ],\n            yellow: [\n                255,\n                255,\n                0\n            ],\n            orange: [\n                255,\n                165,\n                0\n            ],\n            gray: [\n                128,\n                128,\n                128\n            ],\n            purple: [\n                128,\n                0,\n                128\n            ],\n            green: [\n                0,\n                128,\n                0\n            ],\n            red: [\n                255,\n                0,\n                0\n            ],\n            pink: [\n                255,\n                192,\n                203\n            ],\n            cyan: [\n                0,\n                255,\n                255\n            ],\n            transparent: [\n                255,\n                255,\n                255,\n                0\n            ]\n        }, RGB_REGEX = /rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)/;\n    Kinetic.Util = {\n        _isElement: function (obj) {\n            return !!(obj && obj.nodeType == 1);\n        },\n        _isFunction: function (obj) {\n            return !!(obj && obj.constructor && obj.call && obj.apply);\n        },\n        _isObject: function (obj) {\n            return !!obj && obj.constructor == Object;\n        },\n        _isArray: function (obj) {\n            return Object.prototype.toString.call(obj) == OBJECT_ARRAY;\n        },\n        _isNumber: function (obj) {\n            return Object.prototype.toString.call(obj) == OBJECT_NUMBER;\n        },\n        _isString: function (obj) {\n            return Object.prototype.toString.call(obj) == OBJECT_STRING;\n        },\n        _hasMethods: function (obj) {\n            var names = [], key;\n            for (key in obj) {\n                if (this._isFunction(obj[key])) {\n                    names.push(key);\n                }\n            }\n            return names.length > 0;\n        },\n        _isInDocument: function (el) {\n            while (el = el.parentNode) {\n                if (el == document) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        _roundArrValues: function (arr) {\n            var retArr = [], len = arr.length, _isNumber = Kinetic.Util._isNumber, n, val;\n            for (n = 0; n < len; n++) {\n                val = arr[n];\n                if (_isNumber(val)) {\n                    val = Math.round(val * 1000) / 1000;\n                }\n                retArr.push(val);\n            }\n            return retArr;\n        },\n        _getXY: function (arg) {\n            if (this._isNumber(arg)) {\n                return {\n                    x: arg,\n                    y: arg\n                };\n            } else if (this._isArray(arg)) {\n                if (arg.length === 1) {\n                    var val = arg[0];\n                    if (this._isNumber(val)) {\n                        return {\n                            x: val,\n                            y: val\n                        };\n                    } else if (this._isArray(val)) {\n                        return {\n                            x: val[0],\n                            y: val[1]\n                        };\n                    } else if (this._isObject(val)) {\n                        return val;\n                    }\n                } else if (arg.length >= 2) {\n                    return {\n                        x: arg[0],\n                        y: arg[1]\n                    };\n                }\n            } else if (this._isObject(arg)) {\n                return arg;\n            }\n            return null;\n        },\n        _getSize: function (arg) {\n            if (this._isNumber(arg)) {\n                return {\n                    width: arg,\n                    height: arg\n                };\n            } else if (this._isArray(arg)) {\n                if (arg.length === 1) {\n                    var val = arg[0];\n                    if (this._isNumber(val)) {\n                        return {\n                            width: val,\n                            height: val\n                        };\n                    } else if (this._isArray(val)) {\n                        if (val.length >= 4) {\n                            return {\n                                width: val[2],\n                                height: val[3]\n                            };\n                        } else if (val.length >= 2) {\n                            return {\n                                width: val[0],\n                                height: val[1]\n                            };\n                        }\n                    } else if (this._isObject(val)) {\n                        return val;\n                    }\n                } else if (arg.length >= 4) {\n                    return {\n                        width: arg[2],\n                        height: arg[3]\n                    };\n                } else if (arg.length >= 2) {\n                    return {\n                        width: arg[0],\n                        height: arg[1]\n                    };\n                }\n            } else if (this._isObject(arg)) {\n                return arg;\n            }\n            return null;\n        },\n        _getPoints: function (arg) {\n            var arr = [], n, len;\n            if (arg === undefined) {\n                return [];\n            }\n            len = arg.length;\n            if (this._isArray(arg[0])) {\n                for (n = 0; n < len; n++) {\n                    arr.push({\n                        x: arg[n][0],\n                        y: arg[n][1]\n                    });\n                }\n                return arr;\n            }\n            if (this._isObject(arg[0])) {\n                return arg;\n            } else {\n                for (n = 0; n < len; n += 2) {\n                    arr.push({\n                        x: arg[n],\n                        y: arg[n + 1]\n                    });\n                }\n                return arr;\n            }\n        },\n        _getImage: function (arg, callback) {\n            var imageObj, canvas, context, dataUrl;\n            if (!arg) {\n                callback(null);\n            } else if (this._isElement(arg)) {\n                callback(arg);\n            } else if (this._isString(arg)) {\n                imageObj = new Image();\n                imageObj.onload = function () {\n                    callback(imageObj);\n                };\n                imageObj.src = arg;\n            } else if (arg.data) {\n                canvas = document.createElement(CANVAS);\n                canvas.width = arg.width;\n                canvas.height = arg.height;\n                _context = canvas.getContext(CONTEXT_2D);\n                _context.putImageData(arg, 0, 0);\n                dataUrl = canvas.toDataURL();\n                imageObj = new Image();\n                imageObj.onload = function () {\n                    callback(imageObj);\n                };\n                imageObj.src = dataUrl;\n            } else {\n                callback(null);\n            }\n        },\n        _rgbToHex: function (r, g, b) {\n            return ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);\n        },\n        _hexToRgb: function (hex) {\n            hex = hex.replace(HASH, EMPTY_STRING);\n            var bigint = parseInt(hex, 16);\n            return {\n                r: bigint >> 16 & 255,\n                g: bigint >> 8 & 255,\n                b: bigint & 255\n            };\n        },\n        getRandomColor: function () {\n            var randColor = (Math.random() * 16777215 << 0).toString(16);\n            while (randColor.length < 6) {\n                randColor = ZERO + randColor;\n            }\n            return HASH + randColor;\n        },\n        get: function (val, def) {\n            if (val === undefined) {\n                return def;\n            } else {\n                return val;\n            }\n        },\n        getRGB: function (color) {\n            var rgb;\n            if (color in COLORS) {\n                rgb = COLORS[color];\n                return {\n                    r: rgb[0],\n                    g: rgb[1],\n                    b: rgb[2]\n                };\n            } else if (color[0] === HASH) {\n                return this._hexToRgb(color.substring(1));\n            } else if (color.substr(0, 4) === RGB_PAREN) {\n                rgb = RGB_REGEX.exec(color.replace(/ /g, ''));\n                return {\n                    r: parseInt(rgb[1], 10),\n                    g: parseInt(rgb[2], 10),\n                    b: parseInt(rgb[3], 10)\n                };\n            } else {\n                return {\n                    r: 0,\n                    g: 0,\n                    b: 0\n                };\n            }\n        },\n        _merge: function (o1, o2) {\n            var retObj = this._clone(o2);\n            for (var key in o1) {\n                if (this._isObject(o1[key])) {\n                    retObj[key] = this._merge(o1[key], retObj[key]);\n                } else {\n                    retObj[key] = o1[key];\n                }\n            }\n            return retObj;\n        },\n        _clone: function (obj) {\n            var retObj = {};\n            for (var key in obj) {\n                if (this._isObject(obj[key])) {\n                    retObj[key] = this._clone(obj[key]);\n                } else {\n                    retObj[key] = obj[key];\n                }\n            }\n            return retObj;\n        },\n        _degToRad: function (deg) {\n            return deg * PI_OVER_DEG180;\n        },\n        _radToDeg: function (rad) {\n            return rad * DEG180_OVER_PI;\n        },\n        _capitalize: function (str) {\n            return str.charAt(0).toUpperCase() + str.slice(1);\n        },\n        error: function (str) {\n            throw new Error(KINETIC_ERROR + str);\n        },\n        warn: function (str) {\n            if (window.console && console.warn) {\n                console.warn(KINETIC_WARNING + str);\n            }\n        },\n        extend: function (c1, c2) {\n            for (var key in c2.prototype) {\n                if (!(key in c1.prototype)) {\n                    c1.prototype[key] = c2.prototype[key];\n                }\n            }\n        },\n        addMethods: function (constructor, methods) {\n            var key;\n            for (key in methods) {\n                constructor.prototype[key] = methods[key];\n            }\n        },\n        _getControlPoints: function (p0, p1, p2, t) {\n            var x0 = p0.x;\n            var y0 = p0.y;\n            var x1 = p1.x;\n            var y1 = p1.y;\n            var x2 = p2.x;\n            var y2 = p2.y;\n            var d01 = Math.sqrt(Math.pow(x1 - x0, 2) + Math.pow(y1 - y0, 2));\n            var d12 = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n            var fa = t * d01 / (d01 + d12);\n            var fb = t * d12 / (d01 + d12);\n            var p1x = x1 - fa * (x2 - x0);\n            var p1y = y1 - fa * (y2 - y0);\n            var p2x = x1 + fb * (x2 - x0);\n            var p2y = y1 + fb * (y2 - y0);\n            return [\n                {\n                    x: p1x,\n                    y: p1y\n                },\n                {\n                    x: p2x,\n                    y: p2y\n                }\n            ];\n        },\n        _expandPoints: function (points, tension) {\n            var length = points.length, allPoints = [], n, cp;\n            for (n = 1; n < length - 1; n++) {\n                cp = Kinetic.Util._getControlPoints(points[n - 1], points[n], points[n + 1], tension);\n                allPoints.push(cp[0]);\n                allPoints.push(points[n]);\n                allPoints.push(cp[1]);\n            }\n            return allPoints;\n        },\n        _removeLastLetter: function (str) {\n            return str.substring(0, str.length - 1);\n        }\n    };\n}());\n;\n(function () {\n    var canvas = document.createElement('canvas'), context = canvas.getContext('2d'), devicePixelRatio = window.devicePixelRatio || 1, backingStoreRatio = context.webkitBackingStorePixelRatio || context.mozBackingStorePixelRatio || context.msBackingStorePixelRatio || context.oBackingStorePixelRatio || context.backingStorePixelRatio || 1, _pixelRatio = devicePixelRatio / backingStoreRatio;\n    Kinetic.Canvas = function (config) {\n        this.init(config);\n    };\n    Kinetic.Canvas.prototype = {\n        init: function (config) {\n            config = config || {};\n            var pixelRatio = config.pixelRatio || Kinetic.pixelRatio || _pixelRatio;\n            this.pixelRatio = pixelRatio;\n            this._canvas = document.createElement('canvas');\n            this._canvas.style.padding = 0;\n            this._canvas.style.margin = 0;\n            this._canvas.style.border = 0;\n            this._canvas.style.background = 'transparent';\n            this._canvas.style.position = 'absolute';\n            this._canvas.style.top = 0;\n            this._canvas.style.left = 0;\n        },\n        getContext: function () {\n            return this.context;\n        },\n        getPixelRatio: function () {\n            return this.pixelRatio;\n        },\n        setPixelRatio: function (pixelRatio) {\n            this.pixelRatio = pixelRatio;\n            this.setSize(this.getWidth(), this.getHeight());\n        },\n        setWidth: function (width) {\n            this.width = this._canvas.width = width * this.pixelRatio;\n            this._canvas.style.width = width + 'px';\n        },\n        setHeight: function (height) {\n            this.height = this._canvas.height = height * this.pixelRatio;\n            this._canvas.style.height = height + 'px';\n        },\n        getWidth: function () {\n            return this.width;\n        },\n        getHeight: function () {\n            return this.height;\n        },\n        setSize: function (width, height) {\n            this.setWidth(width);\n            this.setHeight(height);\n        },\n        toDataURL: function (mimeType, quality) {\n            try {\n                return this._canvas.toDataURL(mimeType, quality);\n            } catch (e) {\n                try {\n                    return this._canvas.toDataURL();\n                } catch (err) {\n                    Kinetic.Util.warn('Unable to get data URL. ' + err.message);\n                    return '';\n                }\n            }\n        }\n    };\n    Kinetic.SceneCanvas = function (config) {\n        config = config || {};\n        var width = config.width || 0, height = config.height || 0;\n        Kinetic.Canvas.call(this, config);\n        this.context = new Kinetic.SceneContext(this);\n        this.setSize(width, height);\n    };\n    Kinetic.SceneCanvas.prototype = {\n        setWidth: function (width) {\n            var pixelRatio = this.pixelRatio, _context = this.getContext()._context;\n            Kinetic.Canvas.prototype.setWidth.call(this, width);\n            _context.scale(pixelRatio, pixelRatio);\n        },\n        setHeight: function (height) {\n            var pixelRatio = this.pixelRatio, _context = this.getContext()._context;\n            Kinetic.Canvas.prototype.setHeight.call(this, height);\n            _context.scale(pixelRatio, pixelRatio);\n        }\n    };\n    Kinetic.Util.extend(Kinetic.SceneCanvas, Kinetic.Canvas);\n    Kinetic.HitCanvas = function (config) {\n        config = config || {};\n        var width = config.width || 0, height = config.height || 0;\n        Kinetic.Canvas.call(this, config);\n        this.context = new Kinetic.HitContext(this);\n        this.setSize(width, height);\n    };\n    Kinetic.Util.extend(Kinetic.HitCanvas, Kinetic.Canvas);\n}());\n;\n(function () {\n    var COMMA = ',', OPEN_PAREN = '(', CLOSE_PAREN = ')', OPEN_PAREN_BRACKET = '([', CLOSE_BRACKET_PAREN = '])', SEMICOLON = ';', DOUBLE_PAREN = '()', EMPTY_STRING = '', EQUALS = '=', SET = 'set', CONTEXT_METHODS = [\n            'arc',\n            'arcTo',\n            'beginPath',\n            'bezierCurveTo',\n            'clearRect',\n            'clip',\n            'closePath',\n            'createLinearGradient',\n            'createPattern',\n            'createRadialGradient',\n            'drawImage',\n            'fill',\n            'fillText',\n            'getImageData',\n            'lineTo',\n            'moveTo',\n            'putImageData',\n            'quadraticCurveTo',\n            'rect',\n            'restore',\n            'rotate',\n            'save',\n            'scale',\n            'setLineDash',\n            'setTransform',\n            'stroke',\n            'strokeText',\n            'transform',\n            'translate'\n        ];\n    Kinetic.Context = function (canvas) {\n        this.init(canvas);\n    };\n    Kinetic.Context.prototype = {\n        init: function (canvas) {\n            this.canvas = canvas;\n            this._context = canvas._canvas.getContext('2d');\n            if (Kinetic.enableTrace) {\n                this.traceArr = [];\n                this._enableTrace();\n            }\n        },\n        getTrace: function (relaxed) {\n            var traceArr = this.traceArr, len = traceArr.length, str = '', n, trace, method, args;\n            for (n = 0; n < len; n++) {\n                trace = traceArr[n];\n                method = trace.method;\n                if (method) {\n                    args = trace.args;\n                    str += method;\n                    if (relaxed) {\n                        str += DOUBLE_PAREN;\n                    } else {\n                        if (Kinetic.Util._isArray(args[0])) {\n                            str += OPEN_PAREN_BRACKET + args.join(COMMA) + CLOSE_BRACKET_PAREN;\n                        } else {\n                            str += OPEN_PAREN + args.join(COMMA) + CLOSE_PAREN;\n                        }\n                    }\n                } else {\n                    str += trace.property;\n                    if (!relaxed) {\n                        str += EQUALS + trace.val;\n                    }\n                }\n                str += SEMICOLON;\n            }\n            return str;\n        },\n        clearTrace: function () {\n            this.traceArr = [];\n        },\n        _trace: function (str) {\n            var traceArr = this.traceArr, len;\n            traceArr.push(str);\n            len = traceArr.length;\n            if (len >= Kinetic.traceArrMax) {\n                traceArr.shift();\n            }\n        },\n        reset: function () {\n            var pixelRatio = this.getCanvas().getPixelRatio();\n            this.setTransform(1 * pixelRatio, 0, 0, 1 * pixelRatio, 0, 0);\n        },\n        getCanvas: function () {\n            return this.canvas;\n        },\n        clear: function () {\n            var args = [].slice.call(arguments), canvas = this.getCanvas(), pos, size;\n            if (args.length) {\n                pos = Kinetic.Util._getXY(args);\n                size = Kinetic.Util._getSize(args);\n                this.clearRect(pos.x || 0, pos.y || 0, size.width, size.height);\n            } else {\n                this.clearRect(0, 0, canvas.getWidth(), canvas.getHeight());\n            }\n        },\n        fillShape: function (shape) {\n            if (shape.getFillEnabled()) {\n                this._fill(shape);\n            }\n        },\n        strokeShape: function (shape) {\n            if (shape.getStrokeEnabled()) {\n                this._stroke(shape);\n            }\n        },\n        fillStrokeShape: function (shape) {\n            var fillEnabled = shape.getFillEnabled();\n            if (fillEnabled) {\n                this._fill(shape);\n            }\n            if (shape.getStrokeEnabled()) {\n                this._stroke(shape, shape.hasShadow() && shape.hasFill() && fillEnabled);\n            }\n        },\n        _applyLineCap: function (shape) {\n            var lineCap = shape.getLineCap();\n            if (lineCap) {\n                this.setAttr('lineCap', lineCap);\n            }\n        },\n        _applyOpacity: function (shape) {\n            var absOpacity = shape.getAbsoluteOpacity();\n            if (absOpacity !== 1) {\n                this.setAttr('globalAlpha', absOpacity);\n            }\n        },\n        _applyLineJoin: function (shape) {\n            var lineJoin = shape.getLineJoin();\n            if (lineJoin) {\n                this.setAttr('lineJoin', lineJoin);\n            }\n        },\n        _applyAncestorTransforms: function (shape) {\n            var m = shape.getAbsoluteTransform().getMatrix();\n            this.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n        },\n        _clip: function (container) {\n            var clipX = container.getClipX() || 0, clipY = container.getClipY() || 0, clipWidth = container.getClipWidth(), clipHeight = container.getClipHeight();\n            this.save();\n            this._applyAncestorTransforms(container);\n            this.beginPath();\n            this.rect(clipX, clipY, clipWidth, clipHeight);\n            this.clip();\n            this.reset();\n            container._drawChildren(this.getCanvas());\n            this.restore();\n        },\n        setAttr: function (attr, val) {\n            this._context[attr] = val;\n        },\n        arc: function () {\n            var a = arguments;\n            this._context.arc(a[0], a[1], a[2], a[3], a[4], a[5]);\n        },\n        beginPath: function () {\n            this._context.beginPath();\n        },\n        bezierCurveTo: function () {\n            var a = arguments;\n            this._context.bezierCurveTo(a[0], a[1], a[2], a[3], a[4], a[5]);\n        },\n        clearRect: function () {\n            var a = arguments;\n            this._context.clearRect(a[0], a[1], a[2], a[3]);\n        },\n        clip: function () {\n            this._context.clip();\n        },\n        closePath: function () {\n            this._context.closePath();\n        },\n        createLinearGradient: function () {\n            var a = arguments;\n            return this._context.createLinearGradient(a[0], a[1], a[2], a[3]);\n        },\n        createPattern: function () {\n            var a = arguments;\n            return this._context.createPattern(a[0], a[1]);\n        },\n        createRadialGradient: function () {\n            var a = arguments;\n            return this._context.createRadialGradient(a[0], a[1], a[2], a[3], a[4], a[5]);\n        },\n        drawImage: function () {\n            var a = arguments, _context = this._context;\n            if (a.length === 3) {\n                _context.drawImage(a[0], a[1], a[2]);\n            } else if (a.length === 5) {\n                _context.drawImage(a[0], a[1], a[2], a[3], a[4]);\n            } else if (a.length === 9) {\n                _context.drawImage(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]);\n            }\n        },\n        fill: function () {\n            this._context.fill();\n        },\n        fillText: function () {\n            var a = arguments;\n            this._context.fillText(a[0], a[1], a[2]);\n        },\n        getImageData: function () {\n            var a = arguments;\n            return this._context.getImageData(a[0], a[1], a[2], a[3]);\n        },\n        lineTo: function () {\n            var a = arguments;\n            this._context.lineTo(a[0], a[1]);\n        },\n        moveTo: function () {\n            var a = arguments;\n            this._context.moveTo(a[0], a[1]);\n        },\n        rect: function () {\n            var a = arguments;\n            this._context.rect(a[0], a[1], a[2], a[3]);\n        },\n        putImageData: function () {\n            var a = arguments;\n            this._context.putImageData(a[0], a[1], a[2]);\n        },\n        quadraticCurveTo: function () {\n            var a = arguments;\n            this._context.quadraticCurveTo(a[0], a[1], a[2], a[3]);\n        },\n        restore: function () {\n            this._context.restore();\n        },\n        rotate: function () {\n            var a = arguments;\n            this._context.rotate(a[0]);\n        },\n        save: function () {\n            this._context.save();\n        },\n        scale: function () {\n            var a = arguments;\n            this._context.scale(a[0], a[1]);\n        },\n        setLineDash: function () {\n            var a = arguments, _context = this._context;\n            if (this._context.setLineDash) {\n                _context.setLineDash(a[0]);\n            } else if ('mozDash' in _context) {\n                _context.mozDash = a[0];\n            } else if ('webkitLineDash' in _context) {\n                _context.webkitLineDash = a[0];\n            }\n        },\n        setTransform: function () {\n            var a = arguments;\n            this._context.setTransform(a[0], a[1], a[2], a[3], a[4], a[5]);\n        },\n        stroke: function () {\n            this._context.stroke();\n        },\n        strokeText: function () {\n            var a = arguments;\n            this._context.strokeText(a[0], a[1], a[2]);\n        },\n        transform: function () {\n            var a = arguments;\n            this._context.transform(a[0], a[1], a[2], a[3], a[4], a[5]);\n        },\n        translate: function () {\n            var a = arguments;\n            this._context.translate(a[0], a[1]);\n        },\n        _enableTrace: function () {\n            var that = this, len = CONTEXT_METHODS.length, _roundArrValues = Kinetic.Util._roundArrValues, origSetter = this.setAttr, n, args;\n            for (n = 0; n < len; n++) {\n                (function (methodName) {\n                    var origMethod = that[methodName], ret;\n                    that[methodName] = function () {\n                        args = _roundArrValues(Array.prototype.slice.call(arguments, 0));\n                        ret = origMethod.apply(that, arguments);\n                        that._trace({\n                            method: methodName,\n                            args: args\n                        });\n                        return ret;\n                    };\n                }(CONTEXT_METHODS[n]));\n            }\n            that.setAttr = function () {\n                origSetter.apply(that, arguments);\n                that._trace({\n                    property: arguments[0],\n                    val: arguments[1]\n                });\n            };\n        }\n    };\n    Kinetic.SceneContext = function (canvas) {\n        Kinetic.Context.call(this, canvas);\n    };\n    Kinetic.SceneContext.prototype = {\n        _fillColor: function (shape) {\n            var fill = shape.getFill();\n            this.setAttr('fillStyle', fill);\n            shape._fillFunc(this);\n        },\n        _fillPattern: function (shape) {\n            var fillPatternImage = shape.getFillPatternImage(), fillPatternX = shape.getFillPatternX(), fillPatternY = shape.getFillPatternY(), fillPatternScale = shape.getFillPatternScale(), fillPatternRotation = shape.getFillPatternRotation(), fillPatternOffset = shape.getFillPatternOffset(), fillPatternRepeat = shape.getFillPatternRepeat();\n            if (fillPatternX || fillPatternY) {\n                this.translate(fillPatternX || 0, fillPatternY || 0);\n            }\n            if (fillPatternRotation) {\n                this.rotate(fillPatternRotation);\n            }\n            if (fillPatternScale) {\n                this.scale(fillPatternScale.x, fillPatternScale.y);\n            }\n            if (fillPatternOffset) {\n                this.translate(-1 * fillPatternOffset.x, -1 * fillPatternOffset.y);\n            }\n            this.setAttr('fillStyle', this.createPattern(fillPatternImage, fillPatternRepeat || 'repeat'));\n            this.fill();\n        },\n        _fillLinearGradient: function (shape) {\n            var start = shape.getFillLinearGradientStartPoint(), end = shape.getFillLinearGradientEndPoint(), colorStops = shape.getFillLinearGradientColorStops(), grd = this.createLinearGradient(start.x, start.y, end.x, end.y);\n            if (colorStops) {\n                for (var n = 0; n < colorStops.length; n += 2) {\n                    grd.addColorStop(colorStops[n], colorStops[n + 1]);\n                }\n                this.setAttr('fillStyle', grd);\n                this.fill();\n            }\n        },\n        _fillRadialGradient: function (shape) {\n            var start = shape.getFillRadialGradientStartPoint(), end = shape.getFillRadialGradientEndPoint(), startRadius = shape.getFillRadialGradientStartRadius(), endRadius = shape.getFillRadialGradientEndRadius(), colorStops = shape.getFillRadialGradientColorStops(), grd = this.createRadialGradient(start.x, start.y, startRadius, end.x, end.y, endRadius);\n            for (var n = 0; n < colorStops.length; n += 2) {\n                grd.addColorStop(colorStops[n], colorStops[n + 1]);\n            }\n            this.setAttr('fillStyle', grd);\n            this.fill();\n        },\n        _fill: function (shape, skipShadow) {\n            var hasColor = shape.getFill(), hasPattern = shape.getFillPatternImage(), hasLinearGradient = shape.getFillLinearGradientColorStops(), hasRadialGradient = shape.getFillRadialGradientColorStops(), fillPriority = shape.getFillPriority();\n            if (!skipShadow && shape.hasShadow()) {\n                this.save();\n                this._applyShadow(shape);\n            }\n            if (hasColor && fillPriority === 'color') {\n                this._fillColor(shape);\n            } else if (hasPattern && fillPriority === 'pattern') {\n                this._fillPattern(shape);\n            } else if (hasLinearGradient && fillPriority === 'linear-gradient') {\n                this._fillLinearGradient(shape);\n            } else if (hasRadialGradient && fillPriority === 'radial-gradient') {\n                this._fillRadialGradient(shape);\n            } else if (hasColor) {\n                this._fillColor(shape);\n            } else if (hasPattern) {\n                this._fillPattern(shape);\n            } else if (hasLinearGradient) {\n                this._fillLinearGradient(shape);\n            } else if (hasRadialGradient) {\n                this._fillRadialGradient(shape);\n            }\n            if (!skipShadow && shape.hasShadow()) {\n                this.restore();\n                this._fill(shape, true);\n            }\n        },\n        _stroke: function (shape, skipShadow) {\n            var stroke = shape.getStroke(), strokeWidth = shape.getStrokeWidth(), dashArray = shape.getDashArray(), strokeScaleEnabled = shape.getStrokeScaleEnabled();\n            if (stroke || strokeWidth) {\n                if (!strokeScaleEnabled) {\n                    this.save();\n                    this.setTransform(1, 0, 0, 1, 0, 0);\n                }\n                this._applyLineCap(shape);\n                if (dashArray && shape.getDashArrayEnabled()) {\n                    this.setLineDash(dashArray);\n                }\n                if (!skipShadow && shape.hasShadow()) {\n                    this._applyShadow(shape);\n                }\n                this.setAttr('lineWidth', strokeWidth || 2);\n                this.setAttr('strokeStyle', stroke || 'black');\n                shape._strokeFunc(this);\n                if (!skipShadow && shape.hasShadow()) {\n                    this._stroke(shape, true);\n                }\n                if (!strokeScaleEnabled) {\n                    this.restore();\n                }\n            }\n        },\n        applyShadow: function (shape, drawFunc) {\n            this.save();\n            this._applyShadow(shape);\n            drawFunc();\n            this.restore();\n            drawFunc();\n        },\n        _applyShadow: function (shape) {\n            var util, absOpacity, color, blur, offset, shadowOpacity;\n            if (shape.hasShadow() && shape.getShadowEnabled()) {\n                util = Kinetic.Util;\n                absOpacity = shape.getAbsoluteOpacity();\n                color = util.get(shape.getShadowColor(), 'black');\n                blur = util.get(shape.getShadowBlur(), 5);\n                shadowOpacity = util.get(shape.getShadowOpacity(), 0);\n                offset = util.get(shape.getShadowOffset(), {\n                    x: 0,\n                    y: 0\n                });\n                if (shadowOpacity) {\n                    this.setAttr('globalAlpha', shadowOpacity * absOpacity);\n                }\n                this.setAttr('shadowColor', color);\n                this.setAttr('shadowBlur', blur);\n                this.setAttr('shadowOffsetX', offset.x);\n                this.setAttr('shadowOffsetY', offset.y);\n            }\n        }\n    };\n    Kinetic.Util.extend(Kinetic.SceneContext, Kinetic.Context);\n    Kinetic.HitContext = function (canvas) {\n        Kinetic.Context.call(this, canvas);\n    };\n    Kinetic.HitContext.prototype = {\n        _fill: function (shape) {\n            this.save();\n            this.setAttr('fillStyle', shape.colorKey);\n            shape._fillFuncHit(this);\n            this.restore();\n        },\n        _stroke: function (shape) {\n            var stroke = shape.getStroke(), strokeWidth = shape.getStrokeWidth();\n            if (stroke || strokeWidth) {\n                this._applyLineCap(shape);\n                this.setAttr('lineWidth', strokeWidth || 2);\n                this.setAttr('strokeStyle', shape.colorKey);\n                shape._strokeFuncHit(this);\n            }\n        }\n    };\n    Kinetic.Util.extend(Kinetic.HitContext, Kinetic.Context);\n}());\n;\n(function () {\n    var ABSOLUTE_OPACITY = 'absoluteOpacity', ABSOLUTE_TRANSFORM = 'absoluteTransform', ADD = 'add', B = 'b', BEFORE = 'before', BLACK = 'black', CHANGE = 'Change', CHILDREN = 'children', DEG = 'Deg', DOT = '.', EMPTY_STRING = '', G = 'g', GET = 'get', HASH = '#', ID = 'id', KINETIC = 'kinetic', LISTENING = 'listening', MOUSEENTER = 'mouseenter', MOUSELEAVE = 'mouseleave', NAME = 'name', OFF = 'off', ON = 'on', PRIVATE_GET = '_get', R = 'r', RGB = 'RGB', SET = 'set', SHAPE = 'Shape', SPACE = ' ', STAGE = 'Stage', TRANSFORM = 'transform', UPPER_B = 'B', UPPER_G = 'G', UPPER_HEIGHT = 'Height', UPPER_R = 'R', UPPER_WIDTH = 'Width', UPPER_X = 'X', UPPER_Y = 'Y', VISIBLE = 'visible', X = 'x', Y = 'y';\n    Kinetic.Factory = {\n        addGetterSetter: function (constructor, attr, def) {\n            this.addGetter(constructor, attr, def);\n            this.addSetter(constructor, attr);\n        },\n        addPointGetterSetter: function (constructor, attr, def) {\n            this.addPointGetter(constructor, attr, def);\n            this.addPointSetter(constructor, attr);\n            this.addGetter(constructor, attr + UPPER_X, def);\n            this.addGetter(constructor, attr + UPPER_Y, def);\n            this.addSetter(constructor, attr + UPPER_X);\n            this.addSetter(constructor, attr + UPPER_Y);\n        },\n        addBoxGetterSetter: function (constructor, attr, def) {\n            this.addBoxGetter(constructor, attr, def);\n            this.addBoxSetter(constructor, attr);\n            this.addGetter(constructor, attr + UPPER_X, def);\n            this.addGetter(constructor, attr + UPPER_Y, def);\n            this.addGetter(constructor, attr + UPPER_WIDTH, def);\n            this.addGetter(constructor, attr + UPPER_HEIGHT, def);\n            this.addSetter(constructor, attr + UPPER_X);\n            this.addSetter(constructor, attr + UPPER_Y);\n            this.addSetter(constructor, attr + UPPER_WIDTH);\n            this.addSetter(constructor, attr + UPPER_HEIGHT);\n        },\n        addPointsGetterSetter: function (constructor, attr) {\n            this.addPointsGetter(constructor, attr);\n            this.addPointsSetter(constructor, attr);\n            this.addPointAdder(constructor, attr);\n        },\n        addRotationGetterSetter: function (constructor, attr, def) {\n            this.addRotationGetter(constructor, attr, def);\n            this.addRotationSetter(constructor, attr);\n        },\n        addColorGetterSetter: function (constructor, attr) {\n            this.addGetter(constructor, attr);\n            this.addSetter(constructor, attr);\n            this.addColorRGBGetter(constructor, attr);\n            this.addColorComponentGetter(constructor, attr, R);\n            this.addColorComponentGetter(constructor, attr, G);\n            this.addColorComponentGetter(constructor, attr, B);\n            this.addColorRGBSetter(constructor, attr);\n            this.addColorComponentSetter(constructor, attr, R);\n            this.addColorComponentSetter(constructor, attr, G);\n            this.addColorComponentSetter(constructor, attr, B);\n        },\n        addColorRGBGetter: function (constructor, attr) {\n            var method = GET + Kinetic.Util._capitalize(attr) + RGB;\n            constructor.prototype[method] = function () {\n                return Kinetic.Util.getRGB(this.attrs[attr]);\n            };\n        },\n        addColorComponentGetter: function (constructor, attr, c) {\n            var prefix = GET + Kinetic.Util._capitalize(attr), method = prefix + Kinetic.Util._capitalize(c);\n            constructor.prototype[method] = function () {\n                return this[prefix + RGB]()[c];\n            };\n        },\n        addPointsGetter: function (constructor, attr) {\n            var that = this, method = GET + Kinetic.Util._capitalize(attr);\n            constructor.prototype[method] = function () {\n                var val = this.attrs[attr];\n                return val === undefined ? [] : val;\n            };\n        },\n        addGetter: function (constructor, attr, def) {\n            var that = this, method = GET + Kinetic.Util._capitalize(attr);\n            constructor.prototype[method] = function () {\n                var val = this.attrs[attr];\n                return val === undefined ? def : val;\n            };\n        },\n        addPointGetter: function (constructor, attr) {\n            var that = this, baseMethod = GET + Kinetic.Util._capitalize(attr);\n            constructor.prototype[baseMethod] = function () {\n                var that = this;\n                return {\n                    x: that[baseMethod + UPPER_X](),\n                    y: that[baseMethod + UPPER_Y]()\n                };\n            };\n        },\n        addBoxGetter: function (constructor, attr) {\n            var that = this, baseMethod = GET + Kinetic.Util._capitalize(attr);\n            constructor.prototype[baseMethod] = function () {\n                var that = this;\n                return {\n                    x: that[baseMethod + UPPER_X](),\n                    y: that[baseMethod + UPPER_Y](),\n                    width: that[baseMethod + UPPER_WIDTH](),\n                    height: that[baseMethod + UPPER_HEIGHT]()\n                };\n            };\n        },\n        addRotationGetter: function (constructor, attr, def) {\n            var that = this, method = GET + Kinetic.Util._capitalize(attr);\n            constructor.prototype[method] = function () {\n                var val = this.attrs[attr];\n                if (val === undefined) {\n                    val = def;\n                }\n                return val;\n            };\n            constructor.prototype[method + DEG] = function () {\n                var val = this.attrs[attr];\n                if (val === undefined) {\n                    val = def;\n                }\n                return Kinetic.Util._radToDeg(val);\n            };\n        },\n        addColorRGBSetter: function (constructor, attr) {\n            var method = SET + Kinetic.Util._capitalize(attr) + RGB;\n            constructor.prototype[method] = function (obj) {\n                var r = obj && obj.r !== undefined ? obj.r | 0 : this.getAttr(attr + UPPER_R), g = obj && obj.g !== undefined ? obj.g | 0 : this.getAttr(attr + UPPER_G), b = obj && obj.b !== undefined ? obj.b | 0 : this.getAttr(attr + UPPER_B);\n                this._setAttr(attr, HASH + Kinetic.Util._rgbToHex(r, g, b));\n            };\n        },\n        addColorComponentSetter: function (constructor, attr, c) {\n            var prefix = SET + Kinetic.Util._capitalize(attr), method = prefix + Kinetic.Util._capitalize(c);\n            constructor.prototype[method] = function (val) {\n                var obj = {};\n                obj[c] = val;\n                this[prefix + RGB](obj);\n            };\n        },\n        addPointsSetter: function (constructor, attr) {\n            var method = SET + Kinetic.Util._capitalize(attr);\n            constructor.prototype[method] = function (val) {\n                var points = Kinetic.Util._getPoints(val);\n                this._setAttr('points', points);\n            };\n        },\n        addSetter: function (constructor, attr) {\n            var method = SET + Kinetic.Util._capitalize(attr);\n            constructor.prototype[method] = function (val) {\n                this._setAttr(attr, val);\n            };\n        },\n        addPointSetter: function (constructor, attr) {\n            var that = this, baseMethod = SET + Kinetic.Util._capitalize(attr);\n            constructor.prototype[baseMethod] = function () {\n                var pos = Kinetic.Util._getXY([].slice.call(arguments)), oldVal = this.attrs[attr], x = 0, y = 0;\n                if (pos) {\n                    x = pos.x;\n                    y = pos.y;\n                    this._fireBeforeChangeEvent(attr, oldVal, pos);\n                    if (x !== undefined) {\n                        this[baseMethod + UPPER_X](x);\n                    }\n                    if (y !== undefined) {\n                        this[baseMethod + UPPER_Y](y);\n                    }\n                    this._fireChangeEvent(attr, oldVal, pos);\n                }\n            };\n        },\n        addBoxSetter: function (constructor, attr) {\n            var that = this, baseMethod = SET + Kinetic.Util._capitalize(attr);\n            constructor.prototype[baseMethod] = function () {\n                var config = [].slice.call(arguments), pos = Kinetic.Util._getXY(config), size = Kinetic.Util._getSize(config), both = Kinetic.Util._merge(pos, size), oldVal = this.attrs[attr], x, y, width, height;\n                if (both) {\n                    x = both.x;\n                    y = both.y;\n                    width = both.width;\n                    height = both.height;\n                    this._fireBeforeChangeEvent(attr, oldVal, both);\n                    if (x !== undefined) {\n                        this[baseMethod + UPPER_X](x);\n                    }\n                    if (y !== undefined) {\n                        this[baseMethod + UPPER_Y](y);\n                    }\n                    if (width !== undefined) {\n                        this[baseMethod + UPPER_WIDTH](width);\n                    }\n                    if (height !== undefined) {\n                        this[baseMethod + UPPER_HEIGHT](height);\n                    }\n                    this._fireChangeEvent(attr, oldVal, both);\n                }\n            };\n        },\n        addRotationSetter: function (constructor, attr) {\n            var that = this, method = SET + Kinetic.Util._capitalize(attr);\n            constructor.prototype[method] = function (val) {\n                this._setAttr(attr, val);\n            };\n            constructor.prototype[method + DEG] = function (deg) {\n                this._setAttr(attr, Kinetic.Util._degToRad(deg));\n            };\n        },\n        addPointAdder: function (constructor, attr) {\n            var that = this, baseMethod = ADD + Kinetic.Util._removeLastLetter(Kinetic.Util._capitalize(attr));\n            constructor.prototype[baseMethod] = function () {\n                var pos = Kinetic.Util._getXY([].slice.call(arguments)), oldVal = this.attrs[attr];\n                if (pos) {\n                    this._fireBeforeChangeEvent(attr, oldVal, pos);\n                    this.attrs[attr].push(pos);\n                    this._fireChangeEvent(attr, oldVal, pos);\n                }\n            };\n        }\n    };\n}());\n;\n(function () {\n    var ABSOLUTE_OPACITY = 'absoluteOpacity', ABSOLUTE_TRANSFORM = 'absoluteTransform', ADD = 'add', B = 'b', BEFORE = 'before', BLACK = 'black', CHANGE = 'Change', CHILDREN = 'children', DEG = 'Deg', DOT = '.', EMPTY_STRING = '', G = 'g', GET = 'get', HASH = '#', ID = 'id', KINETIC = 'kinetic', LISTENING = 'listening', MOUSEENTER = 'mouseenter', MOUSELEAVE = 'mouseleave', NAME = 'name', OFF = 'off', ON = 'on', PRIVATE_GET = '_get', R = 'r', RGB = 'RGB', SET = 'set', SHAPE = 'Shape', SPACE = ' ', STAGE = 'stage', TRANSFORM = 'transform', UPPER_B = 'B', UPPER_G = 'G', UPPER_HEIGHT = 'Height', UPPER_R = 'R', UPPER_STAGE = 'Stage', UPPER_WIDTH = 'Width', UPPER_X = 'X', UPPER_Y = 'Y', VISIBLE = 'visible', X = 'x', Y = 'y', transformChangeStr = [\n            'xChange.kinetic',\n            'yChange.kinetic',\n            'scaleXChange.kinetic',\n            'scaleYChange.kinetic',\n            'skewXChange.kinetic',\n            'skewYChange.kinetic',\n            'rotationChange.kinetic',\n            'offsetXChange.kinetic',\n            'offsetYChange.kinetic'\n        ].join(SPACE);\n    Kinetic.Util.addMethods(Kinetic.Node, {\n        _init: function (config) {\n            var that = this;\n            this._id = Kinetic.idCounter++;\n            this.eventListeners = {};\n            this.attrs = {};\n            this.cache = {};\n            this.setAttrs(config);\n            this.on(transformChangeStr, function () {\n                this._clearCache(TRANSFORM);\n                that._clearSelfAndChildrenCache(ABSOLUTE_TRANSFORM);\n            });\n            this.on('visibleChange.kinetic', function () {\n                that._clearSelfAndChildrenCache(VISIBLE);\n            });\n            this.on('listeningChange.kinetic', function () {\n                that._clearSelfAndChildrenCache(LISTENING);\n            });\n            this.on('opacityChange.kinetic', function () {\n                that._clearSelfAndChildrenCache(ABSOLUTE_OPACITY);\n            });\n        },\n        clearCache: function () {\n            this.cache = {};\n        },\n        _clearCache: function (attr) {\n            delete this.cache[attr];\n        },\n        _getCache: function (attr, privateGetter) {\n            var cache = this.cache[attr];\n            if (cache === undefined) {\n                this.cache[attr] = privateGetter.call(this);\n            }\n            return this.cache[attr];\n        },\n        _clearSelfAndChildrenCache: function (attr) {\n            var that = this;\n            this._clearCache(attr);\n            if (this.children) {\n                this.getChildren().each(function (node) {\n                    node._clearSelfAndChildrenCache(attr);\n                });\n            }\n        },\n        on: function (evtStr, handler) {\n            var events = evtStr.split(SPACE), len = events.length, n, event, parts, baseEvent, name;\n            for (n = 0; n < len; n++) {\n                event = events[n];\n                parts = event.split(DOT);\n                baseEvent = parts[0];\n                name = parts[1] || EMPTY_STRING;\n                if (!this.eventListeners[baseEvent]) {\n                    this.eventListeners[baseEvent] = [];\n                }\n                this.eventListeners[baseEvent].push({\n                    name: name,\n                    handler: handler\n                });\n            }\n            return this;\n        },\n        off: function (evtStr) {\n            var events = evtStr.split(SPACE), len = events.length, n, i, t, event, parts, baseEvent, name;\n            for (n = 0; n < len; n++) {\n                event = events[n];\n                parts = event.split(DOT);\n                baseEvent = parts[0];\n                name = parts[1];\n                if (baseEvent) {\n                    if (this.eventListeners[baseEvent]) {\n                        this._off(baseEvent, name);\n                    }\n                } else {\n                    for (t in this.eventListeners) {\n                        this._off(t, name);\n                    }\n                }\n            }\n            return this;\n        },\n        remove: function () {\n            var parent = this.getParent();\n            if (parent && parent.children) {\n                parent.children.splice(this.index, 1);\n                parent._setChildrenIndices();\n                delete this.parent;\n            }\n            this._clearSelfAndChildrenCache(STAGE);\n            this._clearSelfAndChildrenCache(ABSOLUTE_TRANSFORM);\n            this._clearSelfAndChildrenCache(VISIBLE);\n            this._clearSelfAndChildrenCache(LISTENING);\n            this._clearSelfAndChildrenCache(ABSOLUTE_OPACITY);\n            return this;\n        },\n        destroy: function () {\n            Kinetic._removeId(this.getId());\n            Kinetic._removeName(this.getName(), this._id);\n            this.remove();\n        },\n        getAttr: function (attr) {\n            var method = GET + Kinetic.Util._capitalize(attr);\n            if (Kinetic.Util._isFunction(this[method])) {\n                return this[method]();\n            } else {\n                return this.attrs[attr];\n            }\n        },\n        getAncestors: function () {\n            var parent = this.getParent(), ancestors = new Kinetic.Collection();\n            while (parent) {\n                ancestors.push(parent);\n                parent = parent.getParent();\n            }\n            return ancestors;\n        },\n        setAttr: function () {\n            var args = Array.prototype.slice.call(arguments), attr = args[0], method = SET + Kinetic.Util._capitalize(attr), func = this[method];\n            args.shift();\n            if (Kinetic.Util._isFunction(func)) {\n                func.apply(this, args);\n            } else {\n                this.attrs[attr] = args[0];\n            }\n            return this;\n        },\n        getAttrs: function () {\n            return this.attrs || {};\n        },\n        setAttrs: function (config) {\n            var key, method;\n            if (config) {\n                for (key in config) {\n                    if (key === CHILDREN) {\n                    } else {\n                        method = SET + Kinetic.Util._capitalize(key);\n                        if (Kinetic.Util._isFunction(this[method])) {\n                            this[method](config[key]);\n                        } else {\n                            this._setAttr(key, config[key]);\n                        }\n                    }\n                }\n            }\n            return this;\n        },\n        isListening: function () {\n            return this._getCache(LISTENING, this._isListening);\n        },\n        _isListening: function () {\n            var listening = this.getListening(), parent = this.getParent();\n            if (listening && parent && !parent.isListening()) {\n                return false;\n            }\n            return listening;\n        },\n        isVisible: function () {\n            return this._getCache(VISIBLE, this._isVisible);\n        },\n        _isVisible: function () {\n            var visible = this.getVisible(), parent = this.getParent();\n            if (visible && parent && !parent.isVisible()) {\n                return false;\n            }\n            return visible;\n        },\n        show: function () {\n            this.setVisible(true);\n            return this;\n        },\n        hide: function () {\n            this.setVisible(false);\n            return this;\n        },\n        getZIndex: function () {\n            return this.index || 0;\n        },\n        getAbsoluteZIndex: function () {\n            var level = this.getLevel(), that = this, index = 0, nodes, len, n, child;\n            function addChildren(children) {\n                nodes = [];\n                len = children.length;\n                for (n = 0; n < len; n++) {\n                    child = children[n];\n                    index++;\n                    if (child.nodeType !== SHAPE) {\n                        nodes = nodes.concat(child.getChildren().toArray());\n                    }\n                    if (child._id === that._id) {\n                        n = len;\n                    }\n                }\n                if (nodes.length > 0 && nodes[0].getLevel() <= level) {\n                    addChildren(nodes);\n                }\n            }\n            if (that.nodeType !== UPPER_STAGE) {\n                addChildren(that.getStage().getChildren());\n            }\n            return index;\n        },\n        getLevel: function () {\n            var level = 0, parent = this.parent;\n            while (parent) {\n                level++;\n                parent = parent.parent;\n            }\n            return level;\n        },\n        setPosition: function () {\n            var pos = Kinetic.Util._getXY([].slice.call(arguments));\n            this.setX(pos.x);\n            this.setY(pos.y);\n            return this;\n        },\n        getPosition: function () {\n            return {\n                x: this.getX(),\n                y: this.getY()\n            };\n        },\n        getAbsolutePosition: function () {\n            var absoluteMatrix = this.getAbsoluteTransform().getMatrix(), absoluteTransform = new Kinetic.Transform(), o = this.getOffset();\n            absoluteTransform.m = absoluteMatrix.slice();\n            absoluteTransform.translate(o.x, o.y);\n            return absoluteTransform.getTranslation();\n        },\n        setAbsolutePosition: function () {\n            var pos = Kinetic.Util._getXY([].slice.call(arguments)), trans = this._clearTransform(), it;\n            this.attrs.x = trans.x;\n            this.attrs.y = trans.y;\n            delete trans.x;\n            delete trans.y;\n            it = this.getAbsoluteTransform();\n            it.invert();\n            it.translate(pos.x, pos.y);\n            pos = {\n                x: this.attrs.x + it.getTranslation().x,\n                y: this.attrs.y + it.getTranslation().y\n            };\n            this.setPosition(pos.x, pos.y);\n            this._setTransform(trans);\n            return this;\n        },\n        _setTransform: function (trans) {\n            var key;\n            for (key in trans) {\n                this.attrs[key] = trans[key];\n            }\n            this._clearCache(TRANSFORM);\n            this._clearSelfAndChildrenCache(ABSOLUTE_TRANSFORM);\n        },\n        _clearTransform: function () {\n            var trans = {\n                    x: this.getX(),\n                    y: this.getY(),\n                    rotation: this.getRotation(),\n                    scaleX: this.getScaleX(),\n                    scaleY: this.getScaleY(),\n                    offsetX: this.getOffsetX(),\n                    offsetY: this.getOffsetY(),\n                    skewX: this.getSkewX(),\n                    skewY: this.getSkewY()\n                };\n            this.attrs.x = 0;\n            this.attrs.y = 0;\n            this.attrs.rotation = 0;\n            this.attrs.scaleX = 1;\n            this.attrs.scaleY = 1;\n            this.attrs.offsetX = 0;\n            this.attrs.offsetY = 0;\n            this.attrs.skewX = 0;\n            this.attrs.skewY = 0;\n            this._clearCache(TRANSFORM);\n            this._clearSelfAndChildrenCache(ABSOLUTE_TRANSFORM);\n            return trans;\n        },\n        move: function () {\n            var pos = Kinetic.Util._getXY([].slice.call(arguments)), x = this.getX(), y = this.getY();\n            if (pos.x !== undefined) {\n                x += pos.x;\n            }\n            if (pos.y !== undefined) {\n                y += pos.y;\n            }\n            this.setPosition(x, y);\n            return this;\n        },\n        _eachAncestorReverse: function (func, includeSelf) {\n            var family = [], parent = this.getParent(), len, n;\n            if (includeSelf) {\n                family.unshift(this);\n            }\n            while (parent) {\n                family.unshift(parent);\n                parent = parent.parent;\n            }\n            len = family.length;\n            for (n = 0; n < len; n++) {\n                func(family[n]);\n            }\n        },\n        rotate: function (theta) {\n            this.setRotation(this.getRotation() + theta);\n            return this;\n        },\n        rotateDeg: function (deg) {\n            this.setRotation(this.getRotation() + Kinetic.Util._degToRad(deg));\n            return this;\n        },\n        moveToTop: function () {\n            var index = this.index;\n            this.parent.children.splice(index, 1);\n            this.parent.children.push(this);\n            this.parent._setChildrenIndices();\n            return true;\n        },\n        moveUp: function () {\n            var index = this.index, len = this.parent.getChildren().length;\n            if (index < len - 1) {\n                this.parent.children.splice(index, 1);\n                this.parent.children.splice(index + 1, 0, this);\n                this.parent._setChildrenIndices();\n                return true;\n            }\n            return false;\n        },\n        moveDown: function () {\n            var index = this.index;\n            if (index > 0) {\n                this.parent.children.splice(index, 1);\n                this.parent.children.splice(index - 1, 0, this);\n                this.parent._setChildrenIndices();\n                return true;\n            }\n            return false;\n        },\n        moveToBottom: function () {\n            var index = this.index;\n            if (index > 0) {\n                this.parent.children.splice(index, 1);\n                this.parent.children.unshift(this);\n                this.parent._setChildrenIndices();\n                return true;\n            }\n            return false;\n        },\n        setZIndex: function (zIndex) {\n            var index = this.index;\n            this.parent.children.splice(index, 1);\n            this.parent.children.splice(zIndex, 0, this);\n            this.parent._setChildrenIndices();\n            return this;\n        },\n        getAbsoluteOpacity: function () {\n            return this._getCache(ABSOLUTE_OPACITY, this._getAbsoluteOpacity);\n        },\n        _getAbsoluteOpacity: function () {\n            var absOpacity = this.getOpacity();\n            if (this.getParent()) {\n                absOpacity *= this.getParent().getAbsoluteOpacity();\n            }\n            return absOpacity;\n        },\n        moveTo: function (newContainer) {\n            Kinetic.Node.prototype.remove.call(this);\n            newContainer.add(this);\n            return this;\n        },\n        toObject: function () {\n            var type = Kinetic.Util, obj = {}, attrs = this.getAttrs(), key, val;\n            obj.attrs = {};\n            for (key in attrs) {\n                val = attrs[key];\n                if (!type._isFunction(val) && !type._isElement(val) && !(type._isObject(val) && type._hasMethods(val))) {\n                    obj.attrs[key] = val;\n                }\n            }\n            obj.className = this.getClassName();\n            return obj;\n        },\n        toJSON: function () {\n            return JSON.stringify(this.toObject());\n        },\n        getParent: function () {\n            return this.parent;\n        },\n        getLayer: function () {\n            return this.getParent().getLayer();\n        },\n        getStage: function () {\n            return this._getCache(STAGE, this._getStage);\n        },\n        _getStage: function () {\n            var parent = this.getParent();\n            if (parent) {\n                return parent.getStage();\n            } else {\n                return undefined;\n            }\n        },\n        fire: function (eventType, evt, bubble) {\n            if (bubble) {\n                this._fireAndBubble(eventType, evt || {});\n            } else {\n                this._fire(eventType, evt || {});\n            }\n            return this;\n        },\n        getAbsoluteTransform: function () {\n            return this._getCache(ABSOLUTE_TRANSFORM, this._getAbsoluteTransform);\n        },\n        _getAbsoluteTransform: function () {\n            var am = new Kinetic.Transform(), m;\n            this._eachAncestorReverse(function (node) {\n                m = node.getTransform();\n                am.multiply(m);\n            }, true);\n            return am;\n        },\n        _getTransform: function () {\n            var m = new Kinetic.Transform(), x = this.getX(), y = this.getY(), rotation = this.getRotation(), scaleX = this.getScaleX(), scaleY = this.getScaleY(), skewX = this.getSkewX(), skewY = this.getSkewY(), offsetX = this.getOffsetX(), offsetY = this.getOffsetY();\n            if (x !== 0 || y !== 0) {\n                m.translate(x, y);\n            }\n            if (rotation !== 0) {\n                m.rotate(rotation);\n            }\n            if (skewX !== 0 || skewY !== 0) {\n                m.skew(skewX, skewY);\n            }\n            if (scaleX !== 1 || scaleY !== 1) {\n                m.scale(scaleX, scaleY);\n            }\n            if (offsetX !== 0 || offsetY !== 0) {\n                m.translate(-1 * offsetX, -1 * offsetY);\n            }\n            return m;\n        },\n        clone: function (obj) {\n            var className = this.getClassName(), node = new Kinetic[className](this.attrs), key, allListeners, len, n, listener;\n            for (key in this.eventListeners) {\n                allListeners = this.eventListeners[key];\n                len = allListeners.length;\n                for (n = 0; n < len; n++) {\n                    listener = allListeners[n];\n                    if (listener.name.indexOf(KINETIC) < 0) {\n                        if (!node.eventListeners[key]) {\n                            node.eventListeners[key] = [];\n                        }\n                        node.eventListeners[key].push(listener);\n                    }\n                }\n            }\n            node.setAttrs(obj);\n            return node;\n        },\n        toDataURL: function (config) {\n            config = config || {};\n            var mimeType = config.mimeType || null, quality = config.quality || null, stage = this.getStage(), x = config.x || 0, y = config.y || 0, canvas = new Kinetic.SceneCanvas({\n                    width: config.width || stage.getWidth(),\n                    height: config.height || stage.getHeight(),\n                    pixelRatio: 1\n                }), context = canvas.getContext();\n            context.save();\n            if (x || y) {\n                context.translate(-1 * x, -1 * y);\n            }\n            this.drawScene(canvas);\n            context.restore();\n            return canvas.toDataURL(mimeType, quality);\n        },\n        toImage: function (config) {\n            Kinetic.Util._getImage(this.toDataURL(config), function (img) {\n                config.callback(img);\n            });\n        },\n        setSize: function () {\n            var size = Kinetic.Util._getSize(Array.prototype.slice.call(arguments));\n            this.setWidth(size.width);\n            this.setHeight(size.height);\n            return this;\n        },\n        getSize: function () {\n            return {\n                width: this.getWidth(),\n                height: this.getHeight()\n            };\n        },\n        getWidth: function () {\n            return this.attrs.width || 0;\n        },\n        getHeight: function () {\n            return this.attrs.height || 0;\n        },\n        getClassName: function () {\n            return this.className || this.nodeType;\n        },\n        getType: function () {\n            return this.nodeType;\n        },\n        _get: function (selector) {\n            return this.nodeType === selector ? [this] : [];\n        },\n        _off: function (type, name) {\n            var evtListeners = this.eventListeners[type], i, evtName;\n            for (i = 0; i < evtListeners.length; i++) {\n                evtName = evtListeners[i].name;\n                if ((evtName !== 'kinetic' || name === 'kinetic') && (!name || evtName === name)) {\n                    evtListeners.splice(i, 1);\n                    if (evtListeners.length === 0) {\n                        delete this.eventListeners[type];\n                        break;\n                    }\n                    i--;\n                }\n            }\n        },\n        _fireBeforeChangeEvent: function (attr, oldVal, newVal) {\n            this._fire(BEFORE + Kinetic.Util._capitalize(attr) + CHANGE, {\n                oldVal: oldVal,\n                newVal: newVal\n            });\n        },\n        _fireChangeEvent: function (attr, oldVal, newVal) {\n            this._fire(attr + CHANGE, {\n                oldVal: oldVal,\n                newVal: newVal\n            });\n        },\n        setId: function (id) {\n            var oldId = this.getId();\n            Kinetic._removeId(oldId);\n            Kinetic._addId(this, id);\n            this._setAttr(ID, id);\n            return this;\n        },\n        setName: function (name) {\n            var oldName = this.getName();\n            Kinetic._removeName(oldName, this._id);\n            Kinetic._addName(this, name);\n            this._setAttr(NAME, name);\n            return this;\n        },\n        _setAttr: function (key, val) {\n            var oldVal;\n            if (val !== undefined) {\n                oldVal = this.attrs[key];\n                this._fireBeforeChangeEvent(key, oldVal, val);\n                this.attrs[key] = val;\n                this._fireChangeEvent(key, oldVal, val);\n            }\n        },\n        _fireAndBubble: function (eventType, evt, compareShape) {\n            var okayToRun = true;\n            if (evt && this.nodeType === SHAPE) {\n                evt.targetNode = this;\n            }\n            if (eventType === MOUSEENTER && compareShape && this._id === compareShape._id) {\n                okayToRun = false;\n            } else if (eventType === MOUSELEAVE && compareShape && this._id === compareShape._id) {\n                okayToRun = false;\n            }\n            if (okayToRun) {\n                this._fire(eventType, evt);\n                if (evt && !evt.cancelBubble && this.parent) {\n                    if (compareShape && compareShape.parent) {\n                        this._fireAndBubble.call(this.parent, eventType, evt, compareShape.parent);\n                    } else {\n                        this._fireAndBubble.call(this.parent, eventType, evt);\n                    }\n                }\n            }\n        },\n        _fire: function (eventType, evt) {\n            var events = this.eventListeners[eventType], len, i;\n            if (events) {\n                len = events.length;\n                for (i = 0; i < len; i++) {\n                    events[i].handler.call(this, evt);\n                }\n            }\n        },\n        draw: function () {\n            this.drawScene();\n            this.drawHit();\n            return this;\n        },\n        shouldDrawHit: function () {\n            return this.isListening() && this.isVisible() && !Kinetic.isDragging();\n        },\n        isDraggable: function () {\n            return false;\n        },\n        getTransform: function () {\n            return this._getCache(TRANSFORM, this._getTransform);\n        }\n    });\n    Kinetic.Node.create = function (json, container) {\n        return this._createNode(JSON.parse(json), container);\n    };\n    Kinetic.Node._createNode = function (obj, container) {\n        var className = Kinetic.Node.prototype.getClassName.call(obj), children = obj.children, no, len, n;\n        if (container) {\n            obj.attrs.container = container;\n        }\n        no = new Kinetic[className](obj.attrs);\n        if (children) {\n            len = children.length;\n            for (n = 0; n < len; n++) {\n                no.add(this._createNode(children[n]));\n            }\n        }\n        return no;\n    };\n    Kinetic.Factory.addGetterSetter(Kinetic.Node, 'x', 0);\n    Kinetic.Factory.addGetterSetter(Kinetic.Node, 'y', 0);\n    Kinetic.Factory.addGetterSetter(Kinetic.Node, 'opacity', 1);\n    Kinetic.Factory.addGetter(Kinetic.Node, 'name');\n    Kinetic.Factory.addGetter(Kinetic.Node, 'id');\n    Kinetic.Factory.addRotationGetterSetter(Kinetic.Node, 'rotation', 0);\n    Kinetic.Factory.addPointGetterSetter(Kinetic.Node, 'scale', 1);\n    Kinetic.Factory.addPointGetterSetter(Kinetic.Node, 'skew', 0);\n    Kinetic.Factory.addPointGetterSetter(Kinetic.Node, 'offset', 0);\n    Kinetic.Factory.addSetter(Kinetic.Node, 'width');\n    Kinetic.Factory.addSetter(Kinetic.Node, 'height');\n    Kinetic.Factory.addGetterSetter(Kinetic.Node, 'listening', true);\n    Kinetic.Factory.addGetterSetter(Kinetic.Node, 'visible', true);\n    Kinetic.Collection.mapMethods([\n        'on',\n        'off',\n        'remove',\n        'destroy',\n        'show',\n        'hide',\n        'move',\n        'rotate',\n        'moveToTop',\n        'moveUp',\n        'moveDown',\n        'moveToBottom',\n        'moveTo',\n        'fire',\n        'draw'\n    ]);\n}());\n;\n(function () {\n    var BATCH_DRAW_STOP_TIME_DIFF = 500;\n    Kinetic.Animation = function (func, layers) {\n        this.func = func;\n        this.setLayers(layers);\n        this.id = Kinetic.Animation.animIdCounter++;\n        this.frame = {\n            time: 0,\n            timeDiff: 0,\n            lastTime: new Date().getTime()\n        };\n    };\n    Kinetic.Animation.prototype = {\n        setLayers: function (layers) {\n            var lays = [];\n            if (!layers) {\n                lays = [];\n            } else if (layers.length > 0) {\n                lays = layers;\n            } else {\n                lays = [layers];\n            }\n            this.layers = lays;\n        },\n        getLayers: function () {\n            return this.layers;\n        },\n        addLayer: function (layer) {\n            var layers = this.layers, len, n;\n            if (layers) {\n                len = layers.length;\n                for (n = 0; n < len; n++) {\n                    if (layers[n]._id === layer._id) {\n                        return false;\n                    }\n                }\n            } else {\n                this.layers = [];\n            }\n            this.layers.push(layer);\n            return true;\n        },\n        isRunning: function () {\n            var a = Kinetic.Animation, animations = a.animations;\n            for (var n = 0; n < animations.length; n++) {\n                if (animations[n].id === this.id) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        start: function () {\n            this.stop();\n            this.frame.timeDiff = 0;\n            this.frame.lastTime = new Date().getTime();\n            Kinetic.Animation._addAnimation(this);\n        },\n        stop: function () {\n            Kinetic.Animation._removeAnimation(this);\n        },\n        _updateFrameObject: function (time) {\n            this.frame.timeDiff = time - this.frame.lastTime;\n            this.frame.lastTime = time;\n            this.frame.time += this.frame.timeDiff;\n            this.frame.frameRate = 1000 / this.frame.timeDiff;\n        }\n    };\n    Kinetic.Animation.animations = [];\n    Kinetic.Animation.animIdCounter = 0;\n    Kinetic.Animation.animRunning = false;\n    Kinetic.Animation._addAnimation = function (anim) {\n        this.animations.push(anim);\n        this._handleAnimation();\n    };\n    Kinetic.Animation._removeAnimation = function (anim) {\n        var id = anim.id, animations = this.animations, len = animations.length;\n        for (var n = 0; n < len; n++) {\n            if (animations[n].id === id) {\n                this.animations.splice(n, 1);\n                break;\n            }\n        }\n    };\n    Kinetic.Animation._runFrames = function () {\n        var layerHash = {}, animations = this.animations, anim, layers, func, n, i, layersLen, layer, key;\n        for (n = 0; n < animations.length; n++) {\n            anim = animations[n];\n            layers = anim.layers;\n            func = anim.func;\n            anim._updateFrameObject(new Date().getTime());\n            layersLen = layers.length;\n            for (i = 0; i < layersLen; i++) {\n                layer = layers[i];\n                if (layer._id !== undefined) {\n                    layerHash[layer._id] = layer;\n                }\n            }\n            if (func) {\n                func.call(anim, anim.frame);\n            }\n        }\n        for (key in layerHash) {\n            layerHash[key].draw();\n        }\n    };\n    Kinetic.Animation._animationLoop = function () {\n        var that = this;\n        if (this.animations.length > 0) {\n            this._runFrames();\n            Kinetic.Animation.requestAnimFrame(function () {\n                that._animationLoop();\n            });\n        } else {\n            this.animRunning = false;\n        }\n    };\n    Kinetic.Animation._handleAnimation = function () {\n        var that = this;\n        if (!this.animRunning) {\n            this.animRunning = true;\n            that._animationLoop();\n        }\n    };\n    RAF = function () {\n        return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || FRAF;\n    }();\n    function FRAF(callback) {\n        window.setTimeout(callback, 1000 / 60);\n    }\n    Kinetic.Animation.requestAnimFrame = function (callback) {\n        var raf = Kinetic.DD && Kinetic.DD.isDragging ? FRAF : RAF;\n        raf(callback);\n    };\n    var moveTo = Kinetic.Node.prototype.moveTo;\n    Kinetic.Node.prototype.moveTo = function (container) {\n        moveTo.call(this, container);\n    };\n    Kinetic.Layer.prototype.batchDraw = function () {\n        var that = this;\n        if (!this.batchAnim) {\n            this.batchAnim = new Kinetic.Animation(function () {\n                if (that.lastBatchDrawTime && new Date().getTime() - that.lastBatchDrawTime > BATCH_DRAW_STOP_TIME_DIFF) {\n                    that.batchAnim.stop();\n                }\n            }, this);\n        }\n        this.lastBatchDrawTime = new Date().getTime();\n        if (!this.batchAnim.isRunning()) {\n            this.draw();\n            this.batchAnim.start();\n        }\n    };\n    Kinetic.Stage.prototype.batchDraw = function () {\n        this.getChildren().each(function (layer) {\n            layer.batchDraw();\n        });\n    };\n}());\n;\n(function () {\n    var blacklist = {\n            node: 1,\n            duration: 1,\n            easing: 1,\n            onFinish: 1,\n            yoyo: 1\n        }, PAUSED = 1, PLAYING = 2, REVERSING = 3, idCounter = 0;\n    Kinetic.Tween = function (config) {\n        var that = this, node = config.node, nodeId = node._id, duration = config.duration || 1, easing = config.easing || Kinetic.Easings.Linear, yoyo = !!config.yoyo, key, tween, start, tweenId;\n        this.node = node;\n        this._id = idCounter++;\n        this.anim = new Kinetic.Animation(function () {\n            that.tween.onEnterFrame();\n        }, node.getLayer() || node.getLayers());\n        this.tween = new Tween(key, function (i) {\n            that._tweenFunc(i);\n        }, easing, 0, 1, duration * 1000, yoyo);\n        this._addListeners();\n        if (!Kinetic.Tween.attrs[nodeId]) {\n            Kinetic.Tween.attrs[nodeId] = {};\n        }\n        if (!Kinetic.Tween.attrs[nodeId][this._id]) {\n            Kinetic.Tween.attrs[nodeId][this._id] = {};\n        }\n        if (!Kinetic.Tween.tweens[nodeId]) {\n            Kinetic.Tween.tweens[nodeId] = {};\n        }\n        for (key in config) {\n            if (blacklist[key] === undefined) {\n                this._addAttr(key, config[key]);\n            }\n        }\n        this.reset();\n        this.onFinish = config.onFinish;\n        this.onReset = config.onReset;\n    };\n    Kinetic.Tween.attrs = {};\n    Kinetic.Tween.tweens = {};\n    Kinetic.Tween.prototype = {\n        _addAttr: function (key, end) {\n            var node = this.node, nodeId = node._id, start, diff, tweenId, n, len, startVal, endVal;\n            tweenId = Kinetic.Tween.tweens[nodeId][key];\n            if (tweenId) {\n                delete Kinetic.Tween.attrs[nodeId][tweenId][key];\n            }\n            start = node.getAttr(key);\n            if (Kinetic.Util._isArray(end)) {\n                end = Kinetic.Util._getPoints(end);\n                diff = [];\n                len = end.length;\n                for (n = 0; n < len; n++) {\n                    startVal = start[n];\n                    endVal = end[n];\n                    diff.push({\n                        x: endVal.x - startVal.x,\n                        y: endVal.y - startVal.y\n                    });\n                }\n            } else {\n                diff = end - start;\n            }\n            Kinetic.Tween.attrs[nodeId][this._id][key] = {\n                start: start,\n                diff: diff\n            };\n            Kinetic.Tween.tweens[nodeId][key] = this._id;\n        },\n        _tweenFunc: function (i) {\n            var node = this.node, attrs = Kinetic.Tween.attrs[node._id][this._id], key, attr, start, diff, newVal, n, len, startVal, diffVal;\n            for (key in attrs) {\n                attr = attrs[key];\n                start = attr.start;\n                diff = attr.diff;\n                if (Kinetic.Util._isArray(start)) {\n                    newVal = [];\n                    len = start.length;\n                    for (n = 0; n < len; n++) {\n                        startVal = start[n];\n                        diffVal = diff[n];\n                        newVal.push({\n                            x: startVal.x + diffVal.x * i,\n                            y: startVal.y + diffVal.y * i\n                        });\n                    }\n                } else {\n                    newVal = start + diff * i;\n                }\n                node.setAttr(key, newVal);\n            }\n        },\n        _addListeners: function () {\n            var that = this;\n            this.tween.onPlay = function () {\n                that.anim.start();\n            };\n            this.tween.onReverse = function () {\n                that.anim.start();\n            };\n            this.tween.onPause = function () {\n                that.anim.stop();\n            };\n            this.tween.onFinish = function () {\n                if (that.onFinish) {\n                    that.onFinish();\n                }\n            };\n            this.tween.onReset = function () {\n                if (that.onReset) {\n                    that.onReset();\n                }\n            };\n        },\n        play: function () {\n            this.tween.play();\n            return this;\n        },\n        reverse: function () {\n            this.tween.reverse();\n            return this;\n        },\n        reset: function () {\n            var node = this.node;\n            this.tween.reset();\n            (node.getLayer() || node.getLayers()).draw();\n            return this;\n        },\n        seek: function (t) {\n            var node = this.node;\n            this.tween.seek(t * 1000);\n            (node.getLayer() || node.getLayers()).draw();\n            return this;\n        },\n        pause: function () {\n            this.tween.pause();\n            return this;\n        },\n        finish: function () {\n            var node = this.node;\n            this.tween.finish();\n            (node.getLayer() || node.getLayers()).draw();\n            return this;\n        },\n        destroy: function () {\n            var nodeId = this.node._id, thisId = this._id, attrs = Kinetic.Tween.tweens[nodeId], key;\n            this.pause();\n            for (key in attrs) {\n                delete Kinetic.Tween.tweens[nodeId][key];\n            }\n            delete Kinetic.Tween.attrs[nodeId][thisId];\n        }\n    };\n    var Tween = function (prop, propFunc, func, begin, finish, duration, yoyo) {\n        this.prop = prop;\n        this.propFunc = propFunc;\n        this.begin = begin;\n        this._pos = begin;\n        this.duration = duration;\n        this._change = 0;\n        this.prevPos = 0;\n        this.yoyo = yoyo;\n        this._time = 0;\n        this._position = 0;\n        this._startTime = 0;\n        this._finish = 0;\n        this.func = func;\n        this._change = finish - this.begin;\n        this.pause();\n    };\n    Tween.prototype = {\n        fire: function (str) {\n            var handler = this[str];\n            if (handler) {\n                handler();\n            }\n        },\n        setTime: function (t) {\n            if (t > this.duration) {\n                if (this.yoyo) {\n                    this._time = this.duration;\n                    this.reverse();\n                } else {\n                    this.finish();\n                }\n            } else if (t < 0) {\n                if (this.yoyo) {\n                    this._time = 0;\n                    this.play();\n                } else {\n                    this.reset();\n                }\n            } else {\n                this._time = t;\n                this.update();\n            }\n        },\n        getTime: function () {\n            return this._time;\n        },\n        setPosition: function (p) {\n            this.prevPos = this._pos;\n            this.propFunc(p);\n            this._pos = p;\n        },\n        getPosition: function (t) {\n            if (t === undefined) {\n                t = this._time;\n            }\n            return this.func(t, this.begin, this._change, this.duration);\n        },\n        play: function () {\n            this.state = PLAYING;\n            this._startTime = this.getTimer() - this._time;\n            this.onEnterFrame();\n            this.fire('onPlay');\n        },\n        reverse: function () {\n            this.state = REVERSING;\n            this._time = this.duration - this._time;\n            this._startTime = this.getTimer() - this._time;\n            this.onEnterFrame();\n            this.fire('onReverse');\n        },\n        seek: function (t) {\n            this.pause();\n            this._time = t;\n            this.update();\n            this.fire('onSeek');\n        },\n        reset: function () {\n            this.pause();\n            this._time = 0;\n            this.update();\n            this.fire('onReset');\n        },\n        finish: function () {\n            this.pause();\n            this._time = this.duration;\n            this.update();\n            this.fire('onFinish');\n        },\n        update: function () {\n            this.setPosition(this.getPosition(this._time));\n        },\n        onEnterFrame: function () {\n            var t = this.getTimer() - this._startTime;\n            if (this.state === PLAYING) {\n                this.setTime(t);\n            } else if (this.state === REVERSING) {\n                this.setTime(this.duration - t);\n            }\n        },\n        pause: function () {\n            this.state = PAUSED;\n            this.fire('onPause');\n        },\n        getTimer: function () {\n            return new Date().getTime();\n        }\n    };\n    Kinetic.Easings = {\n        'BackEaseIn': function (t, b, c, d, a, p) {\n            var s = 1.70158;\n            return c * (t /= d) * t * ((s + 1) * t - s) + b;\n        },\n        'BackEaseOut': function (t, b, c, d, a, p) {\n            var s = 1.70158;\n            return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n        },\n        'BackEaseInOut': function (t, b, c, d, a, p) {\n            var s = 1.70158;\n            if ((t /= d / 2) < 1) {\n                return c / 2 * (t * t * (((s *= 1.525) + 1) * t - s)) + b;\n            }\n            return c / 2 * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + b;\n        },\n        'ElasticEaseIn': function (t, b, c, d, a, p) {\n            var s = 0;\n            if (t === 0) {\n                return b;\n            }\n            if ((t /= d) == 1) {\n                return b + c;\n            }\n            if (!p) {\n                p = d * 0.3;\n            }\n            if (!a || a < Math.abs(c)) {\n                a = c;\n                s = p / 4;\n            } else {\n                s = p / (2 * Math.PI) * Math.asin(c / a);\n            }\n            return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n        },\n        'ElasticEaseOut': function (t, b, c, d, a, p) {\n            var s = 0;\n            if (t === 0) {\n                return b;\n            }\n            if ((t /= d) == 1) {\n                return b + c;\n            }\n            if (!p) {\n                p = d * 0.3;\n            }\n            if (!a || a < Math.abs(c)) {\n                a = c;\n                s = p / 4;\n            } else {\n                s = p / (2 * Math.PI) * Math.asin(c / a);\n            }\n            return a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b;\n        },\n        'ElasticEaseInOut': function (t, b, c, d, a, p) {\n            var s = 0;\n            if (t === 0) {\n                return b;\n            }\n            if ((t /= d / 2) == 2) {\n                return b + c;\n            }\n            if (!p) {\n                p = d * (0.3 * 1.5);\n            }\n            if (!a || a < Math.abs(c)) {\n                a = c;\n                s = p / 4;\n            } else {\n                s = p / (2 * Math.PI) * Math.asin(c / a);\n            }\n            if (t < 1) {\n                return -0.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n            }\n            return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * 0.5 + c + b;\n        },\n        'BounceEaseOut': function (t, b, c, d) {\n            if ((t /= d) < 1 / 2.75) {\n                return c * (7.5625 * t * t) + b;\n            } else if (t < 2 / 2.75) {\n                return c * (7.5625 * (t -= 1.5 / 2.75) * t + 0.75) + b;\n            } else if (t < 2.5 / 2.75) {\n                return c * (7.5625 * (t -= 2.25 / 2.75) * t + 0.9375) + b;\n            } else {\n                return c * (7.5625 * (t -= 2.625 / 2.75) * t + 0.984375) + b;\n            }\n        },\n        'BounceEaseIn': function (t, b, c, d) {\n            return c - Kinetic.Easings.BounceEaseOut(d - t, 0, c, d) + b;\n        },\n        'BounceEaseInOut': function (t, b, c, d) {\n            if (t < d / 2) {\n                return Kinetic.Easings.BounceEaseIn(t * 2, 0, c, d) * 0.5 + b;\n            } else {\n                return Kinetic.Easings.BounceEaseOut(t * 2 - d, 0, c, d) * 0.5 + c * 0.5 + b;\n            }\n        },\n        'EaseIn': function (t, b, c, d) {\n            return c * (t /= d) * t + b;\n        },\n        'EaseOut': function (t, b, c, d) {\n            return -c * (t /= d) * (t - 2) + b;\n        },\n        'EaseInOut': function (t, b, c, d) {\n            if ((t /= d / 2) < 1) {\n                return c / 2 * t * t + b;\n            }\n            return -c / 2 * (--t * (t - 2) - 1) + b;\n        },\n        'StrongEaseIn': function (t, b, c, d) {\n            return c * (t /= d) * t * t * t * t + b;\n        },\n        'StrongEaseOut': function (t, b, c, d) {\n            return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n        },\n        'StrongEaseInOut': function (t, b, c, d) {\n            if ((t /= d / 2) < 1) {\n                return c / 2 * t * t * t * t * t + b;\n            }\n            return c / 2 * ((t -= 2) * t * t * t * t + 2) + b;\n        },\n        'Linear': function (t, b, c, d) {\n            return c * t / d + b;\n        }\n    };\n}());\n;\n(function () {\n    Kinetic.DD = {\n        anim: new Kinetic.Animation(),\n        isDragging: false,\n        offset: {\n            x: 0,\n            y: 0\n        },\n        node: null,\n        _drag: function (evt) {\n            var dd = Kinetic.DD, node = dd.node;\n            if (node) {\n                node._setDragPosition(evt);\n                if (!dd.isDragging) {\n                    dd.isDragging = true;\n                    node.fire('dragstart', evt, true);\n                }\n                node.fire('dragmove', evt, true);\n            }\n        },\n        _endDragBefore: function (evt) {\n            var dd = Kinetic.DD, node = dd.node, nodeType, layer;\n            if (node) {\n                nodeType = node.nodeType, layer = node.getLayer();\n                dd.anim.stop();\n                if (dd.isDragging) {\n                    dd.isDragging = false;\n                    Kinetic.listenClickTap = false;\n                    if (evt) {\n                        evt.dragEndNode = node;\n                    }\n                }\n                delete dd.node;\n                (layer || node).draw();\n            }\n        },\n        _endDragAfter: function (evt) {\n            evt = evt || {};\n            var dragEndNode = evt.dragEndNode;\n            if (evt && dragEndNode) {\n                dragEndNode.fire('dragend', evt, true);\n            }\n        }\n    };\n    Kinetic.Node.prototype.startDrag = function () {\n        var dd = Kinetic.DD, stage = this.getStage(), layer = this.getLayer(), pos = stage.getPointerPosition(), ap = this.getAbsolutePosition();\n        if (pos) {\n            if (dd.node) {\n                dd.node.stopDrag();\n            }\n            dd.node = this;\n            dd.offset.x = pos.x - ap.x;\n            dd.offset.y = pos.y - ap.y;\n            dd.anim.setLayers(layer || this.getLayers());\n            dd.anim.start();\n            this._setDragPosition();\n        }\n    };\n    Kinetic.Node.prototype._setDragPosition = function (evt) {\n        var dd = Kinetic.DD, pos = this.getStage().getPointerPosition(), dbf = this.getDragBoundFunc(), newNodePos = {\n                x: pos.x - dd.offset.x,\n                y: pos.y - dd.offset.y\n            };\n        if (dbf !== undefined) {\n            newNodePos = dbf.call(this, newNodePos, evt);\n        }\n        this.setAbsolutePosition(newNodePos);\n    };\n    Kinetic.Node.prototype.stopDrag = function () {\n        var dd = Kinetic.DD, evt = {};\n        dd._endDragBefore(evt);\n        dd._endDragAfter(evt);\n    };\n    Kinetic.Node.prototype.setDraggable = function (draggable) {\n        this._setAttr('draggable', draggable);\n        this._dragChange();\n    };\n    var origDestroy = Kinetic.Node.prototype.destroy;\n    Kinetic.Node.prototype.destroy = function () {\n        var dd = Kinetic.DD;\n        if (dd.node && dd.node._id === this._id) {\n            this.stopDrag();\n        }\n        origDestroy.call(this);\n    };\n    Kinetic.Node.prototype.isDragging = function () {\n        var dd = Kinetic.DD;\n        return dd.node && dd.node._id === this._id && dd.isDragging;\n    };\n    Kinetic.Node.prototype._listenDrag = function () {\n        this._dragCleanup();\n        var that = this;\n        this.on('mousedown.kinetic touchstart.kinetic', function (evt) {\n            if (!Kinetic.DD.node) {\n                that.startDrag(evt);\n            }\n        });\n    };\n    Kinetic.Node.prototype._dragChange = function () {\n        if (this.attrs.draggable) {\n            this._listenDrag();\n        } else {\n            this._dragCleanup();\n            var stage = this.getStage();\n            var dd = Kinetic.DD;\n            if (stage && dd.node && dd.node._id === this._id) {\n                dd.node.stopDrag();\n            }\n        }\n    };\n    Kinetic.Node.prototype._dragCleanup = function () {\n        this.off('mousedown.kinetic');\n        this.off('touchstart.kinetic');\n    };\n    Kinetic.Factory.addGetterSetter(Kinetic.Node, 'dragBoundFunc');\n    Kinetic.Factory.addGetter(Kinetic.Node, 'draggable', false);\n    Kinetic.Node.prototype.isDraggable = Kinetic.Node.prototype.getDraggable;\n    var html = document.getElementsByTagName('html')[0];\n    html.addEventListener('mouseup', Kinetic.DD._endDragBefore, true);\n    html.addEventListener('touchend', Kinetic.DD._endDragBefore, true);\n    html.addEventListener('mouseup', Kinetic.DD._endDragAfter, false);\n    html.addEventListener('touchend', Kinetic.DD._endDragAfter, false);\n}());\n;\n(function () {\n    Kinetic.Util.addMethods(Kinetic.Container, {\n        __init: function (config) {\n            this.children = new Kinetic.Collection();\n            Kinetic.Node.call(this, config);\n        },\n        getChildren: function () {\n            return this.children;\n        },\n        hasChildren: function () {\n            return this.getChildren().length > 0;\n        },\n        removeChildren: function () {\n            var children = this.children, child;\n            while (children.length > 0) {\n                child = children[0];\n                if (child.hasChildren()) {\n                    child.removeChildren();\n                }\n                child.remove();\n            }\n            return this;\n        },\n        destroyChildren: function () {\n            var children = this.children;\n            while (children.length > 0) {\n                children[0].destroy();\n            }\n            return this;\n        },\n        add: function (child) {\n            var children = this.children;\n            this._validateAdd(child);\n            child.index = children.length;\n            child.parent = this;\n            children.push(child);\n            this._fire('add', { child: child });\n            return this;\n        },\n        destroy: function () {\n            if (this.hasChildren()) {\n                this.destroyChildren();\n            }\n            Kinetic.Node.prototype.destroy.call(this);\n        },\n        find: function (selector) {\n            var retArr = [], selectorArr = selector.replace(/ /g, '').split(','), len = selectorArr.length, n, i, sel, arr, node, children, clen;\n            for (n = 0; n < len; n++) {\n                sel = selectorArr[n];\n                if (sel.charAt(0) === '#') {\n                    node = this._getNodeById(sel.slice(1));\n                    if (node) {\n                        retArr.push(node);\n                    }\n                } else if (sel.charAt(0) === '.') {\n                    arr = this._getNodesByName(sel.slice(1));\n                    retArr = retArr.concat(arr);\n                } else {\n                    children = this.getChildren();\n                    clen = children.length;\n                    for (i = 0; i < clen; i++) {\n                        retArr = retArr.concat(children[i]._get(sel));\n                    }\n                }\n            }\n            return Kinetic.Collection.toCollection(retArr);\n        },\n        _getNodeById: function (key) {\n            var node = Kinetic.ids[key];\n            if (node !== undefined && this.isAncestorOf(node)) {\n                return node;\n            }\n            return null;\n        },\n        _getNodesByName: function (key) {\n            var arr = Kinetic.names[key] || [];\n            return this._getDescendants(arr);\n        },\n        _get: function (selector) {\n            var retArr = Kinetic.Node.prototype._get.call(this, selector);\n            var children = this.getChildren();\n            var len = children.length;\n            for (var n = 0; n < len; n++) {\n                retArr = retArr.concat(children[n]._get(selector));\n            }\n            return retArr;\n        },\n        toObject: function () {\n            var obj = Kinetic.Node.prototype.toObject.call(this);\n            obj.children = [];\n            var children = this.getChildren();\n            var len = children.length;\n            for (var n = 0; n < len; n++) {\n                var child = children[n];\n                obj.children.push(child.toObject());\n            }\n            return obj;\n        },\n        _getDescendants: function (arr) {\n            var retArr = [];\n            var len = arr.length;\n            for (var n = 0; n < len; n++) {\n                var node = arr[n];\n                if (this.isAncestorOf(node)) {\n                    retArr.push(node);\n                }\n            }\n            return retArr;\n        },\n        isAncestorOf: function (node) {\n            var parent = node.getParent();\n            while (parent) {\n                if (parent._id === this._id) {\n                    return true;\n                }\n                parent = parent.getParent();\n            }\n            return false;\n        },\n        clone: function (obj) {\n            var node = Kinetic.Node.prototype.clone.call(this, obj);\n            this.getChildren().each(function (no) {\n                node.add(no.clone());\n            });\n            return node;\n        },\n        getAllIntersections: function () {\n            var pos = Kinetic.Util._getXY(Array.prototype.slice.call(arguments));\n            var arr = [];\n            var shapes = this.find('Shape');\n            var len = shapes.length;\n            for (var n = 0; n < len; n++) {\n                var shape = shapes[n];\n                if (shape.isVisible() && shape.intersects(pos)) {\n                    arr.push(shape);\n                }\n            }\n            return arr;\n        },\n        _setChildrenIndices: function () {\n            this.children.each(function (child, n) {\n                child.index = n;\n            });\n        },\n        drawScene: function (canvas) {\n            var layer = this.getLayer(), clip = this.getClipWidth() && this.getClipHeight(), children, n, len;\n            if (!canvas && layer) {\n                canvas = layer.getCanvas();\n            }\n            if (this.isVisible()) {\n                if (clip) {\n                    canvas.getContext()._clip(this);\n                } else {\n                    this._drawChildren(canvas);\n                }\n            }\n            return this;\n        },\n        _drawChildren: function (canvas) {\n            this.children.each(function (child) {\n                child.drawScene(canvas);\n            });\n        },\n        drawHit: function () {\n            var hasClip = this.getClipWidth() && this.getClipHeight() && this.nodeType !== 'Stage', n = 0, len = 0, children = [], hitCanvas;\n            if (this.shouldDrawHit()) {\n                if (hasClip) {\n                    hitCanvas = this.getLayer().hitCanvas;\n                    hitCanvas.getContext()._clip(this);\n                }\n                children = this.children;\n                len = children.length;\n                for (n = 0; n < len; n++) {\n                    children[n].drawHit();\n                }\n                if (hasClip) {\n                    hitCanvas.getContext()._context.restore();\n                }\n            }\n            return this;\n        }\n    });\n    Kinetic.Util.extend(Kinetic.Container, Kinetic.Node);\n    Kinetic.Container.prototype.get = Kinetic.Container.prototype.find;\n    Kinetic.Factory.addBoxGetterSetter(Kinetic.Container, 'clip');\n}());\n;\n(function () {\n    var HAS_SHADOW = 'hasShadow';\n    function _fillFunc(context) {\n        context.fill();\n    }\n    function _strokeFunc(context) {\n        context.stroke();\n    }\n    function _fillFuncHit(context) {\n        context.fill();\n    }\n    function _strokeFuncHit(context) {\n        context.stroke();\n    }\n    function _clearHasShadowCache() {\n        this._clearCache(HAS_SHADOW);\n    }\n    Kinetic.Util.addMethods(Kinetic.Shape, {\n        __init: function (config) {\n            this.nodeType = 'Shape';\n            this._fillFunc = _fillFunc;\n            this._strokeFunc = _strokeFunc;\n            this._fillFuncHit = _fillFuncHit;\n            this._strokeFuncHit = _strokeFuncHit;\n            var shapes = Kinetic.shapes;\n            var key;\n            while (true) {\n                key = Kinetic.Util.getRandomColor();\n                if (key && !(key in shapes)) {\n                    break;\n                }\n            }\n            this.colorKey = key;\n            shapes[key] = this;\n            Kinetic.Node.call(this, config);\n            this._setDrawFuncs();\n            this.on('shadowColorChange.kinetic shadowBlurChange.kinetic shadowOffsetChange.kinetic shadowOpacityChange.kinetic', _clearHasShadowCache);\n        },\n        hasChildren: function () {\n            return false;\n        },\n        getChildren: function () {\n            return [];\n        },\n        getContext: function () {\n            return this.getLayer().getContext();\n        },\n        getCanvas: function () {\n            return this.getLayer().getCanvas();\n        },\n        hasShadow: function () {\n            return this._getCache(HAS_SHADOW, this._hasShadow);\n        },\n        _hasShadow: function () {\n            return this.getShadowOpacity() !== 0 && !!(this.getShadowColor() || this.getShadowBlur() || this.getShadowOffsetX() || this.getShadowOffsetY());\n        },\n        hasFill: function () {\n            return !!(this.getFill() || this.getFillPatternImage() || this.getFillLinearGradientColorStops() || this.getFillRadialGradientColorStops());\n        },\n        _get: function (selector) {\n            return this.className === selector || this.nodeType === selector ? [this] : [];\n        },\n        intersects: function () {\n            var pos = Kinetic.Util._getXY(Array.prototype.slice.call(arguments));\n            var stage = this.getStage();\n            var hitCanvas = stage.hitCanvas;\n            hitCanvas.getContext().clear();\n            this.drawScene(hitCanvas);\n            var p = hitCanvas.context.getImageData(pos.x | 0, pos.y | 0, 1, 1).data;\n            return p[3] > 0;\n        },\n        enableFill: function () {\n            this._setAttr('fillEnabled', true);\n            return this;\n        },\n        disableFill: function () {\n            this._setAttr('fillEnabled', false);\n            return this;\n        },\n        enableStroke: function () {\n            this._setAttr('strokeEnabled', true);\n            return this;\n        },\n        disableStroke: function () {\n            this._setAttr('strokeEnabled', false);\n            return this;\n        },\n        enableStrokeScale: function () {\n            this._setAttr('strokeScaleEnabled', true);\n            return this;\n        },\n        disableStrokeScale: function () {\n            this._setAttr('strokeScaleEnabled', false);\n            return this;\n        },\n        enableShadow: function () {\n            this._setAttr('shadowEnabled', true);\n            return this;\n        },\n        disableShadow: function () {\n            this._setAttr('shadowEnabled', false);\n            return this;\n        },\n        enableDashArray: function () {\n            this._setAttr('dashArrayEnabled', true);\n            return this;\n        },\n        disableDashArray: function () {\n            this._setAttr('dashArrayEnabled', false);\n            return this;\n        },\n        destroy: function () {\n            Kinetic.Node.prototype.destroy.call(this);\n            delete Kinetic.shapes[this.colorKey];\n            return this;\n        },\n        drawScene: function (canvas) {\n            canvas = canvas || this.getLayer().getCanvas();\n            var drawFunc = this.getDrawFunc(), context = canvas.getContext();\n            if (drawFunc && this.isVisible()) {\n                context.save();\n                context._applyOpacity(this);\n                context._applyLineJoin(this);\n                context._applyAncestorTransforms(this);\n                drawFunc.call(this, context);\n                context.restore();\n            }\n            return this;\n        },\n        drawHit: function () {\n            var attrs = this.getAttrs(), drawFunc = attrs.drawHitFunc || attrs.drawFunc, canvas = this.getLayer().hitCanvas, context = canvas.getContext();\n            if (drawFunc && this.shouldDrawHit()) {\n                context.save();\n                context._applyLineJoin(this);\n                context._applyAncestorTransforms(this);\n                drawFunc.call(this, context);\n                context.restore();\n            }\n            return this;\n        },\n        _setDrawFuncs: function () {\n            if (!this.attrs.drawFunc && this.drawFunc) {\n                this.setDrawFunc(this.drawFunc);\n            }\n            if (!this.attrs.drawHitFunc && this.drawHitFunc) {\n                this.setDrawHitFunc(this.drawHitFunc);\n            }\n        }\n    });\n    Kinetic.Util.extend(Kinetic.Shape, Kinetic.Node);\n    Kinetic.Factory.addColorGetterSetter(Kinetic.Shape, 'stroke');\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'lineJoin');\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'lineCap');\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'strokeWidth');\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'drawFunc');\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'drawHitFunc');\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'dashArray');\n    Kinetic.Factory.addColorGetterSetter(Kinetic.Shape, 'shadowColor');\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'shadowBlur');\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'shadowOpacity');\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'fillPatternImage');\n    Kinetic.Factory.addColorGetterSetter(Kinetic.Shape, 'fill');\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'fillPatternX');\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'fillPatternY');\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'fillLinearGradientColorStops');\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'fillRadialGradientStartRadius');\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'fillRadialGradientEndRadius');\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'fillRadialGradientColorStops');\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'fillPatternRepeat');\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'fillEnabled', true);\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'strokeEnabled', true);\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'shadowEnabled', true);\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'dashArrayEnabled', true);\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'fillPriority', 'color');\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'strokeScaleEnabled', true);\n    Kinetic.Factory.addPointGetterSetter(Kinetic.Shape, 'fillPatternOffset', 0);\n    Kinetic.Factory.addPointGetterSetter(Kinetic.Shape, 'fillPatternScale', 1);\n    Kinetic.Factory.addPointGetterSetter(Kinetic.Shape, 'fillLinearGradientStartPoint', 0);\n    Kinetic.Factory.addPointGetterSetter(Kinetic.Shape, 'fillLinearGradientEndPoint', 0);\n    Kinetic.Factory.addPointGetterSetter(Kinetic.Shape, 'fillRadialGradientStartPoint', 0);\n    Kinetic.Factory.addPointGetterSetter(Kinetic.Shape, 'fillRadialGradientEndPoint', 0);\n    Kinetic.Factory.addPointGetterSetter(Kinetic.Shape, 'shadowOffset', 0);\n    Kinetic.Factory.addRotationGetterSetter(Kinetic.Shape, 'fillPatternRotation', 0);\n}());\n;\n(function () {\n    var STAGE = 'Stage', STRING = 'string', PX = 'px', MOUSEOUT = 'mouseout', MOUSELEAVE = 'mouseleave', MOUSEOVER = 'mouseover', MOUSEENTER = 'mouseenter', MOUSEMOVE = 'mousemove', MOUSEDOWN = 'mousedown', MOUSEUP = 'mouseup', CLICK = 'click', DBL_CLICK = 'dblclick', TOUCHSTART = 'touchstart', TOUCHEND = 'touchend', TAP = 'tap', DBL_TAP = 'dbltap', TOUCHMOVE = 'touchmove', CONTENT_MOUSEOUT = 'contentMouseout', CONTENT_MOUSELEAVE = 'contentMouseleave', CONTENT_MOUSEOVER = 'contentMouseover', CONTENT_MOUSEENTER = 'contentMouseenter', CONTENT_MOUSEMOVE = 'contentMousemove', CONTENT_MOUSEDOWN = 'contentMousedown', CONTENT_MOUSEUP = 'contentMouseup', CONTENT_CLICK = 'contentClick', CONTENT_DBL_CLICK = 'contentDblclick', CONTENT_TOUCHSTART = 'contentTouchstart', CONTENT_TOUCHEND = 'contentTouchend', CONTENT_TAP = 'contentTap', CONTENT_DBL_TAP = 'contentDbltap', CONTENT_TOUCHMOVE = 'contentTouchmove', DIV = 'div', RELATIVE = 'relative', INLINE_BLOCK = 'inline-block', KINETICJS_CONTENT = 'kineticjs-content', SPACE = ' ', UNDERSCORE = '_', CONTAINER = 'container', EMPTY_STRING = '', EVENTS = [\n            MOUSEDOWN,\n            MOUSEMOVE,\n            MOUSEUP,\n            MOUSEOUT,\n            TOUCHSTART,\n            TOUCHMOVE,\n            TOUCHEND,\n            MOUSEOVER\n        ], eventsLength = EVENTS.length;\n    function addEvent(ctx, eventName) {\n        ctx.content.addEventListener(eventName, function (evt) {\n            ctx[UNDERSCORE + eventName](evt);\n        }, false);\n    }\n    Kinetic.Util.addMethods(Kinetic.Stage, {\n        ___init: function (config) {\n            Kinetic.Container.call(this, config);\n            this.nodeType = STAGE;\n            this._id = Kinetic.idCounter++;\n            this._buildDOM();\n            this._bindContentEvents();\n            Kinetic.stages.push(this);\n        },\n        _validateAdd: function (child) {\n            if (child.getType() !== 'Layer') {\n                Kinetic.Util.error('You may only add layers to the stage.');\n            }\n        },\n        setContainer: function (container) {\n            if (typeof container === STRING) {\n                container = document.getElementById(container);\n            }\n            this._setAttr(CONTAINER, container);\n            return this;\n        },\n        draw: function () {\n            Kinetic.Node.prototype.draw.call(this);\n            return this;\n        },\n        setHeight: function (height) {\n            Kinetic.Node.prototype.setHeight.call(this, height);\n            this._resizeDOM();\n            return this;\n        },\n        setWidth: function (width) {\n            Kinetic.Node.prototype.setWidth.call(this, width);\n            this._resizeDOM();\n            return this;\n        },\n        clear: function () {\n            var layers = this.children, len = layers.length, n;\n            for (n = 0; n < len; n++) {\n                layers[n].clear();\n            }\n            return this;\n        },\n        destroy: function () {\n            var content = this.content;\n            Kinetic.Container.prototype.destroy.call(this);\n            if (content && Kinetic.Util._isInDocument(content)) {\n                this.getContainer().removeChild(content);\n            }\n        },\n        getMousePosition: function () {\n            return this.mousePos;\n        },\n        getTouchPosition: function () {\n            return this.touchPos;\n        },\n        getPointerPosition: function () {\n            return this.getTouchPosition() || this.getMousePosition();\n        },\n        getStage: function () {\n            return this;\n        },\n        getContent: function () {\n            return this.content;\n        },\n        toDataURL: function (config) {\n            config = config || {};\n            var mimeType = config.mimeType || null, quality = config.quality || null, x = config.x || 0, y = config.y || 0, canvas = new Kinetic.SceneCanvas({\n                    width: config.width || this.getWidth(),\n                    height: config.height || this.getHeight(),\n                    pixelRatio: 1\n                }), _context = canvas.getContext()._context, layers = this.children;\n            if (x || y) {\n                _context.translate(-1 * x, -1 * y);\n            }\n            function drawLayer(n) {\n                var layer = layers[n], layerUrl = layer.toDataURL(), imageObj = new Image();\n                imageObj.onload = function () {\n                    _context.drawImage(imageObj, 0, 0);\n                    if (n < layers.length - 1) {\n                        drawLayer(n + 1);\n                    } else {\n                        config.callback(canvas.toDataURL(mimeType, quality));\n                    }\n                };\n                imageObj.src = layerUrl;\n            }\n            drawLayer(0);\n        },\n        toImage: function (config) {\n            var cb = config.callback;\n            config.callback = function (dataUrl) {\n                Kinetic.Util._getImage(dataUrl, function (img) {\n                    cb(img);\n                });\n            };\n            this.toDataURL(config);\n        },\n        getIntersection: function () {\n            var pos = Kinetic.Util._getXY(Array.prototype.slice.call(arguments)), layers = this.getChildren(), len = layers.length, end = len - 1, n, obj;\n            for (n = end; n >= 0; n--) {\n                obj = layers[n].getIntersection(pos);\n                if (obj) {\n                    return obj;\n                }\n            }\n            return null;\n        },\n        _resizeDOM: function () {\n            if (this.content) {\n                var width = this.getWidth(), height = this.getHeight(), layers = this.getChildren(), len = layers.length, n, layer;\n                this.content.style.width = width + PX;\n                this.content.style.height = height + PX;\n                this.bufferCanvas.setSize(width, height, 1);\n                this.hitCanvas.setSize(width, height);\n                for (n = 0; n < len; n++) {\n                    layer = layers[n];\n                    layer.getCanvas().setSize(width, height);\n                    layer.hitCanvas.setSize(width, height);\n                    layer.draw();\n                }\n            }\n        },\n        add: function (layer) {\n            Kinetic.Container.prototype.add.call(this, layer);\n            layer.canvas.setSize(this.attrs.width, this.attrs.height);\n            layer.hitCanvas.setSize(this.attrs.width, this.attrs.height);\n            layer.draw();\n            this.content.appendChild(layer.canvas._canvas);\n            return this;\n        },\n        getParent: function () {\n            return null;\n        },\n        getLayer: function () {\n            return null;\n        },\n        getLayers: function () {\n            return this.getChildren();\n        },\n        _setPointerPosition: function (evt) {\n            if (!evt) {\n                evt = window.event;\n            }\n            this._setMousePosition(evt);\n            this._setTouchPosition(evt);\n        },\n        _bindContentEvents: function () {\n            var that = this, n;\n            for (n = 0; n < eventsLength; n++) {\n                addEvent(this, EVENTS[n]);\n            }\n        },\n        _mouseover: function (evt) {\n            this._fire(CONTENT_MOUSEOVER, evt);\n        },\n        _mouseout: function (evt) {\n            this._setPointerPosition(evt);\n            var targetShape = this.targetShape;\n            if (targetShape && !Kinetic.isDragging()) {\n                targetShape._fireAndBubble(MOUSEOUT, evt);\n                targetShape._fireAndBubble(MOUSELEAVE, evt);\n                this.targetShape = null;\n            }\n            this.mousePos = undefined;\n            this._fire(CONTENT_MOUSEOUT, evt);\n        },\n        _mousemove: function (evt) {\n            this._setPointerPosition(evt);\n            var dd = Kinetic.DD, obj = this.getIntersection(this.getPointerPosition()), shape = obj && obj.shape ? obj.shape : undefined;\n            if (shape) {\n                if (!Kinetic.isDragging() && obj.pixel[3] === 255 && (!this.targetShape || this.targetShape._id !== shape._id)) {\n                    if (this.targetShape) {\n                        this.targetShape._fireAndBubble(MOUSEOUT, evt, shape);\n                        this.targetShape._fireAndBubble(MOUSELEAVE, evt, shape);\n                    }\n                    shape._fireAndBubble(MOUSEOVER, evt, this.targetShape);\n                    shape._fireAndBubble(MOUSEENTER, evt, this.targetShape);\n                    this.targetShape = shape;\n                } else {\n                    shape._fireAndBubble(MOUSEMOVE, evt);\n                }\n            } else {\n                if (this.targetShape && !Kinetic.isDragging()) {\n                    this.targetShape._fireAndBubble(MOUSEOUT, evt);\n                    this.targetShape._fireAndBubble(MOUSELEAVE, evt);\n                    this.targetShape = null;\n                }\n            }\n            this._fire(CONTENT_MOUSEMOVE, evt);\n            if (dd) {\n                dd._drag(evt);\n            }\n            if (evt.preventDefault) {\n                evt.preventDefault();\n            }\n        },\n        _mousedown: function (evt) {\n            this._setPointerPosition(evt);\n            var obj = this.getIntersection(this.getPointerPosition()), shape = obj && obj.shape ? obj.shape : undefined;\n            Kinetic.listenClickTap = true;\n            if (shape) {\n                this.clickStartShape = shape;\n                shape._fireAndBubble(MOUSEDOWN, evt);\n            }\n            this._fire(CONTENT_MOUSEDOWN);\n            if (evt.preventDefault) {\n                evt.preventDefault();\n            }\n        },\n        _mouseup: function (evt) {\n            this._setPointerPosition(evt);\n            var that = this, obj = this.getIntersection(this.getPointerPosition()), shape = obj && obj.shape ? obj.shape : undefined, fireDblClick = false;\n            if (Kinetic.inDblClickWindow) {\n                fireDblClick = true;\n                Kinetic.inDblClickWindow = false;\n            } else {\n                Kinetic.inDblClickWindow = true;\n            }\n            setTimeout(function () {\n                Kinetic.inDblClickWindow = false;\n            }, Kinetic.dblClickWindow);\n            if (shape) {\n                shape._fireAndBubble(MOUSEUP, evt);\n                if (Kinetic.listenClickTap && shape._id === this.clickStartShape._id) {\n                    shape._fireAndBubble(CLICK, evt);\n                    if (fireDblClick) {\n                        shape._fireAndBubble(DBL_CLICK, evt);\n                    }\n                }\n            }\n            this._fire(CONTENT_MOUSEUP);\n            if (Kinetic.listenClickTap) {\n                this._fire(CONTENT_CLICK, evt);\n                if (fireDblClick) {\n                    this._fire(CONTENT_DBL_CLICK, evt);\n                }\n            }\n            Kinetic.listenClickTap = false;\n            if (evt.preventDefault) {\n                evt.preventDefault();\n            }\n        },\n        _touchstart: function (evt) {\n            this._setPointerPosition(evt);\n            var obj = this.getIntersection(this.getPointerPosition()), shape = obj && obj.shape ? obj.shape : undefined;\n            Kinetic.listenClickTap = true;\n            if (shape) {\n                this.tapStartShape = shape;\n                shape._fireAndBubble(TOUCHSTART, evt);\n                if (shape.isListening() && evt.preventDefault) {\n                    evt.preventDefault();\n                }\n            }\n            this._fire(CONTENT_TOUCHSTART, evt);\n        },\n        _touchend: function (evt) {\n            this._setPointerPosition(evt);\n            var that = this, obj = this.getIntersection(this.getPointerPosition()), shape = obj && obj.shape ? obj.shape : undefined, fireDblClick = false;\n            if (Kinetic.inDblClickWindow) {\n                fireDblClick = true;\n                Kinetic.inDblClickWindow = false;\n            } else {\n                Kinetic.inDblClickWindow = true;\n            }\n            setTimeout(function () {\n                Kinetic.inDblClickWindow = false;\n            }, Kinetic.dblClickWindow);\n            if (shape) {\n                shape._fireAndBubble(TOUCHEND, evt);\n                if (Kinetic.listenClickTap && shape._id === this.tapStartShape._id) {\n                    shape._fireAndBubble(TAP, evt);\n                    if (fireDblClick) {\n                        shape._fireAndBubble(DBL_TAP, evt);\n                    }\n                }\n                if (shape.isListening() && evt.preventDefault) {\n                    evt.preventDefault();\n                }\n            }\n            if (Kinetic.listenClickTap) {\n                this._fire(CONTENT_TOUCHEND, evt);\n                if (fireDblClick) {\n                    this._fire(CONTENT_DBL_TAP, evt);\n                }\n            }\n            Kinetic.listenClickTap = false;\n        },\n        _touchmove: function (evt) {\n            this._setPointerPosition(evt);\n            var dd = Kinetic.DD, obj = this.getIntersection(this.getPointerPosition()), shape = obj && obj.shape ? obj.shape : undefined;\n            if (shape) {\n                shape._fireAndBubble(TOUCHMOVE, evt);\n                if (shape.isListening() && evt.preventDefault) {\n                    evt.preventDefault();\n                }\n            }\n            this._fire(CONTENT_TOUCHMOVE, evt);\n            if (dd) {\n                dd._drag(evt);\n            }\n        },\n        _setMousePosition: function (evt) {\n            var mouseX = evt.offsetX !== undefined ? evt.offsetX : evt.layerX || evt.clientX - this._getContentPosition().left, mouseY = evt.offsetY !== undefined ? evt.offsetY : evt.layerY || evt.clientY - this._getContentPosition().top;\n            this.mousePos = {\n                x: mouseX,\n                y: mouseY\n            };\n        },\n        _setTouchPosition: function (evt) {\n            var touch, touchX, touchY;\n            if (evt.touches !== undefined && evt.touches.length === 1) {\n                touch = evt.touches[0];\n                touchX = touch.clientX - this._getContentPosition().left;\n                touchY = touch.clientY - this._getContentPosition().top;\n                this.touchPos = {\n                    x: touchX,\n                    y: touchY\n                };\n            }\n        },\n        _getContentPosition: function () {\n            var rect = this.content.getBoundingClientRect();\n            return {\n                top: rect.top,\n                left: rect.left\n            };\n        },\n        _buildDOM: function () {\n            var container = this.getContainer();\n            container.innerHTML = EMPTY_STRING;\n            this.content = document.createElement(DIV);\n            this.content.style.position = RELATIVE;\n            this.content.style.display = INLINE_BLOCK;\n            this.content.className = KINETICJS_CONTENT;\n            container.appendChild(this.content);\n            this.bufferCanvas = new Kinetic.SceneCanvas();\n            this.hitCanvas = new Kinetic.HitCanvas();\n            this._resizeDOM();\n        },\n        _onContent: function (typesStr, handler) {\n            var types = typesStr.split(SPACE), len = types.length, n, baseEvent;\n            for (n = 0; n < len; n++) {\n                baseEvent = types[n];\n                this.content.addEventListener(baseEvent, handler, false);\n            }\n        }\n    });\n    Kinetic.Util.extend(Kinetic.Stage, Kinetic.Container);\n    Kinetic.Factory.addGetter(Kinetic.Stage, 'container');\n}());\n;\n(function () {\n    var HASH = '#', BEFORE_DRAW = 'beforeDraw', DRAW = 'draw';\n    Kinetic.Util.addMethods(Kinetic.Layer, {\n        ___init: function (config) {\n            this.nodeType = 'Layer';\n            this.canvas = new Kinetic.SceneCanvas();\n            this.hitCanvas = new Kinetic.HitCanvas();\n            Kinetic.Container.call(this, config);\n        },\n        _validateAdd: function (child) {\n            var type = child.getType();\n            if (type !== 'Group' && type !== 'Shape') {\n                Kinetic.Util.error('You may only add groups and shapes to a layer.');\n            }\n        },\n        getIntersection: function () {\n            var pos = Kinetic.Util._getXY(Array.prototype.slice.call(arguments)), p, colorKey, shape;\n            if (this.isVisible() && this.isListening()) {\n                p = this.hitCanvas.context._context.getImageData(pos.x | 0, pos.y | 0, 1, 1).data;\n                if (p[3] === 255) {\n                    colorKey = Kinetic.Util._rgbToHex(p[0], p[1], p[2]);\n                    shape = Kinetic.shapes[HASH + colorKey];\n                    return {\n                        shape: shape,\n                        pixel: p\n                    };\n                } else if (p[0] > 0 || p[1] > 0 || p[2] > 0 || p[3] > 0) {\n                    return { pixel: p };\n                }\n            }\n            return null;\n        },\n        drawScene: function (canvas) {\n            canvas = canvas || this.getCanvas();\n            this._fire(BEFORE_DRAW, { node: this });\n            if (this.getClearBeforeDraw()) {\n                canvas.getContext().clear();\n            }\n            Kinetic.Container.prototype.drawScene.call(this, canvas);\n            this._fire(DRAW, { node: this });\n            return this;\n        },\n        drawHit: function () {\n            var layer = this.getLayer();\n            if (layer && layer.getClearBeforeDraw()) {\n                layer.getHitCanvas().getContext().clear();\n            }\n            Kinetic.Container.prototype.drawHit.call(this);\n            return this;\n        },\n        getCanvas: function () {\n            return this.canvas;\n        },\n        getHitCanvas: function () {\n            return this.hitCanvas;\n        },\n        getContext: function () {\n            return this.getCanvas().getContext();\n        },\n        clear: function () {\n            var context = this.getContext(), hitContext = this.getHitCanvas().getContext();\n            context.clear.apply(context, arguments);\n            hitContext.clear.apply(hitContext, arguments);\n            return this;\n        },\n        setVisible: function (visible) {\n            Kinetic.Node.prototype.setVisible.call(this, visible);\n            if (visible) {\n                this.getCanvas()._canvas.style.display = 'block';\n                this.hitCanvas._canvas.style.display = 'block';\n            } else {\n                this.getCanvas()._canvas.style.display = 'none';\n                this.hitCanvas._canvas.style.display = 'none';\n            }\n            return this;\n        },\n        setZIndex: function (index) {\n            Kinetic.Node.prototype.setZIndex.call(this, index);\n            var stage = this.getStage();\n            if (stage) {\n                stage.content.removeChild(this.getCanvas()._canvas);\n                if (index < stage.getChildren().length - 1) {\n                    stage.content.insertBefore(this.getCanvas()._canvas, stage.getChildren()[index + 1].getCanvas()._canvas);\n                } else {\n                    stage.content.appendChild(this.getCanvas()._canvas);\n                }\n            }\n            return this;\n        },\n        moveToTop: function () {\n            Kinetic.Node.prototype.moveToTop.call(this);\n            var stage = this.getStage();\n            if (stage) {\n                stage.content.removeChild(this.getCanvas()._canvas);\n                stage.content.appendChild(this.getCanvas()._canvas);\n            }\n        },\n        moveUp: function () {\n            if (Kinetic.Node.prototype.moveUp.call(this)) {\n                var stage = this.getStage();\n                if (stage) {\n                    stage.content.removeChild(this.getCanvas()._canvas);\n                    if (this.index < stage.getChildren().length - 1) {\n                        stage.content.insertBefore(this.getCanvas()._canvas, stage.getChildren()[this.index + 1].getCanvas()._canvas);\n                    } else {\n                        stage.content.appendChild(this.getCanvas()._canvas);\n                    }\n                }\n            }\n        },\n        moveDown: function () {\n            if (Kinetic.Node.prototype.moveDown.call(this)) {\n                var stage = this.getStage();\n                if (stage) {\n                    var children = stage.getChildren();\n                    stage.content.removeChild(this.getCanvas()._canvas);\n                    stage.content.insertBefore(this.getCanvas()._canvas, children[this.index + 1].getCanvas()._canvas);\n                }\n            }\n        },\n        moveToBottom: function () {\n            if (Kinetic.Node.prototype.moveToBottom.call(this)) {\n                var stage = this.getStage();\n                if (stage) {\n                    var children = stage.getChildren();\n                    stage.content.removeChild(this.getCanvas()._canvas);\n                    stage.content.insertBefore(this.getCanvas()._canvas, children[1].getCanvas()._canvas);\n                }\n            }\n        },\n        getLayer: function () {\n            return this;\n        },\n        remove: function () {\n            var stage = this.getStage(), canvas = this.getCanvas(), _canvas = canvas._canvas;\n            Kinetic.Node.prototype.remove.call(this);\n            if (stage && _canvas && Kinetic.Util._isInDocument(_canvas)) {\n                stage.content.removeChild(_canvas);\n            }\n            return this;\n        },\n        getStage: function () {\n            return this.parent;\n        }\n    });\n    Kinetic.Util.extend(Kinetic.Layer, Kinetic.Container);\n    Kinetic.Factory.addGetterSetter(Kinetic.Layer, 'clearBeforeDraw', true);\n}());\n;\n(function () {\n    Kinetic.Util.addMethods(Kinetic.Group, {\n        ___init: function (config) {\n            this.nodeType = 'Group';\n            Kinetic.Container.call(this, config);\n        },\n        _validateAdd: function (child) {\n            var type = child.getType();\n            if (type !== 'Group' && type !== 'Shape') {\n                Kinetic.Util.error('You may only add groups and shapes to groups.');\n            }\n        }\n    });\n    Kinetic.Util.extend(Kinetic.Group, Kinetic.Container);\n}());\n;\n(function () {\n    Kinetic.Rect = function (config) {\n        this.___init(config);\n    };\n    Kinetic.Rect.prototype = {\n        ___init: function (config) {\n            Kinetic.Shape.call(this, config);\n            this.className = 'Rect';\n        },\n        drawFunc: function (context) {\n            var cornerRadius = this.getCornerRadius(), width = this.getWidth(), height = this.getHeight();\n            context.beginPath();\n            if (!cornerRadius) {\n                context.rect(0, 0, width, height);\n            } else {\n                context.moveTo(cornerRadius, 0);\n                context.lineTo(width - cornerRadius, 0);\n                context.arc(width - cornerRadius, cornerRadius, cornerRadius, Math.PI * 3 / 2, 0, false);\n                context.lineTo(width, height - cornerRadius);\n                context.arc(width - cornerRadius, height - cornerRadius, cornerRadius, 0, Math.PI / 2, false);\n                context.lineTo(cornerRadius, height);\n                context.arc(cornerRadius, height - cornerRadius, cornerRadius, Math.PI / 2, Math.PI, false);\n                context.lineTo(0, cornerRadius);\n                context.arc(cornerRadius, cornerRadius, cornerRadius, Math.PI, Math.PI * 3 / 2, false);\n            }\n            context.closePath();\n            context.fillStrokeShape(this);\n        }\n    };\n    Kinetic.Util.extend(Kinetic.Rect, Kinetic.Shape);\n    Kinetic.Factory.addGetterSetter(Kinetic.Rect, 'cornerRadius', 0);\n}());\n;\n(function () {\n    var PIx2 = Math.PI * 2 - 0.0001, CIRCLE = 'Circle';\n    Kinetic.Circle = function (config) {\n        this.___init(config);\n    };\n    Kinetic.Circle.prototype = {\n        ___init: function (config) {\n            Kinetic.Shape.call(this, config);\n            this.className = CIRCLE;\n        },\n        drawFunc: function (context) {\n            context.beginPath();\n            context.arc(0, 0, this.getRadius(), 0, PIx2, false);\n            context.closePath();\n            context.fillStrokeShape(this);\n        },\n        getWidth: function () {\n            return this.getRadius() * 2;\n        },\n        getHeight: function () {\n            return this.getRadius() * 2;\n        },\n        setWidth: function (width) {\n            Kinetic.Node.prototype.setWidth.call(this, width);\n            this.setRadius(width / 2);\n        },\n        setHeight: function (height) {\n            Kinetic.Node.prototype.setHeight.call(this, height);\n            this.setRadius(height / 2);\n        }\n    };\n    Kinetic.Util.extend(Kinetic.Circle, Kinetic.Shape);\n    Kinetic.Factory.addGetterSetter(Kinetic.Circle, 'radius', 0);\n}());\n;\n(function () {\n    var PIx2 = Math.PI * 2 - 0.0001, ELLIPSE = 'Ellipse';\n    Kinetic.Ellipse = function (config) {\n        this.___init(config);\n    };\n    Kinetic.Ellipse.prototype = {\n        ___init: function (config) {\n            Kinetic.Shape.call(this, config);\n            this.className = ELLIPSE;\n        },\n        drawFunc: function (context) {\n            var r = this.getRadius();\n            context.beginPath();\n            context.save();\n            if (r.x !== r.y) {\n                context.scale(1, r.y / r.x);\n            }\n            context.arc(0, 0, r.x, 0, PIx2, false);\n            context.restore();\n            context.closePath();\n            context.fillStrokeShape(this);\n        },\n        getWidth: function () {\n            return this.getRadius().x * 2;\n        },\n        getHeight: function () {\n            return this.getRadius().y * 2;\n        },\n        setWidth: function (width) {\n            Kinetic.Node.prototype.setWidth.call(this, width);\n            this.setRadius({ x: width / 2 });\n        },\n        setHeight: function (height) {\n            Kinetic.Node.prototype.setHeight.call(this, height);\n            this.setRadius({ y: height / 2 });\n        }\n    };\n    Kinetic.Util.extend(Kinetic.Ellipse, Kinetic.Shape);\n    Kinetic.Factory.addPointGetterSetter(Kinetic.Ellipse, 'radius', 0);\n}());\n;\n(function () {\n    Kinetic.Wedge = function (config) {\n        this.___init(config);\n    };\n    Kinetic.Wedge.prototype = {\n        ___init: function (config) {\n            Kinetic.Shape.call(this, config);\n            this.className = 'Wedge';\n        },\n        drawFunc: function (context) {\n            context.beginPath();\n            context.arc(0, 0, this.getRadius(), 0, this.getAngle(), this.getClockwise());\n            context.lineTo(0, 0);\n            context.closePath();\n            context.fillStrokeShape(this);\n        }\n    };\n    Kinetic.Util.extend(Kinetic.Wedge, Kinetic.Shape);\n    Kinetic.Factory.addGetterSetter(Kinetic.Wedge, 'radius', 0);\n    Kinetic.Factory.addRotationGetterSetter(Kinetic.Wedge, 'angle', 0);\n    Kinetic.Factory.addGetterSetter(Kinetic.Wedge, 'clockwise', false);\n}());\n;\n(function () {\n    var IMAGE = 'Image', CROP = 'crop', SET = 'set';\n    Kinetic.Image = function (config) {\n        this.___init(config);\n    };\n    Kinetic.Image.prototype = {\n        ___init: function (config) {\n            var that = this;\n            Kinetic.Shape.call(this, config);\n            this.className = IMAGE;\n        },\n        drawFunc: function (context) {\n            var width = this.getWidth(), height = this.getHeight(), params, that = this, cropX = this.getCropX() || 0, cropY = this.getCropY() || 0, cropWidth = this.getCropWidth(), cropHeight = this.getCropHeight(), image;\n            if (this.getFilter() && this._applyFilter) {\n                this.applyFilter();\n                this._applyFilter = false;\n            }\n            if (this.filterCanvas) {\n                image = this.filterCanvas._canvas;\n            } else {\n                image = this.getImage();\n            }\n            context.beginPath();\n            context.rect(0, 0, width, height);\n            context.closePath();\n            context.fillStrokeShape(this);\n            if (image) {\n                if (cropWidth && cropHeight) {\n                    params = [\n                        image,\n                        cropX,\n                        cropY,\n                        cropWidth,\n                        cropHeight,\n                        0,\n                        0,\n                        width,\n                        height\n                    ];\n                } else {\n                    params = [\n                        image,\n                        0,\n                        0,\n                        width,\n                        height\n                    ];\n                }\n                if (this.hasShadow()) {\n                    context.applyShadow(this, function () {\n                        context.drawImage.apply(context, params);\n                    });\n                } else {\n                    context.drawImage.apply(context, params);\n                }\n            }\n        },\n        drawHitFunc: function (context) {\n            var width = this.getWidth(), height = this.getHeight(), imageHitRegion = this.imageHitRegion;\n            if (imageHitRegion) {\n                context.drawImage(imageHitRegion, 0, 0, width, height);\n                context.beginPath();\n                context.rect(0, 0, width, height);\n                context.closePath();\n                context.strokeShape(this);\n            } else {\n                context.beginPath();\n                context.rect(0, 0, width, height);\n                context.closePath();\n                context.fillStrokeShape(this);\n            }\n        },\n        applyFilter: function () {\n            var image = this.getImage(), that = this, width = this.getWidth(), height = this.getHeight(), filter = this.getFilter(), filterCanvas, context, imageData;\n            if (this.filterCanvas) {\n                filterCanvas = this.filterCanvas;\n                filterCanvas.getContext().clear();\n            } else {\n                filterCanvas = this.filterCanvas = new Kinetic.SceneCanvas({\n                    width: width,\n                    height: height,\n                    pixelRatio: 1\n                });\n            }\n            context = filterCanvas.getContext();\n            try {\n                context.drawImage(image, 0, 0, filterCanvas.getWidth(), filterCanvas.getHeight());\n                imageData = context.getImageData(0, 0, filterCanvas.getWidth(), filterCanvas.getHeight());\n                filter.call(this, imageData);\n                context.putImageData(imageData, 0, 0);\n            } catch (e) {\n                this.clearFilter();\n                Kinetic.Util.warn('Unable to apply filter. ' + e.message);\n            }\n        },\n        clearFilter: function () {\n            this.filterCanvas = null;\n            this._applyFilter = false;\n        },\n        createImageHitRegion: function (callback) {\n            var that = this, width = this.getWidth(), height = this.getHeight(), canvas = new Kinetic.SceneCanvas({\n                    width: width,\n                    height: height\n                }), _context = canvas.getContext()._context, image = this.getImage(), imageData, data, rgbColorKey, i, len;\n            _context.drawImage(image, 0, 0);\n            try {\n                imageData = _context.getImageData(0, 0, width, height);\n                data = imageData.data;\n                len = data.length;\n                rgbColorKey = Kinetic.Util._hexToRgb(this.colorKey);\n                for (i = 0; i < len; i += 4) {\n                    if (data[i + 3] > 0) {\n                        data[i] = rgbColorKey.r;\n                        data[i + 1] = rgbColorKey.g;\n                        data[i + 2] = rgbColorKey.b;\n                    }\n                }\n                Kinetic.Util._getImage(imageData, function (imageObj) {\n                    that.imageHitRegion = imageObj;\n                    if (callback) {\n                        callback();\n                    }\n                });\n            } catch (e) {\n                Kinetic.Util.warn('Unable to create image hit region. ' + e.message);\n            }\n        },\n        clearImageHitRegion: function () {\n            delete this.imageHitRegion;\n        },\n        getWidth: function () {\n            var image = this.getImage();\n            return this.attrs.width || (image ? image.width : 0);\n        },\n        getHeight: function () {\n            var image = this.getImage();\n            return this.attrs.height || (image ? image.height : 0);\n        }\n    };\n    Kinetic.Util.extend(Kinetic.Image, Kinetic.Shape);\n    Kinetic.Factory.addFilterGetterSetter = function (constructor, attr, def) {\n        this.addGetter(constructor, attr, def);\n        this.addFilterSetter(constructor, attr);\n    };\n    Kinetic.Factory.addFilterSetter = function (constructor, attr) {\n        var that = this, method = SET + Kinetic.Util._capitalize(attr);\n        constructor.prototype[method] = function (val) {\n            this._setAttr(attr, val);\n            this._applyFilter = true;\n        };\n    };\n    Kinetic.Factory.addGetterSetter(Kinetic.Image, 'image');\n    Kinetic.Factory.addBoxGetterSetter(Kinetic.Image, 'crop');\n    Kinetic.Factory.addFilterGetterSetter(Kinetic.Image, 'filter');\n}());\n;\n(function () {\n    Kinetic.Polygon = function (config) {\n        this.___init(config);\n    };\n    Kinetic.Polygon.prototype = {\n        ___init: function (config) {\n            Kinetic.Shape.call(this, config);\n            this.className = 'Polygon';\n        },\n        drawFunc: function (context) {\n            var points = this.getPoints(), length = points.length;\n            context.beginPath();\n            context.moveTo(points[0].x, points[0].y);\n            for (var n = 1; n < length; n++) {\n                context.lineTo(points[n].x, points[n].y);\n            }\n            context.closePath();\n            context.fillStrokeShape(this);\n        }\n    };\n    Kinetic.Util.extend(Kinetic.Polygon, Kinetic.Shape);\n    Kinetic.Factory.addPointsGetterSetter(Kinetic.Polygon, 'points');\n}());\n;\n(function () {\n    var AUTO = 'auto', CALIBRI = 'Calibri', CANVAS = 'canvas', CENTER = 'center', CHANGE_KINETIC = 'Change.kinetic', CONTEXT_2D = '2d', DASH = '-', EMPTY_STRING = '', LEFT = 'left', NEW_LINE = '\\n', TEXT = 'text', TEXT_UPPER = 'Text', TOP = 'top', MIDDLE = 'middle', NORMAL = 'normal', PX_SPACE = 'px ', SPACE = ' ', RIGHT = 'right', WORD = 'word', CHAR = 'char', NONE = 'none', ATTR_CHANGE_LIST = [\n            'fontFamily',\n            'fontSize',\n            'fontStyle',\n            'padding',\n            'align',\n            'lineHeight',\n            'text',\n            'width',\n            'height',\n            'wrap'\n        ], attrChangeListLen = ATTR_CHANGE_LIST.length, dummyContext = document.createElement(CANVAS).getContext(CONTEXT_2D);\n    Kinetic.Text = function (config) {\n        this.___init(config);\n    };\n    function _fillFunc(context) {\n        context.fillText(this.partialText, 0, 0);\n    }\n    function _strokeFunc(context) {\n        context.strokeText(this.partialText, 0, 0);\n    }\n    Kinetic.Text.prototype = {\n        ___init: function (config) {\n            var that = this;\n            if (config.width === undefined) {\n                config.width = AUTO;\n            }\n            if (config.height === undefined) {\n                config.height = AUTO;\n            }\n            Kinetic.Shape.call(this, config);\n            this._fillFunc = _fillFunc;\n            this._strokeFunc = _strokeFunc;\n            this.className = TEXT_UPPER;\n            for (var n = 0; n < attrChangeListLen; n++) {\n                this.on(ATTR_CHANGE_LIST[n] + CHANGE_KINETIC, that._setTextData);\n            }\n            this._setTextData();\n        },\n        drawFunc: function (context) {\n            var p = this.getPadding(), fontStyle = this.getFontStyle(), fontSize = this.getFontSize(), fontFamily = this.getFontFamily(), textHeight = this.getTextHeight(), lineHeightPx = this.getLineHeight() * textHeight, textArr = this.textArr, textArrLen = textArr.length, totalWidth = this.getWidth();\n            context.setAttr('font', this._getContextFont());\n            context.setAttr('textBaseline', MIDDLE);\n            context.setAttr('textAlign', LEFT);\n            context.save();\n            context.translate(p, 0);\n            context.translate(0, p + textHeight / 2);\n            for (var n = 0; n < textArrLen; n++) {\n                var obj = textArr[n], text = obj.text, width = obj.width;\n                context.save();\n                if (this.getAlign() === RIGHT) {\n                    context.translate(totalWidth - width - p * 2, 0);\n                } else if (this.getAlign() === CENTER) {\n                    context.translate((totalWidth - width - p * 2) / 2, 0);\n                }\n                this.partialText = text;\n                context.fillStrokeShape(this);\n                context.restore();\n                context.translate(0, lineHeightPx);\n            }\n            context.restore();\n        },\n        drawHitFunc: function (context) {\n            var width = this.getWidth(), height = this.getHeight();\n            context.beginPath();\n            context.rect(0, 0, width, height);\n            context.closePath();\n            context.fillStrokeShape(this);\n        },\n        setText: function (text) {\n            var str = Kinetic.Util._isString(text) ? text : text.toString();\n            this._setAttr(TEXT, str);\n        },\n        getWidth: function () {\n            return this.attrs.width === AUTO ? this.getTextWidth() + this.getPadding() * 2 : this.attrs.width;\n        },\n        getHeight: function () {\n            return this.attrs.height === AUTO ? this.getTextHeight() * this.textArr.length * this.getLineHeight() + this.getPadding() * 2 : this.attrs.height;\n        },\n        getTextWidth: function () {\n            return this.textWidth;\n        },\n        getTextHeight: function () {\n            return this.textHeight;\n        },\n        _getTextSize: function (text) {\n            var _context = dummyContext, fontSize = this.getFontSize(), metrics;\n            _context.save();\n            _context.font = this._getContextFont();\n            metrics = _context.measureText(text);\n            _context.restore();\n            return {\n                width: metrics.width,\n                height: parseInt(fontSize, 10)\n            };\n        },\n        _getContextFont: function () {\n            return this.getFontStyle() + SPACE + this.getFontSize() + PX_SPACE + this.getFontFamily();\n        },\n        _addTextLine: function (line, width, height) {\n            return this.textArr.push({\n                text: line,\n                width: width\n            });\n        },\n        _getTextWidth: function (text) {\n            return dummyContext.measureText(text).width;\n        },\n        _setTextData: function () {\n            var lines = this.getText().split('\\n'), fontSize = +this.getFontSize(), textWidth = 0, lineHeightPx = this.getLineHeight() * fontSize, width = this.attrs.width, height = this.attrs.height, fixedWidth = width !== AUTO, fixedHeight = height !== AUTO, padding = this.getPadding(), maxWidth = width - padding * 2, maxHeightPx = height - padding * 2, currentHeightPx = 0, wrap = this.getWrap(), shouldWrap = wrap !== NONE, wrapAtWord = wrap !== CHAR && shouldWrap;\n            this.textArr = [];\n            dummyContext.save();\n            dummyContext.font = this.getFontStyle() + SPACE + fontSize + PX_SPACE + this.getFontFamily();\n            for (var i = 0, max = lines.length; i < max; ++i) {\n                var line = lines[i], lineWidth = this._getTextWidth(line);\n                if (fixedWidth && lineWidth > maxWidth) {\n                    while (line.length > 0) {\n                        var low = 0, high = line.length, match = '', matchWidth = 0;\n                        while (low < high) {\n                            var mid = low + high >>> 1, substr = line.slice(0, mid + 1), substrWidth = this._getTextWidth(substr);\n                            if (substrWidth <= maxWidth) {\n                                low = mid + 1;\n                                match = substr;\n                                matchWidth = substrWidth;\n                            } else {\n                                high = mid;\n                            }\n                        }\n                        if (match) {\n                            if (wrapAtWord) {\n                                var wrapIndex = Math.max(match.lastIndexOf(SPACE), match.lastIndexOf(DASH)) + 1;\n                                if (wrapIndex > 0) {\n                                    low = wrapIndex;\n                                    match = match.slice(0, low);\n                                    matchWidth = this._getTextWidth(match);\n                                }\n                            }\n                            this._addTextLine(match, matchWidth);\n                            currentHeightPx += lineHeightPx;\n                            if (!shouldWrap || fixedHeight && currentHeightPx + lineHeightPx > maxHeightPx) {\n                                break;\n                            }\n                            line = line.slice(low);\n                            if (line.length > 0) {\n                                lineWidth = this._getTextWidth(line);\n                                if (lineWidth <= maxWidth) {\n                                    this._addTextLine(line, lineWidth);\n                                    currentHeightPx += lineHeightPx;\n                                    break;\n                                }\n                            }\n                        } else {\n                            break;\n                        }\n                    }\n                } else {\n                    this._addTextLine(line, lineWidth);\n                    currentHeightPx += lineHeightPx;\n                    textWidth = Math.max(textWidth, lineWidth);\n                }\n                if (fixedHeight && currentHeightPx + lineHeightPx > maxHeightPx) {\n                    break;\n                }\n            }\n            dummyContext.restore();\n            this.textHeight = fontSize;\n            this.textWidth = textWidth;\n        }\n    };\n    Kinetic.Util.extend(Kinetic.Text, Kinetic.Shape);\n    Kinetic.Factory.addGetterSetter(Kinetic.Text, 'fontFamily', CALIBRI);\n    Kinetic.Factory.addGetterSetter(Kinetic.Text, 'fontSize', 12);\n    Kinetic.Factory.addGetterSetter(Kinetic.Text, 'fontStyle', NORMAL);\n    Kinetic.Factory.addGetterSetter(Kinetic.Text, 'padding', 0);\n    Kinetic.Factory.addGetterSetter(Kinetic.Text, 'align', LEFT);\n    Kinetic.Factory.addGetterSetter(Kinetic.Text, 'lineHeight', 1);\n    Kinetic.Factory.addGetterSetter(Kinetic.Text, 'wrap', WORD);\n    Kinetic.Factory.addGetter(Kinetic.Text, TEXT, EMPTY_STRING);\n    Kinetic.Factory.addSetter(Kinetic.Text, 'width');\n    Kinetic.Factory.addSetter(Kinetic.Text, 'height');\n}());\n;\n(function () {\n    Kinetic.Line = function (config) {\n        this.___init(config);\n    };\n    Kinetic.Line.prototype = {\n        ___init: function (config) {\n            Kinetic.Shape.call(this, config);\n            this.className = 'Line';\n        },\n        drawFunc: function (context) {\n            var points = this.getPoints(), length = points.length, n, point;\n            context.beginPath();\n            context.moveTo(points[0].x, points[0].y);\n            for (n = 1; n < length; n++) {\n                point = points[n];\n                context.lineTo(point.x, point.y);\n            }\n            context.strokeShape(this);\n        }\n    };\n    Kinetic.Util.extend(Kinetic.Line, Kinetic.Shape);\n    Kinetic.Factory.addPointsGetterSetter(Kinetic.Line, 'points');\n}());\n;\n(function () {\n    Kinetic.Spline = function (config) {\n        this.___init(config);\n    };\n    Kinetic.Spline.prototype = {\n        ___init: function (config) {\n            var that = this;\n            Kinetic.Shape.call(this, config);\n            this.className = 'Spline';\n            this.on('pointsChange.kinetic tensionChange.kinetic', function () {\n                that._setAllPoints();\n            });\n            this._setAllPoints();\n        },\n        drawFunc: function (context) {\n            var points = this.getPoints(), length = points.length, tension = this.getTension(), ap, len, n, point;\n            context.beginPath();\n            context.moveTo(points[0].x, points[0].y);\n            if (tension !== 0 && length > 2) {\n                ap = this.allPoints;\n                len = ap.length;\n                n = 2;\n                context.quadraticCurveTo(ap[0].x, ap[0].y, ap[1].x, ap[1].y);\n                while (n < len - 1) {\n                    context.bezierCurveTo(ap[n].x, ap[n++].y, ap[n].x, ap[n++].y, ap[n].x, ap[n++].y);\n                }\n                context.quadraticCurveTo(ap[len - 1].x, ap[len - 1].y, points[length - 1].x, points[length - 1].y);\n            } else {\n                for (n = 1; n < length; n++) {\n                    point = points[n];\n                    context.lineTo(point.x, point.y);\n                }\n            }\n            context.strokeShape(this);\n        },\n        _setAllPoints: function () {\n            this.allPoints = Kinetic.Util._expandPoints(this.getPoints(), this.getTension());\n        }\n    };\n    Kinetic.Util.extend(Kinetic.Spline, Kinetic.Shape);\n    Kinetic.Factory.addGetterSetter(Kinetic.Spline, 'tension', 1);\n    Kinetic.Factory.addPointsGetterSetter(Kinetic.Spline, 'points');\n}());\n;\n(function () {\n    Kinetic.Blob = function (config) {\n        this.___init(config);\n    };\n    Kinetic.Blob.prototype = {\n        ___init: function (config) {\n            var that = this;\n            Kinetic.Shape.call(this, config);\n            this.className = 'Blob';\n            this.on('pointsChange.kinetic tensionChange.kinetic', function () {\n                that._setAllPoints();\n            });\n            this._setAllPoints();\n        },\n        drawFunc: function (context) {\n            var points = this.getPoints(), length = points.length, tension = this.getTension(), ap, len, n, point;\n            context.beginPath();\n            context.moveTo(points[0].x, points[0].y);\n            if (tension !== 0 && length > 2) {\n                ap = this.allPoints;\n                len = ap.length;\n                n = 0;\n                while (n < len - 1) {\n                    context.bezierCurveTo(ap[n].x, ap[n++].y, ap[n].x, ap[n++].y, ap[n].x, ap[n++].y);\n                }\n            } else {\n                for (n = 1; n < length; n++) {\n                    point = points[n];\n                    context.lineTo(point.x, point.y);\n                }\n            }\n            context.closePath();\n            context.fillStrokeShape(this);\n        },\n        _setAllPoints: function () {\n            var points = this.getPoints(), length = points.length, tension = this.getTension(), util = Kinetic.Util, firstControlPoints = util._getControlPoints(points[length - 1], points[0], points[1], tension), lastControlPoints = util._getControlPoints(points[length - 2], points[length - 1], points[0], tension);\n            this.allPoints = Kinetic.Util._expandPoints(this.getPoints(), this.getTension());\n            this.allPoints.unshift(firstControlPoints[1]);\n            this.allPoints.push(lastControlPoints[0]);\n            this.allPoints.push(points[length - 1]);\n            this.allPoints.push(lastControlPoints[1]);\n            this.allPoints.push(firstControlPoints[0]);\n            this.allPoints.push(points[0]);\n        }\n    };\n    Kinetic.Util.extend(Kinetic.Blob, Kinetic.Shape);\n    Kinetic.Factory.addGetterSetter(Kinetic.Blob, 'tension', 1);\n    Kinetic.Factory.addPointsGetterSetter(Kinetic.Blob, 'points');\n}());\n;\n(function () {\n    Kinetic.Sprite = function (config) {\n        this.___init(config);\n    };\n    Kinetic.Sprite.prototype = {\n        ___init: function (config) {\n            Kinetic.Shape.call(this, config);\n            this.className = 'Sprite';\n            this.anim = new Kinetic.Animation();\n            var that = this;\n            this.on('animationChange.kinetic', function () {\n                that.setIndex(0);\n            });\n        },\n        drawFunc: function (context) {\n            var anim = this.getAnimation(), index = this.getIndex(), f = this.getAnimations()[anim][index], image = this.getImage();\n            if (image) {\n                context.drawImage(image, f.x, f.y, f.width, f.height, 0, 0, f.width, f.height);\n            }\n        },\n        drawHitFunc: function (context) {\n            var anim = this.getAnimation(), index = this.getIndex(), f = this.getAnimations()[anim][index];\n            context.beginPath();\n            context.rect(0, 0, f.width, f.height);\n            context.closePath();\n            context.fill(this);\n        },\n        start: function () {\n            var that = this;\n            var layer = this.getLayer();\n            this.anim.setLayers(layer);\n            this.interval = setInterval(function () {\n                var index = that.getIndex();\n                that._updateIndex();\n                if (that.afterFrameFunc && index === that.afterFrameIndex) {\n                    that.afterFrameFunc();\n                    delete that.afterFrameFunc;\n                    delete that.afterFrameIndex;\n                }\n            }, 1000 / this.getFrameRate());\n            this.anim.start();\n        },\n        stop: function () {\n            this.anim.stop();\n            clearInterval(this.interval);\n        },\n        afterFrame: function (index, func) {\n            this.afterFrameIndex = index;\n            this.afterFrameFunc = func;\n        },\n        _updateIndex: function () {\n            var index = this.getIndex(), animation = this.getAnimation(), animations = this.getAnimations(), anim = animations[animation], len = anim.length;\n            if (index < len - 1) {\n                this.setIndex(index + 1);\n            } else {\n                this.setIndex(0);\n            }\n        }\n    };\n    Kinetic.Util.extend(Kinetic.Sprite, Kinetic.Shape);\n    Kinetic.Factory.addGetterSetter(Kinetic.Sprite, 'animation');\n    Kinetic.Factory.addGetterSetter(Kinetic.Sprite, 'animations');\n    Kinetic.Factory.addGetterSetter(Kinetic.Sprite, 'image');\n    Kinetic.Factory.addGetterSetter(Kinetic.Sprite, 'index', 0);\n    Kinetic.Factory.addGetterSetter(Kinetic.Sprite, 'frameRate', 17);\n}());\n;\n(function () {\n    Kinetic.Path = function (config) {\n        this.___init(config);\n    };\n    Kinetic.Path.prototype = {\n        ___init: function (config) {\n            this.dataArray = [];\n            var that = this;\n            Kinetic.Shape.call(this, config);\n            this.className = 'Path';\n            this.dataArray = Kinetic.Path.parsePathData(this.getData());\n            this.on('dataChange.kinetic', function () {\n                that.dataArray = Kinetic.Path.parsePathData(this.getData());\n            });\n        },\n        drawFunc: function (context) {\n            var ca = this.dataArray, closedPath = false;\n            context.beginPath();\n            for (var n = 0; n < ca.length; n++) {\n                var c = ca[n].command;\n                var p = ca[n].points;\n                switch (c) {\n                case 'L':\n                    context.lineTo(p[0], p[1]);\n                    break;\n                case 'M':\n                    context.moveTo(p[0], p[1]);\n                    break;\n                case 'C':\n                    context.bezierCurveTo(p[0], p[1], p[2], p[3], p[4], p[5]);\n                    break;\n                case 'Q':\n                    context.quadraticCurveTo(p[0], p[1], p[2], p[3]);\n                    break;\n                case 'A':\n                    var cx = p[0], cy = p[1], rx = p[2], ry = p[3], theta = p[4], dTheta = p[5], psi = p[6], fs = p[7];\n                    var r = rx > ry ? rx : ry;\n                    var scaleX = rx > ry ? 1 : rx / ry;\n                    var scaleY = rx > ry ? ry / rx : 1;\n                    context.translate(cx, cy);\n                    context.rotate(psi);\n                    context.scale(scaleX, scaleY);\n                    context.arc(0, 0, r, theta, theta + dTheta, 1 - fs);\n                    context.scale(1 / scaleX, 1 / scaleY);\n                    context.rotate(-psi);\n                    context.translate(-cx, -cy);\n                    break;\n                case 'z':\n                    context.closePath();\n                    closedPath = true;\n                    break;\n                }\n            }\n            if (closedPath) {\n                context.fillStrokeShape(this);\n            } else {\n                context.strokeShape(this);\n            }\n        }\n    };\n    Kinetic.Util.extend(Kinetic.Path, Kinetic.Shape);\n    Kinetic.Path.getLineLength = function (x1, y1, x2, y2) {\n        return Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n    };\n    Kinetic.Path.getPointOnLine = function (dist, P1x, P1y, P2x, P2y, fromX, fromY) {\n        if (fromX === undefined) {\n            fromX = P1x;\n        }\n        if (fromY === undefined) {\n            fromY = P1y;\n        }\n        var m = (P2y - P1y) / (P2x - P1x + 1e-8);\n        var run = Math.sqrt(dist * dist / (1 + m * m));\n        if (P2x < P1x)\n            run *= -1;\n        var rise = m * run;\n        var pt;\n        if (P2x === P1x) {\n            pt = {\n                x: fromX,\n                y: fromY + rise\n            };\n        } else if ((fromY - P1y) / (fromX - P1x + 1e-8) === m) {\n            pt = {\n                x: fromX + run,\n                y: fromY + rise\n            };\n        } else {\n            var ix, iy;\n            var len = this.getLineLength(P1x, P1y, P2x, P2y);\n            if (len < 1e-8) {\n                return undefined;\n            }\n            var u = (fromX - P1x) * (P2x - P1x) + (fromY - P1y) * (P2y - P1y);\n            u = u / (len * len);\n            ix = P1x + u * (P2x - P1x);\n            iy = P1y + u * (P2y - P1y);\n            var pRise = this.getLineLength(fromX, fromY, ix, iy);\n            var pRun = Math.sqrt(dist * dist - pRise * pRise);\n            run = Math.sqrt(pRun * pRun / (1 + m * m));\n            if (P2x < P1x)\n                run *= -1;\n            rise = m * run;\n            pt = {\n                x: ix + run,\n                y: iy + rise\n            };\n        }\n        return pt;\n    };\n    Kinetic.Path.getPointOnCubicBezier = function (pct, P1x, P1y, P2x, P2y, P3x, P3y, P4x, P4y) {\n        function CB1(t) {\n            return t * t * t;\n        }\n        function CB2(t) {\n            return 3 * t * t * (1 - t);\n        }\n        function CB3(t) {\n            return 3 * t * (1 - t) * (1 - t);\n        }\n        function CB4(t) {\n            return (1 - t) * (1 - t) * (1 - t);\n        }\n        var x = P4x * CB1(pct) + P3x * CB2(pct) + P2x * CB3(pct) + P1x * CB4(pct);\n        var y = P4y * CB1(pct) + P3y * CB2(pct) + P2y * CB3(pct) + P1y * CB4(pct);\n        return {\n            x: x,\n            y: y\n        };\n    };\n    Kinetic.Path.getPointOnQuadraticBezier = function (pct, P1x, P1y, P2x, P2y, P3x, P3y) {\n        function QB1(t) {\n            return t * t;\n        }\n        function QB2(t) {\n            return 2 * t * (1 - t);\n        }\n        function QB3(t) {\n            return (1 - t) * (1 - t);\n        }\n        var x = P3x * QB1(pct) + P2x * QB2(pct) + P1x * QB3(pct);\n        var y = P3y * QB1(pct) + P2y * QB2(pct) + P1y * QB3(pct);\n        return {\n            x: x,\n            y: y\n        };\n    };\n    Kinetic.Path.getPointOnEllipticalArc = function (cx, cy, rx, ry, theta, psi) {\n        var cosPsi = Math.cos(psi), sinPsi = Math.sin(psi);\n        var pt = {\n                x: rx * Math.cos(theta),\n                y: ry * Math.sin(theta)\n            };\n        return {\n            x: cx + (pt.x * cosPsi - pt.y * sinPsi),\n            y: cy + (pt.x * sinPsi + pt.y * cosPsi)\n        };\n    };\n    Kinetic.Path.parsePathData = function (data) {\n        if (!data) {\n            return [];\n        }\n        var cs = data;\n        var cc = [\n                'm',\n                'M',\n                'l',\n                'L',\n                'v',\n                'V',\n                'h',\n                'H',\n                'z',\n                'Z',\n                'c',\n                'C',\n                'q',\n                'Q',\n                't',\n                'T',\n                's',\n                'S',\n                'a',\n                'A'\n            ];\n        cs = cs.replace(new RegExp(' ', 'g'), ',');\n        for (var n = 0; n < cc.length; n++) {\n            cs = cs.replace(new RegExp(cc[n], 'g'), '|' + cc[n]);\n        }\n        var arr = cs.split('|');\n        var ca = [];\n        var cpx = 0;\n        var cpy = 0;\n        for (n = 1; n < arr.length; n++) {\n            var str = arr[n];\n            var c = str.charAt(0);\n            str = str.slice(1);\n            str = str.replace(new RegExp(',-', 'g'), '-');\n            str = str.replace(new RegExp('-', 'g'), ',-');\n            str = str.replace(new RegExp('e,-', 'g'), 'e-');\n            var p = str.split(',');\n            if (p.length > 0 && p[0] === '') {\n                p.shift();\n            }\n            for (var i = 0; i < p.length; i++) {\n                p[i] = parseFloat(p[i]);\n            }\n            while (p.length > 0) {\n                if (isNaN(p[0]))\n                    break;\n                var cmd = null;\n                var points = [];\n                var startX = cpx, startY = cpy;\n                var prevCmd, ctlPtx, ctlPty;\n                var rx, ry, psi, fa, fs, x1, y1;\n                switch (c) {\n                case 'l':\n                    cpx += p.shift();\n                    cpy += p.shift();\n                    cmd = 'L';\n                    points.push(cpx, cpy);\n                    break;\n                case 'L':\n                    cpx = p.shift();\n                    cpy = p.shift();\n                    points.push(cpx, cpy);\n                    break;\n                case 'm':\n                    cpx += p.shift();\n                    cpy += p.shift();\n                    cmd = 'M';\n                    points.push(cpx, cpy);\n                    c = 'l';\n                    break;\n                case 'M':\n                    cpx = p.shift();\n                    cpy = p.shift();\n                    cmd = 'M';\n                    points.push(cpx, cpy);\n                    c = 'L';\n                    break;\n                case 'h':\n                    cpx += p.shift();\n                    cmd = 'L';\n                    points.push(cpx, cpy);\n                    break;\n                case 'H':\n                    cpx = p.shift();\n                    cmd = 'L';\n                    points.push(cpx, cpy);\n                    break;\n                case 'v':\n                    cpy += p.shift();\n                    cmd = 'L';\n                    points.push(cpx, cpy);\n                    break;\n                case 'V':\n                    cpy = p.shift();\n                    cmd = 'L';\n                    points.push(cpx, cpy);\n                    break;\n                case 'C':\n                    points.push(p.shift(), p.shift(), p.shift(), p.shift());\n                    cpx = p.shift();\n                    cpy = p.shift();\n                    points.push(cpx, cpy);\n                    break;\n                case 'c':\n                    points.push(cpx + p.shift(), cpy + p.shift(), cpx + p.shift(), cpy + p.shift());\n                    cpx += p.shift();\n                    cpy += p.shift();\n                    cmd = 'C';\n                    points.push(cpx, cpy);\n                    break;\n                case 'S':\n                    ctlPtx = cpx, ctlPty = cpy;\n                    prevCmd = ca[ca.length - 1];\n                    if (prevCmd.command === 'C') {\n                        ctlPtx = cpx + (cpx - prevCmd.points[2]);\n                        ctlPty = cpy + (cpy - prevCmd.points[3]);\n                    }\n                    points.push(ctlPtx, ctlPty, p.shift(), p.shift());\n                    cpx = p.shift();\n                    cpy = p.shift();\n                    cmd = 'C';\n                    points.push(cpx, cpy);\n                    break;\n                case 's':\n                    ctlPtx = cpx, ctlPty = cpy;\n                    prevCmd = ca[ca.length - 1];\n                    if (prevCmd.command === 'C') {\n                        ctlPtx = cpx + (cpx - prevCmd.points[2]);\n                        ctlPty = cpy + (cpy - prevCmd.points[3]);\n                    }\n                    points.push(ctlPtx, ctlPty, cpx + p.shift(), cpy + p.shift());\n                    cpx += p.shift();\n                    cpy += p.shift();\n                    cmd = 'C';\n                    points.push(cpx, cpy);\n                    break;\n                case 'Q':\n                    points.push(p.shift(), p.shift());\n                    cpx = p.shift();\n                    cpy = p.shift();\n                    points.push(cpx, cpy);\n                    break;\n                case 'q':\n                    points.push(cpx + p.shift(), cpy + p.shift());\n                    cpx += p.shift();\n                    cpy += p.shift();\n                    cmd = 'Q';\n                    points.push(cpx, cpy);\n                    break;\n                case 'T':\n                    ctlPtx = cpx, ctlPty = cpy;\n                    prevCmd = ca[ca.length - 1];\n                    if (prevCmd.command === 'Q') {\n                        ctlPtx = cpx + (cpx - prevCmd.points[0]);\n                        ctlPty = cpy + (cpy - prevCmd.points[1]);\n                    }\n                    cpx = p.shift();\n                    cpy = p.shift();\n                    cmd = 'Q';\n                    points.push(ctlPtx, ctlPty, cpx, cpy);\n                    break;\n                case 't':\n                    ctlPtx = cpx, ctlPty = cpy;\n                    prevCmd = ca[ca.length - 1];\n                    if (prevCmd.command === 'Q') {\n                        ctlPtx = cpx + (cpx - prevCmd.points[0]);\n                        ctlPty = cpy + (cpy - prevCmd.points[1]);\n                    }\n                    cpx += p.shift();\n                    cpy += p.shift();\n                    cmd = 'Q';\n                    points.push(ctlPtx, ctlPty, cpx, cpy);\n                    break;\n                case 'A':\n                    rx = p.shift(), ry = p.shift(), psi = p.shift(), fa = p.shift(), fs = p.shift();\n                    x1 = cpx, y1 = cpy;\n                    cpx = p.shift(), cpy = p.shift();\n                    cmd = 'A';\n                    points = this.convertEndpointToCenterParameterization(x1, y1, cpx, cpy, fa, fs, rx, ry, psi);\n                    break;\n                case 'a':\n                    rx = p.shift(), ry = p.shift(), psi = p.shift(), fa = p.shift(), fs = p.shift();\n                    x1 = cpx, y1 = cpy;\n                    cpx += p.shift(), cpy += p.shift();\n                    cmd = 'A';\n                    points = this.convertEndpointToCenterParameterization(x1, y1, cpx, cpy, fa, fs, rx, ry, psi);\n                    break;\n                }\n                ca.push({\n                    command: cmd || c,\n                    points: points,\n                    start: {\n                        x: startX,\n                        y: startY\n                    },\n                    pathLength: this.calcLength(startX, startY, cmd || c, points)\n                });\n            }\n            if (c === 'z' || c === 'Z') {\n                ca.push({\n                    command: 'z',\n                    points: [],\n                    start: undefined,\n                    pathLength: 0\n                });\n            }\n        }\n        return ca;\n    };\n    Kinetic.Path.calcLength = function (x, y, cmd, points) {\n        var len, p1, p2;\n        var path = Kinetic.Path;\n        switch (cmd) {\n        case 'L':\n            return path.getLineLength(x, y, points[0], points[1]);\n        case 'C':\n            len = 0;\n            p1 = path.getPointOnCubicBezier(0, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n            for (t = 0.01; t <= 1; t += 0.01) {\n                p2 = path.getPointOnCubicBezier(t, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n                len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                p1 = p2;\n            }\n            return len;\n        case 'Q':\n            len = 0;\n            p1 = path.getPointOnQuadraticBezier(0, x, y, points[0], points[1], points[2], points[3]);\n            for (t = 0.01; t <= 1; t += 0.01) {\n                p2 = path.getPointOnQuadraticBezier(t, x, y, points[0], points[1], points[2], points[3]);\n                len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                p1 = p2;\n            }\n            return len;\n        case 'A':\n            len = 0;\n            var start = points[4];\n            var dTheta = points[5];\n            var end = points[4] + dTheta;\n            var inc = Math.PI / 180;\n            if (Math.abs(start - end) < inc) {\n                inc = Math.abs(start - end);\n            }\n            p1 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], start, 0);\n            if (dTheta < 0) {\n                for (t = start - inc; t > end; t -= inc) {\n                    p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n                    len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                    p1 = p2;\n                }\n            } else {\n                for (t = start + inc; t < end; t += inc) {\n                    p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n                    len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                    p1 = p2;\n                }\n            }\n            p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], end, 0);\n            len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n            return len;\n        }\n        return 0;\n    };\n    Kinetic.Path.convertEndpointToCenterParameterization = function (x1, y1, x2, y2, fa, fs, rx, ry, psiDeg) {\n        var psi = psiDeg * (Math.PI / 180);\n        var xp = Math.cos(psi) * (x1 - x2) / 2 + Math.sin(psi) * (y1 - y2) / 2;\n        var yp = -1 * Math.sin(psi) * (x1 - x2) / 2 + Math.cos(psi) * (y1 - y2) / 2;\n        var lambda = xp * xp / (rx * rx) + yp * yp / (ry * ry);\n        if (lambda > 1) {\n            rx *= Math.sqrt(lambda);\n            ry *= Math.sqrt(lambda);\n        }\n        var f = Math.sqrt((rx * rx * (ry * ry) - rx * rx * (yp * yp) - ry * ry * (xp * xp)) / (rx * rx * (yp * yp) + ry * ry * (xp * xp)));\n        if (fa == fs) {\n            f *= -1;\n        }\n        if (isNaN(f)) {\n            f = 0;\n        }\n        var cxp = f * rx * yp / ry;\n        var cyp = f * -ry * xp / rx;\n        var cx = (x1 + x2) / 2 + Math.cos(psi) * cxp - Math.sin(psi) * cyp;\n        var cy = (y1 + y2) / 2 + Math.sin(psi) * cxp + Math.cos(psi) * cyp;\n        var vMag = function (v) {\n            return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n        };\n        var vRatio = function (u, v) {\n            return (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v));\n        };\n        var vAngle = function (u, v) {\n            return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vRatio(u, v));\n        };\n        var theta = vAngle([\n                1,\n                0\n            ], [\n                (xp - cxp) / rx,\n                (yp - cyp) / ry\n            ]);\n        var u = [\n                (xp - cxp) / rx,\n                (yp - cyp) / ry\n            ];\n        var v = [\n                (-1 * xp - cxp) / rx,\n                (-1 * yp - cyp) / ry\n            ];\n        var dTheta = vAngle(u, v);\n        if (vRatio(u, v) <= -1) {\n            dTheta = Math.PI;\n        }\n        if (vRatio(u, v) >= 1) {\n            dTheta = 0;\n        }\n        if (fs === 0 && dTheta > 0) {\n            dTheta = dTheta - 2 * Math.PI;\n        }\n        if (fs == 1 && dTheta < 0) {\n            dTheta = dTheta + 2 * Math.PI;\n        }\n        return [\n            cx,\n            cy,\n            rx,\n            ry,\n            theta,\n            dTheta,\n            psi,\n            fs\n        ];\n    };\n    Kinetic.Factory.addGetterSetter(Kinetic.Path, 'data');\n}());\n;\n(function () {\n    var EMPTY_STRING = '', CALIBRI = 'Calibri', NORMAL = 'normal';\n    Kinetic.TextPath = function (config) {\n        this.___init(config);\n    };\n    function _fillFunc(context) {\n        context.fillText(this.partialText, 0, 0);\n    }\n    function _strokeFunc(context) {\n        context.strokeText(this.partialText, 0, 0);\n    }\n    Kinetic.TextPath.prototype = {\n        ___init: function (config) {\n            var that = this;\n            this.dummyCanvas = document.createElement('canvas');\n            this.dataArray = [];\n            Kinetic.Shape.call(this, config);\n            this._fillFunc = _fillFunc;\n            this._strokeFunc = _strokeFunc;\n            this.className = 'TextPath';\n            this.dataArray = Kinetic.Path.parsePathData(this.attrs.data);\n            this.on('dataChange.kinetic', function () {\n                that.dataArray = Kinetic.Path.parsePathData(this.attrs.data);\n            });\n            this.on('textChange.kinetic textStroke.kinetic textStrokeWidth.kinetic', that._setTextData);\n            that._setTextData();\n        },\n        drawFunc: function (context) {\n            var charArr = this.charArr;\n            context.setAttr('font', this._getContextFont());\n            context.setAttr('textBaseline', 'middle');\n            context.setAttr('textAlign', 'left');\n            context.save();\n            var glyphInfo = this.glyphInfo;\n            for (var i = 0; i < glyphInfo.length; i++) {\n                context.save();\n                var p0 = glyphInfo[i].p0;\n                var p1 = glyphInfo[i].p1;\n                var ht = parseFloat(this.attrs.fontSize);\n                context.translate(p0.x, p0.y);\n                context.rotate(glyphInfo[i].rotation);\n                this.partialText = glyphInfo[i].text;\n                context.fillStrokeShape(this);\n                context.restore();\n            }\n            context.restore();\n        },\n        getTextWidth: function () {\n            return this.textWidth;\n        },\n        getTextHeight: function () {\n            return this.textHeight;\n        },\n        setText: function (text) {\n            Kinetic.Text.prototype.setText.call(this, text);\n        },\n        _getTextSize: function (text) {\n            var dummyCanvas = this.dummyCanvas;\n            var _context = dummyCanvas.getContext('2d');\n            _context.save();\n            _context.font = this._getContextFont();\n            var metrics = _context.measureText(text);\n            _context.restore();\n            return {\n                width: metrics.width,\n                height: parseInt(this.attrs.fontSize, 10)\n            };\n        },\n        _setTextData: function () {\n            var that = this;\n            var size = this._getTextSize(this.attrs.text);\n            this.textWidth = size.width;\n            this.textHeight = size.height;\n            this.glyphInfo = [];\n            var charArr = this.attrs.text.split('');\n            var p0, p1, pathCmd;\n            var pIndex = -1;\n            var currentT = 0;\n            var getNextPathSegment = function () {\n                currentT = 0;\n                var pathData = that.dataArray;\n                for (var i = pIndex + 1; i < pathData.length; i++) {\n                    if (pathData[i].pathLength > 0) {\n                        pIndex = i;\n                        return pathData[i];\n                    } else if (pathData[i].command == 'M') {\n                        p0 = {\n                            x: pathData[i].points[0],\n                            y: pathData[i].points[1]\n                        };\n                    }\n                }\n                return {};\n            };\n            var findSegmentToFitCharacter = function (c, before) {\n                var glyphWidth = that._getTextSize(c).width;\n                var currLen = 0;\n                var attempts = 0;\n                var needNextSegment = false;\n                p1 = undefined;\n                while (Math.abs(glyphWidth - currLen) / glyphWidth > 0.01 && attempts < 25) {\n                    attempts++;\n                    var cumulativePathLength = currLen;\n                    while (pathCmd === undefined) {\n                        pathCmd = getNextPathSegment();\n                        if (pathCmd && cumulativePathLength + pathCmd.pathLength < glyphWidth) {\n                            cumulativePathLength += pathCmd.pathLength;\n                            pathCmd = undefined;\n                        }\n                    }\n                    if (pathCmd === {} || p0 === undefined)\n                        return undefined;\n                    var needNewSegment = false;\n                    switch (pathCmd.command) {\n                    case 'L':\n                        if (Kinetic.Path.getLineLength(p0.x, p0.y, pathCmd.points[0], pathCmd.points[1]) > glyphWidth) {\n                            p1 = Kinetic.Path.getPointOnLine(glyphWidth, p0.x, p0.y, pathCmd.points[0], pathCmd.points[1], p0.x, p0.y);\n                        } else\n                            pathCmd = undefined;\n                        break;\n                    case 'A':\n                        var start = pathCmd.points[4];\n                        var dTheta = pathCmd.points[5];\n                        var end = pathCmd.points[4] + dTheta;\n                        if (currentT === 0)\n                            currentT = start + 1e-8;\n                        else if (glyphWidth > currLen)\n                            currentT += Math.PI / 180 * dTheta / Math.abs(dTheta);\n                        else\n                            currentT -= Math.PI / 360 * dTheta / Math.abs(dTheta);\n                        if (dTheta < 0 && currentT < end || dTheta >= 0 && currentT > end) {\n                            currentT = end;\n                            needNewSegment = true;\n                        }\n                        p1 = Kinetic.Path.getPointOnEllipticalArc(pathCmd.points[0], pathCmd.points[1], pathCmd.points[2], pathCmd.points[3], currentT, pathCmd.points[6]);\n                        break;\n                    case 'C':\n                        if (currentT === 0) {\n                            if (glyphWidth > pathCmd.pathLength)\n                                currentT = 1e-8;\n                            else\n                                currentT = glyphWidth / pathCmd.pathLength;\n                        } else if (glyphWidth > currLen)\n                            currentT += (glyphWidth - currLen) / pathCmd.pathLength;\n                        else\n                            currentT -= (currLen - glyphWidth) / pathCmd.pathLength;\n                        if (currentT > 1) {\n                            currentT = 1;\n                            needNewSegment = true;\n                        }\n                        p1 = Kinetic.Path.getPointOnCubicBezier(currentT, pathCmd.start.x, pathCmd.start.y, pathCmd.points[0], pathCmd.points[1], pathCmd.points[2], pathCmd.points[3], pathCmd.points[4], pathCmd.points[5]);\n                        break;\n                    case 'Q':\n                        if (currentT === 0)\n                            currentT = glyphWidth / pathCmd.pathLength;\n                        else if (glyphWidth > currLen)\n                            currentT += (glyphWidth - currLen) / pathCmd.pathLength;\n                        else\n                            currentT -= (currLen - glyphWidth) / pathCmd.pathLength;\n                        if (currentT > 1) {\n                            currentT = 1;\n                            needNewSegment = true;\n                        }\n                        p1 = Kinetic.Path.getPointOnQuadraticBezier(currentT, pathCmd.start.x, pathCmd.start.y, pathCmd.points[0], pathCmd.points[1], pathCmd.points[2], pathCmd.points[3]);\n                        break;\n                    }\n                    if (p1 !== undefined) {\n                        currLen = Kinetic.Path.getLineLength(p0.x, p0.y, p1.x, p1.y);\n                    }\n                    if (needNewSegment) {\n                        needNewSegment = false;\n                        pathCmd = undefined;\n                    }\n                }\n            };\n            for (var i = 0; i < charArr.length; i++) {\n                findSegmentToFitCharacter(charArr[i]);\n                if (p0 === undefined || p1 === undefined)\n                    break;\n                var width = Kinetic.Path.getLineLength(p0.x, p0.y, p1.x, p1.y);\n                var kern = 0;\n                var midpoint = Kinetic.Path.getPointOnLine(kern + width / 2, p0.x, p0.y, p1.x, p1.y);\n                var rotation = Math.atan2(p1.y - p0.y, p1.x - p0.x);\n                this.glyphInfo.push({\n                    transposeX: midpoint.x,\n                    transposeY: midpoint.y,\n                    text: charArr[i],\n                    rotation: rotation,\n                    p0: p0,\n                    p1: p1\n                });\n                p0 = p1;\n            }\n        }\n    };\n    Kinetic.TextPath.prototype._getContextFont = Kinetic.Text.prototype._getContextFont;\n    Kinetic.Util.extend(Kinetic.TextPath, Kinetic.Shape);\n    Kinetic.Factory.addGetterSetter(Kinetic.TextPath, 'fontFamily', CALIBRI);\n    Kinetic.Factory.addGetterSetter(Kinetic.TextPath, 'fontSize', 12);\n    Kinetic.Factory.addGetterSetter(Kinetic.TextPath, 'fontStyle', NORMAL);\n    Kinetic.Factory.addGetter(Kinetic.TextPath, 'text', EMPTY_STRING);\n}());\n;\n(function () {\n    Kinetic.RegularPolygon = function (config) {\n        this.___init(config);\n    };\n    Kinetic.RegularPolygon.prototype = {\n        ___init: function (config) {\n            Kinetic.Shape.call(this, config);\n            this.className = 'RegularPolygon';\n        },\n        drawFunc: function (context) {\n            var sides = this.attrs.sides, radius = this.attrs.radius, n, x, y;\n            context.beginPath();\n            context.moveTo(0, 0 - radius);\n            for (n = 1; n < sides; n++) {\n                x = radius * Math.sin(n * 2 * Math.PI / sides);\n                y = -1 * radius * Math.cos(n * 2 * Math.PI / sides);\n                context.lineTo(x, y);\n            }\n            context.closePath();\n            context.fillStrokeShape(this);\n        }\n    };\n    Kinetic.Util.extend(Kinetic.RegularPolygon, Kinetic.Shape);\n    Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon, 'radius', 0);\n    Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon, 'sides', 0);\n}());\n;\n(function () {\n    Kinetic.Star = function (config) {\n        this.___init(config);\n    };\n    Kinetic.Star.prototype = {\n        ___init: function (config) {\n            Kinetic.Shape.call(this, config);\n            this.className = 'Star';\n        },\n        drawFunc: function (context) {\n            var _context = context._context, innerRadius = this.attrs.innerRadius, outerRadius = this.attrs.outerRadius, numPoints = this.attrs.numPoints;\n            _context.beginPath();\n            _context.moveTo(0, 0 - this.attrs.outerRadius);\n            for (var n = 1; n < numPoints * 2; n++) {\n                var radius = n % 2 === 0 ? outerRadius : innerRadius;\n                var x = radius * Math.sin(n * Math.PI / numPoints);\n                var y = -1 * radius * Math.cos(n * Math.PI / numPoints);\n                _context.lineTo(x, y);\n            }\n            _context.closePath();\n            context.fillStrokeShape(this);\n        }\n    };\n    Kinetic.Util.extend(Kinetic.Star, Kinetic.Shape);\n    Kinetic.Factory.addGetterSetter(Kinetic.Star, 'numPoints', 0);\n    Kinetic.Factory.addGetterSetter(Kinetic.Star, 'innerRadius', 0);\n    Kinetic.Factory.addGetterSetter(Kinetic.Star, 'outerRadius', 0);\n}());\n;\n(function () {\n    var ATTR_CHANGE_LIST = [\n            'fontFamily',\n            'fontSize',\n            'fontStyle',\n            'padding',\n            'lineHeight',\n            'text'\n        ], CHANGE_KINETIC = 'Change.kinetic', NONE = 'none', UP = 'up', RIGHT = 'right', DOWN = 'down', LEFT = 'left', LABEL = 'Label', attrChangeListLen = ATTR_CHANGE_LIST.length;\n    Kinetic.Label = function (config) {\n        this.____init(config);\n    };\n    Kinetic.Label.prototype = {\n        ____init: function (config) {\n            var that = this;\n            this.className = LABEL;\n            Kinetic.Group.call(this, config);\n            this.on('add.kinetic', function (evt) {\n                that._addListeners(evt.child);\n                that._sync();\n            });\n        },\n        getText: function () {\n            return this.find('Text')[0];\n        },\n        getTag: function () {\n            return this.find('Tag')[0];\n        },\n        _addListeners: function (text) {\n            var that = this, n;\n            var func = function () {\n                that._sync();\n            };\n            for (n = 0; n < attrChangeListLen; n++) {\n                text.on(ATTR_CHANGE_LIST[n] + CHANGE_KINETIC, func);\n            }\n        },\n        getWidth: function () {\n            return this.getText().getWidth();\n        },\n        getHeight: function () {\n            return this.getText().getHeight();\n        },\n        _sync: function () {\n            var text = this.getText(), tag = this.getTag(), width, height, pointerDirection, pointerWidth, x, y;\n            if (text && tag) {\n                width = text.getWidth(), height = text.getHeight(), pointerDirection = tag.getPointerDirection(), pointerWidth = tag.getPointerWidth(), pointerHeight = tag.getPointerHeight(), x = 0, y = 0;\n                switch (pointerDirection) {\n                case UP:\n                    x = width / 2;\n                    y = -1 * pointerHeight;\n                    break;\n                case RIGHT:\n                    x = width + pointerWidth;\n                    y = height / 2;\n                    break;\n                case DOWN:\n                    x = width / 2;\n                    y = height + pointerHeight;\n                    break;\n                case LEFT:\n                    x = -1 * pointerWidth;\n                    y = height / 2;\n                    break;\n                }\n                tag.setAttrs({\n                    x: -1 * x,\n                    y: -1 * y,\n                    width: width,\n                    height: height\n                });\n                text.setAttrs({\n                    x: -1 * x,\n                    y: -1 * y\n                });\n            }\n        }\n    };\n    Kinetic.Util.extend(Kinetic.Label, Kinetic.Group);\n    Kinetic.Tag = function (config) {\n        this.___init(config);\n    };\n    Kinetic.Tag.prototype = {\n        ___init: function (config) {\n            Kinetic.Shape.call(this, config);\n            this.className = 'Tag';\n        },\n        drawFunc: function (context) {\n            var width = this.getWidth(), height = this.getHeight(), pointerDirection = this.getPointerDirection(), pointerWidth = this.getPointerWidth(), pointerHeight = this.getPointerHeight(), cornerRadius = this.getCornerRadius();\n            context.beginPath();\n            context.moveTo(0, 0);\n            if (pointerDirection === UP) {\n                context.lineTo((width - pointerWidth) / 2, 0);\n                context.lineTo(width / 2, -1 * pointerHeight);\n                context.lineTo((width + pointerWidth) / 2, 0);\n            }\n            context.lineTo(width, 0);\n            if (pointerDirection === RIGHT) {\n                context.lineTo(width, (height - pointerHeight) / 2);\n                context.lineTo(width + pointerWidth, height / 2);\n                context.lineTo(width, (height + pointerHeight) / 2);\n            }\n            context.lineTo(width, height);\n            if (pointerDirection === DOWN) {\n                context.lineTo((width + pointerWidth) / 2, height);\n                context.lineTo(width / 2, height + pointerHeight);\n                context.lineTo((width - pointerWidth) / 2, height);\n            }\n            context.lineTo(0, height);\n            if (pointerDirection === LEFT) {\n                context.lineTo(0, (height + pointerHeight) / 2);\n                context.lineTo(-1 * pointerWidth, height / 2);\n                context.lineTo(0, (height - pointerHeight) / 2);\n            }\n            context.closePath();\n            context.fillStrokeShape(this);\n        }\n    };\n    Kinetic.Util.extend(Kinetic.Tag, Kinetic.Shape);\n    Kinetic.Factory.addGetterSetter(Kinetic.Tag, 'pointerDirection', NONE);\n    Kinetic.Factory.addGetterSetter(Kinetic.Tag, 'pointerWidth', 0);\n    Kinetic.Factory.addGetterSetter(Kinetic.Tag, 'pointerHeight', 0);\n    Kinetic.Factory.addGetterSetter(Kinetic.Tag, 'cornerRadius', 0);\n}());\n;\n(function () {\n    Kinetic.Filters.Grayscale = function (imageData) {\n        var data = imageData.data;\n        for (var i = 0; i < data.length; i += 4) {\n            var brightness = 0.34 * data[i] + 0.5 * data[i + 1] + 0.16 * data[i + 2];\n            data[i] = brightness;\n            data[i + 1] = brightness;\n            data[i + 2] = brightness;\n        }\n    };\n}());\n;\n(function () {\n    Kinetic.Filters.Brighten = function (imageData) {\n        var brightness = this.getFilterBrightness();\n        var data = imageData.data;\n        for (var i = 0; i < data.length; i += 4) {\n            data[i] += brightness;\n            data[i + 1] += brightness;\n            data[i + 2] += brightness;\n        }\n    };\n    Kinetic.Factory.addFilterGetterSetter(Kinetic.Image, 'filterBrightness', 0);\n}());\n;\n(function () {\n    Kinetic.Filters.Invert = function (imageData) {\n        var data = imageData.data;\n        for (var i = 0; i < data.length; i += 4) {\n            data[i] = 255 - data[i];\n            data[i + 1] = 255 - data[i + 1];\n            data[i + 2] = 255 - data[i + 2];\n        }\n    };\n}());\n;\n(function () {\n    function BlurStack() {\n        this.r = 0;\n        this.g = 0;\n        this.b = 0;\n        this.a = 0;\n        this.next = null;\n    }\n    var mul_table = [\n            512,\n            512,\n            456,\n            512,\n            328,\n            456,\n            335,\n            512,\n            405,\n            328,\n            271,\n            456,\n            388,\n            335,\n            292,\n            512,\n            454,\n            405,\n            364,\n            328,\n            298,\n            271,\n            496,\n            456,\n            420,\n            388,\n            360,\n            335,\n            312,\n            292,\n            273,\n            512,\n            482,\n            454,\n            428,\n            405,\n            383,\n            364,\n            345,\n            328,\n            312,\n            298,\n            284,\n            271,\n            259,\n            496,\n            475,\n            456,\n            437,\n            420,\n            404,\n            388,\n            374,\n            360,\n            347,\n            335,\n            323,\n            312,\n            302,\n            292,\n            282,\n            273,\n            265,\n            512,\n            497,\n            482,\n            468,\n            454,\n            441,\n            428,\n            417,\n            405,\n            394,\n            383,\n            373,\n            364,\n            354,\n            345,\n            337,\n            328,\n            320,\n            312,\n            305,\n            298,\n            291,\n            284,\n            278,\n            271,\n            265,\n            259,\n            507,\n            496,\n            485,\n            475,\n            465,\n            456,\n            446,\n            437,\n            428,\n            420,\n            412,\n            404,\n            396,\n            388,\n            381,\n            374,\n            367,\n            360,\n            354,\n            347,\n            341,\n            335,\n            329,\n            323,\n            318,\n            312,\n            307,\n            302,\n            297,\n            292,\n            287,\n            282,\n            278,\n            273,\n            269,\n            265,\n            261,\n            512,\n            505,\n            497,\n            489,\n            482,\n            475,\n            468,\n            461,\n            454,\n            447,\n            441,\n            435,\n            428,\n            422,\n            417,\n            411,\n            405,\n            399,\n            394,\n            389,\n            383,\n            378,\n            373,\n            368,\n            364,\n            359,\n            354,\n            350,\n            345,\n            341,\n            337,\n            332,\n            328,\n            324,\n            320,\n            316,\n            312,\n            309,\n            305,\n            301,\n            298,\n            294,\n            291,\n            287,\n            284,\n            281,\n            278,\n            274,\n            271,\n            268,\n            265,\n            262,\n            259,\n            257,\n            507,\n            501,\n            496,\n            491,\n            485,\n            480,\n            475,\n            470,\n            465,\n            460,\n            456,\n            451,\n            446,\n            442,\n            437,\n            433,\n            428,\n            424,\n            420,\n            416,\n            412,\n            408,\n            404,\n            400,\n            396,\n            392,\n            388,\n            385,\n            381,\n            377,\n            374,\n            370,\n            367,\n            363,\n            360,\n            357,\n            354,\n            350,\n            347,\n            344,\n            341,\n            338,\n            335,\n            332,\n            329,\n            326,\n            323,\n            320,\n            318,\n            315,\n            312,\n            310,\n            307,\n            304,\n            302,\n            299,\n            297,\n            294,\n            292,\n            289,\n            287,\n            285,\n            282,\n            280,\n            278,\n            275,\n            273,\n            271,\n            269,\n            267,\n            265,\n            263,\n            261,\n            259\n        ];\n    var shg_table = [\n            9,\n            11,\n            12,\n            13,\n            13,\n            14,\n            14,\n            15,\n            15,\n            15,\n            15,\n            16,\n            16,\n            16,\n            16,\n            17,\n            17,\n            17,\n            17,\n            17,\n            17,\n            17,\n            18,\n            18,\n            18,\n            18,\n            18,\n            18,\n            18,\n            18,\n            18,\n            19,\n            19,\n            19,\n            19,\n            19,\n            19,\n            19,\n            19,\n            19,\n            19,\n            19,\n            19,\n            19,\n            19,\n            20,\n            20,\n            20,\n            20,\n            20,\n            20,\n            20,\n            20,\n            20,\n            20,\n            20,\n            20,\n            20,\n            20,\n            20,\n            20,\n            20,\n            20,\n            21,\n            21,\n            21,\n            21,\n            21,\n            21,\n            21,\n            21,\n            21,\n            21,\n            21,\n            21,\n            21,\n            21,\n            21,\n            21,\n            21,\n            21,\n            21,\n            21,\n            21,\n            21,\n            21,\n            21,\n            21,\n            21,\n            21,\n            22,\n            22,\n            22,\n            22,\n            22,\n            22,\n            22,\n            22,\n            22,\n            22,\n            22,\n            22,\n            22,\n            22,\n            22,\n            22,\n            22,\n            22,\n            22,\n            22,\n            22,\n            22,\n            22,\n            22,\n            22,\n            22,\n            22,\n            22,\n            22,\n            22,\n            22,\n            22,\n            22,\n            22,\n            22,\n            22,\n            22,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            23,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24,\n            24\n        ];\n    function filterGaussBlurRGBA(imageData, radius) {\n        var pixels = imageData.data, width = imageData.width, height = imageData.height;\n        var x, y, i, p, yp, yi, yw, r_sum, g_sum, b_sum, a_sum, r_out_sum, g_out_sum, b_out_sum, a_out_sum, r_in_sum, g_in_sum, b_in_sum, a_in_sum, pr, pg, pb, pa, rbs;\n        var div = radius + radius + 1, widthMinus1 = width - 1, heightMinus1 = height - 1, radiusPlus1 = radius + 1, sumFactor = radiusPlus1 * (radiusPlus1 + 1) / 2, stackStart = new BlurStack(), stackEnd = null, stack = stackStart, stackIn = null, stackOut = null, mul_sum = mul_table[radius], shg_sum = shg_table[radius];\n        for (i = 1; i < div; i++) {\n            stack = stack.next = new BlurStack();\n            if (i == radiusPlus1)\n                stackEnd = stack;\n        }\n        stack.next = stackStart;\n        yw = yi = 0;\n        for (y = 0; y < height; y++) {\n            r_in_sum = g_in_sum = b_in_sum = a_in_sum = r_sum = g_sum = b_sum = a_sum = 0;\n            r_out_sum = radiusPlus1 * (pr = pixels[yi]);\n            g_out_sum = radiusPlus1 * (pg = pixels[yi + 1]);\n            b_out_sum = radiusPlus1 * (pb = pixels[yi + 2]);\n            a_out_sum = radiusPlus1 * (pa = pixels[yi + 3]);\n            r_sum += sumFactor * pr;\n            g_sum += sumFactor * pg;\n            b_sum += sumFactor * pb;\n            a_sum += sumFactor * pa;\n            stack = stackStart;\n            for (i = 0; i < radiusPlus1; i++) {\n                stack.r = pr;\n                stack.g = pg;\n                stack.b = pb;\n                stack.a = pa;\n                stack = stack.next;\n            }\n            for (i = 1; i < radiusPlus1; i++) {\n                p = yi + ((widthMinus1 < i ? widthMinus1 : i) << 2);\n                r_sum += (stack.r = pr = pixels[p]) * (rbs = radiusPlus1 - i);\n                g_sum += (stack.g = pg = pixels[p + 1]) * rbs;\n                b_sum += (stack.b = pb = pixels[p + 2]) * rbs;\n                a_sum += (stack.a = pa = pixels[p + 3]) * rbs;\n                r_in_sum += pr;\n                g_in_sum += pg;\n                b_in_sum += pb;\n                a_in_sum += pa;\n                stack = stack.next;\n            }\n            stackIn = stackStart;\n            stackOut = stackEnd;\n            for (x = 0; x < width; x++) {\n                pixels[yi + 3] = pa = a_sum * mul_sum >> shg_sum;\n                if (pa !== 0) {\n                    pa = 255 / pa;\n                    pixels[yi] = (r_sum * mul_sum >> shg_sum) * pa;\n                    pixels[yi + 1] = (g_sum * mul_sum >> shg_sum) * pa;\n                    pixels[yi + 2] = (b_sum * mul_sum >> shg_sum) * pa;\n                } else {\n                    pixels[yi] = pixels[yi + 1] = pixels[yi + 2] = 0;\n                }\n                r_sum -= r_out_sum;\n                g_sum -= g_out_sum;\n                b_sum -= b_out_sum;\n                a_sum -= a_out_sum;\n                r_out_sum -= stackIn.r;\n                g_out_sum -= stackIn.g;\n                b_out_sum -= stackIn.b;\n                a_out_sum -= stackIn.a;\n                p = yw + ((p = x + radius + 1) < widthMinus1 ? p : widthMinus1) << 2;\n                r_in_sum += stackIn.r = pixels[p];\n                g_in_sum += stackIn.g = pixels[p + 1];\n                b_in_sum += stackIn.b = pixels[p + 2];\n                a_in_sum += stackIn.a = pixels[p + 3];\n                r_sum += r_in_sum;\n                g_sum += g_in_sum;\n                b_sum += b_in_sum;\n                a_sum += a_in_sum;\n                stackIn = stackIn.next;\n                r_out_sum += pr = stackOut.r;\n                g_out_sum += pg = stackOut.g;\n                b_out_sum += pb = stackOut.b;\n                a_out_sum += pa = stackOut.a;\n                r_in_sum -= pr;\n                g_in_sum -= pg;\n                b_in_sum -= pb;\n                a_in_sum -= pa;\n                stackOut = stackOut.next;\n                yi += 4;\n            }\n            yw += width;\n        }\n        for (x = 0; x < width; x++) {\n            g_in_sum = b_in_sum = a_in_sum = r_in_sum = g_sum = b_sum = a_sum = r_sum = 0;\n            yi = x << 2;\n            r_out_sum = radiusPlus1 * (pr = pixels[yi]);\n            g_out_sum = radiusPlus1 * (pg = pixels[yi + 1]);\n            b_out_sum = radiusPlus1 * (pb = pixels[yi + 2]);\n            a_out_sum = radiusPlus1 * (pa = pixels[yi + 3]);\n            r_sum += sumFactor * pr;\n            g_sum += sumFactor * pg;\n            b_sum += sumFactor * pb;\n            a_sum += sumFactor * pa;\n            stack = stackStart;\n            for (i = 0; i < radiusPlus1; i++) {\n                stack.r = pr;\n                stack.g = pg;\n                stack.b = pb;\n                stack.a = pa;\n                stack = stack.next;\n            }\n            yp = width;\n            for (i = 1; i <= radius; i++) {\n                yi = yp + x << 2;\n                r_sum += (stack.r = pr = pixels[yi]) * (rbs = radiusPlus1 - i);\n                g_sum += (stack.g = pg = pixels[yi + 1]) * rbs;\n                b_sum += (stack.b = pb = pixels[yi + 2]) * rbs;\n                a_sum += (stack.a = pa = pixels[yi + 3]) * rbs;\n                r_in_sum += pr;\n                g_in_sum += pg;\n                b_in_sum += pb;\n                a_in_sum += pa;\n                stack = stack.next;\n                if (i < heightMinus1) {\n                    yp += width;\n                }\n            }\n            yi = x;\n            stackIn = stackStart;\n            stackOut = stackEnd;\n            for (y = 0; y < height; y++) {\n                p = yi << 2;\n                pixels[p + 3] = pa = a_sum * mul_sum >> shg_sum;\n                if (pa > 0) {\n                    pa = 255 / pa;\n                    pixels[p] = (r_sum * mul_sum >> shg_sum) * pa;\n                    pixels[p + 1] = (g_sum * mul_sum >> shg_sum) * pa;\n                    pixels[p + 2] = (b_sum * mul_sum >> shg_sum) * pa;\n                } else {\n                    pixels[p] = pixels[p + 1] = pixels[p + 2] = 0;\n                }\n                r_sum -= r_out_sum;\n                g_sum -= g_out_sum;\n                b_sum -= b_out_sum;\n                a_sum -= a_out_sum;\n                r_out_sum -= stackIn.r;\n                g_out_sum -= stackIn.g;\n                b_out_sum -= stackIn.b;\n                a_out_sum -= stackIn.a;\n                p = x + ((p = y + radiusPlus1) < heightMinus1 ? p : heightMinus1) * width << 2;\n                r_sum += r_in_sum += stackIn.r = pixels[p];\n                g_sum += g_in_sum += stackIn.g = pixels[p + 1];\n                b_sum += b_in_sum += stackIn.b = pixels[p + 2];\n                a_sum += a_in_sum += stackIn.a = pixels[p + 3];\n                stackIn = stackIn.next;\n                r_out_sum += pr = stackOut.r;\n                g_out_sum += pg = stackOut.g;\n                b_out_sum += pb = stackOut.b;\n                a_out_sum += pa = stackOut.a;\n                r_in_sum -= pr;\n                g_in_sum -= pg;\n                b_in_sum -= pb;\n                a_in_sum -= pa;\n                stackOut = stackOut.next;\n                yi += width;\n            }\n        }\n    }\n    Kinetic.Filters.Blur = function (imageData) {\n        var radius = this.getFilterRadius() | 0;\n        if (radius > 0) {\n            filterGaussBlurRGBA(imageData, radius);\n        }\n    };\n    Kinetic.Factory.addFilterGetterSetter(Kinetic.Image, 'filterRadius', 0);\n}());\n;\n(function () {\n    function pixelAt(idata, x, y) {\n        var idx = (y * idata.width + x) * 4;\n        var d = [];\n        d.push(idata.data[idx++], idata.data[idx++], idata.data[idx++], idata.data[idx++]);\n        return d;\n    }\n    function rgbDistance(p1, p2) {\n        return Math.sqrt(Math.pow(p1[0] - p2[0], 2) + Math.pow(p1[1] - p2[1], 2) + Math.pow(p1[2] - p2[2], 2));\n    }\n    function rgbMean(pTab) {\n        var m = [\n                0,\n                0,\n                0\n            ];\n        for (var i = 0; i < pTab.length; i++) {\n            m[0] += pTab[i][0];\n            m[1] += pTab[i][1];\n            m[2] += pTab[i][2];\n        }\n        m[0] /= pTab.length;\n        m[1] /= pTab.length;\n        m[2] /= pTab.length;\n        return m;\n    }\n    function backgroundMask(idata, threshold) {\n        var rgbv_no = pixelAt(idata, 0, 0);\n        var rgbv_ne = pixelAt(idata, idata.width - 1, 0);\n        var rgbv_so = pixelAt(idata, 0, idata.height - 1);\n        var rgbv_se = pixelAt(idata, idata.width - 1, idata.height - 1);\n        var thres = threshold || 10;\n        if (rgbDistance(rgbv_no, rgbv_ne) < thres && rgbDistance(rgbv_ne, rgbv_se) < thres && rgbDistance(rgbv_se, rgbv_so) < thres && rgbDistance(rgbv_so, rgbv_no) < thres) {\n            var mean = rgbMean([\n                    rgbv_ne,\n                    rgbv_no,\n                    rgbv_se,\n                    rgbv_so\n                ]);\n            var mask = [];\n            for (var i = 0; i < idata.width * idata.height; i++) {\n                var d = rgbDistance(mean, [\n                        idata.data[i * 4],\n                        idata.data[i * 4 + 1],\n                        idata.data[i * 4 + 2]\n                    ]);\n                mask[i] = d < thres ? 0 : 255;\n            }\n            return mask;\n        }\n    }\n    function applyMask(idata, mask) {\n        for (var i = 0; i < idata.width * idata.height; i++) {\n            idata.data[4 * i + 3] = mask[i];\n        }\n    }\n    function erodeMask(mask, sw, sh) {\n        var weights = [\n                1,\n                1,\n                1,\n                1,\n                0,\n                1,\n                1,\n                1,\n                1\n            ];\n        var side = Math.round(Math.sqrt(weights.length));\n        var halfSide = Math.floor(side / 2);\n        var maskResult = [];\n        for (var y = 0; y < sh; y++) {\n            for (var x = 0; x < sw; x++) {\n                var so = y * sw + x;\n                var a = 0;\n                for (var cy = 0; cy < side; cy++) {\n                    for (var cx = 0; cx < side; cx++) {\n                        var scy = y + cy - halfSide;\n                        var scx = x + cx - halfSide;\n                        if (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {\n                            var srcOff = scy * sw + scx;\n                            var wt = weights[cy * side + cx];\n                            a += mask[srcOff] * wt;\n                        }\n                    }\n                }\n                maskResult[so] = a === 255 * 8 ? 255 : 0;\n            }\n        }\n        return maskResult;\n    }\n    function dilateMask(mask, sw, sh) {\n        var weights = [\n                1,\n                1,\n                1,\n                1,\n                1,\n                1,\n                1,\n                1,\n                1\n            ];\n        var side = Math.round(Math.sqrt(weights.length));\n        var halfSide = Math.floor(side / 2);\n        var maskResult = [];\n        for (var y = 0; y < sh; y++) {\n            for (var x = 0; x < sw; x++) {\n                var so = y * sw + x;\n                var a = 0;\n                for (var cy = 0; cy < side; cy++) {\n                    for (var cx = 0; cx < side; cx++) {\n                        var scy = y + cy - halfSide;\n                        var scx = x + cx - halfSide;\n                        if (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {\n                            var srcOff = scy * sw + scx;\n                            var wt = weights[cy * side + cx];\n                            a += mask[srcOff] * wt;\n                        }\n                    }\n                }\n                maskResult[so] = a >= 255 * 4 ? 255 : 0;\n            }\n        }\n        return maskResult;\n    }\n    function smoothEdgeMask(mask, sw, sh) {\n        var weights = [\n                1 / 9,\n                1 / 9,\n                1 / 9,\n                1 / 9,\n                1 / 9,\n                1 / 9,\n                1 / 9,\n                1 / 9,\n                1 / 9\n            ];\n        var side = Math.round(Math.sqrt(weights.length));\n        var halfSide = Math.floor(side / 2);\n        var maskResult = [];\n        for (var y = 0; y < sh; y++) {\n            for (var x = 0; x < sw; x++) {\n                var so = y * sw + x;\n                var a = 0;\n                for (var cy = 0; cy < side; cy++) {\n                    for (var cx = 0; cx < side; cx++) {\n                        var scy = y + cy - halfSide;\n                        var scx = x + cx - halfSide;\n                        if (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {\n                            var srcOff = scy * sw + scx;\n                            var wt = weights[cy * side + cx];\n                            a += mask[srcOff] * wt;\n                        }\n                    }\n                }\n                maskResult[so] = a;\n            }\n        }\n        return maskResult;\n    }\n    Kinetic.Filters.Mask = function (idata) {\n        var threshold = this.getFilterThreshold(), mask = backgroundMask(idata, threshold);\n        if (mask) {\n            mask = erodeMask(mask, idata.width, idata.height);\n            mask = dilateMask(mask, idata.width, idata.height);\n            mask = smoothEdgeMask(mask, idata.width, idata.height);\n            applyMask(idata, mask);\n        }\n        return idata;\n    };\n    Kinetic.Factory.addFilterGetterSetter(Kinetic.Image, 'filterThreshold', 0);\n}());\n;\n(function () {\n    var rgb_to_hsl = function (r, g, b) {\n        r /= 255;\n        g /= 255;\n        b /= 255;\n        var max = Math.max(r, g, b), min = Math.min(r, g, b), chroma = max - min, luminance = chroma / 2, saturation = chroma / (1 - Math.abs(2 * luminance - 1)), hue = 0;\n        if (max == r) {\n            hue = (g - b) / chroma % 6;\n        } else if (max == g) {\n            hue = (b - r) / chroma + 2;\n        } else if (max == b) {\n            hue = (r - g) / chroma + 4;\n        }\n        return [\n            (hue * 60 + 360) % 360,\n            saturation,\n            luminance\n        ];\n    };\n    var pixelShiftHue = function (r, g, b, deg) {\n        r /= 255;\n        g /= 255;\n        b /= 255;\n        var max = Math.max(r, g, b), min = Math.min(r, g, b), chroma = max - min, luminance = chroma / 2, saturation = chroma / (1 - Math.abs(2 * luminance - 1)), hue = 0;\n        if (max == r) {\n            hue = (g - b) / chroma % 6;\n        } else if (max == g) {\n            hue = (b - r) / chroma + 2;\n        } else if (max == b) {\n            hue = (r - g) / chroma + 4;\n        }\n        hue *= 60;\n        hue %= 360;\n        hue += deg;\n        hue %= 360;\n        hue /= 60;\n        var rR = 0, rG = 0, rB = 0, tmp = chroma * (1 - Math.abs(hue % 2 - 1)), m = luminance - chroma / 2;\n        if (0 <= hue && hue < 1) {\n            rR = chroma;\n            rG = tmp;\n        } else if (1 <= hue && hue < 2) {\n            rG = chroma;\n            rR = tmp;\n        } else if (2 <= hue && hue < 3) {\n            rG = chroma;\n            rB = tmp;\n        } else if (3 <= hue && hue < 4) {\n            rB = chroma;\n            rG = tmp;\n        } else if (4 <= hue && hue < 5) {\n            rB = chroma;\n            rR = tmp;\n        } else if (5 <= hue && hue < 6) {\n            rR = chroma;\n            rB = tmp;\n        }\n        rR += m;\n        rG += m;\n        rB += m;\n        rR = 255 * rR;\n        rG = 255 * rG;\n        rB = 255 * rB;\n        return [\n            rR,\n            rG,\n            rB\n        ];\n    };\n    var shift_hue = function (imageData, deg) {\n        var data = imageData.data, pixel;\n        for (var i = 0; i < data.length; i += 4) {\n            pixel = pixelShiftHue(data[i + 0], data[i + 1], data[i + 2], deg);\n            data[i + 0] = pixel[0];\n            data[i + 1] = pixel[1];\n            data[i + 2] = pixel[2];\n        }\n    };\n    Kinetic.Filters.ShiftHue = function (imageData) {\n        shift_hue(imageData, this.getFilterHueShiftDeg() % 360);\n    };\n    Kinetic.Factory.addFilterGetterSetter(Kinetic.Image, 'filterHueShiftDeg', 0);\n    Kinetic.Filters.Colorize = function (imageData) {\n        var data = imageData.data;\n        var color = this.getFilterColorizeColor(), hsl = rgb_to_hsl(color[0], color[1], color[2]), hue = hsl[0];\n        for (var i = 0; i < data.length; i += 4) {\n            data[i + 1] = 0;\n            data[i + 2] = 0;\n        }\n        shift_hue(imageData, hue);\n    };\n    Kinetic.Factory.addFilterGetterSetter(Kinetic.Image, 'filterColorizeColor', [\n        255,\n        0,\n        0\n    ]);\n}());\n;\n(function () {\n    var convolve_internal = function (imageData, matrix) {\n        var pixels = imageData.data, imageSizeX = imageData.width, imageSizeY = imageData.height, nPixels = imageSizeX * imageSizeY, pixel;\n        var result = [];\n        result.length = imageSizeX * imageSizeY * 4;\n        var matrixSizeX = matrix.length, matrixSizeY = matrix[0].length, matrixMidX = Math.floor(matrix.length / 2), matrixMidY = Math.floor(matrix[0].length / 2);\n        var r, g, b, a, x, y, px, py, pos, i, j;\n        for (y = 0; y < imageSizeY; y += 1) {\n            for (x = 0; x < imageSizeX; x += 1) {\n                r = 0;\n                g = 0;\n                b = 0;\n                a = 0;\n                for (i = 0; i < matrixSizeX; i += 1) {\n                    for (j = 0; j < matrixSizeY; j += 1) {\n                        px = (x + i - matrixMidX) % imageSizeX;\n                        px = px > 0 ? px : -px;\n                        py = (y + i - matrixMidY) % imageSizeY;\n                        py = py > 0 ? py : -py;\n                        pos = (py * imageSizeX + px) * 4;\n                        r += matrix[j][i] * pixels[pos + 0];\n                        g += matrix[j][i] * pixels[pos + 1];\n                        b += matrix[j][i] * pixels[pos + 2];\n                    }\n                }\n                pos = (y * imageSizeX + x) * 4;\n                result[pos + 0] = r;\n                result[pos + 1] = g;\n                result[pos + 2] = b;\n            }\n        }\n        var lastPos = nPixels * 4;\n        for (pos = 0; pos < lastPos; pos += 4) {\n            pixels[pos + 0] = result[pos + 0];\n            pixels[pos + 1] = result[pos + 1];\n            pixels[pos + 2] = result[pos + 2];\n        }\n    };\n    var gaussian = function (x, mean, sigma) {\n        var dx = x - mean;\n        return Math.pow(Math.E, -dx * dx / (2 * sigma * sigma));\n    };\n    var make_blur_kernel = function (size, scale, sigma) {\n        if (size % 2 === 0) {\n            size += 1;\n        }\n        var kernel = [], i, j, row;\n        for (i = 0; i < size; i += 1) {\n            row = [];\n            for (j = 0; j < size; j += 1) {\n                row.push(scale * gaussian(i, size / 2, sigma) * gaussian(j, size / 2, sigma));\n            }\n            kernel.push(row);\n        }\n        return kernel;\n    };\n    var make_edge_detect_kernel = function (size, scale, sigma) {\n        if (size % 2 === 0) {\n            size += 1;\n        }\n        var kernel = [], i, j, row, g;\n        for (i = 0; i < size; i += 1) {\n            row = [];\n            for (j = 0; j < size; j += 1) {\n                g1 = gaussian(i, size / 2, sigma) * gaussian(j, size / 2, sigma);\n                g2 = gaussian(i, size / 2, sigma * 1.6) * gaussian(j, size / 2, sigma * 1.6);\n                row.push(scale * (g2 - g1));\n            }\n            kernel.push(row);\n        }\n        return kernel;\n    };\n    var make_soft_blur_kernel = function (size, percent) {\n        var kernel = make_blur_kernel(size, percent, 1), mid = Math.floor(size / 2);\n        kernel[mid][mid] += 1 - percent;\n        return kernel;\n    };\n    var make_unsharp_kernel = function (size, percent) {\n        var kernel = make_blur_kernel(size, -percent, 1), mid = Math.floor(size / 2);\n        kernel[mid][mid] += 1 + percent;\n        return kernel;\n    };\n    Kinetic.Factory.addFilterGetterSetter(Kinetic.Image, 'filterAmount', 50);\n    Kinetic.Filters.UnsharpMask = function (imageData) {\n        convolve_internal(imageData, make_unsharp_kernel(5, this.getFilterAmount() / 100));\n    };\n    Kinetic.Filters.SoftBlur = function (imageData) {\n        convolve_internal(imageData, make_soft_blur_kernel(5, this.getFilterAmount() / 100));\n    };\n    Kinetic.Filters.Edge = function (imageData) {\n        var s = this.getFilterAmount() / 100;\n        if (s === 0) {\n            return;\n        }\n        convolve_internal(imageData, [\n            [\n                0,\n                -1 * s,\n                0\n            ],\n            [\n                -1 * s,\n                1 - s + 4 * s,\n                -1 * s\n            ],\n            [\n                0,\n                -1 * s,\n                0\n            ]\n        ]);\n    };\n    Kinetic.Filters.Emboss = function (imageData) {\n        var s = this.getFilterAmount() / 100;\n        if (s === 0) {\n            return;\n        }\n        convolve_internal(imageData, [\n            [\n                -1 * s,\n                -0.5 * s,\n                0\n            ],\n            [\n                -0.5 * s,\n                1 + 0.5 * s,\n                0.5 * s\n            ],\n            [\n                0,\n                0.5 * s,\n                1 * s\n            ]\n        ]);\n    };\n}());","map":"{\"version\":3,\"sources\":[\"jslibs/kinetic-v4.7.1.js\"],\"names\":[\"Kinetic\",\"version\",\"stages\",\"idCounter\",\"ids\",\"names\",\"shapes\",\"listenClickTap\",\"inDblClickWindow\",\"enableTrace\",\"traceArrMax\",\"dblClickWindow\",\"pixelRatio\",\"undefined\",\"UA\",\"ua\",\"navigator\",\"userAgent\",\"toLowerCase\",\"match\",\"exec\",\"indexOf\",\"browser\",\"Filters\",\"Node\",\"config\",\"_init\",\"Shape\",\"__init\",\"Container\",\"Stage\",\"___init\",\"Layer\",\"Group\",\"isDragging\",\"dd\",\"DD\",\"isDragReady\",\"node\",\"_addId\",\"id\",\"_removeId\",\"_addName\",\"name\",\"push\",\"_removeName\",\"_id\",\"nodes\",\"n\",\"length\",\"no\",\"splice\",\"root\",\"factory\",\"exports\",\"module\",\"define\",\"amd\",\"returnExports\",\"Collection\",\"args\",\"slice\",\"call\",\"arguments\",\"i\",\"prototype\",\"each\",\"func\",\"toArray\",\"arr\",\"len\",\"toCollection\",\"collection\",\"mapMethods\",\"leng\",\"method\",\"apply\",\"Transform\",\"m\",\"translate\",\"x\",\"y\",\"scale\",\"sx\",\"sy\",\"rotate\",\"rad\",\"c\",\"Math\",\"cos\",\"s\",\"sin\",\"m11\",\"m12\",\"m21\",\"m22\",\"getTranslation\",\"skew\",\"multiply\",\"matrix\",\"dx\",\"dy\",\"invert\",\"d\",\"m0\",\"m1\",\"m2\",\"m3\",\"m4\",\"m5\",\"getMatrix\",\"setAbsolutePosition\",\"yt\",\"xt\",\"CANVAS\",\"CONTEXT_2D\",\"OBJECT_ARRAY\",\"OBJECT_NUMBER\",\"OBJECT_STRING\",\"PI_OVER_DEG180\",\"PI\",\"DEG180_OVER_PI\",\"HASH\",\"EMPTY_STRING\",\"ZERO\",\"KINETIC_WARNING\",\"KINETIC_ERROR\",\"RGB_PAREN\",\"COLORS\",\"aqua\",\"lime\",\"silver\",\"black\",\"maroon\",\"teal\",\"blue\",\"navy\",\"white\",\"fuchsia\",\"olive\",\"yellow\",\"orange\",\"gray\",\"purple\",\"green\",\"red\",\"pink\",\"cyan\",\"transparent\",\"RGB_REGEX\",\"Util\",\"_isElement\",\"obj\",\"nodeType\",\"_isFunction\",\"constructor\",\"_isObject\",\"Object\",\"_isArray\",\"toString\",\"_isNumber\",\"_isString\",\"_hasMethods\",\"key\",\"_isInDocument\",\"el\",\"parentNode\",\"document\",\"_roundArrValues\",\"retArr\",\"val\",\"round\",\"_getXY\",\"arg\",\"_getSize\",\"width\",\"height\",\"_getPoints\",\"_getImage\",\"callback\",\"imageObj\",\"canvas\",\"context\",\"dataUrl\",\"Image\",\"onload\",\"src\",\"data\",\"createElement\",\"_context\",\"getContext\",\"putImageData\",\"toDataURL\",\"_rgbToHex\",\"r\",\"g\",\"b\",\"_hexToRgb\",\"hex\",\"replace\",\"bigint\",\"parseInt\",\"getRandomColor\",\"randColor\",\"random\",\"get\",\"def\",\"getRGB\",\"color\",\"rgb\",\"substring\",\"substr\",\"_merge\",\"o1\",\"o2\",\"retObj\",\"_clone\",\"_degToRad\",\"deg\",\"_radToDeg\",\"_capitalize\",\"str\",\"charAt\",\"toUpperCase\",\"error\",\"Error\",\"warn\",\"window\",\"console\",\"extend\",\"c1\",\"c2\",\"addMethods\",\"methods\",\"_getControlPoints\",\"p0\",\"p1\",\"p2\",\"t\",\"x0\",\"y0\",\"x1\",\"y1\",\"x2\",\"y2\",\"d01\",\"sqrt\",\"pow\",\"d12\",\"fa\",\"fb\",\"p1x\",\"p1y\",\"p2x\",\"p2y\",\"_expandPoints\",\"points\",\"tension\",\"allPoints\",\"cp\",\"_removeLastLetter\",\"devicePixelRatio\",\"backingStoreRatio\",\"webkitBackingStorePixelRatio\",\"mozBackingStorePixelRatio\",\"msBackingStorePixelRatio\",\"oBackingStorePixelRatio\",\"backingStorePixelRatio\",\"_pixelRatio\",\"Canvas\",\"init\",\"_canvas\",\"style\",\"padding\",\"margin\",\"border\",\"background\",\"position\",\"top\",\"left\",\"getPixelRatio\",\"setPixelRatio\",\"setSize\",\"getWidth\",\"getHeight\",\"setWidth\",\"setHeight\",\"mimeType\",\"quality\",\"e\",\"err\",\"message\",\"SceneCanvas\",\"SceneContext\",\"HitCanvas\",\"HitContext\",\"COMMA\",\"OPEN_PAREN\",\"CLOSE_PAREN\",\"OPEN_PAREN_BRACKET\",\"CLOSE_BRACKET_PAREN\",\"SEMICOLON\",\"DOUBLE_PAREN\",\"EQUALS\",\"SET\",\"CONTEXT_METHODS\",\"Context\",\"traceArr\",\"_enableTrace\",\"getTrace\",\"relaxed\",\"trace\",\"join\",\"property\",\"clearTrace\",\"_trace\",\"shift\",\"reset\",\"getCanvas\",\"setTransform\",\"clear\",\"pos\",\"size\",\"clearRect\",\"fillShape\",\"shape\",\"getFillEnabled\",\"_fill\",\"strokeShape\",\"getStrokeEnabled\",\"_stroke\",\"fillStrokeShape\",\"fillEnabled\",\"hasShadow\",\"hasFill\",\"_applyLineCap\",\"lineCap\",\"getLineCap\",\"setAttr\",\"_applyOpacity\",\"absOpacity\",\"getAbsoluteOpacity\",\"_applyLineJoin\",\"lineJoin\",\"getLineJoin\",\"_applyAncestorTransforms\",\"getAbsoluteTransform\",\"transform\",\"_clip\",\"container\",\"clipX\",\"getClipX\",\"clipY\",\"getClipY\",\"clipWidth\",\"getClipWidth\",\"clipHeight\",\"getClipHeight\",\"save\",\"beginPath\",\"rect\",\"clip\",\"_drawChildren\",\"restore\",\"attr\",\"arc\",\"a\",\"bezierCurveTo\",\"closePath\",\"createLinearGradient\",\"createPattern\",\"createRadialGradient\",\"drawImage\",\"fill\",\"fillText\",\"getImageData\",\"lineTo\",\"moveTo\",\"quadraticCurveTo\",\"setLineDash\",\"mozDash\",\"webkitLineDash\",\"stroke\",\"strokeText\",\"that\",\"origSetter\",\"methodName\",\"origMethod\",\"ret\",\"Array\",\"_fillColor\",\"getFill\",\"_fillFunc\",\"_fillPattern\",\"fillPatternImage\",\"getFillPatternImage\",\"fillPatternX\",\"getFillPatternX\",\"fillPatternY\",\"getFillPatternY\",\"fillPatternScale\",\"getFillPatternScale\",\"fillPatternRotation\",\"getFillPatternRotation\",\"fillPatternOffset\",\"getFillPatternOffset\",\"fillPatternRepeat\",\"getFillPatternRepeat\",\"_fillLinearGradient\",\"start\",\"getFillLinearGradientStartPoint\",\"end\",\"getFillLinearGradientEndPoint\",\"colorStops\",\"getFillLinearGradientColorStops\",\"grd\",\"addColorStop\",\"_fillRadialGradient\",\"getFillRadialGradientStartPoint\",\"getFillRadialGradientEndPoint\",\"startRadius\",\"getFillRadialGradientStartRadius\",\"endRadius\",\"getFillRadialGradientEndRadius\",\"getFillRadialGradientColorStops\",\"skipShadow\",\"hasColor\",\"hasPattern\",\"hasLinearGradient\",\"hasRadialGradient\",\"fillPriority\",\"getFillPriority\",\"_applyShadow\",\"getStroke\",\"strokeWidth\",\"getStrokeWidth\",\"dashArray\",\"getDashArray\",\"strokeScaleEnabled\",\"getStrokeScaleEnabled\",\"getDashArrayEnabled\",\"_strokeFunc\",\"applyShadow\",\"drawFunc\",\"util\",\"blur\",\"offset\",\"shadowOpacity\",\"getShadowEnabled\",\"getShadowColor\",\"getShadowBlur\",\"getShadowOpacity\",\"getShadowOffset\",\"colorKey\",\"_fillFuncHit\",\"_strokeFuncHit\",\"ABSOLUTE_OPACITY\",\"ABSOLUTE_TRANSFORM\",\"ADD\",\"B\",\"BEFORE\",\"BLACK\",\"CHANGE\",\"CHILDREN\",\"DEG\",\"DOT\",\"G\",\"GET\",\"ID\",\"KINETIC\",\"LISTENING\",\"MOUSEENTER\",\"MOUSELEAVE\",\"NAME\",\"OFF\",\"ON\",\"PRIVATE_GET\",\"R\",\"RGB\",\"SHAPE\",\"SPACE\",\"STAGE\",\"TRANSFORM\",\"UPPER_B\",\"UPPER_G\",\"UPPER_HEIGHT\",\"UPPER_R\",\"UPPER_WIDTH\",\"UPPER_X\",\"UPPER_Y\",\"VISIBLE\",\"X\",\"Y\",\"Factory\",\"addGetterSetter\",\"addGetter\",\"addSetter\",\"addPointGetterSetter\",\"addPointGetter\",\"addPointSetter\",\"addBoxGetterSetter\",\"addBoxGetter\",\"addBoxSetter\",\"addPointsGetterSetter\",\"addPointsGetter\",\"addPointsSetter\",\"addPointAdder\",\"addRotationGetterSetter\",\"addRotationGetter\",\"addRotationSetter\",\"addColorGetterSetter\",\"addColorRGBGetter\",\"addColorComponentGetter\",\"addColorRGBSetter\",\"addColorComponentSetter\",\"attrs\",\"prefix\",\"baseMethod\",\"getAttr\",\"_setAttr\",\"oldVal\",\"_fireBeforeChangeEvent\",\"_fireChangeEvent\",\"both\",\"UPPER_STAGE\",\"transformChangeStr\",\"eventListeners\",\"cache\",\"setAttrs\",\"on\",\"_clearCache\",\"_clearSelfAndChildrenCache\",\"clearCache\",\"_getCache\",\"privateGetter\",\"children\",\"getChildren\",\"evtStr\",\"handler\",\"events\",\"split\",\"event\",\"parts\",\"baseEvent\",\"off\",\"_off\",\"remove\",\"parent\",\"getParent\",\"index\",\"_setChildrenIndices\",\"destroy\",\"getId\",\"getName\",\"getAncestors\",\"ancestors\",\"getAttrs\",\"isListening\",\"_isListening\",\"listening\",\"getListening\",\"isVisible\",\"_isVisible\",\"visible\",\"getVisible\",\"show\",\"setVisible\",\"hide\",\"getZIndex\",\"getAbsoluteZIndex\",\"level\",\"getLevel\",\"child\",\"addChildren\",\"concat\",\"getStage\",\"setPosition\",\"setX\",\"setY\",\"getPosition\",\"getX\",\"getY\",\"getAbsolutePosition\",\"absoluteMatrix\",\"absoluteTransform\",\"o\",\"getOffset\",\"trans\",\"_clearTransform\",\"it\",\"_setTransform\",\"rotation\",\"getRotation\",\"scaleX\",\"getScaleX\",\"scaleY\",\"getScaleY\",\"offsetX\",\"getOffsetX\",\"offsetY\",\"getOffsetY\",\"skewX\",\"getSkewX\",\"skewY\",\"getSkewY\",\"move\",\"_eachAncestorReverse\",\"includeSelf\",\"family\",\"unshift\",\"theta\",\"setRotation\",\"rotateDeg\",\"moveToTop\",\"moveUp\",\"moveDown\",\"moveToBottom\",\"setZIndex\",\"zIndex\",\"_getAbsoluteOpacity\",\"getOpacity\",\"newContainer\",\"add\",\"toObject\",\"type\",\"className\",\"getClassName\",\"toJSON\",\"JSON\",\"stringify\",\"getLayer\",\"_getStage\",\"fire\",\"eventType\",\"evt\",\"bubble\",\"_fireAndBubble\",\"_fire\",\"_getAbsoluteTransform\",\"am\",\"getTransform\",\"_getTransform\",\"clone\",\"allListeners\",\"listener\",\"stage\",\"drawScene\",\"toImage\",\"img\",\"getSize\",\"getType\",\"_get\",\"selector\",\"evtListeners\",\"evtName\",\"newVal\",\"setId\",\"oldId\",\"setName\",\"oldName\",\"compareShape\",\"okayToRun\",\"targetNode\",\"cancelBubble\",\"draw\",\"drawHit\",\"shouldDrawHit\",\"isDraggable\",\"create\",\"json\",\"_createNode\",\"parse\",\"BATCH_DRAW_STOP_TIME_DIFF\",\"Animation\",\"layers\",\"setLayers\",\"animIdCounter\",\"frame\",\"time\",\"timeDiff\",\"lastTime\",\"Date\",\"getTime\",\"lays\",\"getLayers\",\"addLayer\",\"layer\",\"isRunning\",\"animations\",\"stop\",\"_addAnimation\",\"_removeAnimation\",\"_updateFrameObject\",\"frameRate\",\"animRunning\",\"anim\",\"_handleAnimation\",\"_runFrames\",\"layerHash\",\"layersLen\",\"_animationLoop\",\"requestAnimFrame\",\"RAF\",\"requestAnimationFrame\",\"webkitRequestAnimationFrame\",\"mozRequestAnimationFrame\",\"oRequestAnimationFrame\",\"msRequestAnimationFrame\",\"FRAF\",\"setTimeout\",\"raf\",\"batchDraw\",\"batchAnim\",\"lastBatchDrawTime\",\"blacklist\",\"duration\",\"easing\",\"onFinish\",\"yoyo\",\"PAUSED\",\"PLAYING\",\"REVERSING\",\"Tween\",\"nodeId\",\"Easings\",\"Linear\",\"tween\",\"tweenId\",\"onEnterFrame\",\"_tweenFunc\",\"_addListeners\",\"tweens\",\"_addAttr\",\"onReset\",\"diff\",\"startVal\",\"endVal\",\"diffVal\",\"onPlay\",\"onReverse\",\"onPause\",\"play\",\"reverse\",\"seek\",\"pause\",\"finish\",\"thisId\",\"prop\",\"propFunc\",\"begin\",\"_pos\",\"_change\",\"prevPos\",\"_time\",\"_position\",\"_startTime\",\"_finish\",\"setTime\",\"update\",\"p\",\"state\",\"getTimer\",\"abs\",\"asin\",\"BounceEaseOut\",\"BounceEaseIn\",\"_drag\",\"_setDragPosition\",\"_endDragBefore\",\"dragEndNode\",\"_endDragAfter\",\"startDrag\",\"getPointerPosition\",\"ap\",\"stopDrag\",\"dbf\",\"getDragBoundFunc\",\"newNodePos\",\"setDraggable\",\"draggable\",\"_dragChange\",\"origDestroy\",\"_listenDrag\",\"_dragCleanup\",\"getDraggable\",\"html\",\"getElementsByTagName\",\"addEventListener\",\"hasChildren\",\"removeChildren\",\"destroyChildren\",\"_validateAdd\",\"find\",\"selectorArr\",\"sel\",\"clen\",\"_getNodeById\",\"_getNodesByName\",\"isAncestorOf\",\"_getDescendants\",\"getAllIntersections\",\"intersects\",\"hasClip\",\"hitCanvas\",\"HAS_SHADOW\",\"_clearHasShadowCache\",\"_setDrawFuncs\",\"_hasShadow\",\"getShadowOffsetX\",\"getShadowOffsetY\",\"enableFill\",\"disableFill\",\"enableStroke\",\"disableStroke\",\"enableStrokeScale\",\"disableStrokeScale\",\"enableShadow\",\"disableShadow\",\"enableDashArray\",\"disableDashArray\",\"getDrawFunc\",\"drawHitFunc\",\"setDrawFunc\",\"setDrawHitFunc\",\"STRING\",\"PX\",\"MOUSEOUT\",\"MOUSEOVER\",\"MOUSEMOVE\",\"MOUSEDOWN\",\"MOUSEUP\",\"CLICK\",\"DBL_CLICK\",\"TOUCHSTART\",\"TOUCHEND\",\"TAP\",\"DBL_TAP\",\"TOUCHMOVE\",\"CONTENT_MOUSEOUT\",\"CONTENT_MOUSELEAVE\",\"CONTENT_MOUSEOVER\",\"CONTENT_MOUSEENTER\",\"CONTENT_MOUSEMOVE\",\"CONTENT_MOUSEDOWN\",\"CONTENT_MOUSEUP\",\"CONTENT_CLICK\",\"CONTENT_DBL_CLICK\",\"CONTENT_TOUCHSTART\",\"CONTENT_TOUCHEND\",\"CONTENT_TAP\",\"CONTENT_DBL_TAP\",\"CONTENT_TOUCHMOVE\",\"DIV\",\"RELATIVE\",\"INLINE_BLOCK\",\"KINETICJS_CONTENT\",\"UNDERSCORE\",\"CONTAINER\",\"EVENTS\",\"eventsLength\",\"addEvent\",\"ctx\",\"eventName\",\"content\",\"_buildDOM\",\"_bindContentEvents\",\"setContainer\",\"getElementById\",\"_resizeDOM\",\"getContainer\",\"removeChild\",\"getMousePosition\",\"mousePos\",\"getTouchPosition\",\"touchPos\",\"getContent\",\"drawLayer\",\"layerUrl\",\"cb\",\"getIntersection\",\"bufferCanvas\",\"appendChild\",\"_setPointerPosition\",\"_setMousePosition\",\"_setTouchPosition\",\"_mouseover\",\"_mouseout\",\"targetShape\",\"_mousemove\",\"pixel\",\"preventDefault\",\"_mousedown\",\"clickStartShape\",\"_mouseup\",\"fireDblClick\",\"_touchstart\",\"tapStartShape\",\"_touchend\",\"_touchmove\",\"mouseX\",\"layerX\",\"clientX\",\"_getContentPosition\",\"mouseY\",\"layerY\",\"clientY\",\"touch\",\"touchX\",\"touchY\",\"touches\",\"getBoundingClientRect\",\"innerHTML\",\"display\",\"_onContent\",\"typesStr\",\"types\",\"BEFORE_DRAW\",\"DRAW\",\"getClearBeforeDraw\",\"getHitCanvas\",\"hitContext\",\"insertBefore\",\"Rect\",\"cornerRadius\",\"getCornerRadius\",\"PIx2\",\"CIRCLE\",\"Circle\",\"getRadius\",\"setRadius\",\"ELLIPSE\",\"Ellipse\",\"Wedge\",\"getAngle\",\"getClockwise\",\"IMAGE\",\"CROP\",\"params\",\"cropX\",\"getCropX\",\"cropY\",\"getCropY\",\"cropWidth\",\"getCropWidth\",\"cropHeight\",\"getCropHeight\",\"image\",\"getFilter\",\"_applyFilter\",\"applyFilter\",\"filterCanvas\",\"getImage\",\"imageHitRegion\",\"filter\",\"imageData\",\"clearFilter\",\"createImageHitRegion\",\"rgbColorKey\",\"clearImageHitRegion\",\"addFilterGetterSetter\",\"addFilterSetter\",\"Polygon\",\"getPoints\",\"AUTO\",\"CALIBRI\",\"CENTER\",\"CHANGE_KINETIC\",\"DASH\",\"LEFT\",\"NEW_LINE\",\"TEXT\",\"TEXT_UPPER\",\"TOP\",\"MIDDLE\",\"NORMAL\",\"PX_SPACE\",\"RIGHT\",\"WORD\",\"CHAR\",\"NONE\",\"ATTR_CHANGE_LIST\",\"attrChangeListLen\",\"dummyContext\",\"Text\",\"partialText\",\"_setTextData\",\"getPadding\",\"fontStyle\",\"getFontStyle\",\"fontSize\",\"getFontSize\",\"fontFamily\",\"getFontFamily\",\"textHeight\",\"getTextHeight\",\"lineHeightPx\",\"getLineHeight\",\"textArr\",\"textArrLen\",\"totalWidth\",\"_getContextFont\",\"text\",\"getAlign\",\"setText\",\"getTextWidth\",\"textWidth\",\"_getTextSize\",\"metrics\",\"font\",\"measureText\",\"_addTextLine\",\"line\",\"_getTextWidth\",\"lines\",\"getText\",\"fixedWidth\",\"fixedHeight\",\"maxWidth\",\"maxHeightPx\",\"currentHeightPx\",\"wrap\",\"getWrap\",\"shouldWrap\",\"wrapAtWord\",\"max\",\"lineWidth\",\"low\",\"high\",\"matchWidth\",\"mid\",\"substrWidth\",\"wrapIndex\",\"lastIndexOf\",\"Line\",\"point\",\"Spline\",\"_setAllPoints\",\"getTension\",\"Blob\",\"firstControlPoints\",\"lastControlPoints\",\"Sprite\",\"setIndex\",\"getAnimation\",\"getIndex\",\"f\",\"getAnimations\",\"interval\",\"setInterval\",\"_updateIndex\",\"afterFrameFunc\",\"afterFrameIndex\",\"getFrameRate\",\"clearInterval\",\"afterFrame\",\"animation\",\"Path\",\"dataArray\",\"parsePathData\",\"getData\",\"ca\",\"closedPath\",\"command\",\"cx\",\"cy\",\"rx\",\"ry\",\"dTheta\",\"psi\",\"fs\",\"getLineLength\",\"getPointOnLine\",\"dist\",\"P1x\",\"P1y\",\"P2x\",\"P2y\",\"fromX\",\"fromY\",\"run\",\"rise\",\"pt\",\"ix\",\"iy\",\"u\",\"pRise\",\"pRun\",\"getPointOnCubicBezier\",\"pct\",\"P3x\",\"P3y\",\"P4x\",\"P4y\",\"CB1\",\"CB2\",\"CB3\",\"CB4\",\"getPointOnQuadraticBezier\",\"QB1\",\"QB2\",\"QB3\",\"getPointOnEllipticalArc\",\"cosPsi\",\"sinPsi\",\"cs\",\"cc\",\"RegExp\",\"cpx\",\"cpy\",\"parseFloat\",\"isNaN\",\"cmd\",\"startX\",\"startY\",\"prevCmd\",\"ctlPtx\",\"ctlPty\",\"convertEndpointToCenterParameterization\",\"pathLength\",\"calcLength\",\"path\",\"inc\",\"psiDeg\",\"xp\",\"yp\",\"lambda\",\"cxp\",\"cyp\",\"vMag\",\"v\",\"vRatio\",\"vAngle\",\"acos\",\"TextPath\",\"dummyCanvas\",\"charArr\",\"glyphInfo\",\"ht\",\"pathCmd\",\"pIndex\",\"currentT\",\"getNextPathSegment\",\"pathData\",\"findSegmentToFitCharacter\",\"before\",\"glyphWidth\",\"currLen\",\"attempts\",\"needNextSegment\",\"cumulativePathLength\",\"needNewSegment\",\"kern\",\"midpoint\",\"atan2\",\"transposeX\",\"transposeY\",\"RegularPolygon\",\"sides\",\"radius\",\"Star\",\"innerRadius\",\"outerRadius\",\"numPoints\",\"UP\",\"DOWN\",\"LABEL\",\"Label\",\"____init\",\"_sync\",\"getTag\",\"tag\",\"pointerDirection\",\"pointerWidth\",\"getPointerDirection\",\"getPointerWidth\",\"pointerHeight\",\"getPointerHeight\",\"Tag\",\"Grayscale\",\"brightness\",\"Brighten\",\"getFilterBrightness\",\"Invert\",\"BlurStack\",\"next\",\"mul_table\",\"shg_table\",\"filterGaussBlurRGBA\",\"pixels\",\"yi\",\"yw\",\"r_sum\",\"g_sum\",\"b_sum\",\"a_sum\",\"r_out_sum\",\"g_out_sum\",\"b_out_sum\",\"a_out_sum\",\"r_in_sum\",\"g_in_sum\",\"b_in_sum\",\"a_in_sum\",\"pr\",\"pg\",\"pb\",\"pa\",\"rbs\",\"div\",\"widthMinus1\",\"heightMinus1\",\"radiusPlus1\",\"sumFactor\",\"stackStart\",\"stackEnd\",\"stack\",\"stackIn\",\"stackOut\",\"mul_sum\",\"shg_sum\",\"Blur\",\"getFilterRadius\",\"pixelAt\",\"idata\",\"idx\",\"rgbDistance\",\"rgbMean\",\"pTab\",\"backgroundMask\",\"threshold\",\"rgbv_no\",\"rgbv_ne\",\"rgbv_so\",\"rgbv_se\",\"thres\",\"mean\",\"mask\",\"applyMask\",\"erodeMask\",\"sw\",\"sh\",\"weights\",\"side\",\"halfSide\",\"floor\",\"maskResult\",\"so\",\"scy\",\"scx\",\"srcOff\",\"wt\",\"dilateMask\",\"smoothEdgeMask\",\"Mask\",\"getFilterThreshold\",\"rgb_to_hsl\",\"min\",\"chroma\",\"luminance\",\"saturation\",\"hue\",\"pixelShiftHue\",\"rR\",\"rG\",\"rB\",\"tmp\",\"shift_hue\",\"ShiftHue\",\"getFilterHueShiftDeg\",\"Colorize\",\"getFilterColorizeColor\",\"hsl\",\"convolve_internal\",\"imageSizeX\",\"imageSizeY\",\"nPixels\",\"result\",\"matrixSizeX\",\"matrixSizeY\",\"matrixMidX\",\"matrixMidY\",\"px\",\"py\",\"j\",\"lastPos\",\"gaussian\",\"sigma\",\"E\",\"make_blur_kernel\",\"kernel\",\"row\",\"make_edge_detect_kernel\",\"g1\",\"g2\",\"make_soft_blur_kernel\",\"percent\",\"make_unsharp_kernel\",\"UnsharpMask\",\"getFilterAmount\",\"SoftBlur\",\"Edge\",\"Emboss\"],\"mappings\":\"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\"}","lineCount":6335,"mtime":1388978896000,"deps":[],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"/*\r\n * KineticJS JavaScript Framework v4.7.1\r\n * http://www.kineticjs.com/\r\n * Copyright 2013, Eric Rowell\r\n * Licensed under the MIT or GPL Version 2 licenses.\r\n * Date: 2013-09-23\r\n *\r\n * Copyright (C) 2011 - 2013 by Eric Rowell\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n * of this software and associated documentation files (the \"Software\"), to deal\r\n * in the Software without restriction, including without limitation the rights\r\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the Software is\r\n * furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in\r\n * all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n * THE SOFTWARE.\r\n */\r\n/**\r\n * @namespace Kinetic\r\n */\r\nvar Kinetic = {};\r\n\r\n(function() {\r\n    Kinetic = {\r\n        // public\r\n        version: '4.7.1',\r\n\r\n        // private\r\n        stages: [],\r\n        idCounter: 0,\r\n        ids: {},\r\n        names: {},\r\n        shapes: {},\r\n        listenClickTap: false,\r\n        inDblClickWindow: false,\r\n        \r\n        // configurations\r\n        enableTrace: false,\r\n        traceArrMax: 100,\r\n        dblClickWindow: 400,\r\n        pixelRatio: undefined,\r\n\r\n        // user agent  \r\n        UA: (function() {\r\n            var ua = navigator.userAgent.toLowerCase(),\r\n                // jQuery UA regex\r\n                match = /(chrome)[ \\/]([\\w.]+)/.exec( ua ) ||\r\n                /(webkit)[ \\/]([\\w.]+)/.exec( ua ) ||\r\n                /(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec( ua ) ||\r\n                /(msie) ([\\w.]+)/.exec( ua ) ||\r\n                ua.indexOf(\"compatible\") < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec( ua ) ||\r\n                [];\r\n\r\n            return {\r\n                browser: match[ 1 ] || '',\r\n                version: match[ 2 ] || '0'\r\n            };\r\n        })(),\r\n\r\n        /**\r\n         * @namespace Filters\r\n         * @memberof Kinetic\r\n         */\r\n        Filters: {},\r\n\r\n        /**\r\n         * Node constructor. Nodes are entities that can be transformed, layered,\r\n         * and have bound events. The stage, layers, groups, and shapes all extend Node.\r\n         * @constructor\r\n         * @memberof Kinetic\r\n         * @abstract\r\n         * @param {Object} config\r\n         * @param {Number} [config.x]\r\n     * @param {Number} [config.y]\r\n     * @param {Number} [config.width]\r\n     * @param {Number} [config.height]\r\n     * @param {Boolean} [config.visible]\r\n     * @param {Boolean} [config.listening] whether or not the node is listening for events\r\n     * @param {String} [config.id] unique id\r\n     * @param {String} [config.name] non-unique name\r\n     * @param {Number} [config.opacity] determines node opacity.  Can be any number between 0 and 1\r\n     * @param {Object} [config.scale] set scale\r\n     * @param {Number} [config.scaleX] set scale x\r\n     * @param {Number} [config.scaleY] set scale y\r\n     * @param {Number} [config.rotation] rotation in radians\r\n     * @param {Number} [config.rotationDeg] rotation in degrees\r\n     * @param {Object} [config.offset] offset from center point and rotation point\r\n     * @param {Number} [config.offsetX] set offset x\r\n     * @param {Number} [config.offsetY] set offset y\r\n     * @param {Boolean} [config.draggable] makes the node draggable.  When stages are draggable, you can drag and drop\r\n     *  the entire stage by dragging any portion of the stage\r\n     * @param {Function} [config.dragBoundFunc]\r\n         */\r\n        Node: function(config) {\r\n            this._init(config);\r\n        },\r\n\r\n        /**\r\n         * Shape constructor.  Shapes are primitive objects such as rectangles,\r\n         *  circles, text, lines, etc.\r\n         * @constructor\r\n         * @memberof Kinetic\r\n         * @augments Kinetic.Node\r\n         * @param {Object} config\r\n         * @param {String} [config.fill] fill color\r\n     * @param {Object} [config.fillRGB] set fill color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.fillR] set fill red component\r\n     * @param {Integer} [config.fillG] set fill green component\r\n     * @param {Integer} [config.fillB] set fill blue component\r\n     * @param {Image} [config.fillPatternImage] fill pattern image\r\n     * @param {Number} [config.fillPatternX]\r\n     * @param {Number} [config.fillPatternY]\r\n     * @param {Number|Array|Object} [config.fillPatternOffset] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillPatternOffsetX] \r\n     * @param {Number} [config.fillPatternOffsetY] \r\n     * @param {Number|Array|Object} [config.fillPatternScale] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillPatternScaleX]\r\n     * @param {Number} [config.fillPatternScaleY]\r\n     * @param {Number} [config.fillPatternRotation]\r\n     * @param {String} [config.fillPatternRepeat] can be 'repeat', 'repeat-x', 'repeat-y', or 'no-repeat'.  The default is 'no-repeat'\r\n     * @param {Number|Array|Object} [config.fillLinearGradientStartPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillLinearGradientStartPointX]\r\n     * @param {Number} [config.fillLinearGradientStartPointY]\r\n     * @param {Number|Array|Object} [config.fillLinearGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number|Array|Object} [config.fillLinearGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillLinearGradientEndPointX]\r\n     * @param {Number} [config.fillLinearGradientEndPointY]\r\n     * @param {Array} [config.fillLinearGradientColorStops] array of color stops\r\n     * @param {Number|Array|Object} [config.fillRadialGradientStartPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillRadialGradientStartPointX]\r\n     * @param {Number} [config.fillRadialGradientStartPointY]\r\n     * @param {Number|Array|Object} [config.fillRadialGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillRadialGradientEndPointX] \r\n     * @param {Number} [config.fillRadialGradientEndPointY] \r\n     * @param {Number} [config.fillRadialGradientStartRadius]\r\n     * @param {Number} [config.fillRadialGradientEndRadius]\r\n     * @param {Array} [config.fillRadialGradientColorStops] array of color stops\r\n     * @param {Boolean} [config.fillEnabled] flag which enables or disables the fill.  The default value is true\r\n     * @param {String} [config.fillPriority] can be color, linear-gradient, radial-graident, or pattern.  The default value is color.  The fillPriority property makes it really easy to toggle between different fill types.  For example, if you want to toggle between a fill color style and a fill pattern style, simply set the fill property and the fillPattern properties, and then use setFillPriority('color') to render the shape with a color fill, or use setFillPriority('pattern') to render the shape with the pattern fill configuration\r\n     * @param {String} [config.stroke] stroke color\r\n     * @param {Object} [config.strokeRGB] set stroke color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.strokeR] set stroke red component\r\n     * @param {Integer} [config.strokeG] set stroke green component\r\n     * @param {Integer} [config.strokeB] set stroke blue component\r\n     * @param {Number} [config.strokeWidth] stroke width\r\n     * @param {Boolean} [config.strokeScaleEnabled] flag which enables or disables stroke scale.  The default is true\r\n     * @param {Boolean} [config.strokeEnabled] flag which enables or disables the stroke.  The default value is true\r\n     * @param {String} [config.lineJoin] can be miter, round, or bevel.  The default\r\n     *  is miter\r\n     * @param {String} [config.lineCap] can be butt, round, or sqare.  The default\r\n     *  is butt\r\n     * @param {String} [config.shadowColor]\r\n     * @param {Object} [config.shadowColorRGB] set shadowColor color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.shadowColorR] set shadowColor red component\r\n     * @param {Integer} [config.shadowColorG] set shadowColor green component\r\n     * @param {Integer} [config.shadowColorB] set shadowColor blue component\r\n     * @param {Number} [config.shadowBlur]\r\n     * @param {Object} [config.shadowOffset]\r\n     * @param {Number} [config.shadowOffsetX]\r\n     * @param {Number} [config.shadowOffsetY]\r\n     * @param {Number} [config.shadowOpacity] shadow opacity.  Can be any real number\r\n     *  between 0 and 1\r\n     * @param {Boolean} [config.shadowEnabled] flag which enables or disables the shadow.  The default value is true\r\n     * @param {Array} [config.dashArray]\r\n     * @param {Boolean} [config.dashArrayEnabled] flag which enables or disables the dashArray.  The default value is true\r\n         * @param {Number} [config.x]\r\n     * @param {Number} [config.y]\r\n     * @param {Number} [config.width]\r\n     * @param {Number} [config.height]\r\n     * @param {Boolean} [config.visible]\r\n     * @param {Boolean} [config.listening] whether or not the node is listening for events\r\n     * @param {String} [config.id] unique id\r\n     * @param {String} [config.name] non-unique name\r\n     * @param {Number} [config.opacity] determines node opacity.  Can be any number between 0 and 1\r\n     * @param {Object} [config.scale] set scale\r\n     * @param {Number} [config.scaleX] set scale x\r\n     * @param {Number} [config.scaleY] set scale y\r\n     * @param {Number} [config.rotation] rotation in radians\r\n     * @param {Number} [config.rotationDeg] rotation in degrees\r\n     * @param {Object} [config.offset] offset from center point and rotation point\r\n     * @param {Number} [config.offsetX] set offset x\r\n     * @param {Number} [config.offsetY] set offset y\r\n     * @param {Boolean} [config.draggable] makes the node draggable.  When stages are draggable, you can drag and drop\r\n     *  the entire stage by dragging any portion of the stage\r\n     * @param {Function} [config.dragBoundFunc]\r\n         * @example\r\n         * var customShape = new Kinetic.Shape({<br>\r\n         *   x: 5,<br>\r\n         *   y: 10,<br>\r\n         *   fill: 'red',<br>\r\n         *   // a Kinetic.Canvas renderer is passed into the drawFunc function<br>\r\n         *   drawFunc: function(context) {<br>\r\n         *     context.beginPath();<br>\r\n         *     context.moveTo(200, 50);<br>\r\n         *     context.lineTo(420, 80);<br>\r\n         *     context.quadraticCurveTo(300, 100, 260, 170);<br>\r\n         *     context.closePath();<br>\r\n         *     context.fillStrokeShape(this);<br>\r\n         *   }<br>\r\n         *});\r\n         */\r\n        Shape: function(config) {\r\n            this.__init(config);\r\n        },\r\n\r\n        /**\r\n         * Container constructor.&nbsp; Containers are used to contain nodes or other containers\r\n         * @constructor\r\n         * @memberof Kinetic\r\n         * @augments Kinetic.Node\r\n         * @abstract\r\n         * @param {Object} config\r\n         * @param {Number} [config.x]\r\n     * @param {Number} [config.y]\r\n     * @param {Number} [config.width]\r\n     * @param {Number} [config.height]\r\n     * @param {Boolean} [config.visible]\r\n     * @param {Boolean} [config.listening] whether or not the node is listening for events\r\n     * @param {String} [config.id] unique id\r\n     * @param {String} [config.name] non-unique name\r\n     * @param {Number} [config.opacity] determines node opacity.  Can be any number between 0 and 1\r\n     * @param {Object} [config.scale] set scale\r\n     * @param {Number} [config.scaleX] set scale x\r\n     * @param {Number} [config.scaleY] set scale y\r\n     * @param {Number} [config.rotation] rotation in radians\r\n     * @param {Number} [config.rotationDeg] rotation in degrees\r\n     * @param {Object} [config.offset] offset from center point and rotation point\r\n     * @param {Number} [config.offsetX] set offset x\r\n     * @param {Number} [config.offsetY] set offset y\r\n     * @param {Boolean} [config.draggable] makes the node draggable.  When stages are draggable, you can drag and drop\r\n     *  the entire stage by dragging any portion of the stage\r\n     * @param {Function} [config.dragBoundFunc]\r\n         * @param {Function} [config.clipFunc] clipping function\r\n\r\n         */\r\n        Container: function(config) {\r\n            this.__init(config);\r\n        },\r\n\r\n        /**\r\n         * Stage constructor.  A stage is used to contain multiple layers\r\n         * @constructor\r\n         * @memberof Kinetic\r\n         * @augments Kinetic.Container\r\n         * @param {Object} config\r\n         * @param {String|DomElement} config.container Container id or DOM element\r\n         * @param {Number} [config.x]\r\n     * @param {Number} [config.y]\r\n     * @param {Number} [config.width]\r\n     * @param {Number} [config.height]\r\n     * @param {Boolean} [config.visible]\r\n     * @param {Boolean} [config.listening] whether or not the node is listening for events\r\n     * @param {String} [config.id] unique id\r\n     * @param {String} [config.name] non-unique name\r\n     * @param {Number} [config.opacity] determines node opacity.  Can be any number between 0 and 1\r\n     * @param {Object} [config.scale] set scale\r\n     * @param {Number} [config.scaleX] set scale x\r\n     * @param {Number} [config.scaleY] set scale y\r\n     * @param {Number} [config.rotation] rotation in radians\r\n     * @param {Number} [config.rotationDeg] rotation in degrees\r\n     * @param {Object} [config.offset] offset from center point and rotation point\r\n     * @param {Number} [config.offsetX] set offset x\r\n     * @param {Number} [config.offsetY] set offset y\r\n     * @param {Boolean} [config.draggable] makes the node draggable.  When stages are draggable, you can drag and drop\r\n     *  the entire stage by dragging any portion of the stage\r\n     * @param {Function} [config.dragBoundFunc]\r\n         * @param {Function} [config.clipFunc] clipping function\r\n\r\n         * @example\r\n         * var stage = new Kinetic.Stage({<br>\r\n         *   width: 500,<br>\r\n         *   height: 800,<br>\r\n         *   container: 'containerId'<br>\r\n         * });\r\n         */\r\n        Stage: function(config) {\r\n            this.___init(config);\r\n        },\r\n\r\n        /**\r\n         * Layer constructor.  Layers are tied to their own canvas element and are used\r\n         * to contain groups or shapes\r\n         * @constructor\r\n         * @memberof Kinetic\r\n         * @augments Kinetic.Container\r\n         * @param {Object} config\r\n         * @param {Boolean} [config.clearBeforeDraw] set this property to false if you don't want\r\n         * to clear the canvas before each layer draw.  The default value is true.\r\n         * @param {Number} [config.x]\r\n     * @param {Number} [config.y]\r\n     * @param {Number} [config.width]\r\n     * @param {Number} [config.height]\r\n     * @param {Boolean} [config.visible]\r\n     * @param {Boolean} [config.listening] whether or not the node is listening for events\r\n     * @param {String} [config.id] unique id\r\n     * @param {String} [config.name] non-unique name\r\n     * @param {Number} [config.opacity] determines node opacity.  Can be any number between 0 and 1\r\n     * @param {Object} [config.scale] set scale\r\n     * @param {Number} [config.scaleX] set scale x\r\n     * @param {Number} [config.scaleY] set scale y\r\n     * @param {Number} [config.rotation] rotation in radians\r\n     * @param {Number} [config.rotationDeg] rotation in degrees\r\n     * @param {Object} [config.offset] offset from center point and rotation point\r\n     * @param {Number} [config.offsetX] set offset x\r\n     * @param {Number} [config.offsetY] set offset y\r\n     * @param {Boolean} [config.draggable] makes the node draggable.  When stages are draggable, you can drag and drop\r\n     *  the entire stage by dragging any portion of the stage\r\n     * @param {Function} [config.dragBoundFunc]\r\n         * @param {Function} [config.clipFunc] clipping function\r\n\r\n         * @example\r\n         * var layer = new Kinetic.Layer();\r\n         */\r\n        Layer: function(config) {\r\n            this.___init(config);\r\n        },\r\n\r\n        /**\r\n         * Group constructor.  Groups are used to contain shapes or other groups.\r\n         * @constructor\r\n         * @memberof Kinetic\r\n         * @augments Kinetic.Container\r\n         * @param {Object} config\r\n         * @param {Number} [config.x]\r\n     * @param {Number} [config.y]\r\n     * @param {Number} [config.width]\r\n     * @param {Number} [config.height]\r\n     * @param {Boolean} [config.visible]\r\n     * @param {Boolean} [config.listening] whether or not the node is listening for events\r\n     * @param {String} [config.id] unique id\r\n     * @param {String} [config.name] non-unique name\r\n     * @param {Number} [config.opacity] determines node opacity.  Can be any number between 0 and 1\r\n     * @param {Object} [config.scale] set scale\r\n     * @param {Number} [config.scaleX] set scale x\r\n     * @param {Number} [config.scaleY] set scale y\r\n     * @param {Number} [config.rotation] rotation in radians\r\n     * @param {Number} [config.rotationDeg] rotation in degrees\r\n     * @param {Object} [config.offset] offset from center point and rotation point\r\n     * @param {Number} [config.offsetX] set offset x\r\n     * @param {Number} [config.offsetY] set offset y\r\n     * @param {Boolean} [config.draggable] makes the node draggable.  When stages are draggable, you can drag and drop\r\n     *  the entire stage by dragging any portion of the stage\r\n     * @param {Function} [config.dragBoundFunc]\r\n         * @param {Function} [config.clipFunc] clipping function\r\n\r\n         * @example\r\n         * var group = new Kinetic.Group();\r\n         */\r\n        Group: function(config) {\r\n            this.___init(config);\r\n        },\r\n\r\n        /**\r\n         * returns whether or not drag and drop is currently active\r\n         * @method\r\n         * @memberof Kinetic\r\n         */\r\n        isDragging: function() {\r\n            var dd = Kinetic.DD;\r\n\r\n            // if DD is not included with the build, then\r\n            // drag and drop is not even possible\r\n            if (!dd) {\r\n                return false;\r\n            }\r\n            // if DD is included with the build\r\n            else {\r\n                return dd.isDragging;\r\n            }\r\n        },\r\n        /**\r\n        * returns whether or not a drag and drop operation is ready, but may\r\n        *  not necessarily have started\r\n        * @method\r\n        * @memberof Kinetic\r\n        */\r\n        isDragReady: function() {\r\n            var dd = Kinetic.DD;\r\n\r\n            // if DD is not included with the build, then\r\n            // drag and drop is not even possible\r\n            if (!dd) {\r\n                return false;\r\n            }\r\n            // if DD is included with the build\r\n            else {\r\n                return !!dd.node;\r\n            }\r\n        },\r\n        _addId: function(node, id) {\r\n            if(id !== undefined) {\r\n                this.ids[id] = node;\r\n            }\r\n        },\r\n        _removeId: function(id) {\r\n            if(id !== undefined) {\r\n                delete this.ids[id];\r\n            }\r\n        },\r\n        _addName: function(node, name) {\r\n            if(name !== undefined) {\r\n                if(this.names[name] === undefined) {\r\n                    this.names[name] = [];\r\n                }\r\n                this.names[name].push(node);\r\n            }\r\n        },\r\n        _removeName: function(name, _id) {\r\n            if(name !== undefined) {\r\n                var nodes = this.names[name];\r\n                if(nodes !== undefined) {\r\n                    for(var n = 0; n < nodes.length; n++) {\r\n                        var no = nodes[n];\r\n                        if(no._id === _id) {\r\n                            nodes.splice(n, 1);\r\n                        }\r\n                    }\r\n                    if(nodes.length === 0) {\r\n                        delete this.names[name];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n})();\r\n\r\n// Uses Node, AMD or browser globals to create a module.\r\n\r\n// If you want something that will work in other stricter CommonJS environments,\r\n// or if you need to create a circular dependency, see commonJsStrict.js\r\n\r\n// Defines a module \"returnExports\" that depends another module called \"b\".\r\n// Note that the name of the module is implied by the file name. It is best\r\n// if the file name and the exported global have matching names.\r\n\r\n// If the 'b' module also uses this type of boilerplate, then\r\n// in the browser, it will create a global .b that is used below.\r\n\r\n// If you do not want to support the browser global path, then you\r\n// can remove the `root` use and the passing `this` as the first arg to\r\n// the top function.\r\n\r\n// if the module has no dependencies, the above pattern can be simplified to\r\n( function(root, factory) {\r\n    if( typeof exports === 'object') {\r\n        // Node. Does not work with strict CommonJS, but\r\n        // only CommonJS-like enviroments that support module.exports,\r\n        // like Node.\r\n        module.exports = factory();\r\n    }\r\n    else if( typeof define === 'function' && define.amd) {\r\n        // AMD. Register as an anonymous module.\r\n        define(factory);\r\n    }\r\n    else {\r\n        // Browser globals (root is window)\r\n        root.returnExports = factory();\r\n    }\r\n}(this, function() {\r\n\r\n    // Just return a value to define the module export.\r\n    // This example returns an object, but the module\r\n    // can return a function as the exported value.\r\n    return Kinetic;\r\n}));\r\n;(function() {\r\n    /**\r\n     * Collection constructor.  Collection extends\r\n     *  Array.  This class is used in conjunction with {@link Kinetic.Container#get}\r\n     * @constructor\r\n     * @memberof Kinetic\r\n     */\r\n    Kinetic.Collection = function() {\r\n        var args = [].slice.call(arguments), length = args.length, i = 0;\r\n\r\n        this.length = length;\r\n        for(; i < length; i++) {\r\n            this[i] = args[i];\r\n        }\r\n        return this;\r\n    };\r\n    Kinetic.Collection.prototype = [];\r\n    /**\r\n     * iterate through node array and run a function for each node.\r\n     *  The node and index is passed into the function\r\n     * @method\r\n     * @memberof Kinetic.Collection.prototype\r\n     * @param {Function} func\r\n     * @example\r\n     * // get all nodes with name foo inside layer, and set x to 10 for each\r\n     * layer.get('.foo').each(function(shape, n) {<br>\r\n     *   shape.setX(10);<br>\r\n     * });\r\n     */\r\n    Kinetic.Collection.prototype.each = function(func) {\r\n        for(var n = 0; n < this.length; n++) {\r\n            func(this[n], n);\r\n        }\r\n    };\r\n    /**\r\n     * convert collection into an array\r\n     * @method\r\n     * @memberof Kinetic.Collection.prototype\r\n     */\r\n    Kinetic.Collection.prototype.toArray = function() {\r\n        var arr = [],\r\n            len = this.length,\r\n            n;\r\n\r\n        for(n = 0; n < len; n++) {\r\n            arr.push(this[n]);\r\n        }\r\n        return arr;\r\n    };\r\n    /**\r\n     * convert array into a collection\r\n     * @method\r\n     * @memberof Kinetic.Collection\r\n     * @param {Array} arr\r\n     */\r\n    Kinetic.Collection.toCollection = function(arr) {\r\n        var collection = new Kinetic.Collection(),\r\n            len = arr.length,\r\n            n;\r\n\r\n        for(n = 0; n < len; n++) {\r\n            collection.push(arr[n]);\r\n        }\r\n        return collection;\r\n    };\r\n\r\n    Kinetic.Collection.mapMethods = function(arr) {\r\n        var leng = arr.length,\r\n            n;\r\n\r\n        for(n = 0; n < leng; n++) {\r\n            // induce scope\r\n            (function(i) {\r\n                var method = arr[i];\r\n                Kinetic.Collection.prototype[method] = function() {\r\n                    var len = this.length,\r\n                        i;\r\n\r\n                    args = [].slice.call(arguments);\r\n                    for(i = 0; i < len; i++) {\r\n                        this[i][method].apply(this[i], args);\r\n                    }\r\n                };\r\n            })(n);\r\n        }\r\n    };\r\n\r\n    /*\r\n    * Last updated November 2011\r\n    * By Simon Sarris\r\n    * www.simonsarris.com\r\n    * sarris@acm.org\r\n    *\r\n    * Free to use and distribute at will\r\n    * So long as you are nice to people, etc\r\n    */\r\n\r\n    /*\r\n    * The usage of this class was inspired by some of the work done by a forked\r\n    * project, KineticJS-Ext by Wappworks, which is based on Simon's Transform\r\n    * class.  Modified by Eric Rowell\r\n    */\r\n\r\n    /**\r\n     * Transform constructor\r\n     * @constructor\r\n     * @memberof Kinetic\r\n     */\r\n    Kinetic.Transform = function() {\r\n        this.m = [1, 0, 0, 1, 0, 0];\r\n    };\r\n\r\n    Kinetic.Transform.prototype = {\r\n        /**\r\n         * Apply translation\r\n         * @method\r\n         * @memberof Kinetic.Transform.prototype\r\n         * @param {Number} x\r\n         * @param {Number} y\r\n         */\r\n        translate: function(x, y) {\r\n            this.m[4] += this.m[0] * x + this.m[2] * y;\r\n            this.m[5] += this.m[1] * x + this.m[3] * y;\r\n        },\r\n        /**\r\n         * Apply scale\r\n         * @method\r\n         * @memberof Kinetic.Transform.prototype\r\n         * @param {Number} sx\r\n         * @param {Number} sy\r\n         */\r\n        scale: function(sx, sy) {\r\n            this.m[0] *= sx;\r\n            this.m[1] *= sx;\r\n            this.m[2] *= sy;\r\n            this.m[3] *= sy;\r\n        },\r\n        /**\r\n         * Apply rotation\r\n         * @method\r\n         * @memberof Kinetic.Transform.prototype\r\n         * @param {Number} rad  Angle in radians\r\n         */\r\n        rotate: function(rad) {\r\n            var c = Math.cos(rad);\r\n            var s = Math.sin(rad);\r\n            var m11 = this.m[0] * c + this.m[2] * s;\r\n            var m12 = this.m[1] * c + this.m[3] * s;\r\n            var m21 = this.m[0] * -s + this.m[2] * c;\r\n            var m22 = this.m[1] * -s + this.m[3] * c;\r\n            this.m[0] = m11;\r\n            this.m[1] = m12;\r\n            this.m[2] = m21;\r\n            this.m[3] = m22;\r\n        },\r\n        /**\r\n         * Returns the translation\r\n         * @method\r\n         * @memberof Kinetic.Transform.prototype\r\n         * @returns {Object} 2D point(x, y)\r\n         */\r\n        getTranslation: function() {\r\n            return {\r\n                x: this.m[4],\r\n                y: this.m[5]\r\n            };\r\n        },\r\n        /**\r\n         * Apply skew\r\n         * @method\r\n         * @memberof Kinetic.Transform.prototype\r\n         * @param {Number} sx\r\n         * @param {Number} sy\r\n         */\r\n        skew: function(sx, sy) {\r\n            var m11 = this.m[0] + this.m[2] * sy;\r\n            var m12 = this.m[1] + this.m[3] * sy;\r\n            var m21 = this.m[2] + this.m[0] * sx;\r\n            var m22 = this.m[3] + this.m[1] * sx;\r\n            this.m[0] = m11;\r\n            this.m[1] = m12;\r\n            this.m[2] = m21;\r\n            this.m[3] = m22;\r\n         },\r\n        /**\r\n         * Transform multiplication\r\n         * @method\r\n         * @memberof Kinetic.Transform.prototype\r\n         * @param {Kinetic.Transform} matrix\r\n         */\r\n        multiply: function(matrix) {\r\n            var m11 = this.m[0] * matrix.m[0] + this.m[2] * matrix.m[1];\r\n            var m12 = this.m[1] * matrix.m[0] + this.m[3] * matrix.m[1];\r\n\r\n            var m21 = this.m[0] * matrix.m[2] + this.m[2] * matrix.m[3];\r\n            var m22 = this.m[1] * matrix.m[2] + this.m[3] * matrix.m[3];\r\n\r\n            var dx = this.m[0] * matrix.m[4] + this.m[2] * matrix.m[5] + this.m[4];\r\n            var dy = this.m[1] * matrix.m[4] + this.m[3] * matrix.m[5] + this.m[5];\r\n\r\n            this.m[0] = m11;\r\n            this.m[1] = m12;\r\n            this.m[2] = m21;\r\n            this.m[3] = m22;\r\n            this.m[4] = dx;\r\n            this.m[5] = dy;\r\n        },\r\n        /**\r\n         * Invert the matrix\r\n         * @method\r\n         * @memberof Kinetic.Transform.prototype\r\n         */\r\n        invert: function() {\r\n            var d = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]);\r\n            var m0 = this.m[3] * d;\r\n            var m1 = -this.m[1] * d;\r\n            var m2 = -this.m[2] * d;\r\n            var m3 = this.m[0] * d;\r\n            var m4 = d * (this.m[2] * this.m[5] - this.m[3] * this.m[4]);\r\n            var m5 = d * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);\r\n            this.m[0] = m0;\r\n            this.m[1] = m1;\r\n            this.m[2] = m2;\r\n            this.m[3] = m3;\r\n            this.m[4] = m4;\r\n            this.m[5] = m5;\r\n        },\r\n        /**\r\n         * return matrix\r\n         * @method\r\n         * @memberof Kinetic.Transform.prototype\r\n         */\r\n        getMatrix: function() {\r\n            return this.m;\r\n        },\r\n        /**\r\n         * set to absolute position via translation\r\n         * @method\r\n         * @memberof Kinetic.Transform.prototype\r\n         * @author ericdrowell\r\n         */\r\n        setAbsolutePosition: function(x, y) {\r\n            var m0 = this.m[0],\r\n                m1 = this.m[1],\r\n                m2 = this.m[2],\r\n                m3 = this.m[3],\r\n                m4 = this.m[4],\r\n                m5 = this.m[5],\r\n                yt = ((m0 * (y - m5)) - (m1 * (x - m4))) / ((m0 * m3) - (m1 * m2)),\r\n                xt = (x - m4 - (m2 * yt)) / m0;\r\n\r\n            this.translate(xt, yt);\r\n        }\r\n    };\r\n\r\n    // CONSTANTS\r\n    var CANVAS = 'canvas',\r\n        CONTEXT_2D = '2d',\r\n        OBJECT_ARRAY = '[object Array]',\r\n        OBJECT_NUMBER = '[object Number]',\r\n        OBJECT_STRING = '[object String]',\r\n        PI_OVER_DEG180 = Math.PI / 180,\r\n        DEG180_OVER_PI = 180 / Math.PI,\r\n        HASH = '#',\r\n        EMPTY_STRING = '',\r\n        ZERO = '0',\r\n        KINETIC_WARNING = 'Kinetic warning: ',\r\n        KINETIC_ERROR = 'Kinetic error: ',\r\n        RGB_PAREN = 'rgb(',\r\n        COLORS = {\r\n            aqua: [0,255,255],\r\n            lime: [0,255,0],\r\n            silver: [192,192,192],\r\n            black: [0,0,0],\r\n            maroon: [128,0,0],\r\n            teal: [0,128,128],\r\n            blue: [0,0,255],\r\n            navy: [0,0,128],\r\n            white: [255,255,255],\r\n            fuchsia: [255,0,255],\r\n            olive:[128,128,0],\r\n            yellow: [255,255,0],\r\n            orange: [255,165,0],\r\n            gray: [128,128,128],\r\n            purple: [128,0,128],\r\n            green: [0,128,0],\r\n            red: [255,0,0],\r\n            pink: [255,192,203],\r\n            cyan: [0,255,255],\r\n            transparent: [255,255,255,0]\r\n        },\r\n\r\n        RGB_REGEX = /rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)/;\r\n\r\n    /**\r\n     * @namespace Util\r\n     * @memberof Kinetic\r\n     */\r\n    Kinetic.Util = {\r\n        /*\r\n         * cherry-picked utilities from underscore.js\r\n         */\r\n        _isElement: function(obj) {\r\n            return !!(obj && obj.nodeType == 1);\r\n        },\r\n        _isFunction: function(obj) {\r\n            return !!(obj && obj.constructor && obj.call && obj.apply);\r\n        },\r\n        _isObject: function(obj) {\r\n            return (!!obj && obj.constructor == Object);\r\n        },\r\n        _isArray: function(obj) {\r\n            return Object.prototype.toString.call(obj) == OBJECT_ARRAY;\r\n        },\r\n        _isNumber: function(obj) {\r\n            return Object.prototype.toString.call(obj) == OBJECT_NUMBER;\r\n        },\r\n        _isString: function(obj) {\r\n            return Object.prototype.toString.call(obj) == OBJECT_STRING;\r\n        },\r\n        /*\r\n         * other utils\r\n         */\r\n        _hasMethods: function(obj) {\r\n            var names = [],\r\n                key;\r\n\r\n            for(key in obj) {\r\n                if(this._isFunction(obj[key])) {\r\n                    names.push(key);\r\n                }\r\n            }\r\n            return names.length > 0;\r\n        },\r\n        _isInDocument: function(el) {\r\n            while(el = el.parentNode) {\r\n                if(el == document) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        },\r\n        _roundArrValues: function(arr) {\r\n            var retArr = [],\r\n                len = arr.length,\r\n                _isNumber = Kinetic.Util._isNumber,\r\n                n, val;\r\n\r\n            for (n=0; n<len; n++) {\r\n                val = arr[n];\r\n                if (_isNumber(val)) {\r\n                    val = Math.round(val * 1000) / 1000;\r\n                }\r\n                retArr.push(val);\r\n            }\r\n\r\n            return retArr;\r\n        },\r\n        /*\r\n         * The argument can be:\r\n         * - an integer (will be applied to both x and y)\r\n         * - an array of one integer (will be applied to both x and y)\r\n         * - an array of two integers (contains x and y)\r\n         * - an array of four integers (contains x, y, width, and height)\r\n         * - an object with x and y properties\r\n         * - an array of one element which is an array of integers\r\n         * - an array of one element of an object\r\n         */\r\n        _getXY: function(arg) {\r\n            if(this._isNumber(arg)) {\r\n                return {\r\n                    x: arg,\r\n                    y: arg\r\n                };\r\n            }\r\n            else if(this._isArray(arg)) {\r\n                // if arg is an array of one element\r\n                if(arg.length === 1) {\r\n                    var val = arg[0];\r\n                    // if arg is an array of one element which is a number\r\n                    if(this._isNumber(val)) {\r\n                        return {\r\n                            x: val,\r\n                            y: val\r\n                        };\r\n                    }\r\n                    // if arg is an array of one element which is an array\r\n                    else if(this._isArray(val)) {\r\n                        return {\r\n                            x: val[0],\r\n                            y: val[1]\r\n                        };\r\n                    }\r\n                    // if arg is an array of one element which is an object\r\n                    else if(this._isObject(val)) {\r\n                        return val;\r\n                    }\r\n                }\r\n                // if arg is an array of two or more elements\r\n                else if(arg.length >= 2) {\r\n                    return {\r\n                        x: arg[0],\r\n                        y: arg[1]\r\n                    };\r\n                }\r\n            }\r\n            // if arg is an object return the object\r\n            else if(this._isObject(arg)) {\r\n                return arg;\r\n            }\r\n\r\n            // default\r\n            return null;\r\n        },\r\n        /*\r\n         * The argument can be:\r\n         * - an integer (will be applied to both width and height)\r\n         * - an array of one integer (will be applied to both width and height)\r\n         * - an array of two integers (contains width and height)\r\n         * - an array of four integers (contains x, y, width, and height)\r\n         * - an object with width and height properties\r\n         * - an array of one element which is an array of integers\r\n         * - an array of one element of an object\r\n         */\r\n        _getSize: function(arg) {\r\n            if(this._isNumber(arg)) {\r\n                return {\r\n                    width: arg,\r\n                    height: arg\r\n                };\r\n            }\r\n            else if(this._isArray(arg)) {\r\n                // if arg is an array of one element\r\n                if(arg.length === 1) {\r\n                    var val = arg[0];\r\n                    // if arg is an array of one element which is a number\r\n                    if(this._isNumber(val)) {\r\n                        return {\r\n                            width: val,\r\n                            height: val\r\n                        };\r\n                    }\r\n                    // if arg is an array of one element which is an array\r\n                    else if(this._isArray(val)) {\r\n                        /*\r\n                         * if arg is an array of one element which is an\r\n                         * array of four elements\r\n                         */\r\n                        if(val.length >= 4) {\r\n                            return {\r\n                                width: val[2],\r\n                                height: val[3]\r\n                            };\r\n                        }\r\n                        /*\r\n                         * if arg is an array of one element which is an\r\n                         * array of two elements\r\n                         */\r\n                        else if(val.length >= 2) {\r\n                            return {\r\n                                width: val[0],\r\n                                height: val[1]\r\n                            };\r\n                        }\r\n                    }\r\n                    // if arg is an array of one element which is an object\r\n                    else if(this._isObject(val)) {\r\n                        return val;\r\n                    }\r\n                }\r\n                // if arg is an array of four elements\r\n                else if(arg.length >= 4) {\r\n                    return {\r\n                        width: arg[2],\r\n                        height: arg[3]\r\n                    };\r\n                }\r\n                // if arg is an array of two elements\r\n                else if(arg.length >= 2) {\r\n                    return {\r\n                        width: arg[0],\r\n                        height: arg[1]\r\n                    };\r\n                }\r\n            }\r\n            // if arg is an object return the object\r\n            else if(this._isObject(arg)) {\r\n                return arg;\r\n            }\r\n\r\n            // default\r\n            return null;\r\n        },\r\n        /*\r\n         * arg will be an array of numbers or\r\n         *  an array of point arrays or\r\n         *  an array of point objects\r\n         */\r\n        _getPoints: function(arg) {\r\n            var arr = [],\r\n                n, len;\r\n\r\n            if(arg === undefined) {\r\n                return [];\r\n            }\r\n\r\n            len = arg.length;\r\n\r\n            // an array of arrays\r\n            if(this._isArray(arg[0])) {\r\n                /*\r\n                 * convert array of arrays into an array\r\n                 * of objects containing x, y\r\n                 */\r\n                for(n = 0; n < len; n++) {\r\n                    arr.push({\r\n                        x: arg[n][0],\r\n                        y: arg[n][1]\r\n                    });\r\n                }\r\n\r\n                return arr;\r\n            }\r\n            // an array of objects\r\n            if(this._isObject(arg[0])) {\r\n                return arg;\r\n            }\r\n            // an array of integers\r\n            else {\r\n                /*\r\n                 * convert array of numbers into an array\r\n                 * of objects containing x, y\r\n                 */\r\n                for(n = 0; n < len; n += 2) {\r\n                    arr.push({\r\n                        x: arg[n],\r\n                        y: arg[n + 1]\r\n                    });\r\n                }\r\n\r\n                return arr;\r\n            }\r\n        },\r\n        /*\r\n         * arg can be an image object or image data\r\n         */\r\n        _getImage: function(arg, callback) {\r\n            var imageObj, canvas, context, dataUrl;\r\n\r\n            // if arg is null or undefined\r\n            if(!arg) {\r\n                callback(null);\r\n            }\r\n\r\n            // if arg is already an image object\r\n            else if(this._isElement(arg)) {\r\n                callback(arg);\r\n            }\r\n\r\n            // if arg is a string, then it's a data url\r\n            else if(this._isString(arg)) {\r\n                imageObj = new Image();\r\n                imageObj.onload = function() {\r\n                    callback(imageObj);\r\n                };\r\n                imageObj.src = arg;\r\n            }\r\n\r\n            //if arg is an object that contains the data property, it's an image object\r\n            else if(arg.data) {\r\n                canvas = document.createElement(CANVAS);\r\n                canvas.width = arg.width;\r\n                canvas.height = arg.height;\r\n                _context = canvas.getContext(CONTEXT_2D);\r\n                _context.putImageData(arg, 0, 0);\r\n                dataUrl = canvas.toDataURL();\r\n                imageObj = new Image();\r\n                imageObj.onload = function() {\r\n                    callback(imageObj);\r\n                };\r\n                imageObj.src = dataUrl;\r\n            }\r\n            else {\r\n                callback(null);\r\n            }\r\n        },\r\n        _rgbToHex: function(r, g, b) {\r\n            return ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);\r\n        },\r\n        _hexToRgb: function(hex) {\r\n            hex = hex.replace(HASH, EMPTY_STRING);\r\n            var bigint = parseInt(hex, 16);\r\n            return {\r\n                r: (bigint >> 16) & 255,\r\n                g: (bigint >> 8) & 255,\r\n                b: bigint & 255\r\n            };\r\n        },\r\n        /**\r\n         * return random hex color\r\n         * @method\r\n         * @memberof Kinetic.Util.prototype\r\n         */\r\n        getRandomColor: function() {\r\n            var randColor = (Math.random() * 0xFFFFFF << 0).toString(16);\r\n            while (randColor.length < 6) {\r\n              randColor = ZERO + randColor;\r\n            }\r\n            return HASH + randColor;\r\n        },\r\n        /**\r\n         * return value with default fallback\r\n         * @method\r\n         * @memberof Kinetic.Util.prototype\r\n         */\r\n        get: function(val, def) {\r\n            if (val === undefined) {\r\n                return def;\r\n            }\r\n            else {\r\n                return val;\r\n            }\r\n        },\r\n        /**\r\n         * get RGB components of a color\r\n         * @method\r\n         * @memberof Kinetic.Util.prototype\r\n         * @param {String} color\r\n         * @example\r\n         * // each of the following examples return {r:0, g:0, b:255}<br>\r\n         * var rgb = Kinetic.Util.getRGB('blue');<br>\r\n         * var rgb = Kinetic.Util.getRGB('#0000ff');<br>\r\n         * var rgb = Kinetic.Util.getRGB('rgb(0,0,255)');\r\n         */\r\n        getRGB: function(color) {\r\n          var rgb;\r\n          // color string\r\n          if (color in COLORS) {\r\n            rgb = COLORS[color];\r\n            return {\r\n              r: rgb[0],\r\n              g: rgb[1],\r\n              b: rgb[2]\r\n            };\r\n          }\r\n          // hex\r\n          else if (color[0] === HASH) {\r\n            return this._hexToRgb(color.substring(1));\r\n          }\r\n          // rgb string\r\n          else if (color.substr(0, 4) === RGB_PAREN) {\r\n            rgb = RGB_REGEX.exec(color.replace(/ /g,''));\r\n            return {\r\n                r: parseInt(rgb[1], 10),\r\n                g: parseInt(rgb[2], 10),\r\n                b: parseInt(rgb[3], 10)\r\n            };\r\n          }\r\n          // default\r\n          else {\r\n            return {\r\n                r: 0,\r\n                g: 0,\r\n                b: 0\r\n            };\r\n          }\r\n        },\r\n        // o1 takes precedence over o2\r\n        _merge: function(o1, o2) {\r\n            var retObj = this._clone(o2);\r\n            for(var key in o1) {\r\n                if(this._isObject(o1[key])) {\r\n                    retObj[key] = this._merge(o1[key], retObj[key]);\r\n                }\r\n                else {\r\n                    retObj[key] = o1[key];\r\n                }\r\n            }\r\n            return retObj;\r\n        },\r\n        // deep object clone\r\n        _clone: function(obj) {\r\n            var retObj = {};\r\n            for(var key in obj) {\r\n                if(this._isObject(obj[key])) {\r\n                    retObj[key] = this._clone(obj[key]);\r\n                }\r\n                else {\r\n                    retObj[key] = obj[key];\r\n                }\r\n            }\r\n            return retObj;\r\n        },\r\n        _degToRad: function(deg) {\r\n            return deg * PI_OVER_DEG180;\r\n        },\r\n        _radToDeg: function(rad) {\r\n            return rad * DEG180_OVER_PI;\r\n        },\r\n        _capitalize: function(str) {\r\n            return str.charAt(0).toUpperCase() + str.slice(1);\r\n        },\r\n        error: function(str) {\r\n            throw new Error(KINETIC_ERROR + str);\r\n        },\r\n        warn: function(str) {\r\n            /*\r\n             * IE9 on Windows7 64bit will throw a JS error\r\n             * if we don't use window.console in the conditional\r\n             */\r\n            if(window.console && console.warn) {\r\n                console.warn(KINETIC_WARNING + str);\r\n            }\r\n        },\r\n        extend: function(c1, c2) {\r\n            for(var key in c2.prototype) {\r\n                if(!( key in c1.prototype)) {\r\n                    c1.prototype[key] = c2.prototype[key];\r\n                }\r\n            }\r\n        },\r\n        /**\r\n         * adds methods to a constructor prototype\r\n         * @method\r\n         * @memberof Kinetic.Util.prototype\r\n         * @param {Function} constructor\r\n         * @param {Object} methods\r\n         */\r\n        addMethods: function(constructor, methods) {\r\n          var key;\r\n\r\n          for (key in methods) {\r\n            constructor.prototype[key] = methods[key];\r\n          }\r\n        },\r\n        _getControlPoints: function(p0, p1, p2, t) {\r\n            var x0 = p0.x;\r\n            var y0 = p0.y;\r\n            var x1 = p1.x;\r\n            var y1 = p1.y;\r\n            var x2 = p2.x;\r\n            var y2 = p2.y;\r\n            var d01 = Math.sqrt(Math.pow(x1 - x0, 2) + Math.pow(y1 - y0, 2));\r\n            var d12 = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\r\n            var fa = t * d01 / (d01 + d12);\r\n            var fb = t * d12 / (d01 + d12);\r\n            var p1x = x1 - fa * (x2 - x0);\r\n            var p1y = y1 - fa * (y2 - y0);\r\n            var p2x = x1 + fb * (x2 - x0);\r\n            var p2y = y1 + fb * (y2 - y0);\r\n            return [{\r\n                x: p1x,\r\n                y: p1y\r\n            }, {\r\n                x: p2x,\r\n                y: p2y\r\n            }];\r\n        },\r\n        _expandPoints: function(points, tension) {\r\n            var length = points.length,\r\n                allPoints = [],\r\n                n, cp;\r\n\r\n            for(n = 1; n < length - 1; n++) {\r\n                cp = Kinetic.Util._getControlPoints(points[n - 1], points[n], points[n + 1], tension);\r\n                allPoints.push(cp[0]);\r\n                allPoints.push(points[n]);\r\n                allPoints.push(cp[1]);\r\n            }\r\n\r\n            return allPoints;\r\n        },\r\n        _removeLastLetter: function(str) {\r\n            return str.substring(0, str.length - 1);\r\n        }\r\n    };\r\n})();\r\n;(function() {\r\n    // calculate pixel ratio\r\n    var canvas = document.createElement('canvas'),\r\n        context = canvas.getContext('2d'),\r\n        devicePixelRatio = window.devicePixelRatio || 1,\r\n        backingStoreRatio = context.webkitBackingStorePixelRatio\r\n            || context.mozBackingStorePixelRatio\r\n            || context.msBackingStorePixelRatio\r\n            || context.oBackingStorePixelRatio\r\n            || context.backingStorePixelRatio \r\n            || 1,\r\n        _pixelRatio = devicePixelRatio / backingStoreRatio;\r\n\r\n    /**\r\n     * Canvas Renderer constructor\r\n     * @constructor\r\n     * @abstract\r\n     * @memberof Kinetic\r\n     * @param {Number} width\r\n     * @param {Number} height\r\n     * @param {Number} pixelRatio KineticJS automatically handles pixel ratio adustments in order to render crisp drawings \r\n     *  on all devices. Most desktops, low end tablets, and low end phones, have device pixel ratios\r\n     *  of 1.  Some high end tablets and phones, like iPhones and iPads (not the mini) have a device pixel ratio \r\n     *  of 2.  Some Macbook Pros, and iMacs also have a device pixel ratio of 2.  Some high end Android devices have pixel \r\n     *  ratios of 2 or 3.  Some browsers like Firefox allow you to configure the pixel ratio of the viewport.  Unless otherwise\r\n     *  specificed, the pixel ratio will be defaulted to the actual device pixel ratio.  You can override the device pixel\r\n     *  ratio for special situations, or, if you don't want the pixel ratio to be taken into account, you can set it to 1.\r\n     */\r\n    Kinetic.Canvas = function(config) {\r\n        this.init(config);\r\n    };\r\n\r\n    Kinetic.Canvas.prototype = {\r\n        init: function(config) {\r\n            config = config || {};\r\n\r\n            var pixelRatio = config.pixelRatio || Kinetic.pixelRatio || _pixelRatio;\r\n\r\n            this.pixelRatio = pixelRatio;\r\n            this._canvas = document.createElement('canvas');\r\n\r\n            // set inline styles\r\n            this._canvas.style.padding = 0;\r\n            this._canvas.style.margin = 0;\r\n            this._canvas.style.border = 0;\r\n            this._canvas.style.background = 'transparent';\r\n            this._canvas.style.position = 'absolute';\r\n            this._canvas.style.top = 0;\r\n            this._canvas.style.left = 0;\r\n        },\r\n        /**\r\n         * get canvas context\r\n         * @method\r\n         * @memberof Kinetic.Canvas.prototype\r\n         * @returns {CanvasContext} context\r\n         */\r\n        getContext: function() {\r\n            return this.context;\r\n        },\r\n        /**\r\n         * get pixel ratio\r\n         * @method\r\n         * @memberof Kinetic.Canvas.prototype\r\n         * @returns {Number} pixel ratio\r\n         */\r\n        getPixelRatio: function() {\r\n            return this.pixelRatio;\r\n        },\r\n        /**\r\n         * get pixel ratio\r\n         * @method\r\n         * @memberof Kinetic.Canvas.prototype\r\n         * @param {Number} pixelRatio KineticJS automatically handles pixel ratio adustments in order to render crisp drawings \r\n         *  on all devices. Most desktops, low end tablets, and low end phones, have device pixel ratios\r\n         *  of 1.  Some high end tablets and phones, like iPhones and iPads (not the mini) have a device pixel ratio \r\n         *  of 2.  Some Macbook Pros, and iMacs also have a device pixel ratio of 2.  Some high end Android devices have pixel \r\n         *  ratios of 2 or 3.  Some browsers like Firefox allow you to configure the pixel ratio of the viewport.  Unless otherwise\r\n         *  specificed, the pixel ratio will be defaulted to the actual device pixel ratio.  You can override the device pixel\r\n         *  ratio for special situations, or, if you don't want the pixel ratio to be taken into account, you can set it to 1.\r\n         */\r\n        setPixelRatio: function(pixelRatio) {\r\n            this.pixelRatio = pixelRatio;\r\n            this.setSize(this.getWidth(), this.getHeight());\r\n        },\r\n        /**\r\n         * set width\r\n         * @method\r\n         * @memberof Kinetic.Canvas.prototype\r\n         * @param {Number} width\r\n         */\r\n        setWidth: function(width) {\r\n            // take into account pixel ratio\r\n            this.width = this._canvas.width = width * this.pixelRatio;\r\n            this._canvas.style.width = width + 'px';\r\n        },\r\n        /**\r\n         * set height\r\n         * @method\r\n         * @memberof Kinetic.Canvas.prototype\r\n         * @param {Number} height\r\n         */\r\n        setHeight: function(height) {\r\n            // take into account pixel ratio\r\n            this.height = this._canvas.height = height * this.pixelRatio;\r\n            this._canvas.style.height = height + 'px';\r\n        },\r\n        /**\r\n         * get width\r\n         * @method\r\n         * @memberof Kinetic.Canvas.prototype\r\n         * @returns {Number} width\r\n         */\r\n        getWidth: function() {\r\n            return this.width;\r\n        },\r\n        /**\r\n         * get height\r\n         * @method\r\n         * @memberof Kinetic.Canvas.prototype\r\n         * @returns {Number} height\r\n         */\r\n        getHeight: function() {\r\n            return this.height;\r\n        },\r\n        /**\r\n         * set size\r\n         * @method\r\n         * @memberof Kinetic.Canvas.prototype\r\n         * @param {Number} width\r\n         * @param {Number} height\r\n         */\r\n        setSize: function(width, height) {\r\n            this.setWidth(width);\r\n            this.setHeight(height);\r\n        },\r\n        /**\r\n         * to data url\r\n         * @method\r\n         * @memberof Kinetic.Canvas.prototype\r\n         * @param {String} mimeType\r\n         * @param {Number} quality between 0 and 1 for jpg mime types\r\n         * @returns {String} data url string\r\n         */\r\n        toDataURL: function(mimeType, quality) {\r\n            try {\r\n                // If this call fails (due to browser bug, like in Firefox 3.6),\r\n                // then revert to previous no-parameter image/png behavior\r\n                return this._canvas.toDataURL(mimeType, quality);\r\n            }\r\n            catch(e) {\r\n                try {\r\n                    return this._canvas.toDataURL();\r\n                }\r\n                catch(err) {\r\n                    Kinetic.Util.warn('Unable to get data URL. ' + err.message);\r\n                    return '';\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    Kinetic.SceneCanvas = function(config) {\r\n        config = config || {};\r\n        var width = config.width || 0,\r\n            height = config.height || 0;\r\n\r\n        Kinetic.Canvas.call(this, config);\r\n        this.context = new Kinetic.SceneContext(this);\r\n        this.setSize(width, height);\r\n    };\r\n\r\n    Kinetic.SceneCanvas.prototype = {\r\n        setWidth: function(width) {\r\n            var pixelRatio = this.pixelRatio,\r\n                _context = this.getContext()._context;\r\n\r\n            Kinetic.Canvas.prototype.setWidth.call(this, width);\r\n            _context.scale(pixelRatio, pixelRatio);\r\n        },\r\n        setHeight: function(height) {\r\n            var pixelRatio = this.pixelRatio,\r\n                _context = this.getContext()._context;\r\n\r\n            Kinetic.Canvas.prototype.setHeight.call(this, height);\r\n            _context.scale(pixelRatio, pixelRatio);\r\n        }\r\n    };\r\n    Kinetic.Util.extend(Kinetic.SceneCanvas, Kinetic.Canvas);\r\n\r\n    Kinetic.HitCanvas = function(config) {\r\n        config = config || {};\r\n        var width = config.width || 0,\r\n            height = config.height || 0;\r\n            \r\n        Kinetic.Canvas.call(this, config);\r\n        this.context = new Kinetic.HitContext(this);\r\n        this.setSize(width, height);\r\n    };\r\n    Kinetic.Util.extend(Kinetic.HitCanvas, Kinetic.Canvas);\r\n\r\n})();\r\n;(function() {\r\n    var COMMA = ',',\r\n        OPEN_PAREN = '(',\r\n        CLOSE_PAREN = ')',\r\n        OPEN_PAREN_BRACKET = '([',\r\n        CLOSE_BRACKET_PAREN = '])',\r\n        SEMICOLON = ';',\r\n        DOUBLE_PAREN = '()',\r\n        EMPTY_STRING = '',\r\n        EQUALS = '=',\r\n        SET = 'set',\r\n        CONTEXT_METHODS = [\r\n            'arc',\r\n            'arcTo',\r\n            'beginPath',\r\n            'bezierCurveTo',\r\n            'clearRect', \r\n            'clip',\r\n            'closePath',\r\n            'createLinearGradient',\r\n            'createPattern',\r\n            'createRadialGradient',\r\n            'drawImage',\r\n            'fill', \r\n            'fillText', \r\n            'getImageData',\r\n            'lineTo',\r\n            'moveTo',\r\n            'putImageData',\r\n            'quadraticCurveTo',\r\n            'rect', \r\n            'restore', \r\n            'rotate',\r\n            'save', \r\n            'scale',\r\n            'setLineDash',\r\n            'setTransform', \r\n            'stroke', \r\n            'strokeText', \r\n            'transform',\r\n            'translate'\r\n        ];\r\n\r\n    /**\r\n     * Canvas Context constructor\r\n     * @constructor\r\n     * @abstract\r\n     * @memberof Kinetic\r\n     */\r\n    Kinetic.Context = function(canvas) {\r\n        this.init(canvas);\r\n    };\r\n\r\n    Kinetic.Context.prototype = {\r\n        init: function(canvas) {\r\n            this.canvas = canvas;\r\n            this._context = canvas._canvas.getContext('2d');\r\n\r\n            if (Kinetic.enableTrace) {\r\n                this.traceArr = [];\r\n                this._enableTrace();\r\n            }\r\n        },\r\n        /**\r\n         * get context trace if trace is enabled\r\n         * @method\r\n         * @memberof Kinetic.Context.prototype\r\n         * @param {Boolean} relaxed if false, return strict context trace, which includes method names, method parameters\r\n         *  properties, and property values.  If true, return relaxed context trace, which only returns method names and\r\n         *  properites.\r\n         * @returns {String}\r\n         */\r\n        getTrace: function(relaxed) {\r\n            var traceArr = this.traceArr,\r\n                len = traceArr.length,\r\n                str = '',\r\n                n, trace, method, args;\r\n\r\n            for (n=0; n<len; n++) {\r\n                trace = traceArr[n];\r\n                method = trace.method;\r\n\r\n                // methods\r\n                if (method) {\r\n                    args = trace.args;\r\n                    str += method;\r\n                    if (relaxed) {\r\n                        str += DOUBLE_PAREN;\r\n                    } \r\n                    else {\r\n                        if (Kinetic.Util._isArray(args[0])) {\r\n                            str += OPEN_PAREN_BRACKET + args.join(COMMA) + CLOSE_BRACKET_PAREN;\r\n                        }\r\n                        else {\r\n                            str += OPEN_PAREN + args.join(COMMA) + CLOSE_PAREN;\r\n                        }\r\n                    }\r\n                }\r\n                // properties\r\n                else {\r\n                    str += trace.property;\r\n                    if (!relaxed) {\r\n                        str += EQUALS + trace.val;\r\n                    }  \r\n                }\r\n\r\n                str += SEMICOLON;\r\n            }\r\n\r\n            return str;\r\n        },\r\n        /**\r\n         * clear trace if trace is enabled\r\n         * @method\r\n         * @memberof Kinetic.Context.prototype\r\n         */\r\n        clearTrace: function() {\r\n            this.traceArr = [];\r\n        },\r\n        _trace: function(str) {\r\n            var traceArr = this.traceArr,\r\n                len;\r\n \r\n            traceArr.push(str);\r\n            len = traceArr.length;\r\n\r\n            if (len >= Kinetic.traceArrMax) {\r\n                traceArr.shift();\r\n            }\r\n        },\r\n        /**\r\n         * reset canvas context transform\r\n         * @method\r\n         * @memberof Kinetic.Context.prototype\r\n         */\r\n        reset: function() {\r\n            var pixelRatio = this.getCanvas().getPixelRatio();\r\n            this.setTransform(1 * pixelRatio, 0, 0, 1 * pixelRatio, 0, 0);\r\n        },\r\n        /**\r\n         * get canvas\r\n         * @method\r\n         * @memberof Kinetic.Context.prototype\r\n         * @returns {Kinetic.Canvas}\r\n         */\r\n        getCanvas: function() {\r\n            return this.canvas;\r\n        },\r\n        /**\r\n         * clear canvas\r\n         * @method\r\n         * @memberof Kinetic.Context.prototype\r\n         */\r\n        clear: function() {\r\n            var args = [].slice.call(arguments),\r\n                canvas = this.getCanvas(),\r\n                pos, size;\r\n            \r\n            if (args.length) {\r\n                pos = Kinetic.Util._getXY(args);\r\n                size = Kinetic.Util._getSize(args);\r\n                this.clearRect(pos.x || 0, pos.y || 0, size.width, size.height);\r\n            }\r\n            else {\r\n                this.clearRect(0, 0, canvas.getWidth(), canvas.getHeight());\r\n            }\r\n        },\r\n        /**\r\n         * fill shape\r\n         * @method\r\n         * @memberof Kinetic.Context.prototype\r\n         * @param {Kinetic.Shape} shape\r\n         */\r\n        fillShape: function(shape) {\r\n            if(shape.getFillEnabled()) {\r\n                this._fill(shape);\r\n            }\r\n        },\r\n        /**\r\n         * stroke shape\r\n         * @method\r\n         * @memberof Kinetic.Context.prototype\r\n         * @param {Kinetic.Shape} shape\r\n         */\r\n        strokeShape: function(shape) {\r\n            if(shape.getStrokeEnabled()) {\r\n                this._stroke(shape);\r\n            }\r\n        },\r\n        /**\r\n         * fill, stroke, and apply shadows to shape.  Shadows \r\n         *  will only be applied to either the fill or stroke.&nbsp; Fill\r\n         *  is given priority over stroke.\r\n         * @method\r\n         * @memberof Kinetic.Context.prototype\r\n         * @param {Kinetic.Shape} shape\r\n         */\r\n        fillStrokeShape: function(shape) {\r\n            var fillEnabled = shape.getFillEnabled();\r\n            if(fillEnabled) {\r\n                this._fill(shape);\r\n            }\r\n\r\n            if(shape.getStrokeEnabled()) {\r\n                this._stroke(shape, shape.hasShadow() && shape.hasFill() && fillEnabled);\r\n            }\r\n        },\r\n        _applyLineCap: function(shape) {\r\n            var lineCap = shape.getLineCap();\r\n            if(lineCap) {\r\n                this.setAttr('lineCap', lineCap);\r\n            }\r\n        },\r\n        _applyOpacity: function(shape) {\r\n            var absOpacity = shape.getAbsoluteOpacity();\r\n            if(absOpacity !== 1) {\r\n                this.setAttr('globalAlpha', absOpacity);\r\n            }\r\n        },\r\n        _applyLineJoin: function(shape) {\r\n            var lineJoin = shape.getLineJoin();\r\n            if(lineJoin) {\r\n                this.setAttr('lineJoin', lineJoin);\r\n            }\r\n        },\r\n        _applyAncestorTransforms: function(shape) {\r\n            var m = shape.getAbsoluteTransform().getMatrix();\r\n            this.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\r\n        },\r\n        _clip: function(container) {\r\n            var clipX = container.getClipX() || 0,\r\n                clipY = container.getClipY() || 0,\r\n                clipWidth = container.getClipWidth(),\r\n                clipHeight = container.getClipHeight();\r\n\r\n            this.save();\r\n            this._applyAncestorTransforms(container);\r\n            this.beginPath();\r\n            this.rect(clipX, clipY, clipWidth, clipHeight);\r\n            this.clip();\r\n            this.reset();\r\n            container._drawChildren(this.getCanvas());\r\n            this.restore();\r\n        },\r\n\r\n        setAttr: function(attr, val) {\r\n            this._context[attr] = val;\r\n        },\r\n\r\n        // context pass through methods\r\n        arc: function() {\r\n            var a = arguments;\r\n            this._context.arc(a[0], a[1], a[2], a[3], a[4], a[5]);\r\n        },\r\n        beginPath: function() {\r\n            this._context.beginPath();\r\n        },\r\n        bezierCurveTo: function() {\r\n            var a = arguments;\r\n            this._context.bezierCurveTo(a[0], a[1], a[2], a[3], a[4], a[5]);\r\n        },\r\n        clearRect: function() {\r\n            var a = arguments;\r\n            this._context.clearRect(a[0], a[1], a[2], a[3]);\r\n        },\r\n        clip: function() {\r\n            this._context.clip();\r\n        },\r\n        closePath: function() {\r\n            this._context.closePath();\r\n        },\r\n        createLinearGradient: function() {\r\n            var a = arguments;\r\n            return this._context.createLinearGradient(a[0], a[1], a[2], a[3]);\r\n        },\r\n        createPattern: function() {\r\n            var a = arguments;\r\n            return this._context.createPattern(a[0], a[1]);\r\n        },\r\n        createRadialGradient: function() {\r\n            var a = arguments;\r\n            return this._context.createRadialGradient(a[0], a[1], a[2], a[3], a[4], a[5]);\r\n        },\r\n        drawImage: function() {\r\n            var a = arguments,\r\n                _context = this._context;\r\n\r\n            if(a.length === 3) {\r\n                _context.drawImage(a[0], a[1], a[2]);\r\n            }\r\n            else if(a.length === 5) {\r\n                _context.drawImage(a[0], a[1], a[2], a[3], a[4]);\r\n            }\r\n            else if(a.length === 9) {\r\n                _context.drawImage(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]);\r\n            }\r\n        },\r\n        fill: function() {\r\n            this._context.fill();\r\n        },\r\n        fillText: function() {\r\n            var a = arguments;\r\n            this._context.fillText(a[0], a[1], a[2]);\r\n        },\r\n        getImageData: function() {\r\n            var a = arguments;\r\n            return this._context.getImageData(a[0], a[1], a[2], a[3]);\r\n        },\r\n        lineTo: function() {\r\n            var a = arguments;\r\n            this._context.lineTo(a[0], a[1]);\r\n        },\r\n        moveTo: function() {\r\n            var a = arguments;\r\n            this._context.moveTo(a[0], a[1]);\r\n        },\r\n        rect: function() {\r\n            var a = arguments;\r\n            this._context.rect(a[0], a[1], a[2], a[3]);\r\n        },\r\n        putImageData: function() {\r\n            var a = arguments;\r\n            this._context.putImageData(a[0], a[1], a[2]);\r\n        },\r\n        quadraticCurveTo: function() {\r\n            var a = arguments;\r\n            this._context.quadraticCurveTo(a[0], a[1], a[2], a[3]);\r\n        },\r\n        restore: function() {\r\n            this._context.restore();\r\n        },\r\n        rotate: function() {\r\n            var a = arguments;\r\n            this._context.rotate(a[0]);\r\n        },\r\n        save: function() {\r\n            this._context.save();\r\n        },\r\n        scale: function() {\r\n            var a = arguments;\r\n            this._context.scale(a[0], a[1]);\r\n        },\r\n        setLineDash: function() {\r\n            var a = arguments,\r\n                _context = this._context;\r\n\r\n            // works for Chrome and IE11\r\n            if(this._context.setLineDash) {\r\n                _context.setLineDash(a[0]);\r\n            }\r\n            // verified that this works in firefox\r\n            else if('mozDash' in _context) {\r\n                _context.mozDash = a[0];\r\n            }\r\n            // does not currently work for Safari\r\n            else if('webkitLineDash' in _context) {\r\n                _context.webkitLineDash = a[0];\r\n            }\r\n\r\n            // no support for IE9 and IE10\r\n        },\r\n        setTransform: function() {\r\n            var a = arguments;\r\n            this._context.setTransform(a[0], a[1], a[2], a[3], a[4], a[5]);\r\n        },\r\n        stroke: function() {\r\n            this._context.stroke();\r\n        },\r\n        strokeText: function() {\r\n            var a = arguments;\r\n            this._context.strokeText(a[0], a[1], a[2]);\r\n        },\r\n        transform: function() {\r\n            var a = arguments;\r\n            this._context.transform(a[0], a[1], a[2], a[3], a[4], a[5]);\r\n        },\r\n        translate: function() {\r\n            var a = arguments;\r\n            this._context.translate(a[0], a[1]);\r\n        },\r\n        _enableTrace: function() {\r\n            var that = this,\r\n                len = CONTEXT_METHODS.length,\r\n                _roundArrValues = Kinetic.Util._roundArrValues,\r\n                origSetter = this.setAttr,\r\n                n, args;\r\n\r\n            // methods\r\n            for (n=0; n<len; n++) {\r\n                (function(methodName) {\r\n                    var origMethod = that[methodName],\r\n                        ret;\r\n\r\n                    that[methodName] = function() {\r\n                        args = _roundArrValues(Array.prototype.slice.call(arguments, 0));\r\n                        ret = origMethod.apply(that, arguments);\r\n           \r\n                        that._trace({\r\n                            method: methodName,\r\n                            args: args\r\n                        });\r\n                 \r\n                        return ret;\r\n                    };\r\n                })(CONTEXT_METHODS[n]);\r\n            }\r\n\r\n            // attrs\r\n            that.setAttr = function() {\r\n                origSetter.apply(that, arguments);\r\n                that._trace({\r\n                    property: arguments[0],\r\n                    val: arguments[1]\r\n                });\r\n            };\r\n        }\r\n    };\r\n\r\n    Kinetic.SceneContext = function(canvas) {\r\n        Kinetic.Context.call(this, canvas);\r\n    };\r\n\r\n    Kinetic.SceneContext.prototype = {\r\n        _fillColor: function(shape) {\r\n            var fill = shape.getFill();\r\n\r\n            this.setAttr('fillStyle', fill);\r\n            shape._fillFunc(this);\r\n        },\r\n        _fillPattern: function(shape) {\r\n            var fillPatternImage = shape.getFillPatternImage(),\r\n                fillPatternX = shape.getFillPatternX(),\r\n                fillPatternY = shape.getFillPatternY(),\r\n                fillPatternScale = shape.getFillPatternScale(),\r\n                fillPatternRotation = shape.getFillPatternRotation(),\r\n                fillPatternOffset = shape.getFillPatternOffset(),\r\n                fillPatternRepeat = shape.getFillPatternRepeat();\r\n\r\n            if(fillPatternX || fillPatternY) {\r\n                this.translate(fillPatternX || 0, fillPatternY || 0);\r\n            }\r\n            if(fillPatternRotation) {\r\n                this.rotate(fillPatternRotation);\r\n            }\r\n            if(fillPatternScale) {\r\n                this.scale(fillPatternScale.x, fillPatternScale.y);\r\n            }\r\n            if(fillPatternOffset) {\r\n                this.translate(-1 * fillPatternOffset.x, -1 * fillPatternOffset.y);\r\n            }\r\n\r\n            this.setAttr('fillStyle', this.createPattern(fillPatternImage, fillPatternRepeat || 'repeat'));\r\n            this.fill();\r\n        },\r\n        _fillLinearGradient: function(shape) {\r\n            var start = shape.getFillLinearGradientStartPoint(),\r\n                end = shape.getFillLinearGradientEndPoint(),\r\n                colorStops = shape.getFillLinearGradientColorStops(),\r\n                grd = this.createLinearGradient(start.x, start.y, end.x, end.y);\r\n\r\n            if (colorStops) {\r\n                // build color stops\r\n                for(var n = 0; n < colorStops.length; n += 2) {\r\n                    grd.addColorStop(colorStops[n], colorStops[n + 1]);\r\n                }\r\n                this.setAttr('fillStyle', grd);\r\n                this.fill();\r\n            }\r\n        },\r\n        _fillRadialGradient: function(shape) {\r\n            var start = shape.getFillRadialGradientStartPoint(),\r\n            end = shape.getFillRadialGradientEndPoint(),\r\n            startRadius = shape.getFillRadialGradientStartRadius(),\r\n            endRadius = shape.getFillRadialGradientEndRadius(),\r\n            colorStops = shape.getFillRadialGradientColorStops(),\r\n            grd = this.createRadialGradient(start.x, start.y, startRadius, end.x, end.y, endRadius);\r\n\r\n            // build color stops\r\n            for(var n = 0; n < colorStops.length; n += 2) {\r\n                grd.addColorStop(colorStops[n], colorStops[n + 1]);\r\n            }\r\n            this.setAttr('fillStyle', grd);\r\n            this.fill();\r\n        },\r\n        _fill: function(shape, skipShadow) {\r\n            var hasColor = shape.getFill(),\r\n                hasPattern = shape.getFillPatternImage(),\r\n                hasLinearGradient = shape.getFillLinearGradientColorStops(),\r\n                hasRadialGradient = shape.getFillRadialGradientColorStops(),\r\n                fillPriority = shape.getFillPriority();\r\n\r\n            if(!skipShadow && shape.hasShadow()) {\r\n                this.save();\r\n                this._applyShadow(shape);\r\n            }\r\n\r\n            // priority fills\r\n            if(hasColor && fillPriority === 'color') {\r\n                this._fillColor(shape);\r\n            }\r\n            else if(hasPattern && fillPriority === 'pattern') {\r\n                this._fillPattern(shape);\r\n            }\r\n            else if(hasLinearGradient && fillPriority === 'linear-gradient') {\r\n                this._fillLinearGradient(shape);\r\n            }\r\n            else if(hasRadialGradient && fillPriority === 'radial-gradient') {\r\n                this._fillRadialGradient(shape);\r\n            }\r\n            // now just try and fill with whatever is available\r\n            else if(hasColor) {\r\n                this._fillColor(shape);\r\n            }\r\n            else if(hasPattern) {\r\n                this._fillPattern(shape);\r\n            }\r\n            else if(hasLinearGradient) {\r\n                this._fillLinearGradient(shape);\r\n            }\r\n            else if(hasRadialGradient) {\r\n                this._fillRadialGradient(shape);\r\n            }\r\n            \r\n            if(!skipShadow && shape.hasShadow()) {\r\n                this.restore();\r\n                this._fill(shape, true);\r\n            }\r\n        },\r\n        _stroke: function(shape, skipShadow) {\r\n            var stroke = shape.getStroke(),\r\n                strokeWidth = shape.getStrokeWidth(),\r\n                dashArray = shape.getDashArray(),\r\n                strokeScaleEnabled = shape.getStrokeScaleEnabled();\r\n\r\n            if(stroke || strokeWidth) {\r\n                if (!strokeScaleEnabled) {\r\n                    this.save();\r\n                    this.setTransform(1, 0, 0, 1, 0, 0);\r\n                }\r\n\r\n                /////////////////////\r\n                this._applyLineCap(shape);\r\n                if(dashArray && shape.getDashArrayEnabled()) {\r\n                    this.setLineDash(dashArray);\r\n                }\r\n                if(!skipShadow && shape.hasShadow()) {\r\n                    this._applyShadow(shape);\r\n                }\r\n                this.setAttr('lineWidth', strokeWidth || 2);\r\n                this.setAttr('strokeStyle', stroke || 'black');\r\n                shape._strokeFunc(this);\r\n                \r\n                if(!skipShadow && shape.hasShadow()) {\r\n                    this._stroke(shape, true);\r\n                }\r\n                /////////////////////\r\n\r\n                if (!strokeScaleEnabled) {\r\n                    this.restore();\r\n                }\r\n            }\r\n        },\r\n        applyShadow: function(shape, drawFunc) {\r\n            this.save();\r\n            this._applyShadow(shape);\r\n            drawFunc();\r\n            this.restore();\r\n            drawFunc();\r\n        },\r\n        _applyShadow: function(shape) {\r\n            var util, absOpacity, color, blur, offset, shadowOpacity;\r\n\r\n            if(shape.hasShadow() && shape.getShadowEnabled()) {\r\n                util = Kinetic.Util;\r\n                absOpacity = shape.getAbsoluteOpacity();\r\n                color = util.get(shape.getShadowColor(), 'black');\r\n                blur = util.get(shape.getShadowBlur(), 5);\r\n                shadowOpacity = util.get(shape.getShadowOpacity(), 0);\r\n                offset = util.get(shape.getShadowOffset(), {\r\n                    x: 0,\r\n                    y: 0\r\n                });\r\n\r\n                if(shadowOpacity) {\r\n                    this.setAttr('globalAlpha', shadowOpacity * absOpacity);\r\n                }\r\n\r\n                this.setAttr('shadowColor', color);\r\n                this.setAttr('shadowBlur', blur);\r\n                this.setAttr('shadowOffsetX', offset.x);\r\n                this.setAttr('shadowOffsetY', offset.y);\r\n            }\r\n        }\r\n    };\r\n    Kinetic.Util.extend(Kinetic.SceneContext, Kinetic.Context);\r\n\r\n    Kinetic.HitContext = function(canvas) {\r\n        Kinetic.Context.call(this, canvas);\r\n    };\r\n\r\n    Kinetic.HitContext.prototype = {\r\n        _fill: function(shape) {\r\n            this.save();\r\n            this.setAttr('fillStyle', shape.colorKey);\r\n            shape._fillFuncHit(this);\r\n            this.restore();\r\n        },\r\n        _stroke: function(shape) {\r\n            var stroke = shape.getStroke(),\r\n                strokeWidth = shape.getStrokeWidth();\r\n\r\n            if(stroke || strokeWidth) {\r\n                this._applyLineCap(shape);\r\n                this.setAttr('lineWidth', strokeWidth || 2);\r\n                this.setAttr('strokeStyle', shape.colorKey);\r\n                shape._strokeFuncHit(this);\r\n            }\r\n        }\r\n    };\r\n    Kinetic.Util.extend(Kinetic.HitContext, Kinetic.Context);\r\n})();\r\n; (function() {\r\n    // CONSTANTS\r\n    var ABSOLUTE_OPACITY = 'absoluteOpacity',\r\n        ABSOLUTE_TRANSFORM = 'absoluteTransform',\r\n        ADD = 'add',\r\n        B = 'b',\r\n        BEFORE = 'before',\r\n        BLACK = 'black',\r\n        CHANGE = 'Change',\r\n        CHILDREN = 'children',\r\n        DEG = 'Deg',\r\n        DOT = '.',\r\n        EMPTY_STRING = '',\r\n        G = 'g',\r\n        GET = 'get',\r\n        HASH = '#',\r\n        ID = 'id',\r\n        KINETIC = 'kinetic',\r\n        LISTENING = 'listening',\r\n        MOUSEENTER = 'mouseenter',\r\n        MOUSELEAVE = 'mouseleave',\r\n        NAME = 'name',\r\n        OFF = 'off',\r\n        ON = 'on',\r\n        PRIVATE_GET = '_get',\r\n        R = 'r',\r\n        RGB = 'RGB',\r\n        SET = 'set',\r\n        SHAPE = 'Shape',\r\n        SPACE = ' ',\r\n        STAGE = 'Stage',\r\n        TRANSFORM = 'transform',\r\n        UPPER_B = 'B',\r\n        UPPER_G = 'G',\r\n        UPPER_HEIGHT = 'Height',\r\n        UPPER_R = 'R',\r\n        UPPER_WIDTH = 'Width',\r\n        UPPER_X = 'X',\r\n        UPPER_Y = 'Y',\r\n        VISIBLE = 'visible',\r\n        X = 'x',\r\n        Y = 'y';\r\n\r\n    Kinetic.Factory = {\r\n        // getter setter adders\r\n        addGetterSetter: function(constructor, attr, def) {\r\n            this.addGetter(constructor, attr, def);\r\n            this.addSetter(constructor, attr);\r\n        },\r\n        addPointGetterSetter: function(constructor, attr, def) {\r\n            this.addPointGetter(constructor, attr, def);\r\n            this.addPointSetter(constructor, attr);\r\n\r\n            // add invdividual component getters and setters\r\n            this.addGetter(constructor, attr + UPPER_X, def);\r\n            this.addGetter(constructor, attr + UPPER_Y, def);\r\n            this.addSetter(constructor, attr + UPPER_X);\r\n            this.addSetter(constructor, attr + UPPER_Y);\r\n        },\r\n        addBoxGetterSetter: function(constructor, attr, def) {\r\n            this.addBoxGetter(constructor, attr, def);\r\n            this.addBoxSetter(constructor, attr);\r\n\r\n            // add invdividual component getters and setters\r\n            this.addGetter(constructor, attr + UPPER_X, def);\r\n            this.addGetter(constructor, attr + UPPER_Y, def);\r\n            this.addGetter(constructor, attr + UPPER_WIDTH, def);\r\n            this.addGetter(constructor, attr + UPPER_HEIGHT, def);\r\n\r\n            this.addSetter(constructor, attr + UPPER_X);\r\n            this.addSetter(constructor, attr + UPPER_Y);\r\n            this.addSetter(constructor, attr + UPPER_WIDTH);\r\n            this.addSetter(constructor, attr + UPPER_HEIGHT);\r\n        },\r\n        addPointsGetterSetter: function(constructor, attr) {\r\n            this.addPointsGetter(constructor, attr);\r\n            this.addPointsSetter(constructor, attr);\r\n            this.addPointAdder(constructor, attr);\r\n        },\r\n        addRotationGetterSetter: function(constructor, attr, def) {\r\n            this.addRotationGetter(constructor, attr, def);\r\n            this.addRotationSetter(constructor, attr);\r\n        },\r\n        addColorGetterSetter: function(constructor, attr) {\r\n            this.addGetter(constructor, attr);\r\n            this.addSetter(constructor, attr);\r\n\r\n            // component getters\r\n            this.addColorRGBGetter(constructor, attr);\r\n            this.addColorComponentGetter(constructor, attr, R);\r\n            this.addColorComponentGetter(constructor, attr, G);\r\n            this.addColorComponentGetter(constructor, attr, B);\r\n\r\n            // component setters\r\n            this.addColorRGBSetter(constructor, attr);\r\n            this.addColorComponentSetter(constructor, attr, R);\r\n            this.addColorComponentSetter(constructor, attr, G);\r\n            this.addColorComponentSetter(constructor, attr, B);\r\n        },\r\n\r\n        // getter adders\r\n        addColorRGBGetter: function(constructor, attr) {\r\n            var method = GET + Kinetic.Util._capitalize(attr) + RGB;\r\n            constructor.prototype[method] = function() {\r\n                return Kinetic.Util.getRGB(this.attrs[attr]);\r\n            };\r\n        },\r\n\r\n        addColorComponentGetter: function(constructor, attr, c) {\r\n            var prefix = GET + Kinetic.Util._capitalize(attr),\r\n                method = prefix + Kinetic.Util._capitalize(c);\r\n            constructor.prototype[method] = function() {\r\n                return this[prefix + RGB]()[c];\r\n            };\r\n        },\r\n        addPointsGetter: function(constructor, attr) {\r\n            var that = this,\r\n                method = GET + Kinetic.Util._capitalize(attr);\r\n\r\n            constructor.prototype[method] = function() {\r\n                var val = this.attrs[attr];\r\n                return val === undefined ? [] : val;\r\n            };\r\n        },\r\n        addGetter: function(constructor, attr, def) {\r\n            var that = this,\r\n                method = GET + Kinetic.Util._capitalize(attr);\r\n\r\n            constructor.prototype[method] = function() {\r\n                var val = this.attrs[attr];\r\n                return val === undefined ? def : val;\r\n            };\r\n        },\r\n        addPointGetter: function(constructor, attr) {\r\n            var that = this,\r\n                baseMethod = GET + Kinetic.Util._capitalize(attr);\r\n\r\n            constructor.prototype[baseMethod] = function() {\r\n                var that = this;\r\n                return {\r\n                    x: that[baseMethod + UPPER_X](),\r\n                    y: that[baseMethod + UPPER_Y]()\r\n                };\r\n            };\r\n        },\r\n        addBoxGetter: function(constructor, attr) {\r\n            var that = this,\r\n                baseMethod = GET + Kinetic.Util._capitalize(attr);\r\n\r\n            constructor.prototype[baseMethod] = function() {\r\n                var that = this;\r\n                return {\r\n                    x: that[baseMethod + UPPER_X](),\r\n                    y: that[baseMethod + UPPER_Y](),\r\n                    width: that[baseMethod + UPPER_WIDTH](),\r\n                    height: that[baseMethod + UPPER_HEIGHT]()\r\n                };\r\n            };\r\n        },\r\n        addRotationGetter: function(constructor, attr, def) {\r\n            var that = this,\r\n                method = GET + Kinetic.Util._capitalize(attr);\r\n\r\n            // radians\r\n            constructor.prototype[method] = function() {\r\n                var val = this.attrs[attr];\r\n                if (val === undefined) {\r\n                    val = def;\r\n                }\r\n                return val;\r\n            };\r\n            // degrees\r\n            constructor.prototype[method + DEG] = function() {\r\n                var val = this.attrs[attr];\r\n                if (val === undefined) {\r\n                    val = def;\r\n                }\r\n                return Kinetic.Util._radToDeg(val);\r\n            };\r\n        },\r\n\r\n        // setter adders\r\n        addColorRGBSetter: function(constructor, attr) {\r\n            var method = SET + Kinetic.Util._capitalize(attr) + RGB;\r\n\r\n            constructor.prototype[method] = function(obj) {\r\n                var r = obj && obj.r !== undefined ? obj.r | 0 : this.getAttr(attr + UPPER_R),\r\n                    g = obj && obj.g !== undefined ? obj.g | 0 : this.getAttr(attr + UPPER_G),\r\n                    b = obj && obj.b !== undefined ? obj.b | 0 : this.getAttr(attr + UPPER_B);\r\n\r\n                this._setAttr(attr, HASH + Kinetic.Util._rgbToHex(r, g, b));\r\n            };\r\n        },\r\n\r\n        addColorComponentSetter: function(constructor, attr, c) {\r\n            var prefix = SET + Kinetic.Util._capitalize(attr),\r\n                method = prefix + Kinetic.Util._capitalize(c);\r\n            constructor.prototype[method] = function(val) {\r\n                var obj = {};\r\n                obj[c] = val;\r\n                this[prefix + RGB](obj);\r\n            };\r\n        },\r\n        addPointsSetter: function(constructor, attr) {\r\n            var method = SET + Kinetic.Util._capitalize(attr);\r\n            constructor.prototype[method] = function(val) {\r\n                var points = Kinetic.Util._getPoints(val);\r\n                this._setAttr('points', points);\r\n            };\r\n        },\r\n        addSetter: function(constructor, attr) {\r\n            var method = SET + Kinetic.Util._capitalize(attr);\r\n\r\n            constructor.prototype[method] = function(val) {\r\n                this._setAttr(attr, val);   \r\n            };\r\n        },\r\n        addPointSetter: function(constructor, attr) {\r\n            var that = this,\r\n                baseMethod = SET + Kinetic.Util._capitalize(attr);\r\n\r\n            constructor.prototype[baseMethod] = function() {\r\n                var pos = Kinetic.Util._getXY([].slice.call(arguments)),\r\n                    oldVal = this.attrs[attr],\r\n                    x = 0,\r\n                    y = 0;\r\n\r\n                if (pos) {\r\n                  x = pos.x;\r\n                  y = pos.y;\r\n\r\n                  this._fireBeforeChangeEvent(attr, oldVal, pos);\r\n                  if (x !== undefined) {\r\n                    this[baseMethod + UPPER_X](x);\r\n                  }\r\n                  if (y !== undefined) {\r\n                    this[baseMethod + UPPER_Y](y);\r\n                  }\r\n                  this._fireChangeEvent(attr, oldVal, pos);\r\n                }\r\n            };\r\n        },\r\n        addBoxSetter: function(constructor, attr) {\r\n            var that = this,\r\n                baseMethod = SET + Kinetic.Util._capitalize(attr);\r\n\r\n            constructor.prototype[baseMethod] = function() {\r\n                var config = [].slice.call(arguments),\r\n                    pos = Kinetic.Util._getXY(config),\r\n                    size = Kinetic.Util._getSize(config),\r\n                    both = Kinetic.Util._merge(pos, size),\r\n                    oldVal = this.attrs[attr],\r\n                    x, y, width, height;\r\n\r\n                if (both) {\r\n                  x = both.x;\r\n                  y = both.y;\r\n                  width = both.width;\r\n                  height = both.height;\r\n\r\n                  this._fireBeforeChangeEvent(attr, oldVal, both);\r\n                  if (x !== undefined) {\r\n                    this[baseMethod + UPPER_X](x);\r\n                  }\r\n                  if (y !== undefined) {\r\n                    this[baseMethod + UPPER_Y](y);\r\n                  }\r\n                  if (width !== undefined) {\r\n                    this[baseMethod + UPPER_WIDTH](width);\r\n                  }\r\n                  if (height !== undefined) {\r\n                    this[baseMethod + UPPER_HEIGHT](height);\r\n                  }\r\n                  this._fireChangeEvent(attr, oldVal, both);\r\n                }\r\n            };\r\n        },\r\n        addRotationSetter: function(constructor, attr) {\r\n            var that = this,\r\n                method = SET + Kinetic.Util._capitalize(attr);\r\n\r\n            // radians\r\n            constructor.prototype[method] = function(val) {\r\n                this._setAttr(attr, val);\r\n            };\r\n            // degrees\r\n            constructor.prototype[method + DEG] = function(deg) {\r\n                this._setAttr(attr, Kinetic.Util._degToRad(deg));\r\n            };\r\n        },\r\n\r\n        // add adders\r\n        addPointAdder: function(constructor, attr) {\r\n            var that = this,\r\n                baseMethod = ADD + Kinetic.Util._removeLastLetter(Kinetic.Util._capitalize(attr));\r\n\r\n            constructor.prototype[baseMethod] = function() {\r\n                var pos = Kinetic.Util._getXY([].slice.call(arguments)),\r\n                    oldVal = this.attrs[attr];\r\n\r\n                if (pos) {\r\n                  this._fireBeforeChangeEvent(attr, oldVal, pos);\r\n                  this.attrs[attr].push(pos);\r\n                  this._fireChangeEvent(attr, oldVal, pos);\r\n                }\r\n            };\r\n        }\r\n    };\r\n})();;(function() {\r\n    // CONSTANTS\r\n    var ABSOLUTE_OPACITY = 'absoluteOpacity',\r\n        ABSOLUTE_TRANSFORM = 'absoluteTransform',\r\n        ADD = 'add',\r\n        B = 'b',\r\n        BEFORE = 'before',\r\n        BLACK = 'black',\r\n        CHANGE = 'Change',\r\n        CHILDREN = 'children',\r\n        DEG = 'Deg',\r\n        DOT = '.',\r\n        EMPTY_STRING = '',\r\n        G = 'g',\r\n        GET = 'get',\r\n        HASH = '#',\r\n        ID = 'id',\r\n        KINETIC = 'kinetic',\r\n        LISTENING = 'listening',\r\n        MOUSEENTER = 'mouseenter',\r\n        MOUSELEAVE = 'mouseleave',\r\n        NAME = 'name',\r\n        OFF = 'off',\r\n        ON = 'on',\r\n        PRIVATE_GET = '_get',\r\n        R = 'r',\r\n        RGB = 'RGB',\r\n        SET = 'set',\r\n        SHAPE = 'Shape',\r\n        SPACE = ' ',\r\n        STAGE = 'stage',\r\n        TRANSFORM = 'transform',\r\n        UPPER_B = 'B',\r\n        UPPER_G = 'G',\r\n        UPPER_HEIGHT = 'Height',\r\n        UPPER_R = 'R',\r\n        UPPER_STAGE = 'Stage',\r\n        UPPER_WIDTH = 'Width',\r\n        UPPER_X = 'X',\r\n        UPPER_Y = 'Y',\r\n        VISIBLE = 'visible',\r\n        X = 'x',\r\n        Y = 'y',\r\n\r\n        transformChangeStr = [\r\n            'xChange.kinetic',\r\n            'yChange.kinetic',\r\n            'scaleXChange.kinetic',\r\n            'scaleYChange.kinetic',\r\n            'skewXChange.kinetic',\r\n            'skewYChange.kinetic',\r\n            'rotationChange.kinetic',\r\n            'offsetXChange.kinetic',\r\n            'offsetYChange.kinetic'\r\n        ].join(SPACE);\r\n\r\n    Kinetic.Util.addMethods(Kinetic.Node, {\r\n        _init: function(config) {\r\n            var that = this;\r\n            this._id = Kinetic.idCounter++;\r\n            this.eventListeners = {};\r\n            this.attrs = {};\r\n            this.cache = {};\r\n            this.setAttrs(config);\r\n\r\n            // event bindings for cache handling\r\n            this.on(transformChangeStr, function() {\r\n                this._clearCache(TRANSFORM);\r\n                that._clearSelfAndChildrenCache(ABSOLUTE_TRANSFORM);\r\n            });\r\n            this.on('visibleChange.kinetic', function() {\r\n                that._clearSelfAndChildrenCache(VISIBLE);\r\n            });\r\n            this.on('listeningChange.kinetic', function() {\r\n                that._clearSelfAndChildrenCache(LISTENING);\r\n            });\r\n            this.on('opacityChange.kinetic', function() {\r\n                that._clearSelfAndChildrenCache(ABSOLUTE_OPACITY);\r\n            });\r\n        },\r\n        /**\r\n        * clear cached variables\r\n        * @method\r\n        * @memberof Kinetic.Node.prototype\r\n        * @example\r\n        * node.clearCache();\r\n        */\r\n        clearCache: function() {\r\n            this.cache = {};\r\n        },\r\n        _clearCache: function(attr){\r\n            delete this.cache[attr];\r\n        },\r\n        _getCache: function(attr, privateGetter){\r\n            var cache = this.cache[attr];\r\n\r\n\r\n\r\n            // if not cached, we need to set it using the private getter method.\r\n            if (cache === undefined) {\r\n                this.cache[attr] = privateGetter.call(this);\r\n            }\r\n\r\n            return this.cache[attr];     \r\n        },\r\n        _clearSelfAndChildrenCache: function(attr) {\r\n            var that = this;\r\n            this._clearCache(attr);\r\n\r\n            if (this.children) {\r\n                this.getChildren().each(function(node) {\r\n                  node._clearSelfAndChildrenCache(attr);\r\n                });\r\n            }\r\n        },\r\n        /**\r\n         * bind events to the node. KineticJS supports mouseover, mousemove,\r\n         *  mouseout, mouseenter, mouseleave, mousedown, mouseup, click, dblclick, touchstart, touchmove,\r\n         *  touchend, tap, dbltap, dragstart, dragmove, and dragend events. Pass in a string\r\n         *  of events delimmited by a space to bind multiple events at once\r\n         *  such as 'mousedown mouseup mousemove'. Include a namespace to bind an\r\n         *  event by name such as 'click.foobar'.\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         * @param {String} evtStr e.g. 'click', 'mousedown touchstart', 'mousedown.foo touchstart.foo'\r\n         * @param {Function} handler The handler function is passed an event object\r\n         * @example\r\n         * // add click listener<br>\r\n         * node.on('click', function() {<br>\r\n         *   console.log('you clicked me!');<br>\r\n         * });<br><br>\r\n         *\r\n         * // get the target node<br>\r\n         * node.on('click', function(evt) {<br>\r\n         *   console.log(evt.targetNode);<br>\r\n         * });<br><br>\r\n         *\r\n         * // stop event propagation<br>\r\n         * node.on('click', function(evt) {<br>\r\n         *   evt.cancelBubble = true;<br>\r\n         * });<br><br>\r\n         *\r\n         * // bind multiple listeners<br>\r\n         * node.on('click touchstart', function() {<br>\r\n         *   console.log('you clicked/touched me!');<br>\r\n         * });<br><br>\r\n         *\r\n         * // namespace listener<br>\r\n         * node.on('click.foo', function() {<br>\r\n         *   console.log('you clicked/touched me!');<br>\r\n         * });\r\n         */\r\n        on: function(evtStr, handler) {\r\n            var events = evtStr.split(SPACE),\r\n                len = events.length,\r\n                n, event, parts, baseEvent, name;\r\n\r\n             /*\r\n             * loop through types and attach event listeners to\r\n             * each one.  eg. 'click mouseover.namespace mouseout'\r\n             * will create three event bindings\r\n             */\r\n            for(n = 0; n < len; n++) {\r\n                event = events[n];\r\n                parts = event.split(DOT);\r\n                baseEvent = parts[0];\r\n                name = parts[1] || EMPTY_STRING;\r\n\r\n                // create events array if it doesn't exist\r\n                if(!this.eventListeners[baseEvent]) {\r\n                    this.eventListeners[baseEvent] = [];\r\n                }\r\n\r\n                this.eventListeners[baseEvent].push({\r\n                    name: name,\r\n                    handler: handler\r\n                });\r\n            }\r\n            return this;\r\n        },\r\n        /**\r\n         * remove event bindings from the node. Pass in a string of\r\n         *  event types delimmited by a space to remove multiple event\r\n         *  bindings at once such as 'mousedown mouseup mousemove'.\r\n         *  include a namespace to remove an event binding by name\r\n         *  such as 'click.foobar'. If you only give a name like '.foobar',\r\n         *  all events in that namespace will be removed.\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         * @param {String} evtStr e.g. 'click', 'mousedown touchstart', '.foobar'\r\n         * @example\r\n         * // remove listener<br>\r\n         * node.off('click');<br><br>\r\n         *\r\n         * // remove multiple listeners<br>\r\n         * node.off('click touchstart');<br><br>\r\n         *\r\n         * // remove listener by name<br>\r\n         * node.off('click.foo');\r\n         */\r\n        off: function(evtStr) {\r\n            var events = evtStr.split(SPACE),\r\n                len = events.length,\r\n                n, i, t, event, parts, baseEvent, name;\r\n\r\n            for(n = 0; n < len; n++) {\r\n                event = events[n];\r\n                parts = event.split(DOT);\r\n                baseEvent = parts[0];\r\n                name = parts[1];\r\n\r\n                if(baseEvent) {\r\n                    if(this.eventListeners[baseEvent]) {\r\n                        this._off(baseEvent, name);\r\n                    }\r\n                }\r\n                else {\r\n                    for(t in this.eventListeners) {\r\n                        this._off(t, name);\r\n                    }\r\n                }\r\n            }\r\n            return this;\r\n        },\r\n        /**\r\n         * remove self from parent, but don't destroy\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         * @example\r\n         * node.remove();\r\n         */\r\n        remove: function() {\r\n            var parent = this.getParent();\r\n\r\n            if(parent && parent.children) {\r\n                parent.children.splice(this.index, 1);\r\n                parent._setChildrenIndices();\r\n                delete this.parent;\r\n            }\r\n\r\n            // every cached attr that is calculated via node tree\r\n            // treversal must be cleared when removing a node\r\n            this._clearSelfAndChildrenCache(STAGE);\r\n            this._clearSelfAndChildrenCache(ABSOLUTE_TRANSFORM);\r\n            this._clearSelfAndChildrenCache(VISIBLE);\r\n            this._clearSelfAndChildrenCache(LISTENING);\r\n            this._clearSelfAndChildrenCache(ABSOLUTE_OPACITY);\r\n\r\n            return this;\r\n        },\r\n        /**\r\n         * remove and destroy self\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         * @example\r\n         * node.destroy();\r\n         */\r\n        destroy: function() {\r\n            // remove from ids and names hashes\r\n            Kinetic._removeId(this.getId());\r\n            Kinetic._removeName(this.getName(), this._id);\r\n\r\n            this.remove();\r\n        },\r\n        /**\r\n         * get attr\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         * @param {String} attr\r\n         * @example\r\n         * var x = node.getAttr('x');\r\n         */\r\n        getAttr: function(attr) {\r\n            var method = GET + Kinetic.Util._capitalize(attr);\r\n            if(Kinetic.Util._isFunction(this[method])) {\r\n                return this[method]();\r\n            }\r\n            // otherwise get directly\r\n            else {\r\n                return this.attrs[attr];\r\n            }\r\n        },\r\n        /**\r\n        * get ancestors\r\n        * @method\r\n        * @memberof Kinetic.Node.prototype\r\n        * @example\r\n        * shape.getAncestors().each(function(node) {\r\n        *   console.log(node.getId());\r\n        * })\r\n        */\r\n        getAncestors: function() {\r\n            var parent = this.getParent(),\r\n                ancestors = new Kinetic.Collection();\r\n\r\n            while (parent) {\r\n                ancestors.push(parent);\r\n                parent = parent.getParent();\r\n            }\r\n\r\n            return ancestors;\r\n        },\r\n        /**\r\n         * set attr\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         * @param {String} attr\r\n         * #param {*} val\r\n         * @example\r\n         * node.setAttr('x', 5);\r\n         */\r\n        setAttr: function() {\r\n            var args = Array.prototype.slice.call(arguments),\r\n                attr = args[0],\r\n                method = SET + Kinetic.Util._capitalize(attr),\r\n                func = this[method];\r\n\r\n            args.shift();\r\n            if(Kinetic.Util._isFunction(func)) {\r\n                func.apply(this, args);\r\n            }\r\n            // otherwise set directly\r\n            else {\r\n                this.attrs[attr] = args[0];\r\n            }\r\n            return this;\r\n        },\r\n        /**\r\n         * get attrs object literal\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         */\r\n        getAttrs: function() {\r\n            return this.attrs || {};\r\n        },\r\n        /**\r\n         * set multiple attrs at once using an object literal\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         * @param {Object} config object containing key value pairs\r\n         * @example\r\n         * node.setAttrs({<br>\r\n         *   x: 5,<br>\r\n         *   fill: 'red'<br>\r\n         * });<br>\r\n         */\r\n        setAttrs: function(config) {\r\n            var key, method;\r\n\r\n            if(config) {\r\n                for(key in config) {\r\n                    if (key === CHILDREN) {\r\n\r\n                    }\r\n                    else {\r\n                        method = SET + Kinetic.Util._capitalize(key);\r\n                        // use setter if available\r\n                        if(Kinetic.Util._isFunction(this[method])) {\r\n                            this[method](config[key]);\r\n                        }\r\n                        // otherwise set directly\r\n                        else {\r\n                            this._setAttr(key, config[key]);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return this;\r\n        },\r\n        /**\r\n         * determine if node is listening for events.  The node is listening only\r\n         *  if it's listening and all of its ancestors are listening.  If an ancestor\r\n         *  is listening, this means that the node is also listening\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         */\r\n        isListening: function() {\r\n          return this._getCache(LISTENING, this._isListening);\r\n        },\r\n        _isListening: function() {\r\n            var listening = this.getListening(),\r\n                parent = this.getParent();\r\n\r\n            if(listening && parent && !parent.isListening()) {\r\n                return false;\r\n            }\r\n            return listening;\r\n        },\r\n        /**\r\n         * determine if node is visible or not.  Node is visible only\r\n         *  if it's visible and all of its ancestors are visible.  If an ancestor\r\n         *  is invisible, this means that the node is also invisible\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         */\r\n        isVisible: function() {\r\n          return this._getCache(VISIBLE, this._isVisible);\r\n        },\r\n        _isVisible: function() {\r\n            var visible = this.getVisible(),\r\n                parent = this.getParent();\r\n\r\n            if(visible && parent && !parent.isVisible()) {\r\n                return false;\r\n            }\r\n            return visible;\r\n        },\r\n        /**\r\n         * show node\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         */\r\n        show: function() {\r\n            this.setVisible(true);\r\n            return this;\r\n        },\r\n        /**\r\n         * hide node.  Hidden nodes are no longer detectable\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         */\r\n        hide: function() {\r\n            this.setVisible(false);\r\n            return this;\r\n        },\r\n        /**\r\n         * get zIndex relative to the node's siblings who share the same parent\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         */\r\n        getZIndex: function() {\r\n            return this.index || 0;\r\n        },\r\n        /**\r\n         * get absolute z-index which takes into account sibling\r\n         *  and ancestor indices\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         */\r\n        getAbsoluteZIndex: function() {\r\n            var level = this.getLevel(),\r\n                that = this,\r\n                index = 0,\r\n                nodes, len, n, child;\r\n\r\n            function addChildren(children) {\r\n                nodes = [];\r\n                len = children.length;\r\n                for(n = 0; n < len; n++) {\r\n                    child = children[n];\r\n                    index++;\r\n\r\n                    if(child.nodeType !== SHAPE) {\r\n                        nodes = nodes.concat(child.getChildren().toArray());\r\n                    }\r\n\r\n                    if(child._id === that._id) {\r\n                        n = len;\r\n                    }\r\n                }\r\n\r\n                if(nodes.length > 0 && nodes[0].getLevel() <= level) {\r\n                    addChildren(nodes);\r\n                }\r\n            }\r\n            if(that.nodeType !== UPPER_STAGE) {\r\n                addChildren(that.getStage().getChildren());\r\n            }\r\n\r\n            return index;\r\n        },\r\n        /**\r\n         * get node level in node tree.  Returns an integer.<br><br>\r\n         *  e.g. Stage level will always be 0.  Layers will always be 1.  Groups and Shapes will always\r\n         *  be >= 2\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         */\r\n        getLevel: function() {\r\n            var level = 0,\r\n                parent = this.parent;\r\n\r\n            while(parent) {\r\n                level++;\r\n                parent = parent.parent;\r\n            }\r\n            return level;\r\n        },\r\n        /**\r\n         * set node position relative to parent\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         * @param {Number} x\r\n         * @param {Number} y\r\n         * @example\r\n         * // set x and y<br>\r\n         * node.setPosition(5, 10);<br><br>\r\n         *\r\n         * // set x only<br>\r\n         * node.setPosition({<br>\r\n         *   x: 5<br>\r\n         * });<br><br>\r\n         *\r\n         * // set x and y using an array<br>\r\n         * node.setPosition([5, 10]);<br><br>\r\n         *\r\n         * // set both x and y to 5<br>\r\n         * node.setPosition(5);\r\n         */\r\n        setPosition: function() {\r\n            var pos = Kinetic.Util._getXY([].slice.call(arguments));\r\n            this.setX(pos.x);\r\n            this.setY(pos.y);\r\n            return this;\r\n        },\r\n        /**\r\n         * get node position relative to parent\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         */\r\n        getPosition: function() {\r\n            return {\r\n                x: this.getX(),\r\n                y: this.getY()\r\n            };\r\n        },\r\n        /**\r\n         * get absolute position relative to the top left corner of the stage container div\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         */\r\n        getAbsolutePosition: function() {\r\n            var absoluteMatrix = this.getAbsoluteTransform().getMatrix(),\r\n                absoluteTransform = new Kinetic.Transform(),\r\n                o = this.getOffset();\r\n\r\n            // clone the matrix array\r\n            absoluteTransform.m = absoluteMatrix.slice();\r\n\r\n            absoluteTransform.translate(o.x, o.y);\r\n\r\n            return absoluteTransform.getTranslation();\r\n        },\r\n        /**\r\n         * set absolute position\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         * @param {Number} x\r\n         * @param {Number} y\r\n         */\r\n        setAbsolutePosition: function() {\r\n            var pos = Kinetic.Util._getXY([].slice.call(arguments)),\r\n                trans = this._clearTransform(),\r\n                it;\r\n\r\n            // don't clear translation\r\n            this.attrs.x = trans.x;\r\n            this.attrs.y = trans.y;\r\n            delete trans.x;\r\n            delete trans.y;\r\n\r\n            // unravel transform\r\n            it = this.getAbsoluteTransform();\r\n\r\n            it.invert();\r\n            it.translate(pos.x, pos.y);\r\n            pos = {\r\n                x: this.attrs.x + it.getTranslation().x,\r\n                y: this.attrs.y + it.getTranslation().y\r\n            };\r\n\r\n            this.setPosition(pos.x, pos.y);\r\n            this._setTransform(trans);\r\n            return this;\r\n        },\r\n        _setTransform: function(trans) {\r\n            var key;\r\n\r\n            for(key in trans) {\r\n                this.attrs[key] = trans[key];\r\n            }\r\n\r\n            this._clearCache(TRANSFORM);\r\n            this._clearSelfAndChildrenCache(ABSOLUTE_TRANSFORM);\r\n        },\r\n        _clearTransform: function() {\r\n            var trans = {\r\n                x: this.getX(),\r\n                y: this.getY(),\r\n                rotation: this.getRotation(),\r\n                scaleX: this.getScaleX(),\r\n                scaleY: this.getScaleY(),\r\n                offsetX: this.getOffsetX(),\r\n                offsetY: this.getOffsetY(),\r\n                skewX: this.getSkewX(),\r\n                skewY: this.getSkewY()\r\n            };\r\n\r\n            this.attrs.x = 0;\r\n            this.attrs.y = 0;\r\n            this.attrs.rotation = 0;\r\n            this.attrs.scaleX = 1;\r\n            this.attrs.scaleY = 1;\r\n            this.attrs.offsetX = 0;\r\n            this.attrs.offsetY = 0;\r\n            this.attrs.skewX = 0;\r\n            this.attrs.skewY = 0;\r\n\r\n            this._clearCache(TRANSFORM);\r\n            this._clearSelfAndChildrenCache(ABSOLUTE_TRANSFORM);\r\n\r\n            return trans;\r\n        },\r\n        /**\r\n         * move node by an amount relative to its current position\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         * @param {Number} x\r\n         * @param {Number} y\r\n         * @example\r\n         * // move node in x direction by 1px and y direction by 2px<br>\r\n         * node.move(1, 2);<br><br>\r\n         *\r\n         * // move node in x direction by 1px<br>\r\n         * node.move({<br>\r\n         *   x: 1<br>\r\n         * });\r\n         */\r\n        move: function() {\r\n            var pos = Kinetic.Util._getXY([].slice.call(arguments)),\r\n                x = this.getX(),\r\n                y = this.getY();\r\n\r\n            if(pos.x !== undefined) {\r\n                x += pos.x;\r\n            }\r\n\r\n            if(pos.y !== undefined) {\r\n                y += pos.y;\r\n            }\r\n\r\n            this.setPosition(x, y);\r\n            return this;\r\n        },\r\n        _eachAncestorReverse: function(func, includeSelf) {\r\n            var family = [],\r\n                parent = this.getParent(),\r\n                len, n;\r\n\r\n            // build family by traversing ancestors\r\n            if(includeSelf) {\r\n                family.unshift(this);\r\n            }\r\n            while(parent) {\r\n                family.unshift(parent);\r\n                parent = parent.parent;\r\n            }\r\n\r\n            len = family.length;\r\n            for(n = 0; n < len; n++) {\r\n                func(family[n]);\r\n            }\r\n        },\r\n        /**\r\n         * rotate node by an amount in radians relative to its current rotation\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         * @param {Number} theta\r\n         */\r\n        rotate: function(theta) {\r\n            this.setRotation(this.getRotation() + theta);\r\n            return this;\r\n        },\r\n        /**\r\n         * rotate node by an amount in degrees relative to its current rotation\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         * @param {Number} deg\r\n         */\r\n        rotateDeg: function(deg) {\r\n            this.setRotation(this.getRotation() + Kinetic.Util._degToRad(deg));\r\n            return this;\r\n        },\r\n        /**\r\n         * move node to the top of its siblings\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         */\r\n        moveToTop: function() {\r\n            var index = this.index;\r\n            this.parent.children.splice(index, 1);\r\n            this.parent.children.push(this);\r\n            this.parent._setChildrenIndices();\r\n            return true;\r\n        },\r\n        /**\r\n         * move node up\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         */\r\n        moveUp: function() {\r\n            var index = this.index,\r\n                len = this.parent.getChildren().length;\r\n            if(index < len - 1) {\r\n                this.parent.children.splice(index, 1);\r\n                this.parent.children.splice(index + 1, 0, this);\r\n                this.parent._setChildrenIndices();\r\n                return true;\r\n            }\r\n            return false;\r\n        },\r\n        /**\r\n         * move node down\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         */\r\n        moveDown: function() {\r\n            var index = this.index;\r\n            if(index > 0) {\r\n                this.parent.children.splice(index, 1);\r\n                this.parent.children.splice(index - 1, 0, this);\r\n                this.parent._setChildrenIndices();\r\n                return true;\r\n            }\r\n            return false;\r\n        },\r\n        /**\r\n         * move node to the bottom of its siblings\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         */\r\n        moveToBottom: function() {\r\n            var index = this.index;\r\n            if(index > 0) {\r\n                this.parent.children.splice(index, 1);\r\n                this.parent.children.unshift(this);\r\n                this.parent._setChildrenIndices();\r\n                return true;\r\n            }\r\n            return false;\r\n        },\r\n        /**\r\n         * set zIndex relative to siblings\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         * @param {Integer} zIndex\r\n         */\r\n        setZIndex: function(zIndex) {\r\n            var index = this.index;\r\n            this.parent.children.splice(index, 1);\r\n            this.parent.children.splice(zIndex, 0, this);\r\n            this.parent._setChildrenIndices();\r\n            return this;\r\n        },\r\n        /**\r\n         * get absolute opacity\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         */\r\n        getAbsoluteOpacity: function() {\r\n            return this._getCache(ABSOLUTE_OPACITY, this._getAbsoluteOpacity);\r\n        },\r\n        _getAbsoluteOpacity: function() {\r\n            var absOpacity = this.getOpacity();\r\n            if(this.getParent()) {\r\n                absOpacity *= this.getParent().getAbsoluteOpacity();\r\n            }\r\n            return absOpacity;\r\n        },\r\n        /**\r\n         * move node to another container\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         * @param {Container} newContainer\r\n         * @example\r\n         * // move node from current layer into layer2<br>\r\n         * node.moveTo(layer2);\r\n         */\r\n        moveTo: function(newContainer) {\r\n            Kinetic.Node.prototype.remove.call(this);\r\n            newContainer.add(this);\r\n            return this;\r\n        },\r\n        /**\r\n         * convert Node into an object for serialization.  Returns an object.\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         */\r\n        toObject: function() {\r\n            var type = Kinetic.Util,\r\n                obj = {},\r\n                attrs = this.getAttrs(),\r\n                key, val;\r\n\r\n            obj.attrs = {};\r\n\r\n            // serialize only attributes that are not function, image, DOM, or objects with methods\r\n            for(key in attrs) {\r\n                val = attrs[key];\r\n                if(!type._isFunction(val) && !type._isElement(val) && !(type._isObject(val) && type._hasMethods(val))) {\r\n                    obj.attrs[key] = val;\r\n                }\r\n            }\r\n\r\n            obj.className = this.getClassName();\r\n            return obj;\r\n        },\r\n        /**\r\n         * convert Node into a JSON string.  Returns a JSON string.\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         */\r\n        toJSON: function() {\r\n            return JSON.stringify(this.toObject());\r\n        },\r\n        /**\r\n         * get parent container\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         */\r\n        getParent: function() {\r\n            return this.parent;\r\n        },\r\n        /**\r\n         * get layer ancestor\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         */\r\n        getLayer: function() {\r\n            return this.getParent().getLayer();\r\n        },\r\n        /**\r\n         * get stage ancestor\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         */\r\n        getStage: function() {\r\n            return this._getCache(STAGE, this._getStage);\r\n        },\r\n        _getStage: function() {\r\n            var parent = this.getParent();\r\n            if(parent) {\r\n                return parent.getStage();\r\n            }\r\n            else {\r\n                return undefined;\r\n            }\r\n        },\r\n        /**\r\n         * fire event\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         * @param {String} eventType event type.  can be a regular event, like click, mouseover, or mouseout, or it can be a custom event, like myCustomEvent\r\n         * @param {EventObject} evt event object\r\n         * @param {Boolean} bubble setting the value to false, or leaving it undefined, will result in the event\r\n         *  not bubbling.  Setting the value to true will result in the event bubbling.\r\n         * @example\r\n         * // manually fire click event<br>\r\n         * node.fire('click');<br><br>\r\n         *\r\n         * // fire custom event<br>\r\n         * node.fire('foo');<br><br>\r\n         *\r\n         * // fire custom event with custom event object<br>\r\n         * node.fire('foo', {<br>\r\n         *   bar: 10<br>\r\n         * });<br><br>\r\n         *\r\n         * // fire click event that bubbles<br>\r\n         * node.fire('click', null, true);\r\n         */\r\n        fire: function(eventType, evt, bubble) {\r\n            // bubble\r\n            if (bubble) {\r\n                this._fireAndBubble(eventType, evt || {});\r\n            }\r\n            // no bubble\r\n            else {\r\n                this._fire(eventType, evt || {});\r\n            }\r\n            return this;\r\n        },\r\n        /**\r\n         * get absolute transform of the node which takes into\r\n         *  account its ancestor transforms\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         */\r\n        getAbsoluteTransform: function() {\r\n            return this._getCache(ABSOLUTE_TRANSFORM, this._getAbsoluteTransform);\r\n        },\r\n        _getAbsoluteTransform: function() {\r\n            // absolute transform\r\n            var am = new Kinetic.Transform(),\r\n                m;\r\n\r\n            this._eachAncestorReverse(function(node) {\r\n                m = node.getTransform();\r\n                am.multiply(m);\r\n            }, true);\r\n            return am;\r\n        },\r\n        _getTransform: function() {\r\n            var m = new Kinetic.Transform(),\r\n                x = this.getX(),\r\n                y = this.getY(),\r\n                rotation = this.getRotation(),\r\n                scaleX = this.getScaleX(),\r\n                scaleY = this.getScaleY(),\r\n                skewX = this.getSkewX(),\r\n                skewY = this.getSkewY(),\r\n                offsetX = this.getOffsetX(),\r\n                offsetY = this.getOffsetY();\r\n\r\n            if(x !== 0 || y !== 0) {\r\n                m.translate(x, y);\r\n            }\r\n            if(rotation !== 0) {\r\n                m.rotate(rotation);\r\n            }\r\n            if(skewX !== 0 || skewY !== 0) {\r\n                m.skew(skewX, skewY);\r\n            }\r\n            if(scaleX !== 1 || scaleY !== 1) {\r\n                m.scale(scaleX, scaleY);\r\n            }\r\n            if(offsetX !== 0 || offsetY !== 0) {\r\n                m.translate(-1 * offsetX, -1 * offsetY);\r\n            }\r\n\r\n            return m;\r\n        },\r\n        /**\r\n         * clone node.  Returns a new Node instance with identical attributes.  You can also override\r\n         *  the node properties with an object literal, enabling you to use an existing node as a template\r\n         *  for another node\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         * @param {Object} attrs override attrs\r\n         * @example\r\n         * // simple clone<br>\r\n         * var clone = node.clone();<br><br>\r\n         *\r\n         * // clone a node and override the x position<br>\r\n         * var clone = rect.clone({<br>\r\n         *   x: 5<br>\r\n         * });\r\n         */\r\n        clone: function(obj) {\r\n            // instantiate new node\r\n            var className = this.getClassName(),\r\n                node = new Kinetic[className](this.attrs),\r\n                key, allListeners, len, n, listener;\r\n\r\n            // copy over listeners\r\n            for(key in this.eventListeners) {\r\n                allListeners = this.eventListeners[key];\r\n                len = allListeners.length;\r\n                for(n = 0; n < len; n++) {\r\n                    listener = allListeners[n];\r\n                    /*\r\n                     * don't include kinetic namespaced listeners because\r\n                     *  these are generated by the constructors\r\n                     */\r\n                    if(listener.name.indexOf(KINETIC) < 0) {\r\n                        // if listeners array doesn't exist, then create it\r\n                        if(!node.eventListeners[key]) {\r\n                            node.eventListeners[key] = [];\r\n                        }\r\n                        node.eventListeners[key].push(listener);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // apply attr overrides\r\n            node.setAttrs(obj);\r\n            return node;\r\n        },\r\n        /**\r\n         * Creates a composite data URL. If MIME type is not\r\n         * specified, then \"image/png\" will result. For \"image/jpeg\", specify a quality\r\n         * level as quality (range 0.0 - 1.0)\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         * @param {Object} config\r\n         * @param {Function} config.callback function executed when the composite has completed\r\n         * @param {String} [config.mimeType] can be \"image/png\" or \"image/jpeg\".\r\n         *  \"image/png\" is the default\r\n         * @param {Number} [config.x] x position of canvas section\r\n         * @param {Number} [config.y] y position of canvas section\r\n         * @param {Number} [config.width] width of canvas section\r\n         * @param {Number} [config.height] height of canvas section\r\n         * @param {Number} [config.quality] jpeg quality.  If using an \"image/jpeg\" mimeType,\r\n         *  you can specify the quality from 0 to 1, where 0 is very poor quality and 1\r\n         *  is very high quality\r\n         */\r\n        toDataURL: function(config) {\r\n            config = config || {};\r\n\r\n            var mimeType = config.mimeType || null,\r\n                quality = config.quality || null,\r\n                stage = this.getStage(),\r\n                x = config.x || 0,\r\n                y = config.y || 0,\r\n                canvas = new Kinetic.SceneCanvas({\r\n                    width: config.width || stage.getWidth(),\r\n                    height: config.height || stage.getHeight(),\r\n                    pixelRatio: 1\r\n                }),\r\n                context = canvas.getContext();\r\n\r\n            context.save();\r\n\r\n            if(x || y) {\r\n                context.translate(-1 * x, -1 * y);\r\n            }\r\n\r\n            this.drawScene(canvas);\r\n            context.restore();\r\n\r\n            return canvas.toDataURL(mimeType, quality);\r\n        },\r\n        /**\r\n         * converts node into an image.  Since the toImage\r\n         *  method is asynchronous, a callback is required.  toImage is most commonly used\r\n         *  to cache complex drawings as an image so that they don't have to constantly be redrawn\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         * @param {Object} config\r\n         * @param {Function} config.callback function executed when the composite has completed\r\n         * @param {String} [config.mimeType] can be \"image/png\" or \"image/jpeg\".\r\n         *  \"image/png\" is the default\r\n         * @param {Number} [config.x] x position of canvas section\r\n         * @param {Number} [config.y] y position of canvas section\r\n         * @param {Number} [config.width] width of canvas section\r\n         * @param {Number} [config.height] height of canvas section\r\n         * @param {Number} [config.quality] jpeg quality.  If using an \"image/jpeg\" mimeType,\r\n         *  you can specify the quality from 0 to 1, where 0 is very poor quality and 1\r\n         *  is very high quality\r\n         * @example\r\n         * var image = node.toImage({<br>\r\n         *   callback: function(img) {<br>\r\n         *     // do stuff with img<br>\r\n         *   }<br>\r\n         * });\r\n         */\r\n        toImage: function(config) {\r\n            Kinetic.Util._getImage(this.toDataURL(config), function(img) {\r\n                config.callback(img);\r\n            });\r\n        },\r\n        /**\r\n         * set size\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         * @param {Number} width\r\n         * @param {Number} height\r\n         */\r\n        setSize: function() {\r\n            // set stage dimensions\r\n            var size = Kinetic.Util._getSize(Array.prototype.slice.call(arguments));\r\n            this.setWidth(size.width);\r\n            this.setHeight(size.height);\r\n            return this;\r\n        },\r\n        /**\r\n         * get size\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         */\r\n        getSize: function() {\r\n            return {\r\n                width: this.getWidth(),\r\n                height: this.getHeight()\r\n            };\r\n        },\r\n        /**\r\n         * get width\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         */\r\n        getWidth: function() {\r\n            return this.attrs.width || 0;\r\n        },\r\n        /**\r\n         * get height\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         */\r\n        getHeight: function() {\r\n            return this.attrs.height || 0;\r\n        },\r\n        /**\r\n         * get class name, which may return Stage, Layer, Group, or shape class names like Rect, Circle, Text, etc.\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         */\r\n        getClassName: function() {\r\n            return this.className || this.nodeType;\r\n        },\r\n        /**\r\n         * get the node type, which may return Stage, Layer, Group, or Node\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         */\r\n        getType: function() {\r\n            return this.nodeType;\r\n        },\r\n        _get: function(selector) {\r\n            return this.nodeType === selector ? [this] : [];\r\n        },\r\n        _off: function(type, name) {\r\n            var evtListeners = this.eventListeners[type],\r\n                i, evtName;\r\n\r\n            for(i = 0; i < evtListeners.length; i++) {\r\n                evtName = evtListeners[i].name;\r\n                // the following two conditions must be true in order to remove a handler:\r\n                // 1) the current event name cannot be kinetic unless the event name is kinetic\r\n                //    this enables developers to force remove a kinetic specific listener for whatever reason\r\n                // 2) an event name is not specified, or if one is specified, it matches the current event name\r\n                if((evtName !== 'kinetic' || name === 'kinetic') && (!name || evtName === name)) {\r\n                    evtListeners.splice(i, 1);\r\n                    if(evtListeners.length === 0) {\r\n                        delete this.eventListeners[type];\r\n                        break;\r\n                    }\r\n                    i--;\r\n                }\r\n            }\r\n        },\r\n        _fireBeforeChangeEvent: function(attr, oldVal, newVal) {\r\n            this._fire(BEFORE + Kinetic.Util._capitalize(attr) + CHANGE, {\r\n                oldVal: oldVal,\r\n                newVal: newVal\r\n            });\r\n        },\r\n        _fireChangeEvent: function(attr, oldVal, newVal) {\r\n            this._fire(attr + CHANGE, {\r\n                oldVal: oldVal,\r\n                newVal: newVal\r\n            });\r\n        },\r\n        /**\r\n         * set id\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         * @param {String} id\r\n         */\r\n        setId: function(id) {\r\n            var oldId = this.getId();\r\n\r\n            Kinetic._removeId(oldId);\r\n            Kinetic._addId(this, id);\r\n            this._setAttr(ID, id);\r\n            return this;\r\n        },\r\n        /**\r\n         * set name\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         * @param {String} name\r\n         */\r\n        setName: function(name) {\r\n            var oldName = this.getName();\r\n\r\n            Kinetic._removeName(oldName, this._id);\r\n            Kinetic._addName(this, name);\r\n            this._setAttr(NAME, name);\r\n            return this;\r\n        },\r\n        _setAttr: function(key, val) {\r\n            var oldVal;\r\n            if(val !== undefined) {\r\n                oldVal = this.attrs[key];\r\n                this._fireBeforeChangeEvent(key, oldVal, val);\r\n                this.attrs[key] = val;\r\n                this._fireChangeEvent(key, oldVal, val);\r\n            }\r\n        },\r\n        _fireAndBubble: function(eventType, evt, compareShape) {\r\n            var okayToRun = true;\r\n\r\n            if(evt && this.nodeType === SHAPE) {\r\n                evt.targetNode = this;\r\n            }\r\n\r\n            if(eventType === MOUSEENTER && compareShape && this._id === compareShape._id) {\r\n                okayToRun = false;\r\n            }\r\n            else if(eventType === MOUSELEAVE && compareShape && this._id === compareShape._id) {\r\n                okayToRun = false;\r\n            }\r\n\r\n            if(okayToRun) {\r\n                this._fire(eventType, evt);\r\n\r\n                // simulate event bubbling\r\n                if(evt && !evt.cancelBubble && this.parent) {\r\n                    if(compareShape && compareShape.parent) {\r\n                        this._fireAndBubble.call(this.parent, eventType, evt, compareShape.parent);\r\n                    }\r\n                    else {\r\n                        this._fireAndBubble.call(this.parent, eventType, evt);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        _fire: function(eventType, evt) {\r\n            var events = this.eventListeners[eventType],\r\n                len, i;\r\n\r\n            if (events) {\r\n                len = events.length;\r\n                for(i = 0; i < len; i++) {\r\n                    events[i].handler.call(this, evt);\r\n                }\r\n            }\r\n        },\r\n        /*\r\n         * draw both scene and hit graphs.  If the node being drawn is the stage, all of the layers will be cleared and redra\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         *  the scene renderer\r\n         */\r\n        draw: function() {\r\n            this.drawScene();\r\n            this.drawHit();\r\n            return this;\r\n        },\r\n        shouldDrawHit: function() {\r\n            return this.isListening() && this.isVisible() && !Kinetic.isDragging();\r\n        },\r\n        isDraggable: function() {\r\n            return false;\r\n        },\r\n        /**\r\n         * get transform of the node\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         */\r\n        getTransform: function() {\r\n            //return this._getTransform();\r\n            return this._getCache(TRANSFORM, this._getTransform);\r\n        }\r\n    });\r\n\r\n    /**\r\n     * create node with JSON string.  De-serializtion does not generate custom\r\n     *  shape drawing functions, images, or event handlers (this would make the\r\n     *  serialized object huge).  If your app uses custom shapes, images, and\r\n     *  event handlers (it probably does), then you need to select the appropriate\r\n     *  shapes after loading the stage and set these properties via on(), setDrawFunc(),\r\n     *  and setImage() methods\r\n     * @method\r\n     * @memberof Kinetic.Node\r\n     * @param {String} JSON string\r\n     * @param {DomElement} [container] optional container dom element used only if you're\r\n     *  creating a stage node\r\n     */\r\n    Kinetic.Node.create = function(json, container) {\r\n        return this._createNode(JSON.parse(json), container);\r\n    };\r\n    Kinetic.Node._createNode = function(obj, container) {\r\n        var className = Kinetic.Node.prototype.getClassName.call(obj),\r\n            children = obj.children,\r\n            no, len, n;\r\n\r\n        // if container was passed in, add it to attrs\r\n        if(container) {\r\n            obj.attrs.container = container;\r\n        }\r\n\r\n        no = new Kinetic[className](obj.attrs);\r\n        if(children) {\r\n            len = children.length;\r\n            for(n = 0; n < len; n++) {\r\n                no.add(this._createNode(children[n]));\r\n            }\r\n        }\r\n\r\n        return no;\r\n    };\r\n    // add getters setters\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Node, 'x', 0);\r\n\r\n    /**\r\n     * set x position\r\n     * @name setX\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     * @param {Number} x\r\n     */\r\n\r\n    /**\r\n     * get x position\r\n     * @name getX\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Node, 'y', 0);\r\n\r\n    /**\r\n     * set y position\r\n     * @name setY\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     * @param {Number} y\r\n     */\r\n\r\n    /**\r\n     * get y position\r\n     * @name getY\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Node, 'opacity', 1);\r\n\r\n    /**\r\n     * set opacity.  Opacity values range from 0 to 1.\r\n     *  A node with an opacity of 0 is fully transparent, and a node\r\n     *  with an opacity of 1 is fully opaque\r\n     * @name setOpacity\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     * @param {Object} opacity\r\n     */\r\n\r\n    /**\r\n     * get opacity.\r\n     * @name getOpacity\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetter(Kinetic.Node, 'name');\r\n\r\n     /**\r\n     * get name\r\n     * @name getName\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetter(Kinetic.Node, 'id');\r\n\r\n    /**\r\n     * get id\r\n     * @name getId\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addRotationGetterSetter(Kinetic.Node, 'rotation', 0);\r\n\r\n    /**\r\n     * set rotation in radians\r\n     * @name setRotation\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     * @param {Number} theta\r\n     */\r\n\r\n    /**\r\n     * set rotation in degrees\r\n     * @name setRotationDeg\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     * @param {Number} deg\r\n     */\r\n\r\n    /**\r\n     * get rotation in degrees\r\n     * @name getRotationDeg\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     */\r\n\r\n    /**\r\n     * get rotation in radians\r\n     * @name getRotation\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addPointGetterSetter(Kinetic.Node, 'scale', 1);\r\n\r\n    /**\r\n     * set scale\r\n     * @name setScale\r\n     * @param {Number} scale\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     * @example\r\n     * // set x and y to the same value<br>\r\n     * shape.setScale(5);<br><br>\r\n     *\r\n     * // set x and y<br>\r\n     * shape.setScale(20, 40);<br><br>\r\n     *\r\n     * // set x only <br>\r\n     * shape.setScale({<br>\r\n     *   x: 20<br>\r\n     * });<br><br>\r\n     *\r\n     * // set x and y using an array<br>\r\n     * shape.setScale([20, 40]);\r\n     */\r\n\r\n     /**\r\n     * set scale x\r\n     * @name setScaleX\r\n     * @param {Number} x\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     */\r\n\r\n     /**\r\n     * set scale y\r\n     * @name setScaleY\r\n     * @param {Number} y\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     */\r\n\r\n    /**\r\n     * get scale\r\n     * @name getScale\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     */\r\n\r\n     /**\r\n     * get scale x\r\n     * @name getScaleX\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     */\r\n\r\n     /**\r\n     * get scale y\r\n     * @name getScaleY\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addPointGetterSetter(Kinetic.Node, 'skew', 0);\r\n\r\n    /**\r\n     * set skew\r\n     * @name setSkew\r\n     * @param {Number} x\r\n     * @param {Number} y\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     * @example\r\n     * // set x and y<br>\r\n     * shape.setSkew(20, 40);<br><br>\r\n     *\r\n     * // set x only <br>\r\n     * shape.setSkew({<br>\r\n     *   x: 20<br>\r\n     * });<br><br>\r\n     *\r\n     * // set x and y using an array<br>\r\n     * shape.setSkew([20, 40]);<br><br>\r\n     *\r\n     * // set x and y to the same value<br>\r\n     * shape.setSkew(5);\r\n     */\r\n\r\n     /**\r\n     * set skew x\r\n     * @name setSkewX\r\n     * @param {Number} x\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     */\r\n\r\n     /**\r\n     * set skew y\r\n     * @name setSkewY\r\n     * @param {Number} y\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     */\r\n\r\n    /**\r\n     * get skew\r\n     * @name getSkew\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     */\r\n\r\n     /**\r\n     * get skew x\r\n     * @name getSkewX\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     */\r\n\r\n     /**\r\n     * get skew y\r\n     * @name getSkewY\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addPointGetterSetter(Kinetic.Node, 'offset', 0);\r\n\r\n    /**\r\n     * set offset.  A node's offset defines the position and rotation point\r\n     * @name setOffset\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     * @param {Number} x\r\n     * @param {Number} y\r\n     * @example\r\n     * // set x and y<br>\r\n     * shape.setOffset(20, 40);<br><br>\r\n     *\r\n     * // set x only <br>\r\n     * shape.setOffset({<br>\r\n     *   x: 20<br>\r\n     * });<br><br>\r\n     *\r\n     * // set x and y using an array<br>\r\n     * shape.setOffset([20, 40]);<br><br>\r\n     *\r\n     * // set x and y to the same value<br>\r\n     * shape.setOffset(5);\r\n     */\r\n\r\n     /**\r\n     * set offset x\r\n     * @name setOffsetX\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     * @param {Number} x\r\n     */\r\n\r\n     /**\r\n     * set offset y\r\n     * @name setOffsetY\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     * @param {Number} y\r\n     */\r\n\r\n    /**\r\n     * get offset\r\n     * @name getOffset\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     */\r\n\r\n     /**\r\n     * get offset x\r\n     * @name getOffsetX\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     */\r\n\r\n     /**\r\n     * get offset y\r\n     * @name getOffsetY\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addSetter(Kinetic.Node, 'width');\r\n\r\n    /**\r\n     * set width\r\n     * @name setWidth\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     * @param {Number} width\r\n     */\r\n\r\n    Kinetic.Factory.addSetter(Kinetic.Node, 'height');\r\n\r\n    /**\r\n     * set height\r\n     * @name setHeight\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     * @param {Number} height\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Node, 'listening', true);\r\n\r\n    /**\r\n     * listen or don't listen to events\r\n     * @name setListening\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     * @param {Boolean} listening\r\n     */\r\n\r\n    /**\r\n     * determine if node is listening or not.  Node can be listening even if its ancestors\r\n     *  are not listening\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Node, 'visible', true);\r\n\r\n    /**\r\n     * set visible\r\n     * @name setVisible\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     * @param {Boolean} visible\r\n     */\r\n\r\n    /**\r\n     * get visible property for the node.  If you need to determine if the node is actually visible,\r\n     * use the isVisible() method because it takes ancestors into account\r\n     * @name getVisible\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     */\r\n\r\n    Kinetic.Collection.mapMethods([\r\n        'on',\r\n        'off',\r\n        'remove',\r\n        'destroy',\r\n        'show',\r\n        'hide',\r\n        'move',\r\n        'rotate',\r\n        'moveToTop',\r\n        'moveUp',\r\n        'moveDown',\r\n        'moveToBottom',\r\n        'moveTo',\r\n        'fire',\r\n        'draw'\r\n    ]);\r\n})();\r\n;(function() {\r\n    var BATCH_DRAW_STOP_TIME_DIFF = 500;\r\n\r\n    /**\r\n     * Animation constructor.  A stage is used to contain multiple layers and handle\r\n     * @constructor\r\n     * @memberof Kinetic\r\n     * @param {Function} func function executed on each animation frame.  The function is passed a frame object, which contains\r\n     *  timeDiff, lastTime, time, and frameRate properties.  The timeDiff property is the number of milliseconds that have passed\r\n     *  since the last animation frame.  The lastTime property is time in milliseconds that elapsed from the moment the animation started\r\n     *  to the last animation frame.  The time property is the time in milliseconds that ellapsed from the moment the animation started\r\n     *  to the current animation frame.  The frameRate property is the current frame rate in frames / second\r\n     * @param {Kinetic.Layer|Array} [layers] layer(s) to be redrawn on each animation frame. Can be a layer, an array of layers, or null.\r\n     *  Not specifying a node will result in no redraw.\r\n     * @example\r\n     * // move a node to the right at 50 pixels / second<br>\r\n     * var velocity = 50;<br><br>\r\n     *\r\n     * var anim = new Kinetic.Animation(function(frame) {<br>\r\n     *   var dist = velocity * (frame.timeDiff / 1000);<br>\r\n     *   node.move(dist, 0);<br>\r\n     * }, layer);<br><br>\r\n     *\r\n     * anim.start();\r\n     */\r\n    Kinetic.Animation = function(func, layers) {\r\n        this.func = func;\r\n        this.setLayers(layers);\r\n        this.id = Kinetic.Animation.animIdCounter++;\r\n        this.frame = {\r\n            time: 0,\r\n            timeDiff: 0,\r\n            lastTime: new Date().getTime()\r\n        };\r\n    };\r\n    /*\r\n     * Animation methods\r\n     */\r\n    Kinetic.Animation.prototype = {\r\n        /**\r\n         * set layers to be redrawn on each animation frame\r\n         * @method\r\n         * @memberof Kinetic.Animation.prototype\r\n         * @param {Kinetic.Layer|Array} [layers] layer(s) to be redrawn.&nbsp; Can be a layer, an array of layers, or null.  Not specifying a node will result in no redraw.\r\n         */\r\n        setLayers: function(layers) {\r\n            var lays = [];\r\n            // if passing in no layers\r\n            if (!layers) {\r\n                lays = [];\r\n            }\r\n            // if passing in an array of Layers\r\n            // NOTE: layers could be an array or Kinetic.Collection.  for simplicity, I'm just inspecting\r\n            // the length property to check for both cases\r\n            else if (layers.length > 0) {\r\n                lays = layers;\r\n            }\r\n            // if passing in a Layer\r\n            else {\r\n                lays = [layers];\r\n            }\r\n\r\n            this.layers = lays;\r\n        },\r\n        /**\r\n         * get layers\r\n         * @method\r\n         * @memberof Kinetic.Animation.prototype\r\n         */\r\n        getLayers: function() {\r\n            return this.layers;\r\n        },\r\n        /**\r\n         * add layer.  Returns true if the layer was added, and false if it was not\r\n         * @method\r\n         * @memberof Kinetic.Animation.prototype\r\n         * @param {Kinetic.Layer} layer\r\n         */\r\n        addLayer: function(layer) {\r\n            var layers = this.layers,\r\n                len, n;\r\n\r\n            if (layers) {\r\n                len = layers.length;\r\n\r\n                // don't add the layer if it already exists\r\n                for (n = 0; n < len; n++) {\r\n                    if (layers[n]._id === layer._id) {\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                this.layers = [];\r\n            }\r\n\r\n            this.layers.push(layer);\r\n            return true;\r\n        },\r\n        /**\r\n         * determine if animation is running or not.  returns true or false\r\n         * @method\r\n         * @memberof Kinetic.Animation.prototype\r\n         */\r\n        isRunning: function() {\r\n            var a = Kinetic.Animation, animations = a.animations;\r\n            for(var n = 0; n < animations.length; n++) {\r\n                if(animations[n].id === this.id) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        },\r\n        /**\r\n         * start animation\r\n         * @method\r\n         * @memberof Kinetic.Animation.prototype\r\n         */\r\n        start: function() {\r\n            this.stop();\r\n            this.frame.timeDiff = 0;\r\n            this.frame.lastTime = new Date().getTime();\r\n            Kinetic.Animation._addAnimation(this);\r\n        },\r\n        /**\r\n         * stop animation\r\n         * @method\r\n         * @memberof Kinetic.Animation.prototype\r\n         */\r\n        stop: function() {\r\n            Kinetic.Animation._removeAnimation(this);\r\n        },\r\n        _updateFrameObject: function(time) {\r\n            this.frame.timeDiff = time - this.frame.lastTime;\r\n            this.frame.lastTime = time;\r\n            this.frame.time += this.frame.timeDiff;\r\n            this.frame.frameRate = 1000 / this.frame.timeDiff;\r\n        }\r\n    };\r\n    Kinetic.Animation.animations = [];\r\n    Kinetic.Animation.animIdCounter = 0;\r\n    Kinetic.Animation.animRunning = false;\r\n\r\n    Kinetic.Animation._addAnimation = function(anim) {\r\n        this.animations.push(anim);\r\n        this._handleAnimation();\r\n    };\r\n    Kinetic.Animation._removeAnimation = function(anim) {\r\n        var id = anim.id, animations = this.animations, len = animations.length;\r\n        for(var n = 0; n < len; n++) {\r\n            if(animations[n].id === id) {\r\n                this.animations.splice(n, 1);\r\n                break;\r\n            }\r\n        }\r\n    };\r\n\r\n    Kinetic.Animation._runFrames = function() {\r\n        var layerHash = {},\r\n            animations = this.animations,\r\n            anim, layers, func, n, i, layersLen, layer, key;\r\n        /*\r\n         * loop through all animations and execute animation\r\n         *  function.  if the animation object has specified node,\r\n         *  we can add the node to the nodes hash to eliminate\r\n         *  drawing the same node multiple times.  The node property\r\n         *  can be the stage itself or a layer\r\n         */\r\n        /*\r\n         * WARNING: don't cache animations.length because it could change while\r\n         * the for loop is running, causing a JS error\r\n         */\r\n        for(n = 0; n < animations.length; n++) {\r\n            anim = animations[n];\r\n            layers = anim.layers;\r\n            func = anim.func;\r\n\r\n            anim._updateFrameObject(new Date().getTime());\r\n            layersLen = layers.length;\r\n\r\n            for (i=0; i<layersLen; i++) {\r\n                layer = layers[i];\r\n                if(layer._id !== undefined) {\r\n                    layerHash[layer._id] = layer;\r\n                }\r\n            }\r\n\r\n            // if animation object has a function, execute it\r\n            if(func) {\r\n                func.call(anim, anim.frame);\r\n            }\r\n        }\r\n\r\n        for(key in layerHash) {\r\n            layerHash[key].draw();\r\n        }\r\n    };\r\n    Kinetic.Animation._animationLoop = function() {\r\n        var that = this;\r\n        if(this.animations.length > 0) {\r\n            this._runFrames();\r\n            Kinetic.Animation.requestAnimFrame(function() {\r\n                that._animationLoop();\r\n            });\r\n        }\r\n        else {\r\n            this.animRunning = false;\r\n        }\r\n    };\r\n    Kinetic.Animation._handleAnimation = function() {\r\n        var that = this;\r\n        if(!this.animRunning) {\r\n            this.animRunning = true;\r\n            that._animationLoop();\r\n        }\r\n    };\r\n    RAF = (function() {\r\n        return window.requestAnimationFrame\r\n            || window.webkitRequestAnimationFrame\r\n            || window.mozRequestAnimationFrame\r\n            || window.oRequestAnimationFrame\r\n            || window.msRequestAnimationFrame\r\n            || FRAF;\r\n    })();\r\n\r\n    function FRAF(callback) {\r\n        window.setTimeout(callback, 1000 / 60);\r\n    }\r\n\r\n    Kinetic.Animation.requestAnimFrame = function(callback) {\r\n        var raf = Kinetic.DD && Kinetic.DD.isDragging ? FRAF : RAF;\r\n        raf(callback);\r\n    };\r\n\r\n    var moveTo = Kinetic.Node.prototype.moveTo;\r\n    Kinetic.Node.prototype.moveTo = function(container) {\r\n        moveTo.call(this, container);\r\n    };\r\n\r\n    /**\r\n     * batch draw\r\n     * @method\r\n     * @memberof Kinetic.Layer.prototype\r\n     */\r\n    Kinetic.Layer.prototype.batchDraw = function() {\r\n        var that = this;\r\n\r\n        if (!this.batchAnim) {\r\n            this.batchAnim = new Kinetic.Animation(function() {\r\n              if (that.lastBatchDrawTime && new Date().getTime() - that.lastBatchDrawTime > BATCH_DRAW_STOP_TIME_DIFF) {\r\n                that.batchAnim.stop();\r\n              }\r\n            }, this);\r\n        }\r\n\r\n        this.lastBatchDrawTime = new Date().getTime();\r\n\r\n        if (!this.batchAnim.isRunning()) {\r\n            this.draw();\r\n            this.batchAnim.start();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * batch draw\r\n     * @method\r\n     * @memberof Kinetic.Stage.prototype\r\n     */\r\n    Kinetic.Stage.prototype.batchDraw = function() {\r\n        this.getChildren().each(function(layer) {\r\n            layer.batchDraw();\r\n        });\r\n    };\r\n})();;(function() {\r\n    var blacklist = {\r\n        node: 1,\r\n        duration: 1,\r\n        easing: 1,\r\n        onFinish: 1,\r\n        yoyo: 1\r\n    },\r\n\r\n    PAUSED = 1,\r\n    PLAYING = 2,\r\n    REVERSING = 3,\r\n\r\n    idCounter = 0;\r\n\r\n    /**\r\n     * Tween constructor.  Tweens enable you to animate a node between the current state and a new state.\r\n     *  You can play, pause, reverse, seek, reset, and finish tweens.  By default, tweens are animated using\r\n     *  a linear easing.  For more tweening options, check out {@link Kinetic.Easings}\r\n     * @constructor\r\n     * @memberof Kinetic\r\n     * @example\r\n     * // instantiate new tween which fully rotates a node in 1 second\r\n     * var tween = new Kinetic.Tween({<br>\r\n     *   node: node,<br>\r\n     *   rotationDeg: 360,<br>\r\n     *   duration: 1,<br>\r\n     *   easing: Kinetic.Easings.EaseInOut<br>\r\n     * });<br><br>\r\n     *\r\n     * // play tween<br>\r\n     * tween.play();<br><br>\r\n     *\r\n     * // pause tween<br>\r\n     * tween.pause();\r\n     */\r\n    Kinetic.Tween = function(config) {\r\n        var that = this,\r\n            node = config.node,\r\n            nodeId = node._id,\r\n            duration = config.duration || 1,\r\n            easing = config.easing || Kinetic.Easings.Linear,\r\n            yoyo = !!config.yoyo,\r\n            key, tween, start, tweenId;\r\n\r\n        this.node = node;\r\n        this._id = idCounter++;\r\n\r\n        this.anim = new Kinetic.Animation(function() {\r\n            that.tween.onEnterFrame();\r\n        }, node.getLayer() || node.getLayers());\r\n\r\n        this.tween = new Tween(key, function(i) {\r\n            that._tweenFunc(i);\r\n        }, easing, 0, 1, duration * 1000, yoyo);\r\n\r\n        this._addListeners();\r\n\r\n        // init attrs map\r\n        if (!Kinetic.Tween.attrs[nodeId]) {\r\n            Kinetic.Tween.attrs[nodeId] = {};\r\n        }\r\n        if (!Kinetic.Tween.attrs[nodeId][this._id]) {\r\n            Kinetic.Tween.attrs[nodeId][this._id] = {};\r\n        }\r\n        // init tweens map\r\n        if (!Kinetic.Tween.tweens[nodeId]) {\r\n            Kinetic.Tween.tweens[nodeId] = {};\r\n        }\r\n\r\n        for (key in config) {\r\n            if (blacklist[key] === undefined) {\r\n                this._addAttr(key, config[key]);\r\n            }\r\n        }\r\n\r\n        this.reset();\r\n\r\n        // callbacks\r\n        this.onFinish = config.onFinish;\r\n        this.onReset = config.onReset;\r\n    };\r\n\r\n    // start/diff object = attrs.nodeId.tweenId.attr\r\n    Kinetic.Tween.attrs = {};\r\n    // tweenId = tweens.nodeId.attr\r\n    Kinetic.Tween.tweens = {};\r\n\r\n    Kinetic.Tween.prototype = {\r\n        _addAttr: function(key, end) {\r\n            var node = this.node,\r\n                nodeId = node._id,\r\n                start, diff, tweenId, n, len, startVal, endVal;\r\n\r\n            // remove conflict from tween map if it exists\r\n            tweenId = Kinetic.Tween.tweens[nodeId][key];\r\n\r\n            if (tweenId) {\r\n                delete Kinetic.Tween.attrs[nodeId][tweenId][key];\r\n            }\r\n\r\n            // add to tween map\r\n            start = node.getAttr(key);\r\n\r\n            if (Kinetic.Util._isArray(end)) {\r\n                end = Kinetic.Util._getPoints(end);\r\n                diff = [];\r\n                len = end.length;\r\n                for (n=0; n<len; n++) {\r\n                    startVal = start[n];\r\n                    endVal = end[n];\r\n                    diff.push({\r\n                        x: endVal.x - startVal.x,\r\n                        y: endVal.y - startVal.y\r\n                    });\r\n                }\r\n\r\n            }\r\n            else {\r\n                diff = end - start;\r\n            }\r\n\r\n            Kinetic.Tween.attrs[nodeId][this._id][key] = {\r\n                start: start,\r\n                diff: diff\r\n            };\r\n            Kinetic.Tween.tweens[nodeId][key] = this._id;\r\n        },\r\n        _tweenFunc: function(i) {\r\n            var node = this.node,\r\n                attrs = Kinetic.Tween.attrs[node._id][this._id],\r\n                key, attr, start, diff, newVal, n, len, startVal, diffVal;\r\n\r\n            for (key in attrs) {\r\n                attr = attrs[key];\r\n                start = attr.start;\r\n                diff = attr.diff;\r\n\r\n                if (Kinetic.Util._isArray(start)) {\r\n                    newVal = [];\r\n                    len = start.length;\r\n                    for (n=0; n<len; n++) {\r\n                        startVal = start[n];\r\n                        diffVal = diff[n];\r\n                        newVal.push({\r\n                            x: startVal.x + (diffVal.x * i),\r\n                            y: startVal.y + (diffVal.y * i)\r\n                        });\r\n                    }\r\n                }\r\n                else {\r\n                    newVal = start + (diff * i);\r\n                }\r\n\r\n                node.setAttr(key, newVal);\r\n            }\r\n        },\r\n        _addListeners: function() {\r\n            var that = this;\r\n\r\n            // start listeners\r\n            this.tween.onPlay = function() {\r\n                that.anim.start();\r\n            };\r\n            this.tween.onReverse = function() {\r\n                that.anim.start();\r\n            };\r\n\r\n            // stop listeners\r\n            this.tween.onPause = function() {\r\n                that.anim.stop();\r\n            };\r\n            this.tween.onFinish = function() {\r\n                if (that.onFinish) {\r\n                    that.onFinish();\r\n                }\r\n            };\r\n            this.tween.onReset = function() {\r\n                if (that.onReset) {\r\n                    that.onReset();\r\n                }\r\n            };\r\n        },\r\n        /**\r\n         * play\r\n         * @method\r\n         * @memberof Kinetic.Tween.prototype\r\n         */\r\n        play: function() {\r\n            this.tween.play();\r\n            return this;\r\n        },\r\n        /**\r\n         * reverse\r\n         * @method\r\n         * @memberof Kinetic.Tween.prototype\r\n         */\r\n        reverse: function() {\r\n            this.tween.reverse();\r\n            return this;\r\n        },\r\n        /**\r\n         * reset\r\n         * @method\r\n         * @memberof Kinetic.Tween.prototype\r\n         */\r\n        reset: function() {\r\n            var node = this.node;\r\n            this.tween.reset();\r\n            (node.getLayer() || node.getLayers()).draw();\r\n            return this;\r\n        },\r\n        /**\r\n         * seek\r\n         * @method\r\n         * @memberof Kinetic.Tween.prototype\r\n         * @param {Integer} t time in seconds between 0 and the duration\r\n         */\r\n        seek: function(t) {\r\n            var node = this.node;\r\n            this.tween.seek(t * 1000);\r\n            (node.getLayer() || node.getLayers()).draw();\r\n            return this;\r\n        },\r\n        /**\r\n         * pause\r\n         * @method\r\n         * @memberof Kinetic.Tween.prototype\r\n         */\r\n        pause: function() {\r\n            this.tween.pause();\r\n            return this;\r\n        },\r\n        /**\r\n         * finish\r\n         * @method\r\n         * @memberof Kinetic.Tween.prototype\r\n         */\r\n        finish: function() {\r\n            var node = this.node;\r\n            this.tween.finish();\r\n            (node.getLayer() || node.getLayers()).draw();\r\n            return this;\r\n        },\r\n        /**\r\n         * destroy\r\n         * @method\r\n         * @memberof Kinetic.Tween.prototype\r\n         */\r\n        destroy: function() {\r\n            var nodeId = this.node._id,\r\n                thisId = this._id,\r\n                attrs = Kinetic.Tween.tweens[nodeId],\r\n                key;\r\n\r\n            this.pause();\r\n\r\n            for (key in attrs) {\r\n                delete Kinetic.Tween.tweens[nodeId][key];\r\n            }\r\n\r\n            delete Kinetic.Tween.attrs[nodeId][thisId];\r\n        }\r\n    };\r\n\r\n    var Tween = function(prop, propFunc, func, begin, finish, duration, yoyo) {\r\n        this.prop = prop;\r\n        this.propFunc = propFunc;\r\n        this.begin = begin;\r\n        this._pos = begin;\r\n        this.duration = duration;\r\n        this._change = 0;\r\n        this.prevPos = 0;\r\n        this.yoyo = yoyo;\r\n        this._time = 0;\r\n        this._position = 0;\r\n        this._startTime = 0;\r\n        this._finish = 0;\r\n        this.func = func;\r\n        this._change = finish - this.begin;\r\n        this.pause();\r\n    };\r\n    /*\r\n     * Tween methods\r\n     */\r\n    Tween.prototype = {\r\n        fire: function(str) {\r\n            var handler = this[str];\r\n            if (handler) {\r\n                handler();\r\n            }\r\n        },\r\n        setTime: function(t) {\r\n            if(t > this.duration) {\r\n                if(this.yoyo) {\r\n                    this._time = this.duration;\r\n                    this.reverse();\r\n                }\r\n                else {\r\n                    this.finish();\r\n                }\r\n            }\r\n            else if(t < 0) {\r\n                if(this.yoyo) {\r\n                    this._time = 0;\r\n                    this.play();\r\n                }\r\n                else {\r\n                    this.reset();\r\n                }\r\n            }\r\n            else {\r\n                this._time = t;\r\n                this.update();\r\n            }\r\n        },\r\n        getTime: function() {\r\n            return this._time;\r\n        },\r\n        setPosition: function(p) {\r\n            this.prevPos = this._pos;\r\n            this.propFunc(p);\r\n            this._pos = p;\r\n        },\r\n        getPosition: function(t) {\r\n            if(t === undefined) {\r\n                t = this._time;\r\n            }\r\n            return this.func(t, this.begin, this._change, this.duration);\r\n        },\r\n        play: function() {\r\n            this.state = PLAYING;\r\n            this._startTime = this.getTimer() - this._time;\r\n            this.onEnterFrame();\r\n            this.fire('onPlay');\r\n        },\r\n        reverse: function() {\r\n            this.state = REVERSING;\r\n            this._time = this.duration - this._time;\r\n            this._startTime = this.getTimer() - this._time;\r\n            this.onEnterFrame();\r\n            this.fire('onReverse');\r\n        },\r\n        seek: function(t) {\r\n            this.pause();\r\n            this._time = t;\r\n            this.update();\r\n            this.fire('onSeek');\r\n        },\r\n        reset: function() {\r\n            this.pause();\r\n            this._time = 0;\r\n            this.update();\r\n            this.fire('onReset');\r\n        },\r\n        finish: function() {\r\n            this.pause();\r\n            this._time = this.duration;\r\n            this.update();\r\n            this.fire('onFinish');\r\n        },\r\n        update: function() {\r\n            this.setPosition(this.getPosition(this._time));\r\n        },\r\n        onEnterFrame: function() {\r\n            var t = this.getTimer() - this._startTime;\r\n            if(this.state === PLAYING) {\r\n                this.setTime(t);\r\n            }\r\n            else if (this.state === REVERSING) {\r\n                this.setTime(this.duration - t);\r\n            }\r\n        },\r\n        pause: function() {\r\n            this.state = PAUSED;\r\n            this.fire('onPause');\r\n        },\r\n        getTimer: function() {\r\n            return new Date().getTime();\r\n        }\r\n    };\r\n\r\n    /*\r\n    * These eases were ported from an Adobe Flash tweening library to JavaScript\r\n    * by Xaric\r\n    */\r\n\r\n    /**\r\n     * @namespace Easings\r\n     * @memberof Kinetic\r\n     */\r\n    Kinetic.Easings = {\r\n        /**\r\n        * back ease in\r\n        * @function\r\n        * @memberof Kinetic.Easings\r\n        */\r\n        'BackEaseIn': function(t, b, c, d, a, p) {\r\n            var s = 1.70158;\r\n            return c * (t /= d) * t * ((s + 1) * t - s) + b;\r\n        },\r\n        /**\r\n        * back ease out\r\n        * @function\r\n        * @memberof Kinetic.Easings\r\n        */\r\n        'BackEaseOut': function(t, b, c, d, a, p) {\r\n            var s = 1.70158;\r\n            return c * (( t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\r\n        },\r\n        /**\r\n        * back ease in out\r\n        * @function\r\n        * @memberof Kinetic.Easings\r\n        */\r\n        'BackEaseInOut': function(t, b, c, d, a, p) {\r\n            var s = 1.70158;\r\n            if((t /= d / 2) < 1) {\r\n                return c / 2 * (t * t * (((s *= (1.525)) + 1) * t - s)) + b;\r\n            }\r\n            return c / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2) + b;\r\n        },\r\n        /**\r\n        * elastic ease in\r\n        * @function\r\n        * @memberof Kinetic.Easings\r\n        */\r\n        'ElasticEaseIn': function(t, b, c, d, a, p) {\r\n            // added s = 0\r\n            var s = 0;\r\n            if(t === 0) {\r\n                return b;\r\n            }\r\n            if((t /= d) == 1) {\r\n                return b + c;\r\n            }\r\n            if(!p) {\r\n                p = d * 0.3;\r\n            }\r\n            if(!a || a < Math.abs(c)) {\r\n                a = c;\r\n                s = p / 4;\r\n            }\r\n            else {\r\n                s = p / (2 * Math.PI) * Math.asin(c / a);\r\n            }\r\n            return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\r\n        },\r\n        /**\r\n        * elastic ease out\r\n        * @function\r\n        * @memberof Kinetic.Easings\r\n        */\r\n        'ElasticEaseOut': function(t, b, c, d, a, p) {\r\n            // added s = 0\r\n            var s = 0;\r\n            if(t === 0) {\r\n                return b;\r\n            }\r\n            if((t /= d) == 1) {\r\n                return b + c;\r\n            }\r\n            if(!p) {\r\n                p = d * 0.3;\r\n            }\r\n            if(!a || a < Math.abs(c)) {\r\n                a = c;\r\n                s = p / 4;\r\n            }\r\n            else {\r\n                s = p / (2 * Math.PI) * Math.asin(c / a);\r\n            }\r\n            return (a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b);\r\n        },\r\n        /**\r\n        * elastic ease in out\r\n        * @function\r\n        * @memberof Kinetic.Easings\r\n        */\r\n        'ElasticEaseInOut': function(t, b, c, d, a, p) {\r\n            // added s = 0\r\n            var s = 0;\r\n            if(t === 0) {\r\n                return b;\r\n            }\r\n            if((t /= d / 2) == 2) {\r\n                return b + c;\r\n            }\r\n            if(!p) {\r\n                p = d * (0.3 * 1.5);\r\n            }\r\n            if(!a || a < Math.abs(c)) {\r\n                a = c;\r\n                s = p / 4;\r\n            }\r\n            else {\r\n                s = p / (2 * Math.PI) * Math.asin(c / a);\r\n            }\r\n            if(t < 1) {\r\n                return -0.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\r\n            }\r\n            return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * 0.5 + c + b;\r\n        },\r\n        /**\r\n        * bounce ease out\r\n        * @function\r\n        * @memberof Kinetic.Easings\r\n        */\r\n        'BounceEaseOut': function(t, b, c, d) {\r\n            if((t /= d) < (1 / 2.75)) {\r\n                return c * (7.5625 * t * t) + b;\r\n            }\r\n            else if(t < (2 / 2.75)) {\r\n                return c * (7.5625 * (t -= (1.5 / 2.75)) * t + 0.75) + b;\r\n            }\r\n            else if(t < (2.5 / 2.75)) {\r\n                return c * (7.5625 * (t -= (2.25 / 2.75)) * t + 0.9375) + b;\r\n            }\r\n            else {\r\n                return c * (7.5625 * (t -= (2.625 / 2.75)) * t + 0.984375) + b;\r\n            }\r\n        },\r\n        /**\r\n        * bounce ease in\r\n        * @function\r\n        * @memberof Kinetic.Easings\r\n        */\r\n        'BounceEaseIn': function(t, b, c, d) {\r\n            return c - Kinetic.Easings.BounceEaseOut(d - t, 0, c, d) + b;\r\n        },\r\n        /**\r\n        * bounce ease in out\r\n        * @function\r\n        * @memberof Kinetic.Easings\r\n        */\r\n        'BounceEaseInOut': function(t, b, c, d) {\r\n            if(t < d / 2) {\r\n                return Kinetic.Easings.BounceEaseIn(t * 2, 0, c, d) * 0.5 + b;\r\n            }\r\n            else {\r\n                return Kinetic.Easings.BounceEaseOut(t * 2 - d, 0, c, d) * 0.5 + c * 0.5 + b;\r\n            }\r\n        },\r\n        /**\r\n        * ease in\r\n        * @function\r\n        * @memberof Kinetic.Easings\r\n        */\r\n        'EaseIn': function(t, b, c, d) {\r\n            return c * (t /= d) * t + b;\r\n        },\r\n        /**\r\n        * ease out\r\n        * @function\r\n        * @memberof Kinetic.Easings\r\n        */\r\n        'EaseOut': function(t, b, c, d) {\r\n            return -c * (t /= d) * (t - 2) + b;\r\n        },\r\n        /**\r\n        * ease in out\r\n        * @function\r\n        * @memberof Kinetic.Easings\r\n        */\r\n        'EaseInOut': function(t, b, c, d) {\r\n            if((t /= d / 2) < 1) {\r\n                return c / 2 * t * t + b;\r\n            }\r\n            return -c / 2 * ((--t) * (t - 2) - 1) + b;\r\n        },\r\n        /**\r\n        * strong ease in\r\n        * @function\r\n        * @memberof Kinetic.Easings\r\n        */\r\n        'StrongEaseIn': function(t, b, c, d) {\r\n            return c * (t /= d) * t * t * t * t + b;\r\n        },\r\n        /**\r\n        * strong ease out\r\n        * @function\r\n        * @memberof Kinetic.Easings\r\n        */\r\n        'StrongEaseOut': function(t, b, c, d) {\r\n            return c * (( t = t / d - 1) * t * t * t * t + 1) + b;\r\n        },\r\n        /**\r\n        * strong ease in out\r\n        * @function\r\n        * @memberof Kinetic.Easings\r\n        */\r\n        'StrongEaseInOut': function(t, b, c, d) {\r\n            if((t /= d / 2) < 1) {\r\n                return c / 2 * t * t * t * t * t + b;\r\n            }\r\n            return c / 2 * ((t -= 2) * t * t * t * t + 2) + b;\r\n        },\r\n        /**\r\n        * linear\r\n        * @function\r\n        * @memberof Kinetic.Easings\r\n        */\r\n        'Linear': function(t, b, c, d) {\r\n            return c * t / d + b;\r\n        }\r\n    };\r\n})();\r\n;(function() {\r\n    Kinetic.DD = {\r\n        // properties\r\n        anim: new Kinetic.Animation(),\r\n        isDragging: false,\r\n        offset: {\r\n            x: 0,\r\n            y: 0\r\n        },\r\n        node: null,\r\n\r\n        // methods\r\n        _drag: function(evt) {\r\n            var dd = Kinetic.DD,\r\n                node = dd.node;\r\n\r\n            if(node) {\r\n                node._setDragPosition(evt);\r\n\r\n                if(!dd.isDragging) {\r\n                    dd.isDragging = true;\r\n                    node.fire('dragstart', evt, true);\r\n                }\r\n\r\n                // execute ondragmove if defined\r\n                node.fire('dragmove', evt, true);\r\n            }\r\n        },\r\n        _endDragBefore: function(evt) {\r\n            var dd = Kinetic.DD,\r\n                node = dd.node,\r\n                nodeType, layer;\r\n\r\n            if(node) {\r\n                nodeType = node.nodeType,\r\n                layer = node.getLayer();\r\n                dd.anim.stop();\r\n\r\n                // only fire dragend event if the drag and drop\r\n                // operation actually started.\r\n                if(dd.isDragging) {\r\n                    dd.isDragging = false;\r\n                    Kinetic.listenClickTap = false;\r\n\r\n                    if (evt) {\r\n                        evt.dragEndNode = node;\r\n                    }\r\n                }\r\n\r\n                delete dd.node;\r\n\r\n                (layer || node).draw();\r\n            }\r\n        },\r\n        _endDragAfter: function(evt) {\r\n            evt = evt || {};\r\n\r\n            var dragEndNode = evt.dragEndNode;\r\n\r\n            if (evt && dragEndNode) {\r\n              dragEndNode.fire('dragend', evt, true);\r\n            }\r\n        }\r\n    };\r\n\r\n    // Node extenders\r\n\r\n    /**\r\n     * initiate drag and drop\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     */\r\n    Kinetic.Node.prototype.startDrag = function() {\r\n        var dd = Kinetic.DD,\r\n            stage = this.getStage(),\r\n            layer = this.getLayer(),\r\n            pos = stage.getPointerPosition(),\r\n            ap = this.getAbsolutePosition();\r\n\r\n        if(pos) {\r\n            if (dd.node) {\r\n                dd.node.stopDrag();\r\n            }\r\n\r\n            dd.node = this;\r\n            dd.offset.x = pos.x - ap.x;\r\n            dd.offset.y = pos.y - ap.y;\r\n            dd.anim.setLayers(layer || this.getLayers());\r\n            dd.anim.start();\r\n\r\n            this._setDragPosition();\r\n        }\r\n    };\r\n\r\n    Kinetic.Node.prototype._setDragPosition = function(evt) {\r\n        var dd = Kinetic.DD,\r\n            pos = this.getStage().getPointerPosition(),\r\n            dbf = this.getDragBoundFunc(),\r\n            newNodePos = {\r\n                x: pos.x - dd.offset.x,\r\n                y: pos.y - dd.offset.y\r\n            };\r\n\r\n        if(dbf !== undefined) {\r\n            newNodePos = dbf.call(this, newNodePos, evt);\r\n        }\r\n\r\n        this.setAbsolutePosition(newNodePos);\r\n    };\r\n\r\n    /**\r\n     * stop drag and drop\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     */\r\n    Kinetic.Node.prototype.stopDrag = function() {\r\n        var dd = Kinetic.DD,\r\n            evt = {};\r\n        dd._endDragBefore(evt);\r\n        dd._endDragAfter(evt);\r\n    };\r\n\r\n    /**\r\n     * set draggable\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     * @param {String} draggable\r\n     */\r\n    Kinetic.Node.prototype.setDraggable = function(draggable) {\r\n        this._setAttr('draggable', draggable);\r\n        this._dragChange();\r\n    };\r\n\r\n    var origDestroy = Kinetic.Node.prototype.destroy;\r\n\r\n    Kinetic.Node.prototype.destroy = function() {\r\n        var dd = Kinetic.DD;\r\n\r\n        // stop DD\r\n        if(dd.node && dd.node._id === this._id) {\r\n\r\n            this.stopDrag();\r\n        }\r\n\r\n        origDestroy.call(this);\r\n    };\r\n\r\n    /**\r\n     * determine if node is currently in drag and drop mode\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     */\r\n    Kinetic.Node.prototype.isDragging = function() {\r\n        var dd = Kinetic.DD;\r\n        return dd.node && dd.node._id === this._id && dd.isDragging;\r\n    };\r\n\r\n    Kinetic.Node.prototype._listenDrag = function() {\r\n        this._dragCleanup();\r\n        var that = this;\r\n        this.on('mousedown.kinetic touchstart.kinetic', function(evt) {\r\n            if(!Kinetic.DD.node) {\r\n                that.startDrag(evt);\r\n            }\r\n        });\r\n    };\r\n\r\n    Kinetic.Node.prototype._dragChange = function() {\r\n        if(this.attrs.draggable) {\r\n            this._listenDrag();\r\n        }\r\n        else {\r\n            // remove event listeners\r\n            this._dragCleanup();\r\n\r\n            /*\r\n             * force drag and drop to end\r\n             * if this node is currently in\r\n             * drag and drop mode\r\n             */\r\n            var stage = this.getStage();\r\n            var dd = Kinetic.DD;\r\n            if(stage && dd.node && dd.node._id === this._id) {\r\n                dd.node.stopDrag();\r\n            }\r\n        }\r\n    };\r\n\r\n    Kinetic.Node.prototype._dragCleanup = function() {\r\n        this.off('mousedown.kinetic');\r\n        this.off('touchstart.kinetic');\r\n    };\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Node, 'dragBoundFunc');\r\n\r\n    /**\r\n     * set drag bound function.  This is used to override the default\r\n     *  drag and drop position\r\n     * @name setDragBoundFunc\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     * @param {Function} dragBoundFunc\r\n     */\r\n\r\n    /**\r\n     * get dragBoundFunc\r\n     * @name getDragBoundFunc\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetter(Kinetic.Node, 'draggable', false);\r\n\r\n     /**\r\n     * get draggable\r\n     * @name getDraggable\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     */\r\n\r\n    /**\r\n     * alias of getDraggable()\r\n     * @name isDraggable\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     */\r\n\r\n    Kinetic.Node.prototype.isDraggable = Kinetic.Node.prototype.getDraggable;\r\n\r\n    var html = document.getElementsByTagName('html')[0];\r\n    html.addEventListener('mouseup', Kinetic.DD._endDragBefore, true);\r\n    html.addEventListener('touchend', Kinetic.DD._endDragBefore, true);\r\n\r\n    html.addEventListener('mouseup', Kinetic.DD._endDragAfter, false);\r\n    html.addEventListener('touchend', Kinetic.DD._endDragAfter, false);\r\n\r\n})();\r\n;(function() {\r\n    Kinetic.Util.addMethods(Kinetic.Container, {\r\n        __init: function(config) {\r\n            this.children = new Kinetic.Collection();\r\n            Kinetic.Node.call(this, config);\r\n        },\r\n        /**\r\n         * returns a {@link Kinetic.Collection} of direct descendant nodes\r\n         * @method\r\n         * @memberof Kinetic.Container.prototype\r\n         */\r\n        getChildren: function() {\r\n            return this.children;\r\n        },\r\n        /**\r\n         * determine if node has children\r\n         * @method\r\n         * @memberof Kinetic.Container.prototype\r\n         */\r\n        hasChildren: function() {\r\n            return this.getChildren().length > 0;\r\n        },\r\n        /**\r\n         * remove all children\r\n         * @method\r\n         * @memberof Kinetic.Container.prototype\r\n         */\r\n        removeChildren: function() {\r\n            var children = this.children,\r\n                child;\r\n\r\n            while(children.length > 0) {\r\n                child = children[0];\r\n                if (child.hasChildren()) {\r\n                    child.removeChildren();\r\n                }\r\n                child.remove();\r\n            }\r\n\r\n            return this;\r\n        },\r\n        /**\r\n         * destroy all children\r\n         * @method\r\n         * @memberof Kinetic.Container.prototype\r\n         */\r\n        destroyChildren: function() {\r\n            var children = this.children;\r\n            while(children.length > 0) {\r\n                children[0].destroy();\r\n            }\r\n            return this;\r\n        },\r\n        /**\r\n         * add node to container\r\n         * @method\r\n         * @memberof Kinetic.Container.prototype\r\n         * @param {Node} child\r\n         */\r\n        add: function(child) {\r\n            var children = this.children;\r\n\r\n            this._validateAdd(child);\r\n            child.index = children.length;\r\n            child.parent = this;\r\n            children.push(child);\r\n            this._fire('add', {\r\n                child: child\r\n            });\r\n\r\n            // chainable\r\n            return this;\r\n        },\r\n        destroy: function() {\r\n            // destroy children\r\n            if (this.hasChildren()) {\r\n                this.destroyChildren();\r\n            }\r\n            // then destroy self\r\n            Kinetic.Node.prototype.destroy.call(this);\r\n        },\r\n        /**\r\n         * return a {@link Kinetic.Collection} of nodes that match the selector.  Use '#' for id selections\r\n         * and '.' for name selections.  You can also select by type or class name. Pass multiple selectors\r\n         * separated by a space.\r\n         * @method\r\n         * @memberof Kinetic.Container.prototype\r\n         * @param {String} selector\r\n         * @example\r\n         * // select node with id foo<br>\r\n         * var node = stage.find('#foo');<br><br>\r\n         *\r\n         * // select nodes with name bar inside layer<br>\r\n         * var nodes = layer.find('.bar');<br><br>\r\n         *\r\n         * // select all groups inside layer<br>\r\n         * var nodes = layer.find('Group');<br><br>\r\n         *\r\n         * // select all rectangles inside layer<br>\r\n         * var nodes = layer.find('Rect');<br><br>\r\n         *\r\n         * // select node with an id of foo or a name of bar inside layer<br>\r\n         * var nodes = layer.find('#foo, .bar');\r\n         */\r\n        find: function(selector) {\r\n            var retArr = [],\r\n                selectorArr = selector.replace(/ /g, '').split(','),\r\n                len = selectorArr.length,\r\n                n, i, sel, arr, node, children, clen;\r\n\r\n            for (n = 0; n < len; n++) {\r\n                sel = selectorArr[n];\r\n\r\n                // id selector\r\n                if(sel.charAt(0) === '#') {\r\n                    node = this._getNodeById(sel.slice(1));\r\n                    if(node) {\r\n                        retArr.push(node);\r\n                    }\r\n                }\r\n                // name selector\r\n                else if(sel.charAt(0) === '.') {\r\n                    arr = this._getNodesByName(sel.slice(1));\r\n                    retArr = retArr.concat(arr);\r\n                }\r\n                // unrecognized selector, pass to children\r\n                else {\r\n                    children = this.getChildren();\r\n                    clen = children.length;\r\n                    for(i = 0; i < clen; i++) {\r\n                        retArr = retArr.concat(children[i]._get(sel));\r\n                    }\r\n                }\r\n            }\r\n\r\n            return Kinetic.Collection.toCollection(retArr);\r\n        },\r\n        _getNodeById: function(key) {\r\n            var node = Kinetic.ids[key];\r\n\r\n            if(node !== undefined && this.isAncestorOf(node)) {\r\n                return node;\r\n            }\r\n            return null;\r\n        },\r\n        _getNodesByName: function(key) {\r\n            var arr = Kinetic.names[key] || [];\r\n            return this._getDescendants(arr);\r\n        },\r\n        _get: function(selector) {\r\n            var retArr = Kinetic.Node.prototype._get.call(this, selector);\r\n            var children = this.getChildren();\r\n            var len = children.length;\r\n            for(var n = 0; n < len; n++) {\r\n                retArr = retArr.concat(children[n]._get(selector));\r\n            }\r\n            return retArr;\r\n        },\r\n        // extenders\r\n        toObject: function() {\r\n            var obj = Kinetic.Node.prototype.toObject.call(this);\r\n\r\n            obj.children = [];\r\n\r\n            var children = this.getChildren();\r\n            var len = children.length;\r\n            for(var n = 0; n < len; n++) {\r\n                var child = children[n];\r\n                obj.children.push(child.toObject());\r\n            }\r\n\r\n            return obj;\r\n        },\r\n        _getDescendants: function(arr) {\r\n            var retArr = [];\r\n            var len = arr.length;\r\n            for(var n = 0; n < len; n++) {\r\n                var node = arr[n];\r\n                if(this.isAncestorOf(node)) {\r\n                    retArr.push(node);\r\n                }\r\n            }\r\n\r\n            return retArr;\r\n        },\r\n        /**\r\n         * determine if node is an ancestor\r\n         * of descendant\r\n         * @method\r\n         * @memberof Kinetic.Container.prototype\r\n         * @param {Kinetic.Node} node\r\n         */\r\n        isAncestorOf: function(node) {\r\n            var parent = node.getParent();\r\n            while(parent) {\r\n                if(parent._id === this._id) {\r\n                    return true;\r\n                }\r\n                parent = parent.getParent();\r\n            }\r\n\r\n            return false;\r\n        },\r\n        clone: function(obj) {\r\n            // call super method\r\n            var node = Kinetic.Node.prototype.clone.call(this, obj);\r\n\r\n            this.getChildren().each(function(no) {\r\n                node.add(no.clone());\r\n            });\r\n            return node;\r\n        },\r\n        /**\r\n         * get all shapes that intersect a point.  Note: because this method must clear a temporary\r\n         * canvas and redraw every shape inside the container, it should only be used for special sitations\r\n         * because it performs very poorly.  Please use the {@link Kinetic.Stage#getIntersection} method if at all possible\r\n         * because it performs much better\r\n         * @method\r\n         * @memberof Kinetic.Container.prototype\r\n         * @param {Object} pos\r\n         */\r\n        getAllIntersections: function() {\r\n            var pos = Kinetic.Util._getXY(Array.prototype.slice.call(arguments));\r\n            var arr = [];\r\n            var shapes = this.find('Shape');\r\n\r\n            var len = shapes.length;\r\n            for(var n = 0; n < len; n++) {\r\n                var shape = shapes[n];\r\n                if(shape.isVisible() && shape.intersects(pos)) {\r\n                    arr.push(shape);\r\n                }\r\n            }\r\n\r\n            return arr;\r\n        },\r\n        _setChildrenIndices: function() {\r\n            this.children.each(function(child, n) {\r\n                child.index = n;\r\n            });\r\n        },\r\n        drawScene: function(canvas) {\r\n            var layer = this.getLayer(),\r\n                clip = this.getClipWidth() && this.getClipHeight(),\r\n                children, n, len;\r\n\r\n            if (!canvas && layer) {\r\n                canvas = layer.getCanvas();\r\n            }\r\n\r\n            if(this.isVisible()) {\r\n                if (clip) {\r\n                    canvas.getContext()._clip(this);\r\n                }\r\n                else {\r\n                    this._drawChildren(canvas);\r\n                }\r\n            }\r\n\r\n            return this;\r\n        },\r\n        _drawChildren: function(canvas) {\r\n            this.children.each(function(child) {\r\n                child.drawScene(canvas);\r\n            });\r\n        },\r\n        drawHit: function() {\r\n            var hasClip = this.getClipWidth() && this.getClipHeight() && this.nodeType !== 'Stage',\r\n                n = 0,\r\n                len = 0,\r\n                children = [],\r\n                hitCanvas;\r\n\r\n            if(this.shouldDrawHit()) {\r\n                if (hasClip) {\r\n                    hitCanvas = this.getLayer().hitCanvas;\r\n                    hitCanvas.getContext()._clip(this);\r\n                }\r\n\r\n                children = this.children;\r\n                len = children.length;\r\n\r\n                for(n = 0; n < len; n++) {\r\n                    children[n].drawHit();\r\n                }\r\n                if (hasClip) {\r\n                    hitCanvas.getContext()._context.restore();\r\n                }\r\n            }\r\n\r\n            return this;\r\n        }\r\n    });\r\n\r\n    Kinetic.Util.extend(Kinetic.Container, Kinetic.Node);\r\n    // deprecated methods\r\n    Kinetic.Container.prototype.get = Kinetic.Container.prototype.find;\r\n\r\n    // add getters setters\r\n    Kinetic.Factory.addBoxGetterSetter(Kinetic.Container, 'clip');\r\n\r\n    /**\r\n     * set clip\r\n     * @method\r\n     * @name setClip\r\n     * @memberof Kinetic.Container.prototype\r\n     * @param {Object|Array}\r\n     * @example\r\n     * // set clip x, y, width and height with an array<br>\r\n     * image.setClip([20, 20, 100, 100]);<br><br>\r\n     *\r\n     * // set clip x, y, width and height with an object<br>\r\n     * image.setClip({<br>\r\n     *   x: 20,<br>\r\n     *   y: 20,<br>\r\n     *   width: 20,<br>\r\n     *   height: 20<br>\r\n     * });\r\n     */\r\n\r\n     /**\r\n     * set clipX\r\n     * @method\r\n     * @name setClipX\r\n     * @memberof Kinetic.Container.prototype\r\n     * @param {Number} x\r\n     */\r\n\r\n     /**\r\n     * set clipY\r\n     * @name setClipY\r\n     * @method\r\n     * @memberof Kinetic.Container.prototype\r\n     * @param {Number} y\r\n     */\r\n\r\n     /**\r\n     * set clipWidth\r\n     * @name setClipWidth\r\n     * @method\r\n     * @memberof Kinetic.Container.prototype\r\n     * @param {Number} width\r\n     */\r\n\r\n     /**\r\n     * set clipHeight\r\n     * @name setClipHeight\r\n     * @method\r\n     * @memberof Kinetic.Container.prototype\r\n     * @param {Number} height\r\n     */\r\n\r\n    /**\r\n     * get clip\r\n     * @name getClip\r\n     * @method\r\n     * @memberof Kinetic.Container.prototype\r\n     * @return {Object}\r\n     */\r\n\r\n    /**\r\n     * get clip x\r\n     * @name getClipX\r\n     * @method\r\n     * @memberof Kinetic.Container.prototype\r\n     */\r\n\r\n    /**\r\n     * get clip y\r\n     * @name getClipY\r\n     * @method\r\n     * @memberof Kinetic.Container.prototype\r\n     */\r\n\r\n    /**\r\n     * get clip width\r\n     * @name getClipWidth\r\n     * @method\r\n     * @memberof Kinetic.Container.prototype\r\n     */\r\n\r\n    /**\r\n     * get clip height\r\n     * @name getClipHeight\r\n     * @method\r\n     * @memberof Kinetic.Container.prototype\r\n     */\r\n\r\n})();\r\n;(function() {\r\n    var HAS_SHADOW = 'hasShadow';\r\n\r\n    function _fillFunc(context) {\r\n        context.fill();\r\n    }\r\n    function _strokeFunc(context) {\r\n        context.stroke();\r\n    }\r\n    function _fillFuncHit(context) {\r\n        context.fill();\r\n    }\r\n    function _strokeFuncHit(context) {\r\n        context.stroke();\r\n    }\r\n\r\n    function _clearHasShadowCache() {\r\n        this._clearCache(HAS_SHADOW);\r\n    }\r\n\r\n    Kinetic.Util.addMethods(Kinetic.Shape, {\r\n        __init: function(config) {\r\n            this.nodeType = 'Shape';\r\n            this._fillFunc = _fillFunc;\r\n            this._strokeFunc = _strokeFunc;\r\n            this._fillFuncHit = _fillFuncHit;\r\n            this._strokeFuncHit = _strokeFuncHit;\r\n\r\n            // set colorKey\r\n            var shapes = Kinetic.shapes;\r\n            var key;\r\n\r\n            while(true) {\r\n                key = Kinetic.Util.getRandomColor();\r\n                if(key && !( key in shapes)) {\r\n                    break;\r\n                }\r\n            }\r\n\r\n            this.colorKey = key;\r\n            shapes[key] = this;\r\n\r\n            // call super constructor\r\n            Kinetic.Node.call(this, config);\r\n\r\n            this._setDrawFuncs();\r\n\r\n            this.on('shadowColorChange.kinetic shadowBlurChange.kinetic shadowOffsetChange.kinetic shadowOpacityChange.kinetic', _clearHasShadowCache);\r\n        },\r\n        hasChildren: function() {\r\n            return false;\r\n        },\r\n        getChildren: function() {\r\n            return [];\r\n        },\r\n        /**\r\n         * get canvas context tied to the layer\r\n         * @method\r\n         * @memberof Kinetic.Shape.prototype\r\n         */\r\n        getContext: function() {\r\n            return this.getLayer().getContext();\r\n        },\r\n        /**\r\n         * get canvas renderer tied to the layer.  Note that this returns a canvas renderer, not a canvas element\r\n         * @method\r\n         * @memberof Kinetic.Shape.prototype\r\n         */\r\n        getCanvas: function() {\r\n            return this.getLayer().getCanvas();\r\n        },\r\n        /**\r\n         * returns whether or not a shadow will be rendered\r\n         * @method\r\n         * @memberof Kinetic.Shape.prototype\r\n         */\r\n        hasShadow: function() {\r\n            return this._getCache(HAS_SHADOW, this._hasShadow);  \r\n        },\r\n        _hasShadow: function() {\r\n            return (this.getShadowOpacity() !== 0 && !!(this.getShadowColor() || this.getShadowBlur() || this.getShadowOffsetX() || this.getShadowOffsetY()));\r\n        },\r\n        /**\r\n         * returns whether or not a fill is present\r\n         * @method\r\n         * @memberof Kinetic.Shape.prototype\r\n         */\r\n        hasFill: function() {\r\n            return !!(this.getFill() || this.getFillPatternImage() || this.getFillLinearGradientColorStops() || this.getFillRadialGradientColorStops());\r\n        },\r\n        _get: function(selector) {\r\n            return this.className === selector || this.nodeType === selector ? [this] : [];\r\n        },\r\n        /**\r\n         * determines if point is in the shape, regardless if other shapes are on top of it.  Note: because\r\n         *  this method clears a temporary canvas and then redraws the shape, it performs very poorly if executed many times\r\n         *  consecutively.  Please use the {@link Kinetic.Stage#getIntersection} method if at all possible\r\n         *  because it performs much better\r\n         * @method\r\n         * @memberof Kinetic.Shape.prototype\r\n         * @param {Object} point point can be an object containing\r\n         *  an x and y property, or it can be an array with two elements\r\n         *  in which the first element is the x component and the second\r\n         *  element is the y component\r\n         */\r\n        intersects: function() {\r\n            var pos = Kinetic.Util._getXY(Array.prototype.slice.call(arguments));\r\n            var stage = this.getStage();\r\n            var hitCanvas = stage.hitCanvas;\r\n            hitCanvas.getContext().clear();\r\n            this.drawScene(hitCanvas);\r\n            var p = hitCanvas.context.getImageData(pos.x | 0, pos.y | 0, 1, 1).data;\r\n            return p[3] > 0;\r\n        },\r\n        /**\r\n         * enable fill\r\n         * @method\r\n         * @memberof Kinetic.Shape.prototype\r\n         */\r\n        enableFill: function() {\r\n            this._setAttr('fillEnabled', true);\r\n            return this;\r\n        },\r\n        /**\r\n         * disable fill\r\n         * @method\r\n         * @memberof Kinetic.Shape.prototype\r\n         */\r\n        disableFill: function() {\r\n            this._setAttr('fillEnabled', false);\r\n            return this;\r\n        },\r\n        /**\r\n         * enable stroke\r\n         * @method\r\n         * @memberof Kinetic.Shape.prototype\r\n         */\r\n        enableStroke: function() {\r\n            this._setAttr('strokeEnabled', true);\r\n            return this;\r\n        },\r\n        /**\r\n         * disable stroke\r\n         * @method\r\n         * @memberof Kinetic.Shape.prototype\r\n         */\r\n        disableStroke: function() {\r\n            this._setAttr('strokeEnabled', false);\r\n            return this;\r\n        },\r\n        /**\r\n         * enable stroke scale\r\n         * @method\r\n         * @memberof Kinetic.Shape.prototype\r\n         */\r\n        enableStrokeScale: function() {\r\n            this._setAttr('strokeScaleEnabled', true);\r\n            return this;\r\n        },\r\n        /**\r\n         * disable stroke scale\r\n         * @method\r\n         * @memberof Kinetic.Shape.prototype\r\n         */\r\n        disableStrokeScale: function() {\r\n            this._setAttr('strokeScaleEnabled', false);\r\n            return this;\r\n        },\r\n        /**\r\n         * enable shadow\r\n         * @method\r\n         * @memberof Kinetic.Shape.prototype\r\n         */\r\n        enableShadow: function() {\r\n            this._setAttr('shadowEnabled', true);\r\n            return this;\r\n        },\r\n        /**\r\n         * disable shadow\r\n         * @method\r\n         * @memberof Kinetic.Shape.prototype\r\n         */\r\n        disableShadow: function() {\r\n            this._setAttr('shadowEnabled', false);\r\n            return this;\r\n        },\r\n        /**\r\n         * enable dash array\r\n         * @method\r\n         * @memberof Kinetic.Shape.prototype\r\n         */\r\n        enableDashArray: function() {\r\n            this._setAttr('dashArrayEnabled', true);\r\n            return this;\r\n        },\r\n        /**\r\n         * disable dash array\r\n         * @method\r\n         * @memberof Kinetic.Shape.prototype\r\n         */\r\n        disableDashArray: function() {\r\n            this._setAttr('dashArrayEnabled', false);\r\n            return this;\r\n        },\r\n        // extends Node.prototype.destroy \r\n        destroy: function() {\r\n            Kinetic.Node.prototype.destroy.call(this);\r\n            delete Kinetic.shapes[this.colorKey];\r\n            return this;\r\n        },\r\n        drawScene: function(canvas) {\r\n            canvas = canvas || this.getLayer().getCanvas();\r\n\r\n            var drawFunc = this.getDrawFunc(),\r\n                context = canvas.getContext();\r\n\r\n            if(drawFunc && this.isVisible()) {\r\n                context.save();\r\n                context._applyOpacity(this);\r\n                context._applyLineJoin(this);\r\n                context._applyAncestorTransforms(this);\r\n                drawFunc.call(this, context);\r\n                context.restore();\r\n            }\r\n            return this;\r\n        },\r\n        drawHit: function() {\r\n            var attrs = this.getAttrs(),\r\n                drawFunc = attrs.drawHitFunc || attrs.drawFunc,\r\n                canvas = this.getLayer().hitCanvas,\r\n                context = canvas.getContext();\r\n\r\n            if(drawFunc && this.shouldDrawHit()) {\r\n                context.save();\r\n                context._applyLineJoin(this);\r\n                context._applyAncestorTransforms(this);\r\n                drawFunc.call(this, context);\r\n                context.restore();\r\n            }\r\n            return this;\r\n        },\r\n        _setDrawFuncs: function() {\r\n            if(!this.attrs.drawFunc && this.drawFunc) {\r\n                this.setDrawFunc(this.drawFunc);\r\n            }\r\n            if(!this.attrs.drawHitFunc && this.drawHitFunc) {\r\n                this.setDrawHitFunc(this.drawHitFunc);\r\n            }\r\n        }\r\n    });\r\n    Kinetic.Util.extend(Kinetic.Shape, Kinetic.Node);\r\n\r\n    // add getters and setters\r\n    Kinetic.Factory.addColorGetterSetter(Kinetic.Shape, 'stroke');\r\n\r\n    /**\r\n     * set stroke color\r\n     * @name setStroke\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {String} color\r\n     */\r\n\r\n     /**\r\n     * set stroke color with an object literal\r\n     * @name setStrokeRGB\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Obect} color requires an object literal containing an r, g, and b component\r\n     * @example\r\n     * shape.setStrokeRGB({<br>\r\n     *   r: 200,<br>\r\n     *   g: 50,<br>\r\n     *   b: 100<br>\r\n     * });\r\n     */\r\n\r\n     /**\r\n     * set stroke color red component\r\n     * @name setStrokeR\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Integer} red\r\n     */\r\n\r\n     /**\r\n     * set stroke color green component\r\n     * @name setStrokeG\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Integer} green\r\n     */\r\n\r\n     /**\r\n     * set stroke color blue component\r\n     * @name setStrokeB\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Integer} blue\r\n     */\r\n\r\n     /**\r\n     * get stroke color\r\n     * @name getStroke\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n     /**\r\n     * get stroke color as an object literal\r\n     * @name getStrokeRGB\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n     /**\r\n     * get stroke color red component\r\n     * @name getStrokeR\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n     /**\r\n     * get stroke color green component\r\n     * @name getStrokeG\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n     /**\r\n     * get stroke color blue component\r\n     * @name getStrokeB\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'lineJoin');\r\n\r\n    /**\r\n     * set line join\r\n     * @name setLineJoin\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {String} lineJoin.  Can be miter, round, or bevel.  The\r\n     *  default is miter\r\n     */\r\n\r\n     /**\r\n     * get line join\r\n     * @name getLineJoin\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'lineCap');\r\n\r\n    /**\r\n     * set line cap.  Can be butt, round, or square\r\n     * @name setLineCap\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {String} lineCap\r\n     */\r\n\r\n     /**\r\n     * get line cap\r\n     * @name getLineCap\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'strokeWidth');\r\n\r\n    /**\r\n     * set stroke width\r\n     * @name setStrokeWidth\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Number} strokeWidth\r\n     */\r\n\r\n     /**\r\n     * get stroke width\r\n     * @name getStrokeWidth\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'drawFunc');\r\n\r\n    /**\r\n     * set draw function\r\n     * @name setDrawFunc\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Function} drawFunc drawing function\r\n     */\r\n\r\n     /**\r\n     * get draw function\r\n     * @name getDrawFunc\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'drawHitFunc');\r\n\r\n    /**\r\n     * set draw hit function used for hit detection\r\n     * @name setDrawHitFunc\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Function} drawHitFunc drawing function used for hit detection\r\n     */\r\n\r\n     /**\r\n     * get draw hit function\r\n     * @name getDrawHitFunc\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'dashArray');\r\n\r\n    /**\r\n     * set dash array.\r\n     * @name setDashArray\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Array} dashArray\r\n     *  examples:<br>\r\n     *  [10, 5] dashes are 10px long and 5 pixels apart\r\n     *  [10, 20, 0.001, 20] if using a round lineCap, the line will\r\n     *  be made up of alternating dashed lines that are 10px long\r\n     *  and 20px apart, and dots that have a radius of 5px and are 20px\r\n     *  apart\r\n     */\r\n\r\n     /**\r\n     * get dash array\r\n     * @name getDashArray\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addColorGetterSetter(Kinetic.Shape, 'shadowColor');\r\n\r\n    /**\r\n     * set shadow color\r\n     * @name setShadowColor\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {String} color\r\n     */\r\n\r\n     /**\r\n     * set shadow color with an object literal\r\n     * @name setShadowColorRGB\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Obect} color requires an object literal containing an r, g, and b component\r\n     * @example\r\n     * shape.setShadowRGB({<br>\r\n     *   r: 200,<br>\r\n     *   g: 50,<br>\r\n     *   b: 100<br>\r\n     * });\r\n     */\r\n\r\n     /**\r\n     * set shadow color red component\r\n     * @name setShadowColorR\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Integer} red\r\n     */\r\n\r\n     /**\r\n     * set shadow color green component\r\n     * @name setShadowColorG\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Integer} green\r\n     */\r\n\r\n     /**\r\n     * set shadow color blue component\r\n     * @name setShadowColorB\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Integer} blue\r\n     */\r\n\r\n     /**\r\n     * get shadow color\r\n     * @name getShadowColor\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n     /**\r\n     * get shadow color as an object literal\r\n     * @name getShadowColorRGB\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n     /**\r\n     * get shadow color red component\r\n     * @name getShadowColorR\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n     /**\r\n     * get shadow color green component\r\n     * @name getShadowColorG\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n     /**\r\n     * get shadow color blue component\r\n     * @name getShadowColorB\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'shadowBlur');\r\n\r\n    /**\r\n     * set shadow blur\r\n     * @name setShadowBlur\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Number} blur\r\n     */\r\n\r\n     /**\r\n     * get shadow blur\r\n     * @name getShadowBlur\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'shadowOpacity');\r\n\r\n    /**\r\n     * set shadow opacity\r\n     * @name setShadowOpacity\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Number} opacity must be a value between 0 and 1\r\n     */\r\n\r\n     /**\r\n     * get shadow opacity\r\n     * @name getShadowOpacity\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'fillPatternImage');\r\n\r\n    /**\r\n     * set fill pattern image\r\n     * @name setFillPatternImage\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Image} image object\r\n     */\r\n\r\n     /**\r\n     * get fill pattern image\r\n     * @name getFillPatternImage\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addColorGetterSetter(Kinetic.Shape, 'fill');\r\n\r\n    /**\r\n     * set fill color\r\n     * @name setFill\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {String} color\r\n     */\r\n\r\n     /**\r\n     * set fill color with an object literal\r\n     * @name setFillRGB\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Obect} color requires an object literal containing an r, g, and b component\r\n     * @example\r\n     * shape.setFillRGB({<br>\r\n     *   r: 200,<br>\r\n     *   g: 50,<br>\r\n     *   b: 100<br>\r\n     * });\r\n     */\r\n\r\n     /**\r\n     * set fill color red component\r\n     * @name setFillR\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Integer} red\r\n     */\r\n\r\n     /**\r\n     * set fill color green component\r\n     * @name setFillG\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Integer} green\r\n     */\r\n\r\n     /**\r\n     * set fill color blue component\r\n     * @name setFillB\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Integer} blue\r\n     */\r\n\r\n     /**\r\n     * get fill color\r\n     * @name getFill\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n     /**\r\n     * get fill color as an object literal\r\n     * @name getFillRGB\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n     /**\r\n     * get fill color red component\r\n     * @name getFillR\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n     /**\r\n     * get fill color green component\r\n     * @name getFillG\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n     /**\r\n     * get fill color blue component\r\n     * @name getFillB\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'fillPatternX');\r\n\r\n    /**\r\n     * set fill pattern x\r\n     * @name setFillPatternX\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Number} x\r\n     */\r\n\r\n     /**\r\n     * get fill pattern x\r\n     * @name getFillPatternX\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'fillPatternY');\r\n\r\n    /**\r\n     * set fill pattern y\r\n     * @name setFillPatternY\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Number} y\r\n     */\r\n\r\n     /**\r\n     * get fill pattern y\r\n     * @name getFillPatternY\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'fillLinearGradientColorStops');\r\n\r\n    /**\r\n     * set fill linear gradient color stops\r\n     * @name setFillLinearGradientColorStops\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Array} colorStops\r\n     */\r\n\r\n     /**\r\n     * get fill linear gradient color stops\r\n     * @name getFillLinearGradientColorStops\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Array} colorStops\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'fillRadialGradientStartRadius');\r\n\r\n    /**\r\n     * set fill radial gradient start radius\r\n     * @name setFillRadialGradientStartRadius\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Number} radius\r\n     */\r\n\r\n     /**\r\n     * get fill radial gradient start radius\r\n     * @name getFillRadialGradientStartRadius\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'fillRadialGradientEndRadius');\r\n\r\n    /**\r\n     * set fill radial gradient end radius\r\n     * @name setFillRadialGradientEndRadius\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Number} radius\r\n     */\r\n\r\n     /**\r\n     * get fill radial gradient end radius\r\n     * @name getFillRadialGradientEndRadius\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'fillRadialGradientColorStops');\r\n\r\n    /**\r\n     * set fill radial gradient color stops\r\n     * @name setFillRadialGradientColorStops\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Number} colorStops\r\n     */\r\n\r\n     /**\r\n     * get fill radial gradient color stops\r\n     * @name getFillRadialGradientColorStops\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'fillPatternRepeat');\r\n\r\n    /**\r\n     * set fill pattern repeat\r\n     * @name setFillPatternRepeat\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Number} repeat can be 'repeat', 'repeat-x', 'repeat-y', or 'no-repeat'.  The default is 'no-repeat'\r\n     */\r\n\r\n     /**\r\n     * get fill pattern repeat\r\n     * @name getFillPatternRepeat\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'fillEnabled', true);\r\n\r\n    /**\r\n     * set fill enabled\r\n     * @name setFillEnabled\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Boolean} enabled\r\n     */\r\n\r\n     /**\r\n     * get fill enabled\r\n     * @name getFillEnabled\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'strokeEnabled', true);\r\n\r\n    /**\r\n     * set stroke enabled\r\n     * @name setStrokeEnabled\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Boolean} enabled\r\n     */\r\n\r\n     /**\r\n     * get stroke enabled\r\n     * @name getStrokeEnabled\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'shadowEnabled', true);\r\n\r\n    /**\r\n     * set shadow enabled\r\n     * @name setShadowEnabled\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Boolean} enabled\r\n     */\r\n\r\n     /**\r\n     * get shadow enabled\r\n     * @name getShadowEnabled\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'dashArrayEnabled', true);\r\n\r\n    /**\r\n     * set dash array enabled\r\n     * @name setDashArrayEnabled\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Boolean} enabled\r\n     */\r\n\r\n     /**\r\n     * get dash array enabled\r\n     * @name getDashArrayEnabled\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'fillPriority', 'color');\r\n\r\n    /**\r\n     * set fill priority\r\n     * @name setFillPriority\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Number} priority can be color, pattern, linear-gradient, or radial-gradient\r\n     *  The default is color.\r\n     */\r\n\r\n     /**\r\n     * get fill priority\r\n     * @name getFillPriority\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Shape, 'strokeScaleEnabled', true);\r\n\r\n     /**\r\n     * set stroke scale enabled\r\n     * @name setStrokeScaleEnabled\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Boolean} enabled\r\n     */\r\n\r\n     /**\r\n     * get stroke scale enabled\r\n     * @name getStrokeScaleEnabled\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addPointGetterSetter(Kinetic.Shape, 'fillPatternOffset', 0);\r\n\r\n    /**\r\n     * set fill pattern offset\r\n     * @name setFillPatternOffset\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Number|Array|Object} offset\r\n     * @example\r\n     * // set x and y<br>\r\n     * shape.setFillPatternOffset(20, 40);<br><br>\r\n     *\r\n     * // set x only <br>\r\n     * shape.setFillPatternOffset({<br>\r\n     *   x: 20<br>\r\n     * });<br><br>\r\n     *\r\n     * // set x and y using an array<br>\r\n     * shape.setFillPatternOffset([20, 40]);<br><br>\r\n     *\r\n     * // set x and y to the same value<br>\r\n     * shape.setFillPatternOffset(5);\r\n     */\r\n\r\n     /**\r\n     * set fill pattern offset x\r\n     * @name setFillPatternOffsetX\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Number} x\r\n     */\r\n\r\n     /**\r\n     * set fill pattern offset y\r\n     * @name setFillPatternOffsetY\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Number} y\r\n     */\r\n\r\n     /**\r\n     * get fill pattern offset\r\n     * @name getFillPatternOffset\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n     /**\r\n     * get fill pattern offset x\r\n     * @name getFillPatternOffsetX\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n     /**\r\n     * get fill pattern offset y\r\n     * @name getFillPatternOffsetY\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addPointGetterSetter(Kinetic.Shape, 'fillPatternScale', 1);\r\n\r\n    /**\r\n     * set fill pattern scale\r\n     * @name setFillPatternScale\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Number} scale\r\n     * @example\r\n     * // set x and y to the same value<br>\r\n     * shape.setFillPatternScale(5);<br><br>\r\n     *\r\n     * // set x and y<br>\r\n     * shape.setFillPatternScale(20, 40);<br><br>\r\n     *\r\n     * // set x only <br>\r\n     * shape.setFillPatternScale({<br>\r\n     *   x: 20<br>\r\n     * });<br><br>\r\n     *\r\n     * // set x and y using an array<br>\r\n     * shape.setFillPatternScale([20, 40]);\r\n     */\r\n\r\n     /**\r\n     * set fill pattern scale x\r\n     * @name setFillPatternScaleX\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Number} x\r\n     */\r\n\r\n     /**\r\n     * set fill pattern scale y\r\n     * @name setFillPatternScaleY\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Number} y\r\n     */\r\n\r\n     /**\r\n     * get fill pattern scale\r\n     * @name getFillPatternScale\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n     /**\r\n     * get fill pattern scale x\r\n     * @name getFillPatternScaleX\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n     /**\r\n     * get fill pattern scale y\r\n     * @name getFillPatternScaleY\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addPointGetterSetter(Kinetic.Shape, 'fillLinearGradientStartPoint', 0);\r\n\r\n    /**\r\n     * set fill linear gradient start point\r\n     * @name setFillLinearGradientStartPoint\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Number|Array|Object} startPoint\r\n     * @example\r\n     * // set x and y<br>\r\n     * shape.setFillLinearGradientStartPoint(20, 40);<br><br>\r\n     *\r\n     * // set x only <br>\r\n     * shape.setFillLinearGradientStartPoint({<br>\r\n     *   x: 20<br>\r\n     * });<br><br>\r\n     *\r\n     * // set x and y using an array<br>\r\n     * shape.setFillLinearGradientStartPoint([20, 40]);<br><br>\r\n     *\r\n     * // set x and y to the same value<br>\r\n     * shape.setFillLinearGradientStartPoint(5);\r\n     */\r\n\r\n     /**\r\n     * set fill linear gradient start point x\r\n     * @name setFillLinearGradientStartPointX\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Number} x\r\n     */\r\n\r\n     /**\r\n     * set fill linear gradient start point y\r\n     * @name setFillLinearGradientStartPointY\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Number} y\r\n     */\r\n\r\n     /**\r\n     * get fill linear gradient start point\r\n     * @name getFillLinearGradientStartPoint\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n     /**\r\n     * get fill linear gradient start point x\r\n     * @name getFillLinearGradientStartPointX\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n     /**\r\n     * get fill linear gradient start point y\r\n     * @name getFillLinearGradientStartPointY\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addPointGetterSetter(Kinetic.Shape, 'fillLinearGradientEndPoint', 0);\r\n\r\n    /**\r\n     * set fill linear gradient end point\r\n     * @name setFillLinearGradientEndPoint\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Number|Array|Object} endPoint\r\n     * @example\r\n     * // set x and y<br>\r\n     * shape.setFillLinearGradientEndPoint(20, 40);<br><br>\r\n     *\r\n     * // set x only <br>\r\n     * shape.setFillLinearGradientEndPoint({<br>\r\n     *   x: 20<br>\r\n     * });<br><br>\r\n     *\r\n     * // set x and y using an array<br>\r\n     * shape.setFillLinearGradientEndPoint([20, 40]);<br><br>\r\n     *\r\n     * // set x and y to the same value<br>\r\n     * shape.setFillLinearGradientEndPoint(5);\r\n     */\r\n\r\n     /**\r\n     * set fill linear gradient end point x\r\n     * @name setFillLinearGradientEndPointX\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Number} x\r\n     */\r\n\r\n     /**\r\n     * set fill linear gradient end point y\r\n     * @name setFillLinearGradientEndPointY\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Number} y\r\n     */\r\n\r\n     /**\r\n     * get fill linear gradient end point\r\n     * @name getFillLinearGradientEndPoint\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n     /**\r\n     * get fill linear gradient end point x\r\n     * @name getFillLinearGradientEndPointX\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n     /**\r\n     * get fill linear gradient end point y\r\n     * @name getFillLinearGradientEndPointY\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addPointGetterSetter(Kinetic.Shape, 'fillRadialGradientStartPoint', 0);\r\n\r\n    /**\r\n     * set fill radial gradient start point\r\n     * @name setFillRadialGradientStartPoint\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Number|Array|Object} startPoint\r\n     * @example\r\n     * // set x and y<br>\r\n     * shape.setFillRadialGradientStartPoint(20, 40);<br><br>\r\n     *\r\n     * // set x only <br>\r\n     * shape.setFillRadialGradientStartPoint({<br>\r\n     *   x: 20<br>\r\n     * });<br><br>\r\n     *\r\n     * // set x and y using an array<br>\r\n     * shape.setFillRadialGradientStartPoint([20, 40]);<br><br>\r\n     *\r\n     * // set x and y to the same value<br>\r\n     * shape.setFillRadialGradientStartPoint(5);\r\n     */\r\n\r\n     /**\r\n     * set fill radial gradient start point x\r\n     * @name setFillRadialGradientStartPointX\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Number} x\r\n     */\r\n\r\n     /**\r\n     * set fill radial gradient start point y\r\n     * @name setFillRadialGradientStartPointY\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Number} y\r\n     */\r\n\r\n     /**\r\n     * get fill radial gradient start point\r\n     * @name getFillRadialGradientStartPoint\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n     /**\r\n     * get fill radial gradient start point x\r\n     * @name getFillRadialGradientStartPointX\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n     /**\r\n     * get fill radial gradient start point y\r\n     * @name getFillRadialGradientStartPointY\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addPointGetterSetter(Kinetic.Shape, 'fillRadialGradientEndPoint', 0);\r\n\r\n    /**\r\n     * set fill radial gradient end point\r\n     * @name setFillRadialGradientEndPoint\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Number|Array|Object} endPoint\r\n     * @example\r\n     * // set x and y<br>\r\n     * shape.setFillRadialGradientEndPoint(20, 40);<br><br>\r\n     *\r\n     * // set x only <br>\r\n     * shape.setFillRadialGradientEndPoint({<br>\r\n     *   x: 20<br>\r\n     * });<br><br>\r\n     *\r\n     * // set x and y using an array<br>\r\n     * shape.setFillRadialGradientEndPoint([20, 40]);<br><br>\r\n     *\r\n     * // set x and y to the same value<br>\r\n     * shape.setFillRadialGradientEndPoint(5);\r\n     */\r\n\r\n     /**\r\n     * set fill radial gradient end point x\r\n     * @name setFillRadialGradientEndPointX\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Number} x\r\n     */\r\n\r\n     /**\r\n     * set fill radial gradient end point y\r\n     * @name setFillRadialGradientEndPointY\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Number} y\r\n     */\r\n\r\n     /**\r\n     * get fill radial gradient end point\r\n     * @name getFillRadialGradientEndPoint\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n     /**\r\n     * get fill radial gradient end point x\r\n     * @name getFillRadialGradientEndPointX\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n     /**\r\n     * get fill radial gradient end point y\r\n     * @name getFillRadialGradientEndPointY\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addPointGetterSetter(Kinetic.Shape, 'shadowOffset', 0);\r\n\r\n    /**\r\n     * set shadow offset\r\n     * @name setShadowOffset\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Number|Array|Object} offset\r\n     * @example\r\n     * // set x and y<br>\r\n     * shape.setShadowOffset(20, 40);<br><br>\r\n     *\r\n     * // set x only <br>\r\n     * shape.setShadowOffset({<br>\r\n     *   x: 20<br>\r\n     * });<br><br>\r\n     *\r\n     * // set x and y using an array<br>\r\n     * shape.setShadowOffset([20, 40]);<br><br>\r\n     *\r\n     * // set x and y to the same value<br>\r\n     * shape.setShadowOffset(5);\r\n     */\r\n\r\n     /**\r\n     * set shadow offset x\r\n     * @name setShadowOffsetX\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Number} x\r\n     */\r\n\r\n     /**\r\n     * set shadow offset y\r\n     * @name setShadowOffsetY\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Number} y\r\n     */\r\n\r\n    /**\r\n     * get shadow offset\r\n     * @name getShadowOffset\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n     /**\r\n     * get shadow offset x\r\n     * @name getShadowOffsetX\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n     /**\r\n     * get shadow offset y\r\n     * @name getShadowOffsetY\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addRotationGetterSetter(Kinetic.Shape, 'fillPatternRotation', 0);\r\n\r\n    /**\r\n     * set fill pattern rotation in radians\r\n     * @name setFillPatternRotation\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Number} rotation\r\n     */\r\n\r\n    /**\r\n     * set fill pattern rotation in degrees\r\n     * @name setFillPatternRotationDeg\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     * @param {Number} rotationDeg\r\n     */\r\n\r\n    /**\r\n     * get fill pattern rotation in radians\r\n     * @name getFillPatternRotation\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n    /**\r\n     * get fill pattern rotation in degrees\r\n     * @name getFillPatternRotationDeg\r\n     * @method\r\n     * @memberof Kinetic.Shape.prototype\r\n     */\r\n\r\n})();\r\n;(function() {\r\n    // CONSTANTS\r\n    var STAGE = 'Stage',\r\n        STRING = 'string',\r\n        PX = 'px',\r\n\r\n        MOUSEOUT = 'mouseout',\r\n        MOUSELEAVE = 'mouseleave',\r\n        MOUSEOVER = 'mouseover',\r\n        MOUSEENTER = 'mouseenter',\r\n        MOUSEMOVE = 'mousemove',\r\n        MOUSEDOWN = 'mousedown',\r\n        MOUSEUP = 'mouseup',\r\n        CLICK = 'click',\r\n        DBL_CLICK = 'dblclick',\r\n        TOUCHSTART = 'touchstart',\r\n        TOUCHEND = 'touchend',\r\n        TAP = 'tap',\r\n        DBL_TAP = 'dbltap',\r\n        TOUCHMOVE = 'touchmove',\r\n\r\n        CONTENT_MOUSEOUT = 'contentMouseout',\r\n        CONTENT_MOUSELEAVE = 'contentMouseleave',\r\n        CONTENT_MOUSEOVER = 'contentMouseover',\r\n        CONTENT_MOUSEENTER = 'contentMouseenter',\r\n        CONTENT_MOUSEMOVE = 'contentMousemove',\r\n        CONTENT_MOUSEDOWN = 'contentMousedown',\r\n        CONTENT_MOUSEUP = 'contentMouseup',\r\n        CONTENT_CLICK = 'contentClick',\r\n        CONTENT_DBL_CLICK = 'contentDblclick',\r\n        CONTENT_TOUCHSTART = 'contentTouchstart',\r\n        CONTENT_TOUCHEND = 'contentTouchend',\r\n        CONTENT_TAP = 'contentTap',\r\n        CONTENT_DBL_TAP = 'contentDbltap',\r\n        CONTENT_TOUCHMOVE = 'contentTouchmove',\r\n\r\n        DIV = 'div',\r\n        RELATIVE = 'relative',\r\n        INLINE_BLOCK = 'inline-block',\r\n        KINETICJS_CONTENT = 'kineticjs-content',\r\n        SPACE = ' ',\r\n        UNDERSCORE = '_',\r\n        CONTAINER = 'container',\r\n        EMPTY_STRING = '',\r\n        EVENTS = [MOUSEDOWN, MOUSEMOVE, MOUSEUP, MOUSEOUT, TOUCHSTART, TOUCHMOVE, TOUCHEND, MOUSEOVER],\r\n\r\n    // cached variables\r\n    eventsLength = EVENTS.length;\r\n\r\n    function addEvent(ctx, eventName) {\r\n      ctx.content.addEventListener(eventName, function(evt) {\r\n        ctx[UNDERSCORE + eventName](evt);\r\n      }, false);\r\n    }\r\n\r\n    Kinetic.Util.addMethods(Kinetic.Stage, {\r\n        ___init: function(config) {\r\n            // call super constructor\r\n            Kinetic.Container.call(this, config);\r\n            this.nodeType = STAGE;\r\n            this._id = Kinetic.idCounter++;\r\n            this._buildDOM();\r\n            this._bindContentEvents();\r\n            Kinetic.stages.push(this);\r\n        },\r\n        _validateAdd: function(child) {\r\n            if (child.getType() !== 'Layer') {\r\n                Kinetic.Util.error('You may only add layers to the stage.');\r\n            }\r\n        },\r\n        /**\r\n         * set container dom element which contains the stage wrapper div element\r\n         * @method\r\n         * @memberof Kinetic.Stage.prototype\r\n         * @param {DomElement} container can pass in a dom element or id string\r\n         */\r\n        setContainer: function(container) {\r\n            if( typeof container === STRING) {\r\n                container = document.getElementById(container);\r\n            }\r\n            this._setAttr(CONTAINER, container);\r\n            return this;\r\n        },\r\n        draw: function() {\r\n            Kinetic.Node.prototype.draw.call(this);\r\n            return this;\r\n        },\r\n        /**\r\n         * draw layer scene graphs\r\n         * @name draw\r\n         * @method\r\n         * @memberof Kinetic.Stage.prototype\r\n         */\r\n\r\n        /**\r\n         * draw layer hit graphs\r\n         * @name drawHit\r\n         * @method\r\n         * @memberof Kinetic.Stage.prototype\r\n         */\r\n\r\n        /**\r\n         * set height\r\n         * @method\r\n         * @memberof Kinetic.Stage.prototype\r\n         * @param {Number} height\r\n         */\r\n        setHeight: function(height) {\r\n            Kinetic.Node.prototype.setHeight.call(this, height);\r\n            this._resizeDOM();\r\n            return this;\r\n        },\r\n        /**\r\n         * set width\r\n         * @method\r\n         * @memberof Kinetic.Stage.prototype\r\n         * @param {Number} width\r\n         */\r\n        setWidth: function(width) {\r\n            Kinetic.Node.prototype.setWidth.call(this, width);\r\n            this._resizeDOM();\r\n            return this;\r\n        },\r\n        /**\r\n         * clear all layers\r\n         * @method\r\n         * @memberof Kinetic.Stage.prototype\r\n         */\r\n        clear: function() {\r\n            var layers = this.children,\r\n                len = layers.length,\r\n                n;\r\n\r\n            for(n = 0; n < len; n++) {\r\n                layers[n].clear();\r\n            }\r\n            return this;\r\n        },\r\n        /**\r\n         * remove stage\r\n         * @method\r\n         * @memberof Kinetic.Stage.prototype\r\n         */\r\n        destroy: function() {\r\n            var content = this.content;\r\n            Kinetic.Container.prototype.destroy.call(this);\r\n\r\n            if(content && Kinetic.Util._isInDocument(content)) {\r\n                this.getContainer().removeChild(content);\r\n            }\r\n        },\r\n        /**\r\n         * get mouse position for desktop apps\r\n         * @method\r\n         * @memberof Kinetic.Stage.prototype\r\n         */\r\n        getMousePosition: function() {\r\n            return this.mousePos;\r\n        },\r\n        /**\r\n         * get touch position for mobile apps\r\n         * @method\r\n         * @memberof Kinetic.Stage.prototype\r\n         */\r\n        getTouchPosition: function() {\r\n            return this.touchPos;\r\n        },\r\n        /**\r\n         * get pointer position which can be a touc position or mouse position\r\n         * @method\r\n         * @memberof Kinetic.Stage.prototype\r\n         */\r\n        getPointerPosition: function() {\r\n            return this.getTouchPosition() || this.getMousePosition();\r\n        },\r\n        getStage: function() {\r\n            return this;\r\n        },\r\n        /**\r\n         * get stage content div element which has the\r\n         *  the class name \"kineticjs-content\"\r\n         * @method\r\n         * @memberof Kinetic.Stage.prototype\r\n         */\r\n        getContent: function() {\r\n            return this.content;\r\n        },\r\n        /**\r\n         * Creates a composite data URL and requires a callback because the composite is generated asynchronously.\r\n         * @method\r\n         * @memberof Kinetic.Stage.prototype\r\n         * @param {Object} config\r\n         * @param {Function} config.callback function executed when the composite has completed\r\n         * @param {String} [config.mimeType] can be \"image/png\" or \"image/jpeg\".\r\n         *  \"image/png\" is the default\r\n         * @param {Number} [config.x] x position of canvas section\r\n         * @param {Number} [config.y] y position of canvas section\r\n         * @param {Number} [config.width] width of canvas section\r\n         * @param {Number} [config.height] height of canvas section\r\n         * @param {Number} [config.quality] jpeg quality.  If using an \"image/jpeg\" mimeType,\r\n         *  you can specify the quality from 0 to 1, where 0 is very poor quality and 1\r\n         *  is very high quality\r\n         */\r\n        toDataURL: function(config) {\r\n            config = config || {};\r\n\r\n            var mimeType = config.mimeType || null,\r\n                quality = config.quality || null,\r\n                x = config.x || 0,\r\n                y = config.y || 0,\r\n                canvas = new Kinetic.SceneCanvas({\r\n                    width: config.width || this.getWidth(),\r\n                    height: config.height || this.getHeight(),\r\n                    pixelRatio: 1\r\n                }),\r\n                _context = canvas.getContext()._context,\r\n                layers = this.children;\r\n\r\n            if(x || y) {\r\n                _context.translate(-1 * x, -1 * y);\r\n            }\r\n\r\n            function drawLayer(n) {\r\n                var layer = layers[n],\r\n                    layerUrl = layer.toDataURL(),\r\n                    imageObj = new Image();\r\n\r\n                imageObj.onload = function() {\r\n                    _context.drawImage(imageObj, 0, 0);\r\n\r\n                    if(n < layers.length - 1) {\r\n                        drawLayer(n + 1);\r\n                    }\r\n                    else {\r\n                        config.callback(canvas.toDataURL(mimeType, quality));\r\n                    }\r\n                };\r\n                imageObj.src = layerUrl;\r\n            }\r\n            drawLayer(0);\r\n        },\r\n        /**\r\n         * converts stage into an image.\r\n         * @method\r\n         * @memberof Kinetic.Stage.prototype\r\n         * @param {Object} config\r\n         * @param {Function} config.callback function executed when the composite has completed\r\n         * @param {String} [config.mimeType] can be \"image/png\" or \"image/jpeg\".\r\n         *  \"image/png\" is the default\r\n         * @param {Number} [config.x] x position of canvas section\r\n         * @param {Number} [config.y] y position of canvas section\r\n         * @param {Number} [config.width] width of canvas section\r\n         * @param {Number} [config.height] height of canvas section\r\n         * @param {Number} [config.quality] jpeg quality.  If using an \"image/jpeg\" mimeType,\r\n         *  you can specify the quality from 0 to 1, where 0 is very poor quality and 1\r\n         *  is very high quality\r\n         */\r\n        toImage: function(config) {\r\n            var cb = config.callback;\r\n\r\n            config.callback = function(dataUrl) {\r\n                Kinetic.Util._getImage(dataUrl, function(img) {\r\n                    cb(img);\r\n                });\r\n            };\r\n            this.toDataURL(config);\r\n        },\r\n        /**\r\n         * get visible intersection object that contains shape and pixel data. This is the preferred\r\n         *  method for determining if a point intersects a shape or not\r\n         * @method\r\n         * @memberof Kinetic.Stage.prototype\r\n         * @param {Object} pos point object\r\n         */\r\n        getIntersection: function() {\r\n            var pos = Kinetic.Util._getXY(Array.prototype.slice.call(arguments)),\r\n                layers = this.getChildren(),\r\n                len = layers.length,\r\n                end = len - 1,\r\n                n, obj;\r\n\r\n            for(n = end; n >= 0; n--) {\r\n                obj = layers[n].getIntersection(pos);\r\n                if (obj) {\r\n                    return obj;\r\n                }\r\n            }\r\n\r\n            return null;\r\n        },\r\n        _resizeDOM: function() {\r\n            if(this.content) {\r\n                var width = this.getWidth(),\r\n                    height = this.getHeight(),\r\n                    layers = this.getChildren(),\r\n                    len = layers.length,\r\n                    n, layer;\r\n\r\n                // set content dimensions\r\n                this.content.style.width = width + PX;\r\n                this.content.style.height = height + PX;\r\n\r\n                this.bufferCanvas.setSize(width, height, 1);\r\n                this.hitCanvas.setSize(width, height);\r\n\r\n                // set pointer defined layer dimensions\r\n                for(n = 0; n < len; n++) {\r\n                    layer = layers[n];\r\n                    layer.getCanvas().setSize(width, height);\r\n                    layer.hitCanvas.setSize(width, height);\r\n                    layer.draw();\r\n                }\r\n            }\r\n        },\r\n        /**\r\n         * add layer to stage\r\n         * @method\r\n         * @memberof Kinetic.Stage.prototype\r\n         * @param {Kinetic.Layer} layer\r\n         */\r\n        add: function(layer) {\r\n            Kinetic.Container.prototype.add.call(this, layer);\r\n            layer.canvas.setSize(this.attrs.width, this.attrs.height);\r\n            layer.hitCanvas.setSize(this.attrs.width, this.attrs.height);\r\n\r\n            // draw layer and append canvas to container\r\n            layer.draw();\r\n            this.content.appendChild(layer.canvas._canvas);\r\n\r\n            // chainable\r\n            return this;\r\n        },\r\n        getParent: function() {\r\n            return null;\r\n        },\r\n        getLayer: function() {\r\n            return null;\r\n        },\r\n        /**\r\n         * returns a {@link Kinetic.Collection} of layers\r\n         * @method\r\n         * @memberof Kinetic.Stage.prototype\r\n         */\r\n        getLayers: function() {\r\n            return this.getChildren();\r\n        },\r\n        _setPointerPosition: function(evt) {\r\n            if(!evt) {\r\n                evt = window.event;\r\n            }\r\n            this._setMousePosition(evt);\r\n            this._setTouchPosition(evt);\r\n        },\r\n        _bindContentEvents: function() {\r\n            var that = this,\r\n                n;\r\n\r\n            for (n = 0; n < eventsLength; n++) {\r\n              addEvent(this, EVENTS[n]);\r\n            }\r\n        },\r\n        _mouseover: function(evt) {\r\n            this._fire(CONTENT_MOUSEOVER, evt);\r\n        },\r\n        _mouseout: function(evt) {\r\n            this._setPointerPosition(evt);\r\n            var targetShape = this.targetShape;\r\n\r\n            if(targetShape && !Kinetic.isDragging()) {\r\n                targetShape._fireAndBubble(MOUSEOUT, evt);\r\n                targetShape._fireAndBubble(MOUSELEAVE, evt);\r\n                this.targetShape = null;\r\n            }\r\n            this.mousePos = undefined;\r\n\r\n            this._fire(CONTENT_MOUSEOUT, evt);\r\n        },\r\n        _mousemove: function(evt) {\r\n            this._setPointerPosition(evt);\r\n            var dd = Kinetic.DD,\r\n                obj = this.getIntersection(this.getPointerPosition()),\r\n                shape = obj && obj.shape ? obj.shape : undefined;\r\n\r\n            if(shape) {\r\n                if(!Kinetic.isDragging() && obj.pixel[3] === 255 && (!this.targetShape || this.targetShape._id !== shape._id)) {\r\n                    if(this.targetShape) {\r\n                        this.targetShape._fireAndBubble(MOUSEOUT, evt, shape);\r\n                        this.targetShape._fireAndBubble(MOUSELEAVE, evt, shape);\r\n                    }\r\n                    shape._fireAndBubble(MOUSEOVER, evt, this.targetShape);\r\n                    shape._fireAndBubble(MOUSEENTER, evt, this.targetShape);\r\n                    this.targetShape = shape;\r\n                }\r\n                else {\r\n                    shape._fireAndBubble(MOUSEMOVE, evt);\r\n                }\r\n            }\r\n            /*\r\n             * if no shape was detected, clear target shape and try\r\n             * to run mouseout from previous target shape\r\n             */\r\n            else {\r\n              if(this.targetShape && !Kinetic.isDragging()) {\r\n                this.targetShape._fireAndBubble(MOUSEOUT, evt);\r\n                this.targetShape._fireAndBubble(MOUSELEAVE, evt);\r\n                this.targetShape = null;\r\n              }\r\n\r\n            }\r\n\r\n            // content event\r\n            this._fire(CONTENT_MOUSEMOVE, evt);\r\n\r\n            if(dd) {\r\n                dd._drag(evt);\r\n            }\r\n\r\n            // always call preventDefault for desktop events because some browsers\r\n            // try to drag and drop the canvas element\r\n            if (evt.preventDefault) {\r\n                evt.preventDefault();\r\n            }\r\n        },\r\n        _mousedown: function(evt) {\r\n            this._setPointerPosition(evt);\r\n            var obj = this.getIntersection(this.getPointerPosition()),\r\n                shape = obj && obj.shape ? obj.shape : undefined;\r\n\r\n            Kinetic.listenClickTap = true;\r\n\r\n            if (shape) {\r\n                this.clickStartShape = shape;\r\n                shape._fireAndBubble(MOUSEDOWN, evt);\r\n            }\r\n\r\n            // content event\r\n            this._fire(CONTENT_MOUSEDOWN);\r\n\r\n            // always call preventDefault for desktop events because some browsers\r\n            // try to drag and drop the canvas element\r\n            if (evt.preventDefault) {\r\n                evt.preventDefault();\r\n            }\r\n        },\r\n        _mouseup: function(evt) {\r\n            this._setPointerPosition(evt);\r\n            var that = this,\r\n                obj = this.getIntersection(this.getPointerPosition()),\r\n                shape = obj && obj.shape ? obj.shape : undefined,\r\n                fireDblClick = false;\r\n\r\n            if(Kinetic.inDblClickWindow) {\r\n                fireDblClick = true;\r\n                Kinetic.inDblClickWindow = false;\r\n            }\r\n            else {\r\n                Kinetic.inDblClickWindow = true;\r\n            }\r\n\r\n            setTimeout(function() {\r\n                Kinetic.inDblClickWindow = false;\r\n            }, Kinetic.dblClickWindow);\r\n\r\n            if (shape) {\r\n                shape._fireAndBubble(MOUSEUP, evt);\r\n\r\n                // detect if click or double click occurred\r\n                if(Kinetic.listenClickTap && shape._id === this.clickStartShape._id) {\r\n                    shape._fireAndBubble(CLICK, evt);\r\n\r\n                    if(fireDblClick) {\r\n                        shape._fireAndBubble(DBL_CLICK, evt);\r\n                    }\r\n                }\r\n            }\r\n            // content events\r\n            this._fire(CONTENT_MOUSEUP);\r\n            if (Kinetic.listenClickTap) {\r\n                this._fire(CONTENT_CLICK, evt);\r\n                if(fireDblClick) {\r\n                    this._fire(CONTENT_DBL_CLICK, evt);\r\n                }\r\n            }\r\n\r\n            Kinetic.listenClickTap = false;\r\n\r\n            // always call preventDefault for desktop events because some browsers\r\n            // try to drag and drop the canvas element\r\n            if (evt.preventDefault) {\r\n                evt.preventDefault();\r\n            }\r\n        },\r\n        _touchstart: function(evt) {\r\n            this._setPointerPosition(evt);\r\n            var obj = this.getIntersection(this.getPointerPosition()),\r\n                shape = obj && obj.shape ? obj.shape : undefined;\r\n\r\n            Kinetic.listenClickTap = true;\r\n\r\n            if (shape) {\r\n                this.tapStartShape = shape;\r\n                shape._fireAndBubble(TOUCHSTART, evt);\r\n\r\n                // only call preventDefault if the shape is listening for events\r\n                if (shape.isListening() && evt.preventDefault) {\r\n                    evt.preventDefault();\r\n                }\r\n            }\r\n            // content event\r\n            this._fire(CONTENT_TOUCHSTART, evt);\r\n        },\r\n        _touchend: function(evt) {\r\n            this._setPointerPosition(evt);\r\n            var that = this,\r\n                obj = this.getIntersection(this.getPointerPosition()),\r\n                shape = obj && obj.shape ? obj.shape : undefined,\r\n                fireDblClick = false;\r\n\r\n                if(Kinetic.inDblClickWindow) {\r\n                    fireDblClick = true;\r\n                    Kinetic.inDblClickWindow = false;\r\n                }\r\n                else {\r\n                    Kinetic.inDblClickWindow = true;\r\n                }\r\n\r\n                setTimeout(function() {\r\n                    Kinetic.inDblClickWindow = false;\r\n                }, Kinetic.dblClickWindow);\r\n\r\n            if (shape) {\r\n                shape._fireAndBubble(TOUCHEND, evt);\r\n\r\n                // detect if tap or double tap occurred\r\n                if(Kinetic.listenClickTap && shape._id === this.tapStartShape._id) {\r\n                    shape._fireAndBubble(TAP, evt);\r\n\r\n                    if(fireDblClick) {\r\n                        shape._fireAndBubble(DBL_TAP, evt);\r\n                    }\r\n                }\r\n                // only call preventDefault if the shape is listening for events\r\n                if (shape.isListening() && evt.preventDefault) {\r\n                    evt.preventDefault();\r\n                }\r\n            }\r\n            // content events\r\n            if (Kinetic.listenClickTap) {\r\n                this._fire(CONTENT_TOUCHEND, evt);\r\n                if(fireDblClick) {\r\n                    this._fire(CONTENT_DBL_TAP, evt);\r\n                }\r\n            }\r\n\r\n            Kinetic.listenClickTap = false;\r\n        },\r\n        _touchmove: function(evt) {\r\n            this._setPointerPosition(evt);\r\n            var dd = Kinetic.DD,\r\n                obj = this.getIntersection(this.getPointerPosition()),\r\n                shape = obj && obj.shape ? obj.shape : undefined;\r\n\r\n            if (shape) {\r\n                shape._fireAndBubble(TOUCHMOVE, evt);\r\n\r\n                // only call preventDefault if the shape is listening for events\r\n                if (shape.isListening() && evt.preventDefault) {\r\n                    evt.preventDefault();\r\n                }\r\n            }\r\n            this._fire(CONTENT_TOUCHMOVE, evt);\r\n\r\n            // start drag and drop\r\n            if(dd) {\r\n                dd._drag(evt);\r\n            }\r\n        },\r\n        _setMousePosition: function(evt) {\r\n\r\n            var mouseX = evt.offsetX !== undefined ? evt.offsetX : evt.layerX || (evt.clientX - this._getContentPosition().left),\r\n                mouseY = evt.offsetY !== undefined ? evt.offsetY : evt.layerY || (evt.clientY - this._getContentPosition().top);\r\n\r\n            this.mousePos = {\r\n                x: mouseX,\r\n                y: mouseY\r\n            };\r\n        },\r\n        _setTouchPosition: function(evt) {\r\n            var touch, touchX, touchY;\r\n\r\n            if(evt.touches !== undefined && evt.touches.length === 1) {\r\n                // one finger\r\n                touch = evt.touches[0];\r\n\r\n                // get the information for finger #1\r\n                touchX = touch.clientX - this._getContentPosition().left;\r\n                touchY = touch.clientY - this._getContentPosition().top;\r\n\r\n                this.touchPos = {\r\n                    x: touchX,\r\n                    y: touchY\r\n                };\r\n            }\r\n        },\r\n        _getContentPosition: function() {\r\n            var rect = this.content.getBoundingClientRect();\r\n            return {\r\n                top: rect.top,\r\n                left: rect.left\r\n            };\r\n        },\r\n        _buildDOM: function() {\r\n            var container = this.getContainer();\r\n\r\n            // clear content inside container\r\n            container.innerHTML = EMPTY_STRING;\r\n\r\n            // content\r\n            this.content = document.createElement(DIV);\r\n            this.content.style.position = RELATIVE;\r\n            this.content.style.display = INLINE_BLOCK;\r\n            this.content.className = KINETICJS_CONTENT;\r\n            container.appendChild(this.content);\r\n\r\n            this.bufferCanvas = new Kinetic.SceneCanvas();\r\n            this.hitCanvas = new Kinetic.HitCanvas();\r\n\r\n            this._resizeDOM();\r\n        },\r\n        _onContent: function(typesStr, handler) {\r\n            var types = typesStr.split(SPACE),\r\n                len = types.length,\r\n                n, baseEvent;\r\n\r\n            for(n = 0; n < len; n++) {\r\n                baseEvent = types[n];\r\n                this.content.addEventListener(baseEvent, handler, false);\r\n            }\r\n        }\r\n    });\r\n    Kinetic.Util.extend(Kinetic.Stage, Kinetic.Container);\r\n\r\n    // add getters and setters\r\n    Kinetic.Factory.addGetter(Kinetic.Stage, 'container');\r\n\r\n    /**\r\n     * get container DOM element\r\n     * @name getContainer\r\n     * @method\r\n     * @memberof Kinetic.Stage.prototype\r\n     */\r\n})();\r\n;(function() {\r\n    // constants\r\n    var HASH = '#',\r\n        BEFORE_DRAW ='beforeDraw',\r\n        DRAW = 'draw';\r\n\r\n    Kinetic.Util.addMethods(Kinetic.Layer, {\r\n        ___init: function(config) {\r\n            this.nodeType = 'Layer';\r\n            this.canvas = new Kinetic.SceneCanvas();\r\n            this.hitCanvas = new Kinetic.HitCanvas();\r\n            // call super constructor\r\n            Kinetic.Container.call(this, config);\r\n        },\r\n        _validateAdd: function(child) {\r\n            var type = child.getType();\r\n            if (type !== 'Group' && type !== 'Shape') {\r\n                Kinetic.Util.error('You may only add groups and shapes to a layer.');\r\n            }\r\n        },\r\n        /**\r\n         * get visible intersection object that contains shape and pixel data. This is the preferred\r\n         * method for determining if a point intersects a shape or not\r\n         * @method\r\n         * @memberof Kinetic.Layer.prototype\r\n         * @param {Object} pos point object\r\n         */\r\n        getIntersection: function() {\r\n            var pos = Kinetic.Util._getXY(Array.prototype.slice.call(arguments)),\r\n                p, colorKey, shape;\r\n\r\n            if(this.isVisible() && this.isListening()) {\r\n                p = this.hitCanvas.context._context.getImageData(pos.x | 0, pos.y | 0, 1, 1).data;\r\n                // this indicates that a hit pixel may have been found\r\n                if(p[3] === 255) {\r\n                    colorKey = Kinetic.Util._rgbToHex(p[0], p[1], p[2]);\r\n                    shape = Kinetic.shapes[HASH + colorKey];\r\n                    return {\r\n                        shape: shape,\r\n                        pixel: p\r\n                    };\r\n                }\r\n                // if no shape mapped to that pixel, return pixel array\r\n                else if(p[0] > 0 || p[1] > 0 || p[2] > 0 || p[3] > 0) {\r\n                    return {\r\n                        pixel: p\r\n                    };\r\n                }\r\n            }\r\n\r\n            return null;\r\n        },\r\n        drawScene: function(canvas) {\r\n            canvas = canvas || this.getCanvas();\r\n\r\n            this._fire(BEFORE_DRAW, {\r\n                node: this\r\n            });\r\n\r\n            if(this.getClearBeforeDraw()) {\r\n                canvas.getContext().clear();\r\n            }\r\n            \r\n            Kinetic.Container.prototype.drawScene.call(this, canvas);\r\n\r\n            this._fire(DRAW, {\r\n                node: this\r\n            });\r\n\r\n            return this;\r\n        },\r\n        drawHit: function() {\r\n            var layer = this.getLayer();\r\n\r\n            if(layer && layer.getClearBeforeDraw()) {\r\n                layer.getHitCanvas().getContext().clear();\r\n            }\r\n\r\n            Kinetic.Container.prototype.drawHit.call(this);\r\n            return this;\r\n        },\r\n        /**\r\n         * get layer canvas\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         */\r\n        getCanvas: function() {\r\n            return this.canvas;\r\n        },\r\n        /**\r\n         * get layer hit canvas\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         */\r\n        getHitCanvas: function() {\r\n            return this.hitCanvas;\r\n        },\r\n        /**\r\n         * get layer canvas context\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         */\r\n        getContext: function() {\r\n            return this.getCanvas().getContext();\r\n        },\r\n        /**\r\n         * clear scene and hit canvas contexts tied to the layer\r\n         * @method\r\n         * @memberof Kinetic.Node.prototype\r\n         * @param {Array|Object} [bounds]\r\n         * @example\r\n         * layer.clear();<br>\r\n         * layer.clear(0, 0, 100, 100);\r\n         */\r\n        clear: function() {\r\n            var context = this.getContext(),\r\n                hitContext = this.getHitCanvas().getContext();\r\n\r\n            context.clear.apply(context, arguments);\r\n            hitContext.clear.apply(hitContext, arguments);\r\n            return this;\r\n        },\r\n        // extend Node.prototype.setVisible\r\n        setVisible: function(visible) {\r\n            Kinetic.Node.prototype.setVisible.call(this, visible);\r\n            if(visible) {\r\n                this.getCanvas()._canvas.style.display = 'block';\r\n                this.hitCanvas._canvas.style.display = 'block';\r\n            }\r\n            else {\r\n                this.getCanvas()._canvas.style.display = 'none';\r\n                this.hitCanvas._canvas.style.display = 'none';\r\n            }\r\n            return this;\r\n        },\r\n        // extend Node.prototype.setZIndex\r\n        setZIndex: function(index) {\r\n            Kinetic.Node.prototype.setZIndex.call(this, index);\r\n            var stage = this.getStage();\r\n            if(stage) {\r\n                stage.content.removeChild(this.getCanvas()._canvas);\r\n\r\n                if(index < stage.getChildren().length - 1) {\r\n                    stage.content.insertBefore(this.getCanvas()._canvas, stage.getChildren()[index + 1].getCanvas()._canvas);\r\n                }\r\n                else {\r\n                    stage.content.appendChild(this.getCanvas()._canvas);\r\n                }\r\n            }\r\n            return this;\r\n        },\r\n        // extend Node.prototype.moveToTop\r\n        moveToTop: function() {\r\n            Kinetic.Node.prototype.moveToTop.call(this);\r\n            var stage = this.getStage();\r\n            if(stage) {\r\n                stage.content.removeChild(this.getCanvas()._canvas);\r\n                stage.content.appendChild(this.getCanvas()._canvas);\r\n            }\r\n        },\r\n        // extend Node.prototype.moveUp\r\n        moveUp: function() {\r\n            if(Kinetic.Node.prototype.moveUp.call(this)) {\r\n                var stage = this.getStage();\r\n                if(stage) {\r\n                    stage.content.removeChild(this.getCanvas()._canvas);\r\n\r\n                    if(this.index < stage.getChildren().length - 1) {\r\n                        stage.content.insertBefore(this.getCanvas()._canvas, stage.getChildren()[this.index + 1].getCanvas()._canvas);\r\n                    }\r\n                    else {\r\n                        stage.content.appendChild(this.getCanvas()._canvas);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        // extend Node.prototype.moveDown\r\n        moveDown: function() {\r\n            if(Kinetic.Node.prototype.moveDown.call(this)) {\r\n                var stage = this.getStage();\r\n                if(stage) {\r\n                    var children = stage.getChildren();\r\n                    stage.content.removeChild(this.getCanvas()._canvas);\r\n                    stage.content.insertBefore(this.getCanvas()._canvas, children[this.index + 1].getCanvas()._canvas);\r\n                }\r\n            }\r\n        },\r\n        // extend Node.prototype.moveToBottom\r\n        moveToBottom: function() {\r\n            if(Kinetic.Node.prototype.moveToBottom.call(this)) {\r\n                var stage = this.getStage();\r\n                if(stage) {\r\n                    var children = stage.getChildren();\r\n                    stage.content.removeChild(this.getCanvas()._canvas);\r\n                    stage.content.insertBefore(this.getCanvas()._canvas, children[1].getCanvas()._canvas);\r\n                }\r\n            }\r\n        },\r\n        getLayer: function() {\r\n            return this;\r\n        },\r\n        remove: function() {\r\n            var stage = this.getStage(), \r\n                canvas = this.getCanvas(), \r\n                _canvas = canvas._canvas;\r\n\r\n            Kinetic.Node.prototype.remove.call(this);\r\n\r\n            if(stage && _canvas && Kinetic.Util._isInDocument(_canvas)) {\r\n                stage.content.removeChild(_canvas);\r\n            }\r\n            return this;\r\n        },\r\n        getStage: function() {\r\n            return this.parent;\r\n        }\r\n    });\r\n    Kinetic.Util.extend(Kinetic.Layer, Kinetic.Container);\r\n\r\n    // add getters and setters\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Layer, 'clearBeforeDraw', true);\r\n\r\n    /**\r\n     * set flag which determines if the layer is cleared or not\r\n     *  before drawing\r\n     * @name setClearBeforeDraw\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     * @param {Boolean} clearBeforeDraw\r\n     */\r\n\r\n    /**\r\n     * get flag which determines if the layer is cleared or not\r\n     *  before drawing\r\n     * @name getClearBeforeDraw\r\n     * @method\r\n     * @memberof Kinetic.Node.prototype\r\n     */\r\n})();\r\n;(function() {\r\n    Kinetic.Util.addMethods(Kinetic.Group, {\r\n        ___init: function(config) {\r\n            this.nodeType = 'Group';\r\n            // call super constructor\r\n            Kinetic.Container.call(this, config);\r\n        },\r\n        _validateAdd: function(child) {\r\n            var type = child.getType();\r\n            if (type !== 'Group' && type !== 'Shape') {\r\n                Kinetic.Util.error('You may only add groups and shapes to groups.');\r\n            }\r\n        },\r\n    });\r\n    Kinetic.Util.extend(Kinetic.Group, Kinetic.Container);\r\n})();\r\n;(function() {\r\n    /**\r\n     * Rect constructor\r\n     * @constructor\r\n     * @memberof Kinetic\r\n     * @augments Kinetic.Shape\r\n     * @param {Object} config\r\n     * @param {Number} [config.cornerRadius]\r\n     * @param {String} [config.fill] fill color\r\n     * @param {Object} [config.fillRGB] set fill color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.fillR] set fill red component\r\n     * @param {Integer} [config.fillG] set fill green component\r\n     * @param {Integer} [config.fillB] set fill blue component\r\n     * @param {Image} [config.fillPatternImage] fill pattern image\r\n     * @param {Number} [config.fillPatternX]\r\n     * @param {Number} [config.fillPatternY]\r\n     * @param {Number|Array|Object} [config.fillPatternOffset] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillPatternOffsetX] \r\n     * @param {Number} [config.fillPatternOffsetY] \r\n     * @param {Number|Array|Object} [config.fillPatternScale] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillPatternScaleX]\r\n     * @param {Number} [config.fillPatternScaleY]\r\n     * @param {Number} [config.fillPatternRotation]\r\n     * @param {String} [config.fillPatternRepeat] can be 'repeat', 'repeat-x', 'repeat-y', or 'no-repeat'.  The default is 'no-repeat'\r\n     * @param {Number|Array|Object} [config.fillLinearGradientStartPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillLinearGradientStartPointX]\r\n     * @param {Number} [config.fillLinearGradientStartPointY]\r\n     * @param {Number|Array|Object} [config.fillLinearGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number|Array|Object} [config.fillLinearGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillLinearGradientEndPointX]\r\n     * @param {Number} [config.fillLinearGradientEndPointY]\r\n     * @param {Array} [config.fillLinearGradientColorStops] array of color stops\r\n     * @param {Number|Array|Object} [config.fillRadialGradientStartPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillRadialGradientStartPointX]\r\n     * @param {Number} [config.fillRadialGradientStartPointY]\r\n     * @param {Number|Array|Object} [config.fillRadialGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillRadialGradientEndPointX] \r\n     * @param {Number} [config.fillRadialGradientEndPointY] \r\n     * @param {Number} [config.fillRadialGradientStartRadius]\r\n     * @param {Number} [config.fillRadialGradientEndRadius]\r\n     * @param {Array} [config.fillRadialGradientColorStops] array of color stops\r\n     * @param {Boolean} [config.fillEnabled] flag which enables or disables the fill.  The default value is true\r\n     * @param {String} [config.fillPriority] can be color, linear-gradient, radial-graident, or pattern.  The default value is color.  The fillPriority property makes it really easy to toggle between different fill types.  For example, if you want to toggle between a fill color style and a fill pattern style, simply set the fill property and the fillPattern properties, and then use setFillPriority('color') to render the shape with a color fill, or use setFillPriority('pattern') to render the shape with the pattern fill configuration\r\n     * @param {String} [config.stroke] stroke color\r\n     * @param {Object} [config.strokeRGB] set stroke color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.strokeR] set stroke red component\r\n     * @param {Integer} [config.strokeG] set stroke green component\r\n     * @param {Integer} [config.strokeB] set stroke blue component\r\n     * @param {Number} [config.strokeWidth] stroke width\r\n     * @param {Boolean} [config.strokeScaleEnabled] flag which enables or disables stroke scale.  The default is true\r\n     * @param {Boolean} [config.strokeEnabled] flag which enables or disables the stroke.  The default value is true\r\n     * @param {String} [config.lineJoin] can be miter, round, or bevel.  The default\r\n     *  is miter\r\n     * @param {String} [config.lineCap] can be butt, round, or sqare.  The default\r\n     *  is butt\r\n     * @param {String} [config.shadowColor]\r\n     * @param {Object} [config.shadowColorRGB] set shadowColor color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.shadowColorR] set shadowColor red component\r\n     * @param {Integer} [config.shadowColorG] set shadowColor green component\r\n     * @param {Integer} [config.shadowColorB] set shadowColor blue component\r\n     * @param {Number} [config.shadowBlur]\r\n     * @param {Object} [config.shadowOffset]\r\n     * @param {Number} [config.shadowOffsetX]\r\n     * @param {Number} [config.shadowOffsetY]\r\n     * @param {Number} [config.shadowOpacity] shadow opacity.  Can be any real number\r\n     *  between 0 and 1\r\n     * @param {Boolean} [config.shadowEnabled] flag which enables or disables the shadow.  The default value is true\r\n     * @param {Array} [config.dashArray]\r\n     * @param {Boolean} [config.dashArrayEnabled] flag which enables or disables the dashArray.  The default value is true\r\n     * @param {Number} [config.x]\r\n     * @param {Number} [config.y]\r\n     * @param {Number} [config.width]\r\n     * @param {Number} [config.height]\r\n     * @param {Boolean} [config.visible]\r\n     * @param {Boolean} [config.listening] whether or not the node is listening for events\r\n     * @param {String} [config.id] unique id\r\n     * @param {String} [config.name] non-unique name\r\n     * @param {Number} [config.opacity] determines node opacity.  Can be any number between 0 and 1\r\n     * @param {Object} [config.scale] set scale\r\n     * @param {Number} [config.scaleX] set scale x\r\n     * @param {Number} [config.scaleY] set scale y\r\n     * @param {Number} [config.rotation] rotation in radians\r\n     * @param {Number} [config.rotationDeg] rotation in degrees\r\n     * @param {Object} [config.offset] offset from center point and rotation point\r\n     * @param {Number} [config.offsetX] set offset x\r\n     * @param {Number} [config.offsetY] set offset y\r\n     * @param {Boolean} [config.draggable] makes the node draggable.  When stages are draggable, you can drag and drop\r\n     *  the entire stage by dragging any portion of the stage\r\n     * @param {Function} [config.dragBoundFunc]\r\n     * @example\r\n     * var rect = new Kinetic.Rect({<br>\r\n     *   width: 100,<br>\r\n     *   height: 50,<br>\r\n     *   fill: 'red',<br>\r\n     *   stroke: 'black'<br>\r\n     *   strokeWidth: 5<br>\r\n     * });\r\n     */\r\n    Kinetic.Rect = function(config) {\r\n        this.___init(config);\r\n    };\r\n\r\n    Kinetic.Rect.prototype = {\r\n        ___init: function(config) {\r\n            Kinetic.Shape.call(this, config);\r\n            this.className = 'Rect';\r\n        },\r\n        drawFunc: function(context) {\r\n            var cornerRadius = this.getCornerRadius(),\r\n                width = this.getWidth(),\r\n                height = this.getHeight();\r\n\r\n            context.beginPath();\r\n\r\n            if(!cornerRadius) {\r\n                // simple rect - don't bother doing all that complicated maths stuff.\r\n                context.rect(0, 0, width, height);\r\n            }\r\n            else {\r\n                // arcTo would be nicer, but browser support is patchy (Opera)\r\n                context.moveTo(cornerRadius, 0);\r\n                context.lineTo(width - cornerRadius, 0);\r\n                context.arc(width - cornerRadius, cornerRadius, cornerRadius, Math.PI * 3 / 2, 0, false);\r\n                context.lineTo(width, height - cornerRadius);\r\n                context.arc(width - cornerRadius, height - cornerRadius, cornerRadius, 0, Math.PI / 2, false);\r\n                context.lineTo(cornerRadius, height);\r\n                context.arc(cornerRadius, height - cornerRadius, cornerRadius, Math.PI / 2, Math.PI, false);\r\n                context.lineTo(0, cornerRadius);\r\n                context.arc(cornerRadius, cornerRadius, cornerRadius, Math.PI, Math.PI * 3 / 2, false);\r\n            }\r\n            context.closePath();\r\n            context.fillStrokeShape(this);\r\n        }\r\n    };\r\n\r\n    Kinetic.Util.extend(Kinetic.Rect, Kinetic.Shape);\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Rect, 'cornerRadius', 0);\r\n\r\n    /**\r\n     * set corner radius\r\n     * @name setCornerRadius\r\n     * @method\r\n     * @memberof Kinetic.Rect.prototype\r\n     * @param {Number} corner radius\r\n     */\r\n\r\n    /**\r\n     * get corner radius\r\n     * @name getCornerRadius\r\n     * @method\r\n     * @memberof Kinetic.Rect.prototype\r\n     * @returns {Number}\r\n     */\r\n\r\n})();\r\n;(function() {\r\n    // the 0.0001 offset fixes a bug in Chrome 27\r\n    var PIx2 = (Math.PI * 2) - 0.0001,\r\n        CIRCLE = 'Circle';\r\n\r\n    /**\r\n     * Circle constructor\r\n     * @constructor\r\n     * @memberof Kinetic\r\n     * @augments Kinetic.Shape\r\n     * @param {Object} config\r\n     * @param {Number} config.radius\r\n     * @param {String} [config.fill] fill color\r\n     * @param {Object} [config.fillRGB] set fill color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.fillR] set fill red component\r\n     * @param {Integer} [config.fillG] set fill green component\r\n     * @param {Integer} [config.fillB] set fill blue component\r\n     * @param {Image} [config.fillPatternImage] fill pattern image\r\n     * @param {Number} [config.fillPatternX]\r\n     * @param {Number} [config.fillPatternY]\r\n     * @param {Number|Array|Object} [config.fillPatternOffset] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillPatternOffsetX] \r\n     * @param {Number} [config.fillPatternOffsetY] \r\n     * @param {Number|Array|Object} [config.fillPatternScale] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillPatternScaleX]\r\n     * @param {Number} [config.fillPatternScaleY]\r\n     * @param {Number} [config.fillPatternRotation]\r\n     * @param {String} [config.fillPatternRepeat] can be 'repeat', 'repeat-x', 'repeat-y', or 'no-repeat'.  The default is 'no-repeat'\r\n     * @param {Number|Array|Object} [config.fillLinearGradientStartPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillLinearGradientStartPointX]\r\n     * @param {Number} [config.fillLinearGradientStartPointY]\r\n     * @param {Number|Array|Object} [config.fillLinearGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number|Array|Object} [config.fillLinearGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillLinearGradientEndPointX]\r\n     * @param {Number} [config.fillLinearGradientEndPointY]\r\n     * @param {Array} [config.fillLinearGradientColorStops] array of color stops\r\n     * @param {Number|Array|Object} [config.fillRadialGradientStartPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillRadialGradientStartPointX]\r\n     * @param {Number} [config.fillRadialGradientStartPointY]\r\n     * @param {Number|Array|Object} [config.fillRadialGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillRadialGradientEndPointX] \r\n     * @param {Number} [config.fillRadialGradientEndPointY] \r\n     * @param {Number} [config.fillRadialGradientStartRadius]\r\n     * @param {Number} [config.fillRadialGradientEndRadius]\r\n     * @param {Array} [config.fillRadialGradientColorStops] array of color stops\r\n     * @param {Boolean} [config.fillEnabled] flag which enables or disables the fill.  The default value is true\r\n     * @param {String} [config.fillPriority] can be color, linear-gradient, radial-graident, or pattern.  The default value is color.  The fillPriority property makes it really easy to toggle between different fill types.  For example, if you want to toggle between a fill color style and a fill pattern style, simply set the fill property and the fillPattern properties, and then use setFillPriority('color') to render the shape with a color fill, or use setFillPriority('pattern') to render the shape with the pattern fill configuration\r\n     * @param {String} [config.stroke] stroke color\r\n     * @param {Object} [config.strokeRGB] set stroke color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.strokeR] set stroke red component\r\n     * @param {Integer} [config.strokeG] set stroke green component\r\n     * @param {Integer} [config.strokeB] set stroke blue component\r\n     * @param {Number} [config.strokeWidth] stroke width\r\n     * @param {Boolean} [config.strokeScaleEnabled] flag which enables or disables stroke scale.  The default is true\r\n     * @param {Boolean} [config.strokeEnabled] flag which enables or disables the stroke.  The default value is true\r\n     * @param {String} [config.lineJoin] can be miter, round, or bevel.  The default\r\n     *  is miter\r\n     * @param {String} [config.lineCap] can be butt, round, or sqare.  The default\r\n     *  is butt\r\n     * @param {String} [config.shadowColor]\r\n     * @param {Object} [config.shadowColorRGB] set shadowColor color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.shadowColorR] set shadowColor red component\r\n     * @param {Integer} [config.shadowColorG] set shadowColor green component\r\n     * @param {Integer} [config.shadowColorB] set shadowColor blue component\r\n     * @param {Number} [config.shadowBlur]\r\n     * @param {Object} [config.shadowOffset]\r\n     * @param {Number} [config.shadowOffsetX]\r\n     * @param {Number} [config.shadowOffsetY]\r\n     * @param {Number} [config.shadowOpacity] shadow opacity.  Can be any real number\r\n     *  between 0 and 1\r\n     * @param {Boolean} [config.shadowEnabled] flag which enables or disables the shadow.  The default value is true\r\n     * @param {Array} [config.dashArray]\r\n     * @param {Boolean} [config.dashArrayEnabled] flag which enables or disables the dashArray.  The default value is true\r\n     * @param {Number} [config.x]\r\n     * @param {Number} [config.y]\r\n     * @param {Number} [config.width]\r\n     * @param {Number} [config.height]\r\n     * @param {Boolean} [config.visible]\r\n     * @param {Boolean} [config.listening] whether or not the node is listening for events\r\n     * @param {String} [config.id] unique id\r\n     * @param {String} [config.name] non-unique name\r\n     * @param {Number} [config.opacity] determines node opacity.  Can be any number between 0 and 1\r\n     * @param {Object} [config.scale] set scale\r\n     * @param {Number} [config.scaleX] set scale x\r\n     * @param {Number} [config.scaleY] set scale y\r\n     * @param {Number} [config.rotation] rotation in radians\r\n     * @param {Number} [config.rotationDeg] rotation in degrees\r\n     * @param {Object} [config.offset] offset from center point and rotation point\r\n     * @param {Number} [config.offsetX] set offset x\r\n     * @param {Number} [config.offsetY] set offset y\r\n     * @param {Boolean} [config.draggable] makes the node draggable.  When stages are draggable, you can drag and drop\r\n     *  the entire stage by dragging any portion of the stage\r\n     * @param {Function} [config.dragBoundFunc]\r\n     * @example\r\n     * // create simple circle\r\n     * var circle = new Kinetic.Circle({<br>\r\n     *   radius: 40,<br>\r\n     *   fill: 'red',<br>\r\n     *   stroke: 'black'<br>\r\n     *   strokeWidth: 5<br>\r\n     * });<br><br>\r\n     *\r\n     * // create ellipse<br>\r\n     * var circle = new Kinetic.Circle({<br>\r\n     *   radius: 5,<br>\r\n     *   fill: 'red',<br>\r\n     *   stroke: 'black'<br>\r\n     *   strokeWidth: 5,<br>\r\n     *   scaleX: 2,<br>\r\n     *   strokeScaleEnabled: false<br>\r\n     * });\r\n     */\r\n    Kinetic.Circle = function(config) {\r\n        this.___init(config);\r\n    };\r\n\r\n    Kinetic.Circle.prototype = {\r\n        ___init: function(config) {\r\n            // call super constructor\r\n            Kinetic.Shape.call(this, config);\r\n            this.className = CIRCLE;\r\n        },\r\n        drawFunc: function(context) {\r\n            context.beginPath();\r\n            context.arc(0, 0, this.getRadius(), 0, PIx2, false);\r\n            context.closePath();\r\n            context.fillStrokeShape(this);\r\n        },\r\n        // implements Shape.prototype.getWidth()\r\n        getWidth: function() {\r\n            return this.getRadius() * 2;\r\n        },\r\n        // implements Shape.prototype.getHeight()\r\n        getHeight: function() {\r\n            return this.getRadius() * 2;\r\n        },\r\n        // implements Shape.prototype.setWidth()\r\n        setWidth: function(width) {\r\n            Kinetic.Node.prototype.setWidth.call(this, width);\r\n            this.setRadius(width / 2);\r\n        },\r\n        // implements Shape.prototype.setHeight()\r\n        setHeight: function(height) {\r\n            Kinetic.Node.prototype.setHeight.call(this, height);\r\n            this.setRadius(height / 2);\r\n        }\r\n    };\r\n    Kinetic.Util.extend(Kinetic.Circle, Kinetic.Shape);\r\n\r\n    // add getters setters\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Circle, 'radius', 0);\r\n\r\n    /**\r\n     * set radius\r\n     * @name setRadius\r\n     * @method\r\n     * @memberof Kinetic.Circle.prototype\r\n     * @param {Number} radius\r\n     */\r\n\r\n    /**\r\n     * get radius\r\n     * @name getRadius\r\n     * @method\r\n     * @memberof Kinetic.Circle.prototype\r\n     * @returns {Number}\r\n     */\r\n})();\r\n;(function() {\r\n    // the 0.0001 offset fixes a bug in Chrome 27\r\n    var PIx2 = (Math.PI * 2) - 0.0001,\r\n        ELLIPSE = 'Ellipse';\r\n\r\n    /**\r\n     * Ellipse constructor\r\n     * @constructor\r\n     * @augments Kinetic.Shape\r\n     * @param {Object} config\r\n     * @param {Number|Array|Object} config.radius defines x and y radius\r\n     * @@ShapeParams\r\n     * @@NodeParams\r\n     */\r\n    Kinetic.Ellipse = function(config) {\r\n        this.___init(config);\r\n    };\r\n\r\n    Kinetic.Ellipse.prototype = {\r\n        ___init: function(config) {\r\n            // call super constructor\r\n            Kinetic.Shape.call(this, config);\r\n            this.className = ELLIPSE;\r\n        },\r\n        drawFunc: function(context) {\r\n            var r = this.getRadius();\r\n\r\n            context.beginPath();\r\n            context.save();\r\n            if(r.x !== r.y) {\r\n                context.scale(1, r.y / r.x);\r\n            }\r\n            context.arc(0, 0, r.x, 0, PIx2, false);\r\n            context.restore();\r\n            context.closePath();\r\n            context.fillStrokeShape(this);\r\n        },\r\n        // implements Shape.prototype.getWidth()\r\n        getWidth: function() {\r\n            return this.getRadius().x * 2;\r\n        },\r\n        // implements Shape.prototype.getHeight()\r\n        getHeight: function() {\r\n            return this.getRadius().y * 2;\r\n        },\r\n        // implements Shape.prototype.setWidth()\r\n        setWidth: function(width) {\r\n            Kinetic.Node.prototype.setWidth.call(this, width);\r\n            this.setRadius({\r\n                x: width / 2\r\n            });\r\n        },\r\n        // implements Shape.prototype.setHeight()\r\n        setHeight: function(height) {\r\n            Kinetic.Node.prototype.setHeight.call(this, height);\r\n            this.setRadius({\r\n                y: height / 2\r\n            });\r\n        }\r\n    };\r\n    Kinetic.Util.extend(Kinetic.Ellipse, Kinetic.Shape);\r\n\r\n    // add getters setters\r\n    Kinetic.Factory.addPointGetterSetter(Kinetic.Ellipse, 'radius', 0);\r\n\r\n    /**\r\n     * set radius\r\n     * @name setRadius\r\n     * @method\r\n     * @memberof Kinetic.Ellipse.prototype\r\n     * @param {Object|Array} radius\r\n     *  radius can be a number, in which the ellipse becomes a circle,\r\n     *  it can be an object with an x and y component, or it\r\n     *  can be an array in which the first element is the x component\r\n     *  and the second element is the y component.  The x component\r\n     *  defines the horizontal radius and the y component\r\n     *  defines the vertical radius\r\n     */\r\n\r\n    /**\r\n     * get radius\r\n     * @name getRadius\r\n     * @method\r\n     * @memberof Kinetic.Ellipse.prototype\r\n     * @returns {Object}\r\n     */\r\n})();;(function() {\r\n    /**\r\n     * Wedge constructor\r\n     * @constructor\r\n     * @augments Kinetic.Shape\r\n     * @param {Object} config\r\n     * @param {Number} config.angle\r\n     * @param {Number} config.angleDeg angle in degrees\r\n     * @param {Number} config.radius\r\n     * @param {Boolean} [config.clockwise]\r\n     * @param {String} [config.fill] fill color\r\n     * @param {Object} [config.fillRGB] set fill color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.fillR] set fill red component\r\n     * @param {Integer} [config.fillG] set fill green component\r\n     * @param {Integer} [config.fillB] set fill blue component\r\n     * @param {Image} [config.fillPatternImage] fill pattern image\r\n     * @param {Number} [config.fillPatternX]\r\n     * @param {Number} [config.fillPatternY]\r\n     * @param {Number|Array|Object} [config.fillPatternOffset] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillPatternOffsetX] \r\n     * @param {Number} [config.fillPatternOffsetY] \r\n     * @param {Number|Array|Object} [config.fillPatternScale] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillPatternScaleX]\r\n     * @param {Number} [config.fillPatternScaleY]\r\n     * @param {Number} [config.fillPatternRotation]\r\n     * @param {String} [config.fillPatternRepeat] can be 'repeat', 'repeat-x', 'repeat-y', or 'no-repeat'.  The default is 'no-repeat'\r\n     * @param {Number|Array|Object} [config.fillLinearGradientStartPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillLinearGradientStartPointX]\r\n     * @param {Number} [config.fillLinearGradientStartPointY]\r\n     * @param {Number|Array|Object} [config.fillLinearGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number|Array|Object} [config.fillLinearGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillLinearGradientEndPointX]\r\n     * @param {Number} [config.fillLinearGradientEndPointY]\r\n     * @param {Array} [config.fillLinearGradientColorStops] array of color stops\r\n     * @param {Number|Array|Object} [config.fillRadialGradientStartPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillRadialGradientStartPointX]\r\n     * @param {Number} [config.fillRadialGradientStartPointY]\r\n     * @param {Number|Array|Object} [config.fillRadialGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillRadialGradientEndPointX] \r\n     * @param {Number} [config.fillRadialGradientEndPointY] \r\n     * @param {Number} [config.fillRadialGradientStartRadius]\r\n     * @param {Number} [config.fillRadialGradientEndRadius]\r\n     * @param {Array} [config.fillRadialGradientColorStops] array of color stops\r\n     * @param {Boolean} [config.fillEnabled] flag which enables or disables the fill.  The default value is true\r\n     * @param {String} [config.fillPriority] can be color, linear-gradient, radial-graident, or pattern.  The default value is color.  The fillPriority property makes it really easy to toggle between different fill types.  For example, if you want to toggle between a fill color style and a fill pattern style, simply set the fill property and the fillPattern properties, and then use setFillPriority('color') to render the shape with a color fill, or use setFillPriority('pattern') to render the shape with the pattern fill configuration\r\n     * @param {String} [config.stroke] stroke color\r\n     * @param {Object} [config.strokeRGB] set stroke color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.strokeR] set stroke red component\r\n     * @param {Integer} [config.strokeG] set stroke green component\r\n     * @param {Integer} [config.strokeB] set stroke blue component\r\n     * @param {Number} [config.strokeWidth] stroke width\r\n     * @param {Boolean} [config.strokeScaleEnabled] flag which enables or disables stroke scale.  The default is true\r\n     * @param {Boolean} [config.strokeEnabled] flag which enables or disables the stroke.  The default value is true\r\n     * @param {String} [config.lineJoin] can be miter, round, or bevel.  The default\r\n     *  is miter\r\n     * @param {String} [config.lineCap] can be butt, round, or sqare.  The default\r\n     *  is butt\r\n     * @param {String} [config.shadowColor]\r\n     * @param {Object} [config.shadowColorRGB] set shadowColor color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.shadowColorR] set shadowColor red component\r\n     * @param {Integer} [config.shadowColorG] set shadowColor green component\r\n     * @param {Integer} [config.shadowColorB] set shadowColor blue component\r\n     * @param {Number} [config.shadowBlur]\r\n     * @param {Object} [config.shadowOffset]\r\n     * @param {Number} [config.shadowOffsetX]\r\n     * @param {Number} [config.shadowOffsetY]\r\n     * @param {Number} [config.shadowOpacity] shadow opacity.  Can be any real number\r\n     *  between 0 and 1\r\n     * @param {Boolean} [config.shadowEnabled] flag which enables or disables the shadow.  The default value is true\r\n     * @param {Array} [config.dashArray]\r\n     * @param {Boolean} [config.dashArrayEnabled] flag which enables or disables the dashArray.  The default value is true\r\n     * @param {Number} [config.x]\r\n     * @param {Number} [config.y]\r\n     * @param {Number} [config.width]\r\n     * @param {Number} [config.height]\r\n     * @param {Boolean} [config.visible]\r\n     * @param {Boolean} [config.listening] whether or not the node is listening for events\r\n     * @param {String} [config.id] unique id\r\n     * @param {String} [config.name] non-unique name\r\n     * @param {Number} [config.opacity] determines node opacity.  Can be any number between 0 and 1\r\n     * @param {Object} [config.scale] set scale\r\n     * @param {Number} [config.scaleX] set scale x\r\n     * @param {Number} [config.scaleY] set scale y\r\n     * @param {Number} [config.rotation] rotation in radians\r\n     * @param {Number} [config.rotationDeg] rotation in degrees\r\n     * @param {Object} [config.offset] offset from center point and rotation point\r\n     * @param {Number} [config.offsetX] set offset x\r\n     * @param {Number} [config.offsetY] set offset y\r\n     * @param {Boolean} [config.draggable] makes the node draggable.  When stages are draggable, you can drag and drop\r\n     *  the entire stage by dragging any portion of the stage\r\n     * @param {Function} [config.dragBoundFunc]\r\n     * @example\r\n     * // draw a wedge that's pointing downwards<br>\r\n     * var wedge = new Kinetic.Wedge({<br>\r\n     *   radius: 40,<br>\r\n     *   fill: 'red',<br>\r\n     *   stroke: 'black'<br>\r\n     *   strokeWidth: 5,<br>\r\n     *   angleDeg: 60,<br>\r\n     *   rotationDeg: -120<br>\r\n     * });\r\n     */\r\n    Kinetic.Wedge = function(config) {\r\n        this.___init(config);\r\n    };\r\n\r\n    Kinetic.Wedge.prototype = {\r\n        ___init: function(config) {\r\n            // call super constructor\r\n            Kinetic.Shape.call(this, config);\r\n            this.className = 'Wedge';\r\n        },\r\n        drawFunc: function(context) {\r\n            context.beginPath();\r\n            context.arc(0, 0, this.getRadius(), 0, this.getAngle(), this.getClockwise());\r\n            context.lineTo(0, 0);\r\n            context.closePath();\r\n            context.fillStrokeShape(this);\r\n        }\r\n    };\r\n    Kinetic.Util.extend(Kinetic.Wedge, Kinetic.Shape);\r\n\r\n    // add getters setters\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Wedge, 'radius', 0);\r\n\r\n    /**\r\n     * set radius\r\n     * @name setRadius\r\n     * @method\r\n     * @memberof Kinetic.Wedge.prototype\r\n     * @param {Number} radius\r\n     */\r\n\r\n     /**\r\n     * get radius\r\n     * @name getRadius\r\n     * @method\r\n     * @memberof Kinetic.Wedge.prototype\r\n     * @returns {Number}\r\n     */\r\n\r\n    Kinetic.Factory.addRotationGetterSetter(Kinetic.Wedge, 'angle', 0);\r\n\r\n    /**\r\n     * set angle\r\n     * @name setAngle\r\n     * @method\r\n     * @memberof Kinetic.Wedge.prototype\r\n     * @param {Number} angle\r\n     */\r\n\r\n     /**\r\n     * set angle in degrees\r\n     * @name setAngleDeg\r\n     * @method\r\n     * @memberof Kinetic.Wedge.prototype\r\n     * @param {Number} angleDeg\r\n     */\r\n\r\n     /**\r\n     * get angle\r\n     * @name getAngle\r\n     * @method\r\n     * @memberof Kinetic.Wedge.prototype\r\n     * @returns {Number}\r\n     */\r\n\r\n     /**\r\n     * get angle in degrees\r\n     * @name getAngleDeg\r\n     * @method\r\n     * @memberof Kinetic.Wedge.prototype\r\n     * @returns {Number}\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Wedge, 'clockwise', false);\r\n\r\n    /**\r\n     * set clockwise draw direction.  If set to true, the wedge will be drawn clockwise\r\n     *  If set to false, the wedge will be drawn anti-clockwise.  The default is false.\r\n     * @name setClockwise\r\n     * @method\r\n     * @memberof Kinetic.Wedge.prototype\r\n     * @param {Boolean} clockwise\r\n     */\r\n\r\n    /**\r\n     * get clockwise\r\n     * @name getClockwise\r\n     * @method\r\n     * @memberof Kinetic.Wedge.prototype\r\n     * @returns {Boolean}\r\n     */\r\n})();\r\n;(function() {\r\n\r\n    // CONSTANTS\r\n    var IMAGE = 'Image',\r\n        CROP = 'crop',\r\n        SET = 'set';\r\n\r\n    /**\r\n     * Image constructor\r\n     * @constructor\r\n     * @memberof Kinetic\r\n     * @augments Kinetic.Shape\r\n     * @param {Object} config\r\n     * @param {ImageObject} config.image\r\n     * @param {Object} [config.crop]\r\n     * @param {String} [config.fill] fill color\r\n     * @param {Object} [config.fillRGB] set fill color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.fillR] set fill red component\r\n     * @param {Integer} [config.fillG] set fill green component\r\n     * @param {Integer} [config.fillB] set fill blue component\r\n     * @param {Image} [config.fillPatternImage] fill pattern image\r\n     * @param {Number} [config.fillPatternX]\r\n     * @param {Number} [config.fillPatternY]\r\n     * @param {Number|Array|Object} [config.fillPatternOffset] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillPatternOffsetX] \r\n     * @param {Number} [config.fillPatternOffsetY] \r\n     * @param {Number|Array|Object} [config.fillPatternScale] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillPatternScaleX]\r\n     * @param {Number} [config.fillPatternScaleY]\r\n     * @param {Number} [config.fillPatternRotation]\r\n     * @param {String} [config.fillPatternRepeat] can be 'repeat', 'repeat-x', 'repeat-y', or 'no-repeat'.  The default is 'no-repeat'\r\n     * @param {Number|Array|Object} [config.fillLinearGradientStartPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillLinearGradientStartPointX]\r\n     * @param {Number} [config.fillLinearGradientStartPointY]\r\n     * @param {Number|Array|Object} [config.fillLinearGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number|Array|Object} [config.fillLinearGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillLinearGradientEndPointX]\r\n     * @param {Number} [config.fillLinearGradientEndPointY]\r\n     * @param {Array} [config.fillLinearGradientColorStops] array of color stops\r\n     * @param {Number|Array|Object} [config.fillRadialGradientStartPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillRadialGradientStartPointX]\r\n     * @param {Number} [config.fillRadialGradientStartPointY]\r\n     * @param {Number|Array|Object} [config.fillRadialGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillRadialGradientEndPointX] \r\n     * @param {Number} [config.fillRadialGradientEndPointY] \r\n     * @param {Number} [config.fillRadialGradientStartRadius]\r\n     * @param {Number} [config.fillRadialGradientEndRadius]\r\n     * @param {Array} [config.fillRadialGradientColorStops] array of color stops\r\n     * @param {Boolean} [config.fillEnabled] flag which enables or disables the fill.  The default value is true\r\n     * @param {String} [config.fillPriority] can be color, linear-gradient, radial-graident, or pattern.  The default value is color.  The fillPriority property makes it really easy to toggle between different fill types.  For example, if you want to toggle between a fill color style and a fill pattern style, simply set the fill property and the fillPattern properties, and then use setFillPriority('color') to render the shape with a color fill, or use setFillPriority('pattern') to render the shape with the pattern fill configuration\r\n     * @param {String} [config.stroke] stroke color\r\n     * @param {Object} [config.strokeRGB] set stroke color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.strokeR] set stroke red component\r\n     * @param {Integer} [config.strokeG] set stroke green component\r\n     * @param {Integer} [config.strokeB] set stroke blue component\r\n     * @param {Number} [config.strokeWidth] stroke width\r\n     * @param {Boolean} [config.strokeScaleEnabled] flag which enables or disables stroke scale.  The default is true\r\n     * @param {Boolean} [config.strokeEnabled] flag which enables or disables the stroke.  The default value is true\r\n     * @param {String} [config.lineJoin] can be miter, round, or bevel.  The default\r\n     *  is miter\r\n     * @param {String} [config.lineCap] can be butt, round, or sqare.  The default\r\n     *  is butt\r\n     * @param {String} [config.shadowColor]\r\n     * @param {Object} [config.shadowColorRGB] set shadowColor color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.shadowColorR] set shadowColor red component\r\n     * @param {Integer} [config.shadowColorG] set shadowColor green component\r\n     * @param {Integer} [config.shadowColorB] set shadowColor blue component\r\n     * @param {Number} [config.shadowBlur]\r\n     * @param {Object} [config.shadowOffset]\r\n     * @param {Number} [config.shadowOffsetX]\r\n     * @param {Number} [config.shadowOffsetY]\r\n     * @param {Number} [config.shadowOpacity] shadow opacity.  Can be any real number\r\n     *  between 0 and 1\r\n     * @param {Boolean} [config.shadowEnabled] flag which enables or disables the shadow.  The default value is true\r\n     * @param {Array} [config.dashArray]\r\n     * @param {Boolean} [config.dashArrayEnabled] flag which enables or disables the dashArray.  The default value is true\r\n     * @param {Number} [config.x]\r\n     * @param {Number} [config.y]\r\n     * @param {Number} [config.width]\r\n     * @param {Number} [config.height]\r\n     * @param {Boolean} [config.visible]\r\n     * @param {Boolean} [config.listening] whether or not the node is listening for events\r\n     * @param {String} [config.id] unique id\r\n     * @param {String} [config.name] non-unique name\r\n     * @param {Number} [config.opacity] determines node opacity.  Can be any number between 0 and 1\r\n     * @param {Object} [config.scale] set scale\r\n     * @param {Number} [config.scaleX] set scale x\r\n     * @param {Number} [config.scaleY] set scale y\r\n     * @param {Number} [config.rotation] rotation in radians\r\n     * @param {Number} [config.rotationDeg] rotation in degrees\r\n     * @param {Object} [config.offset] offset from center point and rotation point\r\n     * @param {Number} [config.offsetX] set offset x\r\n     * @param {Number} [config.offsetY] set offset y\r\n     * @param {Boolean} [config.draggable] makes the node draggable.  When stages are draggable, you can drag and drop\r\n     *  the entire stage by dragging any portion of the stage\r\n     * @param {Function} [config.dragBoundFunc]\r\n     * @example\r\n     * var imageObj = new Image();<br>\r\n     * imageObj.onload = function() {<br>\r\n     *   var image = new Kinetic.Image({<br>\r\n     *     x: 200,<br>\r\n     *     y: 50,<br>\r\n     *     image: imageObj,<br>\r\n     *     width: 100,<br>\r\n     *     height: 100<br>\r\n     *   });<br>\r\n     * };<br>\r\n     * imageObj.src = '/path/to/image.jpg'\r\n     */\r\n    Kinetic.Image = function(config) {\r\n        this.___init(config);\r\n    };\r\n\r\n    Kinetic.Image.prototype = {\r\n        ___init: function(config) {\r\n            var that = this;\r\n\r\n            // call super constructor\r\n            Kinetic.Shape.call(this, config);\r\n            this.className = IMAGE;\r\n        },\r\n        drawFunc: function(context) {\r\n            var width = this.getWidth(),\r\n                height = this.getHeight(),\r\n                params,\r\n                that = this,\r\n                cropX = this.getCropX() || 0,\r\n                cropY = this.getCropY() || 0,\r\n                cropWidth = this.getCropWidth(),\r\n                cropHeight = this.getCropHeight(),\r\n                image;\r\n\r\n            //TODO: this logic needs to hook int othe new caching system\r\n\r\n            // if a filter is set, and the filter needs to be updated, reapply\r\n            if (this.getFilter() && this._applyFilter) {\r\n                this.applyFilter();\r\n                this._applyFilter = false;\r\n            }\r\n\r\n            // NOTE: this.filterCanvas may be set by the above code block\r\n            if (this.filterCanvas) {\r\n                image = this.filterCanvas._canvas;\r\n            }\r\n            else {\r\n                image = this.getImage();\r\n            }\r\n\r\n            context.beginPath();\r\n            context.rect(0, 0, width, height);\r\n            context.closePath();\r\n            context.fillStrokeShape(this);\r\n\r\n            if(image) {\r\n                // if cropping\r\n                if(cropWidth && cropHeight) {\r\n                    params = [image, cropX, cropY, cropWidth, cropHeight, 0, 0, width, height];\r\n                }\r\n                // no cropping\r\n                else {\r\n                    params = [image, 0, 0, width, height];\r\n                }\r\n\r\n                if(this.hasShadow()) {\r\n                    context.applyShadow(this, function() {\r\n                        context.drawImage.apply(context, params);\r\n                    });\r\n                }\r\n                else {\r\n                    context.drawImage.apply(context, params);\r\n                }\r\n            }\r\n        },\r\n        drawHitFunc: function(context) {\r\n            var width = this.getWidth(),\r\n                height = this.getHeight(),\r\n                imageHitRegion = this.imageHitRegion;\r\n\r\n            if(imageHitRegion) {\r\n                context.drawImage(imageHitRegion, 0, 0, width, height);\r\n                context.beginPath();\r\n                context.rect(0, 0, width, height);\r\n                context.closePath();\r\n                context.strokeShape(this);\r\n            }\r\n            else {\r\n                context.beginPath();\r\n                context.rect(0, 0, width, height);\r\n                context.closePath();\r\n                context.fillStrokeShape(this);\r\n            }\r\n        },\r\n        applyFilter: function() {\r\n            var image = this.getImage(),\r\n                that = this,\r\n                width = this.getWidth(),\r\n                height = this.getHeight(),\r\n                filter = this.getFilter(),\r\n                filterCanvas, context, imageData;\r\n\r\n            if (this.filterCanvas){\r\n                filterCanvas = this.filterCanvas;\r\n                filterCanvas.getContext().clear();\r\n            }\r\n            else {\r\n                filterCanvas = this.filterCanvas = new Kinetic.SceneCanvas({\r\n                    width: width,\r\n                    height: height,\r\n                    pixelRatio: 1\r\n                });\r\n            }\r\n\r\n            context = filterCanvas.getContext();\r\n\r\n            try {\r\n                context.drawImage(image, 0, 0, filterCanvas.getWidth(), filterCanvas.getHeight());\r\n                imageData = context.getImageData(0, 0, filterCanvas.getWidth(), filterCanvas.getHeight());\r\n                filter.call(this, imageData);\r\n                context.putImageData(imageData, 0, 0);\r\n            }\r\n            catch(e) {\r\n                this.clearFilter();\r\n                Kinetic.Util.warn('Unable to apply filter. ' + e.message);\r\n            }\r\n        },\r\n        /**\r\n         * clear filter\r\n         * @method\r\n         * @memberof Kinetic.Image.prototype\r\n         */\r\n        clearFilter: function() {\r\n            this.filterCanvas = null;\r\n            this._applyFilter = false;\r\n        },\r\n        /**\r\n         * create image hit region which enables more accurate hit detection mapping of the image\r\n         *  by avoiding event detections for transparent pixels\r\n         * @method\r\n         * @memberof Kinetic.Image.prototype\r\n         * @param {Function} [callback] callback function to be called once\r\n         *  the image hit region has been created\r\n         * @example\r\n         * image.createImageHitRegion(function() {<br>\r\n         *   layer.drawHit();<br>\r\n         * });\r\n         */\r\n        createImageHitRegion: function(callback) {\r\n            var that = this,\r\n                width = this.getWidth(),\r\n                height = this.getHeight(),\r\n                canvas = new Kinetic.SceneCanvas({\r\n                    width: width,\r\n                    height: height\r\n                }),\r\n                _context = canvas.getContext()._context,\r\n                image = this.getImage(),\r\n                imageData, data, rgbColorKey, i, len;\r\n\r\n            _context.drawImage(image, 0, 0);\r\n\r\n            try {\r\n                imageData = _context.getImageData(0, 0, width, height);\r\n                data = imageData.data;\r\n                len = data.length;\r\n                rgbColorKey = Kinetic.Util._hexToRgb(this.colorKey);\r\n\r\n                // replace non transparent pixels with color key\r\n                for(i = 0; i < len; i += 4) {\r\n                    if (data[i + 3] > 0) {\r\n                        data[i] = rgbColorKey.r;\r\n                        data[i + 1] = rgbColorKey.g;\r\n                        data[i + 2] = rgbColorKey.b;\r\n                    }\r\n                }\r\n\r\n                Kinetic.Util._getImage(imageData, function(imageObj) {\r\n                    that.imageHitRegion = imageObj;\r\n                    if(callback) {\r\n                        callback();\r\n                    }\r\n                });\r\n            }\r\n            catch(e) {\r\n                Kinetic.Util.warn('Unable to create image hit region. ' + e.message);\r\n            }\r\n        },\r\n        /**\r\n         * clear image hit region\r\n         * @method\r\n         * @memberof Kinetic.Image.prototype\r\n         */\r\n        clearImageHitRegion: function() {\r\n            delete this.imageHitRegion;\r\n        },\r\n        getWidth: function() {\r\n            var image = this.getImage();\r\n            return this.attrs.width || (image ? image.width : 0);\r\n        },\r\n        getHeight: function() {\r\n            var image = this.getImage();\r\n            return this.attrs.height || (image ? image.height : 0);\r\n        }\r\n    };\r\n    Kinetic.Util.extend(Kinetic.Image, Kinetic.Shape);\r\n\r\n\r\n    Kinetic.Factory.addFilterGetterSetter = function(constructor, attr, def) {\r\n        this.addGetter(constructor, attr, def);\r\n        this.addFilterSetter(constructor, attr);\r\n    };\r\n\r\n    Kinetic.Factory.addFilterSetter = function(constructor, attr) {\r\n        var that = this,\r\n            method = SET + Kinetic.Util._capitalize(attr);\r\n\r\n        constructor.prototype[method] = function(val) {\r\n            this._setAttr(attr, val);\r\n            this._applyFilter = true;\r\n        };\r\n    };\r\n\r\n    // add getters setters\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Image, 'image');\r\n\r\n    /**\r\n     * set image\r\n     * @name setImage\r\n     * @method\r\n     * @memberof Kinetic.Image.prototype\r\n     * @param {ImageObject} image\r\n     */\r\n\r\n    /**\r\n     * get image\r\n     * @name getImage\r\n     * @method\r\n     * @memberof Kinetic.Image.prototype\r\n     * @returns {ImageObject}\r\n     */\r\n\r\n    Kinetic.Factory.addBoxGetterSetter(Kinetic.Image, 'crop');\r\n    /**\r\n     * set crop\r\n     * @method\r\n     * @name setCrop\r\n     * @memberof Kinetic.Image.prototype\r\n     * @param {Object|Array}\r\n     * @example\r\n     * // set crop x, y, width and height with an array<br>\r\n     * image.setCrop([20, 20, 100, 100]);<br><br>\r\n     *\r\n     * // set crop x, y, width and height with an object<br>\r\n     * image.setCrop({<br>\r\n     *   x: 20,<br>\r\n     *   y: 20,<br>\r\n     *   width: 20,<br>\r\n     *   height: 20<br>\r\n     * });\r\n     */\r\n\r\n     /**\r\n     * set cropX\r\n     * @method\r\n     * @name setCropX\r\n     * @memberof Kinetic.Image.prototype\r\n     * @param {Number} x\r\n     */\r\n\r\n     /**\r\n     * set cropY\r\n     * @name setCropY\r\n     * @method\r\n     * @memberof Kinetic.Image.prototype\r\n     * @param {Number} y\r\n     */\r\n\r\n     /**\r\n     * set cropWidth\r\n     * @name setCropWidth\r\n     * @method\r\n     * @memberof Kinetic.Image.prototype\r\n     * @param {Number} width\r\n     */\r\n\r\n     /**\r\n     * set cropHeight\r\n     * @name setCropHeight\r\n     * @method\r\n     * @memberof Kinetic.Image.prototype\r\n     * @param {Number} height\r\n     */\r\n\r\n    /**\r\n     * get crop\r\n     * @name getCrop\r\n     * @method\r\n     * @memberof Kinetic.Image.prototype\r\n     * @returns {Object}\r\n     */\r\n\r\n    /**\r\n     * get crop x\r\n     * @name getCropX\r\n     * @method\r\n     * @memberof Kinetic.Image.prototype\r\n     * @returns {Number}\r\n     */\r\n\r\n    /**\r\n     * get crop y\r\n     * @name getCropY\r\n     * @method\r\n     * @memberof Kinetic.Image.prototype\r\n     * @returns {Number}\r\n     */\r\n\r\n    /**\r\n     * get crop width\r\n     * @name getCropWidth\r\n     * @method\r\n     * @memberof Kinetic.Image.prototype\r\n     * @returns {Number}\r\n     */\r\n\r\n    /**\r\n     * get crop height\r\n     * @name getCropHeight\r\n     * @method\r\n     * @memberof Kinetic.Image.prototype\r\n     * @returns {Number}\r\n     */\r\n\r\n     Kinetic.Factory.addFilterGetterSetter(Kinetic.Image, 'filter');\r\n\r\n     /**\r\n     * set filter\r\n     * @name setFilter\r\n     * @method\r\n     * @memberof Kinetic.Image.prototype\r\n     * @param {Function} filter\r\n     */\r\n\r\n    /**\r\n     * get filter\r\n     * @name getFilter\r\n     * @method\r\n     * @memberof Kinetic.Image.prototype\r\n     * @returns {Function}\r\n     */\r\n})();\r\n;(function() {\r\n    /**\r\n     * Polygon constructor.&nbsp; Polygons are defined by an array of points\r\n     * @constructor\r\n     * @memberof Kinetic\r\n     * @augments Kinetic.Shape\r\n     * @param {Object} config\r\n     * @param {Array} config.points can be a flattened array of points, an array of point arrays, or an array of point objects.\r\n     *  e.g. [0,1,2,3], [[0,1],[2,3]] and [{x:0,y:1},{x:2,y:3}] are equivalent\r\n     * @param {String} [config.fill] fill color\r\n     * @param {Object} [config.fillRGB] set fill color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.fillR] set fill red component\r\n     * @param {Integer} [config.fillG] set fill green component\r\n     * @param {Integer} [config.fillB] set fill blue component\r\n     * @param {Image} [config.fillPatternImage] fill pattern image\r\n     * @param {Number} [config.fillPatternX]\r\n     * @param {Number} [config.fillPatternY]\r\n     * @param {Number|Array|Object} [config.fillPatternOffset] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillPatternOffsetX] \r\n     * @param {Number} [config.fillPatternOffsetY] \r\n     * @param {Number|Array|Object} [config.fillPatternScale] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillPatternScaleX]\r\n     * @param {Number} [config.fillPatternScaleY]\r\n     * @param {Number} [config.fillPatternRotation]\r\n     * @param {String} [config.fillPatternRepeat] can be 'repeat', 'repeat-x', 'repeat-y', or 'no-repeat'.  The default is 'no-repeat'\r\n     * @param {Number|Array|Object} [config.fillLinearGradientStartPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillLinearGradientStartPointX]\r\n     * @param {Number} [config.fillLinearGradientStartPointY]\r\n     * @param {Number|Array|Object} [config.fillLinearGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number|Array|Object} [config.fillLinearGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillLinearGradientEndPointX]\r\n     * @param {Number} [config.fillLinearGradientEndPointY]\r\n     * @param {Array} [config.fillLinearGradientColorStops] array of color stops\r\n     * @param {Number|Array|Object} [config.fillRadialGradientStartPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillRadialGradientStartPointX]\r\n     * @param {Number} [config.fillRadialGradientStartPointY]\r\n     * @param {Number|Array|Object} [config.fillRadialGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillRadialGradientEndPointX] \r\n     * @param {Number} [config.fillRadialGradientEndPointY] \r\n     * @param {Number} [config.fillRadialGradientStartRadius]\r\n     * @param {Number} [config.fillRadialGradientEndRadius]\r\n     * @param {Array} [config.fillRadialGradientColorStops] array of color stops\r\n     * @param {Boolean} [config.fillEnabled] flag which enables or disables the fill.  The default value is true\r\n     * @param {String} [config.fillPriority] can be color, linear-gradient, radial-graident, or pattern.  The default value is color.  The fillPriority property makes it really easy to toggle between different fill types.  For example, if you want to toggle between a fill color style and a fill pattern style, simply set the fill property and the fillPattern properties, and then use setFillPriority('color') to render the shape with a color fill, or use setFillPriority('pattern') to render the shape with the pattern fill configuration\r\n     * @param {String} [config.stroke] stroke color\r\n     * @param {Object} [config.strokeRGB] set stroke color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.strokeR] set stroke red component\r\n     * @param {Integer} [config.strokeG] set stroke green component\r\n     * @param {Integer} [config.strokeB] set stroke blue component\r\n     * @param {Number} [config.strokeWidth] stroke width\r\n     * @param {Boolean} [config.strokeScaleEnabled] flag which enables or disables stroke scale.  The default is true\r\n     * @param {Boolean} [config.strokeEnabled] flag which enables or disables the stroke.  The default value is true\r\n     * @param {String} [config.lineJoin] can be miter, round, or bevel.  The default\r\n     *  is miter\r\n     * @param {String} [config.lineCap] can be butt, round, or sqare.  The default\r\n     *  is butt\r\n     * @param {String} [config.shadowColor]\r\n     * @param {Object} [config.shadowColorRGB] set shadowColor color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.shadowColorR] set shadowColor red component\r\n     * @param {Integer} [config.shadowColorG] set shadowColor green component\r\n     * @param {Integer} [config.shadowColorB] set shadowColor blue component\r\n     * @param {Number} [config.shadowBlur]\r\n     * @param {Object} [config.shadowOffset]\r\n     * @param {Number} [config.shadowOffsetX]\r\n     * @param {Number} [config.shadowOffsetY]\r\n     * @param {Number} [config.shadowOpacity] shadow opacity.  Can be any real number\r\n     *  between 0 and 1\r\n     * @param {Boolean} [config.shadowEnabled] flag which enables or disables the shadow.  The default value is true\r\n     * @param {Array} [config.dashArray]\r\n     * @param {Boolean} [config.dashArrayEnabled] flag which enables or disables the dashArray.  The default value is true\r\n     * @param {Number} [config.x]\r\n     * @param {Number} [config.y]\r\n     * @param {Number} [config.width]\r\n     * @param {Number} [config.height]\r\n     * @param {Boolean} [config.visible]\r\n     * @param {Boolean} [config.listening] whether or not the node is listening for events\r\n     * @param {String} [config.id] unique id\r\n     * @param {String} [config.name] non-unique name\r\n     * @param {Number} [config.opacity] determines node opacity.  Can be any number between 0 and 1\r\n     * @param {Object} [config.scale] set scale\r\n     * @param {Number} [config.scaleX] set scale x\r\n     * @param {Number} [config.scaleY] set scale y\r\n     * @param {Number} [config.rotation] rotation in radians\r\n     * @param {Number} [config.rotationDeg] rotation in degrees\r\n     * @param {Object} [config.offset] offset from center point and rotation point\r\n     * @param {Number} [config.offsetX] set offset x\r\n     * @param {Number} [config.offsetY] set offset y\r\n     * @param {Boolean} [config.draggable] makes the node draggable.  When stages are draggable, you can drag and drop\r\n     *  the entire stage by dragging any portion of the stage\r\n     * @param {Function} [config.dragBoundFunc]\r\n     * @example\r\n     * var polygon = new Kinetic.Polygon({<br>\r\n     *   points: [73, 192, 73, 160, 340, 23, 500, 109, 499, 139, 342, 93],<br>\r\n     *   fill: '#00D2FF',<br>\r\n     *   stroke: 'black',<br>\r\n     *   strokeWidth: 5<br>\r\n     * });\r\n     */\r\n    Kinetic.Polygon = function(config) {\r\n        this.___init(config);\r\n    };\r\n\r\n    Kinetic.Polygon.prototype = {\r\n        ___init: function(config) {\r\n            // call super constructor\r\n            Kinetic.Shape.call(this, config);\r\n            this.className = 'Polygon';\r\n        },\r\n        drawFunc: function(context) {\r\n            var points = this.getPoints(), \r\n                length = points.length;\r\n\r\n            context.beginPath();\r\n            context.moveTo(points[0].x, points[0].y);\r\n            for(var n = 1; n < length; n++) {\r\n                context.lineTo(points[n].x, points[n].y);\r\n            }\r\n            context.closePath();\r\n            context.fillStrokeShape(this);\r\n        }\r\n    };\r\n    Kinetic.Util.extend(Kinetic.Polygon, Kinetic.Shape);\r\n\r\n    Kinetic.Factory.addPointsGetterSetter(Kinetic.Polygon, 'points');\r\n    /**\r\n     * set points array\r\n     * @name setPoints\r\n     * @method\r\n     * @memberof Kinetic.Polygon.prototype\r\n     * @param {Array} can be an array of point objects or an array\r\n     *  of Numbers.  e.g. [{x:1,y:2},{x:3,y:4}] or [1,2,3,4]\r\n     */\r\n\r\n    /**\r\n     * get points array\r\n     * @name getPoints\r\n     * @method\r\n     * @memberof Kinetic.Polygon.prototype\r\n     * @returns {Array}\r\n     */\r\n})();\r\n;(function() {\r\n    // constants\r\n    var AUTO = 'auto',\r\n        CALIBRI = 'Calibri',\r\n        CANVAS = 'canvas',\r\n        CENTER = 'center',\r\n        CHANGE_KINETIC = 'Change.kinetic',\r\n        CONTEXT_2D = '2d',\r\n        DASH = '-',\r\n        EMPTY_STRING = '',\r\n        LEFT = 'left',\r\n        NEW_LINE = '\\n',\r\n        TEXT = 'text',\r\n        TEXT_UPPER = 'Text',\r\n        TOP = 'top',\r\n        MIDDLE = 'middle',\r\n        NORMAL = 'normal',\r\n        PX_SPACE = 'px ',\r\n        SPACE = ' ',\r\n        RIGHT = 'right',\r\n        WORD = 'word',\r\n        CHAR = 'char',\r\n        NONE = 'none',\r\n        ATTR_CHANGE_LIST = ['fontFamily', 'fontSize', 'fontStyle', 'padding', 'align', 'lineHeight', 'text', 'width', 'height', 'wrap'],\r\n\r\n        // cached variables\r\n        attrChangeListLen = ATTR_CHANGE_LIST.length,\r\n        dummyContext = document.createElement(CANVAS).getContext(CONTEXT_2D);\r\n\r\n    /**\r\n     * Text constructor\r\n     * @constructor\r\n     * @memberof Kinetic\r\n     * @augments Kinetic.Shape\r\n     * @param {Object} config\r\n     * @param {String} [config.fontFamily] default is Calibri\r\n     * @param {Number} [config.fontSize] in pixels.  Default is 12\r\n     * @param {String} [config.fontStyle] can be normal, bold, or italic.  Default is normal\r\n     * @param {String} config.text\r\n     * @param {String} [config.align] can be left, center, or right\r\n     * @param {Number} [config.padding]\r\n     * @param {Number} [config.width] default is auto\r\n     * @param {Number} [config.height] default is auto\r\n     * @param {Number} [config.lineHeight] default is 1\r\n     * @param {String} [config.wrap] can be word, char, or none. Default is word\r\n     * @param {String} [config.fill] fill color\r\n     * @param {Object} [config.fillRGB] set fill color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.fillR] set fill red component\r\n     * @param {Integer} [config.fillG] set fill green component\r\n     * @param {Integer} [config.fillB] set fill blue component\r\n     * @param {Image} [config.fillPatternImage] fill pattern image\r\n     * @param {Number} [config.fillPatternX]\r\n     * @param {Number} [config.fillPatternY]\r\n     * @param {Number|Array|Object} [config.fillPatternOffset] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillPatternOffsetX] \r\n     * @param {Number} [config.fillPatternOffsetY] \r\n     * @param {Number|Array|Object} [config.fillPatternScale] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillPatternScaleX]\r\n     * @param {Number} [config.fillPatternScaleY]\r\n     * @param {Number} [config.fillPatternRotation]\r\n     * @param {String} [config.fillPatternRepeat] can be 'repeat', 'repeat-x', 'repeat-y', or 'no-repeat'.  The default is 'no-repeat'\r\n     * @param {Number|Array|Object} [config.fillLinearGradientStartPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillLinearGradientStartPointX]\r\n     * @param {Number} [config.fillLinearGradientStartPointY]\r\n     * @param {Number|Array|Object} [config.fillLinearGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number|Array|Object} [config.fillLinearGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillLinearGradientEndPointX]\r\n     * @param {Number} [config.fillLinearGradientEndPointY]\r\n     * @param {Array} [config.fillLinearGradientColorStops] array of color stops\r\n     * @param {Number|Array|Object} [config.fillRadialGradientStartPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillRadialGradientStartPointX]\r\n     * @param {Number} [config.fillRadialGradientStartPointY]\r\n     * @param {Number|Array|Object} [config.fillRadialGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillRadialGradientEndPointX] \r\n     * @param {Number} [config.fillRadialGradientEndPointY] \r\n     * @param {Number} [config.fillRadialGradientStartRadius]\r\n     * @param {Number} [config.fillRadialGradientEndRadius]\r\n     * @param {Array} [config.fillRadialGradientColorStops] array of color stops\r\n     * @param {Boolean} [config.fillEnabled] flag which enables or disables the fill.  The default value is true\r\n     * @param {String} [config.fillPriority] can be color, linear-gradient, radial-graident, or pattern.  The default value is color.  The fillPriority property makes it really easy to toggle between different fill types.  For example, if you want to toggle between a fill color style and a fill pattern style, simply set the fill property and the fillPattern properties, and then use setFillPriority('color') to render the shape with a color fill, or use setFillPriority('pattern') to render the shape with the pattern fill configuration\r\n     * @param {String} [config.stroke] stroke color\r\n     * @param {Object} [config.strokeRGB] set stroke color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.strokeR] set stroke red component\r\n     * @param {Integer} [config.strokeG] set stroke green component\r\n     * @param {Integer} [config.strokeB] set stroke blue component\r\n     * @param {Number} [config.strokeWidth] stroke width\r\n     * @param {Boolean} [config.strokeScaleEnabled] flag which enables or disables stroke scale.  The default is true\r\n     * @param {Boolean} [config.strokeEnabled] flag which enables or disables the stroke.  The default value is true\r\n     * @param {String} [config.lineJoin] can be miter, round, or bevel.  The default\r\n     *  is miter\r\n     * @param {String} [config.lineCap] can be butt, round, or sqare.  The default\r\n     *  is butt\r\n     * @param {String} [config.shadowColor]\r\n     * @param {Object} [config.shadowColorRGB] set shadowColor color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.shadowColorR] set shadowColor red component\r\n     * @param {Integer} [config.shadowColorG] set shadowColor green component\r\n     * @param {Integer} [config.shadowColorB] set shadowColor blue component\r\n     * @param {Number} [config.shadowBlur]\r\n     * @param {Object} [config.shadowOffset]\r\n     * @param {Number} [config.shadowOffsetX]\r\n     * @param {Number} [config.shadowOffsetY]\r\n     * @param {Number} [config.shadowOpacity] shadow opacity.  Can be any real number\r\n     *  between 0 and 1\r\n     * @param {Boolean} [config.shadowEnabled] flag which enables or disables the shadow.  The default value is true\r\n     * @param {Array} [config.dashArray]\r\n     * @param {Boolean} [config.dashArrayEnabled] flag which enables or disables the dashArray.  The default value is true\r\n     * @param {Number} [config.x]\r\n     * @param {Number} [config.y]\r\n     * @param {Number} [config.width]\r\n     * @param {Number} [config.height]\r\n     * @param {Boolean} [config.visible]\r\n     * @param {Boolean} [config.listening] whether or not the node is listening for events\r\n     * @param {String} [config.id] unique id\r\n     * @param {String} [config.name] non-unique name\r\n     * @param {Number} [config.opacity] determines node opacity.  Can be any number between 0 and 1\r\n     * @param {Object} [config.scale] set scale\r\n     * @param {Number} [config.scaleX] set scale x\r\n     * @param {Number} [config.scaleY] set scale y\r\n     * @param {Number} [config.rotation] rotation in radians\r\n     * @param {Number} [config.rotationDeg] rotation in degrees\r\n     * @param {Object} [config.offset] offset from center point and rotation point\r\n     * @param {Number} [config.offsetX] set offset x\r\n     * @param {Number} [config.offsetY] set offset y\r\n     * @param {Boolean} [config.draggable] makes the node draggable.  When stages are draggable, you can drag and drop\r\n     *  the entire stage by dragging any portion of the stage\r\n     * @param {Function} [config.dragBoundFunc]\r\n     * @example\r\n     * var text = new Kinetic.Text({<br>\r\n     *   x: stage.getWidth() / 2,<br>\r\n     *   y: 15,<br>\r\n     *   text: 'Simple Text',<br>\r\n     *   fontSize: 30,<br>\r\n     *   fontFamily: 'Calibri',<br>\r\n     *   fill: 'green'<br>\r\n     * });\r\n     */\r\n    Kinetic.Text = function(config) {\r\n        this.___init(config);\r\n    };\r\n    function _fillFunc(context) {\r\n        context.fillText(this.partialText, 0, 0);\r\n    }\r\n    function _strokeFunc(context) {\r\n        context.strokeText(this.partialText, 0, 0);\r\n    }\r\n\r\n    Kinetic.Text.prototype = {\r\n        ___init: function(config) {\r\n            var that = this;\r\n\r\n            if (config.width === undefined) {\r\n                config.width = AUTO;\r\n            }\r\n            if (config.height === undefined) {\r\n                config.height = AUTO;\r\n            }\r\n\r\n            // call super constructor\r\n            Kinetic.Shape.call(this, config);\r\n\r\n            this._fillFunc = _fillFunc;\r\n            this._strokeFunc = _strokeFunc;\r\n            this.className = TEXT_UPPER;\r\n\r\n            // update text data for certain attr changes\r\n            for(var n = 0; n < attrChangeListLen; n++) {\r\n                this.on(ATTR_CHANGE_LIST[n] + CHANGE_KINETIC, that._setTextData);\r\n            }\r\n\r\n            this._setTextData();\r\n        },\r\n        drawFunc: function(context) {\r\n            var p = this.getPadding(),\r\n                fontStyle = this.getFontStyle(),\r\n                fontSize = this.getFontSize(),\r\n                fontFamily = this.getFontFamily(),\r\n                textHeight = this.getTextHeight(),\r\n                lineHeightPx = this.getLineHeight() * textHeight,\r\n                textArr = this.textArr,\r\n                textArrLen = textArr.length,\r\n                totalWidth = this.getWidth();\r\n\r\n            context.setAttr('font', this._getContextFont());\r\n            context.setAttr('textBaseline', MIDDLE);\r\n            context.setAttr('textAlign', LEFT);\r\n            context.save();\r\n            context.translate(p, 0);\r\n            context.translate(0, p + textHeight / 2);\r\n\r\n            // draw text lines\r\n            for(var n = 0; n < textArrLen; n++) {\r\n                var obj = textArr[n],\r\n                    text = obj.text,\r\n                    width = obj.width;\r\n\r\n                // horizontal alignment\r\n                context.save();\r\n                if(this.getAlign() === RIGHT) {\r\n                    context.translate(totalWidth - width - p * 2, 0);\r\n                }\r\n                else if(this.getAlign() === CENTER) {\r\n                    context.translate((totalWidth - width - p * 2) / 2, 0);\r\n                }\r\n\r\n                this.partialText = text;\r\n                context.fillStrokeShape(this);\r\n                context.restore();\r\n                context.translate(0, lineHeightPx);\r\n            }\r\n            context.restore();\r\n        },\r\n        drawHitFunc: function(context) {\r\n            var width = this.getWidth(),\r\n                height = this.getHeight();\r\n\r\n            context.beginPath();\r\n            context.rect(0, 0, width, height);\r\n            context.closePath();\r\n            context.fillStrokeShape(this);\r\n        },\r\n        /**\r\n         * set text\r\n         * @method\r\n         * @memberof Kinetic.Text.prototype\r\n         * @param {String} text\r\n         */\r\n        setText: function(text) {\r\n            var str = Kinetic.Util._isString(text) ? text : text.toString();\r\n            this._setAttr(TEXT, str);\r\n        },\r\n        /**\r\n         * get width of text area, which includes padding\r\n         * @method\r\n         * @memberof Kinetic.Text.prototype\r\n         * @returns {Number}\r\n         */\r\n        getWidth: function() {\r\n            return this.attrs.width === AUTO ? this.getTextWidth() + this.getPadding() * 2 : this.attrs.width;\r\n        },\r\n        /**\r\n         * get the height of the text area, which takes into account multi-line text, line heights, and padding\r\n         * @method\r\n         * @memberof Kinetic.Text.prototype\r\n         * @returns {Number}\r\n         */\r\n        getHeight: function() {\r\n            return this.attrs.height === AUTO ? (this.getTextHeight() * this.textArr.length * this.getLineHeight()) + this.getPadding() * 2 : this.attrs.height;\r\n        },\r\n        /**\r\n         * get text width\r\n         * @method\r\n         * @memberof Kinetic.Text.prototype\r\n         * @returns {Number}\r\n         */\r\n        getTextWidth: function() {\r\n            return this.textWidth;\r\n        },\r\n        /**\r\n         * get text height\r\n         * @method\r\n         * @memberof Kinetic.Text.prototype\r\n         * @returns {Number}\r\n         */\r\n        getTextHeight: function() {\r\n            return this.textHeight;\r\n        },\r\n        _getTextSize: function(text) {\r\n            var _context = dummyContext,\r\n                fontSize = this.getFontSize(),\r\n                metrics;\r\n\r\n            _context.save();\r\n            _context.font = this._getContextFont();\r\n\r\n            metrics = _context.measureText(text);\r\n            _context.restore();\r\n            return {\r\n                width: metrics.width,\r\n                height: parseInt(fontSize, 10)\r\n            };\r\n        },\r\n        _getContextFont: function() {\r\n            return this.getFontStyle() + SPACE + this.getFontSize() + PX_SPACE + this.getFontFamily();\r\n        },\r\n        _addTextLine: function (line, width, height) {\r\n            return this.textArr.push({text: line, width: width});\r\n        },\r\n        _getTextWidth: function (text) {\r\n            return dummyContext.measureText(text).width;\r\n        },\r\n        _setTextData: function () {\r\n             var lines = this.getText().split('\\n'),\r\n                 fontSize = +this.getFontSize(),\r\n                 textWidth = 0,\r\n                 lineHeightPx = this.getLineHeight() * fontSize,\r\n                 width = this.attrs.width,\r\n                 height = this.attrs.height,\r\n                 fixedWidth = width !== AUTO,\r\n                 fixedHeight = height !== AUTO,\r\n                 padding = this.getPadding(),\r\n                 maxWidth = width - padding * 2,\r\n                 maxHeightPx = height - padding * 2,\r\n                 currentHeightPx = 0,\r\n                 wrap = this.getWrap(),\r\n                 shouldWrap = wrap !== NONE,\r\n                 wrapAtWord = wrap !==  CHAR && shouldWrap;\r\n\r\n             this.textArr = [];\r\n             dummyContext.save();\r\n             dummyContext.font = this.getFontStyle() + SPACE + fontSize + PX_SPACE + this.getFontFamily();\r\n             for (var i = 0, max = lines.length; i < max; ++i) {\r\n                 var line = lines[i],\r\n                     lineWidth = this._getTextWidth(line);\r\n                 if (fixedWidth && lineWidth > maxWidth) {\r\n                     /*\r\n                      * if width is fixed and line does not fit entirely\r\n                      * break the line into multiple fitting lines\r\n                      */\r\n                     while (line.length > 0) {\r\n                        /*\r\n                         * use binary search to find the longest substring that\r\n                         * that would fit in the specified width\r\n                         */\r\n                         var low = 0, high = line.length,\r\n                             match = '', matchWidth = 0;\r\n                         while (low < high) {\r\n                             var mid = (low + high) >>> 1,\r\n                                 substr = line.slice(0, mid + 1),\r\n                                 substrWidth = this._getTextWidth(substr);\r\n                             if (substrWidth <= maxWidth) {\r\n                                 low = mid + 1;\r\n                                 match = substr;\r\n                                 matchWidth = substrWidth;\r\n                             } else {\r\n                                 high = mid;\r\n                             }\r\n                         }\r\n                         /*\r\n                          * 'low' is now the index of the substring end\r\n                          * 'match' is the substring\r\n                          * 'matchWidth' is the substring width in px\r\n                          */\r\n                         if (match) {\r\n                             // a fitting substring was found\r\n                             if (wrapAtWord) {\r\n                                 // try to find a space or dash where wrapping could be done\r\n                                 var wrapIndex = Math.max(match.lastIndexOf(SPACE),\r\n                                                          match.lastIndexOf(DASH)) + 1;\r\n                                 if (wrapIndex > 0) {\r\n                                     // re-cut the substring found at the space/dash position\r\n                                     low = wrapIndex;\r\n                                     match = match.slice(0, low);\r\n                                     matchWidth = this._getTextWidth(match);\r\n                                 }\r\n                             }\r\n                             this._addTextLine(match, matchWidth);\r\n                             currentHeightPx += lineHeightPx;\r\n                             if (!shouldWrap ||\r\n                                 (fixedHeight && currentHeightPx + lineHeightPx > maxHeightPx)) {\r\n                                 /*\r\n                                  * stop wrapping if wrapping is disabled or if adding\r\n                                  * one more line would overflow the fixed height\r\n                                  */\r\n                                 break;\r\n                             }\r\n                             line = line.slice(low);\r\n                             if (line.length > 0) {\r\n                                 // Check if the remaining text would fit on one line\r\n                                 lineWidth = this._getTextWidth(line);\r\n                                 if (lineWidth <= maxWidth) {\r\n                                     // if it does, add the line and break out of the loop\r\n                                     this._addTextLine(line, lineWidth);\r\n                                     currentHeightPx += lineHeightPx;\r\n                                     break;\r\n                                 }\r\n                             }\r\n                         } else {\r\n                             // not even one character could fit in the element, abort\r\n                             break;\r\n                         }\r\n                     }\r\n                 } else {\r\n                     // element width is automatically adjusted to max line width\r\n                     this._addTextLine(line, lineWidth);\r\n                     currentHeightPx += lineHeightPx;\r\n                     textWidth = Math.max(textWidth, lineWidth);\r\n                 }\r\n                 // if element height is fixed, abort if adding one more line would overflow\r\n                 if (fixedHeight && currentHeightPx + lineHeightPx > maxHeightPx) {\r\n                     break;\r\n                 }\r\n             }\r\n             dummyContext.restore();\r\n             this.textHeight = fontSize;\r\n             this.textWidth = textWidth;\r\n         }\r\n    };\r\n    Kinetic.Util.extend(Kinetic.Text, Kinetic.Shape);\r\n\r\n    // add getters setters\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Text, 'fontFamily', CALIBRI);\r\n\r\n    /**\r\n     * set font family\r\n     * @name setFontFamily\r\n     * @method\r\n     * @memberof Kinetic.Text.prototype\r\n     * @param {String} fontFamily\r\n     */\r\n\r\n     /**\r\n     * get font family\r\n     * @name getFontFamily\r\n     * @method\r\n     * @memberof Kinetic.Text.prototype\r\n     * @returns {String}\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Text, 'fontSize', 12);\r\n\r\n    /**\r\n     * set font size in pixels\r\n     * @name setFontSize\r\n     * @method\r\n     * @memberof Kinetic.Text.prototype\r\n     * @param {Number} fontSize\r\n     */\r\n\r\n     /**\r\n     * get font size\r\n     * @name getFontSize\r\n     * @method\r\n     * @memberof Kinetic.Text.prototype\r\n     * @returns {Number}\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Text, 'fontStyle', NORMAL);\r\n\r\n    /**\r\n     * set font style.  Can be 'normal', 'italic', or 'bold'.  'normal' is the default.\r\n     * @name setFontStyle\r\n     * @method\r\n     * @memberof Kinetic.Text.prototype\r\n     * @param {String} fontStyle\r\n     */\r\n\r\n     /**\r\n     * get font style\r\n     * @name getFontStyle\r\n     * @method\r\n     * @memberof Kinetic.Text.prototype\r\n     * @returns {String}\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Text, 'padding', 0);\r\n\r\n    /**\r\n     * set padding\r\n     * @name setPadding\r\n     * @method\r\n     * @memberof Kinetic.Text.prototype\r\n     * @param {int} padding\r\n     */\r\n\r\n     /**\r\n     * get padding\r\n     * @name getPadding\r\n     * @method\r\n     * @memberof Kinetic.Text.prototype\r\n     * @returns {Number}\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Text, 'align', LEFT);\r\n\r\n    /**\r\n     * set horizontal align of text\r\n     * @name setAlign\r\n     * @method\r\n     * @memberof Kinetic.Text.prototype\r\n     * @param {String} align align can be 'left', 'center', or 'right'\r\n     */\r\n\r\n     /**\r\n     * get horizontal align\r\n     * @name getAlign\r\n     * @method\r\n     * @memberof Kinetic.Text.prototype\r\n     * @returns {String}\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Text, 'lineHeight', 1);\r\n\r\n    /**\r\n     * set line height\r\n     * @name setLineHeight\r\n     * @method\r\n     * @memberof Kinetic.Text.prototype\r\n     * @param {Number} lineHeight default is 1\r\n     */\r\n\r\n     /**\r\n     * get line height\r\n     * @name getLineHeight\r\n     * @method\r\n     * @memberof Kinetic.Text.prototype\r\n     * @returns {Number}\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Text, 'wrap', WORD);\r\n\r\n    /**\r\n     * set wrap\r\n     * @name setWrap\r\n     * @method\r\n     * @memberof Kinetic.Text.prototype\r\n     * @param {String} wrap can be word, char, or none. Default is word\r\n     */\r\n\r\n     /**\r\n     * get wrap\r\n     * @name getWrap\r\n     * @method\r\n     * @memberof Kinetic.Text.prototype\r\n     * @returns {String}\r\n     */\r\n\r\n    Kinetic.Factory.addGetter(Kinetic.Text, TEXT, EMPTY_STRING);\r\n\r\n    /**\r\n     * get text\r\n     * @name getText\r\n     * @method\r\n     * @memberof Kinetic.Text.prototype\r\n     * @returns {String}\r\n     */\r\n\r\n    Kinetic.Factory.addSetter(Kinetic.Text, 'width');\r\n\r\n    /**\r\n     * set width\r\n     * @name setWidth\r\n     * @method\r\n     * @memberof Kinetic.Text.prototype\r\n     * @param {Number|String} width default is auto\r\n     */\r\n\r\n    Kinetic.Factory.addSetter(Kinetic.Text, 'height');\r\n\r\n    /**\r\n     * set height\r\n     * @name setHeight\r\n     * @method\r\n     * @memberof Kinetic.Text.prototype\r\n     * @param {Number|String} height default is auto\r\n     */\r\n})();\r\n;(function() {\r\n    /**\r\n     * Line constructor.&nbsp; Lines are defined by an array of points\r\n     * @constructor\r\n     * @memberof Kinetic\r\n     * @augments Kinetic.Shape\r\n     * @param {Object} config\r\n     * @param {Array} config.points can be a flattened array of points, an array of point arrays, or an array of point objects.\r\n     *  e.g. [0,1,2,3], [[0,1],[2,3]] and [{x:0,y:1},{x:2,y:3}] are equivalent\r\n     * @param {String} [config.fill] fill color\r\n     * @param {Object} [config.fillRGB] set fill color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.fillR] set fill red component\r\n     * @param {Integer} [config.fillG] set fill green component\r\n     * @param {Integer} [config.fillB] set fill blue component\r\n     * @param {Image} [config.fillPatternImage] fill pattern image\r\n     * @param {Number} [config.fillPatternX]\r\n     * @param {Number} [config.fillPatternY]\r\n     * @param {Number|Array|Object} [config.fillPatternOffset] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillPatternOffsetX] \r\n     * @param {Number} [config.fillPatternOffsetY] \r\n     * @param {Number|Array|Object} [config.fillPatternScale] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillPatternScaleX]\r\n     * @param {Number} [config.fillPatternScaleY]\r\n     * @param {Number} [config.fillPatternRotation]\r\n     * @param {String} [config.fillPatternRepeat] can be 'repeat', 'repeat-x', 'repeat-y', or 'no-repeat'.  The default is 'no-repeat'\r\n     * @param {Number|Array|Object} [config.fillLinearGradientStartPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillLinearGradientStartPointX]\r\n     * @param {Number} [config.fillLinearGradientStartPointY]\r\n     * @param {Number|Array|Object} [config.fillLinearGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number|Array|Object} [config.fillLinearGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillLinearGradientEndPointX]\r\n     * @param {Number} [config.fillLinearGradientEndPointY]\r\n     * @param {Array} [config.fillLinearGradientColorStops] array of color stops\r\n     * @param {Number|Array|Object} [config.fillRadialGradientStartPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillRadialGradientStartPointX]\r\n     * @param {Number} [config.fillRadialGradientStartPointY]\r\n     * @param {Number|Array|Object} [config.fillRadialGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillRadialGradientEndPointX] \r\n     * @param {Number} [config.fillRadialGradientEndPointY] \r\n     * @param {Number} [config.fillRadialGradientStartRadius]\r\n     * @param {Number} [config.fillRadialGradientEndRadius]\r\n     * @param {Array} [config.fillRadialGradientColorStops] array of color stops\r\n     * @param {Boolean} [config.fillEnabled] flag which enables or disables the fill.  The default value is true\r\n     * @param {String} [config.fillPriority] can be color, linear-gradient, radial-graident, or pattern.  The default value is color.  The fillPriority property makes it really easy to toggle between different fill types.  For example, if you want to toggle between a fill color style and a fill pattern style, simply set the fill property and the fillPattern properties, and then use setFillPriority('color') to render the shape with a color fill, or use setFillPriority('pattern') to render the shape with the pattern fill configuration\r\n     * @param {String} [config.stroke] stroke color\r\n     * @param {Object} [config.strokeRGB] set stroke color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.strokeR] set stroke red component\r\n     * @param {Integer} [config.strokeG] set stroke green component\r\n     * @param {Integer} [config.strokeB] set stroke blue component\r\n     * @param {Number} [config.strokeWidth] stroke width\r\n     * @param {Boolean} [config.strokeScaleEnabled] flag which enables or disables stroke scale.  The default is true\r\n     * @param {Boolean} [config.strokeEnabled] flag which enables or disables the stroke.  The default value is true\r\n     * @param {String} [config.lineJoin] can be miter, round, or bevel.  The default\r\n     *  is miter\r\n     * @param {String} [config.lineCap] can be butt, round, or sqare.  The default\r\n     *  is butt\r\n     * @param {String} [config.shadowColor]\r\n     * @param {Object} [config.shadowColorRGB] set shadowColor color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.shadowColorR] set shadowColor red component\r\n     * @param {Integer} [config.shadowColorG] set shadowColor green component\r\n     * @param {Integer} [config.shadowColorB] set shadowColor blue component\r\n     * @param {Number} [config.shadowBlur]\r\n     * @param {Object} [config.shadowOffset]\r\n     * @param {Number} [config.shadowOffsetX]\r\n     * @param {Number} [config.shadowOffsetY]\r\n     * @param {Number} [config.shadowOpacity] shadow opacity.  Can be any real number\r\n     *  between 0 and 1\r\n     * @param {Boolean} [config.shadowEnabled] flag which enables or disables the shadow.  The default value is true\r\n     * @param {Array} [config.dashArray]\r\n     * @param {Boolean} [config.dashArrayEnabled] flag which enables or disables the dashArray.  The default value is true\r\n     * @param {Number} [config.x]\r\n     * @param {Number} [config.y]\r\n     * @param {Number} [config.width]\r\n     * @param {Number} [config.height]\r\n     * @param {Boolean} [config.visible]\r\n     * @param {Boolean} [config.listening] whether or not the node is listening for events\r\n     * @param {String} [config.id] unique id\r\n     * @param {String} [config.name] non-unique name\r\n     * @param {Number} [config.opacity] determines node opacity.  Can be any number between 0 and 1\r\n     * @param {Object} [config.scale] set scale\r\n     * @param {Number} [config.scaleX] set scale x\r\n     * @param {Number} [config.scaleY] set scale y\r\n     * @param {Number} [config.rotation] rotation in radians\r\n     * @param {Number} [config.rotationDeg] rotation in degrees\r\n     * @param {Object} [config.offset] offset from center point and rotation point\r\n     * @param {Number} [config.offsetX] set offset x\r\n     * @param {Number} [config.offsetY] set offset y\r\n     * @param {Boolean} [config.draggable] makes the node draggable.  When stages are draggable, you can drag and drop\r\n     *  the entire stage by dragging any portion of the stage\r\n     * @param {Function} [config.dragBoundFunc]\r\n     * @example\r\n     * // simple line\r\n     * var line = new Kinetic.Line({<br>\r\n     *   x: 100,<br>\r\n     *   y: 50,<br>\r\n     *   points: [73, 70, 340, 23, 450, 60, 500, 20],<br>\r\n     *   stroke: 'red'<br>\r\n     * });<br><br>\r\n     *\r\n     * // dashed line with shadow<br>\r\n     * var line = new Kinetic.Line({<br>\r\n     *   x: 100,<br>\r\n     *   y: 50,<br>\r\n     *   points: [73, 70, 340, 23, 450, 60, 500, 20],<br>\r\n     *   stroke: 'red',<br>\r\n     *   dashArray: [33, 10],<br>\r\n     *   shadowColor: 'black',<br>\r\n     *   shadowBlur: 10,<br>\r\n     *   shadowOffset: 10,<br>\r\n     *   shadowOpacity: 0.5<br>\r\n     * });\r\n     */\r\n    Kinetic.Line = function(config) {\r\n        this.___init(config);\r\n    };\r\n\r\n    Kinetic.Line.prototype = {\r\n        ___init: function(config) {\r\n            // call super constructor\r\n            Kinetic.Shape.call(this, config);\r\n            this.className = 'Line';\r\n        },\r\n        drawFunc: function(context) {\r\n            var points = this.getPoints(),\r\n                length = points.length,\r\n                n, point;\r\n\r\n            context.beginPath();\r\n            context.moveTo(points[0].x, points[0].y);\r\n\r\n            for(n = 1; n < length; n++) {\r\n                point = points[n];\r\n                context.lineTo(point.x, point.y);\r\n            }\r\n\r\n            context.strokeShape(this);\r\n        }\r\n    };\r\n    Kinetic.Util.extend(Kinetic.Line, Kinetic.Shape);\r\n\r\n    Kinetic.Factory.addPointsGetterSetter(Kinetic.Line, 'points');\r\n    /**\r\n     * set points array\r\n     * @name setPoints\r\n     * @method\r\n     * @memberof Kinetic.Line.prototype\r\n     * @param {Array} can be an array of point objects or an array\r\n     *  of Numbers.  e.g. [{x:1,y:2},{x:3,y:4}] or [1,2,3,4]\r\n     */\r\n\r\n    /**\r\n     * get points array\r\n     * @name getPoints\r\n     * @method\r\n     * @memberof Kinetic.Line.prototype\r\n     * @returns {Array}\r\n     */\r\n})();\r\n;(function() {\r\n    /**\r\n     * Spline constructor.&nbsp; Splines are defined by an array of points and\r\n     *  a tension\r\n     * @constructor\r\n     * @memberof Kinetic\r\n     * @augments Kinetic.Shape\r\n     * @param {Object} config\r\n     * @param {Array} config.points can be a flattened array of points, an array of point arrays, or an array of point objects.\r\n     *  e.g. [0,1,2,3], [[0,1],[2,3]] and [{x:0,y:1},{x:2,y:3}] are equivalent\r\n     * @param {Number} [config.tension] default value is 1.  Higher values will result in a more curvy line.  A value of 0 will result in no interpolation.\r\n     * @param {String} [config.fill] fill color\r\n     * @param {Object} [config.fillRGB] set fill color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.fillR] set fill red component\r\n     * @param {Integer} [config.fillG] set fill green component\r\n     * @param {Integer} [config.fillB] set fill blue component\r\n     * @param {Image} [config.fillPatternImage] fill pattern image\r\n     * @param {Number} [config.fillPatternX]\r\n     * @param {Number} [config.fillPatternY]\r\n     * @param {Number|Array|Object} [config.fillPatternOffset] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillPatternOffsetX] \r\n     * @param {Number} [config.fillPatternOffsetY] \r\n     * @param {Number|Array|Object} [config.fillPatternScale] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillPatternScaleX]\r\n     * @param {Number} [config.fillPatternScaleY]\r\n     * @param {Number} [config.fillPatternRotation]\r\n     * @param {String} [config.fillPatternRepeat] can be 'repeat', 'repeat-x', 'repeat-y', or 'no-repeat'.  The default is 'no-repeat'\r\n     * @param {Number|Array|Object} [config.fillLinearGradientStartPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillLinearGradientStartPointX]\r\n     * @param {Number} [config.fillLinearGradientStartPointY]\r\n     * @param {Number|Array|Object} [config.fillLinearGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number|Array|Object} [config.fillLinearGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillLinearGradientEndPointX]\r\n     * @param {Number} [config.fillLinearGradientEndPointY]\r\n     * @param {Array} [config.fillLinearGradientColorStops] array of color stops\r\n     * @param {Number|Array|Object} [config.fillRadialGradientStartPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillRadialGradientStartPointX]\r\n     * @param {Number} [config.fillRadialGradientStartPointY]\r\n     * @param {Number|Array|Object} [config.fillRadialGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillRadialGradientEndPointX] \r\n     * @param {Number} [config.fillRadialGradientEndPointY] \r\n     * @param {Number} [config.fillRadialGradientStartRadius]\r\n     * @param {Number} [config.fillRadialGradientEndRadius]\r\n     * @param {Array} [config.fillRadialGradientColorStops] array of color stops\r\n     * @param {Boolean} [config.fillEnabled] flag which enables or disables the fill.  The default value is true\r\n     * @param {String} [config.fillPriority] can be color, linear-gradient, radial-graident, or pattern.  The default value is color.  The fillPriority property makes it really easy to toggle between different fill types.  For example, if you want to toggle between a fill color style and a fill pattern style, simply set the fill property and the fillPattern properties, and then use setFillPriority('color') to render the shape with a color fill, or use setFillPriority('pattern') to render the shape with the pattern fill configuration\r\n     * @param {String} [config.stroke] stroke color\r\n     * @param {Object} [config.strokeRGB] set stroke color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.strokeR] set stroke red component\r\n     * @param {Integer} [config.strokeG] set stroke green component\r\n     * @param {Integer} [config.strokeB] set stroke blue component\r\n     * @param {Number} [config.strokeWidth] stroke width\r\n     * @param {Boolean} [config.strokeScaleEnabled] flag which enables or disables stroke scale.  The default is true\r\n     * @param {Boolean} [config.strokeEnabled] flag which enables or disables the stroke.  The default value is true\r\n     * @param {String} [config.lineJoin] can be miter, round, or bevel.  The default\r\n     *  is miter\r\n     * @param {String} [config.lineCap] can be butt, round, or sqare.  The default\r\n     *  is butt\r\n     * @param {String} [config.shadowColor]\r\n     * @param {Object} [config.shadowColorRGB] set shadowColor color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.shadowColorR] set shadowColor red component\r\n     * @param {Integer} [config.shadowColorG] set shadowColor green component\r\n     * @param {Integer} [config.shadowColorB] set shadowColor blue component\r\n     * @param {Number} [config.shadowBlur]\r\n     * @param {Object} [config.shadowOffset]\r\n     * @param {Number} [config.shadowOffsetX]\r\n     * @param {Number} [config.shadowOffsetY]\r\n     * @param {Number} [config.shadowOpacity] shadow opacity.  Can be any real number\r\n     *  between 0 and 1\r\n     * @param {Boolean} [config.shadowEnabled] flag which enables or disables the shadow.  The default value is true\r\n     * @param {Array} [config.dashArray]\r\n     * @param {Boolean} [config.dashArrayEnabled] flag which enables or disables the dashArray.  The default value is true\r\n     * @param {Number} [config.x]\r\n     * @param {Number} [config.y]\r\n     * @param {Number} [config.width]\r\n     * @param {Number} [config.height]\r\n     * @param {Boolean} [config.visible]\r\n     * @param {Boolean} [config.listening] whether or not the node is listening for events\r\n     * @param {String} [config.id] unique id\r\n     * @param {String} [config.name] non-unique name\r\n     * @param {Number} [config.opacity] determines node opacity.  Can be any number between 0 and 1\r\n     * @param {Object} [config.scale] set scale\r\n     * @param {Number} [config.scaleX] set scale x\r\n     * @param {Number} [config.scaleY] set scale y\r\n     * @param {Number} [config.rotation] rotation in radians\r\n     * @param {Number} [config.rotationDeg] rotation in degrees\r\n     * @param {Object} [config.offset] offset from center point and rotation point\r\n     * @param {Number} [config.offsetX] set offset x\r\n     * @param {Number} [config.offsetY] set offset y\r\n     * @param {Boolean} [config.draggable] makes the node draggable.  When stages are draggable, you can drag and drop\r\n     *  the entire stage by dragging any portion of the stage\r\n     * @param {Function} [config.dragBoundFunc]\r\n     * @example\r\n     * var spline = new Kinetic.Spline({<br>\r\n     *   x: 100,<br>\r\n     *   y: 50,<br>\r\n     *   points: [73, 70, 340, 23, 450, 60, 500, 20],<br>\r\n     *   stroke: 'red',<br>\r\n     *   tension: 1<br>\r\n     * });\r\n     */\r\n    Kinetic.Spline = function(config) {\r\n        this.___init(config);\r\n    };\r\n\r\n    Kinetic.Spline.prototype = {\r\n        ___init: function(config) {\r\n            var that = this;\r\n            // call super constructor\r\n            Kinetic.Shape.call(this, config);\r\n            this.className = 'Spline';\r\n\r\n            this.on('pointsChange.kinetic tensionChange.kinetic', function() {\r\n                that._setAllPoints();\r\n            });\r\n\r\n            this._setAllPoints();\r\n        },\r\n        drawFunc: function(context) {\r\n            var points = this.getPoints(),\r\n                length = points.length,\r\n                tension = this.getTension(),\r\n                ap, len, n, point;\r\n\r\n            context.beginPath();\r\n            context.moveTo(points[0].x, points[0].y);\r\n\r\n            // tension\r\n            if(tension !== 0 && length > 2) {\r\n                ap = this.allPoints;\r\n                len = ap.length;\r\n                n = 2;\r\n\r\n                context.quadraticCurveTo(ap[0].x, ap[0].y, ap[1].x, ap[1].y);\r\n\r\n                while(n < len - 1) {\r\n                    context.bezierCurveTo(ap[n].x, ap[n++].y, ap[n].x, ap[n++].y, ap[n].x, ap[n++].y);\r\n                }\r\n\r\n                context.quadraticCurveTo(ap[len - 1].x, ap[len - 1].y, points[length - 1].x, points[length - 1].y);\r\n            }\r\n            // no tension\r\n            else {\r\n                for(n = 1; n < length; n++) {\r\n                    point = points[n];\r\n                    context.lineTo(point.x, point.y);\r\n                }\r\n            }\r\n\r\n            context.strokeShape(this);\r\n        },\r\n        _setAllPoints: function() {\r\n            this.allPoints = Kinetic.Util._expandPoints(this.getPoints(), this.getTension());\r\n        }\r\n    };\r\n    Kinetic.Util.extend(Kinetic.Spline, Kinetic.Shape);\r\n\r\n    // add getters setters\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Spline, 'tension', 1);\r\n\r\n    /**\r\n     * get tension\r\n     * @name getTension\r\n     * @method\r\n     * @memberof Kinetic.Spline.prototype\r\n     * @returns {Number}\r\n     */\r\n\r\n    /**\r\n     * set tension\r\n     * @name setTension\r\n     * @method\r\n     * @memberof Kinetic.Spline.prototype\r\n     * @param {Number} tension\r\n     */\r\n\r\n    Kinetic.Factory.addPointsGetterSetter(Kinetic.Spline, 'points');\r\n    /**\r\n     * get points array\r\n     * @name getPoints\r\n     * @method\r\n     * @memberof Kinetic.Spline.prototype\r\n     * @returns {Array}\r\n     */\r\n\r\n    /**\r\n     * set points array\r\n     * @name setPoints\r\n     * @method\r\n     * @memberof Kinetic.Spline.prototype\r\n     * @param {Array} can be an array of point objects or an array\r\n     *  of Numbers.  e.g. [{x:1,y:2},{x:3,y:4}] or [1,2,3,4]\r\n     */\r\n})();\r\n;(function() {\r\n    /**\r\n     * Blob constructor.  Blobs are defined by an array of points and\r\n     *  a tension\r\n     * @constructor\r\n     * @memberof Kinetic\r\n     * @augments Kinetic.Shape\r\n     * @param {Object} config\r\n     * @param {Array} config.points can be a flattened array of points, an array of point arrays, or an array of point objects.\r\n     *  e.g. [0,1,2,3], [[0,1],[2,3]] and [{x:0,y:1},{x:2,y:3}] are equivalent\r\n     * @param {Number} [config.tension] default value is 1.  Higher values will result in a more curvy line.  A value of 0 will result in no interpolation.\r\n     * @param {String} [config.fill] fill color\r\n     * @param {Object} [config.fillRGB] set fill color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.fillR] set fill red component\r\n     * @param {Integer} [config.fillG] set fill green component\r\n     * @param {Integer} [config.fillB] set fill blue component\r\n     * @param {Image} [config.fillPatternImage] fill pattern image\r\n     * @param {Number} [config.fillPatternX]\r\n     * @param {Number} [config.fillPatternY]\r\n     * @param {Number|Array|Object} [config.fillPatternOffset] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillPatternOffsetX] \r\n     * @param {Number} [config.fillPatternOffsetY] \r\n     * @param {Number|Array|Object} [config.fillPatternScale] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillPatternScaleX]\r\n     * @param {Number} [config.fillPatternScaleY]\r\n     * @param {Number} [config.fillPatternRotation]\r\n     * @param {String} [config.fillPatternRepeat] can be 'repeat', 'repeat-x', 'repeat-y', or 'no-repeat'.  The default is 'no-repeat'\r\n     * @param {Number|Array|Object} [config.fillLinearGradientStartPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillLinearGradientStartPointX]\r\n     * @param {Number} [config.fillLinearGradientStartPointY]\r\n     * @param {Number|Array|Object} [config.fillLinearGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number|Array|Object} [config.fillLinearGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillLinearGradientEndPointX]\r\n     * @param {Number} [config.fillLinearGradientEndPointY]\r\n     * @param {Array} [config.fillLinearGradientColorStops] array of color stops\r\n     * @param {Number|Array|Object} [config.fillRadialGradientStartPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillRadialGradientStartPointX]\r\n     * @param {Number} [config.fillRadialGradientStartPointY]\r\n     * @param {Number|Array|Object} [config.fillRadialGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillRadialGradientEndPointX] \r\n     * @param {Number} [config.fillRadialGradientEndPointY] \r\n     * @param {Number} [config.fillRadialGradientStartRadius]\r\n     * @param {Number} [config.fillRadialGradientEndRadius]\r\n     * @param {Array} [config.fillRadialGradientColorStops] array of color stops\r\n     * @param {Boolean} [config.fillEnabled] flag which enables or disables the fill.  The default value is true\r\n     * @param {String} [config.fillPriority] can be color, linear-gradient, radial-graident, or pattern.  The default value is color.  The fillPriority property makes it really easy to toggle between different fill types.  For example, if you want to toggle between a fill color style and a fill pattern style, simply set the fill property and the fillPattern properties, and then use setFillPriority('color') to render the shape with a color fill, or use setFillPriority('pattern') to render the shape with the pattern fill configuration\r\n     * @param {String} [config.stroke] stroke color\r\n     * @param {Object} [config.strokeRGB] set stroke color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.strokeR] set stroke red component\r\n     * @param {Integer} [config.strokeG] set stroke green component\r\n     * @param {Integer} [config.strokeB] set stroke blue component\r\n     * @param {Number} [config.strokeWidth] stroke width\r\n     * @param {Boolean} [config.strokeScaleEnabled] flag which enables or disables stroke scale.  The default is true\r\n     * @param {Boolean} [config.strokeEnabled] flag which enables or disables the stroke.  The default value is true\r\n     * @param {String} [config.lineJoin] can be miter, round, or bevel.  The default\r\n     *  is miter\r\n     * @param {String} [config.lineCap] can be butt, round, or sqare.  The default\r\n     *  is butt\r\n     * @param {String} [config.shadowColor]\r\n     * @param {Object} [config.shadowColorRGB] set shadowColor color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.shadowColorR] set shadowColor red component\r\n     * @param {Integer} [config.shadowColorG] set shadowColor green component\r\n     * @param {Integer} [config.shadowColorB] set shadowColor blue component\r\n     * @param {Number} [config.shadowBlur]\r\n     * @param {Object} [config.shadowOffset]\r\n     * @param {Number} [config.shadowOffsetX]\r\n     * @param {Number} [config.shadowOffsetY]\r\n     * @param {Number} [config.shadowOpacity] shadow opacity.  Can be any real number\r\n     *  between 0 and 1\r\n     * @param {Boolean} [config.shadowEnabled] flag which enables or disables the shadow.  The default value is true\r\n     * @param {Array} [config.dashArray]\r\n     * @param {Boolean} [config.dashArrayEnabled] flag which enables or disables the dashArray.  The default value is true\r\n     * @param {Number} [config.x]\r\n     * @param {Number} [config.y]\r\n     * @param {Number} [config.width]\r\n     * @param {Number} [config.height]\r\n     * @param {Boolean} [config.visible]\r\n     * @param {Boolean} [config.listening] whether or not the node is listening for events\r\n     * @param {String} [config.id] unique id\r\n     * @param {String} [config.name] non-unique name\r\n     * @param {Number} [config.opacity] determines node opacity.  Can be any number between 0 and 1\r\n     * @param {Object} [config.scale] set scale\r\n     * @param {Number} [config.scaleX] set scale x\r\n     * @param {Number} [config.scaleY] set scale y\r\n     * @param {Number} [config.rotation] rotation in radians\r\n     * @param {Number} [config.rotationDeg] rotation in degrees\r\n     * @param {Object} [config.offset] offset from center point and rotation point\r\n     * @param {Number} [config.offsetX] set offset x\r\n     * @param {Number} [config.offsetY] set offset y\r\n     * @param {Boolean} [config.draggable] makes the node draggable.  When stages are draggable, you can drag and drop\r\n     *  the entire stage by dragging any portion of the stage\r\n     * @param {Function} [config.dragBoundFunc]\r\n     * @example\r\n     * var blob = new Kinetic.Blob({<br>\r\n     *   points: [73, 140, 340, 23, 500, 109, 300, 170],<br>\r\n     *   tension: 0.8,<br>\r\n     *   fill: 'red',<br>\r\n     *   stroke: 'black'<br>\r\n     *   strokeWidth: 5<br>\r\n     * });\r\n     */\r\n    Kinetic.Blob = function(config) {\r\n        this.___init(config);\r\n    };\r\n\r\n    Kinetic.Blob.prototype = {\r\n        ___init: function(config) {\r\n            var that = this;\r\n            // call super constructor\r\n            Kinetic.Shape.call(this, config);\r\n            this.className = 'Blob';\r\n\r\n            this.on('pointsChange.kinetic tensionChange.kinetic', function() {\r\n                that._setAllPoints();\r\n            });\r\n\r\n            this._setAllPoints();\r\n        },\r\n        drawFunc: function(context) {\r\n            var points = this.getPoints(),\r\n                length = points.length,\r\n                tension = this.getTension(),\r\n                ap, len, n, point;\r\n\r\n            context.beginPath();\r\n            context.moveTo(points[0].x, points[0].y);\r\n\r\n            // tension\r\n            if(tension !== 0 && length > 2) {\r\n                ap = this.allPoints;\r\n                len = ap.length;\r\n                n = 0;\r\n\r\n                while(n < len-1) {\r\n                    context.bezierCurveTo(ap[n].x, ap[n++].y, ap[n].x, ap[n++].y, ap[n].x, ap[n++].y);\r\n                }\r\n            }\r\n            // no tension\r\n            else {\r\n                for(n = 1; n < length; n++) {\r\n                    point = points[n];\r\n                    context.lineTo(point.x, point.y);\r\n                }\r\n            }\r\n\r\n\t\t\tcontext.closePath();\r\n            context.fillStrokeShape(this);\r\n        },\r\n        _setAllPoints: function() {\r\n            var points = this.getPoints(),\r\n                length = points.length,\r\n                tension = this.getTension(),\r\n                util = Kinetic.Util,\r\n                firstControlPoints = util._getControlPoints(points[length - 1], points[0], points[1], tension),\r\n                lastControlPoints = util._getControlPoints(points[length - 2], points[length - 1], points[0], tension);\r\n\r\n            this.allPoints = Kinetic.Util._expandPoints(this.getPoints(), this.getTension());\r\n\r\n            // prepend control point\r\n            this.allPoints.unshift(firstControlPoints[1]);\r\n\r\n            // append cp, point, cp, cp, first point\r\n            this.allPoints.push(lastControlPoints[0]);\r\n            this.allPoints.push(points[length - 1]);\r\n            this.allPoints.push(lastControlPoints[1]);\r\n            this.allPoints.push(firstControlPoints[0]);\r\n            this.allPoints.push(points[0]);\r\n        }\r\n    };\r\n\r\n    Kinetic.Util.extend(Kinetic.Blob, Kinetic.Shape);\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Blob, 'tension', 1);\r\n    /**\r\n     * get tension\r\n     * @name getTension\r\n     * @method\r\n     * @memberof Kinetic.Blob.prototype\r\n     * @returns {Number}\r\n     */\r\n\r\n    /**\r\n     * set tension\r\n     * @name setTension\r\n     * @method\r\n     * @memberof Kinetic.Blob.prototype\r\n     * @param {Number} tension\r\n     */\r\n\r\n    Kinetic.Factory.addPointsGetterSetter(Kinetic.Blob, 'points');\r\n    /**\r\n     * get points array\r\n     * @name getPoints\r\n     * @method\r\n     * @memberof Kinetic.Blob.prototype\r\n     * @returns {Array}\r\n     */\r\n\r\n    /**\r\n     * set points array\r\n     * @name setPoints\r\n     * @method\r\n     * @memberof Kinetic.Blob.prototype\r\n     * @param {Array} can be an array of point objects or an array\r\n     *  of Numbers.  e.g. [{x:1,y:2},{x:3,y:4}] or [1,2,3,4]\r\n     */\r\n})();\r\n;(function() {\r\n    /**\r\n     * Sprite constructor\r\n     * @constructor\r\n     * @memberof Kinetic\r\n     * @augments Kinetic.Shape\r\n     * @param {Object} config\r\n     * @param {String} config.animation animation key\r\n     * @param {Object} config.animations animation map\r\n     * @param {Integer} [config.index] animation index\r\n     * @param {Image} config.image image object\r\n     * @param {String} [config.fill] fill color\r\n     * @param {Object} [config.fillRGB] set fill color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.fillR] set fill red component\r\n     * @param {Integer} [config.fillG] set fill green component\r\n     * @param {Integer} [config.fillB] set fill blue component\r\n     * @param {Image} [config.fillPatternImage] fill pattern image\r\n     * @param {Number} [config.fillPatternX]\r\n     * @param {Number} [config.fillPatternY]\r\n     * @param {Number|Array|Object} [config.fillPatternOffset] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillPatternOffsetX] \r\n     * @param {Number} [config.fillPatternOffsetY] \r\n     * @param {Number|Array|Object} [config.fillPatternScale] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillPatternScaleX]\r\n     * @param {Number} [config.fillPatternScaleY]\r\n     * @param {Number} [config.fillPatternRotation]\r\n     * @param {String} [config.fillPatternRepeat] can be 'repeat', 'repeat-x', 'repeat-y', or 'no-repeat'.  The default is 'no-repeat'\r\n     * @param {Number|Array|Object} [config.fillLinearGradientStartPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillLinearGradientStartPointX]\r\n     * @param {Number} [config.fillLinearGradientStartPointY]\r\n     * @param {Number|Array|Object} [config.fillLinearGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number|Array|Object} [config.fillLinearGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillLinearGradientEndPointX]\r\n     * @param {Number} [config.fillLinearGradientEndPointY]\r\n     * @param {Array} [config.fillLinearGradientColorStops] array of color stops\r\n     * @param {Number|Array|Object} [config.fillRadialGradientStartPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillRadialGradientStartPointX]\r\n     * @param {Number} [config.fillRadialGradientStartPointY]\r\n     * @param {Number|Array|Object} [config.fillRadialGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillRadialGradientEndPointX] \r\n     * @param {Number} [config.fillRadialGradientEndPointY] \r\n     * @param {Number} [config.fillRadialGradientStartRadius]\r\n     * @param {Number} [config.fillRadialGradientEndRadius]\r\n     * @param {Array} [config.fillRadialGradientColorStops] array of color stops\r\n     * @param {Boolean} [config.fillEnabled] flag which enables or disables the fill.  The default value is true\r\n     * @param {String} [config.fillPriority] can be color, linear-gradient, radial-graident, or pattern.  The default value is color.  The fillPriority property makes it really easy to toggle between different fill types.  For example, if you want to toggle between a fill color style and a fill pattern style, simply set the fill property and the fillPattern properties, and then use setFillPriority('color') to render the shape with a color fill, or use setFillPriority('pattern') to render the shape with the pattern fill configuration\r\n     * @param {String} [config.stroke] stroke color\r\n     * @param {Object} [config.strokeRGB] set stroke color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.strokeR] set stroke red component\r\n     * @param {Integer} [config.strokeG] set stroke green component\r\n     * @param {Integer} [config.strokeB] set stroke blue component\r\n     * @param {Number} [config.strokeWidth] stroke width\r\n     * @param {Boolean} [config.strokeScaleEnabled] flag which enables or disables stroke scale.  The default is true\r\n     * @param {Boolean} [config.strokeEnabled] flag which enables or disables the stroke.  The default value is true\r\n     * @param {String} [config.lineJoin] can be miter, round, or bevel.  The default\r\n     *  is miter\r\n     * @param {String} [config.lineCap] can be butt, round, or sqare.  The default\r\n     *  is butt\r\n     * @param {String} [config.shadowColor]\r\n     * @param {Object} [config.shadowColorRGB] set shadowColor color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.shadowColorR] set shadowColor red component\r\n     * @param {Integer} [config.shadowColorG] set shadowColor green component\r\n     * @param {Integer} [config.shadowColorB] set shadowColor blue component\r\n     * @param {Number} [config.shadowBlur]\r\n     * @param {Object} [config.shadowOffset]\r\n     * @param {Number} [config.shadowOffsetX]\r\n     * @param {Number} [config.shadowOffsetY]\r\n     * @param {Number} [config.shadowOpacity] shadow opacity.  Can be any real number\r\n     *  between 0 and 1\r\n     * @param {Boolean} [config.shadowEnabled] flag which enables or disables the shadow.  The default value is true\r\n     * @param {Array} [config.dashArray]\r\n     * @param {Boolean} [config.dashArrayEnabled] flag which enables or disables the dashArray.  The default value is true\r\n     * @param {Number} [config.x]\r\n     * @param {Number} [config.y]\r\n     * @param {Number} [config.width]\r\n     * @param {Number} [config.height]\r\n     * @param {Boolean} [config.visible]\r\n     * @param {Boolean} [config.listening] whether or not the node is listening for events\r\n     * @param {String} [config.id] unique id\r\n     * @param {String} [config.name] non-unique name\r\n     * @param {Number} [config.opacity] determines node opacity.  Can be any number between 0 and 1\r\n     * @param {Object} [config.scale] set scale\r\n     * @param {Number} [config.scaleX] set scale x\r\n     * @param {Number} [config.scaleY] set scale y\r\n     * @param {Number} [config.rotation] rotation in radians\r\n     * @param {Number} [config.rotationDeg] rotation in degrees\r\n     * @param {Object} [config.offset] offset from center point and rotation point\r\n     * @param {Number} [config.offsetX] set offset x\r\n     * @param {Number} [config.offsetY] set offset y\r\n     * @param {Boolean} [config.draggable] makes the node draggable.  When stages are draggable, you can drag and drop\r\n     *  the entire stage by dragging any portion of the stage\r\n     * @param {Function} [config.dragBoundFunc]\r\n     * @example\r\n     * var animations = {<br>\r\n     *   idle: [{<br>\r\n     *     x: 2,<br>\r\n     *     y: 2,<br>\r\n     *     width: 70,<br>\r\n     *     height: 119<br>\r\n     *   }, {<br>\r\n     *     x: 71,<br>\r\n     *     y: 2,<br>\r\n     *     width: 74,<br>\r\n     *     height: 119<br>\r\n     *   }, {<br>\r\n     *     x: 146,<br>\r\n     *     y: 2,<br>\r\n     *     width: 81,<br>\r\n     *     height: 119<br>\r\n     *   }, {<br>\r\n     *     x: 226,<br>\r\n     *     y: 2,<br>\r\n     *     width: 76,<br>\r\n     *     height: 119<br>\r\n     *   }],<br>\r\n     *   punch: [{<br>\r\n     *     x: 2,<br>\r\n     *     y: 138,<br>\r\n     *     width: 74,<br>\r\n     *     height: 122<br>\r\n     *   }, {<br>\r\n     *     x: 76,<br>\r\n     *     y: 138,<br>\r\n     *     width: 84,<br>\r\n     *     height: 122<br>\r\n     *   }, {<br>\r\n     *     x: 346,<br>\r\n     *     y: 138,<br>\r\n     *     width: 120,<br>\r\n     *     height: 122<br>\r\n     *   }]<br>\r\n     * };<br><br>\r\n     *\r\n     * var imageObj = new Image();<br>\r\n     * imageObj.onload = function() {<br>\r\n     *   var sprite = new Kinetic.Sprite({<br>\r\n     *     x: 200,<br>\r\n     *     y: 100,<br>\r\n     *     image: imageObj,<br>\r\n     *     animation: 'idle',<br>\r\n     *     animations: animations,<br>\r\n     *     frameRate: 7,<br>\r\n     *     index: 0<br>\r\n     *   });<br>\r\n     * };<br>\r\n     * imageObj.src = '/path/to/image.jpg'\r\n     */\r\n    Kinetic.Sprite = function(config) {\r\n        this.___init(config);\r\n    };\r\n\r\n    Kinetic.Sprite.prototype = {\r\n        ___init: function(config) {\r\n            // call super constructor\r\n            Kinetic.Shape.call(this, config);\r\n            this.className = 'Sprite';\r\n\r\n            this.anim = new Kinetic.Animation();\r\n            var that = this;\r\n            this.on('animationChange.kinetic', function() {\r\n                // reset index when animation changes\r\n                that.setIndex(0);\r\n            });\r\n        },\r\n        drawFunc: function(context) {\r\n            var anim = this.getAnimation(),\r\n                index = this.getIndex(),\r\n                f = this.getAnimations()[anim][index],\r\n                image = this.getImage();\r\n\r\n            if(image) {\r\n                context.drawImage(image, f.x, f.y, f.width, f.height, 0, 0, f.width, f.height);\r\n            }\r\n        },\r\n        drawHitFunc: function(context) {\r\n            var anim = this.getAnimation(),\r\n                index = this.getIndex(),\r\n                f = this.getAnimations()[anim][index];\r\n\r\n            context.beginPath();\r\n            context.rect(0, 0, f.width, f.height);\r\n            context.closePath();\r\n            context.fill(this);\r\n        },\r\n        /**\r\n         * start sprite animation\r\n         * @method\r\n         * @memberof Kinetic.Sprite.prototype\r\n         */\r\n        start: function() {\r\n            var that = this;\r\n            var layer = this.getLayer();\r\n\r\n            /*\r\n             * animation object has no executable function because\r\n             *  the updates are done with a fixed FPS with the setInterval\r\n             *  below.  The anim object only needs the layer reference for\r\n             *  redraw\r\n             */\r\n            this.anim.setLayers(layer);\r\n\r\n            this.interval = setInterval(function() {\r\n                var index = that.getIndex();\r\n                that._updateIndex();\r\n                if(that.afterFrameFunc && index === that.afterFrameIndex) {\r\n                    that.afterFrameFunc();\r\n                    delete that.afterFrameFunc;\r\n                    delete that.afterFrameIndex;\r\n                }\r\n            }, 1000 / this.getFrameRate());\r\n\r\n            this.anim.start();\r\n        },\r\n        /**\r\n         * stop sprite animation\r\n         * @method\r\n         * @memberof Kinetic.Sprite.prototype\r\n         */\r\n        stop: function() {\r\n            this.anim.stop();\r\n            clearInterval(this.interval);\r\n        },\r\n        /**\r\n         * set after frame event handler\r\n         * @method\r\n         * @memberof Kinetic.Sprite.prototype\r\n         * @param {Integer} index frame index\r\n         * @param {Function} func function to be executed after frame has been drawn\r\n         */\r\n        afterFrame: function(index, func) {\r\n            this.afterFrameIndex = index;\r\n            this.afterFrameFunc = func;\r\n        },\r\n        _updateIndex: function() {\r\n            var index = this.getIndex(),\r\n                animation = this.getAnimation(),\r\n                animations = this.getAnimations(),\r\n                anim = animations[animation],\r\n                len = anim.length;\r\n\r\n            if(index < len - 1) {\r\n                this.setIndex(index + 1);\r\n            }\r\n            else {\r\n                this.setIndex(0);\r\n            }\r\n        }\r\n    };\r\n    Kinetic.Util.extend(Kinetic.Sprite, Kinetic.Shape);\r\n\r\n    // add getters setters\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Sprite, 'animation');\r\n\r\n    /**\r\n     * set animation key\r\n     * @name setAnimation\r\n     * @method\r\n     * @memberof Kinetic.Sprite.prototype\r\n     * @param {String} anim animation key\r\n     */\r\n\r\n     /**\r\n     * get animation key\r\n     * @name getAnimation\r\n     * @method\r\n     * @memberof Kinetic.Sprite.prototype\r\n     * @returns {String}\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Sprite, 'animations');\r\n\r\n    /**\r\n     * set animations map\r\n     * @name setAnimations\r\n     * @method\r\n     * @memberof Kinetic.Sprite.prototype\r\n     * @param {Object} animations\r\n     */\r\n\r\n     /**\r\n     * get animations map\r\n     * @name getAnimations\r\n     * @method\r\n     * @memberof Kinetic.Sprite.prototype\r\n     * @returns {Object}\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Sprite, 'image');\r\n\r\n    /**\r\n     * set image\r\n     * @name setImage\r\n     * @method\r\n     * @memberof Kinetic.Sprite.prototype\r\n     * @param {Image} image\r\n     */\r\n\r\n     /**\r\n     * get image\r\n     * @name getImage\r\n     * @method\r\n     * @memberof Kinetic.Sprite.prototype\r\n     * @returns {ImageObject}\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Sprite, 'index', 0);\r\n\r\n    /**\r\n     * set animation frame index\r\n     * @name setIndex\r\n     * @method\r\n     * @memberof Kinetic.Sprite.prototype\r\n     * @param {Integer} index frame index\r\n     */\r\n\r\n     /**\r\n     * get animation frame index\r\n     * @name getIndex\r\n     * @method\r\n     * @memberof Kinetic.Sprite.prototype\r\n     * @returns {Integer}\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Sprite, 'frameRate', 17);\r\n\r\n    /**\r\n     * set frame rate in frames / second.  Default is 17 frames per second.  Increase this number to make the sprite\r\n     *  animation run faster, and decrease the number to make the sprite animation run slower\r\n     * @name setFrameRate\r\n     * @method\r\n     * @memberof Kinetic.Sprite.prototype\r\n     * @param {Integer} frameRate\r\n     */\r\n\r\n     /**\r\n     * get frame rate\r\n     * @name getFrameRate\r\n     * @method\r\n     * @memberof Kinetic.Sprite.prototype\r\n     * @returns {Number}\r\n     */\r\n\r\n})();\r\n;(function () {\r\n    /**\r\n     * Path constructor.\r\n     * @author Jason Follas\r\n     * @constructor\r\n     * @memberof Kinetic\r\n     * @augments Kinetic.Shape\r\n     * @param {Object} config\r\n     * @param {String} config.data SVG data string\r\n     * @param {String} [config.fill] fill color\r\n     * @param {Object} [config.fillRGB] set fill color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.fillR] set fill red component\r\n     * @param {Integer} [config.fillG] set fill green component\r\n     * @param {Integer} [config.fillB] set fill blue component\r\n     * @param {Image} [config.fillPatternImage] fill pattern image\r\n     * @param {Number} [config.fillPatternX]\r\n     * @param {Number} [config.fillPatternY]\r\n     * @param {Number|Array|Object} [config.fillPatternOffset] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillPatternOffsetX] \r\n     * @param {Number} [config.fillPatternOffsetY] \r\n     * @param {Number|Array|Object} [config.fillPatternScale] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillPatternScaleX]\r\n     * @param {Number} [config.fillPatternScaleY]\r\n     * @param {Number} [config.fillPatternRotation]\r\n     * @param {String} [config.fillPatternRepeat] can be 'repeat', 'repeat-x', 'repeat-y', or 'no-repeat'.  The default is 'no-repeat'\r\n     * @param {Number|Array|Object} [config.fillLinearGradientStartPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillLinearGradientStartPointX]\r\n     * @param {Number} [config.fillLinearGradientStartPointY]\r\n     * @param {Number|Array|Object} [config.fillLinearGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number|Array|Object} [config.fillLinearGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillLinearGradientEndPointX]\r\n     * @param {Number} [config.fillLinearGradientEndPointY]\r\n     * @param {Array} [config.fillLinearGradientColorStops] array of color stops\r\n     * @param {Number|Array|Object} [config.fillRadialGradientStartPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillRadialGradientStartPointX]\r\n     * @param {Number} [config.fillRadialGradientStartPointY]\r\n     * @param {Number|Array|Object} [config.fillRadialGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillRadialGradientEndPointX] \r\n     * @param {Number} [config.fillRadialGradientEndPointY] \r\n     * @param {Number} [config.fillRadialGradientStartRadius]\r\n     * @param {Number} [config.fillRadialGradientEndRadius]\r\n     * @param {Array} [config.fillRadialGradientColorStops] array of color stops\r\n     * @param {Boolean} [config.fillEnabled] flag which enables or disables the fill.  The default value is true\r\n     * @param {String} [config.fillPriority] can be color, linear-gradient, radial-graident, or pattern.  The default value is color.  The fillPriority property makes it really easy to toggle between different fill types.  For example, if you want to toggle between a fill color style and a fill pattern style, simply set the fill property and the fillPattern properties, and then use setFillPriority('color') to render the shape with a color fill, or use setFillPriority('pattern') to render the shape with the pattern fill configuration\r\n     * @param {String} [config.stroke] stroke color\r\n     * @param {Object} [config.strokeRGB] set stroke color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.strokeR] set stroke red component\r\n     * @param {Integer} [config.strokeG] set stroke green component\r\n     * @param {Integer} [config.strokeB] set stroke blue component\r\n     * @param {Number} [config.strokeWidth] stroke width\r\n     * @param {Boolean} [config.strokeScaleEnabled] flag which enables or disables stroke scale.  The default is true\r\n     * @param {Boolean} [config.strokeEnabled] flag which enables or disables the stroke.  The default value is true\r\n     * @param {String} [config.lineJoin] can be miter, round, or bevel.  The default\r\n     *  is miter\r\n     * @param {String} [config.lineCap] can be butt, round, or sqare.  The default\r\n     *  is butt\r\n     * @param {String} [config.shadowColor]\r\n     * @param {Object} [config.shadowColorRGB] set shadowColor color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.shadowColorR] set shadowColor red component\r\n     * @param {Integer} [config.shadowColorG] set shadowColor green component\r\n     * @param {Integer} [config.shadowColorB] set shadowColor blue component\r\n     * @param {Number} [config.shadowBlur]\r\n     * @param {Object} [config.shadowOffset]\r\n     * @param {Number} [config.shadowOffsetX]\r\n     * @param {Number} [config.shadowOffsetY]\r\n     * @param {Number} [config.shadowOpacity] shadow opacity.  Can be any real number\r\n     *  between 0 and 1\r\n     * @param {Boolean} [config.shadowEnabled] flag which enables or disables the shadow.  The default value is true\r\n     * @param {Array} [config.dashArray]\r\n     * @param {Boolean} [config.dashArrayEnabled] flag which enables or disables the dashArray.  The default value is true\r\n     * @param {Number} [config.x]\r\n     * @param {Number} [config.y]\r\n     * @param {Number} [config.width]\r\n     * @param {Number} [config.height]\r\n     * @param {Boolean} [config.visible]\r\n     * @param {Boolean} [config.listening] whether or not the node is listening for events\r\n     * @param {String} [config.id] unique id\r\n     * @param {String} [config.name] non-unique name\r\n     * @param {Number} [config.opacity] determines node opacity.  Can be any number between 0 and 1\r\n     * @param {Object} [config.scale] set scale\r\n     * @param {Number} [config.scaleX] set scale x\r\n     * @param {Number} [config.scaleY] set scale y\r\n     * @param {Number} [config.rotation] rotation in radians\r\n     * @param {Number} [config.rotationDeg] rotation in degrees\r\n     * @param {Object} [config.offset] offset from center point and rotation point\r\n     * @param {Number} [config.offsetX] set offset x\r\n     * @param {Number} [config.offsetY] set offset y\r\n     * @param {Boolean} [config.draggable] makes the node draggable.  When stages are draggable, you can drag and drop\r\n     *  the entire stage by dragging any portion of the stage\r\n     * @param {Function} [config.dragBoundFunc]\r\n     * @example\r\n     * var path = new Kinetic.Path({<br>\r\n     *   x: 240,<br>\r\n     *   y: 40,<br>\r\n     *   data: 'M12.582,9.551C3.251,16.237,0.921,29.021,7.08,38.564l-2.36,1.689l4.893,2.262l4.893,2.262l-0.568-5.36l-0.567-5.359l-2.365,1.694c-4.657-7.375-2.83-17.185,4.352-22.33c7.451-5.338,17.817-3.625,23.156,3.824c5.337,7.449,3.625,17.813-3.821,23.152l2.857,3.988c9.617-6.893,11.827-20.277,4.935-29.896C35.591,4.87,22.204,2.658,12.582,9.551z',<br>\r\n     *   fill: 'green',<br>\r\n     *   scale: 2<br>\r\n     * });\r\n     */\r\n    Kinetic.Path = function (config) {\r\n        this.___init(config);\r\n    };\r\n\r\n    Kinetic.Path.prototype = {\r\n        ___init: function (config) {\r\n            this.dataArray = [];\r\n            var that = this;\r\n\r\n            // call super constructor\r\n            Kinetic.Shape.call(this, config);\r\n            this.className = 'Path';\r\n\r\n            this.dataArray = Kinetic.Path.parsePathData(this.getData());\r\n            this.on('dataChange.kinetic', function () {\r\n                that.dataArray = Kinetic.Path.parsePathData(this.getData());\r\n            });\r\n        },\r\n        drawFunc: function (context) {\r\n            var ca = this.dataArray,\r\n                closedPath = false;\r\n\r\n            // context position\r\n            context.beginPath();\r\n            for (var n = 0; n < ca.length; n++) {\r\n                var c = ca[n].command;\r\n                var p = ca[n].points;\r\n                switch (c) {\r\n                    case 'L':\r\n                        context.lineTo(p[0], p[1]);\r\n                        break;\r\n                    case 'M':\r\n                        context.moveTo(p[0], p[1]);\r\n                        break;\r\n                    case 'C':\r\n                        context.bezierCurveTo(p[0], p[1], p[2], p[3], p[4], p[5]);\r\n                        break;\r\n                    case 'Q':\r\n                        context.quadraticCurveTo(p[0], p[1], p[2], p[3]);\r\n                        break;\r\n                    case 'A':\r\n                        var cx = p[0], cy = p[1], rx = p[2], ry = p[3], theta = p[4], dTheta = p[5], psi = p[6], fs = p[7];\r\n\r\n                        var r = (rx > ry) ? rx : ry;\r\n                        var scaleX = (rx > ry) ? 1 : rx / ry;\r\n                        var scaleY = (rx > ry) ? ry / rx : 1;\r\n\r\n                        context.translate(cx, cy);\r\n                        context.rotate(psi);\r\n                        context.scale(scaleX, scaleY);\r\n                        context.arc(0, 0, r, theta, theta + dTheta, 1 - fs);\r\n                        context.scale(1 / scaleX, 1 / scaleY);\r\n                        context.rotate(-psi);\r\n                        context.translate(-cx, -cy);\r\n\r\n                        break;\r\n                    case 'z':\r\n                        context.closePath();\r\n                        closedPath = true;\r\n                        break;\r\n                }\r\n            }\r\n\r\n            if (closedPath) {\r\n                context.fillStrokeShape(this);\r\n            }\r\n            else {\r\n                context.strokeShape(this);\r\n            }\r\n        }\r\n    };\r\n    Kinetic.Util.extend(Kinetic.Path, Kinetic.Shape);\r\n\r\n    Kinetic.Path.getLineLength = function(x1, y1, x2, y2) {\r\n        return Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\r\n    };\r\n    Kinetic.Path.getPointOnLine = function(dist, P1x, P1y, P2x, P2y, fromX, fromY) {\r\n        if(fromX === undefined) {\r\n            fromX = P1x;\r\n        }\r\n        if(fromY === undefined) {\r\n            fromY = P1y;\r\n        }\r\n\r\n        var m = (P2y - P1y) / ((P2x - P1x) + 0.00000001);\r\n        var run = Math.sqrt(dist * dist / (1 + m * m));\r\n        if(P2x < P1x)\r\n            run *= -1;\r\n        var rise = m * run;\r\n        var pt;\r\n\r\n        if (P2x === P1x) { // vertical line\r\n            pt = {\r\n                x: fromX,\r\n                y: fromY + rise\r\n            };\r\n        } else if((fromY - P1y) / ((fromX - P1x) + 0.00000001) === m) {\r\n            pt = {\r\n                x: fromX + run,\r\n                y: fromY + rise\r\n            };\r\n        }\r\n        else {\r\n            var ix, iy;\r\n\r\n            var len = this.getLineLength(P1x, P1y, P2x, P2y);\r\n            if(len < 0.00000001) {\r\n                return undefined;\r\n            }\r\n            var u = (((fromX - P1x) * (P2x - P1x)) + ((fromY - P1y) * (P2y - P1y)));\r\n            u = u / (len * len);\r\n            ix = P1x + u * (P2x - P1x);\r\n            iy = P1y + u * (P2y - P1y);\r\n\r\n            var pRise = this.getLineLength(fromX, fromY, ix, iy);\r\n            var pRun = Math.sqrt(dist * dist - pRise * pRise);\r\n            run = Math.sqrt(pRun * pRun / (1 + m * m));\r\n            if(P2x < P1x)\r\n                run *= -1;\r\n            rise = m * run;\r\n            pt = {\r\n                x: ix + run,\r\n                y: iy + rise\r\n            };\r\n        }\r\n\r\n        return pt;\r\n    };\r\n\r\n    Kinetic.Path.getPointOnCubicBezier = function(pct, P1x, P1y, P2x, P2y, P3x, P3y, P4x, P4y) {\r\n        function CB1(t) {\r\n            return t * t * t;\r\n        }\r\n        function CB2(t) {\r\n            return 3 * t * t * (1 - t);\r\n        }\r\n        function CB3(t) {\r\n            return 3 * t * (1 - t) * (1 - t);\r\n        }\r\n        function CB4(t) {\r\n            return (1 - t) * (1 - t) * (1 - t);\r\n        }\r\n        var x = P4x * CB1(pct) + P3x * CB2(pct) + P2x * CB3(pct) + P1x * CB4(pct);\r\n        var y = P4y * CB1(pct) + P3y * CB2(pct) + P2y * CB3(pct) + P1y * CB4(pct);\r\n\r\n        return {\r\n            x: x,\r\n            y: y\r\n        };\r\n    };\r\n    Kinetic.Path.getPointOnQuadraticBezier = function(pct, P1x, P1y, P2x, P2y, P3x, P3y) {\r\n        function QB1(t) {\r\n            return t * t;\r\n        }\r\n        function QB2(t) {\r\n            return 2 * t * (1 - t);\r\n        }\r\n        function QB3(t) {\r\n            return (1 - t) * (1 - t);\r\n        }\r\n        var x = P3x * QB1(pct) + P2x * QB2(pct) + P1x * QB3(pct);\r\n        var y = P3y * QB1(pct) + P2y * QB2(pct) + P1y * QB3(pct);\r\n\r\n        return {\r\n            x: x,\r\n            y: y\r\n        };\r\n    };\r\n    Kinetic.Path.getPointOnEllipticalArc = function(cx, cy, rx, ry, theta, psi) {\r\n        var cosPsi = Math.cos(psi), sinPsi = Math.sin(psi);\r\n        var pt = {\r\n            x: rx * Math.cos(theta),\r\n            y: ry * Math.sin(theta)\r\n        };\r\n        return {\r\n            x: cx + (pt.x * cosPsi - pt.y * sinPsi),\r\n            y: cy + (pt.x * sinPsi + pt.y * cosPsi)\r\n        };\r\n    };\r\n    /*\r\n     * get parsed data array from the data\r\n     *  string.  V, v, H, h, and l data are converted to\r\n     *  L data for the purpose of high performance Path\r\n     *  rendering\r\n     */\r\n    Kinetic.Path.parsePathData = function(data) {\r\n        // Path Data Segment must begin with a moveTo\r\n        //m (x y)+  Relative moveTo (subsequent points are treated as lineTo)\r\n        //M (x y)+  Absolute moveTo (subsequent points are treated as lineTo)\r\n        //l (x y)+  Relative lineTo\r\n        //L (x y)+  Absolute LineTo\r\n        //h (x)+    Relative horizontal lineTo\r\n        //H (x)+    Absolute horizontal lineTo\r\n        //v (y)+    Relative vertical lineTo\r\n        //V (y)+    Absolute vertical lineTo\r\n        //z (closepath)\r\n        //Z (closepath)\r\n        //c (x1 y1 x2 y2 x y)+ Relative Bezier curve\r\n        //C (x1 y1 x2 y2 x y)+ Absolute Bezier curve\r\n        //q (x1 y1 x y)+       Relative Quadratic Bezier\r\n        //Q (x1 y1 x y)+       Absolute Quadratic Bezier\r\n        //t (x y)+    Shorthand/Smooth Relative Quadratic Bezier\r\n        //T (x y)+    Shorthand/Smooth Absolute Quadratic Bezier\r\n        //s (x2 y2 x y)+       Shorthand/Smooth Relative Bezier curve\r\n        //S (x2 y2 x y)+       Shorthand/Smooth Absolute Bezier curve\r\n        //a (rx ry x-axis-rotation large-arc-flag sweep-flag x y)+     Relative Elliptical Arc\r\n        //A (rx ry x-axis-rotation large-arc-flag sweep-flag x y)+  Absolute Elliptical Arc\r\n\r\n        // return early if data is not defined\r\n        if(!data) {\r\n            return [];\r\n        }\r\n\r\n        // command string\r\n        var cs = data;\r\n\r\n        // command chars\r\n        var cc = ['m', 'M', 'l', 'L', 'v', 'V', 'h', 'H', 'z', 'Z', 'c', 'C', 'q', 'Q', 't', 'T', 's', 'S', 'a', 'A'];\r\n        // convert white spaces to commas\r\n        cs = cs.replace(new RegExp(' ', 'g'), ',');\r\n        // create pipes so that we can split the data\r\n        for(var n = 0; n < cc.length; n++) {\r\n            cs = cs.replace(new RegExp(cc[n], 'g'), '|' + cc[n]);\r\n        }\r\n        // create array\r\n        var arr = cs.split('|');\r\n        var ca = [];\r\n        // init context point\r\n        var cpx = 0;\r\n        var cpy = 0;\r\n        for( n = 1; n < arr.length; n++) {\r\n            var str = arr[n];\r\n            var c = str.charAt(0);\r\n            str = str.slice(1);\r\n            // remove ,- for consistency\r\n            str = str.replace(new RegExp(',-', 'g'), '-');\r\n            // add commas so that it's easy to split\r\n            str = str.replace(new RegExp('-', 'g'), ',-');\r\n            str = str.replace(new RegExp('e,-', 'g'), 'e-');\r\n            var p = str.split(',');\r\n            if(p.length > 0 && p[0] === '') {\r\n                p.shift();\r\n            }\r\n            // convert strings to floats\r\n            for(var i = 0; i < p.length; i++) {\r\n                p[i] = parseFloat(p[i]);\r\n            }\r\n            while(p.length > 0) {\r\n                if(isNaN(p[0]))// case for a trailing comma before next command\r\n                    break;\r\n\r\n                var cmd = null;\r\n                var points = [];\r\n                var startX = cpx, startY = cpy;\r\n                // Move var from within the switch to up here (jshint)\r\n                var prevCmd, ctlPtx, ctlPty;     // Ss, Tt\r\n                var rx, ry, psi, fa, fs, x1, y1; // Aa\r\n\r\n\r\n                // convert l, H, h, V, and v to L\r\n                switch (c) {\r\n\r\n                    // Note: Keep the lineTo's above the moveTo's in this switch\r\n                    case 'l':\r\n                        cpx += p.shift();\r\n                        cpy += p.shift();\r\n                        cmd = 'L';\r\n                        points.push(cpx, cpy);\r\n                        break;\r\n                    case 'L':\r\n                        cpx = p.shift();\r\n                        cpy = p.shift();\r\n                        points.push(cpx, cpy);\r\n                        break;\r\n\r\n                    // Note: lineTo handlers need to be above this point\r\n                    case 'm':\r\n                        cpx += p.shift();\r\n                        cpy += p.shift();\r\n                        cmd = 'M';\r\n                        points.push(cpx, cpy);\r\n                        c = 'l';\r\n                        // subsequent points are treated as relative lineTo\r\n                        break;\r\n                    case 'M':\r\n                        cpx = p.shift();\r\n                        cpy = p.shift();\r\n                        cmd = 'M';\r\n                        points.push(cpx, cpy);\r\n                        c = 'L';\r\n                        // subsequent points are treated as absolute lineTo\r\n                        break;\r\n\r\n                    case 'h':\r\n                        cpx += p.shift();\r\n                        cmd = 'L';\r\n                        points.push(cpx, cpy);\r\n                        break;\r\n                    case 'H':\r\n                        cpx = p.shift();\r\n                        cmd = 'L';\r\n                        points.push(cpx, cpy);\r\n                        break;\r\n                    case 'v':\r\n                        cpy += p.shift();\r\n                        cmd = 'L';\r\n                        points.push(cpx, cpy);\r\n                        break;\r\n                    case 'V':\r\n                        cpy = p.shift();\r\n                        cmd = 'L';\r\n                        points.push(cpx, cpy);\r\n                        break;\r\n                    case 'C':\r\n                        points.push(p.shift(), p.shift(), p.shift(), p.shift());\r\n                        cpx = p.shift();\r\n                        cpy = p.shift();\r\n                        points.push(cpx, cpy);\r\n                        break;\r\n                    case 'c':\r\n                        points.push(cpx + p.shift(), cpy + p.shift(), cpx + p.shift(), cpy + p.shift());\r\n                        cpx += p.shift();\r\n                        cpy += p.shift();\r\n                        cmd = 'C';\r\n                        points.push(cpx, cpy);\r\n                        break;\r\n                    case 'S':\r\n                        ctlPtx = cpx, ctlPty = cpy;\r\n                        prevCmd = ca[ca.length - 1];\r\n                        if(prevCmd.command === 'C') {\r\n                            ctlPtx = cpx + (cpx - prevCmd.points[2]);\r\n                            ctlPty = cpy + (cpy - prevCmd.points[3]);\r\n                        }\r\n                        points.push(ctlPtx, ctlPty, p.shift(), p.shift());\r\n                        cpx = p.shift();\r\n                        cpy = p.shift();\r\n                        cmd = 'C';\r\n                        points.push(cpx, cpy);\r\n                        break;\r\n                    case 's':\r\n                        ctlPtx = cpx, ctlPty = cpy;\r\n                        prevCmd = ca[ca.length - 1];\r\n                        if(prevCmd.command === 'C') {\r\n                            ctlPtx = cpx + (cpx - prevCmd.points[2]);\r\n                            ctlPty = cpy + (cpy - prevCmd.points[3]);\r\n                        }\r\n                        points.push(ctlPtx, ctlPty, cpx + p.shift(), cpy + p.shift());\r\n                        cpx += p.shift();\r\n                        cpy += p.shift();\r\n                        cmd = 'C';\r\n                        points.push(cpx, cpy);\r\n                        break;\r\n                    case 'Q':\r\n                        points.push(p.shift(), p.shift());\r\n                        cpx = p.shift();\r\n                        cpy = p.shift();\r\n                        points.push(cpx, cpy);\r\n                        break;\r\n                    case 'q':\r\n                        points.push(cpx + p.shift(), cpy + p.shift());\r\n                        cpx += p.shift();\r\n                        cpy += p.shift();\r\n                        cmd = 'Q';\r\n                        points.push(cpx, cpy);\r\n                        break;\r\n                    case 'T':\r\n                        ctlPtx = cpx, ctlPty = cpy;\r\n                        prevCmd = ca[ca.length - 1];\r\n                        if(prevCmd.command === 'Q') {\r\n                            ctlPtx = cpx + (cpx - prevCmd.points[0]);\r\n                            ctlPty = cpy + (cpy - prevCmd.points[1]);\r\n                        }\r\n                        cpx = p.shift();\r\n                        cpy = p.shift();\r\n                        cmd = 'Q';\r\n                        points.push(ctlPtx, ctlPty, cpx, cpy);\r\n                        break;\r\n                    case 't':\r\n                        ctlPtx = cpx, ctlPty = cpy;\r\n                        prevCmd = ca[ca.length - 1];\r\n                        if(prevCmd.command === 'Q') {\r\n                            ctlPtx = cpx + (cpx - prevCmd.points[0]);\r\n                            ctlPty = cpy + (cpy - prevCmd.points[1]);\r\n                        }\r\n                        cpx += p.shift();\r\n                        cpy += p.shift();\r\n                        cmd = 'Q';\r\n                        points.push(ctlPtx, ctlPty, cpx, cpy);\r\n                        break;\r\n                    case 'A':\r\n                        rx = p.shift(), ry = p.shift(), psi = p.shift(), fa = p.shift(), fs = p.shift();\r\n                        x1 = cpx, y1 = cpy; cpx = p.shift(), cpy = p.shift();\r\n                        cmd = 'A';\r\n                        points = this.convertEndpointToCenterParameterization(x1, y1, cpx, cpy, fa, fs, rx, ry, psi);\r\n                        break;\r\n                    case 'a':\r\n                        rx = p.shift(), ry = p.shift(), psi = p.shift(), fa = p.shift(), fs = p.shift();\r\n                        x1 = cpx, y1 = cpy; cpx += p.shift(), cpy += p.shift();\r\n                        cmd = 'A';\r\n                        points = this.convertEndpointToCenterParameterization(x1, y1, cpx, cpy, fa, fs, rx, ry, psi);\r\n                        break;\r\n                }\r\n\r\n                ca.push({\r\n                    command: cmd || c,\r\n                    points: points,\r\n                    start: {\r\n                        x: startX,\r\n                        y: startY\r\n                    },\r\n                    pathLength: this.calcLength(startX, startY, cmd || c, points)\r\n                });\r\n            }\r\n\r\n            if(c === 'z' || c === 'Z') {\r\n                ca.push({\r\n                    command: 'z',\r\n                    points: [],\r\n                    start: undefined,\r\n                    pathLength: 0\r\n                });\r\n            }\r\n        }\r\n\r\n        return ca;\r\n    };\r\n    Kinetic.Path.calcLength = function(x, y, cmd, points) {\r\n        var len, p1, p2;\r\n        var path = Kinetic.Path;\r\n\r\n        switch (cmd) {\r\n            case 'L':\r\n                return path.getLineLength(x, y, points[0], points[1]);\r\n            case 'C':\r\n                // Approximates by breaking curve into 100 line segments\r\n                len = 0.0;\r\n                p1 = path.getPointOnCubicBezier(0, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\r\n                for( t = 0.01; t <= 1; t += 0.01) {\r\n                    p2 = path.getPointOnCubicBezier(t, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\r\n                    len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\r\n                    p1 = p2;\r\n                }\r\n                return len;\r\n            case 'Q':\r\n                // Approximates by breaking curve into 100 line segments\r\n                len = 0.0;\r\n                p1 = path.getPointOnQuadraticBezier(0, x, y, points[0], points[1], points[2], points[3]);\r\n                for( t = 0.01; t <= 1; t += 0.01) {\r\n                    p2 = path.getPointOnQuadraticBezier(t, x, y, points[0], points[1], points[2], points[3]);\r\n                    len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\r\n                    p1 = p2;\r\n                }\r\n                return len;\r\n            case 'A':\r\n                // Approximates by breaking curve into line segments\r\n                len = 0.0;\r\n                var start = points[4];\r\n                // 4 = theta\r\n                var dTheta = points[5];\r\n                // 5 = dTheta\r\n                var end = points[4] + dTheta;\r\n                var inc = Math.PI / 180.0;\r\n                // 1 degree resolution\r\n                if(Math.abs(start - end) < inc) {\r\n                    inc = Math.abs(start - end);\r\n                }\r\n                // Note: for purpose of calculating arc length, not going to worry about rotating X-axis by angle psi\r\n                p1 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], start, 0);\r\n                if(dTheta < 0) {// clockwise\r\n                    for( t = start - inc; t > end; t -= inc) {\r\n                        p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\r\n                        len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\r\n                        p1 = p2;\r\n                    }\r\n                }\r\n                else {// counter-clockwise\r\n                    for( t = start + inc; t < end; t += inc) {\r\n                        p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\r\n                        len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\r\n                        p1 = p2;\r\n                    }\r\n                }\r\n                p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], end, 0);\r\n                len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\r\n\r\n                return len;\r\n        }\r\n\r\n        return 0;\r\n    };\r\n    Kinetic.Path.convertEndpointToCenterParameterization = function(x1, y1, x2, y2, fa, fs, rx, ry, psiDeg) {\r\n        // Derived from: http://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\r\n        var psi = psiDeg * (Math.PI / 180.0);\r\n        var xp = Math.cos(psi) * (x1 - x2) / 2.0 + Math.sin(psi) * (y1 - y2) / 2.0;\r\n        var yp = -1 * Math.sin(psi) * (x1 - x2) / 2.0 + Math.cos(psi) * (y1 - y2) / 2.0;\r\n\r\n        var lambda = (xp * xp) / (rx * rx) + (yp * yp) / (ry * ry);\r\n\r\n        if(lambda > 1) {\r\n            rx *= Math.sqrt(lambda);\r\n            ry *= Math.sqrt(lambda);\r\n        }\r\n\r\n        var f = Math.sqrt((((rx * rx) * (ry * ry)) - ((rx * rx) * (yp * yp)) - ((ry * ry) * (xp * xp))) / ((rx * rx) * (yp * yp) + (ry * ry) * (xp * xp)));\r\n\r\n        if(fa == fs) {\r\n            f *= -1;\r\n        }\r\n        if(isNaN(f)) {\r\n            f = 0;\r\n        }\r\n\r\n        var cxp = f * rx * yp / ry;\r\n        var cyp = f * -ry * xp / rx;\r\n\r\n        var cx = (x1 + x2) / 2.0 + Math.cos(psi) * cxp - Math.sin(psi) * cyp;\r\n        var cy = (y1 + y2) / 2.0 + Math.sin(psi) * cxp + Math.cos(psi) * cyp;\r\n\r\n        var vMag = function(v) {\r\n            return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\r\n        };\r\n        var vRatio = function(u, v) {\r\n            return (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v));\r\n        };\r\n        var vAngle = function(u, v) {\r\n            return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vRatio(u, v));\r\n        };\r\n        var theta = vAngle([1, 0], [(xp - cxp) / rx, (yp - cyp) / ry]);\r\n        var u = [(xp - cxp) / rx, (yp - cyp) / ry];\r\n        var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\r\n        var dTheta = vAngle(u, v);\r\n\r\n        if(vRatio(u, v) <= -1) {\r\n            dTheta = Math.PI;\r\n        }\r\n        if(vRatio(u, v) >= 1) {\r\n            dTheta = 0;\r\n        }\r\n        if(fs === 0 && dTheta > 0) {\r\n            dTheta = dTheta - 2 * Math.PI;\r\n        }\r\n        if(fs == 1 && dTheta < 0) {\r\n            dTheta = dTheta + 2 * Math.PI;\r\n        }\r\n        return [cx, cy, rx, ry, theta, dTheta, psi, fs];\r\n    };\r\n    // add getters setters\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Path, 'data');\r\n\r\n    /**\r\n     * set SVG path data string.  This method\r\n     *  also automatically parses the data string\r\n     *  into a data array.  Currently supported SVG data:\r\n     *  M, m, L, l, H, h, V, v, Q, q, T, t, C, c, S, s, A, a, Z, z\r\n     * @name setData\r\n     * @method\r\n     * @memberof Kinetic.Path.prototype\r\n     * @param {String} SVG path command string\r\n     */\r\n\r\n    /**\r\n     * get SVG path data string\r\n     * @name getData\r\n     * @method\r\n     * @memberof Kinetic.Path.prototype\r\n     */\r\n})();\r\n;(function() {\r\n    var EMPTY_STRING = '',\r\n        CALIBRI = 'Calibri',\r\n        NORMAL = 'normal';\r\n\r\n    /**\r\n     * Path constructor.\r\n     * @author Jason Follas\r\n     * @constructor\r\n     * @memberof Kinetic\r\n     * @augments Kinetic.Shape\r\n     * @param {Object} config\r\n     * @param {String} [config.fontFamily] default is Calibri\r\n     * @param {Number} [config.fontSize] default is 12\r\n     * @param {String} [config.fontStyle] can be normal, bold, or italic.  Default is normal\r\n     * @param {String} config.text\r\n     * @param {String} config.data SVG data string\r\n     * @param {String} [config.fill] fill color\r\n     * @param {Object} [config.fillRGB] set fill color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.fillR] set fill red component\r\n     * @param {Integer} [config.fillG] set fill green component\r\n     * @param {Integer} [config.fillB] set fill blue component\r\n     * @param {Image} [config.fillPatternImage] fill pattern image\r\n     * @param {Number} [config.fillPatternX]\r\n     * @param {Number} [config.fillPatternY]\r\n     * @param {Number|Array|Object} [config.fillPatternOffset] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillPatternOffsetX] \r\n     * @param {Number} [config.fillPatternOffsetY] \r\n     * @param {Number|Array|Object} [config.fillPatternScale] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillPatternScaleX]\r\n     * @param {Number} [config.fillPatternScaleY]\r\n     * @param {Number} [config.fillPatternRotation]\r\n     * @param {String} [config.fillPatternRepeat] can be 'repeat', 'repeat-x', 'repeat-y', or 'no-repeat'.  The default is 'no-repeat'\r\n     * @param {Number|Array|Object} [config.fillLinearGradientStartPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillLinearGradientStartPointX]\r\n     * @param {Number} [config.fillLinearGradientStartPointY]\r\n     * @param {Number|Array|Object} [config.fillLinearGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number|Array|Object} [config.fillLinearGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillLinearGradientEndPointX]\r\n     * @param {Number} [config.fillLinearGradientEndPointY]\r\n     * @param {Array} [config.fillLinearGradientColorStops] array of color stops\r\n     * @param {Number|Array|Object} [config.fillRadialGradientStartPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillRadialGradientStartPointX]\r\n     * @param {Number} [config.fillRadialGradientStartPointY]\r\n     * @param {Number|Array|Object} [config.fillRadialGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillRadialGradientEndPointX] \r\n     * @param {Number} [config.fillRadialGradientEndPointY] \r\n     * @param {Number} [config.fillRadialGradientStartRadius]\r\n     * @param {Number} [config.fillRadialGradientEndRadius]\r\n     * @param {Array} [config.fillRadialGradientColorStops] array of color stops\r\n     * @param {Boolean} [config.fillEnabled] flag which enables or disables the fill.  The default value is true\r\n     * @param {String} [config.fillPriority] can be color, linear-gradient, radial-graident, or pattern.  The default value is color.  The fillPriority property makes it really easy to toggle between different fill types.  For example, if you want to toggle between a fill color style and a fill pattern style, simply set the fill property and the fillPattern properties, and then use setFillPriority('color') to render the shape with a color fill, or use setFillPriority('pattern') to render the shape with the pattern fill configuration\r\n     * @param {String} [config.stroke] stroke color\r\n     * @param {Object} [config.strokeRGB] set stroke color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.strokeR] set stroke red component\r\n     * @param {Integer} [config.strokeG] set stroke green component\r\n     * @param {Integer} [config.strokeB] set stroke blue component\r\n     * @param {Number} [config.strokeWidth] stroke width\r\n     * @param {Boolean} [config.strokeScaleEnabled] flag which enables or disables stroke scale.  The default is true\r\n     * @param {Boolean} [config.strokeEnabled] flag which enables or disables the stroke.  The default value is true\r\n     * @param {String} [config.lineJoin] can be miter, round, or bevel.  The default\r\n     *  is miter\r\n     * @param {String} [config.lineCap] can be butt, round, or sqare.  The default\r\n     *  is butt\r\n     * @param {String} [config.shadowColor]\r\n     * @param {Object} [config.shadowColorRGB] set shadowColor color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.shadowColorR] set shadowColor red component\r\n     * @param {Integer} [config.shadowColorG] set shadowColor green component\r\n     * @param {Integer} [config.shadowColorB] set shadowColor blue component\r\n     * @param {Number} [config.shadowBlur]\r\n     * @param {Object} [config.shadowOffset]\r\n     * @param {Number} [config.shadowOffsetX]\r\n     * @param {Number} [config.shadowOffsetY]\r\n     * @param {Number} [config.shadowOpacity] shadow opacity.  Can be any real number\r\n     *  between 0 and 1\r\n     * @param {Boolean} [config.shadowEnabled] flag which enables or disables the shadow.  The default value is true\r\n     * @param {Array} [config.dashArray]\r\n     * @param {Boolean} [config.dashArrayEnabled] flag which enables or disables the dashArray.  The default value is true\r\n     * @param {Number} [config.x]\r\n     * @param {Number} [config.y]\r\n     * @param {Number} [config.width]\r\n     * @param {Number} [config.height]\r\n     * @param {Boolean} [config.visible]\r\n     * @param {Boolean} [config.listening] whether or not the node is listening for events\r\n     * @param {String} [config.id] unique id\r\n     * @param {String} [config.name] non-unique name\r\n     * @param {Number} [config.opacity] determines node opacity.  Can be any number between 0 and 1\r\n     * @param {Object} [config.scale] set scale\r\n     * @param {Number} [config.scaleX] set scale x\r\n     * @param {Number} [config.scaleY] set scale y\r\n     * @param {Number} [config.rotation] rotation in radians\r\n     * @param {Number} [config.rotationDeg] rotation in degrees\r\n     * @param {Object} [config.offset] offset from center point and rotation point\r\n     * @param {Number} [config.offsetX] set offset x\r\n     * @param {Number} [config.offsetY] set offset y\r\n     * @param {Boolean} [config.draggable] makes the node draggable.  When stages are draggable, you can drag and drop\r\n     *  the entire stage by dragging any portion of the stage\r\n     * @param {Function} [config.dragBoundFunc]\r\n     * @example\r\n     * var textpath = new Kinetic.TextPath({<br>\r\n     *   x: 100,<br>\r\n     *   y: 50,<br>\r\n     *   fill: '#333',<br>\r\n     *   fontSize: '24',<br>\r\n     *   fontFamily: 'Arial',<br>\r\n     *   text: 'All the world\\'s a stage, and all the men and women merely players.',<br>\r\n     *   data: 'M10,10 C0,0 10,150 100,100 S300,150 400,50'<br>\r\n     * });\r\n     */\r\n    Kinetic.TextPath = function(config) {\r\n        this.___init(config);\r\n    };\r\n\r\n    function _fillFunc(context) {\r\n        context.fillText(this.partialText, 0, 0);\r\n    }\r\n    function _strokeFunc(context) {\r\n        context.strokeText(this.partialText, 0, 0);\r\n    }\r\n\r\n    Kinetic.TextPath.prototype = {\r\n        ___init: function(config) {\r\n            var that = this;\r\n            this.dummyCanvas = document.createElement('canvas');\r\n            this.dataArray = [];\r\n\r\n            // call super constructor\r\n            Kinetic.Shape.call(this, config);\r\n\r\n            // overrides\r\n            // TODO: shouldn't this be on the prototype?\r\n            this._fillFunc = _fillFunc;\r\n            this._strokeFunc = _strokeFunc;\r\n\r\n            this.className = 'TextPath';\r\n\r\n            this.dataArray = Kinetic.Path.parsePathData(this.attrs.data);\r\n            this.on('dataChange.kinetic', function() {\r\n                that.dataArray = Kinetic.Path.parsePathData(this.attrs.data);\r\n            });\r\n\r\n            // update text data for certain attr changes\r\n            this.on('textChange.kinetic textStroke.kinetic textStrokeWidth.kinetic', that._setTextData);\r\n            that._setTextData();\r\n        },\r\n        drawFunc: function(context) {\r\n            var charArr = this.charArr;\r\n\r\n            context.setAttr('font', this._getContextFont());\r\n            context.setAttr('textBaseline', 'middle');\r\n            context.setAttr('textAlign', 'left');\r\n            context.save();\r\n\r\n            var glyphInfo = this.glyphInfo;\r\n            for(var i = 0; i < glyphInfo.length; i++) {\r\n                context.save();\r\n\r\n                var p0 = glyphInfo[i].p0;\r\n                var p1 = glyphInfo[i].p1;\r\n                var ht = parseFloat(this.attrs.fontSize);\r\n\r\n                context.translate(p0.x, p0.y);\r\n                context.rotate(glyphInfo[i].rotation);\r\n                this.partialText = glyphInfo[i].text;\r\n\r\n                context.fillStrokeShape(this);\r\n                context.restore();\r\n\r\n                //// To assist with debugging visually, uncomment following\r\n                // context.beginPath();\r\n                // if (i % 2)\r\n                // context.strokeStyle = 'cyan';\r\n                // else\r\n                // context.strokeStyle = 'green';\r\n\r\n                // context.moveTo(p0.x, p0.y);\r\n                // context.lineTo(p1.x, p1.y);\r\n                // context.stroke();\r\n            }\r\n            context.restore();\r\n        },\r\n        /**\r\n         * get text width in pixels\r\n         * @method\r\n         * @memberof Kinetic.TextPath.prototype\r\n         */\r\n        getTextWidth: function() {\r\n            return this.textWidth;\r\n        },\r\n        /**\r\n         * get text height in pixels\r\n         * @method\r\n         * @memberof Kinetic.TextPath.prototype\r\n         */\r\n        getTextHeight: function() {\r\n            return this.textHeight;\r\n        },\r\n        /**\r\n         * set text\r\n         * @method\r\n         * @memberof Kinetic.TextPath.prototype\r\n         * @param {String} text\r\n         */\r\n        setText: function(text) {\r\n            Kinetic.Text.prototype.setText.call(this, text);\r\n        },\r\n        _getTextSize: function(text) {\r\n            var dummyCanvas = this.dummyCanvas;\r\n            var _context = dummyCanvas.getContext('2d');\r\n\r\n            _context.save();\r\n\r\n            _context.font = this._getContextFont();\r\n            var metrics = _context.measureText(text);\r\n\r\n            _context.restore();\r\n\r\n            return {\r\n                width: metrics.width,\r\n                height: parseInt(this.attrs.fontSize, 10)\r\n            };\r\n        },\r\n        _setTextData: function() {\r\n\r\n            var that = this;\r\n            var size = this._getTextSize(this.attrs.text);\r\n            this.textWidth = size.width;\r\n            this.textHeight = size.height;\r\n\r\n            this.glyphInfo = [];\r\n\r\n            var charArr = this.attrs.text.split('');\r\n\r\n            var p0, p1, pathCmd;\r\n\r\n            var pIndex = -1;\r\n            var currentT = 0;\r\n\r\n            var getNextPathSegment = function() {\r\n                currentT = 0;\r\n                var pathData = that.dataArray;\r\n\r\n                for(var i = pIndex + 1; i < pathData.length; i++) {\r\n                    if(pathData[i].pathLength > 0) {\r\n                        pIndex = i;\r\n\r\n                        return pathData[i];\r\n                    }\r\n                    else if(pathData[i].command == 'M') {\r\n                        p0 = {\r\n                            x: pathData[i].points[0],\r\n                            y: pathData[i].points[1]\r\n                        };\r\n                    }\r\n                }\r\n\r\n                return {};\r\n            };\r\n            var findSegmentToFitCharacter = function(c, before) {\r\n\r\n                var glyphWidth = that._getTextSize(c).width;\r\n\r\n                var currLen = 0;\r\n                var attempts = 0;\r\n                var needNextSegment = false;\r\n                p1 = undefined;\r\n                while(Math.abs(glyphWidth - currLen) / glyphWidth > 0.01 && attempts < 25) {\r\n                    attempts++;\r\n                    var cumulativePathLength = currLen;\r\n                    while(pathCmd === undefined) {\r\n                        pathCmd = getNextPathSegment();\r\n\r\n                        if(pathCmd && cumulativePathLength + pathCmd.pathLength < glyphWidth) {\r\n                            cumulativePathLength += pathCmd.pathLength;\r\n                            pathCmd = undefined;\r\n                        }\r\n                    }\r\n\r\n                    if(pathCmd === {} || p0 === undefined)\r\n                        return undefined;\r\n\r\n                    var needNewSegment = false;\r\n\r\n                    switch (pathCmd.command) {\r\n                        case 'L':\r\n                            if(Kinetic.Path.getLineLength(p0.x, p0.y, pathCmd.points[0], pathCmd.points[1]) > glyphWidth) {\r\n                                p1 = Kinetic.Path.getPointOnLine(glyphWidth, p0.x, p0.y, pathCmd.points[0], pathCmd.points[1], p0.x, p0.y);\r\n                            }\r\n                            else\r\n                                pathCmd = undefined;\r\n                            break;\r\n                        case 'A':\r\n\r\n                            var start = pathCmd.points[4];\r\n                            // 4 = theta\r\n                            var dTheta = pathCmd.points[5];\r\n                            // 5 = dTheta\r\n                            var end = pathCmd.points[4] + dTheta;\r\n\r\n                            if(currentT === 0)\r\n                                currentT = start + 0.00000001;\r\n                            // Just in case start is 0\r\n                            else if(glyphWidth > currLen)\r\n                                currentT += (Math.PI / 180.0) * dTheta / Math.abs(dTheta);\r\n                            else\r\n                                currentT -= Math.PI / 360.0 * dTheta / Math.abs(dTheta);\r\n\r\n                            // Credit for bug fix: @therth https://github.com/ericdrowell/KineticJS/issues/249\r\n                            // Old code failed to render text along arc of this path: \"M 50 50 a 150 50 0 0 1 250 50 l 50 0\"\r\n                            if(dTheta < 0 && currentT < end || dTheta >= 0 && currentT > end) {\r\n                                currentT = end;\r\n                                needNewSegment = true;\r\n                            }\r\n                            p1 = Kinetic.Path.getPointOnEllipticalArc(pathCmd.points[0], pathCmd.points[1], pathCmd.points[2], pathCmd.points[3], currentT, pathCmd.points[6]);\r\n                            break;\r\n                        case 'C':\r\n                            if(currentT === 0) {\r\n                                if(glyphWidth > pathCmd.pathLength)\r\n                                    currentT = 0.00000001;\r\n                                else\r\n                                    currentT = glyphWidth / pathCmd.pathLength;\r\n                            }\r\n                            else if(glyphWidth > currLen)\r\n                                currentT += (glyphWidth - currLen) / pathCmd.pathLength;\r\n                            else\r\n                                currentT -= (currLen - glyphWidth) / pathCmd.pathLength;\r\n\r\n                            if(currentT > 1.0) {\r\n                                currentT = 1.0;\r\n                                needNewSegment = true;\r\n                            }\r\n                            p1 = Kinetic.Path.getPointOnCubicBezier(currentT, pathCmd.start.x, pathCmd.start.y, pathCmd.points[0], pathCmd.points[1], pathCmd.points[2], pathCmd.points[3], pathCmd.points[4], pathCmd.points[5]);\r\n                            break;\r\n                        case 'Q':\r\n                            if(currentT === 0)\r\n                                currentT = glyphWidth / pathCmd.pathLength;\r\n                            else if(glyphWidth > currLen)\r\n                                currentT += (glyphWidth - currLen) / pathCmd.pathLength;\r\n                            else\r\n                                currentT -= (currLen - glyphWidth) / pathCmd.pathLength;\r\n\r\n                            if(currentT > 1.0) {\r\n                                currentT = 1.0;\r\n                                needNewSegment = true;\r\n                            }\r\n                            p1 = Kinetic.Path.getPointOnQuadraticBezier(currentT, pathCmd.start.x, pathCmd.start.y, pathCmd.points[0], pathCmd.points[1], pathCmd.points[2], pathCmd.points[3]);\r\n                            break;\r\n\r\n                    }\r\n\r\n                    if(p1 !== undefined) {\r\n                        currLen = Kinetic.Path.getLineLength(p0.x, p0.y, p1.x, p1.y);\r\n                    }\r\n\r\n                    if(needNewSegment) {\r\n                        needNewSegment = false;\r\n                        pathCmd = undefined;\r\n                    }\r\n                }\r\n            };\r\n            for(var i = 0; i < charArr.length; i++) {\r\n\r\n                // Find p1 such that line segment between p0 and p1 is approx. width of glyph\r\n                findSegmentToFitCharacter(charArr[i]);\r\n\r\n                if(p0 === undefined || p1 === undefined)\r\n                    break;\r\n\r\n                var width = Kinetic.Path.getLineLength(p0.x, p0.y, p1.x, p1.y);\r\n\r\n                // Note: Since glyphs are rendered one at a time, any kerning pair data built into the font will not be used.\r\n                // Can foresee having a rough pair table built in that the developer can override as needed.\r\n\r\n                var kern = 0;\r\n                // placeholder for future implementation\r\n\r\n                var midpoint = Kinetic.Path.getPointOnLine(kern + width / 2.0, p0.x, p0.y, p1.x, p1.y);\r\n\r\n                var rotation = Math.atan2((p1.y - p0.y), (p1.x - p0.x));\r\n                this.glyphInfo.push({\r\n                    transposeX: midpoint.x,\r\n                    transposeY: midpoint.y,\r\n                    text: charArr[i],\r\n                    rotation: rotation,\r\n                    p0: p0,\r\n                    p1: p1\r\n                });\r\n                p0 = p1;\r\n            }\r\n        }\r\n    };\r\n\r\n    // map TextPath methods to Text\r\n    Kinetic.TextPath.prototype._getContextFont = Kinetic.Text.prototype._getContextFont;\r\n\r\n    Kinetic.Util.extend(Kinetic.TextPath, Kinetic.Shape);\r\n\r\n    // add setters and getters\r\n    Kinetic.Factory.addGetterSetter(Kinetic.TextPath, 'fontFamily', CALIBRI);\r\n\r\n    /**\r\n     * set font family\r\n     * @name setFontFamily\r\n     * @method\r\n     * @memberof Kinetic.TextPath.prototype\r\n     * @param {String} fontFamily\r\n     */\r\n\r\n     /**\r\n     * get font family\r\n     * @name getFontFamily\r\n     * @method\r\n     * @memberof Kinetic.TextPath.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.TextPath, 'fontSize', 12);\r\n\r\n    /**\r\n     * set font size\r\n     * @name setFontSize\r\n     * @method\r\n     * @memberof Kinetic.TextPath.prototype\r\n     * @param {int} fontSize\r\n     */\r\n\r\n     /**\r\n     * get font size\r\n     * @name getFontSize\r\n     * @method\r\n     * @memberof Kinetic.TextPath.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.TextPath, 'fontStyle', NORMAL);\r\n\r\n    /**\r\n     * set font style.  Can be 'normal', 'italic', or 'bold'.  'normal' is the default.\r\n     * @name setFontStyle\r\n     * @method\r\n     * @memberof Kinetic.TextPath.prototype\r\n     * @param {String} fontStyle\r\n     */\r\n\r\n     /**\r\n     * get font style\r\n     * @name getFontStyle\r\n     * @method\r\n     * @memberof Kinetic.TextPath.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetter(Kinetic.TextPath, 'text', EMPTY_STRING);\r\n\r\n    /**\r\n     * get text\r\n     * @name getText\r\n     * @method\r\n     * @memberof Kinetic.TextPath.prototype\r\n     */\r\n})();\r\n;(function() {\r\n    /**\r\n     * RegularPolygon constructor.&nbsp; Examples include triangles, squares, pentagons, hexagons, etc.\r\n     * @constructor\r\n     * @memberof Kinetic\r\n     * @augments Kinetic.Shape\r\n     * @param {Object} config\r\n     * @param {Number} config.sides\r\n     * @param {Number} config.radius\r\n     * @param {String} [config.fill] fill color\r\n     * @param {Object} [config.fillRGB] set fill color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.fillR] set fill red component\r\n     * @param {Integer} [config.fillG] set fill green component\r\n     * @param {Integer} [config.fillB] set fill blue component\r\n     * @param {Image} [config.fillPatternImage] fill pattern image\r\n     * @param {Number} [config.fillPatternX]\r\n     * @param {Number} [config.fillPatternY]\r\n     * @param {Number|Array|Object} [config.fillPatternOffset] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillPatternOffsetX] \r\n     * @param {Number} [config.fillPatternOffsetY] \r\n     * @param {Number|Array|Object} [config.fillPatternScale] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillPatternScaleX]\r\n     * @param {Number} [config.fillPatternScaleY]\r\n     * @param {Number} [config.fillPatternRotation]\r\n     * @param {String} [config.fillPatternRepeat] can be 'repeat', 'repeat-x', 'repeat-y', or 'no-repeat'.  The default is 'no-repeat'\r\n     * @param {Number|Array|Object} [config.fillLinearGradientStartPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillLinearGradientStartPointX]\r\n     * @param {Number} [config.fillLinearGradientStartPointY]\r\n     * @param {Number|Array|Object} [config.fillLinearGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number|Array|Object} [config.fillLinearGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillLinearGradientEndPointX]\r\n     * @param {Number} [config.fillLinearGradientEndPointY]\r\n     * @param {Array} [config.fillLinearGradientColorStops] array of color stops\r\n     * @param {Number|Array|Object} [config.fillRadialGradientStartPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillRadialGradientStartPointX]\r\n     * @param {Number} [config.fillRadialGradientStartPointY]\r\n     * @param {Number|Array|Object} [config.fillRadialGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillRadialGradientEndPointX] \r\n     * @param {Number} [config.fillRadialGradientEndPointY] \r\n     * @param {Number} [config.fillRadialGradientStartRadius]\r\n     * @param {Number} [config.fillRadialGradientEndRadius]\r\n     * @param {Array} [config.fillRadialGradientColorStops] array of color stops\r\n     * @param {Boolean} [config.fillEnabled] flag which enables or disables the fill.  The default value is true\r\n     * @param {String} [config.fillPriority] can be color, linear-gradient, radial-graident, or pattern.  The default value is color.  The fillPriority property makes it really easy to toggle between different fill types.  For example, if you want to toggle between a fill color style and a fill pattern style, simply set the fill property and the fillPattern properties, and then use setFillPriority('color') to render the shape with a color fill, or use setFillPriority('pattern') to render the shape with the pattern fill configuration\r\n     * @param {String} [config.stroke] stroke color\r\n     * @param {Object} [config.strokeRGB] set stroke color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.strokeR] set stroke red component\r\n     * @param {Integer} [config.strokeG] set stroke green component\r\n     * @param {Integer} [config.strokeB] set stroke blue component\r\n     * @param {Number} [config.strokeWidth] stroke width\r\n     * @param {Boolean} [config.strokeScaleEnabled] flag which enables or disables stroke scale.  The default is true\r\n     * @param {Boolean} [config.strokeEnabled] flag which enables or disables the stroke.  The default value is true\r\n     * @param {String} [config.lineJoin] can be miter, round, or bevel.  The default\r\n     *  is miter\r\n     * @param {String} [config.lineCap] can be butt, round, or sqare.  The default\r\n     *  is butt\r\n     * @param {String} [config.shadowColor]\r\n     * @param {Object} [config.shadowColorRGB] set shadowColor color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.shadowColorR] set shadowColor red component\r\n     * @param {Integer} [config.shadowColorG] set shadowColor green component\r\n     * @param {Integer} [config.shadowColorB] set shadowColor blue component\r\n     * @param {Number} [config.shadowBlur]\r\n     * @param {Object} [config.shadowOffset]\r\n     * @param {Number} [config.shadowOffsetX]\r\n     * @param {Number} [config.shadowOffsetY]\r\n     * @param {Number} [config.shadowOpacity] shadow opacity.  Can be any real number\r\n     *  between 0 and 1\r\n     * @param {Boolean} [config.shadowEnabled] flag which enables or disables the shadow.  The default value is true\r\n     * @param {Array} [config.dashArray]\r\n     * @param {Boolean} [config.dashArrayEnabled] flag which enables or disables the dashArray.  The default value is true\r\n     * @param {Number} [config.x]\r\n     * @param {Number} [config.y]\r\n     * @param {Number} [config.width]\r\n     * @param {Number} [config.height]\r\n     * @param {Boolean} [config.visible]\r\n     * @param {Boolean} [config.listening] whether or not the node is listening for events\r\n     * @param {String} [config.id] unique id\r\n     * @param {String} [config.name] non-unique name\r\n     * @param {Number} [config.opacity] determines node opacity.  Can be any number between 0 and 1\r\n     * @param {Object} [config.scale] set scale\r\n     * @param {Number} [config.scaleX] set scale x\r\n     * @param {Number} [config.scaleY] set scale y\r\n     * @param {Number} [config.rotation] rotation in radians\r\n     * @param {Number} [config.rotationDeg] rotation in degrees\r\n     * @param {Object} [config.offset] offset from center point and rotation point\r\n     * @param {Number} [config.offsetX] set offset x\r\n     * @param {Number} [config.offsetY] set offset y\r\n     * @param {Boolean} [config.draggable] makes the node draggable.  When stages are draggable, you can drag and drop\r\n     *  the entire stage by dragging any portion of the stage\r\n     * @param {Function} [config.dragBoundFunc]\r\n     * @example\r\n     * var hexagon = new Kinetic.RegularPolygon({<br>\r\n     *   x: 100,<br>\r\n     *   y: 200,<br>\r\n     *   sides: 6,<br>\r\n     *   radius: 70,<br>\r\n     *   fill: 'red',<br>\r\n     *   stroke: 'black',<br>\r\n     *   strokeWidth: 4<br>\r\n     * });\r\n     */\r\n    Kinetic.RegularPolygon = function(config) {\r\n        this.___init(config);\r\n    };\r\n\r\n    Kinetic.RegularPolygon.prototype = {\r\n        ___init: function(config) {\r\n            // call super constructor\r\n            Kinetic.Shape.call(this, config);\r\n            this.className = 'RegularPolygon';\r\n        },\r\n        drawFunc: function(context) {\r\n            var sides = this.attrs.sides,\r\n                radius = this.attrs.radius,\r\n                n, x, y;\r\n\r\n            context.beginPath();\r\n            context.moveTo(0, 0 - radius);\r\n\r\n            for(n = 1; n < sides; n++) {\r\n                x = radius * Math.sin(n * 2 * Math.PI / sides);\r\n                y = -1 * radius * Math.cos(n * 2 * Math.PI / sides);\r\n                context.lineTo(x, y);\r\n            }\r\n            context.closePath();\r\n            context.fillStrokeShape(this);\r\n        }\r\n    };\r\n    Kinetic.Util.extend(Kinetic.RegularPolygon, Kinetic.Shape);\r\n\r\n    // add getters setters\r\n    Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon, 'radius', 0);\r\n\r\n    /**\r\n     * set radius\r\n     * @name setRadius\r\n     * @method\r\n     * @memberof Kinetic.RegularPolygon.prototype\r\n     * @param {Number} radius\r\n     */\r\n\r\n     /**\r\n     * get radius\r\n     * @name getRadius\r\n     * @method\r\n     * @memberof Kinetic.RegularPolygon.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon, 'sides', 0);\r\n\r\n    /**\r\n     * set number of sides\r\n     * @name setSides\r\n     * @method\r\n     * @memberof Kinetic.RegularPolygon.prototype\r\n     * @param {int} sides\r\n     */\r\n\r\n    /**\r\n     * get number of sides\r\n     * @name getSides\r\n     * @method\r\n     * @memberof Kinetic.RegularPolygon.prototype\r\n     */\r\n})();\r\n;(function() {\r\n    /**\r\n     * Star constructor\r\n     * @constructor\r\n     * @memberof Kinetic\r\n     * @augments Kinetic.Shape\r\n     * @param {Object} config\r\n     * @param {Integer} config.numPoints\r\n     * @param {Number} config.innerRadius\r\n     * @param {Number} config.outerRadius\r\n     * @param {String} [config.fill] fill color\r\n     * @param {Object} [config.fillRGB] set fill color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.fillR] set fill red component\r\n     * @param {Integer} [config.fillG] set fill green component\r\n     * @param {Integer} [config.fillB] set fill blue component\r\n     * @param {Image} [config.fillPatternImage] fill pattern image\r\n     * @param {Number} [config.fillPatternX]\r\n     * @param {Number} [config.fillPatternY]\r\n     * @param {Number|Array|Object} [config.fillPatternOffset] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillPatternOffsetX] \r\n     * @param {Number} [config.fillPatternOffsetY] \r\n     * @param {Number|Array|Object} [config.fillPatternScale] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillPatternScaleX]\r\n     * @param {Number} [config.fillPatternScaleY]\r\n     * @param {Number} [config.fillPatternRotation]\r\n     * @param {String} [config.fillPatternRepeat] can be 'repeat', 'repeat-x', 'repeat-y', or 'no-repeat'.  The default is 'no-repeat'\r\n     * @param {Number|Array|Object} [config.fillLinearGradientStartPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillLinearGradientStartPointX]\r\n     * @param {Number} [config.fillLinearGradientStartPointY]\r\n     * @param {Number|Array|Object} [config.fillLinearGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number|Array|Object} [config.fillLinearGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillLinearGradientEndPointX]\r\n     * @param {Number} [config.fillLinearGradientEndPointY]\r\n     * @param {Array} [config.fillLinearGradientColorStops] array of color stops\r\n     * @param {Number|Array|Object} [config.fillRadialGradientStartPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillRadialGradientStartPointX]\r\n     * @param {Number} [config.fillRadialGradientStartPointY]\r\n     * @param {Number|Array|Object} [config.fillRadialGradientEndPoint] number, array with two elements, or object with x and y component\r\n     * @param {Number} [config.fillRadialGradientEndPointX] \r\n     * @param {Number} [config.fillRadialGradientEndPointY] \r\n     * @param {Number} [config.fillRadialGradientStartRadius]\r\n     * @param {Number} [config.fillRadialGradientEndRadius]\r\n     * @param {Array} [config.fillRadialGradientColorStops] array of color stops\r\n     * @param {Boolean} [config.fillEnabled] flag which enables or disables the fill.  The default value is true\r\n     * @param {String} [config.fillPriority] can be color, linear-gradient, radial-graident, or pattern.  The default value is color.  The fillPriority property makes it really easy to toggle between different fill types.  For example, if you want to toggle between a fill color style and a fill pattern style, simply set the fill property and the fillPattern properties, and then use setFillPriority('color') to render the shape with a color fill, or use setFillPriority('pattern') to render the shape with the pattern fill configuration\r\n     * @param {String} [config.stroke] stroke color\r\n     * @param {Object} [config.strokeRGB] set stroke color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.strokeR] set stroke red component\r\n     * @param {Integer} [config.strokeG] set stroke green component\r\n     * @param {Integer} [config.strokeB] set stroke blue component\r\n     * @param {Number} [config.strokeWidth] stroke width\r\n     * @param {Boolean} [config.strokeScaleEnabled] flag which enables or disables stroke scale.  The default is true\r\n     * @param {Boolean} [config.strokeEnabled] flag which enables or disables the stroke.  The default value is true\r\n     * @param {String} [config.lineJoin] can be miter, round, or bevel.  The default\r\n     *  is miter\r\n     * @param {String} [config.lineCap] can be butt, round, or sqare.  The default\r\n     *  is butt\r\n     * @param {String} [config.shadowColor]\r\n     * @param {Object} [config.shadowColorRGB] set shadowColor color with an object literal containing an r, g, and b component\r\n     * @param {Integer} [config.shadowColorR] set shadowColor red component\r\n     * @param {Integer} [config.shadowColorG] set shadowColor green component\r\n     * @param {Integer} [config.shadowColorB] set shadowColor blue component\r\n     * @param {Number} [config.shadowBlur]\r\n     * @param {Object} [config.shadowOffset]\r\n     * @param {Number} [config.shadowOffsetX]\r\n     * @param {Number} [config.shadowOffsetY]\r\n     * @param {Number} [config.shadowOpacity] shadow opacity.  Can be any real number\r\n     *  between 0 and 1\r\n     * @param {Boolean} [config.shadowEnabled] flag which enables or disables the shadow.  The default value is true\r\n     * @param {Array} [config.dashArray]\r\n     * @param {Boolean} [config.dashArrayEnabled] flag which enables or disables the dashArray.  The default value is true\r\n     * @param {Number} [config.x]\r\n     * @param {Number} [config.y]\r\n     * @param {Number} [config.width]\r\n     * @param {Number} [config.height]\r\n     * @param {Boolean} [config.visible]\r\n     * @param {Boolean} [config.listening] whether or not the node is listening for events\r\n     * @param {String} [config.id] unique id\r\n     * @param {String} [config.name] non-unique name\r\n     * @param {Number} [config.opacity] determines node opacity.  Can be any number between 0 and 1\r\n     * @param {Object} [config.scale] set scale\r\n     * @param {Number} [config.scaleX] set scale x\r\n     * @param {Number} [config.scaleY] set scale y\r\n     * @param {Number} [config.rotation] rotation in radians\r\n     * @param {Number} [config.rotationDeg] rotation in degrees\r\n     * @param {Object} [config.offset] offset from center point and rotation point\r\n     * @param {Number} [config.offsetX] set offset x\r\n     * @param {Number} [config.offsetY] set offset y\r\n     * @param {Boolean} [config.draggable] makes the node draggable.  When stages are draggable, you can drag and drop\r\n     *  the entire stage by dragging any portion of the stage\r\n     * @param {Function} [config.dragBoundFunc]\r\n     * @example\r\n     * var star = new Kinetic.Star({<br>\r\n     *   x: 100,<br>\r\n     *   y: 200,<br>\r\n     *   numPoints: 5,<br>\r\n     *   innerRadius: 70,<br>\r\n     *   outerRadius: 70,<br>\r\n     *   fill: 'red',<br>\r\n     *   stroke: 'black',<br>\r\n     *   strokeWidth: 4<br>\r\n     * });\r\n     */\r\n    Kinetic.Star = function(config) {\r\n        this.___init(config);\r\n    };\r\n\r\n    Kinetic.Star.prototype = {\r\n        ___init: function(config) {\r\n            // call super constructor\r\n            Kinetic.Shape.call(this, config);\r\n            this.className = 'Star';\r\n        },\r\n        drawFunc: function(context) {\r\n            var _context = context._context, \r\n                innerRadius = this.attrs.innerRadius, \r\n                outerRadius = this.attrs.outerRadius, \r\n                numPoints = this.attrs.numPoints;\r\n\r\n            _context.beginPath();\r\n            _context.moveTo(0, 0 - this.attrs.outerRadius);\r\n\r\n            for(var n = 1; n < numPoints * 2; n++) {\r\n                var radius = n % 2 === 0 ? outerRadius : innerRadius;\r\n                var x = radius * Math.sin(n * Math.PI / numPoints);\r\n                var y = -1 * radius * Math.cos(n * Math.PI / numPoints);\r\n                _context.lineTo(x, y);\r\n            }\r\n            _context.closePath();\r\n\r\n            context.fillStrokeShape(this);\r\n        }\r\n    };\r\n    Kinetic.Util.extend(Kinetic.Star, Kinetic.Shape);\r\n\r\n    // add getters setters\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Star, 'numPoints', 0);\r\n\r\n    /**\r\n     * set number of points\r\n     * @name setNumPoints\r\n     * @method\r\n     * @memberof Kinetic.Star.prototype\r\n     * @param {Integer} points\r\n     */\r\n\r\n     /**\r\n     * get number of points\r\n     * @name getNumPoints\r\n     * @method\r\n     * @memberof Kinetic.Star.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Star, 'innerRadius', 0);\r\n\r\n    /**\r\n     * set inner radius\r\n     * @name setInnerRadius\r\n     * @method\r\n     * @memberof Kinetic.Star.prototype\r\n     * @param {Number} radius\r\n     */\r\n\r\n     /**\r\n     * get inner radius\r\n     * @name getInnerRadius\r\n     * @method\r\n     * @memberof Kinetic.Star.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Star, 'outerRadius', 0);\r\n\r\n    /**\r\n     * set outer radius\r\n     * @name setOuterRadius\r\n     * @method\r\n     * @memberof Kinetic.Star.prototype\r\n     * @param {Number} radius\r\n     */\r\n\r\n     /**\r\n     * get outer radius\r\n     * @name getOuterRadius\r\n     * @method\r\n     * @memberof Kinetic.Star.prototype\r\n     */\r\n})();\r\n;(function() {\r\n    // constants\r\n    var ATTR_CHANGE_LIST = ['fontFamily', 'fontSize', 'fontStyle', 'padding', 'lineHeight', 'text'],\r\n        CHANGE_KINETIC = 'Change.kinetic',\r\n        NONE = 'none',\r\n        UP = 'up',\r\n        RIGHT = 'right',\r\n        DOWN = 'down',\r\n        LEFT = 'left',\r\n        LABEL = 'Label',\r\n\r\n     // cached variables\r\n     attrChangeListLen = ATTR_CHANGE_LIST.length;\r\n\r\n    /**\r\n     * Label constructor.&nbsp; Labels are groups that contain a Text and Tag shape\r\n     * @constructor\r\n     * @memberof Kinetic\r\n     * @param {Object} config\r\n     * @param {Number} [config.x]\r\n     * @param {Number} [config.y]\r\n     * @param {Number} [config.width]\r\n     * @param {Number} [config.height]\r\n     * @param {Boolean} [config.visible]\r\n     * @param {Boolean} [config.listening] whether or not the node is listening for events\r\n     * @param {String} [config.id] unique id\r\n     * @param {String} [config.name] non-unique name\r\n     * @param {Number} [config.opacity] determines node opacity.  Can be any number between 0 and 1\r\n     * @param {Object} [config.scale] set scale\r\n     * @param {Number} [config.scaleX] set scale x\r\n     * @param {Number} [config.scaleY] set scale y\r\n     * @param {Number} [config.rotation] rotation in radians\r\n     * @param {Number} [config.rotationDeg] rotation in degrees\r\n     * @param {Object} [config.offset] offset from center point and rotation point\r\n     * @param {Number} [config.offsetX] set offset x\r\n     * @param {Number} [config.offsetY] set offset y\r\n     * @param {Boolean} [config.draggable] makes the node draggable.  When stages are draggable, you can drag and drop\r\n     *  the entire stage by dragging any portion of the stage\r\n     * @param {Function} [config.dragBoundFunc]\r\n     * @example\r\n     * // create label\r\n     * var label = new Kinetic.Label({<br>\r\n     *   x: 100,<br>\r\n     *   y: 100, <br>\r\n     *   draggable: true<br>\r\n     * });<br><br>\r\n     *\r\n     * // add a tag to the label<br>\r\n     * label.add(new Kinetic.Tag({<br>\r\n     *   fill: '#bbb',<br>\r\n     *   stroke: '#333',<br>\r\n     *   shadowColor: 'black',<br>\r\n     *   shadowBlur: 10,<br>\r\n     *   shadowOffset: [10, 10],<br>\r\n     *   shadowOpacity: 0.2,<br>\r\n     *   lineJoin: 'round',<br>\r\n     *   pointerDirection: 'up',<br>\r\n     *   pointerWidth: 20,<br>\r\n     *   pointerHeight: 20,<br>\r\n     *   cornerRadius: 5<br>\r\n     * }));<br><br>\r\n     *\r\n     * // add text to the label<br>\r\n     * label.add(new Kinetic.Text({<br>\r\n     *   text: 'Hello World!',<br>\r\n     *   fontSize: 50,<br>\r\n     *   lineHeight: 1.2,<br>\r\n     *   padding: 10,<br>\r\n     *   fill: 'green'<br>\r\n     *  }));\r\n     */\r\n    Kinetic.Label = function(config) {\r\n        this.____init(config);\r\n    };\r\n\r\n    Kinetic.Label.prototype = {\r\n        ____init: function(config) {\r\n            var that = this;\r\n\r\n            this.className = LABEL;\r\n            Kinetic.Group.call(this, config);\r\n\r\n            this.on('add.kinetic', function(evt) {\r\n                that._addListeners(evt.child);\r\n                that._sync();\r\n            });\r\n        },\r\n        /**\r\n         * get Text shape for the label.  You need to access the Text shape in order to update\r\n         * the text properties\r\n         * @name getText\r\n         * @method\r\n         * @memberof Kinetic.Label.prototype\r\n         */\r\n        getText: function() {\r\n            return this.find('Text')[0];\r\n        },\r\n        /**\r\n         * get Tag shape for the label.  You need to access the Tag shape in order to update\r\n         * the pointer properties and the corner radius\r\n         * @name getTag\r\n         * @method\r\n         * @memberof Kinetic.Label.prototype\r\n         */\r\n        getTag: function() {\r\n            return this.find('Tag')[0];\r\n        },\r\n        _addListeners: function(text) {\r\n            var that = this,\r\n                n;\r\n            var func = function(){\r\n                    that._sync();\r\n                };\r\n\r\n            // update text data for certain attr changes\r\n            for(n = 0; n < attrChangeListLen; n++) {\r\n                text.on(ATTR_CHANGE_LIST[n] + CHANGE_KINETIC, func);\r\n            }\r\n        },\r\n        getWidth: function() {\r\n            return this.getText().getWidth();\r\n        },\r\n        getHeight: function() {\r\n            return this.getText().getHeight();\r\n        },\r\n        _sync: function() {\r\n            var text = this.getText(),\r\n                tag = this.getTag(),\r\n                width, height, pointerDirection, pointerWidth, x, y;\r\n\r\n            if (text && tag) {\r\n                width = text.getWidth(),\r\n                height = text.getHeight(),\r\n                pointerDirection = tag.getPointerDirection(),\r\n                pointerWidth = tag.getPointerWidth(),\r\n                pointerHeight = tag.getPointerHeight(),\r\n                x = 0,\r\n                y = 0;\r\n\r\n                switch(pointerDirection) {\r\n                    case UP:\r\n                        x = width / 2;\r\n                        y = -1 * pointerHeight;\r\n                        break;\r\n                    case RIGHT:\r\n                        x = width + pointerWidth;\r\n                        y = height / 2;\r\n                        break;\r\n                    case DOWN:\r\n                        x = width / 2;\r\n                        y = height + pointerHeight;\r\n                        break;\r\n                    case LEFT:\r\n                        x = -1 * pointerWidth;\r\n                        y = height / 2;\r\n                        break;\r\n                }\r\n\r\n                tag.setAttrs({\r\n                    x: -1 * x,\r\n                    y: -1 * y,\r\n                    width: width,\r\n                    height: height\r\n                });\r\n\r\n                text.setAttrs({\r\n                    x: -1 * x,\r\n                    y: -1 * y\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n    Kinetic.Util.extend(Kinetic.Label, Kinetic.Group);\r\n\r\n    /**\r\n     * Tag constructor.&nbsp; A Tag can be configured\r\n     *  to have a pointer element that points up, right, down, or left\r\n     * @constructor\r\n     * @memberof Kinetic\r\n     * @param {Object} config\r\n     * @param {String} [config.pointerDirection] can be up, right, down, left, or none; the default\r\n     *  is none.  When a pointer is present, the positioning of the label is relative to the tip of the pointer.\r\n     * @param {Number} [config.pointerWidth]\r\n     * @param {Number} [config.pointerHeight]\r\n     * @param {Number} [config.cornerRadius]\r\n     */\r\n    Kinetic.Tag = function(config) {\r\n        this.___init(config);\r\n    };\r\n\r\n    Kinetic.Tag.prototype = {\r\n        ___init: function(config) {\r\n            Kinetic.Shape.call(this, config);\r\n            this.className = 'Tag';\r\n        },\r\n        drawFunc: function(context) {\r\n            var width = this.getWidth(),\r\n                height = this.getHeight(),\r\n                pointerDirection = this.getPointerDirection(),\r\n                pointerWidth = this.getPointerWidth(),\r\n                pointerHeight = this.getPointerHeight(),\r\n                cornerRadius = this.getCornerRadius();\r\n\r\n            context.beginPath();\r\n            context.moveTo(0,0);\r\n\r\n            if (pointerDirection === UP) {\r\n                context.lineTo((width - pointerWidth)/2, 0);\r\n                context.lineTo(width/2, -1 * pointerHeight);\r\n                context.lineTo((width + pointerWidth)/2, 0);\r\n            }\r\n\r\n            context.lineTo(width, 0);\r\n\r\n            if (pointerDirection === RIGHT) {\r\n                context.lineTo(width, (height - pointerHeight)/2);\r\n                context.lineTo(width + pointerWidth, height/2);\r\n                context.lineTo(width, (height + pointerHeight)/2);\r\n            }\r\n\r\n            context.lineTo(width, height);\r\n\r\n            if (pointerDirection === DOWN) {\r\n                context.lineTo((width + pointerWidth)/2, height);\r\n                context.lineTo(width/2, height + pointerHeight);\r\n                context.lineTo((width - pointerWidth)/2, height);\r\n            }\r\n\r\n            context.lineTo(0, height);\r\n\r\n            if (pointerDirection === LEFT) {\r\n                context.lineTo(0, (height + pointerHeight)/2);\r\n                context.lineTo(-1 * pointerWidth, height/2);\r\n                context.lineTo(0, (height - pointerHeight)/2);\r\n            }\r\n\r\n            context.closePath();\r\n            context.fillStrokeShape(this);\r\n        }\r\n    };\r\n\r\n    Kinetic.Util.extend(Kinetic.Tag, Kinetic.Shape);\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Tag, 'pointerDirection', NONE);\r\n\r\n    /**\r\n     * set pointer Direction\r\n     * @name setPointerDirection\r\n     * @method\r\n     * @memberof Kinetic.Tag.prototype\r\n     * @param {String} pointerDirection can be up, right, down, left, or none.  The\r\n     *  default is none\r\n     */\r\n\r\n     /**\r\n     * get pointer Direction\r\n     * @name getPointerDirection\r\n     * @method\r\n     * @memberof Kinetic.Tag.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Tag, 'pointerWidth', 0);\r\n\r\n    /**\r\n     * set pointer width\r\n     * @name setPointerWidth\r\n     * @method\r\n     * @memberof Kinetic.Tag.prototype\r\n     * @param {Number} pointerWidth\r\n     */\r\n\r\n     /**\r\n     * get pointer width\r\n     * @name getPointerWidth\r\n     * @method\r\n     * @memberof Kinetic.Tag.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Tag, 'pointerHeight', 0);\r\n\r\n    /**\r\n     * set pointer height\r\n     * @name setPointerHeight\r\n     * @method\r\n     * @memberof Kinetic.Tag.prototype\r\n     * @param {Number} pointerHeight\r\n     */\r\n\r\n     /**\r\n     * get pointer height\r\n     * @name getPointerHeight\r\n     * @method\r\n     * @memberof Kinetic.Tag.prototype\r\n     */\r\n\r\n    Kinetic.Factory.addGetterSetter(Kinetic.Tag, 'cornerRadius', 0);\r\n\r\n    /**\r\n     * set corner radius\r\n     * @name setCornerRadius\r\n     * @method\r\n     * @memberof Kinetic.Tag.prototype\r\n     * @param {Number} corner radius\r\n     */\r\n\r\n    /**\r\n     * get corner radius\r\n     * @name getCornerRadius\r\n     * @method\r\n     * @memberof Kinetic.Tag.prototype\r\n     */\r\n})();\r\n;(function() {\r\n    /**\r\n     * Grayscale Filter\r\n     * @function\r\n     * @memberof Kinetic.Filters\r\n     * @param {Object} imageData\r\n     */\r\n    Kinetic.Filters.Grayscale = function(imageData) {\r\n        var data = imageData.data;\r\n        for(var i = 0; i < data.length; i += 4) {\r\n            var brightness = 0.34 * data[i] + 0.5 * data[i + 1] + 0.16 * data[i + 2];\r\n            // red\r\n            data[i] = brightness;\r\n            // green\r\n            data[i + 1] = brightness;\r\n            // blue\r\n            data[i + 2] = brightness;\r\n        }\r\n    };\r\n})();\r\n;(function() {\r\n    /**\r\n     * Brighten Filter.  \r\n     * @function\r\n     * @memberof Kinetic.Filters\r\n     * @param {Object} imageData\r\n     */\r\n    Kinetic.Filters.Brighten = function(imageData) {\r\n        var brightness = this.getFilterBrightness();\r\n        var data = imageData.data;\r\n        for(var i = 0; i < data.length; i += 4) {\r\n            // red\r\n            data[i] += brightness;\r\n            // green\r\n            data[i + 1] += brightness;\r\n            // blue\r\n            data[i + 2] += brightness;\r\n        }\r\n    };\r\n\r\n    Kinetic.Factory.addFilterGetterSetter(Kinetic.Image, 'filterBrightness', 0);\r\n    /**\r\n    * get filter brightness.  The brightness is a number between -255 and 255.&nbsp; Positive values \r\n    *  increase the brightness and negative values decrease the brightness, making the image darker\r\n    * @name getFilterBrightness\r\n    * @method\r\n    * @memberof Kinetic.Image.prototype\r\n    */\r\n\r\n    /**\r\n    * set filter brightness\r\n    * @name setFilterBrightness\r\n    * @method\r\n    * @memberof Kinetic.Image.prototype\r\n    */\r\n})();\r\n;(function() {\r\n    /**\r\n     * Invert Filter\r\n     * @function\r\n     * @memberof Kinetic.Filters\r\n     * @param {Object} imageData\r\n     */\r\n    Kinetic.Filters.Invert = function(imageData) {\r\n        var data = imageData.data;\r\n        for(var i = 0; i < data.length; i += 4) {\r\n            // red\r\n            data[i] = 255 - data[i];\r\n            // green\r\n            data[i + 1] = 255 - data[i + 1];\r\n            // blue\r\n            data[i + 2] = 255 - data[i + 2];\r\n        }\r\n    };\r\n})();\r\n;/*\r\n the Gauss filter\r\n master repo: https://github.com/pavelpower/kineticjsGaussFilter/\r\n*/\r\n(function() {\r\n    /*\r\n\r\n     StackBlur - a fast almost Gaussian Blur For Canvas\r\n\r\n     Version:   0.5\r\n     Author:    Mario Klingemann\r\n     Contact:   mario@quasimondo.com\r\n     Website:   http://www.quasimondo.com/StackBlurForCanvas\r\n     Twitter:   @quasimondo\r\n\r\n     In case you find this class useful - especially in commercial projects -\r\n     I am not totally unhappy for a small donation to my PayPal account\r\n     mario@quasimondo.de\r\n\r\n     Or support me on flattr:\r\n     https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript\r\n\r\n     Copyright (c) 2010 Mario Klingemann\r\n\r\n     Permission is hereby granted, free of charge, to any person\r\n     obtaining a copy of this software and associated documentation\r\n     files (the \"Software\"), to deal in the Software without\r\n     restriction, including without limitation the rights to use,\r\n     copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n     copies of the Software, and to permit persons to whom the\r\n     Software is furnished to do so, subject to the following\r\n     conditions:\r\n\r\n     The above copyright notice and this permission notice shall be\r\n     included in all copies or substantial portions of the Software.\r\n\r\n     THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n     EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\r\n     OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\r\n     NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\r\n     HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\r\n     WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\r\n     FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\r\n     OTHER DEALINGS IN THE SOFTWARE.\r\n     */\r\n\r\n    function BlurStack() {\r\n        this.r = 0;\r\n        this.g = 0;\r\n        this.b = 0;\r\n        this.a = 0;\r\n        this.next = null;\r\n    }\r\n\r\n    var mul_table = [\r\n        512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,\r\n        454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,\r\n        482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,\r\n        437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,\r\n        497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,\r\n        320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,\r\n        446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,\r\n        329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,\r\n        505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,\r\n        399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,\r\n        324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,\r\n        268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,\r\n        451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,\r\n        385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,\r\n        332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,\r\n        289,287,285,282,280,278,275,273,271,269,267,265,263,261,259];\r\n\r\n    var shg_table = [\r\n        9, 11, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 17,\r\n        17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19,\r\n        19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20,\r\n        20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21,\r\n        21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21,\r\n        21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22,\r\n        22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22,\r\n        22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23,\r\n        23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23,\r\n        23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23,\r\n        23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23,\r\n        23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\r\n        24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\r\n        24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\r\n        24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,\r\n        24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24 ];\r\n\r\n    function filterGaussBlurRGBA( imageData, radius) {\r\n\r\n        var pixels = imageData.data,\r\n            width = imageData.width,\r\n            height = imageData.height;\r\n\r\n        var x, y, i, p, yp, yi, yw, r_sum, g_sum, b_sum, a_sum,\r\n            r_out_sum, g_out_sum, b_out_sum, a_out_sum,\r\n            r_in_sum, g_in_sum, b_in_sum, a_in_sum,\r\n            pr, pg, pb, pa, rbs;\r\n\r\n        var div = radius + radius + 1,\r\n            widthMinus1  = width - 1,\r\n            heightMinus1 = height - 1,\r\n            radiusPlus1  = radius + 1,\r\n            sumFactor = radiusPlus1 * ( radiusPlus1 + 1 ) / 2,\r\n            stackStart = new BlurStack(),\r\n            stackEnd = null,\r\n            stack = stackStart,\r\n            stackIn = null,\r\n            stackOut = null,\r\n            mul_sum = mul_table[radius],\r\n            shg_sum = shg_table[radius];\r\n\r\n        for ( i = 1; i < div; i++ ) {\r\n            stack = stack.next = new BlurStack();\r\n            if ( i == radiusPlus1 ) stackEnd = stack;\r\n        }\r\n\r\n        stack.next = stackStart;\r\n\r\n        yw = yi = 0;\r\n\r\n        for ( y = 0; y < height; y++ )\r\n        {\r\n            r_in_sum = g_in_sum = b_in_sum = a_in_sum = r_sum = g_sum = b_sum = a_sum = 0;\r\n\r\n            r_out_sum = radiusPlus1 * ( pr = pixels[yi] );\r\n            g_out_sum = radiusPlus1 * ( pg = pixels[yi+1] );\r\n            b_out_sum = radiusPlus1 * ( pb = pixels[yi+2] );\r\n            a_out_sum = radiusPlus1 * ( pa = pixels[yi+3] );\r\n\r\n            r_sum += sumFactor * pr;\r\n            g_sum += sumFactor * pg;\r\n            b_sum += sumFactor * pb;\r\n            a_sum += sumFactor * pa;\r\n\r\n            stack = stackStart;\r\n\r\n            for( i = 0; i < radiusPlus1; i++ )\r\n            {\r\n                stack.r = pr;\r\n                stack.g = pg;\r\n                stack.b = pb;\r\n                stack.a = pa;\r\n                stack = stack.next;\r\n            }\r\n\r\n            for( i = 1; i < radiusPlus1; i++ )\r\n            {\r\n                p = yi + (( widthMinus1 < i ? widthMinus1 : i ) << 2 );\r\n                r_sum += ( stack.r = ( pr = pixels[p])) * ( rbs = radiusPlus1 - i );\r\n                g_sum += ( stack.g = ( pg = pixels[p+1])) * rbs;\r\n                b_sum += ( stack.b = ( pb = pixels[p+2])) * rbs;\r\n                a_sum += ( stack.a = ( pa = pixels[p+3])) * rbs;\r\n\r\n                r_in_sum += pr;\r\n                g_in_sum += pg;\r\n                b_in_sum += pb;\r\n                a_in_sum += pa;\r\n\r\n                stack = stack.next;\r\n            }\r\n\r\n\r\n            stackIn = stackStart;\r\n            stackOut = stackEnd;\r\n            for ( x = 0; x < width; x++ )\r\n            {\r\n                pixels[yi+3] = pa = (a_sum * mul_sum) >> shg_sum;\r\n                if ( pa !== 0 )\r\n                {\r\n                    pa = 255 / pa;\r\n                    pixels[yi]   = ((r_sum * mul_sum) >> shg_sum) * pa;\r\n                    pixels[yi+1] = ((g_sum * mul_sum) >> shg_sum) * pa;\r\n                    pixels[yi+2] = ((b_sum * mul_sum) >> shg_sum) * pa;\r\n                } else {\r\n                    pixels[yi] = pixels[yi+1] = pixels[yi+2] = 0;\r\n                }\r\n\r\n                r_sum -= r_out_sum;\r\n                g_sum -= g_out_sum;\r\n                b_sum -= b_out_sum;\r\n                a_sum -= a_out_sum;\r\n\r\n                r_out_sum -= stackIn.r;\r\n                g_out_sum -= stackIn.g;\r\n                b_out_sum -= stackIn.b;\r\n                a_out_sum -= stackIn.a;\r\n\r\n                p =  ( yw + ( ( p = x + radius + 1 ) < widthMinus1 ? p : widthMinus1 ) ) << 2;\r\n\r\n                r_in_sum += ( stackIn.r = pixels[p]);\r\n                g_in_sum += ( stackIn.g = pixels[p+1]);\r\n                b_in_sum += ( stackIn.b = pixels[p+2]);\r\n                a_in_sum += ( stackIn.a = pixels[p+3]);\r\n\r\n                r_sum += r_in_sum;\r\n                g_sum += g_in_sum;\r\n                b_sum += b_in_sum;\r\n                a_sum += a_in_sum;\r\n\r\n                stackIn = stackIn.next;\r\n\r\n                r_out_sum += ( pr = stackOut.r );\r\n                g_out_sum += ( pg = stackOut.g );\r\n                b_out_sum += ( pb = stackOut.b );\r\n                a_out_sum += ( pa = stackOut.a );\r\n\r\n                r_in_sum -= pr;\r\n                g_in_sum -= pg;\r\n                b_in_sum -= pb;\r\n                a_in_sum -= pa;\r\n\r\n                stackOut = stackOut.next;\r\n\r\n                yi += 4;\r\n            }\r\n            yw += width;\r\n        }\r\n\r\n\r\n        for ( x = 0; x < width; x++ )\r\n        {\r\n            g_in_sum = b_in_sum = a_in_sum = r_in_sum = g_sum = b_sum = a_sum = r_sum = 0;\r\n\r\n            yi = x << 2;\r\n            r_out_sum = radiusPlus1 * ( pr = pixels[yi]);\r\n            g_out_sum = radiusPlus1 * ( pg = pixels[yi+1]);\r\n            b_out_sum = radiusPlus1 * ( pb = pixels[yi+2]);\r\n            a_out_sum = radiusPlus1 * ( pa = pixels[yi+3]);\r\n\r\n            r_sum += sumFactor * pr;\r\n            g_sum += sumFactor * pg;\r\n            b_sum += sumFactor * pb;\r\n            a_sum += sumFactor * pa;\r\n\r\n            stack = stackStart;\r\n\r\n            for( i = 0; i < radiusPlus1; i++ )\r\n            {\r\n                stack.r = pr;\r\n                stack.g = pg;\r\n                stack.b = pb;\r\n                stack.a = pa;\r\n                stack = stack.next;\r\n            }\r\n\r\n            yp = width;\r\n\r\n            for( i = 1; i <= radius; i++ )\r\n            {\r\n                yi = ( yp + x ) << 2;\r\n\r\n                r_sum += ( stack.r = ( pr = pixels[yi])) * ( rbs = radiusPlus1 - i );\r\n                g_sum += ( stack.g = ( pg = pixels[yi+1])) * rbs;\r\n                b_sum += ( stack.b = ( pb = pixels[yi+2])) * rbs;\r\n                a_sum += ( stack.a = ( pa = pixels[yi+3])) * rbs;\r\n\r\n                r_in_sum += pr;\r\n                g_in_sum += pg;\r\n                b_in_sum += pb;\r\n                a_in_sum += pa;\r\n\r\n                stack = stack.next;\r\n\r\n                if( i < heightMinus1 )\r\n                {\r\n                    yp += width;\r\n                }\r\n            }\r\n\r\n            yi = x;\r\n            stackIn = stackStart;\r\n            stackOut = stackEnd;\r\n            for ( y = 0; y < height; y++ )\r\n            {\r\n                p = yi << 2;\r\n                pixels[p+3] = pa = (a_sum * mul_sum) >> shg_sum;\r\n                if ( pa > 0 )\r\n                {\r\n                    pa = 255 / pa;\r\n                    pixels[p]   = ((r_sum * mul_sum) >> shg_sum ) * pa;\r\n                    pixels[p+1] = ((g_sum * mul_sum) >> shg_sum ) * pa;\r\n                    pixels[p+2] = ((b_sum * mul_sum) >> shg_sum ) * pa;\r\n                } else {\r\n                    pixels[p] = pixels[p+1] = pixels[p+2] = 0;\r\n                }\r\n\r\n                r_sum -= r_out_sum;\r\n                g_sum -= g_out_sum;\r\n                b_sum -= b_out_sum;\r\n                a_sum -= a_out_sum;\r\n\r\n                r_out_sum -= stackIn.r;\r\n                g_out_sum -= stackIn.g;\r\n                b_out_sum -= stackIn.b;\r\n                a_out_sum -= stackIn.a;\r\n\r\n                p = ( x + (( ( p = y + radiusPlus1) < heightMinus1 ? p : heightMinus1 ) * width )) << 2;\r\n\r\n                r_sum += ( r_in_sum += ( stackIn.r = pixels[p]));\r\n                g_sum += ( g_in_sum += ( stackIn.g = pixels[p+1]));\r\n                b_sum += ( b_in_sum += ( stackIn.b = pixels[p+2]));\r\n                a_sum += ( a_in_sum += ( stackIn.a = pixels[p+3]));\r\n\r\n                stackIn = stackIn.next;\r\n\r\n                r_out_sum += ( pr = stackOut.r );\r\n                g_out_sum += ( pg = stackOut.g );\r\n                b_out_sum += ( pb = stackOut.b );\r\n                a_out_sum += ( pa = stackOut.a );\r\n\r\n                r_in_sum -= pr;\r\n                g_in_sum -= pg;\r\n                b_in_sum -= pb;\r\n                a_in_sum -= pa;\r\n\r\n                stackOut = stackOut.next;\r\n\r\n                yi += width;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Blur Filter\r\n     * @function\r\n     * @memberof Kinetic.Filters\r\n     * @param {Object} imageData\r\n     */\r\n    Kinetic.Filters.Blur = function(imageData) {\r\n        var radius = this.getFilterRadius() | 0;\r\n\r\n        if (radius > 0) {\r\n            filterGaussBlurRGBA(imageData, radius);\r\n        }\r\n    };\r\n\r\n    Kinetic.Factory.addFilterGetterSetter(Kinetic.Image, 'filterRadius', 0);\r\n\r\n})();\r\n;(function() {\r\n\r\n\tfunction pixelAt(idata, x, y) {\r\n\t\tvar idx = (y * idata.width + x) * 4;\r\n\t\tvar d = [];\r\n\t\td.push(idata.data[idx++], idata.data[idx++], idata.data[idx++], idata.data[idx++]);\r\n\t\treturn d;\r\n\t}\r\n\r\n\tfunction rgbDistance(p1, p2) {\r\n\t\treturn Math.sqrt(Math.pow(p1[0] - p2[0], 2) + Math.pow(p1[1] - p2[1], 2) + Math.pow(p1[2] - p2[2], 2));\r\n\t}\r\n\r\n\tfunction rgbMean(pTab) {\r\n\t\tvar m = [0, 0, 0];\r\n\r\n\t\tfor (var i = 0; i < pTab.length; i++) {\r\n\t\t\tm[0] += pTab[i][0];\r\n\t\t\tm[1] += pTab[i][1];\r\n\t\t\tm[2] += pTab[i][2];\r\n\t\t}\r\n\r\n\t\tm[0] /= pTab.length;\r\n\t\tm[1] /= pTab.length;\r\n\t\tm[2] /= pTab.length;\r\n\r\n\t\treturn m;\r\n\t}\r\n\r\n\tfunction backgroundMask(idata, threshold) {\r\n\t\tvar rgbv_no = pixelAt(idata, 0, 0);\r\n\t\tvar rgbv_ne = pixelAt(idata, idata.width - 1, 0);\r\n\t\tvar rgbv_so = pixelAt(idata, 0, idata.height - 1);\r\n\t\tvar rgbv_se = pixelAt(idata, idata.width - 1, idata.height - 1);\r\n\r\n\r\n\t\tvar thres = threshold || 10; \r\n\t\tif (rgbDistance(rgbv_no, rgbv_ne) < thres && rgbDistance(rgbv_ne, rgbv_se) < thres && rgbDistance(rgbv_se, rgbv_so) < thres && rgbDistance(rgbv_so, rgbv_no) < thres) {\r\n\r\n\t\t\t// Mean color\r\n\t\t\tvar mean = rgbMean([rgbv_ne, rgbv_no, rgbv_se, rgbv_so]);\r\n\r\n\t\t\t// Mask based on color distance\r\n\t\t\tvar mask = [];\r\n\t\t\tfor (var i = 0; i < idata.width * idata.height; i++) {\r\n\t\t\t\tvar d = rgbDistance(mean, [idata.data[i * 4], idata.data[i * 4 + 1], idata.data[i * 4 + 2]]);\r\n\t\t\t\tmask[i] = (d < thres) ? 0 : 255;\r\n\t\t\t}\r\n\r\n\t\t\treturn mask;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction applyMask(idata, mask) {\r\n\t\tfor (var i = 0; i < idata.width * idata.height; i++) {\r\n\t\t\tidata.data[4 * i + 3] = mask[i];\r\n\t\t}\r\n\t}\r\n\r\n\tfunction erodeMask(mask, sw, sh) {\r\n\r\n\t\tvar weights = [1, 1, 1, 1, 0, 1, 1, 1, 1];\r\n\t\tvar side = Math.round(Math.sqrt(weights.length));\r\n\t\tvar halfSide = Math.floor(side / 2);\r\n\r\n\t\tvar maskResult = [];\r\n\t\tfor (var y = 0; y < sh; y++) {\r\n\t\t\tfor (var x = 0; x < sw; x++) {\r\n\r\n\t\t\t\tvar so = y * sw + x;\r\n\t\t\t\tvar a = 0;\r\n\t\t\t\tfor (var cy = 0; cy < side; cy++) {\r\n\t\t\t\t\tfor (var cx = 0; cx < side; cx++) {\r\n\t\t\t\t\t\tvar scy = y + cy - halfSide;\r\n\t\t\t\t\t\tvar scx = x + cx - halfSide;\r\n\r\n\t\t\t\t\t\tif (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {\r\n\r\n\t\t\t\t\t\t\tvar srcOff = scy * sw + scx;\r\n\t\t\t\t\t\t\tvar wt = weights[cy * side + cx];\r\n\r\n\t\t\t\t\t\t\ta += mask[srcOff] * wt;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmaskResult[so] = (a === 255 * 8) ? 255 : 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn maskResult;\r\n\t}\r\n\r\n\tfunction dilateMask(mask, sw, sh) {\r\n\r\n\t\tvar weights = [1, 1, 1, 1, 1, 1, 1, 1, 1];\r\n\t\tvar side = Math.round(Math.sqrt(weights.length));\r\n\t\tvar halfSide = Math.floor(side / 2);\r\n\r\n\t\tvar maskResult = [];\r\n\t\tfor (var y = 0; y < sh; y++) {\r\n\t\t\tfor (var x = 0; x < sw; x++) {\r\n\r\n\t\t\t\tvar so = y * sw + x;\r\n\t\t\t\tvar a = 0;\r\n\t\t\t\tfor (var cy = 0; cy < side; cy++) {\r\n\t\t\t\t\tfor (var cx = 0; cx < side; cx++) {\r\n\t\t\t\t\t\tvar scy = y + cy - halfSide;\r\n\t\t\t\t\t\tvar scx = x + cx - halfSide;\r\n\r\n\t\t\t\t\t\tif (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {\r\n\r\n\t\t\t\t\t\t\tvar srcOff = scy * sw + scx;\r\n\t\t\t\t\t\t\tvar wt = weights[cy * side + cx];\r\n\r\n\t\t\t\t\t\t\ta += mask[srcOff] * wt;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmaskResult[so] = (a >= 255 * 4) ? 255 : 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn maskResult;\r\n\t}\r\n\r\n\tfunction smoothEdgeMask(mask, sw, sh) {\r\n\r\n\t\tvar weights = [1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9];\r\n\t\tvar side = Math.round(Math.sqrt(weights.length));\r\n\t\tvar halfSide = Math.floor(side / 2);\r\n\r\n\t\tvar maskResult = [];\r\n\t\tfor (var y = 0; y < sh; y++) {\r\n\t\t\tfor (var x = 0; x < sw; x++) {\r\n\r\n\t\t\t\tvar so = y * sw + x;\r\n\t\t\t\tvar a = 0;\r\n\t\t\t\tfor (var cy = 0; cy < side; cy++) {\r\n\t\t\t\t\tfor (var cx = 0; cx < side; cx++) {\r\n\t\t\t\t\t\tvar scy = y + cy - halfSide;\r\n\t\t\t\t\t\tvar scx = x + cx - halfSide;\r\n\r\n\t\t\t\t\t\tif (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {\r\n\r\n\t\t\t\t\t\t\tvar srcOff = scy * sw + scx;\r\n\t\t\t\t\t\t\tvar wt = weights[cy * side + cx];\r\n\r\n\t\t\t\t\t\t\ta += mask[srcOff] * wt;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmaskResult[so] = a;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn maskResult;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Mask Filter\r\n\t *\r\n\t * Only crop unicolor background images for instance\r\n\t *\r\n\t * @function\r\n\t * @memberof Kinetic.Filters\r\n\t * @param {Object} imageData\r\n\t */\r\n\tKinetic.Filters.Mask = function(idata) {\r\n\t\t// Detect pixels close to the background color\r\n\t\tvar threshold = this.getFilterThreshold(),\r\n                    mask = backgroundMask(idata, threshold);\r\n\t\tif (mask) {\r\n\t\t\t// Erode\r\n\t\t\tmask = erodeMask(mask, idata.width, idata.height);\r\n\r\n\t\t\t// Dilate\r\n\t\t\tmask = dilateMask(mask, idata.width, idata.height);\r\n\r\n\t\t\t// Gradient\r\n\t\t\tmask = smoothEdgeMask(mask, idata.width, idata.height);\r\n\r\n\t\t\t// Apply mask\r\n\t\t\tapplyMask(idata, mask);\r\n\t\t\t\r\n\t\t\t// todo : Update hit region function according to mask\r\n\t\t}\r\n\r\n\t\treturn idata;\r\n\t};\r\n\r\n\tKinetic.Factory.addFilterGetterSetter(Kinetic.Image, 'filterThreshold', 0);\r\n\r\n\t//threshold The RGB euclidian distance threshold (default : 10) \r\n\r\n})();\r\n;(function() {\r\n\r\n    var rgb_to_hsl = function(r,g,b){\r\n        // Input colors are in 0-255, calculations are between 0-1\r\n        r /= 255; g /= 255; b /= 255;\r\n\r\n        // http://en.wikipedia.org/wiki/HSL_and_HSV\r\n        // Convert to HSL\r\n        var max = Math.max(r,g,b),\r\n            min = Math.min(r,g,b),\r\n            chroma = max - min,\r\n            luminance = chroma / 2,\r\n            saturation = chroma / (1 - Math.abs(2*luminance-1)),\r\n            hue = 0;\r\n        \r\n        if( max == r ){ hue = ((g-b)/chroma) % 6; }else\r\n        if( max == g ){ hue =  (b-r)/chroma  + 2; }else\r\n        if( max == b ){ hue =  (r-g)/chroma  + 4; }\r\n\r\n        return [(hue*60+360) % 360, saturation, luminance];\r\n    };\r\n\r\n    var pixelShiftHue = function(r,g,b,deg){\r\n\r\n        // Input colors are in 0-255, calculations are between 0-1\r\n        r /= 255; g /= 255; b /= 255;\r\n\r\n        // http://en.wikipedia.org/wiki/HSL_and_HSV\r\n        // Convert to HSL\r\n        var max = Math.max(r,g,b),\r\n            min = Math.min(r,g,b),\r\n            chroma = max - min,\r\n            luminance = chroma / 2,\r\n            saturation = chroma / (1 - Math.abs(2*luminance-1)),\r\n            hue = 0;\r\n        \r\n        if( max == r ){ hue = ((g-b)/chroma) % 6; }else\r\n        if( max == g ){ hue =  (b-r)/chroma  + 2; }else\r\n        if( max == b ){ hue =  (r-g)/chroma  + 4; }\r\n        \r\n        hue *= 60;\r\n        hue %= 360;\r\n            \r\n        // Shift hue\r\n        hue += deg;\r\n        hue %= 360;\r\n        //hue /= 360;\r\n            \r\n        // hsl to rgb:\r\n        hue /= 60;\r\n        var rR = 0, rG = 0, rB = 0,\r\n            //chroma = saturation*(1 - Math.abs(2*luminance - 1)),\r\n            tmp = chroma * (1-Math.abs(hue % 2 - 1)),\r\n            m = luminance - chroma/2;\r\n            \r\n        if( 0 <= hue && hue < 1 ){ rR = chroma; rG = tmp; }else\r\n        if( 1 <= hue && hue < 2 ){ rG = chroma; rR = tmp; }else\r\n        if( 2 <= hue && hue < 3 ){ rG = chroma; rB = tmp; }else\r\n        if( 3 <= hue && hue < 4 ){ rB = chroma; rG = tmp; }else\r\n        if( 4 <= hue && hue < 5 ){ rB = chroma; rR = tmp; }else\r\n        if( 5 <= hue && hue < 6 ){ rR = chroma; rB = tmp; }\r\n            \r\n        rR += m; rG += m; rB += m;\r\n        rR = (255*rR);\r\n        rG = (255*rG);\r\n        rB = (255*rB);\r\n        \r\n        return [rR,rG,rB];\r\n    };\r\n\r\n    var shift_hue = function(imageData,deg){\r\n        var data = imageData.data,\r\n            pixel;\r\n        for(var i = 0; i < data.length; i += 4) {\r\n            pixel = pixelShiftHue(data[i+0],data[i+1],data[i+2],deg);\r\n            data[i+0] = pixel[0];\r\n            data[i+1] = pixel[1];\r\n            data[i+2] = pixel[2];\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Shift Hue Filter.\r\n     * @function\r\n     * @memberof Kinetic.Filters\r\n     * @param {Object} imageData\r\n     * @author ippo615\r\n     */\r\n    Kinetic.Filters.ShiftHue = function(imageData) {\r\n        shift_hue(imageData, this.getFilterHueShiftDeg() % 360 );\r\n    };\r\n\r\n    Kinetic.Factory.addFilterGetterSetter(Kinetic.Image, 'filterHueShiftDeg', 0);\r\n    /**\r\n     * get hue shift amount.  The shift amount is a number between 0 and 360.\r\n     * @name getFilterBrightness\r\n     * @method\r\n     * @memberof Kinetic.Image.prototype\r\n     */\r\n\r\n    /**\r\n     * set hue shift amount\r\n     * @name setFilterBrightness\r\n     * @method\r\n     * @memberof Kinetic.Image.prototype\r\n     */\r\n\r\n\r\n    /**\r\n     * Colorize Filter.\r\n     *  colorizes the image so that it is just varying shades of the specified color\r\n     * @function\r\n     * @memberof Kinetic.Filters\r\n     * @param {Object} imageData\r\n     * @author ippo615\r\n     */\r\n    Kinetic.Filters.Colorize = function(imageData) {\r\n        var data = imageData.data;\r\n\r\n        // First we'll colorize it red, then shift by the hue specified\r\n        var color = this.getFilterColorizeColor(),\r\n            hsl = rgb_to_hsl(color[0],color[1],color[2]),\r\n            hue = hsl[0];\r\n\r\n        // Color it red, by removing green and blue\r\n        for(var i = 0; i < data.length; i += 4) {\r\n            data[i + 1] = 0;\r\n            data[i + 2] = 0;\r\n        }\r\n\r\n        // Shift by the hue\r\n        shift_hue(imageData,hue);\r\n    };\r\n\r\n    Kinetic.Factory.addFilterGetterSetter(Kinetic.Image, 'filterColorizeColor', [255,0,0] );\r\n    /**\r\n     * Gets the colorizing color.\r\n     * @name getFilterColorizeColor\r\n     * @method\r\n     * @memberof Kinetic.Image.prototype\r\n     */\r\n\r\n    /**\r\n     * Gets the colorizing color. Should be an array [r,g,b] ie [255,0,128].\r\n     *  note that white [255,255,255] black [0,0,0] and greys [r,r,r] get treated as red.\r\n     * @name setFilterColorizeColor\r\n     * @method\r\n     * @memberof Kinetic.Image.prototype\r\n     */\r\n\r\n})();\r\n\r\n;(function() {\r\n\r\n    var convolve_internal = function(imageData,matrix){\r\n        // Input data\r\n        var pixels = imageData.data,\r\n            imageSizeX = imageData.width,\r\n            imageSizeY = imageData.height,\r\n            nPixels = imageSizeX*imageSizeY,\r\n            pixel;\r\n\r\n        // An array for storing the result\r\n        var result = [];\r\n        result.length = imageSizeX*imageSizeY*4;\r\n\r\n        // Determine the size and demsionality of the matrix\r\n        // Note: it should be square and odd (3,5,7,9 etc...)\r\n        var matrixSizeX = matrix.length,\r\n            matrixSizeY = matrix[0].length,\r\n            matrixMidX = Math.floor(matrix.length/2),\r\n            matrixMidY = Math.floor(matrix[0].length/2);\r\n\r\n        // Accumlators and positions for iterating\r\n        var r,g,b,a, x,y, px,py, pos, i,j;\r\n\r\n        // Handle the 2D matrix\r\n        for( y=0; y<imageSizeY; y+=1){\r\n            for( x=0; x<imageSizeX; x+=1){\r\n\r\n                // Perform the convolution\r\n                r = 0; g = 0; b = 0; a = 0;\r\n                for( i=0; i<matrixSizeX; i+=1){\r\n                    for( j=0; j<matrixSizeY; j+=1){\r\n\r\n                        // tile the image to account for pixels past the\r\n                        // edge (and make sure they are positive)\r\n                        px = (x+i-matrixMidX) % imageSizeX;\r\n                        px = (px>0)?px:-px;\r\n                        py = (y+i-matrixMidY) % imageSizeY;\r\n                        py = (py>0)?py:-py;\r\n\r\n                        // get the pixel and convolve\r\n                        pos = (py*imageSizeX + px)*4;\r\n                        r += matrix[j][i]*pixels[pos+0];\r\n                        g += matrix[j][i]*pixels[pos+1];\r\n                        b += matrix[j][i]*pixels[pos+2];\r\n                        //a += matrix[j][i]*pixels[pos+3];\r\n                    }\r\n                }\r\n\r\n                // Store the result\r\n                pos = (y*imageSizeX+x)*4;\r\n                result[pos+0] = r;\r\n                result[pos+1] = g;\r\n                result[pos+2] = b;\r\n                //result[pos+3] = a;\r\n            }\r\n        }\r\n\r\n        // copy the result to the original canvas\r\n        var lastPos = nPixels*4;\r\n        for( pos=0; pos<lastPos; pos+=4 ){\r\n             pixels[pos+0] = result[pos+0];\r\n             pixels[pos+1] = result[pos+1];\r\n             pixels[pos+2] = result[pos+2];\r\n             //pixels[pos+3] = result[pos+3];\r\n        }\r\n    };\r\n\r\n    // Definition of a gaussian function\r\n    var gaussian = function(x,mean,sigma){\r\n        var dx = x - mean;\r\n        return Math.pow(Math.E, -dx*dx / (2*sigma*sigma));\r\n    };\r\n\r\n    var make_blur_kernel = function( size, scale, sigma ){\r\n\r\n        // make sure size is odd:\r\n        if( size % 2 === 0 ){ size += 1; }\r\n\r\n        // Generate the kernel, we can just multiply 2 single dimensional\r\n        // gaussians to get a 2D guassian\r\n        var kernel = [], i,j, row;\r\n        for( i=0; i<size; i+=1 ){\r\n            row = [];\r\n            for( j=0; j<size; j+=1 ){\r\n                row.push( scale * gaussian(i,size/2,sigma) * gaussian(j,size/2,sigma) );\r\n            }\r\n            kernel.push(row);\r\n        }\r\n\r\n        return kernel;\r\n    };\r\n\r\n    var make_edge_detect_kernel = function( size, scale, sigma ){\r\n\r\n        // make sure size is odd:\r\n        if( size % 2 === 0 ){ size += 1; }\r\n\r\n        // Create a difference-of-gaussians kernel (by subtracting gaussians)\r\n        // 1.6 is a good sigma ratio to approximate a laplacian of gaussian \r\n        var kernel = [], i,j, row, g;\r\n        for( i=0; i<size; i+=1 ){\r\n            row = [];\r\n            for( j=0; j<size; j+=1 ){\r\n                g1 = gaussian(i,size/2,sigma) * gaussian(j,size/2,sigma);\r\n                g2 = gaussian(i,size/2,sigma*1.6) * gaussian(j,size/2,sigma*1.6);\r\n                row.push( scale * (g2-g1) );\r\n            }\r\n            kernel.push(row);\r\n        }\r\n\r\n        return kernel;   \r\n    };\r\n\r\n    var make_soft_blur_kernel = function( size, percent ){\r\n        // A soft blur is achieve by blurring the image then\r\n        // merging the blured and unblurred image (ie 60/40).\r\n        // Instead of that we've scaling the blur kernel (ie 60)\r\n        // and adding the identity scaled (ie 40) to the kernel\r\n        var kernel = make_blur_kernel( size, percent, 1 ),\r\n            mid = Math.floor(size/2);\r\n        kernel[mid][mid] += 1-percent;\r\n        return kernel;\r\n    };\r\n\r\n    var make_unsharp_kernel = function( size, percent ){\r\n        // An 'unsharp mask' is made by blurring the inverted image\r\n        // and combining it with the original (like a soft blur but\r\n        // with the blur negated). We can achieve this by negating \r\n        // blur kernel, and adding twice the identity to that kernel.\r\n        var kernel = make_blur_kernel( size, -percent, 1 ),\r\n            mid = Math.floor(size/2);\r\n        kernel[mid][mid] += 1+percent;\r\n        return kernel;\r\n    };\r\n\r\n    Kinetic.Factory.addFilterGetterSetter(Kinetic.Image, 'filterAmount', 50);\r\n    /**\r\n     * get the current filter amount\r\n     * @name getFilterAmount\r\n     * @method\r\n     * @memberof Kinetic.Image.prototype\r\n     */\r\n    /**\r\n     * set the current filter amount 0 = no filter, 100 = max filter\r\n     * @name setFilterAmount\r\n     * @method\r\n     * @memberof Kinetic.Image.prototype\r\n     */\r\n\r\n\r\n    /**\r\n     * Unsharp Mask Filter.\r\n     * @function\r\n     * @memberof Kinetic.Filters\r\n     * @param {Object} imageData\r\n     * @author ippo615\r\n     */\r\n    Kinetic.Filters.UnsharpMask = function(imageData) {\r\n        convolve_internal(imageData,\r\n            make_unsharp_kernel(5,this.getFilterAmount()/100)\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Soft Blur Filter.\r\n     * @function\r\n     * @memberof Kinetic.Filters\r\n     * @param {Object} imageData\r\n     * @author ippo615\r\n     */\r\n    Kinetic.Filters.SoftBlur = function(imageData) {\r\n        convolve_internal(imageData,\r\n            make_soft_blur_kernel(5,this.getFilterAmount()/100)\r\n        );\r\n    };\r\n\r\n\r\n    /**\r\n     * Edge Filter.\r\n     *  Makes edges more noticable.\r\n     * @function\r\n     * @memberof Kinetic.Filters\r\n     * @param {Object} imageData\r\n     * @author ippo615\r\n     */\r\n    Kinetic.Filters.Edge = function(imageData) {\r\n        var s = this.getFilterAmount()/100;\r\n        if( s === 0 ){ return; }\r\n        convolve_internal(imageData,[\r\n            [ 0,  -1*s, 0],\r\n            [-1*s,(1-s)+4*s,-1*s],\r\n            [ 0,  -1*s, 0]\r\n        ]);\r\n    };\r\n\r\n    /**\r\n     * Emboss Filter.\r\n     *  Makes the image apear to have some depth.\r\n     * @function\r\n     * @memberof Kinetic.Filters\r\n     * @param {Object} imageData\r\n     * @author ippo615\r\n     */\r\n    Kinetic.Filters.Emboss = function(imageData) {\r\n        var s = this.getFilterAmount()/100;\r\n        if( s === 0 ){ return; }\r\n        convolve_internal(imageData,[\r\n            [-1*s,-0.5*s, 0],\r\n            [-0.5*s,1+0.5*s, 0.5*s],\r\n            [ 0,    0.5*s, 1*s]\r\n        ]);\r\n    };\r\n\r\n})();\r\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/factory.js":{"id":14,"canonicalName":"src/factory.js","code":"(function () {\n    var Canvas, ComponentFactory, Components, DefaultComponentFactory, Html, Layout, Psy, _, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    _ = require('16', module);\n    Canvas = require('11', module).Canvas;\n    Html = require('12', module).Html;\n    Components = require('13', module);\n    Psy = require('3', module);\n    Layout = require('9', module);\n    ComponentFactory = function () {\n        function ComponentFactory(context) {\n            this.context = context;\n        }\n        ComponentFactory.prototype.buildStimulus = function (spec) {\n            var params, stimType;\n            stimType = _.keys(spec)[0];\n            params = _.values(spec)[0];\n            return this.makeStimulus(stimType, params);\n        };\n        ComponentFactory.prototype.buildResponse = function (spec) {\n            var params, responseType;\n            responseType = _.keys(spec)[0];\n            params = _.values(spec)[0];\n            return this.makeResponse(responseType, params);\n        };\n        ComponentFactory.prototype.buildEvent = function (spec) {\n            var response, responseSpec, stim, stimSpec;\n            if (spec.Next == null) {\n                console.log('error building event with spec: ', spec);\n                throw new Error('Event specification does not contain \\'Next\\' element');\n            }\n            stimSpec = _.omit(spec, 'Next');\n            responseSpec = _.pick(spec, 'Next');\n            stim = this.buildStimulus(stimSpec);\n            response = this.buildResponse(responseSpec.Next);\n            return this.makeEvent(stim, response);\n        };\n        ComponentFactory.prototype.make = function (name, params, registry) {\n            throw new Error('unimplemented', name, params, registry);\n        };\n        ComponentFactory.prototype.makeStimulus = function (name, params) {\n            throw new Error('unimplemented', name, params);\n        };\n        ComponentFactory.prototype.makeResponse = function (name, params) {\n            throw new Error('unimplemented', name, params);\n        };\n        ComponentFactory.prototype.makeEvent = function (stim, response) {\n            throw new Error('unimplemented', stim, response);\n        };\n        ComponentFactory.prototype.makeLayout = function (name, params, context) {\n            throw new Error('unimplemented', name, params, context);\n        };\n        return ComponentFactory;\n    }();\n    exports.ComponentFactory = ComponentFactory;\n    DefaultComponentFactory = function (_super) {\n        __extends(DefaultComponentFactory, _super);\n        function DefaultComponentFactory() {\n            this.registry = _.merge(Components, Canvas, Html);\n        }\n        DefaultComponentFactory.prototype.make = function (name, params, registry) {\n            var callee, layoutName, layoutParams, names, props, resps, stims, _i, _j, _k, _l, _ref, _ref1, _ref2, _ref3, _results, _results1, _results2, _results3;\n            callee = arguments.callee;\n            console.log('making', name);\n            switch (name) {\n            case 'Group':\n                console.log('building group');\n                names = _.map(params.stims, function (stim) {\n                    return _.keys(stim)[0];\n                });\n                props = _.map(params.stims, function (stim) {\n                    return _.values(stim)[0];\n                });\n                stims = _.map(function () {\n                    _results = [];\n                    for (var _i = 0, _ref = names.length; 0 <= _ref ? _i < _ref : _i > _ref; 0 <= _ref ? _i++ : _i--) {\n                        _results.push(_i);\n                    }\n                    return _results;\n                }.apply(this), function (_this) {\n                    return function (i) {\n                        return callee(names[i], props[i], _this.registry);\n                    };\n                }(this));\n                if (params.layout != null) {\n                    layoutName = _.keys(params.layout)[0];\n                    layoutParams = _.values(params.layout)[0];\n                    return new Components.Group(stims, this.makeLayout(layoutName, layoutParams, context));\n                } else {\n                    return new Components.Group(stims);\n                }\n                break;\n            case 'Grid':\n                names = _.map(params.stims, function (stim) {\n                    return _.keys(stim)[0];\n                });\n                props = _.map(params.stims, function (stim) {\n                    return _.values(stim)[0];\n                });\n                stims = _.map(function () {\n                    _results1 = [];\n                    for (var _j = 0, _ref1 = names.length; 0 <= _ref1 ? _j < _ref1 : _j > _ref1; 0 <= _ref1 ? _j++ : _j--) {\n                        _results1.push(_j);\n                    }\n                    return _results1;\n                }.apply(this), function (_this) {\n                    return function (i) {\n                        return callee(names[i], props[i], _this.registry);\n                    };\n                }(this));\n                return new Components.Grid(stims, params.rows || 3, params.columns || 3, params.bounds || null);\n            case 'Background':\n                console.log('building background', params);\n                names = _.keys(params);\n                props = _.values(params);\n                console.log('names', names);\n                console.log('props', props);\n                stims = _.map(function () {\n                    _results2 = [];\n                    for (var _k = 0, _ref2 = names.length; 0 <= _ref2 ? _k < _ref2 : _k > _ref2; 0 <= _ref2 ? _k++ : _k--) {\n                        _results2.push(_k);\n                    }\n                    return _results2;\n                }.apply(this), function (_this) {\n                    return function (i) {\n                        return callee(names[i], props[i], _this.registry);\n                    };\n                }(this));\n                return new Canvas.Background(stims);\n            case 'First':\n                names = _.keys(params);\n                props = _.values(params);\n                resps = _.map(function () {\n                    _results3 = [];\n                    for (var _l = 0, _ref3 = names.length; 0 <= _ref3 ? _l < _ref3 : _l > _ref3; 0 <= _ref3 ? _l++ : _l--) {\n                        _results3.push(_l);\n                    }\n                    return _results3;\n                }.apply(this), function (_this) {\n                    return function (i) {\n                        return callee(names[i], props[i], _this.registry);\n                    };\n                }(this));\n                return new Components.First(resps);\n            default:\n                if (registry[name] == null) {\n                    console.log('registry is', registry);\n                    throw new Error('DefaultComponentFactory:make cannot find component in registry named: ', name);\n                }\n                return new registry[name](params);\n            }\n        };\n        DefaultComponentFactory.prototype.makeStimulus = function (name, params) {\n            return this.make(name, params, this.registry);\n        };\n        DefaultComponentFactory.prototype.makeResponse = function (name, params) {\n            return this.make(name, params, this.registry);\n        };\n        DefaultComponentFactory.prototype.makeEvent = function (stim, response) {\n            return new Psy.Event(stim, response);\n        };\n        DefaultComponentFactory.prototype.makeLayout = function (name, params, context) {\n            switch (name) {\n            case 'Grid':\n                return new Layout.GridLayout(params[0], params[1], {\n                    x: 0,\n                    y: 0,\n                    width: context.width(),\n                    height: context.height()\n                });\n            default:\n                return console.log('unrecognized layout', name);\n            }\n        };\n        return DefaultComponentFactory;\n    }(ComponentFactory);\n    exports.DefaultComponentFactory = DefaultComponentFactory;\n    exports.componentFactory = new DefaultComponentFactory();\n    console.log('exports.DefaultComponentFactory', DefaultComponentFactory);\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/factory.js\"],\"names\":[\"Canvas\",\"ComponentFactory\",\"Components\",\"DefaultComponentFactory\",\"Html\",\"Layout\",\"Psy\",\"_\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"context\",\"buildStimulus\",\"spec\",\"params\",\"stimType\",\"keys\",\"values\",\"makeStimulus\",\"buildResponse\",\"responseType\",\"makeResponse\",\"buildEvent\",\"response\",\"responseSpec\",\"stim\",\"stimSpec\",\"Next\",\"console\",\"log\",\"Error\",\"omit\",\"pick\",\"makeEvent\",\"make\",\"name\",\"registry\",\"makeLayout\",\"exports\",\"_super\",\"merge\",\"callee\",\"layoutName\",\"layoutParams\",\"names\",\"props\",\"resps\",\"stims\",\"_i\",\"_j\",\"_k\",\"_l\",\"_ref\",\"_ref1\",\"_ref2\",\"_ref3\",\"_results\",\"_results1\",\"_results2\",\"_results3\",\"arguments\",\"map\",\"length\",\"push\",\"apply\",\"_this\",\"i\",\"layout\",\"Group\",\"Grid\",\"rows\",\"columns\",\"bounds\",\"Background\",\"First\",\"Event\",\"GridLayout\",\"x\",\"y\",\"width\",\"height\",\"componentFactory\"],\"mappings\":\"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\"}","lineCount":191,"mtime":1392868424000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/canvas/canvas.js","canonicalName":"src/components/canvas/canvas.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/html/html.js","canonicalName":"src/components/html/html.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/components.js","canonicalName":"src/components/components.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/psycloud.js","canonicalName":"src/psycloud.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/layout.js","canonicalName":"src/layout.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.7.1\n(function() {\n  var Canvas, ComponentFactory, Components, DefaultComponentFactory, Html, Layout, Psy, _,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  _ = require('lodash');\n\n  Canvas = require(\"./components/canvas/canvas\").Canvas;\n\n  Html = require(\"./components/html/html\").Html;\n\n  Components = require(\"./components/components\");\n\n  Psy = require(\"./psycloud\");\n\n  Layout = require(\"./layout\");\n\n  ComponentFactory = (function() {\n    function ComponentFactory(context) {\n      this.context = context;\n    }\n\n    ComponentFactory.prototype.buildStimulus = function(spec) {\n      var params, stimType;\n      stimType = _.keys(spec)[0];\n      params = _.values(spec)[0];\n      return this.makeStimulus(stimType, params);\n    };\n\n    ComponentFactory.prototype.buildResponse = function(spec) {\n      var params, responseType;\n      responseType = _.keys(spec)[0];\n      params = _.values(spec)[0];\n      return this.makeResponse(responseType, params);\n    };\n\n    ComponentFactory.prototype.buildEvent = function(spec) {\n      var response, responseSpec, stim, stimSpec;\n      if (spec.Next == null) {\n        console.log(\"error building event with spec: \", spec);\n        throw new Error(\"Event specification does not contain 'Next' element\");\n      }\n      stimSpec = _.omit(spec, \"Next\");\n      responseSpec = _.pick(spec, \"Next\");\n      stim = this.buildStimulus(stimSpec);\n      response = this.buildResponse(responseSpec.Next);\n      return this.makeEvent(stim, response);\n    };\n\n    ComponentFactory.prototype.make = function(name, params, registry) {\n      throw new Error(\"unimplemented\", name, params, registry);\n    };\n\n    ComponentFactory.prototype.makeStimulus = function(name, params) {\n      throw new Error(\"unimplemented\", name, params);\n    };\n\n    ComponentFactory.prototype.makeResponse = function(name, params) {\n      throw new Error(\"unimplemented\", name, params);\n    };\n\n    ComponentFactory.prototype.makeEvent = function(stim, response) {\n      throw new Error(\"unimplemented\", stim, response);\n    };\n\n    ComponentFactory.prototype.makeLayout = function(name, params, context) {\n      throw new Error(\"unimplemented\", name, params, context);\n    };\n\n    return ComponentFactory;\n\n  })();\n\n  exports.ComponentFactory = ComponentFactory;\n\n  DefaultComponentFactory = (function(_super) {\n    __extends(DefaultComponentFactory, _super);\n\n    function DefaultComponentFactory() {\n      this.registry = _.merge(Components, Canvas, Html);\n    }\n\n    DefaultComponentFactory.prototype.make = function(name, params, registry) {\n      var callee, layoutName, layoutParams, names, props, resps, stims, _i, _j, _k, _l, _ref, _ref1, _ref2, _ref3, _results, _results1, _results2, _results3;\n      callee = arguments.callee;\n      console.log(\"making\", name);\n      switch (name) {\n        case \"Group\":\n          console.log(\"building group\");\n          names = _.map(params.stims, function(stim) {\n            return _.keys(stim)[0];\n          });\n          props = _.map(params.stims, function(stim) {\n            return _.values(stim)[0];\n          });\n          stims = _.map((function() {\n            _results = [];\n            for (var _i = 0, _ref = names.length; 0 <= _ref ? _i < _ref : _i > _ref; 0 <= _ref ? _i++ : _i--){ _results.push(_i); }\n            return _results;\n          }).apply(this), (function(_this) {\n            return function(i) {\n              return callee(names[i], props[i], _this.registry);\n            };\n          })(this));\n          if (params.layout != null) {\n            layoutName = _.keys(params.layout)[0];\n            layoutParams = _.values(params.layout)[0];\n            return new Components.Group(stims, this.makeLayout(layoutName, layoutParams, context));\n          } else {\n            return new Components.Group(stims);\n          }\n          break;\n        case \"Grid\":\n          names = _.map(params.stims, function(stim) {\n            return _.keys(stim)[0];\n          });\n          props = _.map(params.stims, function(stim) {\n            return _.values(stim)[0];\n          });\n          stims = _.map((function() {\n            _results1 = [];\n            for (var _j = 0, _ref1 = names.length; 0 <= _ref1 ? _j < _ref1 : _j > _ref1; 0 <= _ref1 ? _j++ : _j--){ _results1.push(_j); }\n            return _results1;\n          }).apply(this), (function(_this) {\n            return function(i) {\n              return callee(names[i], props[i], _this.registry);\n            };\n          })(this));\n          return new Components.Grid(stims, params.rows || 3, params.columns || 3, params.bounds || null);\n        case \"Background\":\n          console.log(\"building background\", params);\n          names = _.keys(params);\n          props = _.values(params);\n          console.log(\"names\", names);\n          console.log(\"props\", props);\n          stims = _.map((function() {\n            _results2 = [];\n            for (var _k = 0, _ref2 = names.length; 0 <= _ref2 ? _k < _ref2 : _k > _ref2; 0 <= _ref2 ? _k++ : _k--){ _results2.push(_k); }\n            return _results2;\n          }).apply(this), (function(_this) {\n            return function(i) {\n              return callee(names[i], props[i], _this.registry);\n            };\n          })(this));\n          return new Canvas.Background(stims);\n        case \"First\":\n          names = _.keys(params);\n          props = _.values(params);\n          resps = _.map((function() {\n            _results3 = [];\n            for (var _l = 0, _ref3 = names.length; 0 <= _ref3 ? _l < _ref3 : _l > _ref3; 0 <= _ref3 ? _l++ : _l--){ _results3.push(_l); }\n            return _results3;\n          }).apply(this), (function(_this) {\n            return function(i) {\n              return callee(names[i], props[i], _this.registry);\n            };\n          })(this));\n          return new Components.First(resps);\n        default:\n          if (registry[name] == null) {\n            console.log(\"registry is\", registry);\n            throw new Error(\"DefaultComponentFactory:make cannot find component in registry named: \", name);\n          }\n          return new registry[name](params);\n      }\n    };\n\n    DefaultComponentFactory.prototype.makeStimulus = function(name, params) {\n      return this.make(name, params, this.registry);\n    };\n\n    DefaultComponentFactory.prototype.makeResponse = function(name, params) {\n      return this.make(name, params, this.registry);\n    };\n\n    DefaultComponentFactory.prototype.makeEvent = function(stim, response) {\n      return new Psy.Event(stim, response);\n    };\n\n    DefaultComponentFactory.prototype.makeLayout = function(name, params, context) {\n      switch (name) {\n        case \"Grid\":\n          return new Layout.GridLayout(params[0], params[1], {\n            x: 0,\n            y: 0,\n            width: context.width(),\n            height: context.height()\n          });\n        default:\n          return console.log(\"unrecognized layout\", name);\n      }\n    };\n\n    return DefaultComponentFactory;\n\n  })(ComponentFactory);\n\n  exports.DefaultComponentFactory = DefaultComponentFactory;\n\n  exports.componentFactory = new DefaultComponentFactory();\n\n  console.log(\"exports.DefaultComponentFactory\", DefaultComponentFactory);\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/layout.js":{"id":9,"canonicalName":"src/layout.js","code":"(function () {\n    var AbsoluteLayout, GridLayout, Layout, computeGridCells, convertPercentageToFraction, convertToCoordinate, isPercentage, isPositionLabel, positionToCoord, toPixels, _, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    _ = require('16', module);\n    isPercentage = function (perc) {\n        return _.isString(perc) && perc.slice(-1) === '%';\n    };\n    isPositionLabel = function (pos) {\n        return _.contains([\n            'center',\n            'center-left',\n            'center-right',\n            'top-left',\n            'top-right',\n            'top-center',\n            'bottom-left',\n            'bottom-right',\n            'bottom-center',\n            'left-center',\n            'right-center',\n            'left-top',\n            'right-top',\n            'center-top',\n            'left-bottom',\n            'right-bottom',\n            'center-bottom'\n        ], pos);\n    };\n    positionToCoord = function (pos, offx, offy, width, height, xy) {\n        switch (pos) {\n        case 'center':\n            return [\n                offx + width * 0.5,\n                offy + height * 0.5\n            ];\n        case 'center-left' || 'left-center':\n            return [\n                offx + width / 6,\n                offy + height * 0.5\n            ];\n        case 'center-right' || 'right-center':\n            return [\n                offx + width * 5 / 6,\n                offy + height * 0.5\n            ];\n        case 'top-left' || 'left-top':\n            return [\n                offx + width / 6,\n                offy + height / 6\n            ];\n        case 'top-right' || 'right-top':\n            return [\n                offx + width * 5 / 6,\n                offy + height / 6\n            ];\n        case 'top-center' || 'center-top':\n            return [\n                offx + width * 0.5,\n                offy + height / 6\n            ];\n        case 'bottom-left' || 'left-bottom':\n            return [\n                offx + width / 6,\n                offy + height * 5 / 6\n            ];\n        case 'bottom-right' || 'right-bottom':\n            return [\n                offx + width * 5 / 6,\n                offy + height * 5 / 6\n            ];\n        case 'bottom-center' || 'center-bottom':\n            return [\n                offx + width * 0.5,\n                offy + height * 5 / 6\n            ];\n        default:\n            return xy;\n        }\n    };\n    toPixels = function (arg, dim) {\n        if (_.isNumber(arg)) {\n            return arg;\n        } else if (isPercentage(arg)) {\n            return convertPercentageToFraction(arg, dim);\n        } else {\n            throw new Error('toPixels: argument must either be a Number or a String-based Percentage value: ', arg);\n        }\n    };\n    convertPercentageToFraction = function (perc, dim) {\n        var frac;\n        frac = parseFloat(perc) / 100;\n        frac = Math.min(1, frac);\n        frac = Math.max(0, frac);\n        return frac * dim;\n    };\n    convertToCoordinate = function (val, d) {\n        var ret;\n        if (isPercentage(val)) {\n            return val = convertPercentageToFraction(val, d);\n        } else if (isPositionLabel(val)) {\n            ret = positionToCoord(val, 0, 0, d[0], d[1], [\n                0,\n                0\n            ]);\n            return ret;\n        } else {\n            return Math.min(val, d);\n        }\n    };\n    computeGridCells = function (rows, cols, bounds) {\n        var col, row, _i, _results;\n        _results = [];\n        for (row = _i = 0; 0 <= rows ? _i < rows : _i > rows; row = 0 <= rows ? ++_i : --_i) {\n            _results.push(function () {\n                var _j, _results1;\n                _results1 = [];\n                for (col = _j = 0; 0 <= cols ? _j < cols : _j > cols; col = 0 <= cols ? ++_j : --_j) {\n                    _results1.push({\n                        x: bounds.x + bounds.width / cols * col,\n                        y: bounds.y + bounds.height / rows * row,\n                        width: bounds.width / cols,\n                        height: bounds.height / rows\n                    });\n                }\n                return _results1;\n            }());\n        }\n        return _results;\n    };\n    exports.Layout = Layout = function () {\n        function Layout() {\n        }\n        Layout.prototype.computePosition = function (dim, constraints) {\n            throw new Error('unimplimented error');\n        };\n        Layout.prototype.convertToCoordinate = function (val, d) {\n            var ret;\n            if (isPercentage(val)) {\n                return val = convertPercentageToFraction(val, d);\n            } else if (isPositionLabel(val)) {\n                ret = positionToCoord(val, 0, 0, d[0], d[1], [\n                    0,\n                    0\n                ]);\n                return ret;\n            } else {\n                return Math.min(val, d);\n            }\n        };\n        return Layout;\n    }();\n    exports.AbsoluteLayout = AbsoluteLayout = function (_super) {\n        __extends(AbsoluteLayout, _super);\n        function AbsoluteLayout() {\n            return AbsoluteLayout.__super__.constructor.apply(this, arguments);\n        }\n        AbsoluteLayout.prototype.computePosition = function (dim, constraints) {\n            var x, y;\n            if (_.isArray(constraints)) {\n                x = convertToCoordinate(constraints[0], dim[0]);\n                y = convertToCoordinate(constraints[1], dim[1]);\n                return [\n                    x,\n                    y\n                ];\n            } else {\n                return convertToCoordinate(constraints, dim);\n            }\n        };\n        return AbsoluteLayout;\n    }(exports.Layout);\n    exports.GridLayout = GridLayout = function (_super) {\n        __extends(GridLayout, _super);\n        function GridLayout(rows, cols, bounds) {\n            this.rows = rows;\n            this.cols = cols;\n            this.bounds = bounds;\n            this.ncells = this.rows * this.cols;\n            this.cells = this.computeCells();\n        }\n        GridLayout.prototype.computeCells = function () {\n            return computeGridCells(this.rows, this.cols, this.bounds);\n        };\n        GridLayout.prototype.computePosition = function (dim, constraints) {\n            var cell;\n            if (constraints[0] > this.rows - 1) {\n                throw new Error('GridLayout.computePosition: illegal row position ' + constraints[0] + ' for grid with dimensions (' + this.rows + ', ' + this.cols + ')');\n            }\n            if (constraints[1] > this.cols - 1) {\n                throw new Error('GridLayout.computePosition: illegal column position ' + constraints[0] + ' for grid with dimensions (' + this.rows + ', ' + this.cols + ')');\n            }\n            cell = this.cells[constraints[0]][constraints[1]];\n            return [\n                cell.x + cell.width / 2,\n                cell.y + cell.height / 2\n            ];\n        };\n        return GridLayout;\n    }(exports.Layout);\n    exports.positionToCoord = positionToCoord;\n    exports.toPixels = toPixels;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/layout.js\"],\"names\":[\"AbsoluteLayout\",\"GridLayout\",\"Layout\",\"computeGridCells\",\"convertPercentageToFraction\",\"convertToCoordinate\",\"isPercentage\",\"isPositionLabel\",\"positionToCoord\",\"toPixels\",\"_\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"perc\",\"isString\",\"slice\",\"pos\",\"contains\",\"offx\",\"offy\",\"width\",\"height\",\"xy\",\"arg\",\"dim\",\"isNumber\",\"Error\",\"frac\",\"parseFloat\",\"Math\",\"min\",\"max\",\"val\",\"d\",\"ret\",\"rows\",\"cols\",\"bounds\",\"col\",\"row\",\"_i\",\"_results\",\"push\",\"_j\",\"_results1\",\"x\",\"y\",\"exports\",\"computePosition\",\"constraints\",\"_super\",\"apply\",\"arguments\",\"isArray\",\"ncells\",\"cells\",\"computeCells\",\"cell\"],\"mappings\":\"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\"}","lineCount":213,"mtime":1393077686000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.7.1\n(function() {\n  var AbsoluteLayout, GridLayout, Layout, computeGridCells, convertPercentageToFraction, convertToCoordinate, isPercentage, isPositionLabel, positionToCoord, toPixels, _,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  _ = require('lodash');\n\n  isPercentage = function(perc) {\n    return _.isString(perc) && perc.slice(-1) === \"%\";\n  };\n\n  isPositionLabel = function(pos) {\n    return _.contains([\"center\", \"center-left\", \"center-right\", \"top-left\", \"top-right\", \"top-center\", \"bottom-left\", \"bottom-right\", \"bottom-center\", \"left-center\", \"right-center\", \"left-top\", \"right-top\", \"center-top\", \"left-bottom\", \"right-bottom\", \"center-bottom\"], pos);\n  };\n\n  positionToCoord = function(pos, offx, offy, width, height, xy) {\n    switch (pos) {\n      case \"center\":\n        return [offx + width * .5, offy + height * .5];\n      case \"center-left\" || \"left-center\":\n        return [offx + width / 6, offy + height * .5];\n      case \"center-right\" || \"right-center\":\n        return [offx + width * 5 / 6, offy + height * .5];\n      case \"top-left\" || \"left-top\":\n        return [offx + width / 6, offy + height / 6];\n      case \"top-right\" || \"right-top\":\n        return [offx + width * 5 / 6, offy + height / 6];\n      case \"top-center\" || \"center-top\":\n        return [offx + width * .5, offy + height / 6];\n      case \"bottom-left\" || \"left-bottom\":\n        return [offx + width / 6, offy + height * 5 / 6];\n      case \"bottom-right\" || \"right-bottom\":\n        return [offx + width * 5 / 6, offy + height * 5 / 6];\n      case \"bottom-center\" || \"center-bottom\":\n        return [offx + width * .5, offy + height * 5 / 6];\n      default:\n        return xy;\n    }\n  };\n\n  toPixels = function(arg, dim) {\n    if (_.isNumber(arg)) {\n      return arg;\n    } else if (isPercentage(arg)) {\n      return convertPercentageToFraction(arg, dim);\n    } else {\n      throw new Error(\"toPixels: argument must either be a Number or a String-based Percentage value: \", arg);\n    }\n  };\n\n  convertPercentageToFraction = function(perc, dim) {\n    var frac;\n    frac = parseFloat(perc) / 100;\n    frac = Math.min(1, frac);\n    frac = Math.max(0, frac);\n    return frac * dim;\n  };\n\n  convertToCoordinate = function(val, d) {\n    var ret;\n    if (isPercentage(val)) {\n      return val = convertPercentageToFraction(val, d);\n    } else if (isPositionLabel(val)) {\n      ret = positionToCoord(val, 0, 0, d[0], d[1], [0, 0]);\n      return ret;\n    } else {\n      return Math.min(val, d);\n    }\n  };\n\n  computeGridCells = function(rows, cols, bounds) {\n    var col, row, _i, _results;\n    _results = [];\n    for (row = _i = 0; 0 <= rows ? _i < rows : _i > rows; row = 0 <= rows ? ++_i : --_i) {\n      _results.push((function() {\n        var _j, _results1;\n        _results1 = [];\n        for (col = _j = 0; 0 <= cols ? _j < cols : _j > cols; col = 0 <= cols ? ++_j : --_j) {\n          _results1.push({\n            x: bounds.x + bounds.width / cols * col,\n            y: bounds.y + bounds.height / rows * row,\n            width: bounds.width / cols,\n            height: bounds.height / rows\n          });\n        }\n        return _results1;\n      })());\n    }\n    return _results;\n  };\n\n  exports.Layout = Layout = (function() {\n    function Layout() {}\n\n    Layout.prototype.computePosition = function(dim, constraints) {\n      throw new Error(\"unimplimented error\");\n    };\n\n    Layout.prototype.convertToCoordinate = function(val, d) {\n      var ret;\n      if (isPercentage(val)) {\n        return val = convertPercentageToFraction(val, d);\n      } else if (isPositionLabel(val)) {\n        ret = positionToCoord(val, 0, 0, d[0], d[1], [0, 0]);\n        return ret;\n      } else {\n        return Math.min(val, d);\n      }\n    };\n\n    return Layout;\n\n  })();\n\n  exports.AbsoluteLayout = AbsoluteLayout = (function(_super) {\n    __extends(AbsoluteLayout, _super);\n\n    function AbsoluteLayout() {\n      return AbsoluteLayout.__super__.constructor.apply(this, arguments);\n    }\n\n    AbsoluteLayout.prototype.computePosition = function(dim, constraints) {\n      var x, y;\n      if (_.isArray(constraints)) {\n        x = convertToCoordinate(constraints[0], dim[0]);\n        y = convertToCoordinate(constraints[1], dim[1]);\n        return [x, y];\n      } else {\n        return convertToCoordinate(constraints, dim);\n      }\n    };\n\n    return AbsoluteLayout;\n\n  })(exports.Layout);\n\n  exports.GridLayout = GridLayout = (function(_super) {\n    __extends(GridLayout, _super);\n\n    function GridLayout(rows, cols, bounds) {\n      this.rows = rows;\n      this.cols = cols;\n      this.bounds = bounds;\n      this.ncells = this.rows * this.cols;\n      this.cells = this.computeCells();\n    }\n\n    GridLayout.prototype.computeCells = function() {\n      return computeGridCells(this.rows, this.cols, this.bounds);\n    };\n\n    GridLayout.prototype.computePosition = function(dim, constraints) {\n      var cell;\n      if (constraints[0] > (this.rows - 1)) {\n        throw new Error(\"GridLayout.computePosition: illegal row position \" + constraints[0] + \" for grid with dimensions (\" + this.rows + \", \" + this.cols + \")\");\n      }\n      if (constraints[1] > (this.cols - 1)) {\n        throw new Error(\"GridLayout.computePosition: illegal column position \" + constraints[0] + \" for grid with dimensions (\" + this.rows + \", \" + this.cols + \")\");\n      }\n      cell = this.cells[constraints[0]][constraints[1]];\n      return [cell.x + cell.width / 2, cell.y + cell.height / 2];\n    };\n\n    return GridLayout;\n\n  })(exports.Layout);\n\n  exports.positionToCoord = positionToCoord;\n\n  exports.toPixels = toPixels;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/psycloud.js":{"id":3,"canonicalName":"src/psycloud.js","code":"(function () {\n    var Background, Bacon, Block, BlockSeq, Coda, DataTable, DefaultComponentFactory, Event, EventData, EventDataLog, Experiment, ExperimentContext, ExperimentState, FeedbackNode, FunctionNode, Kinetic, KineticContext, MockStimFactory, Prelude, Presenter, Q, Response, ResponseData, RunnableNode, StimFactory, Stimulus, TAFFY, Trial, buildCoda, buildEvent, buildPrelude, buildResponse, buildStimulus, buildTrial, createContext, des, functionNode, makeEventSeq, utils, _, __dummySpec, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    _ = require('16', module);\n    Q = require('17', module);\n    TAFFY = require('21', module).taffy;\n    utils = require('5', module);\n    DataTable = require('6', module).DataTable;\n    Bacon = require('22', module);\n    DefaultComponentFactory = require('14', module).DefaultComponentFactory;\n    Background = require('23', module).Background;\n    Kinetic = require('15', module).Kinetic;\n    Stimulus = require('8', module).Stimulus;\n    Response = require('8', module).Response;\n    ResponseData = require('8', module).ResponseData;\n    exports.EventData = EventData = function () {\n        function EventData(name, id, data) {\n            this.name = name;\n            this.id = id;\n            this.data = data;\n        }\n        return EventData;\n    }();\n    exports.EventDataLog = EventDataLog = function () {\n        function EventDataLog() {\n            this.eventStack = [];\n        }\n        EventDataLog.prototype.push = function (ev) {\n            return this.eventStack.push(ev);\n        };\n        EventDataLog.prototype.last = function () {\n            if (this.eventStack.length < 1) {\n                throw 'EventLog is Empty, canot access last element';\n            }\n            return this.eventStack[this.eventStack.length - 1].data;\n        };\n        EventDataLog.prototype.findAll = function (id) {\n            return _.filter(this.eventStack, function (ev) {\n                return ev.id === id;\n            });\n        };\n        EventDataLog.prototype.findLast = function (id) {\n            var i, len, _i;\n            len = this.eventStack.length - 1;\n            for (i = _i = len; len <= 0 ? _i <= 0 : _i >= 0; i = len <= 0 ? ++_i : --_i) {\n                if (this.eventStack[i].id === id) {\n                    return this.eventStack[i];\n                }\n            }\n        };\n        return EventDataLog;\n    }();\n    exports.StimFactory = StimFactory = function () {\n        function StimFactory() {\n        }\n        StimFactory.prototype.buildStimulus = function (spec, context) {\n            var params, stimType;\n            stimType = _.keys(spec)[0];\n            params = _.values(spec)[0];\n            return this.makeStimulus(stimType, params, context);\n        };\n        StimFactory.prototype.buildResponse = function (spec, context) {\n            var params, responseType;\n            responseType = _.keys(spec)[0];\n            params = _.values(spec)[0];\n            return this.makeResponse(responseType, params, context);\n        };\n        StimFactory.prototype.buildEvent = function (spec, context) {\n            var response, responseSpec, stim, stimSpec;\n            if (spec.Next == null) {\n                throw new Error('Event specification does not contain \\'Next\\' element');\n            }\n            stimSpec = _.omit(spec, 'Next');\n            responseSpec = _.pick(spec, 'Next');\n            stim = this.buildStimulus(stimSpec, context);\n            response = this.buildResponse(responseSpec.Next, context);\n            return this.makeEvent(stim, response, context);\n        };\n        StimFactory.prototype.makeStimulus = function (name, params, context) {\n            throw new Error('unimplemented');\n        };\n        StimFactory.prototype.makeResponse = function (name, params, context) {\n            throw new Error('unimplemented');\n        };\n        StimFactory.prototype.makeEvent = function (stim, response, context) {\n            throw new Error('unimplemented');\n        };\n        return StimFactory;\n    }();\n    exports.MockStimFactory = MockStimFactory = function (_super) {\n        __extends(MockStimFactory, _super);\n        function MockStimFactory() {\n            return MockStimFactory.__super__.constructor.apply(this, arguments);\n        }\n        MockStimFactory.prototype.makeStimulus = function (name, params, context) {\n            var ret;\n            ret = {};\n            ret[name] = params;\n            return ret;\n        };\n        MockStimFactory.prototype.makeResponse = function (name, params, context) {\n            var ret;\n            ret = {};\n            ret[name] = params;\n            return ret;\n        };\n        MockStimFactory.prototype.makeEvent = function (stim, response, context) {\n            return [\n                stim,\n                response\n            ];\n        };\n        return MockStimFactory;\n    }(exports.StimFactory);\n    RunnableNode = function () {\n        RunnableNode.functionList = function (nodes, context, callback) {\n            return _.map(nodes, function (node) {\n                return function (arg) {\n                    context.handleValue(arg);\n                    if (callback != null) {\n                        callback(node);\n                    }\n                    return node.start(context);\n                };\n            });\n        };\n        RunnableNode.chainFunctions = function (funArray) {\n            var fun, result, _i, _len;\n            result = Q.resolve(0);\n            for (_i = 0, _len = funArray.length; _i < _len; _i++) {\n                fun = funArray[_i];\n                result = result.then(fun, function (err) {\n                    return console.log('error stack: ', err.stack);\n                });\n            }\n            return result;\n        };\n        function RunnableNode(children) {\n            this.children = children;\n        }\n        RunnableNode.prototype.before = function (context) {\n            return new FunctionNode(function () {\n                return 0;\n            });\n        };\n        RunnableNode.prototype.after = function (context) {\n            return new FunctionNode(function () {\n                return 0;\n            });\n        };\n        RunnableNode.prototype.numChildren = function () {\n            return this.children.length;\n        };\n        RunnableNode.prototype.length = function () {\n            return this.children.length;\n        };\n        RunnableNode.prototype.start = function (context) {\n            var farray;\n            farray = RunnableNode.functionList(_.flatten([\n                this.before(context),\n                this.children,\n                this.after(context)\n            ]), context, function (node) {\n                return console.log('node done', node);\n            });\n            return RunnableNode.chainFunctions(farray);\n        };\n        RunnableNode.prototype.stop = function (context) {\n        };\n        return RunnableNode;\n    }();\n    exports.RunnableNode = RunnableNode;\n    exports.FunctionNode = FunctionNode = function (_super) {\n        __extends(FunctionNode, _super);\n        function FunctionNode(fun) {\n            this.fun = fun;\n        }\n        FunctionNode.prototype.start = function (context) {\n            return Q.fcall(this.fun);\n        };\n        return FunctionNode;\n    }(RunnableNode);\n    functionNode = function (fun) {\n        return new FunctionNode(fun);\n    };\n    exports.FeedbackNode = FeedbackNode = function (_super) {\n        __extends(FeedbackNode, _super);\n        function FeedbackNode(feedback) {\n            this.feedback = feedback;\n        }\n        FeedbackNode.prototype.numChildren = function () {\n            return 1;\n        };\n        FeedbackNode.prototype.length = function () {\n            return 1;\n        };\n        FeedbackNode.prototype.start = function (context) {\n            var args, event, idSet, obj, spec, _i, _len;\n            if (this.feedback != null) {\n                args = context.trialData().get();\n                idSet = {};\n                for (_i = 0, _len = args.length; _i < _len; _i++) {\n                    obj = args[_i];\n                    if (obj['id'] != null) {\n                        idSet[obj['id']] = obj;\n                    }\n                }\n                args = _.extend(args, idSet);\n                spec = this.feedback.apply(args);\n                event = context.stimFactory.buildEvent(spec, context);\n                return event.start(context);\n            } else {\n                return Q(0);\n            }\n        };\n        return FeedbackNode;\n    }(RunnableNode);\n    exports.Event = Event = function (_super) {\n        __extends(Event, _super);\n        function Event(stimulus, response) {\n            this.stimulus = stimulus;\n            this.response = response;\n            Event.__super__.constructor.call(this, [this.response]);\n        }\n        Event.prototype.stop = function (context) {\n            this.stimulus.stop(context);\n            return this.response.stop(context);\n        };\n        Event.prototype.before = function (context) {\n            var self;\n            self = this;\n            return functionNode(function (_this) {\n                return function () {\n                    var p;\n                    if (!context.exState.inPrelude) {\n                        context.updateState(function () {\n                            return context.exState.nextEvent(self);\n                        });\n                    }\n                    if (!_this.stimulus.overlay) {\n                        context.clearContent();\n                    }\n                    p = _this.stimulus.render(context);\n                    p.present(context);\n                    return context.draw();\n                };\n            }(this));\n        };\n        Event.prototype.after = function (context) {\n            return functionNode(function (_this) {\n                return function () {\n                    return _this.stimulus.stop(context);\n                };\n            }(this));\n        };\n        Event.prototype.start = function (context) {\n            return Event.__super__.start.call(this, context);\n        };\n        return Event;\n    }(RunnableNode);\n    exports.Trial = Trial = function (_super) {\n        __extends(Trial, _super);\n        function Trial(events, record, feedback, background) {\n            if (events == null) {\n                events = [];\n            }\n            this.record = record != null ? record : {};\n            this.feedback = feedback;\n            this.background = background;\n            Trial.__super__.constructor.call(this, events);\n        }\n        Trial.prototype.numEvents = function () {\n            return this.children.length;\n        };\n        Trial.prototype.push = function (event) {\n            return this.children.push(event);\n        };\n        Trial.prototype.before = function (context) {\n            var self;\n            self = this;\n            return functionNode(function (_this) {\n                return function () {\n                    context.updateState(function () {\n                        return context.exState.nextTrial(self);\n                    });\n                    context.clearBackground();\n                    if (_this.background != null) {\n                        console.log('drawing background');\n                        context.setBackground(_this.background);\n                        return context.drawBackground();\n                    }\n                };\n            }(this));\n        };\n        Trial.prototype.after = function (context) {\n            return new FeedbackNode(this.feedback);\n        };\n        Trial.prototype.start = function (context, callback) {\n            var farray;\n            farray = RunnableNode.functionList(_.flatten([\n                this.before(context),\n                this.children,\n                this.after(context)\n            ]), context, function (event) {\n                return console.log('event callback', event);\n            });\n            return RunnableNode.chainFunctions(farray);\n        };\n        Trial.prototype.stop = function (context) {\n        };\n        return Trial;\n    }(RunnableNode);\n    exports.Block = Block = function (_super) {\n        __extends(Block, _super);\n        function Block(children, blockSpec) {\n            this.blockSpec = blockSpec;\n            Block.__super__.constructor.call(this, children);\n        }\n        Block.prototype.showEvent = function (spec, context) {\n            var event;\n            event = buildEvent(spec, context);\n            return event.start(context);\n        };\n        Block.prototype.before = function (context) {\n            var self;\n            self = this;\n            return functionNode(function (_this) {\n                return function () {\n                    var args, spec;\n                    context.updateState(function () {\n                        return context.exState.nextBlock(self);\n                    });\n                    if (_this.blockSpec != null && _this.blockSpec.Start) {\n                        args = _.extend(context.exState.toRecord(), { context: context });\n                        spec = _this.blockSpec.Start.apply(args);\n                        return _this.showEvent(spec, context);\n                    } else {\n                        return Q.fcall(0);\n                    }\n                };\n            }(this));\n        };\n        Block.prototype.after = function (context) {\n            return functionNode(function (_this) {\n                return function () {\n                    var args, blockData, curid, ids, out, spec, _i, _len;\n                    if (_this.blockSpec != null && _this.blockSpec.End) {\n                        blockData = context.blockData();\n                        ids = _.unique(blockData.select('id'));\n                        console.log('END ids', ids);\n                        out = {};\n                        for (_i = 0, _len = ids.length; _i < _len; _i++) {\n                            curid = ids[_i];\n                            out[curid] = DataTable.fromRecords(blockData.filter({ id: curid }).get());\n                        }\n                        args = _.extend(context.exState.toRecord(), { context: context }, out);\n                        console.log('block end args');\n                        spec = _this.blockSpec.End.apply(args);\n                        return _this.showEvent(spec, context);\n                    } else {\n                        return Q.fcall(0);\n                    }\n                };\n            }(this));\n        };\n        return Block;\n    }(RunnableNode);\n    exports.BlockSeq = BlockSeq = function (_super) {\n        __extends(BlockSeq, _super);\n        function BlockSeq(children) {\n            BlockSeq.__super__.constructor.call(this, children);\n        }\n        return BlockSeq;\n    }(RunnableNode);\n    exports.Prelude = Prelude = function (_super) {\n        __extends(Prelude, _super);\n        function Prelude(children) {\n            Prelude.__super__.constructor.call(this, children);\n        }\n        Prelude.prototype.before = function (context) {\n            return functionNode(function (_this) {\n                return function () {\n                    return context.updateState(function () {\n                        return context.exState.insidePrelude();\n                    });\n                };\n            }(this));\n        };\n        Prelude.prototype.after = function (context) {\n            return functionNode(function (_this) {\n                return function () {\n                    return context.updateState(function () {\n                        return context.exState.outsidePrelude();\n                    });\n                };\n            }(this));\n        };\n        return Prelude;\n    }(RunnableNode);\n    exports.Coda = Coda = function (_super) {\n        __extends(Coda, _super);\n        function Coda(children) {\n            Coda.__super__.constructor.call(this, children);\n        }\n        return Coda;\n    }(RunnableNode);\n    exports.ExperimentState = ExperimentState = function () {\n        function ExperimentState() {\n            this.inPrelude = false;\n            this.trial = {};\n            this.block = {};\n            this.event = {};\n            this.blockNumber = 0;\n            this.trialNumber = 0;\n            this.eventNumber = 0;\n            this.stimulus = {};\n            this.response = {};\n        }\n        ExperimentState.prototype.insidePrelude = function () {\n            var ret;\n            ret = $.extend({}, this);\n            ret.inPrelude = true;\n            return ret;\n        };\n        ExperimentState.prototype.outsidePrelude = function () {\n            var ret;\n            ret = $.extend({}, this);\n            ret.inPrelude = false;\n            return ret;\n        };\n        ExperimentState.prototype.nextBlock = function (block) {\n            var ret;\n            ret = $.extend({}, this);\n            ret.blockNumber = this.blockNumber + 1;\n            ret.block = block;\n            return ret;\n        };\n        ExperimentState.prototype.nextTrial = function (trial) {\n            var ret;\n            ret = $.extend({}, this);\n            ret.trial = trial;\n            ret.trialNumber = this.trialNumber + 1;\n            return ret;\n        };\n        ExperimentState.prototype.nextEvent = function (event) {\n            var ret;\n            ret = $.extend({}, this);\n            ret.event = event;\n            ret.eventNumber = this.eventNumber + 1;\n            return ret;\n        };\n        ExperimentState.prototype.toRecord = function () {\n            var key, ret, value, _ref, _ref1, _ref10, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9;\n            ret = {\n                blockNumber: this.blockNumber,\n                trialNumber: this.trialNumber,\n                eventNumber: this.eventNumber,\n                stimulus: (_ref = this.event) != null ? (_ref1 = _ref.stimulus) != null ? (_ref2 = _ref1.constructor) != null ? _ref2.name : void 0 : void 0 : void 0,\n                response: (_ref3 = this.event) != null ? (_ref4 = _ref3.response) != null ? (_ref5 = _ref4.constructor) != null ? _ref5.name : void 0 : void 0 : void 0,\n                stimulusID: (_ref6 = this.event) != null ? (_ref7 = _ref6.stimulus) != null ? _ref7.id : void 0 : void 0,\n                responseID: (_ref8 = this.event) != null ? (_ref9 = _ref8.response) != null ? _ref9.id : void 0 : void 0\n            };\n            if (!_.isEmpty(this.trial) && this.trial.record != null) {\n                _ref10 = this.trial.record;\n                for (key in _ref10) {\n                    value = _ref10[key];\n                    ret[key] = value;\n                }\n            }\n            return ret;\n        };\n        return ExperimentState;\n    }();\n    createContext = function (id) {\n        var stage;\n        if (id == null) {\n            id = 'container';\n        }\n        stage = new Kinetic.Stage({\n            container: id,\n            width: $('#' + id).width(),\n            height: $('#' + id).height()\n        });\n        return new KineticContext(stage);\n    };\n    exports.createContext = createContext;\n    exports.ExperimentContext = ExperimentContext = function () {\n        function ExperimentContext(stimFactory) {\n            this.stimFactory = stimFactory;\n            this.userData = TAFFY({});\n            this.exState = new ExperimentState();\n            this.eventData = new EventDataLog();\n            this.log = [];\n            this.trialNumber = 0;\n            this.currentTrial = new Trial([], {});\n            this.numBlocks = 0;\n        }\n        ExperimentContext.prototype.updateState = function (fun) {\n            this.exState = fun(this.exState);\n            return this.exState;\n        };\n        ExperimentContext.prototype.pushData = function (data, withState) {\n            var record;\n            if (withState == null) {\n                withState = true;\n            }\n            console.log('pushing data', data);\n            if (withState) {\n                record = _.extend(this.exState.toRecord(), data);\n            } else {\n                record = data;\n            }\n            return this.userData.insert(record);\n        };\n        ExperimentContext.prototype.handleValue = function (arg) {\n            if (arg != null && arg instanceof ResponseData) {\n                return this.pushData(arg.data);\n            }\n        };\n        ExperimentContext.prototype.width = function () {\n            return 0;\n        };\n        ExperimentContext.prototype.height = function () {\n            return 0;\n        };\n        ExperimentContext.prototype.offsetX = function () {\n            return 0;\n        };\n        ExperimentContext.prototype.offsetY = function () {\n            return 0;\n        };\n        ExperimentContext.prototype.centerX = function () {\n            return this.width() / 2 + this.offsetX();\n        };\n        ExperimentContext.prototype.centerY = function () {\n            return this.height() / 2 + this.offsetY();\n        };\n        ExperimentContext.prototype.screenInfo = function () {\n            return {\n                width: this.width(),\n                height: this.height(),\n                offset: {\n                    x: this.offsetX(),\n                    y: this.offsetY()\n                },\n                center: {\n                    x: this.centerX(),\n                    y: this.centerY()\n                }\n            };\n        };\n        ExperimentContext.prototype.logEvent = function (key, value) {\n            var record;\n            record = _.clone(this.currentTrial.record);\n            record[key] = value;\n            this.log.push(record);\n            return console.log(this.log);\n        };\n        ExperimentContext.prototype.trialData = function () {\n            var ret;\n            ret = this.userData().filter({ trialNumber: this.exState.trialNumber });\n            if (ret.length === 1) {\n                return ret[0];\n            } else {\n                return ret;\n            }\n        };\n        ExperimentContext.prototype.blockData = function (args) {\n            if (args == null) {\n                args = {\n                    blockNum: null,\n                    name: null\n                };\n            }\n            if (args.blockNum == null) {\n                args.blockNum = this.exState.blockNumber;\n            }\n            if (!args.name) {\n                return this.userData().filter({ blockNumber: args.blockNum });\n            } else {\n                return this.userData().filter({ blockNumber: args.blockNum }).select(args.name);\n            }\n        };\n        ExperimentContext.prototype.allData = function (args) {\n            if (args == null) {\n                args = { name: null };\n            }\n            if (!args.name) {\n                return this.userData();\n            } else {\n                return this.userData().select(args.name);\n            }\n        };\n        ExperimentContext.prototype.showEvent = function (event) {\n            return event.start(this);\n        };\n        ExperimentContext.prototype.showStimulus = function (stimulus) {\n            var p;\n            p = stimulus.render(this);\n            p.present(this);\n            console.log('show Stimulus, drawing');\n            return this.draw();\n        };\n        ExperimentContext.prototype.start = function (blockList) {\n            var error, farray;\n            this.numBlocks = blockList.length();\n            try {\n                farray = RunnableNode.functionList(blockList, this, function (block) {\n                    return console.log('block callback', block);\n                });\n                return RunnableNode.chainFunctions(farray);\n            } catch (_error) {\n                error = _error;\n                return console.log('caught error:', error);\n            }\n        };\n        ExperimentContext.prototype.clearContent = function () {\n        };\n        ExperimentContext.prototype.clearBackground = function () {\n        };\n        ExperimentContext.prototype.keydownStream = function () {\n            return Bacon.fromEventTarget(window, 'keydown');\n        };\n        ExperimentContext.prototype.keypressStream = function () {\n            return Bacon.fromEventTarget(window, 'keypress');\n        };\n        ExperimentContext.prototype.mousepressStream = function () {\n        };\n        ExperimentContext.prototype.draw = function () {\n        };\n        ExperimentContext.prototype.insertHTMLDiv = function () {\n            $('canvas').css('position', 'absolute');\n            $('#container').append('<div id=\"htmlcontainer\" class=\"htmllayer\"></div>');\n            $('#htmlcontainer').css({\n                position: 'absolute',\n                'z-index': 999,\n                outline: 'none',\n                padding: '5px'\n            });\n            $('#container').attr('tabindex', 0);\n            return $('#container').css('outline', 'none');\n        };\n        ExperimentContext.prototype.clearHtml = function () {\n            $('#htmlcontainer').empty();\n            return $('#htmlcontainer').hide();\n        };\n        ExperimentContext.prototype.appendHtml = function (input) {\n            $('#htmlcontainer').addClass('htmllayer');\n            $('#htmlcontainer').append(input);\n            return $('#htmlcontainer').show();\n        };\n        ExperimentContext.prototype.hideHtml = function () {\n            return $('#htmlcontainer').hide();\n        };\n        return ExperimentContext;\n    }();\n    KineticContext = function (_super) {\n        __extends(KineticContext, _super);\n        function KineticContext(stage) {\n            this.stage = stage;\n            KineticContext.__super__.constructor.call(this, new DefaultComponentFactory());\n            this.contentLayer = new Kinetic.Layer({ clearBeforeDraw: true });\n            this.backgroundLayer = new Kinetic.Layer({ clearBeforeDraw: true });\n            this.background = new Background([], { fill: 'white' });\n            this.stage.add(this.backgroundLayer);\n            this.stage.add(this.contentLayer);\n            this.insertHTMLDiv();\n        }\n        KineticContext.prototype.insertHTMLDiv = function () {\n            KineticContext.__super__.insertHTMLDiv.apply(this, arguments);\n            return $('.kineticjs-content').css('position', 'absolute');\n        };\n        KineticContext.prototype.setBackground = function (newBackground) {\n            var p;\n            this.background = newBackground;\n            this.backgroundLayer.removeChildren();\n            p = this.background.render(this);\n            return p.present(this, this.backgroundLayer);\n        };\n        KineticContext.prototype.drawBackground = function () {\n            return this.backgroundLayer.draw();\n        };\n        KineticContext.prototype.clearBackground = function () {\n            return this.backgroundLayer.removeChildren();\n        };\n        KineticContext.prototype.clearContent = function (draw) {\n            if (draw == null) {\n                draw = false;\n            }\n            this.clearHtml();\n            this.backgroundLayer.draw();\n            this.contentLayer.removeChildren();\n            if (draw) {\n                return this.draw();\n            }\n        };\n        KineticContext.prototype.draw = function () {\n            $('#container').focus();\n            return this.contentLayer.draw();\n        };\n        KineticContext.prototype.width = function () {\n            return this.stage.getWidth();\n        };\n        KineticContext.prototype.height = function () {\n            return this.stage.getHeight();\n        };\n        KineticContext.prototype.offsetX = function () {\n            return this.stage.getOffsetX();\n        };\n        KineticContext.prototype.offsetY = function () {\n            return this.stage.getOffsetY();\n        };\n        KineticContext.prototype.showStimulus = function (stimulus) {\n            var p;\n            p = stimulus.render(this);\n            p.present(this);\n            console.log('show Stimulus, drawing');\n            return this.draw();\n        };\n        KineticContext.prototype.keydownStream = function () {\n            return Bacon.fromEventTarget(window, 'keydown');\n        };\n        KineticContext.prototype.keypressStream = function () {\n            return Bacon.fromEventTarget(window, 'keypress');\n        };\n        KineticContext.prototype.mousepressStream = function () {\n            var MouseBus;\n            MouseBus = function () {\n                function MouseBus() {\n                    this.stream = new Bacon.Bus();\n                    this.handler = function (_this) {\n                        return function (x) {\n                            return _this.stream.push(x);\n                        };\n                    }(this);\n                    this.stage.on('mousedown', this.handler);\n                }\n                MouseBus.prototype.stop = function () {\n                    this.stage.off('mousedown', this.handler);\n                    return this.stream.end();\n                };\n                return MouseBus;\n            }();\n            return new MouseBus();\n        };\n        return KineticContext;\n    }(exports.ExperimentContext);\n    exports.KineticContext = KineticContext;\n    buildStimulus = function (spec, context) {\n        var params, stimType;\n        stimType = _.keys(spec)[0];\n        params = _.values(spec)[0];\n        console.log('stimType', stimType);\n        console.log('params', params);\n        return context.stimFactory.makeStimulus(stimType, params, context);\n    };\n    buildResponse = function (spec, context) {\n        var params, responseType;\n        responseType = _.keys(spec)[0];\n        params = _.values(spec)[0];\n        return context.stimFactory.makeResponse(responseType, params, context);\n    };\n    buildEvent = function (spec, context) {\n        var response, responseSpec, stim, stimSpec;\n        stimSpec = _.omit(spec, 'Next');\n        responseSpec = _.pick(spec, 'Next');\n        if (responseSpec == null || _.isEmpty(responseSpec)) {\n            stim = buildStimulus(stimSpec, context);\n            if (!stim instanceof Response) {\n                throw new Error('buildEvent: Missing Response from event: ', spec);\n            }\n            return context.stimFactory.makeEvent(stim, stim, context);\n        } else {\n            stim = buildStimulus(stimSpec, context);\n            response = buildResponse(responseSpec.Next, context);\n            return context.stimFactory.makeEvent(stim, response, context);\n        }\n    };\n    buildTrial = function (eventSpec, record, context, feedback, backgroundSpec) {\n        var background, events, key, value;\n        events = function () {\n            var _results;\n            _results = [];\n            for (key in eventSpec) {\n                value = eventSpec[key];\n                _results.push(context.stimFactory.buildEvent(value));\n            }\n            return _results;\n        }();\n        if (backgroundSpec != null) {\n            background = context.stimFactory.makeStimulus('Background', backgroundSpec);\n            return new Trial(events, record, feedback, background);\n        } else {\n            return new Trial(events, record, feedback);\n        }\n    };\n    makeEventSeq = function (spec, context) {\n        var key, response, responseSpec, stim, stimSpec, value, _results;\n        _results = [];\n        for (key in spec) {\n            value = spec[key];\n            stimSpec = _.omit(value, 'Next');\n            responseSpec = _.pick(value, 'Next');\n            console.log('building stim', stimSpec);\n            stim = buildStimulus(stimSpec, context);\n            response = buildResponse(responseSpec.Next, context);\n            _results.push(context.stimFactory.makeEvent(stim, response, context));\n        }\n        return _results;\n    };\n    buildPrelude = function (preludeSpec, context) {\n        var events;\n        events = makeEventSeq(preludeSpec, context);\n        return new Prelude(events);\n    };\n    buildCoda = function (codaSpec, context) {\n        var events;\n        events = makeEventSeq(codaSpec, context);\n        return new Coda(events);\n    };\n    __dummySpec = {\n        Events: {\n            1: {\n                Nothing: '',\n                Next: { Timeout: { duration: 0 } }\n            }\n        }\n    };\n    exports.Presenter = Presenter = function () {\n        function Presenter(trialList, display, context) {\n            this.trialList = trialList;\n            this.display = display;\n            this.context = context;\n            this.trialBuilder = this.display.Trial;\n            this.prelude = this.display.Prelude != null ? buildPrelude(this.display.Prelude.Events, this.context) : buildPrelude(__dummySpec.Events, this.context);\n            this.coda = this.display.Coda != null ? buildCoda(this.display.Coda.Events, this.context) : (console.log('building dummy coda'), buildCoda(__dummySpec.Events, this.context));\n        }\n        Presenter.prototype.start = function () {\n            var args, block, record, trialNum, trialSpec, trials;\n            this.blockList = new BlockSeq(function () {\n                var _i, _len, _ref, _results;\n                _ref = this.trialList.blocks;\n                _results = [];\n                for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n                    block = _ref[_i];\n                    trials = function () {\n                        var _j, _ref1, _results1;\n                        _results1 = [];\n                        for (trialNum = _j = 0, _ref1 = block.length; 0 <= _ref1 ? _j < _ref1 : _j > _ref1; trialNum = 0 <= _ref1 ? ++_j : --_j) {\n                            record = _.clone(block[trialNum]);\n                            args = {};\n                            args.trial = record;\n                            args.screen = this.context.screenInfo();\n                            trialSpec = this.trialBuilder.apply(args);\n                            _results1.push(buildTrial(trialSpec.Events, record, this.context, trialSpec.Feedback, trialSpec.Background));\n                        }\n                        return _results1;\n                    }.call(this);\n                    _results.push(new Block(trials, this.display.Block));\n                }\n                return _results;\n            }.call(this));\n            return this.prelude.start(this.context).then(function (_this) {\n                return function () {\n                    return _this.blockList.start(_this.context);\n                };\n            }(this)).then(function (_this) {\n                return function () {\n                    console.log('inside coda');\n                    return _this.coda.start(_this.context);\n                };\n            }(this));\n        };\n        return Presenter;\n    }();\n    exports.Experiment = Experiment = function () {\n        function Experiment(designSpec, stimFactory) {\n            this.designSpec = designSpec;\n            this.stimFactory = stimFactory != null ? stimFactory : new MockStimFactory();\n            this.design = new ExpDesign(this.designSpec);\n            this.display = this.designSpec.Display;\n            this.trialGenerator = this.display.Trial;\n        }\n        Experiment.prototype.buildStimulus = function (event, context) {\n            var params, stimType;\n            stimType = _.keys(event)[0];\n            params = _.values(event)[0];\n            return this.stimFactory.makeStimulus(stimType, params, context);\n        };\n        Experiment.prototype.buildEvent = function (event, context) {\n            var params, responseType;\n            responseType = _.keys(event)[0];\n            params = _.values(event)[0];\n            return this.stimFactory.makeResponse(responseType, params, context);\n        };\n        Experiment.prototype.buildTrial = function (eventSpec, record, context) {\n            var events, key, response, responseSpec, stim, stimSpec, value;\n            events = function () {\n                var _results;\n                _results = [];\n                for (key in eventSpec) {\n                    value = eventSpec[key];\n                    stimSpec = _.omit(value, 'Next');\n                    responseSpec = _.pick(value, 'Next');\n                    stim = this.buildStimulus(stimSpec);\n                    response = this.buildResponse(responseSpec.Next);\n                    _results.push(this.stimFactory.makeEvent(stim, response));\n                }\n                return _results;\n            }.call(this);\n            return new Trial(events, record);\n        };\n        Experiment.prototype.start = function (context) {\n            var i, record, trialList, trialSpec, trials;\n            trials = this.design.fullDesign;\n            console.log(trials.nrow());\n            trialList = function () {\n                var _i, _ref, _results;\n                _results = [];\n                for (i = _i = 0, _ref = trials.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                    record = trials.record(i);\n                    record.$trialNumber = i;\n                    trialSpec = this.trialGenerator(record);\n                    _results.push(this.buildTrial(trialSpec, record, context));\n                }\n                return _results;\n            }.call(this);\n            return context.start(trialList);\n        };\n        return Experiment;\n    }();\n    exports.letters = [\n        'a',\n        'b',\n        'c',\n        'd',\n        'e',\n        'd',\n        'f',\n        'g',\n        'h',\n        'i',\n        'j',\n        'k',\n        'l',\n        'm',\n        'n',\n        'o',\n        'p',\n        'q',\n        'r',\n        's',\n        't',\n        'u',\n        'v',\n        'w',\n        'x',\n        'y',\n        'z'\n    ];\n    des = {\n        Design: {\n            Blocks: [\n                [{\n                        a: 1,\n                        b: 2,\n                        c: 3,\n                        a: 2,\n                        b: 3,\n                        c: 4\n                    }],\n                [{\n                        a: 5,\n                        b: 7,\n                        c: 6,\n                        a: 5,\n                        b: 7,\n                        c: 6\n                    }]\n            ]\n        }\n    };\n    console.log(des.Blocks);\n    exports.buildStimulus = buildStimulus;\n    exports.buildResponse = buildResponse;\n    exports.buildEvent = buildEvent;\n    exports.buildTrial = buildTrial;\n    exports.buildPrelude = buildPrelude;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/psycloud.js\"],\"names\":[\"Background\",\"Bacon\",\"Block\",\"BlockSeq\",\"Coda\",\"DataTable\",\"DefaultComponentFactory\",\"Event\",\"EventData\",\"EventDataLog\",\"Experiment\",\"ExperimentContext\",\"ExperimentState\",\"FeedbackNode\",\"FunctionNode\",\"Kinetic\",\"KineticContext\",\"MockStimFactory\",\"Prelude\",\"Presenter\",\"Q\",\"Response\",\"ResponseData\",\"RunnableNode\",\"StimFactory\",\"Stimulus\",\"TAFFY\",\"Trial\",\"buildCoda\",\"buildEvent\",\"buildPrelude\",\"buildResponse\",\"buildStimulus\",\"buildTrial\",\"createContext\",\"des\",\"functionNode\",\"makeEventSeq\",\"utils\",\"_\",\"__dummySpec\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"taffy\",\"exports\",\"name\",\"id\",\"data\",\"eventStack\",\"push\",\"ev\",\"last\",\"length\",\"findAll\",\"filter\",\"findLast\",\"i\",\"len\",\"_i\",\"spec\",\"context\",\"params\",\"stimType\",\"keys\",\"values\",\"makeStimulus\",\"responseType\",\"makeResponse\",\"response\",\"responseSpec\",\"stim\",\"stimSpec\",\"Next\",\"Error\",\"omit\",\"pick\",\"makeEvent\",\"_super\",\"apply\",\"arguments\",\"ret\",\"functionList\",\"nodes\",\"callback\",\"map\",\"node\",\"arg\",\"handleValue\",\"start\",\"chainFunctions\",\"funArray\",\"fun\",\"result\",\"_len\",\"resolve\",\"then\",\"err\",\"console\",\"log\",\"stack\",\"children\",\"before\",\"after\",\"numChildren\",\"farray\",\"flatten\",\"stop\",\"fcall\",\"feedback\",\"args\",\"event\",\"idSet\",\"obj\",\"trialData\",\"get\",\"extend\",\"stimFactory\",\"stimulus\",\"self\",\"_this\",\"p\",\"exState\",\"inPrelude\",\"updateState\",\"nextEvent\",\"overlay\",\"clearContent\",\"render\",\"present\",\"draw\",\"events\",\"record\",\"background\",\"numEvents\",\"nextTrial\",\"clearBackground\",\"setBackground\",\"drawBackground\",\"blockSpec\",\"showEvent\",\"nextBlock\",\"Start\",\"toRecord\",\"blockData\",\"curid\",\"ids\",\"out\",\"End\",\"unique\",\"select\",\"fromRecords\",\"insidePrelude\",\"outsidePrelude\",\"trial\",\"block\",\"blockNumber\",\"trialNumber\",\"eventNumber\",\"$\",\"value\",\"_ref\",\"_ref1\",\"_ref10\",\"_ref2\",\"_ref3\",\"_ref4\",\"_ref5\",\"_ref6\",\"_ref7\",\"_ref8\",\"_ref9\",\"stimulusID\",\"responseID\",\"isEmpty\",\"stage\",\"Stage\",\"container\",\"width\",\"height\",\"userData\",\"eventData\",\"currentTrial\",\"numBlocks\",\"pushData\",\"withState\",\"insert\",\"offsetX\",\"offsetY\",\"centerX\",\"centerY\",\"screenInfo\",\"offset\",\"x\",\"y\",\"center\",\"logEvent\",\"clone\",\"blockNum\",\"allData\",\"showStimulus\",\"blockList\",\"error\",\"_error\",\"keydownStream\",\"fromEventTarget\",\"window\",\"keypressStream\",\"mousepressStream\",\"insertHTMLDiv\",\"css\",\"append\",\"position\",\"outline\",\"padding\",\"attr\",\"clearHtml\",\"empty\",\"hide\",\"appendHtml\",\"input\",\"addClass\",\"show\",\"hideHtml\",\"contentLayer\",\"Layer\",\"clearBeforeDraw\",\"backgroundLayer\",\"fill\",\"add\",\"newBackground\",\"removeChildren\",\"focus\",\"getWidth\",\"getHeight\",\"getOffsetX\",\"getOffsetY\",\"MouseBus\",\"stream\",\"Bus\",\"handler\",\"on\",\"off\",\"end\",\"eventSpec\",\"backgroundSpec\",\"_results\",\"preludeSpec\",\"codaSpec\",\"Events\",\"Nothing\",\"Timeout\",\"duration\",\"trialList\",\"display\",\"trialBuilder\",\"prelude\",\"coda\",\"trialNum\",\"trialSpec\",\"trials\",\"blocks\",\"_j\",\"_results1\",\"screen\",\"Feedback\",\"designSpec\",\"design\",\"ExpDesign\",\"Display\",\"trialGenerator\",\"fullDesign\",\"nrow\",\"$trialNumber\",\"letters\",\"Design\",\"Blocks\",\"a\",\"b\",\"c\"],\"mappings\":\"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\"}","lineCount":1000,"mtime":1392731908000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/q/q.js","canonicalName":"node_modules/q/q.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/taffydb/taffy.js","canonicalName":"node_modules/taffydb/taffy.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/utils.js","canonicalName":"src/utils.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/datatable.js","canonicalName":"src/datatable.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/baconjs/dist/Bacon.js","canonicalName":"node_modules/baconjs/dist/Bacon.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/factory.js","canonicalName":"src/factory.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/canvas/background.js","canonicalName":"src/components/canvas/background.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.7.1\n(function() {\n  var Background, Bacon, Block, BlockSeq, Coda, DataTable, DefaultComponentFactory, Event, EventData, EventDataLog, Experiment, ExperimentContext, ExperimentState, FeedbackNode, FunctionNode, Kinetic, KineticContext, MockStimFactory, Prelude, Presenter, Q, Response, ResponseData, RunnableNode, StimFactory, Stimulus, TAFFY, Trial, buildCoda, buildEvent, buildPrelude, buildResponse, buildStimulus, buildTrial, createContext, des, functionNode, makeEventSeq, utils, _, __dummySpec,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  _ = require('lodash');\n\n  Q = require(\"q\");\n\n  TAFFY = require(\"taffydb\").taffy;\n\n  utils = require(\"./utils\");\n\n  DataTable = require(\"./datatable\").DataTable;\n\n  Bacon = require(\"baconjs\");\n\n  DefaultComponentFactory = require(\"./factory\").DefaultComponentFactory;\n\n  Background = require(\"./components/canvas/background\").Background;\n\n  Kinetic = require(\"../jslibs/kinetic\").Kinetic;\n\n  Stimulus = require(\"./stimresp\").Stimulus;\n\n  Response = require(\"./stimresp\").Response;\n\n  ResponseData = require(\"./stimresp\").ResponseData;\n\n  exports.EventData = EventData = (function() {\n    function EventData(name, id, data) {\n      this.name = name;\n      this.id = id;\n      this.data = data;\n    }\n\n    return EventData;\n\n  })();\n\n  exports.EventDataLog = EventDataLog = (function() {\n    function EventDataLog() {\n      this.eventStack = [];\n    }\n\n    EventDataLog.prototype.push = function(ev) {\n      return this.eventStack.push(ev);\n    };\n\n    EventDataLog.prototype.last = function() {\n      if (this.eventStack.length < 1) {\n        throw \"EventLog is Empty, canot access last element\";\n      }\n      return this.eventStack[this.eventStack.length - 1].data;\n    };\n\n    EventDataLog.prototype.findAll = function(id) {\n      return _.filter(this.eventStack, function(ev) {\n        return ev.id === id;\n      });\n    };\n\n    EventDataLog.prototype.findLast = function(id) {\n      var i, len, _i;\n      len = this.eventStack.length - 1;\n      for (i = _i = len; len <= 0 ? _i <= 0 : _i >= 0; i = len <= 0 ? ++_i : --_i) {\n        if (this.eventStack[i].id === id) {\n          return this.eventStack[i];\n        }\n      }\n    };\n\n    return EventDataLog;\n\n  })();\n\n  exports.StimFactory = StimFactory = (function() {\n    function StimFactory() {}\n\n    StimFactory.prototype.buildStimulus = function(spec, context) {\n      var params, stimType;\n      stimType = _.keys(spec)[0];\n      params = _.values(spec)[0];\n      return this.makeStimulus(stimType, params, context);\n    };\n\n    StimFactory.prototype.buildResponse = function(spec, context) {\n      var params, responseType;\n      responseType = _.keys(spec)[0];\n      params = _.values(spec)[0];\n      return this.makeResponse(responseType, params, context);\n    };\n\n    StimFactory.prototype.buildEvent = function(spec, context) {\n      var response, responseSpec, stim, stimSpec;\n      if (spec.Next == null) {\n        throw new Error(\"Event specification does not contain 'Next' element\");\n      }\n      stimSpec = _.omit(spec, \"Next\");\n      responseSpec = _.pick(spec, \"Next\");\n      stim = this.buildStimulus(stimSpec, context);\n      response = this.buildResponse(responseSpec.Next, context);\n      return this.makeEvent(stim, response, context);\n    };\n\n    StimFactory.prototype.makeStimulus = function(name, params, context) {\n      throw new Error(\"unimplemented\");\n    };\n\n    StimFactory.prototype.makeResponse = function(name, params, context) {\n      throw new Error(\"unimplemented\");\n    };\n\n    StimFactory.prototype.makeEvent = function(stim, response, context) {\n      throw new Error(\"unimplemented\");\n    };\n\n    return StimFactory;\n\n  })();\n\n  exports.MockStimFactory = MockStimFactory = (function(_super) {\n    __extends(MockStimFactory, _super);\n\n    function MockStimFactory() {\n      return MockStimFactory.__super__.constructor.apply(this, arguments);\n    }\n\n    MockStimFactory.prototype.makeStimulus = function(name, params, context) {\n      var ret;\n      ret = {};\n      ret[name] = params;\n      return ret;\n    };\n\n    MockStimFactory.prototype.makeResponse = function(name, params, context) {\n      var ret;\n      ret = {};\n      ret[name] = params;\n      return ret;\n    };\n\n    MockStimFactory.prototype.makeEvent = function(stim, response, context) {\n      return [stim, response];\n    };\n\n    return MockStimFactory;\n\n  })(exports.StimFactory);\n\n  RunnableNode = (function() {\n    RunnableNode.functionList = function(nodes, context, callback) {\n      return _.map(nodes, function(node) {\n        return function(arg) {\n          context.handleValue(arg);\n          if (callback != null) {\n            callback(node);\n          }\n          return node.start(context);\n        };\n      });\n    };\n\n    RunnableNode.chainFunctions = function(funArray) {\n      var fun, result, _i, _len;\n      result = Q.resolve(0);\n      for (_i = 0, _len = funArray.length; _i < _len; _i++) {\n        fun = funArray[_i];\n        result = result.then(fun, function(err) {\n          return console.log(\"error stack: \", err.stack);\n        });\n      }\n      return result;\n    };\n\n    function RunnableNode(children) {\n      this.children = children;\n    }\n\n    RunnableNode.prototype.before = function(context) {\n      return new FunctionNode(function() {\n        return 0;\n      });\n    };\n\n    RunnableNode.prototype.after = function(context) {\n      return new FunctionNode(function() {\n        return 0;\n      });\n    };\n\n    RunnableNode.prototype.numChildren = function() {\n      return this.children.length;\n    };\n\n    RunnableNode.prototype.length = function() {\n      return this.children.length;\n    };\n\n    RunnableNode.prototype.start = function(context) {\n      var farray;\n      farray = RunnableNode.functionList(_.flatten([this.before(context), this.children, this.after(context)]), context, function(node) {\n        return console.log(\"node done\", node);\n      });\n      return RunnableNode.chainFunctions(farray);\n    };\n\n    RunnableNode.prototype.stop = function(context) {};\n\n    return RunnableNode;\n\n  })();\n\n  exports.RunnableNode = RunnableNode;\n\n  exports.FunctionNode = FunctionNode = (function(_super) {\n    __extends(FunctionNode, _super);\n\n    function FunctionNode(fun) {\n      this.fun = fun;\n    }\n\n    FunctionNode.prototype.start = function(context) {\n      return Q.fcall(this.fun);\n    };\n\n    return FunctionNode;\n\n  })(RunnableNode);\n\n  functionNode = function(fun) {\n    return new FunctionNode(fun);\n  };\n\n  exports.FeedbackNode = FeedbackNode = (function(_super) {\n    __extends(FeedbackNode, _super);\n\n    function FeedbackNode(feedback) {\n      this.feedback = feedback;\n    }\n\n    FeedbackNode.prototype.numChildren = function() {\n      return 1;\n    };\n\n    FeedbackNode.prototype.length = function() {\n      return 1;\n    };\n\n    FeedbackNode.prototype.start = function(context) {\n      var args, event, idSet, obj, spec, _i, _len;\n      if (this.feedback != null) {\n        args = context.trialData().get();\n        idSet = {};\n        for (_i = 0, _len = args.length; _i < _len; _i++) {\n          obj = args[_i];\n          if (obj[\"id\"] != null) {\n            idSet[obj[\"id\"]] = obj;\n          }\n        }\n        args = _.extend(args, idSet);\n        spec = this.feedback.apply(args);\n        event = context.stimFactory.buildEvent(spec, context);\n        return event.start(context);\n      } else {\n        return Q(0);\n      }\n    };\n\n    return FeedbackNode;\n\n  })(RunnableNode);\n\n  exports.Event = Event = (function(_super) {\n    __extends(Event, _super);\n\n    function Event(stimulus, response) {\n      this.stimulus = stimulus;\n      this.response = response;\n      Event.__super__.constructor.call(this, [this.response]);\n    }\n\n    Event.prototype.stop = function(context) {\n      this.stimulus.stop(context);\n      return this.response.stop(context);\n    };\n\n    Event.prototype.before = function(context) {\n      var self;\n      self = this;\n      return functionNode((function(_this) {\n        return function() {\n          var p;\n          if (!context.exState.inPrelude) {\n            context.updateState(function() {\n              return context.exState.nextEvent(self);\n            });\n          }\n          if (!_this.stimulus.overlay) {\n            context.clearContent();\n          }\n          p = _this.stimulus.render(context);\n          p.present(context);\n          return context.draw();\n        };\n      })(this));\n    };\n\n    Event.prototype.after = function(context) {\n      return functionNode((function(_this) {\n        return function() {\n          return _this.stimulus.stop(context);\n        };\n      })(this));\n    };\n\n    Event.prototype.start = function(context) {\n      return Event.__super__.start.call(this, context);\n    };\n\n    return Event;\n\n  })(RunnableNode);\n\n  exports.Trial = Trial = (function(_super) {\n    __extends(Trial, _super);\n\n    function Trial(events, record, feedback, background) {\n      if (events == null) {\n        events = [];\n      }\n      this.record = record != null ? record : {};\n      this.feedback = feedback;\n      this.background = background;\n      Trial.__super__.constructor.call(this, events);\n    }\n\n    Trial.prototype.numEvents = function() {\n      return this.children.length;\n    };\n\n    Trial.prototype.push = function(event) {\n      return this.children.push(event);\n    };\n\n    Trial.prototype.before = function(context) {\n      var self;\n      self = this;\n      return functionNode(((function(_this) {\n        return function() {\n          context.updateState(function() {\n            return context.exState.nextTrial(self);\n          });\n          context.clearBackground();\n          if (_this.background != null) {\n            console.log(\"drawing background\");\n            context.setBackground(_this.background);\n            return context.drawBackground();\n          }\n        };\n      })(this)));\n    };\n\n    Trial.prototype.after = function(context) {\n      return new FeedbackNode(this.feedback);\n    };\n\n    Trial.prototype.start = function(context, callback) {\n      var farray;\n      farray = RunnableNode.functionList(_.flatten([this.before(context), this.children, this.after(context)]), context, function(event) {\n        return console.log(\"event callback\", event);\n      });\n      return RunnableNode.chainFunctions(farray);\n    };\n\n    Trial.prototype.stop = function(context) {};\n\n    return Trial;\n\n  })(RunnableNode);\n\n  exports.Block = Block = (function(_super) {\n    __extends(Block, _super);\n\n    function Block(children, blockSpec) {\n      this.blockSpec = blockSpec;\n      Block.__super__.constructor.call(this, children);\n    }\n\n    Block.prototype.showEvent = function(spec, context) {\n      var event;\n      event = buildEvent(spec, context);\n      return event.start(context);\n    };\n\n    Block.prototype.before = function(context) {\n      var self;\n      self = this;\n      return functionNode((function(_this) {\n        return function() {\n          var args, spec;\n          context.updateState(function() {\n            return context.exState.nextBlock(self);\n          });\n          if ((_this.blockSpec != null) && _this.blockSpec.Start) {\n            args = _.extend(context.exState.toRecord(), {\n              context: context\n            });\n            spec = _this.blockSpec.Start.apply(args);\n            return _this.showEvent(spec, context);\n          } else {\n            return Q.fcall(0);\n          }\n        };\n      })(this));\n    };\n\n    Block.prototype.after = function(context) {\n      return functionNode(((function(_this) {\n        return function() {\n          var args, blockData, curid, ids, out, spec, _i, _len;\n          if ((_this.blockSpec != null) && _this.blockSpec.End) {\n            blockData = context.blockData();\n            ids = _.unique(blockData.select(\"id\"));\n            console.log(\"END ids\", ids);\n            out = {};\n            for (_i = 0, _len = ids.length; _i < _len; _i++) {\n              curid = ids[_i];\n              out[curid] = DataTable.fromRecords(blockData.filter({\n                id: curid\n              }).get());\n            }\n            args = _.extend(context.exState.toRecord(), {\n              context: context\n            }, out);\n            console.log(\"block end args\");\n            spec = _this.blockSpec.End.apply(args);\n            return _this.showEvent(spec, context);\n          } else {\n            return Q.fcall(0);\n          }\n        };\n      })(this)));\n    };\n\n    return Block;\n\n  })(RunnableNode);\n\n  exports.BlockSeq = BlockSeq = (function(_super) {\n    __extends(BlockSeq, _super);\n\n    function BlockSeq(children) {\n      BlockSeq.__super__.constructor.call(this, children);\n    }\n\n    return BlockSeq;\n\n  })(RunnableNode);\n\n  exports.Prelude = Prelude = (function(_super) {\n    __extends(Prelude, _super);\n\n    function Prelude(children) {\n      Prelude.__super__.constructor.call(this, children);\n    }\n\n    Prelude.prototype.before = function(context) {\n      return functionNode(((function(_this) {\n        return function() {\n          return context.updateState(function() {\n            return context.exState.insidePrelude();\n          });\n        };\n      })(this)));\n    };\n\n    Prelude.prototype.after = function(context) {\n      return functionNode(((function(_this) {\n        return function() {\n          return context.updateState(function() {\n            return context.exState.outsidePrelude();\n          });\n        };\n      })(this)));\n    };\n\n    return Prelude;\n\n  })(RunnableNode);\n\n  exports.Coda = Coda = (function(_super) {\n    __extends(Coda, _super);\n\n    function Coda(children) {\n      Coda.__super__.constructor.call(this, children);\n    }\n\n    return Coda;\n\n  })(RunnableNode);\n\n  exports.ExperimentState = ExperimentState = (function() {\n    function ExperimentState() {\n      this.inPrelude = false;\n      this.trial = {};\n      this.block = {};\n      this.event = {};\n      this.blockNumber = 0;\n      this.trialNumber = 0;\n      this.eventNumber = 0;\n      this.stimulus = {};\n      this.response = {};\n    }\n\n    ExperimentState.prototype.insidePrelude = function() {\n      var ret;\n      ret = $.extend({}, this);\n      ret.inPrelude = true;\n      return ret;\n    };\n\n    ExperimentState.prototype.outsidePrelude = function() {\n      var ret;\n      ret = $.extend({}, this);\n      ret.inPrelude = false;\n      return ret;\n    };\n\n    ExperimentState.prototype.nextBlock = function(block) {\n      var ret;\n      ret = $.extend({}, this);\n      ret.blockNumber = this.blockNumber + 1;\n      ret.block = block;\n      return ret;\n    };\n\n    ExperimentState.prototype.nextTrial = function(trial) {\n      var ret;\n      ret = $.extend({}, this);\n      ret.trial = trial;\n      ret.trialNumber = this.trialNumber + 1;\n      return ret;\n    };\n\n    ExperimentState.prototype.nextEvent = function(event) {\n      var ret;\n      ret = $.extend({}, this);\n      ret.event = event;\n      ret.eventNumber = this.eventNumber + 1;\n      return ret;\n    };\n\n    ExperimentState.prototype.toRecord = function() {\n      var key, ret, value, _ref, _ref1, _ref10, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9;\n      ret = {\n        blockNumber: this.blockNumber,\n        trialNumber: this.trialNumber,\n        eventNumber: this.eventNumber,\n        stimulus: (_ref = this.event) != null ? (_ref1 = _ref.stimulus) != null ? (_ref2 = _ref1.constructor) != null ? _ref2.name : void 0 : void 0 : void 0,\n        response: (_ref3 = this.event) != null ? (_ref4 = _ref3.response) != null ? (_ref5 = _ref4.constructor) != null ? _ref5.name : void 0 : void 0 : void 0,\n        stimulusID: (_ref6 = this.event) != null ? (_ref7 = _ref6.stimulus) != null ? _ref7.id : void 0 : void 0,\n        responseID: (_ref8 = this.event) != null ? (_ref9 = _ref8.response) != null ? _ref9.id : void 0 : void 0\n      };\n      if (!_.isEmpty(this.trial) && (this.trial.record != null)) {\n        _ref10 = this.trial.record;\n        for (key in _ref10) {\n          value = _ref10[key];\n          ret[key] = value;\n        }\n      }\n      return ret;\n    };\n\n    return ExperimentState;\n\n  })();\n\n  createContext = function(id) {\n    var stage;\n    if (id == null) {\n      id = \"container\";\n    }\n    stage = new Kinetic.Stage({\n      container: id,\n      width: $(\"#\" + id).width(),\n      height: $(\"#\" + id).height()\n    });\n    return new KineticContext(stage);\n  };\n\n  exports.createContext = createContext;\n\n\n  /*\n    class UserData\n    constructor: ->\n      @userData = TAFFY({})\n  \n    blockData: (blockNum=null) ->\n      if not blockNum?\n        blockNum = @exState.blockNumber\n  \n      @userData.filter({ blockNumber: blockNum })\n   */\n\n  exports.ExperimentContext = ExperimentContext = (function() {\n    function ExperimentContext(stimFactory) {\n      this.stimFactory = stimFactory;\n      this.userData = TAFFY({});\n      this.exState = new ExperimentState();\n      this.eventData = new EventDataLog();\n      this.log = [];\n      this.trialNumber = 0;\n      this.currentTrial = new Trial([], {});\n      this.numBlocks = 0;\n    }\n\n    ExperimentContext.prototype.updateState = function(fun) {\n      this.exState = fun(this.exState);\n      return this.exState;\n    };\n\n    ExperimentContext.prototype.pushData = function(data, withState) {\n      var record;\n      if (withState == null) {\n        withState = true;\n      }\n      console.log(\"pushing data\", data);\n      if (withState) {\n        record = _.extend(this.exState.toRecord(), data);\n      } else {\n        record = data;\n      }\n      return this.userData.insert(record);\n    };\n\n    ExperimentContext.prototype.handleValue = function(arg) {\n      if ((arg != null) && arg instanceof ResponseData) {\n        return this.pushData(arg.data);\n      }\n    };\n\n    ExperimentContext.prototype.width = function() {\n      return 0;\n    };\n\n    ExperimentContext.prototype.height = function() {\n      return 0;\n    };\n\n    ExperimentContext.prototype.offsetX = function() {\n      return 0;\n    };\n\n    ExperimentContext.prototype.offsetY = function() {\n      return 0;\n    };\n\n    ExperimentContext.prototype.centerX = function() {\n      return this.width() / 2 + this.offsetX();\n    };\n\n    ExperimentContext.prototype.centerY = function() {\n      return this.height() / 2 + this.offsetY();\n    };\n\n    ExperimentContext.prototype.screenInfo = function() {\n      return {\n        width: this.width(),\n        height: this.height(),\n        offset: {\n          x: this.offsetX(),\n          y: this.offsetY()\n        },\n        center: {\n          x: this.centerX(),\n          y: this.centerY()\n        }\n      };\n    };\n\n    ExperimentContext.prototype.logEvent = function(key, value) {\n      var record;\n      record = _.clone(this.currentTrial.record);\n      record[key] = value;\n      this.log.push(record);\n      return console.log(this.log);\n    };\n\n    ExperimentContext.prototype.trialData = function() {\n      var ret;\n      ret = this.userData().filter({\n        trialNumber: this.exState.trialNumber\n      });\n      if (ret.length === 1) {\n        return ret[0];\n      } else {\n        return ret;\n      }\n    };\n\n    ExperimentContext.prototype.blockData = function(args) {\n      if (args == null) {\n        args = {\n          blockNum: null,\n          name: null\n        };\n      }\n      if (args.blockNum == null) {\n        args.blockNum = this.exState.blockNumber;\n      }\n      if (!args.name) {\n        return this.userData().filter({\n          blockNumber: args.blockNum\n        });\n      } else {\n        return this.userData().filter({\n          blockNumber: args.blockNum\n        }).select(args.name);\n      }\n    };\n\n    ExperimentContext.prototype.allData = function(args) {\n      if (args == null) {\n        args = {\n          name: null\n        };\n      }\n      if (!args.name) {\n        return this.userData();\n      } else {\n        return this.userData().select(args.name);\n      }\n    };\n\n    ExperimentContext.prototype.showEvent = function(event) {\n      return event.start(this);\n    };\n\n    ExperimentContext.prototype.showStimulus = function(stimulus) {\n      var p;\n      p = stimulus.render(this);\n      p.present(this);\n      console.log(\"show Stimulus, drawing\");\n      return this.draw();\n    };\n\n    ExperimentContext.prototype.start = function(blockList) {\n      var error, farray;\n      this.numBlocks = blockList.length();\n      try {\n        farray = RunnableNode.functionList(blockList, this, function(block) {\n          return console.log(\"block callback\", block);\n        });\n        return RunnableNode.chainFunctions(farray);\n      } catch (_error) {\n        error = _error;\n        return console.log(\"caught error:\", error);\n      }\n    };\n\n    ExperimentContext.prototype.clearContent = function() {};\n\n    ExperimentContext.prototype.clearBackground = function() {};\n\n    ExperimentContext.prototype.keydownStream = function() {\n      return Bacon.fromEventTarget(window, \"keydown\");\n    };\n\n    ExperimentContext.prototype.keypressStream = function() {\n      return Bacon.fromEventTarget(window, \"keypress\");\n    };\n\n    ExperimentContext.prototype.mousepressStream = function() {};\n\n    ExperimentContext.prototype.draw = function() {};\n\n    ExperimentContext.prototype.insertHTMLDiv = function() {\n      $(\"canvas\").css(\"position\", \"absolute\");\n      $(\"#container\").append(\"<div id=\\\"htmlcontainer\\\" class=\\\"htmllayer\\\"></div>\");\n      $(\"#htmlcontainer\").css({\n        position: \"absolute\",\n        \"z-index\": 999,\n        outline: \"none\",\n        padding: \"5px\"\n      });\n      $(\"#container\").attr(\"tabindex\", 0);\n      return $(\"#container\").css(\"outline\", \"none\");\n    };\n\n    ExperimentContext.prototype.clearHtml = function() {\n      $(\"#htmlcontainer\").empty();\n      return $(\"#htmlcontainer\").hide();\n    };\n\n    ExperimentContext.prototype.appendHtml = function(input) {\n      $(\"#htmlcontainer\").addClass(\"htmllayer\");\n      $(\"#htmlcontainer\").append(input);\n      return $(\"#htmlcontainer\").show();\n    };\n\n    ExperimentContext.prototype.hideHtml = function() {\n      return $(\"#htmlcontainer\").hide();\n    };\n\n    return ExperimentContext;\n\n  })();\n\n  KineticContext = (function(_super) {\n    __extends(KineticContext, _super);\n\n    function KineticContext(stage) {\n      this.stage = stage;\n      KineticContext.__super__.constructor.call(this, new DefaultComponentFactory());\n      this.contentLayer = new Kinetic.Layer({\n        clearBeforeDraw: true\n      });\n      this.backgroundLayer = new Kinetic.Layer({\n        clearBeforeDraw: true\n      });\n      this.background = new Background([], {\n        fill: \"white\"\n      });\n      this.stage.add(this.backgroundLayer);\n      this.stage.add(this.contentLayer);\n      this.insertHTMLDiv();\n    }\n\n    KineticContext.prototype.insertHTMLDiv = function() {\n      KineticContext.__super__.insertHTMLDiv.apply(this, arguments);\n      return $(\".kineticjs-content\").css(\"position\", \"absolute\");\n    };\n\n    KineticContext.prototype.setBackground = function(newBackground) {\n      var p;\n      this.background = newBackground;\n      this.backgroundLayer.removeChildren();\n      p = this.background.render(this);\n      return p.present(this, this.backgroundLayer);\n    };\n\n    KineticContext.prototype.drawBackground = function() {\n      return this.backgroundLayer.draw();\n    };\n\n    KineticContext.prototype.clearBackground = function() {\n      return this.backgroundLayer.removeChildren();\n    };\n\n    KineticContext.prototype.clearContent = function(draw) {\n      if (draw == null) {\n        draw = false;\n      }\n      this.clearHtml();\n      this.backgroundLayer.draw();\n      this.contentLayer.removeChildren();\n      if (draw) {\n        return this.draw();\n      }\n    };\n\n    KineticContext.prototype.draw = function() {\n      $('#container').focus();\n      return this.contentLayer.draw();\n    };\n\n    KineticContext.prototype.width = function() {\n      return this.stage.getWidth();\n    };\n\n    KineticContext.prototype.height = function() {\n      return this.stage.getHeight();\n    };\n\n    KineticContext.prototype.offsetX = function() {\n      return this.stage.getOffsetX();\n    };\n\n    KineticContext.prototype.offsetY = function() {\n      return this.stage.getOffsetY();\n    };\n\n    KineticContext.prototype.showStimulus = function(stimulus) {\n      var p;\n      p = stimulus.render(this);\n      p.present(this);\n      console.log(\"show Stimulus, drawing\");\n      return this.draw();\n    };\n\n    KineticContext.prototype.keydownStream = function() {\n      return Bacon.fromEventTarget(window, \"keydown\");\n    };\n\n    KineticContext.prototype.keypressStream = function() {\n      return Bacon.fromEventTarget(window, \"keypress\");\n    };\n\n    KineticContext.prototype.mousepressStream = function() {\n      var MouseBus;\n      MouseBus = (function() {\n        function MouseBus() {\n          this.stream = new Bacon.Bus();\n          this.handler = (function(_this) {\n            return function(x) {\n              return _this.stream.push(x);\n            };\n          })(this);\n          this.stage.on(\"mousedown\", this.handler);\n        }\n\n        MouseBus.prototype.stop = function() {\n          this.stage.off(\"mousedown\", this.handler);\n          return this.stream.end();\n        };\n\n        return MouseBus;\n\n      })();\n      return new MouseBus();\n    };\n\n    return KineticContext;\n\n  })(exports.ExperimentContext);\n\n  exports.KineticContext = KineticContext;\n\n  buildStimulus = function(spec, context) {\n    var params, stimType;\n    stimType = _.keys(spec)[0];\n    params = _.values(spec)[0];\n    console.log(\"stimType\", stimType);\n    console.log(\"params\", params);\n    return context.stimFactory.makeStimulus(stimType, params, context);\n  };\n\n  buildResponse = function(spec, context) {\n    var params, responseType;\n    responseType = _.keys(spec)[0];\n    params = _.values(spec)[0];\n    return context.stimFactory.makeResponse(responseType, params, context);\n  };\n\n  buildEvent = function(spec, context) {\n    var response, responseSpec, stim, stimSpec;\n    stimSpec = _.omit(spec, \"Next\");\n    responseSpec = _.pick(spec, \"Next\");\n    if ((responseSpec == null) || _.isEmpty(responseSpec)) {\n      stim = buildStimulus(stimSpec, context);\n      if (!stim instanceof Response) {\n        throw new Error(\"buildEvent: Missing Response from event: \", spec);\n      }\n      return context.stimFactory.makeEvent(stim, stim, context);\n    } else {\n      stim = buildStimulus(stimSpec, context);\n      response = buildResponse(responseSpec.Next, context);\n      return context.stimFactory.makeEvent(stim, response, context);\n    }\n  };\n\n  buildTrial = function(eventSpec, record, context, feedback, backgroundSpec) {\n    var background, events, key, value;\n    events = (function() {\n      var _results;\n      _results = [];\n      for (key in eventSpec) {\n        value = eventSpec[key];\n        _results.push(context.stimFactory.buildEvent(value));\n      }\n      return _results;\n    })();\n    if (backgroundSpec != null) {\n      background = context.stimFactory.makeStimulus(\"Background\", backgroundSpec);\n      return new Trial(events, record, feedback, background);\n    } else {\n      return new Trial(events, record, feedback);\n    }\n  };\n\n  makeEventSeq = function(spec, context) {\n    var key, response, responseSpec, stim, stimSpec, value, _results;\n    _results = [];\n    for (key in spec) {\n      value = spec[key];\n      stimSpec = _.omit(value, \"Next\");\n      responseSpec = _.pick(value, \"Next\");\n      console.log(\"building stim\", stimSpec);\n      stim = buildStimulus(stimSpec, context);\n      response = buildResponse(responseSpec.Next, context);\n      _results.push(context.stimFactory.makeEvent(stim, response, context));\n    }\n    return _results;\n  };\n\n  buildPrelude = function(preludeSpec, context) {\n    var events;\n    events = makeEventSeq(preludeSpec, context);\n    return new Prelude(events);\n  };\n\n  buildCoda = function(codaSpec, context) {\n    var events;\n    events = makeEventSeq(codaSpec, context);\n    return new Coda(events);\n  };\n\n  __dummySpec = {\n    Events: {\n      1: {\n        Nothing: \"\",\n        Next: {\n          Timeout: {\n            duration: 0\n          }\n        }\n      }\n    }\n  };\n\n  exports.Presenter = Presenter = (function() {\n    function Presenter(trialList, display, context) {\n      this.trialList = trialList;\n      this.display = display;\n      this.context = context;\n      this.trialBuilder = this.display.Trial;\n      this.prelude = this.display.Prelude != null ? buildPrelude(this.display.Prelude.Events, this.context) : buildPrelude(__dummySpec.Events, this.context);\n      this.coda = this.display.Coda != null ? buildCoda(this.display.Coda.Events, this.context) : (console.log(\"building dummy coda\"), buildCoda(__dummySpec.Events, this.context));\n    }\n\n    Presenter.prototype.start = function() {\n      var args, block, record, trialNum, trialSpec, trials;\n      this.blockList = new BlockSeq((function() {\n        var _i, _len, _ref, _results;\n        _ref = this.trialList.blocks;\n        _results = [];\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          block = _ref[_i];\n          trials = (function() {\n            var _j, _ref1, _results1;\n            _results1 = [];\n            for (trialNum = _j = 0, _ref1 = block.length; 0 <= _ref1 ? _j < _ref1 : _j > _ref1; trialNum = 0 <= _ref1 ? ++_j : --_j) {\n              record = _.clone(block[trialNum]);\n              args = {};\n              args.trial = record;\n              args.screen = this.context.screenInfo();\n              trialSpec = this.trialBuilder.apply(args);\n              _results1.push(buildTrial(trialSpec.Events, record, this.context, trialSpec.Feedback, trialSpec.Background));\n            }\n            return _results1;\n          }).call(this);\n          _results.push(new Block(trials, this.display.Block));\n        }\n        return _results;\n      }).call(this));\n      return this.prelude.start(this.context).then((function(_this) {\n        return function() {\n          return _this.blockList.start(_this.context);\n        };\n      })(this)).then((function(_this) {\n        return function() {\n          console.log(\"inside coda\");\n          return _this.coda.start(_this.context);\n        };\n      })(this));\n    };\n\n    return Presenter;\n\n  })();\n\n  exports.Experiment = Experiment = (function() {\n    function Experiment(designSpec, stimFactory) {\n      this.designSpec = designSpec;\n      this.stimFactory = stimFactory != null ? stimFactory : new MockStimFactory();\n      this.design = new ExpDesign(this.designSpec);\n      this.display = this.designSpec.Display;\n      this.trialGenerator = this.display.Trial;\n    }\n\n    Experiment.prototype.buildStimulus = function(event, context) {\n      var params, stimType;\n      stimType = _.keys(event)[0];\n      params = _.values(event)[0];\n      return this.stimFactory.makeStimulus(stimType, params, context);\n    };\n\n    Experiment.prototype.buildEvent = function(event, context) {\n      var params, responseType;\n      responseType = _.keys(event)[0];\n      params = _.values(event)[0];\n      return this.stimFactory.makeResponse(responseType, params, context);\n    };\n\n    Experiment.prototype.buildTrial = function(eventSpec, record, context) {\n      var events, key, response, responseSpec, stim, stimSpec, value;\n      events = (function() {\n        var _results;\n        _results = [];\n        for (key in eventSpec) {\n          value = eventSpec[key];\n          stimSpec = _.omit(value, \"Next\");\n          responseSpec = _.pick(value, \"Next\");\n          stim = this.buildStimulus(stimSpec);\n          response = this.buildResponse(responseSpec.Next);\n          _results.push(this.stimFactory.makeEvent(stim, response));\n        }\n        return _results;\n      }).call(this);\n      return new Trial(events, record);\n    };\n\n    Experiment.prototype.start = function(context) {\n      var i, record, trialList, trialSpec, trials;\n      trials = this.design.fullDesign;\n      console.log(trials.nrow());\n      trialList = (function() {\n        var _i, _ref, _results;\n        _results = [];\n        for (i = _i = 0, _ref = trials.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n          record = trials.record(i);\n          record.$trialNumber = i;\n          trialSpec = this.trialGenerator(record);\n          _results.push(this.buildTrial(trialSpec, record, context));\n        }\n        return _results;\n      }).call(this);\n      return context.start(trialList);\n    };\n\n    return Experiment;\n\n  })();\n\n  exports.letters = ['a', 'b', 'c', 'd', 'e', 'd', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z'];\n\n  des = {\n    Design: {\n      Blocks: [\n        [\n          {\n            a: 1,\n            b: 2,\n            c: 3,\n            a: 2,\n            b: 3,\n            c: 4\n          }\n        ], [\n          {\n            a: 5,\n            b: 7,\n            c: 6,\n            a: 5,\n            b: 7,\n            c: 6\n          }\n        ]\n      ]\n    }\n  };\n\n  console.log(des.Blocks);\n\n  exports.buildStimulus = buildStimulus;\n\n  exports.buildResponse = buildResponse;\n\n  exports.buildEvent = buildEvent;\n\n  exports.buildTrial = buildTrial;\n\n  exports.buildPrelude = buildPrelude;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/stimresp.js":{"id":8,"canonicalName":"src/stimresp.js","code":"(function () {\n    var ActionPresentable, ContainerDrawable, Drawable, GraphicalStimulus, Kinetic, KineticDrawable, KineticStimulus, Presentable, Response, ResponseData, Stimulus, lay, _, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    _ = require('16', module);\n    lay = require('9', module);\n    Kinetic = require('15', module);\n    exports.Stimulus = Stimulus = function () {\n        Stimulus.prototype.standardDefaults = {};\n        Stimulus.prototype.defaults = {};\n        function Stimulus(spec) {\n            var _ref;\n            if (spec == null) {\n                spec = {};\n            }\n            this.spec = _.defaults(spec, this.defaults);\n            this.spec = _.defaults(spec, this.standardDefaults);\n            this.spec = _.omit(this.spec, function (value, key) {\n                return value == null;\n            });\n            this.name = this.constructor.name;\n            if (((_ref = this.spec) != null ? _ref.id : void 0) != null) {\n                this.id = this.spec.id;\n            } else {\n                this.id = _.uniqueId('stim_');\n            }\n            this.stopped = false;\n            this.name = this.constructor.name;\n            this.initialize();\n        }\n        Stimulus.prototype.initialize = function () {\n        };\n        Stimulus.prototype.get = function (name) {\n            return this.spec[name];\n        };\n        Stimulus.prototype.set = function (name, value) {\n            return this.spec[name] = value;\n        };\n        Stimulus.prototype.reset = function () {\n            return this.stopped = false;\n        };\n        Stimulus.prototype.render = function (context, layer) {\n        };\n        Stimulus.prototype.stop = function (context) {\n            return this.stopped = true;\n        };\n        return Stimulus;\n    }();\n    exports.GraphicalStimulus = GraphicalStimulus = function (_super) {\n        __extends(GraphicalStimulus, _super);\n        GraphicalStimulus.prototype.standardDefaults = {\n            x: 0,\n            y: 0,\n            origin: 'top-left'\n        };\n        function GraphicalStimulus(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            if (spec.layout != null) {\n                this.layout = spec.layout;\n            } else {\n                this.layout = new lay.AbsoluteLayout();\n            }\n            this.overlay = false;\n            GraphicalStimulus.__super__.constructor.call(this, spec);\n        }\n        GraphicalStimulus.prototype.drawable = function (knode) {\n            return function (context) {\n                return console.log('GraphicalStimulus: drawable, no op');\n            };\n        };\n        GraphicalStimulus.prototype.toPixels = function (arg, dim) {\n            return lay.toPixels(arg, dim);\n        };\n        GraphicalStimulus.prototype.xyoffset = function (origin, nodeWidth, nodeHeight) {\n            switch (origin) {\n            case 'center':\n                return [\n                    -nodeWidth / 2,\n                    -nodeHeight / 2\n                ];\n            case 'center-left' || 'left-center':\n                return [\n                    0,\n                    -nodeHeight / 2\n                ];\n            case 'center-right' || 'right-center':\n                return [\n                    -nodeWidth,\n                    -nodeHeight / 2\n                ];\n            case 'top-left' || 'left-top':\n                return [\n                    0,\n                    0\n                ];\n            case 'top-right' || 'right-top':\n                return [\n                    -nodeWidth,\n                    0\n                ];\n            case 'top-center' || 'center-top':\n                return [\n                    -nodeWidth / 2,\n                    0\n                ];\n            case 'bottom-left' || 'left-bottom':\n                return [\n                    0,\n                    -nodeHeight\n                ];\n            case 'bottom-right' || 'right-bottom':\n                return [\n                    -nodeWidth,\n                    -nodeHeight\n                ];\n            case 'bottom-center' || 'center-bottom':\n                return [\n                    -nodeWidth / 2,\n                    -nodeHeight\n                ];\n            default:\n                throw new Error('failed to match \\'origin\\' argument:', origin);\n            }\n        };\n        GraphicalStimulus.prototype.computeCoordinates = function (context, position, nodeWidth, nodeHeight) {\n            var xy, xyoff;\n            if (nodeWidth == null) {\n                nodeWidth = 0;\n            }\n            if (nodeHeight == null) {\n                nodeHeight = 0;\n            }\n            xy = function () {\n                if (position != null) {\n                    return this.layout.computePosition([\n                        context.width(),\n                        context.height()\n                    ], position);\n                } else if (this.spec.x != null && this.spec.y != null) {\n                    return [\n                        this.layout.convertToCoordinate(this.spec.x, context.width()),\n                        this.layout.convertToCoordinate(this.spec.y, context.height())\n                    ];\n                } else {\n                    throw new Error('computeCoordinates: either position or x,y coordinates must be defined');\n                }\n            }.call(this);\n            if (this.spec.origin != null) {\n                xyoff = this.xyoffset(this.spec.origin, nodeWidth, nodeHeight);\n                xy[0] = xy[0] + xyoff[0];\n                xy[1] = xy[1] + xyoff[1];\n            }\n            return xy;\n        };\n        GraphicalStimulus.prototype.width = function () {\n            return 0;\n        };\n        GraphicalStimulus.prototype.height = function () {\n            return 0;\n        };\n        GraphicalStimulus.prototype.bounds = function () {\n            return {\n                x: 0,\n                y: 0,\n                width: 0,\n                height: 0\n            };\n        };\n        return GraphicalStimulus;\n    }(exports.Stimulus);\n    exports.KineticStimulus = KineticStimulus = function (_super) {\n        __extends(KineticStimulus, _super);\n        function KineticStimulus() {\n            return KineticStimulus.__super__.constructor.apply(this, arguments);\n        }\n        KineticStimulus.prototype.presentable = function (nodes) {\n            console.log('creating presentable of', nodes);\n            return new KineticDrawable(nodes);\n        };\n        KineticStimulus.nodeSize = function (node) {\n            if (node.getClassName() === 'Group') {\n                console.log('class is group!');\n                return KineticStimulus.groupSize(node);\n            } else {\n                return {\n                    width: node.getWidth(),\n                    height: node.getHeight()\n                };\n            }\n        };\n        KineticStimulus.nodePosition = function (node) {\n            var xb, yb;\n            if (node.getClassName() === 'Group') {\n                console.log('class is group!');\n                xb = KineticStimulus.groupXBounds(node);\n                yb = KineticStimulus.groupYBounds(node);\n                console.log('xb is', xb);\n                console.log('yb is', yb);\n                return {\n                    x: xb[0],\n                    y: yb[0]\n                };\n            } else {\n                return {\n                    x: node.getX(),\n                    y: node.getY()\n                };\n            }\n        };\n        KineticStimulus.groupSize = function (group) {\n            var xb, yb;\n            xb = this.groupXBounds(group);\n            yb = this.groupYBounds(group);\n            return {\n                width: xb[1] - xb[0],\n                height: yb[1] - yb[0]\n            };\n        };\n        KineticStimulus.groupXBounds = function (group) {\n            var children, i, pos, xmax, xmin, _i, _ref;\n            children = group.getChildren();\n            xmin = Number.MAX_VALUE;\n            xmax = -1;\n            for (i = _i = 0, _ref = children.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                pos = children[i].getAbsolutePosition();\n                if (pos.x < xmin) {\n                    xmin = pos.x;\n                }\n                if (pos.x + children[i].getWidth() > xmax) {\n                    xmax = pos.x + children[i].getWidth();\n                }\n            }\n            return [\n                xmin,\n                xmax\n            ];\n        };\n        KineticStimulus.groupYBounds = function (group) {\n            var children, i, pos, ymax, ymin, _i, _ref;\n            children = group.getChildren();\n            ymin = Number.MAX_VALUE;\n            ymax = -1;\n            for (i = _i = 0, _ref = children.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                pos = children[i].getAbsolutePosition();\n                if (pos.y < ymin) {\n                    ymin = children[i].getY();\n                }\n                if (pos.y + children[i].getHeight() > ymax) {\n                    ymax = pos.y + children[i].getHeight();\n                }\n            }\n            return [\n                ymin,\n                ymax\n            ];\n        };\n        KineticStimulus.groupPosition = function (group) {\n            var children, i, pos, x, y, _i, _ref;\n            children = group.getChildren();\n            if (children.length === 0) {\n                return {\n                    x: 0,\n                    y: 0\n                };\n            } else {\n                x = Number.MAX_VALUE;\n                y = -1;\n                pos = children[i].getAbsolutePosition();\n                for (i = _i = 0, _ref = children.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                    if (pos.x < x) {\n                        x = pos.x;\n                    }\n                    if (pos.y < y) {\n                        y = pos.y;\n                    }\n                }\n                return {\n                    x: x + group.getX(),\n                    y: y + group.getY()\n                };\n            }\n        };\n        return KineticStimulus;\n    }(exports.GraphicalStimulus);\n    exports.Presentable = Presentable = function () {\n        function Presentable() {\n        }\n        Presentable.prototype.present = function (context) {\n        };\n        return Presentable;\n    }();\n    exports.ActionPresentable = ActionPresentable = function (_super) {\n        var _class;\n        __extends(ActionPresentable, _super);\n        function ActionPresentable() {\n            return _class.apply(this, arguments);\n        }\n        _class = ActionPresentable.action;\n        ActionPresentable.prototype.present = function (context) {\n            return this.action.apply(context);\n        };\n        return ActionPresentable;\n    }(exports.Presentable);\n    exports.Drawable = Drawable = function (_super) {\n        __extends(Drawable, _super);\n        function Drawable() {\n            return Drawable.__super__.constructor.apply(this, arguments);\n        }\n        Drawable.prototype.present = function (context) {\n        };\n        Drawable.prototype.x = function () {\n            return 0;\n        };\n        Drawable.prototype.y = function () {\n            return 0;\n        };\n        Drawable.prototype.width = function () {\n            return 0;\n        };\n        Drawable.prototype.height = function () {\n            return 0;\n        };\n        Drawable.prototype.bounds = function () {\n            return {\n                x: this.x(),\n                y: this.y(),\n                width: this.width(),\n                height: this.height()\n            };\n        };\n        return Drawable;\n    }(exports.Presentable);\n    exports.KineticDrawable = KineticDrawable = function (_super) {\n        __extends(KineticDrawable, _super);\n        function KineticDrawable(nodes) {\n            this.nodes = nodes;\n            if (!_.isArray(this.nodes)) {\n                this.nodes = [this.nodes];\n            }\n        }\n        KineticDrawable.prototype.present = function (context, layer) {\n            var node, _i, _len, _ref, _results;\n            console.log('presenting ', this.nodes);\n            _ref = this.nodes;\n            _results = [];\n            for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n                node = _ref[_i];\n                if (layer == null) {\n                    _results.push(context.contentLayer.add(node));\n                } else {\n                    console.log('drawing in layer supplied as arg');\n                    _results.push(layer.add(node));\n                }\n            }\n            return _results;\n        };\n        KineticDrawable.prototype.x = function () {\n            var xs;\n            xs = _.map(this.nodes, function (node) {\n                return exports.KineticStimulus.nodePosition(node).x;\n            });\n            return _.min(xs);\n        };\n        KineticDrawable.prototype.y = function () {\n            var ys;\n            ys = _.map(this.nodes, function (node) {\n                return exports.KineticStimulus.nodePosition(node).y;\n            });\n            return _.min(ys);\n        };\n        KineticDrawable.prototype.xmax = function () {\n            var xs;\n            xs = _.map(this.nodes, function (node) {\n                return exports.KineticStimulus.nodePosition(node).x + exports.KineticStimulus.nodeSize(node).width;\n            });\n            return _.max(xs);\n        };\n        KineticDrawable.prototype.ymax = function () {\n            var xs;\n            xs = _.map(this.nodes, function (node) {\n                return exports.KineticStimulus.nodePosition(node).y + exports.KineticStimulus.nodeSize(node).height;\n            });\n            return _.max(xs);\n        };\n        KineticDrawable.prototype.width = function () {\n            return this.xmax() - this.x();\n        };\n        KineticDrawable.prototype.height = function () {\n            return this.ymax() - this.y();\n        };\n        return KineticDrawable;\n    }(exports.Drawable);\n    exports.ContainerDrawable = ContainerDrawable = function (_super) {\n        __extends(ContainerDrawable, _super);\n        function ContainerDrawable(nodes) {\n            this.nodes = nodes;\n            console.log('creating container drawable');\n        }\n        ContainerDrawable.prototype.present = function (context, layer) {\n            var node, _i, _len, _ref, _results;\n            _ref = this.nodes;\n            _results = [];\n            for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n                node = _ref[_i];\n                if (!layer) {\n                    _results.push(node.present(context));\n                } else {\n                    _results.push(node.present(context, layer));\n                }\n            }\n            return _results;\n        };\n        return ContainerDrawable;\n    }(exports.Drawable);\n    exports.Response = Response = function (_super) {\n        __extends(Response, _super);\n        function Response() {\n            return Response.__super__.constructor.apply(this, arguments);\n        }\n        Response.prototype.start = function (context) {\n            return this.activate(context);\n        };\n        Response.prototype.activate = function (context) {\n        };\n        return Response;\n    }(exports.Stimulus);\n    exports.ResponseData = ResponseData = function () {\n        function ResponseData(data) {\n            this.data = data;\n        }\n        return ResponseData;\n    }();\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/stimresp.js\"],\"names\":[\"ActionPresentable\",\"ContainerDrawable\",\"Drawable\",\"GraphicalStimulus\",\"Kinetic\",\"KineticDrawable\",\"KineticStimulus\",\"Presentable\",\"Response\",\"ResponseData\",\"Stimulus\",\"lay\",\"_\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"exports\",\"standardDefaults\",\"defaults\",\"spec\",\"_ref\",\"omit\",\"value\",\"name\",\"id\",\"uniqueId\",\"stopped\",\"initialize\",\"get\",\"set\",\"reset\",\"render\",\"context\",\"layer\",\"stop\",\"_super\",\"x\",\"y\",\"origin\",\"layout\",\"AbsoluteLayout\",\"overlay\",\"drawable\",\"knode\",\"console\",\"log\",\"toPixels\",\"arg\",\"dim\",\"xyoffset\",\"nodeWidth\",\"nodeHeight\",\"Error\",\"computeCoordinates\",\"position\",\"xy\",\"xyoff\",\"computePosition\",\"width\",\"height\",\"convertToCoordinate\",\"bounds\",\"apply\",\"arguments\",\"presentable\",\"nodes\",\"nodeSize\",\"node\",\"getClassName\",\"groupSize\",\"getWidth\",\"getHeight\",\"nodePosition\",\"xb\",\"yb\",\"groupXBounds\",\"groupYBounds\",\"getX\",\"getY\",\"group\",\"children\",\"i\",\"pos\",\"xmax\",\"xmin\",\"_i\",\"getChildren\",\"Number\",\"MAX_VALUE\",\"length\",\"getAbsolutePosition\",\"ymax\",\"ymin\",\"groupPosition\",\"present\",\"_class\",\"action\",\"isArray\",\"_len\",\"_results\",\"push\",\"contentLayer\",\"add\",\"xs\",\"map\",\"min\",\"ys\",\"max\",\"start\",\"activate\",\"data\"],\"mappings\":\"AACA,CAAC,YAAW;AAAA,IACV,IAAIA,iBAAJ,EAAuBC,iBAAvB,EAA0CC,QAA1C,EAAoDC,iBAApD,EAAuEC,OAAvE,EAAgFC,eAAhF,EAAiGC,eAAjG,EAAkHC,WAAlH,EAA+HC,QAA/H,EAAyIC,YAAzI,EAAuJC,QAAvJ,EAAiKC,GAAjK,EAAsKC,CAAtK,EACEC,SAAA,GAAY,GAAGC,cADjB,EAEEC,SAAA,GAAY,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAA,YAAE,SAASC,GAAT,IAAgBD,MAAhB,EAAwB;AAAA,gBAAE,IAAIJ,SAAA,CAAUM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ;AAAA,oBAAiCF,KAAA,CAAME,GAAN,IAAaD,MAAA,CAAOC,GAAP,CAAb,CAAnC;AAAA,aAA1B;AAAA,YAAyF,SAASE,IAAT,GAAgB;AAAA,gBAAE,KAAKC,WAAL,GAAmBL,KAAnB,CAAF;AAAA,aAAzG;AAAA,YAAuII,IAAA,CAAKE,SAAL,GAAiBL,MAAA,CAAOK,SAAxB,CAAvI;AAAA,YAA0KN,KAAA,CAAMM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA1K;AAAA,YAAwMJ,KAAA,CAAMO,SAAN,GAAkBN,MAAA,CAAOK,SAAzB,CAAxM;AAAA,YAA4O,OAAON,KAAP,CAA5O;AAAA,SAFtC,CADU;AAAA,IAKVJ,CAAA,GAAIY,OAAA,C,IAAA,E,MAAA,CAAJ,CALU;AAAA,IAOVb,GAAA,GAAMa,OAAA,C,GAAA,E,MAAA,CAAN,CAPU;AAAA,IASVpB,OAAA,GAAUoB,OAAA,C,IAAA,E,MAAA,CAAV,CATU;AAAA,IAWVC,OAAA,CAAQf,QAAR,GAAmBA,QAAA,GAAY,YAAW;AAAA,QACxCA,QAAA,CAASY,SAAT,CAAmBI,gBAAnB,GAAsC,EAAtC,CADwC;AAAA,QAGxChB,QAAA,CAASY,SAAT,CAAmBK,QAAnB,GAA8B,EAA9B,CAHwC;AAAA,QAKxC,SAASjB,QAAT,CAAkBkB,IAAlB,EAAwB;AAAA,YACtB,IAAIC,IAAJ,CADsB;AAAA,YAEtB,IAAID,IAAA,IAAQ,IAAZ,EAAkB;AAAA,gBAChBA,IAAA,GAAO,EAAP,CADgB;AAAA,aAFI;AAAA,YAKtB,KAAKA,IAAL,GAAYhB,CAAA,CAAEe,QAAF,CAAWC,IAAX,EAAiB,KAAKD,QAAtB,CAAZ,CALsB;AAAA,YAMtB,KAAKC,IAAL,GAAYhB,CAAA,CAAEe,QAAF,CAAWC,IAAX,EAAiB,KAAKF,gBAAtB,CAAZ,CANsB;AAAA,YAOtB,KAAKE,IAAL,GAAYhB,CAAA,CAAEkB,IAAF,CAAO,KAAKF,IAAZ,EAAkB,UAASG,KAAT,EAAgBb,GAAhB,EAAqB;AAAA,gBACjD,OAAOa,KAAA,IAAS,IAAhB,CADiD;AAAA,aAAvC,CAAZ,CAPsB;AAAA,YAUtB,KAAKC,IAAL,GAAY,KAAKX,WAAL,CAAiBW,IAA7B,CAVsB;AAAA,YAWtB,IAAK,CAAC,CAAAH,IAAA,GAAO,KAAKD,IAAZ,CAAD,IAAsB,IAAtB,GAA6BC,IAAA,CAAKI,EAAlC,GAAuC,KAAK,CAA5C,CAAD,IAAmD,IAAvD,EAA6D;AAAA,gBAC3D,KAAKA,EAAL,GAAU,KAAKL,IAAL,CAAUK,EAApB,CAD2D;AAAA,aAA7D,MAEO;AAAA,gBACL,KAAKA,EAAL,GAAUrB,CAAA,CAAEsB,QAAF,CAAW,OAAX,CAAV,CADK;AAAA,aAbe;AAAA,YAgBtB,KAAKC,OAAL,GAAe,KAAf,CAhBsB;AAAA,YAiBtB,KAAKH,IAAL,GAAY,KAAKX,WAAL,CAAiBW,IAA7B,CAjBsB;AAAA,YAkBtB,KAAKI,UAAL,GAlBsB;AAAA,SALgB;AAAA,QA0BxC1B,QAAA,CAASY,SAAT,CAAmBc,UAAnB,GAAgC,YAAW;AAAA,SAA3C,CA1BwC;AAAA,QA4BxC1B,QAAA,CAASY,SAAT,CAAmBe,GAAnB,GAAyB,UAASL,IAAT,EAAe;AAAA,YACtC,OAAO,KAAKJ,IAAL,CAAUI,IAAV,CAAP,CADsC;AAAA,SAAxC,CA5BwC;AAAA,QAgCxCtB,QAAA,CAASY,SAAT,CAAmBgB,GAAnB,GAAyB,UAASN,IAAT,EAAeD,KAAf,EAAsB;AAAA,YAC7C,OAAO,KAAKH,IAAL,CAAUI,IAAV,IAAkBD,KAAzB,CAD6C;AAAA,SAA/C,CAhCwC;AAAA,QAoCxCrB,QAAA,CAASY,SAAT,CAAmBiB,KAAnB,GAA2B,YAAW;AAAA,YACpC,OAAO,KAAKJ,OAAL,GAAe,KAAtB,CADoC;AAAA,SAAtC,CApCwC;AAAA,QAwCxCzB,QAAA,CAASY,SAAT,CAAmBkB,MAAnB,GAA4B,UAASC,OAAT,EAAkBC,KAAlB,EAAyB;AAAA,SAArD,CAxCwC;AAAA,QA0CxChC,QAAA,CAASY,SAAT,CAAmBqB,IAAnB,GAA0B,UAASF,OAAT,EAAkB;AAAA,YAC1C,OAAO,KAAKN,OAAL,GAAe,IAAtB,CAD0C;AAAA,SAA5C,CA1CwC;AAAA,QA8CxC,OAAOzB,QAAP,CA9CwC;AAAA,KAAZ,EAA9B,CAXU;AAAA,IA6DVe,OAAA,CAAQtB,iBAAR,GAA4BA,iBAAA,GAAqB,UAASyC,MAAT,EAAiB;AAAA,QAChE7B,SAAA,CAAUZ,iBAAV,EAA6ByC,MAA7B,EADgE;AAAA,QAGhEzC,iBAAA,CAAkBmB,SAAlB,CAA4BI,gBAA5B,GAA+C;AAAA,YAC7CmB,CAAA,EAAG,CAD0C;AAAA,YAE7CC,CAAA,EAAG,CAF0C;AAAA,YAG7CC,MAAA,EAAQ,UAHqC;AAAA,SAA/C,CAHgE;AAAA,QAShE,SAAS5C,iBAAT,CAA2ByB,IAA3B,EAAiC;AAAA,YAC/B,IAAIA,IAAA,IAAQ,IAAZ,EAAkB;AAAA,gBAChBA,IAAA,GAAO,EAAP,CADgB;AAAA,aADa;AAAA,YAI/B,IAAIA,IAAA,CAAKoB,MAAL,IAAe,IAAnB,EAAyB;AAAA,gBACvB,KAAKA,MAAL,GAAcpB,IAAA,CAAKoB,MAAnB,CADuB;AAAA,aAAzB,MAEO;AAAA,gBACL,KAAKA,MAAL,GAAc,IAAIrC,GAAA,CAAIsC,cAAR,EAAd,CADK;AAAA,aANwB;AAAA,YAS/B,KAAKC,OAAL,GAAe,KAAf,CAT+B;AAAA,YAU/B/C,iBAAA,CAAkBoB,SAAlB,CAA4BF,WAA5B,CAAwCF,IAAxC,CAA6C,IAA7C,EAAmDS,IAAnD,EAV+B;AAAA,SAT+B;AAAA,QAsBhEzB,iBAAA,CAAkBmB,SAAlB,CAA4B6B,QAA5B,GAAuC,UAASC,KAAT,EAAgB;AAAA,YACrD,OAAO,UAASX,OAAT,EAAkB;AAAA,gBACvB,OAAOY,OAAA,CAAQC,GAAR,CAAY,oCAAZ,CAAP,CADuB;AAAA,aAAzB,CADqD;AAAA,SAAvD,CAtBgE;AAAA,QA4BhEnD,iBAAA,CAAkBmB,SAAlB,CAA4BiC,QAA5B,GAAuC,UAASC,GAAT,EAAcC,GAAd,EAAmB;AAAA,YACxD,OAAO9C,GAAA,CAAI4C,QAAJ,CAAaC,GAAb,EAAkBC,GAAlB,CAAP,CADwD;AAAA,SAA1D,CA5BgE;AAAA,QAgChEtD,iBAAA,CAAkBmB,SAAlB,CAA4BoC,QAA5B,GAAuC,UAASX,MAAT,EAAiBY,SAAjB,EAA4BC,UAA5B,EAAwC;AAAA,YAC7E,QAAQb,MAAR;AAAA,YACE,KAAK,QAAL;AAAA,gBACE,OAAO;AAAA,oBAAC,CAACY,SAAD,GAAa,CAAd;AAAA,oBAAiB,CAACC,UAAD,GAAc,CAA/B;AAAA,iBAAP,CAFJ;AAAA,YAGE,KAAK,iBAAiB,aAAtB;AAAA,gBACE,OAAO;AAAA,oBAAC,CAAD;AAAA,oBAAI,CAACA,UAAD,GAAc,CAAlB;AAAA,iBAAP,CAJJ;AAAA,YAKE,KAAK,kBAAkB,cAAvB;AAAA,gBACE,OAAO;AAAA,oBAAC,CAACD,SAAF;AAAA,oBAAa,CAACC,UAAD,GAAc,CAA3B;AAAA,iBAAP,CANJ;AAAA,YAOE,KAAK,cAAc,UAAnB;AAAA,gBACE,OAAO;AAAA,oBAAC,CAAD;AAAA,oBAAI,CAAJ;AAAA,iBAAP,CARJ;AAAA,YASE,KAAK,eAAe,WAApB;AAAA,gBACE,OAAO;AAAA,oBAAC,CAACD,SAAF;AAAA,oBAAa,CAAb;AAAA,iBAAP,CAVJ;AAAA,YAWE,KAAK,gBAAgB,YAArB;AAAA,gBACE,OAAO;AAAA,oBAAC,CAACA,SAAD,GAAa,CAAd;AAAA,oBAAiB,CAAjB;AAAA,iBAAP,CAZJ;AAAA,YAaE,KAAK,iBAAiB,aAAtB;AAAA,gBACE,OAAO;AAAA,oBAAC,CAAD;AAAA,oBAAI,CAACC,UAAL;AAAA,iBAAP,CAdJ;AAAA,YAeE,KAAK,kBAAkB,cAAvB;AAAA,gBACE,OAAO;AAAA,oBAAC,CAACD,SAAF;AAAA,oBAAa,CAACC,UAAd;AAAA,iBAAP,CAhBJ;AAAA,YAiBE,KAAK,mBAAmB,eAAxB;AAAA,gBACE,OAAO;AAAA,oBAAC,CAACD,SAAD,GAAa,CAAd;AAAA,oBAAiB,CAACC,UAAlB;AAAA,iBAAP,CAlBJ;AAAA,YAmBE;AAAA,gBACE,MAAM,IAAIC,KAAJ,CAAU,sCAAV,EAAgDd,MAAhD,CAAN,CApBJ;AAAA,aAD6E;AAAA,SAA/E,CAhCgE;AAAA,QAyDhE5C,iBAAA,CAAkBmB,SAAlB,CAA4BwC,kBAA5B,GAAiD,UAASrB,OAAT,EAAkBsB,QAAlB,EAA4BJ,SAA5B,EAAuCC,UAAvC,EAAmD;AAAA,YAClG,IAAII,EAAJ,EAAQC,KAAR,CADkG;AAAA,YAElG,IAAIN,SAAA,IAAa,IAAjB,EAAuB;AAAA,gBACrBA,SAAA,GAAY,CAAZ,CADqB;AAAA,aAF2E;AAAA,YAKlG,IAAIC,UAAA,IAAc,IAAlB,EAAwB;AAAA,gBACtBA,UAAA,GAAa,CAAb,CADsB;AAAA,aAL0E;AAAA,YAQlGI,EAAA,GAAM,YAAW;AAAA,gBACf,IAAID,QAAA,IAAY,IAAhB,EAAsB;AAAA,oBACpB,OAAO,KAAKf,MAAL,CAAYkB,eAAZ,CAA4B;AAAA,wBAACzB,OAAA,CAAQ0B,KAAR,EAAD;AAAA,wBAAkB1B,OAAA,CAAQ2B,MAAR,EAAlB;AAAA,qBAA5B,EAAiEL,QAAjE,CAAP,CADoB;AAAA,iBAAtB,MAEO,IAAK,KAAKnC,IAAL,CAAUiB,CAAV,IAAe,IAAhB,IAA0B,KAAKjB,IAAL,CAAUkB,CAAV,IAAe,IAA7C,EAAoD;AAAA,oBACzD,OAAO;AAAA,wBAAC,KAAKE,MAAL,CAAYqB,mBAAZ,CAAgC,KAAKzC,IAAL,CAAUiB,CAA1C,EAA6CJ,OAAA,CAAQ0B,KAAR,EAA7C,CAAD;AAAA,wBAAgE,KAAKnB,MAAL,CAAYqB,mBAAZ,CAAgC,KAAKzC,IAAL,CAAUkB,CAA1C,EAA6CL,OAAA,CAAQ2B,MAAR,EAA7C,CAAhE;AAAA,qBAAP,CADyD;AAAA,iBAApD,MAEA;AAAA,oBACL,MAAM,IAAIP,KAAJ,CAAU,wEAAV,CAAN,CADK;AAAA,iBALQ;AAAA,aAAZ,CAQF1C,IARE,CAQG,IARH,CAAL,CARkG;AAAA,YAiBlG,IAAI,KAAKS,IAAL,CAAUmB,MAAV,IAAoB,IAAxB,EAA8B;AAAA,gBAC5BkB,KAAA,GAAQ,KAAKP,QAAL,CAAc,KAAK9B,IAAL,CAAUmB,MAAxB,EAAgCY,SAAhC,EAA2CC,UAA3C,CAAR,CAD4B;AAAA,gBAE5BI,EAAA,CAAG,CAAH,IAAQA,EAAA,CAAG,CAAH,IAAQC,KAAA,CAAM,CAAN,CAAhB,CAF4B;AAAA,gBAG5BD,EAAA,CAAG,CAAH,IAAQA,EAAA,CAAG,CAAH,IAAQC,KAAA,CAAM,CAAN,CAAhB,CAH4B;AAAA,aAjBoE;AAAA,YAsBlG,OAAOD,EAAP,CAtBkG;AAAA,SAApG,CAzDgE;AAAA,QAkFhE7D,iBAAA,CAAkBmB,SAAlB,CAA4B6C,KAA5B,GAAoC,YAAW;AAAA,YAC7C,OAAO,CAAP,CAD6C;AAAA,SAA/C,CAlFgE;AAAA,QAsFhEhE,iBAAA,CAAkBmB,SAAlB,CAA4B8C,MAA5B,GAAqC,YAAW;AAAA,YAC9C,OAAO,CAAP,CAD8C;AAAA,SAAhD,CAtFgE;AAAA,QA0FhEjE,iBAAA,CAAkBmB,SAAlB,CAA4BgD,MAA5B,GAAqC,YAAW;AAAA,YAC9C,OAAO;AAAA,gBACLzB,CAAA,EAAG,CADE;AAAA,gBAELC,CAAA,EAAG,CAFE;AAAA,gBAGLqB,KAAA,EAAO,CAHF;AAAA,gBAILC,MAAA,EAAQ,CAJH;AAAA,aAAP,CAD8C;AAAA,SAAhD,CA1FgE;AAAA,QAmGhE,OAAOjE,iBAAP,CAnGgE;AAAA,KAAlB,CAqG7CsB,OAAA,CAAQf,QArGqC,CAAhD,CA7DU;AAAA,IAoKVe,OAAA,CAAQnB,eAAR,GAA0BA,eAAA,GAAmB,UAASsC,MAAT,EAAiB;AAAA,QAC5D7B,SAAA,CAAUT,eAAV,EAA2BsC,MAA3B,EAD4D;AAAA,QAG5D,SAAStC,eAAT,GAA2B;AAAA,YACzB,OAAOA,eAAA,CAAgBiB,SAAhB,CAA0BF,WAA1B,CAAsCkD,KAAtC,CAA4C,IAA5C,EAAkDC,SAAlD,CAAP,CADyB;AAAA,SAHiC;AAAA,QAO5DlE,eAAA,CAAgBgB,SAAhB,CAA0BmD,WAA1B,GAAwC,UAASC,KAAT,EAAgB;AAAA,YACtDrB,OAAA,CAAQC,GAAR,CAAY,yBAAZ,EAAuCoB,KAAvC,EADsD;AAAA,YAEtD,OAAO,IAAIrE,eAAJ,CAAoBqE,KAApB,CAAP,CAFsD;AAAA,SAAxD,CAP4D;AAAA,QAY5DpE,eAAA,CAAgBqE,QAAhB,GAA2B,UAASC,IAAT,EAAe;AAAA,YACxC,IAAIA,IAAA,CAAKC,YAAL,OAAwB,OAA5B,EAAqC;AAAA,gBACnCxB,OAAA,CAAQC,GAAR,CAAY,iBAAZ,EADmC;AAAA,gBAEnC,OAAOhD,eAAA,CAAgBwE,SAAhB,CAA0BF,IAA1B,CAAP,CAFmC;AAAA,aAArC,MAGO;AAAA,gBACL,OAAO;AAAA,oBACLT,KAAA,EAAOS,IAAA,CAAKG,QAAL,EADF;AAAA,oBAELX,MAAA,EAAQQ,IAAA,CAAKI,SAAL,EAFH;AAAA,iBAAP,CADK;AAAA,aAJiC;AAAA,SAA1C,CAZ4D;AAAA,QAwB5D1E,eAAA,CAAgB2E,YAAhB,GAA+B,UAASL,IAAT,EAAe;AAAA,YAC5C,IAAIM,EAAJ,EAAQC,EAAR,CAD4C;AAAA,YAE5C,IAAIP,IAAA,CAAKC,YAAL,OAAwB,OAA5B,EAAqC;AAAA,gBACnCxB,OAAA,CAAQC,GAAR,CAAY,iBAAZ,EADmC;AAAA,gBAEnC4B,EAAA,GAAK5E,eAAA,CAAgB8E,YAAhB,CAA6BR,IAA7B,CAAL,CAFmC;AAAA,gBAGnCO,EAAA,GAAK7E,eAAA,CAAgB+E,YAAhB,CAA6BT,IAA7B,CAAL,CAHmC;AAAA,gBAInCvB,OAAA,CAAQC,GAAR,CAAY,OAAZ,EAAqB4B,EAArB,EAJmC;AAAA,gBAKnC7B,OAAA,CAAQC,GAAR,CAAY,OAAZ,EAAqB6B,EAArB,EALmC;AAAA,gBAMnC,OAAO;AAAA,oBACLtC,CAAA,EAAGqC,EAAA,CAAG,CAAH,CADE;AAAA,oBAELpC,CAAA,EAAGqC,EAAA,CAAG,CAAH,CAFE;AAAA,iBAAP,CANmC;AAAA,aAArC,MAUO;AAAA,gBACL,OAAO;AAAA,oBACLtC,CAAA,EAAG+B,IAAA,CAAKU,IAAL,EADE;AAAA,oBAELxC,CAAA,EAAG8B,IAAA,CAAKW,IAAL,EAFE;AAAA,iBAAP,CADK;AAAA,aAZqC;AAAA,SAA9C,CAxB4D;AAAA,QA4C5DjF,eAAA,CAAgBwE,SAAhB,GAA4B,UAASU,KAAT,EAAgB;AAAA,YAC1C,IAAIN,EAAJ,EAAQC,EAAR,CAD0C;AAAA,YAE1CD,EAAA,GAAK,KAAKE,YAAL,CAAkBI,KAAlB,CAAL,CAF0C;AAAA,YAG1CL,EAAA,GAAK,KAAKE,YAAL,CAAkBG,KAAlB,CAAL,CAH0C;AAAA,YAI1C,OAAO;AAAA,gBACLrB,KAAA,EAAOe,EAAA,CAAG,CAAH,IAAQA,EAAA,CAAG,CAAH,CADV;AAAA,gBAELd,MAAA,EAAQe,EAAA,CAAG,CAAH,IAAQA,EAAA,CAAG,CAAH,CAFX;AAAA,aAAP,CAJ0C;AAAA,SAA5C,CA5C4D;AAAA,QAsD5D7E,eAAA,CAAgB8E,YAAhB,GAA+B,UAASI,KAAT,EAAgB;AAAA,YAC7C,IAAIC,QAAJ,EAAcC,CAAd,EAAiBC,GAAjB,EAAsBC,IAAtB,EAA4BC,IAA5B,EAAkCC,EAAlC,EAAsCjE,IAAtC,CAD6C;AAAA,YAE7C4D,QAAA,GAAWD,KAAA,CAAMO,WAAN,EAAX,CAF6C;AAAA,YAG7CF,IAAA,GAAOG,MAAA,CAAOC,SAAd,CAH6C;AAAA,YAI7CL,IAAA,GAAO,CAAC,CAAR,CAJ6C;AAAA,YAK7C,KAAKF,CAAA,GAAII,EAAA,GAAK,CAAT,EAAYjE,IAAA,GAAO4D,QAAA,CAASS,MAAjC,EAAyC,KAAKrE,IAAL,GAAYiE,EAAA,GAAKjE,IAAjB,GAAwBiE,EAAA,GAAKjE,IAAtE,EAA4E6D,CAAA,GAAI,KAAK7D,IAAL,GAAY,EAAEiE,EAAd,GAAmB,EAAEA,EAArG,EAAyG;AAAA,gBACvGH,GAAA,GAAMF,QAAA,CAASC,CAAT,EAAYS,mBAAZ,EAAN,CADuG;AAAA,gBAEvG,IAAIR,GAAA,CAAI9C,CAAJ,GAAQgD,IAAZ,EAAkB;AAAA,oBAChBA,IAAA,GAAOF,GAAA,CAAI9C,CAAX,CADgB;AAAA,iBAFqF;AAAA,gBAKvG,IAAI8C,GAAA,CAAI9C,CAAJ,GAAQ4C,QAAA,CAASC,CAAT,EAAYX,QAAZ,EAAR,GAAiCa,IAArC,EAA2C;AAAA,oBACzCA,IAAA,GAAOD,GAAA,CAAI9C,CAAJ,GAAQ4C,QAAA,CAASC,CAAT,EAAYX,QAAZ,EAAf,CADyC;AAAA,iBAL4D;AAAA,aAL5D;AAAA,YAc7C,OAAO;AAAA,gBAACc,IAAD;AAAA,gBAAOD,IAAP;AAAA,aAAP,CAd6C;AAAA,SAA/C,CAtD4D;AAAA,QAuE5DtF,eAAA,CAAgB+E,YAAhB,GAA+B,UAASG,KAAT,EAAgB;AAAA,YAC7C,IAAIC,QAAJ,EAAcC,CAAd,EAAiBC,GAAjB,EAAsBS,IAAtB,EAA4BC,IAA5B,EAAkCP,EAAlC,EAAsCjE,IAAtC,CAD6C;AAAA,YAE7C4D,QAAA,GAAWD,KAAA,CAAMO,WAAN,EAAX,CAF6C;AAAA,YAG7CM,IAAA,GAAOL,MAAA,CAAOC,SAAd,CAH6C;AAAA,YAI7CG,IAAA,GAAO,CAAC,CAAR,CAJ6C;AAAA,YAK7C,KAAKV,CAAA,GAAII,EAAA,GAAK,CAAT,EAAYjE,IAAA,GAAO4D,QAAA,CAASS,MAAjC,EAAyC,KAAKrE,IAAL,GAAYiE,EAAA,GAAKjE,IAAjB,GAAwBiE,EAAA,GAAKjE,IAAtE,EAA4E6D,CAAA,GAAI,KAAK7D,IAAL,GAAY,EAAEiE,EAAd,GAAmB,EAAEA,EAArG,EAAyG;AAAA,gBACvGH,GAAA,GAAMF,QAAA,CAASC,CAAT,EAAYS,mBAAZ,EAAN,CADuG;AAAA,gBAEvG,IAAIR,GAAA,CAAI7C,CAAJ,GAAQuD,IAAZ,EAAkB;AAAA,oBAChBA,IAAA,GAAOZ,QAAA,CAASC,CAAT,EAAYH,IAAZ,EAAP,CADgB;AAAA,iBAFqF;AAAA,gBAKvG,IAAII,GAAA,CAAI7C,CAAJ,GAAQ2C,QAAA,CAASC,CAAT,EAAYV,SAAZ,EAAR,GAAkCoB,IAAtC,EAA4C;AAAA,oBAC1CA,IAAA,GAAOT,GAAA,CAAI7C,CAAJ,GAAQ2C,QAAA,CAASC,CAAT,EAAYV,SAAZ,EAAf,CAD0C;AAAA,iBAL2D;AAAA,aAL5D;AAAA,YAc7C,OAAO;AAAA,gBAACqB,IAAD;AAAA,gBAAOD,IAAP;AAAA,aAAP,CAd6C;AAAA,SAA/C,CAvE4D;AAAA,QAwF5D9F,eAAA,CAAgBgG,aAAhB,GAAgC,UAASd,KAAT,EAAgB;AAAA,YAC9C,IAAIC,QAAJ,EAAcC,CAAd,EAAiBC,GAAjB,EAAsB9C,CAAtB,EAAyBC,CAAzB,EAA4BgD,EAA5B,EAAgCjE,IAAhC,CAD8C;AAAA,YAE9C4D,QAAA,GAAWD,KAAA,CAAMO,WAAN,EAAX,CAF8C;AAAA,YAG9C,IAAIN,QAAA,CAASS,MAAT,KAAoB,CAAxB,EAA2B;AAAA,gBACzB,OAAO;AAAA,oBACLrD,CAAA,EAAG,CADE;AAAA,oBAELC,CAAA,EAAG,CAFE;AAAA,iBAAP,CADyB;AAAA,aAA3B,MAKO;AAAA,gBACLD,CAAA,GAAImD,MAAA,CAAOC,SAAX,CADK;AAAA,gBAELnD,CAAA,GAAI,CAAC,CAAL,CAFK;AAAA,gBAGL6C,GAAA,GAAMF,QAAA,CAASC,CAAT,EAAYS,mBAAZ,EAAN,CAHK;AAAA,gBAIL,KAAKT,CAAA,GAAII,EAAA,GAAK,CAAT,EAAYjE,IAAA,GAAO4D,QAAA,CAASS,MAAjC,EAAyC,KAAKrE,IAAL,GAAYiE,EAAA,GAAKjE,IAAjB,GAAwBiE,EAAA,GAAKjE,IAAtE,EAA4E6D,CAAA,GAAI,KAAK7D,IAAL,GAAY,EAAEiE,EAAd,GAAmB,EAAEA,EAArG,EAAyG;AAAA,oBACvG,IAAIH,GAAA,CAAI9C,CAAJ,GAAQA,CAAZ,EAAe;AAAA,wBACbA,CAAA,GAAI8C,GAAA,CAAI9C,CAAR,CADa;AAAA,qBADwF;AAAA,oBAIvG,IAAI8C,GAAA,CAAI7C,CAAJ,GAAQA,CAAZ,EAAe;AAAA,wBACbA,CAAA,GAAI6C,GAAA,CAAI7C,CAAR,CADa;AAAA,qBAJwF;AAAA,iBAJpG;AAAA,gBAYL,OAAO;AAAA,oBACLD,CAAA,EAAGA,CAAA,GAAI2C,KAAA,CAAMF,IAAN,EADF;AAAA,oBAELxC,CAAA,EAAGA,CAAA,GAAI0C,KAAA,CAAMD,IAAN,EAFF;AAAA,iBAAP,CAZK;AAAA,aARuC;AAAA,SAAhD,CAxF4D;AAAA,QAmH5D,OAAOjF,eAAP,CAnH4D;AAAA,KAAlB,CAqHzCmB,OAAA,CAAQtB,iBArHiC,CAA5C,CApKU;AAAA,IA2RVsB,OAAA,CAAQlB,WAAR,GAAsBA,WAAA,GAAe,YAAW;AAAA,QAC9C,SAASA,WAAT,GAAuB;AAAA,SADuB;AAAA,QAG9CA,WAAA,CAAYe,SAAZ,CAAsBiF,OAAtB,GAAgC,UAAS9D,OAAT,EAAkB;AAAA,SAAlD,CAH8C;AAAA,QAK9C,OAAOlC,WAAP,CAL8C;AAAA,KAAZ,EAApC,CA3RU;AAAA,IAoSVkB,OAAA,CAAQzB,iBAAR,GAA4BA,iBAAA,GAAqB,UAAS4C,MAAT,EAAiB;AAAA,QAChE,IAAI4D,MAAJ,CADgE;AAAA,QAGhEzF,SAAA,CAAUf,iBAAV,EAA6B4C,MAA7B,EAHgE;AAAA,QAKhE,SAAS5C,iBAAT,GAA6B;AAAA,YAC3B,OAAOwG,MAAA,CAAOjC,KAAP,CAAa,IAAb,EAAmBC,SAAnB,CAAP,CAD2B;AAAA,SALmC;AAAA,QAShEgC,MAAA,GAASxG,iBAAA,CAAkByG,MAA3B,CATgE;AAAA,QAWhEzG,iBAAA,CAAkBsB,SAAlB,CAA4BiF,OAA5B,GAAsC,UAAS9D,OAAT,EAAkB;AAAA,YACtD,OAAO,KAAKgE,MAAL,CAAYlC,KAAZ,CAAkB9B,OAAlB,CAAP,CADsD;AAAA,SAAxD,CAXgE;AAAA,QAehE,OAAOzC,iBAAP,CAfgE;AAAA,KAAlB,CAiB7CyB,OAAA,CAAQlB,WAjBqC,CAAhD,CApSU;AAAA,IAuTVkB,OAAA,CAAQvB,QAAR,GAAmBA,QAAA,GAAY,UAAS0C,MAAT,EAAiB;AAAA,QAC9C7B,SAAA,CAAUb,QAAV,EAAoB0C,MAApB,EAD8C;AAAA,QAG9C,SAAS1C,QAAT,GAAoB;AAAA,YAClB,OAAOA,QAAA,CAASqB,SAAT,CAAmBF,WAAnB,CAA+BkD,KAA/B,CAAqC,IAArC,EAA2CC,SAA3C,CAAP,CADkB;AAAA,SAH0B;AAAA,QAO9CtE,QAAA,CAASoB,SAAT,CAAmBiF,OAAnB,GAA6B,UAAS9D,OAAT,EAAkB;AAAA,SAA/C,CAP8C;AAAA,QAS9CvC,QAAA,CAASoB,SAAT,CAAmBuB,CAAnB,GAAuB,YAAW;AAAA,YAChC,OAAO,CAAP,CADgC;AAAA,SAAlC,CAT8C;AAAA,QAa9C3C,QAAA,CAASoB,SAAT,CAAmBwB,CAAnB,GAAuB,YAAW;AAAA,YAChC,OAAO,CAAP,CADgC;AAAA,SAAlC,CAb8C;AAAA,QAiB9C5C,QAAA,CAASoB,SAAT,CAAmB6C,KAAnB,GAA2B,YAAW;AAAA,YACpC,OAAO,CAAP,CADoC;AAAA,SAAtC,CAjB8C;AAAA,QAqB9CjE,QAAA,CAASoB,SAAT,CAAmB8C,MAAnB,GAA4B,YAAW;AAAA,YACrC,OAAO,CAAP,CADqC;AAAA,SAAvC,CArB8C;AAAA,QAyB9ClE,QAAA,CAASoB,SAAT,CAAmBgD,MAAnB,GAA4B,YAAW;AAAA,YACrC,OAAO;AAAA,gBACLzB,CAAA,EAAG,KAAKA,CAAL,EADE;AAAA,gBAELC,CAAA,EAAG,KAAKA,CAAL,EAFE;AAAA,gBAGLqB,KAAA,EAAO,KAAKA,KAAL,EAHF;AAAA,gBAILC,MAAA,EAAQ,KAAKA,MAAL,EAJH;AAAA,aAAP,CADqC;AAAA,SAAvC,CAzB8C;AAAA,QAkC9C,OAAOlE,QAAP,CAlC8C;AAAA,KAAlB,CAoC3BuB,OAAA,CAAQlB,WApCmB,CAA9B,CAvTU;AAAA,IA6VVkB,OAAA,CAAQpB,eAAR,GAA0BA,eAAA,GAAmB,UAASuC,MAAT,EAAiB;AAAA,QAC5D7B,SAAA,CAAUV,eAAV,EAA2BuC,MAA3B,EAD4D;AAAA,QAG5D,SAASvC,eAAT,CAAyBqE,KAAzB,EAAgC;AAAA,YAC9B,KAAKA,KAAL,GAAaA,KAAb,CAD8B;AAAA,YAE9B,IAAI,CAAC9D,CAAA,CAAE8F,OAAF,CAAU,KAAKhC,KAAf,CAAL,EAA4B;AAAA,gBAC1B,KAAKA,KAAL,GAAa,CAAC,KAAKA,KAAN,CAAb,CAD0B;AAAA,aAFE;AAAA,SAH4B;AAAA,QAU5DrE,eAAA,CAAgBiB,SAAhB,CAA0BiF,OAA1B,GAAoC,UAAS9D,OAAT,EAAkBC,KAAlB,EAAyB;AAAA,YAC3D,IAAIkC,IAAJ,EAAUkB,EAAV,EAAca,IAAd,EAAoB9E,IAApB,EAA0B+E,QAA1B,CAD2D;AAAA,YAE3DvD,OAAA,CAAQC,GAAR,CAAY,aAAZ,EAA2B,KAAKoB,KAAhC,EAF2D;AAAA,YAG3D7C,IAAA,GAAO,KAAK6C,KAAZ,CAH2D;AAAA,YAI3DkC,QAAA,GAAW,EAAX,CAJ2D;AAAA,YAK3D,KAAKd,EAAA,GAAK,CAAL,EAAQa,IAAA,GAAO9E,IAAA,CAAKqE,MAAzB,EAAiCJ,EAAA,GAAKa,IAAtC,EAA4Cb,EAAA,EAA5C,EAAkD;AAAA,gBAChDlB,IAAA,GAAO/C,IAAA,CAAKiE,EAAL,CAAP,CADgD;AAAA,gBAEhD,IAAIpD,KAAA,IAAS,IAAb,EAAmB;AAAA,oBACjBkE,QAAA,CAASC,IAAT,CAAcpE,OAAA,CAAQqE,YAAR,CAAqBC,GAArB,CAAyBnC,IAAzB,CAAd,EADiB;AAAA,iBAAnB,MAEO;AAAA,oBACLvB,OAAA,CAAQC,GAAR,CAAY,kCAAZ,EADK;AAAA,oBAELsD,QAAA,CAASC,IAAT,CAAcnE,KAAA,CAAMqE,GAAN,CAAUnC,IAAV,CAAd,EAFK;AAAA,iBAJyC;AAAA,aALS;AAAA,YAc3D,OAAOgC,QAAP,CAd2D;AAAA,SAA7D,CAV4D;AAAA,QA2B5DvG,eAAA,CAAgBiB,SAAhB,CAA0BuB,CAA1B,GAA8B,YAAW;AAAA,YACvC,IAAImE,EAAJ,CADuC;AAAA,YAEvCA,EAAA,GAAKpG,CAAA,CAAEqG,GAAF,CAAM,KAAKvC,KAAX,EAAkB,UAASE,IAAT,EAAe;AAAA,gBACpC,OAAOnD,OAAA,CAAQnB,eAAR,CAAwB2E,YAAxB,CAAqCL,IAArC,EAA2C/B,CAAlD,CADoC;AAAA,aAAjC,CAAL,CAFuC;AAAA,YAKvC,OAAOjC,CAAA,CAAEsG,GAAF,CAAMF,EAAN,CAAP,CALuC;AAAA,SAAzC,CA3B4D;AAAA,QAmC5D3G,eAAA,CAAgBiB,SAAhB,CAA0BwB,CAA1B,GAA8B,YAAW;AAAA,YACvC,IAAIqE,EAAJ,CADuC;AAAA,YAEvCA,EAAA,GAAKvG,CAAA,CAAEqG,GAAF,CAAM,KAAKvC,KAAX,EAAkB,UAASE,IAAT,EAAe;AAAA,gBACpC,OAAOnD,OAAA,CAAQnB,eAAR,CAAwB2E,YAAxB,CAAqCL,IAArC,EAA2C9B,CAAlD,CADoC;AAAA,aAAjC,CAAL,CAFuC;AAAA,YAKvC,OAAOlC,CAAA,CAAEsG,GAAF,CAAMC,EAAN,CAAP,CALuC;AAAA,SAAzC,CAnC4D;AAAA,QA2C5D9G,eAAA,CAAgBiB,SAAhB,CAA0BsE,IAA1B,GAAiC,YAAW;AAAA,YAC1C,IAAIoB,EAAJ,CAD0C;AAAA,YAE1CA,EAAA,GAAKpG,CAAA,CAAEqG,GAAF,CAAM,KAAKvC,KAAX,EAAkB,UAASE,IAAT,EAAe;AAAA,gBACpC,OAAOnD,OAAA,CAAQnB,eAAR,CAAwB2E,YAAxB,CAAqCL,IAArC,EAA2C/B,CAA3C,GAA+CpB,OAAA,CAAQnB,eAAR,CAAwBqE,QAAxB,CAAiCC,IAAjC,EAAuCT,KAA7F,CADoC;AAAA,aAAjC,CAAL,CAF0C;AAAA,YAK1C,OAAOvD,CAAA,CAAEwG,GAAF,CAAMJ,EAAN,CAAP,CAL0C;AAAA,SAA5C,CA3C4D;AAAA,QAmD5D3G,eAAA,CAAgBiB,SAAhB,CAA0B8E,IAA1B,GAAiC,YAAW;AAAA,YAC1C,IAAIY,EAAJ,CAD0C;AAAA,YAE1CA,EAAA,GAAKpG,CAAA,CAAEqG,GAAF,CAAM,KAAKvC,KAAX,EAAkB,UAASE,IAAT,EAAe;AAAA,gBACpC,OAAOnD,OAAA,CAAQnB,eAAR,CAAwB2E,YAAxB,CAAqCL,IAArC,EAA2C9B,CAA3C,GAA+CrB,OAAA,CAAQnB,eAAR,CAAwBqE,QAAxB,CAAiCC,IAAjC,EAAuCR,MAA7F,CADoC;AAAA,aAAjC,CAAL,CAF0C;AAAA,YAK1C,OAAOxD,CAAA,CAAEwG,GAAF,CAAMJ,EAAN,CAAP,CAL0C;AAAA,SAA5C,CAnD4D;AAAA,QA2D5D3G,eAAA,CAAgBiB,SAAhB,CAA0B6C,KAA1B,GAAkC,YAAW;AAAA,YAC3C,OAAO,KAAKyB,IAAL,KAAc,KAAK/C,CAAL,EAArB,CAD2C;AAAA,SAA7C,CA3D4D;AAAA,QA+D5DxC,eAAA,CAAgBiB,SAAhB,CAA0B8C,MAA1B,GAAmC,YAAW;AAAA,YAC5C,OAAO,KAAKgC,IAAL,KAAc,KAAKtD,CAAL,EAArB,CAD4C;AAAA,SAA9C,CA/D4D;AAAA,QAmE5D,OAAOzC,eAAP,CAnE4D;AAAA,KAAlB,CAqEzCoB,OAAA,CAAQvB,QArEiC,CAA5C,CA7VU;AAAA,IAoaVuB,OAAA,CAAQxB,iBAAR,GAA4BA,iBAAA,GAAqB,UAAS2C,MAAT,EAAiB;AAAA,QAChE7B,SAAA,CAAUd,iBAAV,EAA6B2C,MAA7B,EADgE;AAAA,QAGhE,SAAS3C,iBAAT,CAA2ByE,KAA3B,EAAkC;AAAA,YAChC,KAAKA,KAAL,GAAaA,KAAb,CADgC;AAAA,YAEhCrB,OAAA,CAAQC,GAAR,CAAY,6BAAZ,EAFgC;AAAA,SAH8B;AAAA,QAQhErD,iBAAA,CAAkBqB,SAAlB,CAA4BiF,OAA5B,GAAsC,UAAS9D,OAAT,EAAkBC,KAAlB,EAAyB;AAAA,YAC7D,IAAIkC,IAAJ,EAAUkB,EAAV,EAAca,IAAd,EAAoB9E,IAApB,EAA0B+E,QAA1B,CAD6D;AAAA,YAE7D/E,IAAA,GAAO,KAAK6C,KAAZ,CAF6D;AAAA,YAG7DkC,QAAA,GAAW,EAAX,CAH6D;AAAA,YAI7D,KAAKd,EAAA,GAAK,CAAL,EAAQa,IAAA,GAAO9E,IAAA,CAAKqE,MAAzB,EAAiCJ,EAAA,GAAKa,IAAtC,EAA4Cb,EAAA,EAA5C,EAAkD;AAAA,gBAChDlB,IAAA,GAAO/C,IAAA,CAAKiE,EAAL,CAAP,CADgD;AAAA,gBAEhD,IAAI,CAACpD,KAAL,EAAY;AAAA,oBACVkE,QAAA,CAASC,IAAT,CAAcjC,IAAA,CAAK2B,OAAL,CAAa9D,OAAb,CAAd,EADU;AAAA,iBAAZ,MAEO;AAAA,oBACLmE,QAAA,CAASC,IAAT,CAAcjC,IAAA,CAAK2B,OAAL,CAAa9D,OAAb,EAAsBC,KAAtB,CAAd,EADK;AAAA,iBAJyC;AAAA,aAJW;AAAA,YAY7D,OAAOkE,QAAP,CAZ6D;AAAA,SAA/D,CARgE;AAAA,QAuBhE,OAAO3G,iBAAP,CAvBgE;AAAA,KAAlB,CAyB7CwB,OAAA,CAAQvB,QAzBqC,CAAhD,CApaU;AAAA,IA+bVuB,OAAA,CAAQjB,QAAR,GAAmBA,QAAA,GAAY,UAASoC,MAAT,EAAiB;AAAA,QAC9C7B,SAAA,CAAUP,QAAV,EAAoBoC,MAApB,EAD8C;AAAA,QAG9C,SAASpC,QAAT,GAAoB;AAAA,YAClB,OAAOA,QAAA,CAASe,SAAT,CAAmBF,WAAnB,CAA+BkD,KAA/B,CAAqC,IAArC,EAA2CC,SAA3C,CAAP,CADkB;AAAA,SAH0B;AAAA,QAO9ChE,QAAA,CAASc,SAAT,CAAmB+F,KAAnB,GAA2B,UAAS5E,OAAT,EAAkB;AAAA,YAC3C,OAAO,KAAK6E,QAAL,CAAc7E,OAAd,CAAP,CAD2C;AAAA,SAA7C,CAP8C;AAAA,QAW9CjC,QAAA,CAASc,SAAT,CAAmBgG,QAAnB,GAA8B,UAAS7E,OAAT,EAAkB;AAAA,SAAhD,CAX8C;AAAA,QAa9C,OAAOjC,QAAP,CAb8C;AAAA,KAAlB,CAe3BiB,OAAA,CAAQf,QAfmB,CAA9B,CA/bU;AAAA,IAgdVe,OAAA,CAAQhB,YAAR,GAAuBA,YAAA,GAAgB,YAAW;AAAA,QAChD,SAASA,YAAT,CAAsB8G,IAAtB,EAA4B;AAAA,YAC1B,KAAKA,IAAL,GAAYA,IAAZ,CAD0B;AAAA,SADoB;AAAA,QAKhD,OAAO9G,YAAP,CALgD;AAAA,KAAZ,EAAtC,CAhdU;AAAA,CAAZ,CAydGU,IAzdH,CAydQ,IAzdR\"}","lineCount":445,"mtime":1393111692000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/layout.js","canonicalName":"src/layout.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.7.1\n(function() {\n  var ActionPresentable, ContainerDrawable, Drawable, GraphicalStimulus, Kinetic, KineticDrawable, KineticStimulus, Presentable, Response, ResponseData, Stimulus, lay, _,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  _ = require('lodash');\n\n  lay = require(\"./layout\");\n\n  Kinetic = require(\"../jslibs/kinetic\");\n\n  exports.Stimulus = Stimulus = (function() {\n    Stimulus.prototype.standardDefaults = {};\n\n    Stimulus.prototype.defaults = {};\n\n    function Stimulus(spec) {\n      var _ref;\n      if (spec == null) {\n        spec = {};\n      }\n      this.spec = _.defaults(spec, this.defaults);\n      this.spec = _.defaults(spec, this.standardDefaults);\n      this.spec = _.omit(this.spec, function(value, key) {\n        return value == null;\n      });\n      this.name = this.constructor.name;\n      if (((_ref = this.spec) != null ? _ref.id : void 0) != null) {\n        this.id = this.spec.id;\n      } else {\n        this.id = _.uniqueId(\"stim_\");\n      }\n      this.stopped = false;\n      this.name = this.constructor.name;\n      this.initialize();\n    }\n\n    Stimulus.prototype.initialize = function() {};\n\n    Stimulus.prototype.get = function(name) {\n      return this.spec[name];\n    };\n\n    Stimulus.prototype.set = function(name, value) {\n      return this.spec[name] = value;\n    };\n\n    Stimulus.prototype.reset = function() {\n      return this.stopped = false;\n    };\n\n    Stimulus.prototype.render = function(context, layer) {};\n\n    Stimulus.prototype.stop = function(context) {\n      return this.stopped = true;\n    };\n\n    return Stimulus;\n\n  })();\n\n  exports.GraphicalStimulus = GraphicalStimulus = (function(_super) {\n    __extends(GraphicalStimulus, _super);\n\n    GraphicalStimulus.prototype.standardDefaults = {\n      x: 0,\n      y: 0,\n      origin: \"top-left\"\n    };\n\n    function GraphicalStimulus(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      if (spec.layout != null) {\n        this.layout = spec.layout;\n      } else {\n        this.layout = new lay.AbsoluteLayout();\n      }\n      this.overlay = false;\n      GraphicalStimulus.__super__.constructor.call(this, spec);\n    }\n\n    GraphicalStimulus.prototype.drawable = function(knode) {\n      return function(context) {\n        return console.log(\"GraphicalStimulus: drawable, no op\");\n      };\n    };\n\n    GraphicalStimulus.prototype.toPixels = function(arg, dim) {\n      return lay.toPixels(arg, dim);\n    };\n\n    GraphicalStimulus.prototype.xyoffset = function(origin, nodeWidth, nodeHeight) {\n      switch (origin) {\n        case \"center\":\n          return [-nodeWidth / 2, -nodeHeight / 2];\n        case \"center-left\" || \"left-center\":\n          return [0, -nodeHeight / 2];\n        case \"center-right\" || \"right-center\":\n          return [-nodeWidth, -nodeHeight / 2];\n        case \"top-left\" || \"left-top\":\n          return [0, 0];\n        case \"top-right\" || \"right-top\":\n          return [-nodeWidth, 0];\n        case \"top-center\" || \"center-top\":\n          return [-nodeWidth / 2, 0];\n        case \"bottom-left\" || \"left-bottom\":\n          return [0, -nodeHeight];\n        case \"bottom-right\" || \"right-bottom\":\n          return [-nodeWidth, -nodeHeight];\n        case \"bottom-center\" || \"center-bottom\":\n          return [-nodeWidth / 2, -nodeHeight];\n        default:\n          throw new Error(\"failed to match 'origin' argument:\", origin);\n      }\n    };\n\n    GraphicalStimulus.prototype.computeCoordinates = function(context, position, nodeWidth, nodeHeight) {\n      var xy, xyoff;\n      if (nodeWidth == null) {\n        nodeWidth = 0;\n      }\n      if (nodeHeight == null) {\n        nodeHeight = 0;\n      }\n      xy = (function() {\n        if (position != null) {\n          return this.layout.computePosition([context.width(), context.height()], position);\n        } else if ((this.spec.x != null) && (this.spec.y != null)) {\n          return [this.layout.convertToCoordinate(this.spec.x, context.width()), this.layout.convertToCoordinate(this.spec.y, context.height())];\n        } else {\n          throw new Error(\"computeCoordinates: either position or x,y coordinates must be defined\");\n        }\n      }).call(this);\n      if (this.spec.origin != null) {\n        xyoff = this.xyoffset(this.spec.origin, nodeWidth, nodeHeight);\n        xy[0] = xy[0] + xyoff[0];\n        xy[1] = xy[1] + xyoff[1];\n      }\n      return xy;\n    };\n\n    GraphicalStimulus.prototype.width = function() {\n      return 0;\n    };\n\n    GraphicalStimulus.prototype.height = function() {\n      return 0;\n    };\n\n    GraphicalStimulus.prototype.bounds = function() {\n      return {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0\n      };\n    };\n\n    return GraphicalStimulus;\n\n  })(exports.Stimulus);\n\n  exports.KineticStimulus = KineticStimulus = (function(_super) {\n    __extends(KineticStimulus, _super);\n\n    function KineticStimulus() {\n      return KineticStimulus.__super__.constructor.apply(this, arguments);\n    }\n\n    KineticStimulus.prototype.presentable = function(nodes) {\n      console.log(\"creating presentable of\", nodes);\n      return new KineticDrawable(nodes);\n    };\n\n    KineticStimulus.nodeSize = function(node) {\n      if (node.getClassName() === \"Group\") {\n        console.log(\"class is group!\");\n        return KineticStimulus.groupSize(node);\n      } else {\n        return {\n          width: node.getWidth(),\n          height: node.getHeight()\n        };\n      }\n    };\n\n    KineticStimulus.nodePosition = function(node) {\n      var xb, yb;\n      if (node.getClassName() === \"Group\") {\n        console.log(\"class is group!\");\n        xb = KineticStimulus.groupXBounds(node);\n        yb = KineticStimulus.groupYBounds(node);\n        console.log(\"xb is\", xb);\n        console.log(\"yb is\", yb);\n        return {\n          x: xb[0],\n          y: yb[0]\n        };\n      } else {\n        return {\n          x: node.getX(),\n          y: node.getY()\n        };\n      }\n    };\n\n    KineticStimulus.groupSize = function(group) {\n      var xb, yb;\n      xb = this.groupXBounds(group);\n      yb = this.groupYBounds(group);\n      return {\n        width: xb[1] - xb[0],\n        height: yb[1] - yb[0]\n      };\n    };\n\n    KineticStimulus.groupXBounds = function(group) {\n      var children, i, pos, xmax, xmin, _i, _ref;\n      children = group.getChildren();\n      xmin = Number.MAX_VALUE;\n      xmax = -1;\n      for (i = _i = 0, _ref = children.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        pos = children[i].getAbsolutePosition();\n        if (pos.x < xmin) {\n          xmin = pos.x;\n        }\n        if (pos.x + children[i].getWidth() > xmax) {\n          xmax = pos.x + children[i].getWidth();\n        }\n      }\n      return [xmin, xmax];\n    };\n\n    KineticStimulus.groupYBounds = function(group) {\n      var children, i, pos, ymax, ymin, _i, _ref;\n      children = group.getChildren();\n      ymin = Number.MAX_VALUE;\n      ymax = -1;\n      for (i = _i = 0, _ref = children.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        pos = children[i].getAbsolutePosition();\n        if (pos.y < ymin) {\n          ymin = children[i].getY();\n        }\n        if (pos.y + children[i].getHeight() > ymax) {\n          ymax = pos.y + children[i].getHeight();\n        }\n      }\n      return [ymin, ymax];\n    };\n\n    KineticStimulus.groupPosition = function(group) {\n      var children, i, pos, x, y, _i, _ref;\n      children = group.getChildren();\n      if (children.length === 0) {\n        return {\n          x: 0,\n          y: 0\n        };\n      } else {\n        x = Number.MAX_VALUE;\n        y = -1;\n        pos = children[i].getAbsolutePosition();\n        for (i = _i = 0, _ref = children.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n          if (pos.x < x) {\n            x = pos.x;\n          }\n          if (pos.y < y) {\n            y = pos.y;\n          }\n        }\n        return {\n          x: x + group.getX(),\n          y: y + group.getY()\n        };\n      }\n    };\n\n    return KineticStimulus;\n\n  })(exports.GraphicalStimulus);\n\n  exports.Presentable = Presentable = (function() {\n    function Presentable() {}\n\n    Presentable.prototype.present = function(context) {};\n\n    return Presentable;\n\n  })();\n\n  exports.ActionPresentable = ActionPresentable = (function(_super) {\n    var _class;\n\n    __extends(ActionPresentable, _super);\n\n    function ActionPresentable() {\n      return _class.apply(this, arguments);\n    }\n\n    _class = ActionPresentable.action;\n\n    ActionPresentable.prototype.present = function(context) {\n      return this.action.apply(context);\n    };\n\n    return ActionPresentable;\n\n  })(exports.Presentable);\n\n  exports.Drawable = Drawable = (function(_super) {\n    __extends(Drawable, _super);\n\n    function Drawable() {\n      return Drawable.__super__.constructor.apply(this, arguments);\n    }\n\n    Drawable.prototype.present = function(context) {};\n\n    Drawable.prototype.x = function() {\n      return 0;\n    };\n\n    Drawable.prototype.y = function() {\n      return 0;\n    };\n\n    Drawable.prototype.width = function() {\n      return 0;\n    };\n\n    Drawable.prototype.height = function() {\n      return 0;\n    };\n\n    Drawable.prototype.bounds = function() {\n      return {\n        x: this.x(),\n        y: this.y(),\n        width: this.width(),\n        height: this.height()\n      };\n    };\n\n    return Drawable;\n\n  })(exports.Presentable);\n\n  exports.KineticDrawable = KineticDrawable = (function(_super) {\n    __extends(KineticDrawable, _super);\n\n    function KineticDrawable(nodes) {\n      this.nodes = nodes;\n      if (!_.isArray(this.nodes)) {\n        this.nodes = [this.nodes];\n      }\n    }\n\n    KineticDrawable.prototype.present = function(context, layer) {\n      var node, _i, _len, _ref, _results;\n      console.log(\"presenting \", this.nodes);\n      _ref = this.nodes;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        node = _ref[_i];\n        if (layer == null) {\n          _results.push(context.contentLayer.add(node));\n        } else {\n          console.log(\"drawing in layer supplied as arg\");\n          _results.push(layer.add(node));\n        }\n      }\n      return _results;\n    };\n\n    KineticDrawable.prototype.x = function() {\n      var xs;\n      xs = _.map(this.nodes, function(node) {\n        return exports.KineticStimulus.nodePosition(node).x;\n      });\n      return _.min(xs);\n    };\n\n    KineticDrawable.prototype.y = function() {\n      var ys;\n      ys = _.map(this.nodes, function(node) {\n        return exports.KineticStimulus.nodePosition(node).y;\n      });\n      return _.min(ys);\n    };\n\n    KineticDrawable.prototype.xmax = function() {\n      var xs;\n      xs = _.map(this.nodes, function(node) {\n        return exports.KineticStimulus.nodePosition(node).x + exports.KineticStimulus.nodeSize(node).width;\n      });\n      return _.max(xs);\n    };\n\n    KineticDrawable.prototype.ymax = function() {\n      var xs;\n      xs = _.map(this.nodes, function(node) {\n        return exports.KineticStimulus.nodePosition(node).y + exports.KineticStimulus.nodeSize(node).height;\n      });\n      return _.max(xs);\n    };\n\n    KineticDrawable.prototype.width = function() {\n      return this.xmax() - this.x();\n    };\n\n    KineticDrawable.prototype.height = function() {\n      return this.ymax() - this.y();\n    };\n\n    return KineticDrawable;\n\n  })(exports.Drawable);\n\n  exports.ContainerDrawable = ContainerDrawable = (function(_super) {\n    __extends(ContainerDrawable, _super);\n\n    function ContainerDrawable(nodes) {\n      this.nodes = nodes;\n      console.log(\"creating container drawable\");\n    }\n\n    ContainerDrawable.prototype.present = function(context, layer) {\n      var node, _i, _len, _ref, _results;\n      _ref = this.nodes;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        node = _ref[_i];\n        if (!layer) {\n          _results.push(node.present(context));\n        } else {\n          _results.push(node.present(context, layer));\n        }\n      }\n      return _results;\n    };\n\n    return ContainerDrawable;\n\n  })(exports.Drawable);\n\n  exports.Response = Response = (function(_super) {\n    __extends(Response, _super);\n\n    function Response() {\n      return Response.__super__.constructor.apply(this, arguments);\n    }\n\n    Response.prototype.start = function(context) {\n      return this.activate(context);\n    };\n\n    Response.prototype.activate = function(context) {};\n\n    return Response;\n\n  })(exports.Stimulus);\n\n  exports.ResponseData = ResponseData = (function() {\n    function ResponseData(data) {\n      this.data = data;\n    }\n\n    return ResponseData;\n\n  })();\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/canvas/background.js":{"id":23,"canonicalName":"src/components/canvas/background.js","code":"(function () {\n    var Background, ContainerDrawable, GStimulus, Kinetic, KineticDrawable, _, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Kinetic = require('15', module).Kinetic;\n    GStimulus = require('8', module).GraphicalStimulus;\n    KineticDrawable = require('8', module).KineticDrawable;\n    ContainerDrawable = require('8', module).ContainerDrawable;\n    _ = require('16', module);\n    Background = function (_super) {\n        __extends(Background, _super);\n        function Background(stims, fill) {\n            this.stims = stims != null ? stims : [];\n            this.fill = fill != null ? fill : 'white';\n            Background.__super__.constructor.call(this, {}, {});\n            if (!_.isArray(this.stims)) {\n                this.stims = [this.stims];\n            }\n        }\n        Background.prototype.render = function (context) {\n            var background, drawables, stim, _i, _len, _ref;\n            background = new Kinetic.Rect({\n                x: 0,\n                y: 0,\n                width: context.width(),\n                height: context.height(),\n                name: 'background',\n                fill: this.fill\n            });\n            drawables = [];\n            drawables.push(new KineticDrawable(background));\n            _ref = this.stims;\n            for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n                stim = _ref[_i];\n                drawables.push(stim.render(context));\n            }\n            return new ContainerDrawable(drawables);\n        };\n        return Background;\n    }(GStimulus);\n    exports.Background = Background;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/canvas/background.js\"],\"names\":[\"Background\",\"ContainerDrawable\",\"GStimulus\",\"Kinetic\",\"KineticDrawable\",\"_\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"GraphicalStimulus\",\"_super\",\"stims\",\"fill\",\"isArray\",\"render\",\"context\",\"background\",\"drawables\",\"stim\",\"_i\",\"_len\",\"_ref\",\"Rect\",\"x\",\"y\",\"width\",\"height\",\"name\",\"push\",\"length\",\"exports\"],\"mappings\":\"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\"}","lineCount":52,"mtime":1393111728000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.7.1\n(function() {\n  var Background, ContainerDrawable, GStimulus, Kinetic, KineticDrawable, _,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Kinetic = require(\"../../../jslibs/kinetic\").Kinetic;\n\n  GStimulus = require(\"../../stimresp\").GraphicalStimulus;\n\n  KineticDrawable = require(\"../../stimresp\").KineticDrawable;\n\n  ContainerDrawable = require(\"../../stimresp\").ContainerDrawable;\n\n  _ = require(\"lodash\");\n\n  Background = (function(_super) {\n    __extends(Background, _super);\n\n    function Background(stims, fill) {\n      this.stims = stims != null ? stims : [];\n      this.fill = fill != null ? fill : \"white\";\n      Background.__super__.constructor.call(this, {}, {});\n      if (!_.isArray(this.stims)) {\n        this.stims = [this.stims];\n      }\n    }\n\n    Background.prototype.render = function(context) {\n      var background, drawables, stim, _i, _len, _ref;\n      background = new Kinetic.Rect({\n        x: 0,\n        y: 0,\n        width: context.width(),\n        height: context.height(),\n        name: 'background',\n        fill: this.fill\n      });\n      drawables = [];\n      drawables.push(new KineticDrawable(background));\n      _ref = this.stims;\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        stim = _ref[_i];\n        drawables.push(stim.render(context));\n      }\n      return new ContainerDrawable(drawables);\n    };\n\n    return Background;\n\n  })(GStimulus);\n\n  exports.Background = Background;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/node_modules/baconjs/dist/Bacon.js":{"id":22,"canonicalName":"node_modules/baconjs/dist/Bacon.js","code":"(function () {\n    var Bacon, BufferingSource, Bus, CompositeUnsubscribe, Desc, Dispatcher, End, Error, Event, EventStream, Initial, Next, None, Observable, Property, PropertyDispatcher, Some, Source, UpdateBarrier, addPropertyInitValueToStream, assert, assertArray, assertEventStream, assertFunction, assertNoArguments, assertString, cloneArray, compositeUnsubscribe, containsDuplicateDeps, convertArgsToFunction, describe, end, eventIdCounter, former, idCounter, initial, isArray, isFieldKey, isFunction, isObservable, latterF, liftCallback, makeFunction, makeFunctionArgs, makeFunction_, makeSpawner, next, nop, partiallyApplied, recursionDepth, registerObs, spys, toCombinator, toEvent, toFieldExtractor, toFieldKey, toOption, toSimpleExtractor, withDescription, withMethodCallSupport, _, _ref, _ref1, _ref2, __slice = [].slice, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        }, __bind = function (fn, me) {\n            return function () {\n                return fn.apply(me, arguments);\n            };\n        };\n    Bacon = {\n        toString: function () {\n            return 'Bacon';\n        }\n    };\n    Bacon.version = '0.7.0';\n    Bacon.fromBinder = function (binder, eventTransformer) {\n        if (eventTransformer == null) {\n            eventTransformer = _.id;\n        }\n        return new EventStream(describe(Bacon, 'fromBinder', binder, eventTransformer), function (sink) {\n            var unbinder;\n            return unbinder = binder(function () {\n                var args, event, reply, value, _i, _len;\n                args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n                value = eventTransformer.apply(null, args);\n                if (!(isArray(value) && _.last(value) instanceof Event)) {\n                    value = [value];\n                }\n                reply = Bacon.more;\n                for (_i = 0, _len = value.length; _i < _len; _i++) {\n                    event = value[_i];\n                    reply = sink(event = toEvent(event));\n                    if (reply === Bacon.noMore || event.isEnd()) {\n                        if (unbinder != null) {\n                            unbinder();\n                        } else {\n                            Bacon.scheduler.setTimeout(function () {\n                                return unbinder();\n                            }, 0);\n                        }\n                        return reply;\n                    }\n                }\n                return reply;\n            });\n        });\n    };\n    Bacon.$ = {\n        asEventStream: function (eventName, selector, eventTransformer) {\n            var _ref, _this = this;\n            if (isFunction(selector)) {\n                _ref = [\n                    selector,\n                    null\n                ], eventTransformer = _ref[0], selector = _ref[1];\n            }\n            return withDescription(this, 'asEventStream', eventName, Bacon.fromBinder(function (handler) {\n                _this.on(eventName, selector, handler);\n                return function () {\n                    return _this.off(eventName, selector, handler);\n                };\n            }, eventTransformer));\n        }\n    };\n    if ((_ref = typeof jQuery !== 'undefined' && jQuery !== null ? jQuery : typeof Zepto !== 'undefined' && Zepto !== null ? Zepto : null) != null) {\n        _ref.fn.asEventStream = Bacon.$.asEventStream;\n    }\n    Bacon.fromEventTarget = function (target, eventName, eventTransformer) {\n        var sub, unsub, _ref1, _ref2, _ref3, _ref4;\n        sub = (_ref1 = target.addEventListener) != null ? _ref1 : (_ref2 = target.addListener) != null ? _ref2 : target.bind;\n        unsub = (_ref3 = target.removeEventListener) != null ? _ref3 : (_ref4 = target.removeListener) != null ? _ref4 : target.unbind;\n        return withDescription(Bacon, 'fromEventTarget', target, eventName, Bacon.fromBinder(function (handler) {\n            sub.call(target, eventName, handler);\n            return function () {\n                return unsub.call(target, eventName, handler);\n            };\n        }, eventTransformer));\n    };\n    Bacon.fromPromise = function (promise, abort) {\n        return withDescription(Bacon, 'fromPromise', promise, Bacon.fromBinder(function (handler) {\n            promise.then(handler, function (e) {\n                return handler(new Error(e));\n            });\n            return function () {\n                if (abort) {\n                    return typeof promise.abort === 'function' ? promise.abort() : void 0;\n                }\n            };\n        }, function (value) {\n            return [\n                value,\n                end()\n            ];\n        }));\n    };\n    Bacon.noMore = ['<no-more>'];\n    Bacon.more = ['<more>'];\n    Bacon.later = function (delay, value) {\n        return withDescription(Bacon, 'later', delay, value, Bacon.sequentially(delay, [value]));\n    };\n    Bacon.sequentially = function (delay, values) {\n        var index;\n        index = 0;\n        return withDescription(Bacon, 'sequentially', delay, values, Bacon.fromPoll(delay, function () {\n            var value;\n            value = values[index++];\n            if (index < values.length) {\n                return value;\n            } else if (index === values.length) {\n                return [\n                    value,\n                    end()\n                ];\n            } else {\n                return end();\n            }\n        }));\n    };\n    Bacon.repeatedly = function (delay, values) {\n        var index;\n        index = 0;\n        return withDescription(Bacon, 'repeatedly', delay, values, Bacon.fromPoll(delay, function () {\n            return values[index++ % values.length];\n        }));\n    };\n    Bacon.spy = function (spy) {\n        return spys.push(spy);\n    };\n    spys = [];\n    registerObs = function (obs) {\n        if (spys.length) {\n            if (!registerObs.running) {\n                try {\n                    registerObs.running = true;\n                    return _.each(spys, function (_, spy) {\n                        return spy(obs);\n                    });\n                } finally {\n                    delete registerObs.running;\n                }\n            }\n        }\n    };\n    withMethodCallSupport = function (wrapped) {\n        return function () {\n            var args, context, f, methodName;\n            f = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n            if (typeof f === 'object' && args.length) {\n                context = f;\n                methodName = args[0];\n                f = function () {\n                    return context[methodName].apply(context, arguments);\n                };\n                args = args.slice(1);\n            }\n            return wrapped.apply(null, [f].concat(__slice.call(args)));\n        };\n    };\n    liftCallback = function (desc, wrapped) {\n        return withMethodCallSupport(function () {\n            var args, f, stream;\n            f = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n            stream = partiallyApplied(wrapped, [function (values, callback) {\n                    return f.apply(null, __slice.call(values).concat([callback]));\n                }]);\n            return withDescription.apply(null, [\n                Bacon,\n                desc,\n                f\n            ].concat(__slice.call(args), [Bacon.combineAsArray(args).flatMap(stream)]));\n        });\n    };\n    Bacon.fromCallback = liftCallback('fromCallback', function () {\n        var args, f;\n        f = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n        return Bacon.fromBinder(function (handler) {\n            makeFunction(f, args)(handler);\n            return nop;\n        }, function (value) {\n            return [\n                value,\n                end()\n            ];\n        });\n    });\n    Bacon.fromNodeCallback = liftCallback('fromNodeCallback', function () {\n        var args, f;\n        f = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n        return Bacon.fromBinder(function (handler) {\n            makeFunction(f, args)(handler);\n            return nop;\n        }, function (error, value) {\n            if (error) {\n                return [\n                    new Error(error),\n                    end()\n                ];\n            }\n            return [\n                value,\n                end()\n            ];\n        });\n    });\n    Bacon.fromPoll = function (delay, poll) {\n        return withDescription(Bacon, 'fromPoll', delay, poll, Bacon.fromBinder(function (handler) {\n            var id;\n            id = Bacon.scheduler.setInterval(handler, delay);\n            return function () {\n                return Bacon.scheduler.clearInterval(id);\n            };\n        }, poll));\n    };\n    Bacon.interval = function (delay, value) {\n        if (value == null) {\n            value = {};\n        }\n        return withDescription(Bacon, 'interval', delay, value, Bacon.fromPoll(delay, function () {\n            return next(value);\n        }));\n    };\n    Bacon.constant = function (value) {\n        return new Property(describe(Bacon, 'constant', value), function (sink) {\n            sink(initial(value));\n            sink(end());\n            return nop;\n        });\n    };\n    Bacon.never = function () {\n        return withDescription(Bacon, 'never', Bacon.fromArray([]));\n    };\n    Bacon.once = function (value) {\n        return withDescription(Bacon, 'once', value, Bacon.fromArray([value]));\n    };\n    Bacon.fromArray = function (values) {\n        assertArray(values);\n        values = cloneArray(values);\n        return new EventStream(describe(Bacon, 'fromArray', values), function (sink) {\n            var send, unsubd;\n            unsubd = false;\n            send = function () {\n                var reply, value;\n                if (_.empty(values)) {\n                    return sink(end());\n                } else {\n                    value = values.splice(0, 1)[0];\n                    reply = sink(toEvent(value));\n                    if (reply !== Bacon.noMore && !unsubd) {\n                        return send();\n                    }\n                }\n            };\n            send();\n            return function () {\n                return unsubd = true;\n            };\n        });\n    };\n    Bacon.mergeAll = function () {\n        var streams;\n        streams = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n        if (isArray(streams[0])) {\n            streams = streams[0];\n        }\n        return withDescription.apply(null, [\n            Bacon,\n            'mergeAll'\n        ].concat(__slice.call(streams), [_.fold(streams, Bacon.never(), function (a, b) {\n                return a.merge(b);\n            })]));\n    };\n    Bacon.zipAsArray = function () {\n        var streams;\n        streams = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n        if (isArray(streams[0])) {\n            streams = streams[0];\n        }\n        return withDescription.apply(null, [\n            Bacon,\n            'zipAsArray'\n        ].concat(__slice.call(streams), [Bacon.zipWith(streams, function () {\n                var xs;\n                xs = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n                return xs;\n            })]));\n    };\n    Bacon.zipWith = function () {\n        var f, streams, _ref1;\n        f = arguments[0], streams = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n        if (!isFunction(f)) {\n            _ref1 = [\n                f,\n                streams[0]\n            ], streams = _ref1[0], f = _ref1[1];\n        }\n        streams = _.map(function (s) {\n            return s.toEventStream();\n        }, streams);\n        return withDescription.apply(null, [\n            Bacon,\n            'zipWith',\n            f\n        ].concat(__slice.call(streams), [Bacon.when(streams, f)]));\n    };\n    Bacon.groupSimultaneous = function () {\n        var s, sources, streams;\n        streams = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n        if (streams.length === 1 && isArray(streams[0])) {\n            streams = streams[0];\n        }\n        sources = function () {\n            var _i, _len, _results;\n            _results = [];\n            for (_i = 0, _len = streams.length; _i < _len; _i++) {\n                s = streams[_i];\n                _results.push(new BufferingSource(s));\n            }\n            return _results;\n        }();\n        return withDescription.apply(null, [\n            Bacon,\n            'groupSimultaneous'\n        ].concat(__slice.call(streams), [Bacon.when(sources, function () {\n                var xs;\n                xs = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n                return xs;\n            })]));\n    };\n    Bacon.combineAsArray = function () {\n        var index, s, sources, stream, streams, _i, _len;\n        streams = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n        if (streams.length === 1 && isArray(streams[0])) {\n            streams = streams[0];\n        }\n        for (index = _i = 0, _len = streams.length; _i < _len; index = ++_i) {\n            stream = streams[index];\n            if (!isObservable(stream)) {\n                streams[index] = Bacon.constant(stream);\n            }\n        }\n        if (streams.length) {\n            sources = function () {\n                var _j, _len1, _results;\n                _results = [];\n                for (_j = 0, _len1 = streams.length; _j < _len1; _j++) {\n                    s = streams[_j];\n                    _results.push(new Source(s, true, false, s.subscribeInternal));\n                }\n                return _results;\n            }();\n            return withDescription.apply(null, [\n                Bacon,\n                'combineAsArray'\n            ].concat(__slice.call(streams), [Bacon.when(sources, function () {\n                    var xs;\n                    xs = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n                    return xs;\n                }).toProperty()]));\n        } else {\n            return Bacon.constant([]);\n        }\n    };\n    Bacon.onValues = function () {\n        var f, streams, _i;\n        streams = 2 <= arguments.length ? __slice.call(arguments, 0, _i = arguments.length - 1) : (_i = 0, []), f = arguments[_i++];\n        return Bacon.combineAsArray(streams).onValues(f);\n    };\n    Bacon.combineWith = function () {\n        var f, streams;\n        f = arguments[0], streams = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n        return withDescription.apply(null, [\n            Bacon,\n            'combineWith',\n            f\n        ].concat(__slice.call(streams), [Bacon.combineAsArray(streams).map(function (values) {\n                return f.apply(null, values);\n            })]));\n    };\n    Bacon.combineTemplate = function (template) {\n        var applyStreamValue, combinator, compile, compileTemplate, constantValue, current, funcs, mkContext, setValue, streams;\n        funcs = [];\n        streams = [];\n        current = function (ctxStack) {\n            return ctxStack[ctxStack.length - 1];\n        };\n        setValue = function (ctxStack, key, value) {\n            return current(ctxStack)[key] = value;\n        };\n        applyStreamValue = function (key, index) {\n            return function (ctxStack, values) {\n                return setValue(ctxStack, key, values[index]);\n            };\n        };\n        constantValue = function (key, value) {\n            return function (ctxStack) {\n                return setValue(ctxStack, key, value);\n            };\n        };\n        mkContext = function (template) {\n            if (isArray(template)) {\n                return [];\n            } else {\n                return {};\n            }\n        };\n        compile = function (key, value) {\n            var popContext, pushContext;\n            if (isObservable(value)) {\n                streams.push(value);\n                return funcs.push(applyStreamValue(key, streams.length - 1));\n            } else if (value === Object(value) && typeof value !== 'function') {\n                pushContext = function (key) {\n                    return function (ctxStack) {\n                        var newContext;\n                        newContext = mkContext(value);\n                        setValue(ctxStack, key, newContext);\n                        return ctxStack.push(newContext);\n                    };\n                };\n                popContext = function (ctxStack) {\n                    return ctxStack.pop();\n                };\n                funcs.push(pushContext(key));\n                compileTemplate(value);\n                return funcs.push(popContext);\n            } else {\n                return funcs.push(constantValue(key, value));\n            }\n        };\n        compileTemplate = function (template) {\n            return _.each(template, compile);\n        };\n        compileTemplate(template);\n        combinator = function (values) {\n            var ctxStack, f, rootContext, _i, _len;\n            rootContext = mkContext(template);\n            ctxStack = [rootContext];\n            for (_i = 0, _len = funcs.length; _i < _len; _i++) {\n                f = funcs[_i];\n                f(ctxStack, values);\n            }\n            return rootContext;\n        };\n        return withDescription(Bacon, 'combineTemplate', template, Bacon.combineAsArray(streams).map(combinator));\n    };\n    eventIdCounter = 0;\n    Event = function () {\n        function Event() {\n            this.id = ++eventIdCounter;\n        }\n        Event.prototype.isEvent = function () {\n            return true;\n        };\n        Event.prototype.isEnd = function () {\n            return false;\n        };\n        Event.prototype.isInitial = function () {\n            return false;\n        };\n        Event.prototype.isNext = function () {\n            return false;\n        };\n        Event.prototype.isError = function () {\n            return false;\n        };\n        Event.prototype.hasValue = function () {\n            return false;\n        };\n        Event.prototype.filter = function () {\n            return true;\n        };\n        Event.prototype.inspect = function () {\n            return this.toString();\n        };\n        return Event;\n    }();\n    Next = function (_super) {\n        __extends(Next, _super);\n        function Next(valueF) {\n            Next.__super__.constructor.call(this);\n            if (isFunction(valueF)) {\n                this.value = _.cached(valueF);\n            } else {\n                this.value = _.always(valueF);\n            }\n        }\n        Next.prototype.isNext = function () {\n            return true;\n        };\n        Next.prototype.hasValue = function () {\n            return true;\n        };\n        Next.prototype.fmap = function (f) {\n            var _this = this;\n            return this.apply(function () {\n                return f(_this.value());\n            });\n        };\n        Next.prototype.apply = function (value) {\n            return new Next(value);\n        };\n        Next.prototype.filter = function (f) {\n            return f(this.value());\n        };\n        Next.prototype.toString = function () {\n            return _.toString(this.value());\n        };\n        return Next;\n    }(Event);\n    Initial = function (_super) {\n        __extends(Initial, _super);\n        function Initial() {\n            _ref1 = Initial.__super__.constructor.apply(this, arguments);\n            return _ref1;\n        }\n        Initial.prototype.isInitial = function () {\n            return true;\n        };\n        Initial.prototype.isNext = function () {\n            return false;\n        };\n        Initial.prototype.apply = function (value) {\n            return new Initial(value);\n        };\n        Initial.prototype.toNext = function () {\n            return new Next(this.value);\n        };\n        return Initial;\n    }(Next);\n    End = function (_super) {\n        __extends(End, _super);\n        function End() {\n            _ref2 = End.__super__.constructor.apply(this, arguments);\n            return _ref2;\n        }\n        End.prototype.isEnd = function () {\n            return true;\n        };\n        End.prototype.fmap = function () {\n            return this;\n        };\n        End.prototype.apply = function () {\n            return this;\n        };\n        End.prototype.toString = function () {\n            return '<end>';\n        };\n        return End;\n    }(Event);\n    Error = function (_super) {\n        __extends(Error, _super);\n        function Error(error) {\n            this.error = error;\n        }\n        Error.prototype.isError = function () {\n            return true;\n        };\n        Error.prototype.fmap = function () {\n            return this;\n        };\n        Error.prototype.apply = function () {\n            return this;\n        };\n        Error.prototype.toString = function () {\n            return '<error> ' + _.toString(this.error);\n        };\n        return Error;\n    }(Event);\n    idCounter = 0;\n    Observable = function () {\n        function Observable(desc) {\n            this.combine = __bind(this.combine, this);\n            this.flatMapLatest = __bind(this.flatMapLatest, this);\n            this.fold = __bind(this.fold, this);\n            this.scan = __bind(this.scan, this);\n            this.id = ++idCounter;\n            this.assign = this.onValue;\n            withDescription(desc, this);\n        }\n        Observable.prototype.onValue = function () {\n            var f;\n            f = makeFunctionArgs(arguments);\n            return this.subscribe(function (event) {\n                if (event.hasValue()) {\n                    return f(event.value());\n                }\n            });\n        };\n        Observable.prototype.onValues = function (f) {\n            return this.onValue(function (args) {\n                return f.apply(null, args);\n            });\n        };\n        Observable.prototype.onError = function () {\n            var f;\n            f = makeFunctionArgs(arguments);\n            return this.subscribe(function (event) {\n                if (event.isError()) {\n                    return f(event.error);\n                }\n            });\n        };\n        Observable.prototype.onEnd = function () {\n            var f;\n            f = makeFunctionArgs(arguments);\n            return this.subscribe(function (event) {\n                if (event.isEnd()) {\n                    return f();\n                }\n            });\n        };\n        Observable.prototype.errors = function () {\n            return withDescription(this, 'errors', this.filter(function () {\n                return false;\n            }));\n        };\n        Observable.prototype.filter = function () {\n            var args, f;\n            f = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n            return convertArgsToFunction(this, f, args, function (f) {\n                return withDescription(this, 'filter', f, this.withHandler(function (event) {\n                    if (event.filter(f)) {\n                        return this.push(event);\n                    } else {\n                        return Bacon.more;\n                    }\n                }));\n            });\n        };\n        Observable.prototype.takeWhile = function () {\n            var args, f;\n            f = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n            return convertArgsToFunction(this, f, args, function (f) {\n                return withDescription(this, 'takeWhile', f, this.withHandler(function (event) {\n                    if (event.filter(f)) {\n                        return this.push(event);\n                    } else {\n                        this.push(end());\n                        return Bacon.noMore;\n                    }\n                }));\n            });\n        };\n        Observable.prototype.endOnError = function () {\n            var args, f;\n            f = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n            if (f == null) {\n                f = true;\n            }\n            return convertArgsToFunction(this, f, args, function (f) {\n                return withDescription(this, 'endOnError', this.withHandler(function (event) {\n                    if (event.isError() && f(event.error)) {\n                        this.push(event);\n                        return this.push(end());\n                    } else {\n                        return this.push(event);\n                    }\n                }));\n            });\n        };\n        Observable.prototype.take = function (count) {\n            if (count <= 0) {\n                return Bacon.never();\n            }\n            return withDescription(this, 'take', count, this.withHandler(function (event) {\n                if (!event.hasValue()) {\n                    return this.push(event);\n                } else {\n                    count--;\n                    if (count > 0) {\n                        return this.push(event);\n                    } else {\n                        if (count === 0) {\n                            this.push(event);\n                        }\n                        this.push(end());\n                        return Bacon.noMore;\n                    }\n                }\n            }));\n        };\n        Observable.prototype.map = function () {\n            var args, p;\n            p = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n            if (p instanceof Property) {\n                return p.sampledBy(this, former);\n            } else {\n                return convertArgsToFunction(this, p, args, function (f) {\n                    return withDescription(this, 'map', f, this.withHandler(function (event) {\n                        return this.push(event.fmap(f));\n                    }));\n                });\n            }\n        };\n        Observable.prototype.mapError = function () {\n            var f;\n            f = makeFunctionArgs(arguments);\n            return withDescription(this, 'mapError', f, this.withHandler(function (event) {\n                if (event.isError()) {\n                    return this.push(next(f(event.error)));\n                } else {\n                    return this.push(event);\n                }\n            }));\n        };\n        Observable.prototype.mapEnd = function () {\n            var f;\n            f = makeFunctionArgs(arguments);\n            return withDescription(this, 'mapEnd', f, this.withHandler(function (event) {\n                if (event.isEnd()) {\n                    this.push(next(f(event)));\n                    this.push(end());\n                    return Bacon.noMore;\n                } else {\n                    return this.push(event);\n                }\n            }));\n        };\n        Observable.prototype.doAction = function () {\n            var f;\n            f = makeFunctionArgs(arguments);\n            return withDescription(this, 'doAction', f, this.withHandler(function (event) {\n                if (event.hasValue()) {\n                    f(event.value());\n                }\n                return this.push(event);\n            }));\n        };\n        Observable.prototype.skip = function (count) {\n            return withDescription(this, 'skip', count, this.withHandler(function (event) {\n                if (!event.hasValue()) {\n                    return this.push(event);\n                } else if (count > 0) {\n                    count--;\n                    return Bacon.more;\n                } else {\n                    return this.push(event);\n                }\n            }));\n        };\n        Observable.prototype.skipDuplicates = function (isEqual) {\n            if (isEqual == null) {\n                isEqual = function (a, b) {\n                    return a === b;\n                };\n            }\n            return withDescription(this, 'skipDuplicates', this.withStateMachine(None, function (prev, event) {\n                if (!event.hasValue()) {\n                    return [\n                        prev,\n                        [event]\n                    ];\n                } else if (event.isInitial() || prev === None || !isEqual(prev.get(), event.value())) {\n                    return [\n                        new Some(event.value()),\n                        [event]\n                    ];\n                } else {\n                    return [\n                        prev,\n                        []\n                    ];\n                }\n            }));\n        };\n        Observable.prototype.skipErrors = function () {\n            return withDescription(this, 'skipErrors', this.withHandler(function (event) {\n                if (event.isError()) {\n                    return Bacon.more;\n                } else {\n                    return this.push(event);\n                }\n            }));\n        };\n        Observable.prototype.withStateMachine = function (initState, f) {\n            var state;\n            state = initState;\n            return withDescription(this, 'withStateMachine', initState, f, this.withHandler(function (event) {\n                var fromF, newState, output, outputs, reply, _i, _len;\n                fromF = f(state, event);\n                newState = fromF[0], outputs = fromF[1];\n                state = newState;\n                reply = Bacon.more;\n                for (_i = 0, _len = outputs.length; _i < _len; _i++) {\n                    output = outputs[_i];\n                    reply = this.push(output);\n                    if (reply === Bacon.noMore) {\n                        return reply;\n                    }\n                }\n                return reply;\n            }));\n        };\n        Observable.prototype.scan = function (seed, f, lazyF) {\n            var acc, f_, resultProperty, root, subscribe, _this = this;\n            f_ = toCombinator(f);\n            f = lazyF ? f_ : function (x, y) {\n                return f_(x(), y());\n            };\n            acc = toOption(seed).map(function (x) {\n                return _.always(x);\n            });\n            root = this;\n            subscribe = function (sink) {\n                var initSent, reply, sendInit, unsub;\n                initSent = false;\n                unsub = nop;\n                reply = Bacon.more;\n                sendInit = function () {\n                    if (!initSent) {\n                        return acc.forEach(function (valueF) {\n                            initSent = true;\n                            reply = sink(new Initial(valueF));\n                            if (reply === Bacon.noMore) {\n                                unsub();\n                                return unsub = nop;\n                            }\n                        });\n                    }\n                };\n                unsub = _this.subscribe(function (event) {\n                    var next, prev;\n                    if (event.hasValue()) {\n                        if (initSent && event.isInitial()) {\n                            return Bacon.more;\n                        } else {\n                            if (!event.isInitial()) {\n                                sendInit();\n                            }\n                            initSent = true;\n                            prev = acc.getOrElse(function () {\n                                return void 0;\n                            });\n                            next = _.cached(function () {\n                                return f(prev, event.value);\n                            });\n                            acc = new Some(next);\n                            return sink(event.apply(next));\n                        }\n                    } else {\n                        if (event.isEnd()) {\n                            reply = sendInit();\n                        }\n                        if (reply !== Bacon.noMore) {\n                            return sink(event);\n                        }\n                    }\n                });\n                UpdateBarrier.whenDone(resultProperty, sendInit);\n                return unsub;\n            };\n            return resultProperty = new Property(describe(this, 'scan', seed, f), subscribe);\n        };\n        Observable.prototype.fold = function (seed, f) {\n            return withDescription(this, 'fold', seed, f, this.scan(seed, f).sampledBy(this.filter(false).mapEnd().toProperty()));\n        };\n        Observable.prototype.zip = function (other, f) {\n            if (f == null) {\n                f = Array;\n            }\n            return withDescription(this, 'zip', other, Bacon.zipWith([\n                this,\n                other\n            ], f));\n        };\n        Observable.prototype.diff = function (start, f) {\n            f = toCombinator(f);\n            return withDescription(this, 'diff', start, f, this.scan([start], function (prevTuple, next) {\n                return [\n                    next,\n                    f(prevTuple[0], next)\n                ];\n            }).filter(function (tuple) {\n                return tuple.length === 2;\n            }).map(function (tuple) {\n                return tuple[1];\n            }));\n        };\n        Observable.prototype.flatMap = function (f, firstOnly) {\n            var root;\n            f = makeSpawner(f);\n            root = this;\n            return new EventStream(describe(root, 'flatMap' + (firstOnly ? 'First' : ''), f), function (sink) {\n                var checkEnd, composite;\n                composite = new CompositeUnsubscribe();\n                checkEnd = function (unsub) {\n                    unsub();\n                    if (composite.empty()) {\n                        return sink(end());\n                    }\n                };\n                composite.add(function (__, unsubRoot) {\n                    return root.subscribe(function (event) {\n                        var child;\n                        if (event.isEnd()) {\n                            return checkEnd(unsubRoot);\n                        } else if (event.isError()) {\n                            return sink(event);\n                        } else if (firstOnly && composite.count() > 1) {\n                            return Bacon.more;\n                        } else {\n                            if (composite.unsubscribed) {\n                                return Bacon.noMore;\n                            }\n                            child = f(event.value());\n                            if (!isObservable(child)) {\n                                child = Bacon.once(child);\n                            }\n                            return composite.add(function (unsubAll, unsubMe) {\n                                return child.subscribe(function (event) {\n                                    var reply;\n                                    if (event.isEnd()) {\n                                        checkEnd(unsubMe);\n                                        return Bacon.noMore;\n                                    } else {\n                                        if (event instanceof Initial) {\n                                            event = event.toNext();\n                                        }\n                                        reply = sink(event);\n                                        if (reply === Bacon.noMore) {\n                                            unsubAll();\n                                        }\n                                        return reply;\n                                    }\n                                });\n                            });\n                        }\n                    });\n                });\n                return composite.unsubscribe;\n            });\n        };\n        Observable.prototype.flatMapFirst = function (f) {\n            return this.flatMap(f, true);\n        };\n        Observable.prototype.flatMapLatest = function (f) {\n            var stream, _this = this;\n            f = makeSpawner(f);\n            stream = this.toEventStream();\n            return withDescription(this, 'flatMapLatest', f, stream.flatMap(function (value) {\n                return f(value).takeUntil(stream);\n            }));\n        };\n        Observable.prototype.not = function () {\n            return withDescription(this, 'not', this.map(function (x) {\n                return !x;\n            }));\n        };\n        Observable.prototype.log = function () {\n            var args;\n            args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n            this.subscribe(function (event) {\n                return typeof console !== 'undefined' && console !== null ? typeof console.log === 'function' ? console.log.apply(console, __slice.call(args).concat([event.toString()])) : void 0 : void 0;\n            });\n            return this;\n        };\n        Observable.prototype.slidingWindow = function (n, minValues) {\n            if (minValues == null) {\n                minValues = 0;\n            }\n            return withDescription(this, 'slidingWindow', n, minValues, this.scan([], function (window, value) {\n                return window.concat([value]).slice(-n);\n            }).filter(function (values) {\n                return values.length >= minValues;\n            }));\n        };\n        Observable.prototype.combine = function (other, f) {\n            var combinator;\n            combinator = toCombinator(f);\n            return withDescription(this, 'combine', other, f, Bacon.combineAsArray(this, other).map(function (values) {\n                return combinator(values[0], values[1]);\n            }));\n        };\n        Observable.prototype.decode = function (cases) {\n            return withDescription(this, 'decode', cases, this.combine(Bacon.combineTemplate(cases), function (key, values) {\n                return values[key];\n            }));\n        };\n        Observable.prototype.awaiting = function (other) {\n            return withDescription(this, 'awaiting', other, Bacon.groupSimultaneous(this, other).map(function (_arg) {\n                var myValues, otherValues;\n                myValues = _arg[0], otherValues = _arg[1];\n                return otherValues.length === 0;\n            }).toProperty(false).skipDuplicates());\n        };\n        Observable.prototype.name = function (name) {\n            this.toString = function () {\n                return name;\n            };\n            return this;\n        };\n        return Observable;\n    }();\n    Observable.prototype.reduce = Observable.prototype.fold;\n    EventStream = function (_super) {\n        __extends(EventStream, _super);\n        function EventStream(desc, subscribe) {\n            this.takeUntil = __bind(this.takeUntil, this);\n            this.sampledBy = __bind(this.sampledBy, this);\n            var dispatcher;\n            if (isFunction(desc)) {\n                subscribe = desc;\n                desc = [];\n            }\n            EventStream.__super__.constructor.call(this, desc);\n            assertFunction(subscribe);\n            dispatcher = new Dispatcher(subscribe);\n            this.subscribe = dispatcher.subscribe;\n            this.subscribeInternal = this.subscribe;\n            this.hasSubscribers = dispatcher.hasSubscribers;\n            registerObs(this);\n        }\n        EventStream.prototype.delay = function (delay) {\n            return withDescription(this, 'delay', delay, this.flatMap(function (value) {\n                return Bacon.later(delay, value);\n            }));\n        };\n        EventStream.prototype.debounce = function (delay) {\n            return withDescription(this, 'debounce', delay, this.flatMapLatest(function (value) {\n                return Bacon.later(delay, value);\n            }));\n        };\n        EventStream.prototype.debounceImmediate = function (delay) {\n            return withDescription(this, 'debounceImmediate', delay, this.flatMapFirst(function (value) {\n                return Bacon.once(value).concat(Bacon.later(delay).filter(false));\n            }));\n        };\n        EventStream.prototype.throttle = function (delay) {\n            return withDescription(this, 'throttle', delay, this.bufferWithTime(delay).map(function (values) {\n                return values[values.length - 1];\n            }));\n        };\n        EventStream.prototype.bufferWithTime = function (delay) {\n            return withDescription(this, 'bufferWithTime', delay, this.bufferWithTimeOrCount(delay, Number.MAX_VALUE));\n        };\n        EventStream.prototype.bufferWithCount = function (count) {\n            return withDescription(this, 'bufferWithCount', count, this.bufferWithTimeOrCount(void 0, count));\n        };\n        EventStream.prototype.bufferWithTimeOrCount = function (delay, count) {\n            var flushOrSchedule;\n            flushOrSchedule = function (buffer) {\n                if (buffer.values.length === count) {\n                    return buffer.flush();\n                } else if (delay !== void 0) {\n                    return buffer.schedule();\n                }\n            };\n            return withDescription(this, 'bufferWithTimeOrCount', delay, count, this.buffer(delay, flushOrSchedule, flushOrSchedule));\n        };\n        EventStream.prototype.buffer = function (delay, onInput, onFlush) {\n            var buffer, delayMs, reply;\n            if (onInput == null) {\n                onInput = function () {\n                };\n            }\n            if (onFlush == null) {\n                onFlush = function () {\n                };\n            }\n            buffer = {\n                scheduled: false,\n                end: null,\n                values: [],\n                flush: function () {\n                    var reply;\n                    this.scheduled = false;\n                    if (this.values.length > 0) {\n                        reply = this.push(next(this.values));\n                        this.values = [];\n                        if (this.end != null) {\n                            return this.push(this.end);\n                        } else if (reply !== Bacon.noMore) {\n                            return onFlush(this);\n                        }\n                    } else {\n                        if (this.end != null) {\n                            return this.push(this.end);\n                        }\n                    }\n                },\n                schedule: function () {\n                    var _this = this;\n                    if (!this.scheduled) {\n                        this.scheduled = true;\n                        return delay(function () {\n                            return _this.flush();\n                        });\n                    }\n                }\n            };\n            reply = Bacon.more;\n            if (!isFunction(delay)) {\n                delayMs = delay;\n                delay = function (f) {\n                    return Bacon.scheduler.setTimeout(f, delayMs);\n                };\n            }\n            return withDescription(this, 'buffer', this.withHandler(function (event) {\n                buffer.push = this.push;\n                if (event.isError()) {\n                    reply = this.push(event);\n                } else if (event.isEnd()) {\n                    buffer.end = event;\n                    if (!buffer.scheduled) {\n                        buffer.flush();\n                    }\n                } else {\n                    buffer.values.push(event.value());\n                    onInput(buffer);\n                }\n                return reply;\n            }));\n        };\n        EventStream.prototype.merge = function (right) {\n            var left;\n            assertEventStream(right);\n            left = this;\n            return new EventStream(describe(left, 'merge', right), function (sink) {\n                var ends, smartSink;\n                ends = 0;\n                smartSink = function (obs) {\n                    return function (unsubBoth) {\n                        return obs.subscribe(function (event) {\n                            var reply;\n                            if (event.isEnd()) {\n                                ends++;\n                                if (ends === 2) {\n                                    return sink(end());\n                                } else {\n                                    return Bacon.more;\n                                }\n                            } else {\n                                reply = sink(event);\n                                if (reply === Bacon.noMore) {\n                                    unsubBoth();\n                                }\n                                return reply;\n                            }\n                        });\n                    };\n                };\n                return compositeUnsubscribe(smartSink(left), smartSink(right));\n            });\n        };\n        EventStream.prototype.toProperty = function (initValue) {\n            if (arguments.length === 0) {\n                initValue = None;\n            }\n            return withDescription(this, 'toProperty', initValue, this.scan(initValue, latterF, true));\n        };\n        EventStream.prototype.toEventStream = function () {\n            return this;\n        };\n        EventStream.prototype.sampledBy = function (sampler, combinator) {\n            return withDescription(this, 'sampledBy', sampler, combinator, this.toProperty().sampledBy(sampler, combinator));\n        };\n        EventStream.prototype.concat = function (right) {\n            var left;\n            left = this;\n            return new EventStream(describe(left, 'concat', right), function (sink) {\n                var unsubLeft, unsubRight;\n                unsubRight = nop;\n                unsubLeft = left.subscribe(function (e) {\n                    if (e.isEnd()) {\n                        return unsubRight = right.subscribe(sink);\n                    } else {\n                        return sink(e);\n                    }\n                });\n                return function () {\n                    unsubLeft();\n                    return unsubRight();\n                };\n            });\n        };\n        EventStream.prototype.takeUntil = function (stopper) {\n            var endMarker;\n            endMarker = {};\n            return withDescription(this, 'takeUntil', stopper, Bacon.groupSimultaneous(this.mapEnd(endMarker), stopper.skipErrors()).withHandler(function (event) {\n                var data, reply, value, _i, _len, _ref3;\n                if (!event.hasValue()) {\n                    return this.push(event);\n                } else {\n                    _ref3 = event.value(), data = _ref3[0], stopper = _ref3[1];\n                    if (stopper.length) {\n                        return this.push(end());\n                    } else {\n                        reply = Bacon.more;\n                        for (_i = 0, _len = data.length; _i < _len; _i++) {\n                            value = data[_i];\n                            if (value === endMarker) {\n                                reply = this.push(end());\n                            } else {\n                                reply = this.push(next(value));\n                            }\n                        }\n                        return reply;\n                    }\n                }\n            }));\n        };\n        EventStream.prototype.skipUntil = function (starter) {\n            var started;\n            started = starter.take(1).map(true).toProperty(false);\n            return withDescription(this, 'skipUntil', starter, this.filter(started));\n        };\n        EventStream.prototype.skipWhile = function () {\n            var args, f, ok;\n            f = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n            ok = false;\n            return convertArgsToFunction(this, f, args, function (f) {\n                return withDescription(this, 'skipWhile', f, this.withHandler(function (event) {\n                    if (ok || !event.hasValue() || !f(event.value())) {\n                        if (event.hasValue()) {\n                            ok = true;\n                        }\n                        return this.push(event);\n                    } else {\n                        return Bacon.more;\n                    }\n                }));\n            });\n        };\n        EventStream.prototype.startWith = function (seed) {\n            return withDescription(this, 'startWith', seed, Bacon.once(seed).concat(this));\n        };\n        EventStream.prototype.withHandler = function (handler) {\n            var dispatcher;\n            dispatcher = new Dispatcher(this.subscribe, handler);\n            return new EventStream(describe(this, 'withHandler', handler), dispatcher.subscribe);\n        };\n        return EventStream;\n    }(Observable);\n    Property = function (_super) {\n        __extends(Property, _super);\n        function Property(desc, subscribe, handler) {\n            this.toEventStream = __bind(this.toEventStream, this);\n            this.toProperty = __bind(this.toProperty, this);\n            this.changes = __bind(this.changes, this);\n            this.sample = __bind(this.sample, this);\n            var _this = this;\n            if (isFunction(desc)) {\n                handler = subscribe;\n                subscribe = desc;\n                desc = [];\n            }\n            Property.__super__.constructor.call(this, desc);\n            assertFunction(subscribe);\n            if (handler === true) {\n                this.subscribeInternal = subscribe;\n            } else {\n                this.subscribeInternal = new PropertyDispatcher(this, subscribe, handler).subscribe;\n            }\n            this.sampledBy = function (sampler, combinator) {\n                var lazy, result, samplerSource, stream, thisSource;\n                if (combinator != null) {\n                    combinator = toCombinator(combinator);\n                } else {\n                    lazy = true;\n                    combinator = function (f) {\n                        return f();\n                    };\n                }\n                thisSource = new Source(_this, false, false, _this.subscribeInternal, lazy);\n                samplerSource = new Source(sampler, true, false, sampler.subscribe, lazy);\n                stream = Bacon.when([\n                    thisSource,\n                    samplerSource\n                ], combinator);\n                result = sampler instanceof Property ? stream.toProperty() : stream;\n                return withDescription(_this, 'sampledBy', sampler, combinator, result);\n            };\n            this.subscribe = this.subscribeInternal;\n            registerObs(this);\n        }\n        Property.prototype.sample = function (interval) {\n            return withDescription(this, 'sample', interval, this.sampledBy(Bacon.interval(interval, {})));\n        };\n        Property.prototype.changes = function () {\n            var _this = this;\n            return new EventStream(describe(this, 'changes'), function (sink) {\n                return _this.subscribe(function (event) {\n                    if (!event.isInitial()) {\n                        return sink(event);\n                    }\n                });\n            });\n        };\n        Property.prototype.withHandler = function (handler) {\n            return new Property(describe(this, 'withHandler', handler), this.subscribeInternal, handler);\n        };\n        Property.prototype.toProperty = function () {\n            assertNoArguments(arguments);\n            return this;\n        };\n        Property.prototype.toEventStream = function () {\n            var _this = this;\n            return new EventStream(describe(this, 'toEventStream'), function (sink) {\n                return _this.subscribe(function (event) {\n                    if (event.isInitial()) {\n                        event = event.toNext();\n                    }\n                    return sink(event);\n                });\n            });\n        };\n        Property.prototype.and = function (other) {\n            return withDescription(this, 'and', other, this.combine(other, function (x, y) {\n                return x && y;\n            }));\n        };\n        Property.prototype.or = function (other) {\n            return withDescription(this, 'or', other, this.combine(other, function (x, y) {\n                return x || y;\n            }));\n        };\n        Property.prototype.delay = function (delay) {\n            return this.delayChanges('delay', delay, function (changes) {\n                return changes.delay(delay);\n            });\n        };\n        Property.prototype.debounce = function (delay) {\n            return this.delayChanges('debounce', delay, function (changes) {\n                return changes.debounce(delay);\n            });\n        };\n        Property.prototype.throttle = function (delay) {\n            return this.delayChanges('throttle', delay, function (changes) {\n                return changes.throttle(delay);\n            });\n        };\n        Property.prototype.delayChanges = function () {\n            var desc, f, _i;\n            desc = 2 <= arguments.length ? __slice.call(arguments, 0, _i = arguments.length - 1) : (_i = 0, []), f = arguments[_i++];\n            return withDescription.apply(null, [this].concat(__slice.call(desc), [addPropertyInitValueToStream(this, f(this.changes()))]));\n        };\n        Property.prototype.takeUntil = function (stopper) {\n            var changes;\n            changes = this.changes().takeUntil(stopper);\n            return withDescription(this, 'takeUntil', stopper, addPropertyInitValueToStream(this, changes));\n        };\n        Property.prototype.startWith = function (value) {\n            return withDescription(this, 'startWith', value, this.scan(value, function (prev, next) {\n                return next;\n            }));\n        };\n        return Property;\n    }(Observable);\n    convertArgsToFunction = function (obs, f, args, method) {\n        var sampled;\n        if (f instanceof Property) {\n            sampled = f.sampledBy(obs, function (p, s) {\n                return [\n                    p,\n                    s\n                ];\n            });\n            return method.apply(sampled, [function (_arg) {\n                    var p, s;\n                    p = _arg[0], s = _arg[1];\n                    return p;\n                }]).map(function (_arg) {\n                var p, s;\n                p = _arg[0], s = _arg[1];\n                return s;\n            });\n        } else {\n            f = makeFunction(f, args);\n            return method.apply(obs, [f]);\n        }\n    };\n    addPropertyInitValueToStream = function (property, stream) {\n        var justInitValue;\n        justInitValue = new EventStream(describe(property, 'justInitValue'), function (sink) {\n            var unsub, value;\n            value = null;\n            unsub = property.subscribe(function (event) {\n                if (event.hasValue()) {\n                    value = event;\n                }\n                return Bacon.noMore;\n            });\n            UpdateBarrier.whenDone(justInitValue, function () {\n                if (value != null) {\n                    sink(value);\n                }\n                return sink(end());\n            });\n            return unsub;\n        });\n        return justInitValue.concat(stream).toProperty();\n    };\n    Dispatcher = function () {\n        function Dispatcher(subscribe, handleEvent) {\n            var done, ended, prevError, pushIt, pushing, queue, removeSub, subscriptions, unsubscribeFromSource, waiters, _this = this;\n            if (subscribe == null) {\n                subscribe = function () {\n                    return nop;\n                };\n            }\n            subscriptions = [];\n            queue = null;\n            pushing = false;\n            ended = false;\n            this.hasSubscribers = function () {\n                return subscriptions.length > 0;\n            };\n            prevError = null;\n            unsubscribeFromSource = nop;\n            removeSub = function (subscription) {\n                return subscriptions = _.without(subscription, subscriptions);\n            };\n            waiters = null;\n            done = function () {\n                var w, ws, _i, _len, _results;\n                if (waiters != null) {\n                    ws = waiters;\n                    waiters = null;\n                    _results = [];\n                    for (_i = 0, _len = ws.length; _i < _len; _i++) {\n                        w = ws[_i];\n                        _results.push(w());\n                    }\n                    return _results;\n                }\n            };\n            pushIt = function (event) {\n                var reply, sub, success, tmp, _i, _len;\n                if (!pushing) {\n                    if (event === prevError) {\n                        return;\n                    }\n                    if (event.isError()) {\n                        prevError = event;\n                    }\n                    success = false;\n                    try {\n                        pushing = true;\n                        tmp = subscriptions;\n                        for (_i = 0, _len = tmp.length; _i < _len; _i++) {\n                            sub = tmp[_i];\n                            reply = sub.sink(event);\n                            if (reply === Bacon.noMore || event.isEnd()) {\n                                removeSub(sub);\n                            }\n                        }\n                        success = true;\n                    } finally {\n                        pushing = false;\n                        if (!success) {\n                            queue = null;\n                        }\n                    }\n                    success = true;\n                    while (queue != null ? queue.length : void 0) {\n                        event = _.head(queue);\n                        queue = _.tail(queue);\n                        this.push(event);\n                    }\n                    done(event);\n                    if (this.hasSubscribers()) {\n                        return Bacon.more;\n                    } else {\n                        return Bacon.noMore;\n                    }\n                } else {\n                    queue = (queue || []).concat([event]);\n                    return Bacon.more;\n                }\n            };\n            this.push = function (event) {\n                return UpdateBarrier.inTransaction(event, _this, pushIt, [event]);\n            };\n            if (handleEvent == null) {\n                handleEvent = function (event) {\n                    return this.push(event);\n                };\n            }\n            this.handleEvent = function (event) {\n                if (event.isEnd()) {\n                    ended = true;\n                }\n                return handleEvent.apply(_this, [event]);\n            };\n            this.subscribe = function (sink) {\n                var subscription;\n                if (ended) {\n                    sink(end());\n                    return nop;\n                } else {\n                    assertFunction(sink);\n                    subscription = { sink: sink };\n                    subscriptions = subscriptions.concat(subscription);\n                    if (subscriptions.length === 1) {\n                        unsubscribeFromSource = subscribe(_this.handleEvent);\n                    }\n                    assertFunction(unsubscribeFromSource);\n                    return function () {\n                        removeSub(subscription);\n                        if (!_this.hasSubscribers()) {\n                            return unsubscribeFromSource();\n                        }\n                    };\n                }\n            };\n        }\n        return Dispatcher;\n    }();\n    PropertyDispatcher = function (_super) {\n        __extends(PropertyDispatcher, _super);\n        function PropertyDispatcher(p, subscribe, handleEvent) {\n            var current, currentValueRootId, ended, push, _this = this;\n            PropertyDispatcher.__super__.constructor.call(this, subscribe, handleEvent);\n            current = None;\n            currentValueRootId = void 0;\n            push = this.push;\n            subscribe = this.subscribe;\n            ended = false;\n            this.push = function (event) {\n                if (event.isEnd()) {\n                    ended = true;\n                }\n                if (event.hasValue()) {\n                    current = new Some(event);\n                    currentValueRootId = UpdateBarrier.currentEventId();\n                }\n                return push.apply(_this, [event]);\n            };\n            this.subscribe = function (sink) {\n                var dispatchingId, initSent, maybeSubSource, reply, valId;\n                initSent = false;\n                reply = Bacon.more;\n                maybeSubSource = function () {\n                    if (reply === Bacon.noMore) {\n                        return nop;\n                    } else if (ended) {\n                        sink(end());\n                        return nop;\n                    } else {\n                        return subscribe.apply(this, [sink]);\n                    }\n                };\n                if (current.isDefined && (_this.hasSubscribers() || ended)) {\n                    dispatchingId = UpdateBarrier.currentEventId();\n                    valId = currentValueRootId;\n                    if (!ended && valId && dispatchingId && dispatchingId !== valId) {\n                        UpdateBarrier.whenDone(p, function () {\n                            if (currentValueRootId === valId) {\n                                return sink(initial(current.get().value()));\n                            }\n                        });\n                        return maybeSubSource();\n                    } else {\n                        UpdateBarrier.inTransaction(void 0, _this, function () {\n                            return reply = sink(initial(current.get().value()));\n                        }, []);\n                        return maybeSubSource();\n                    }\n                } else {\n                    return maybeSubSource();\n                }\n            };\n        }\n        return PropertyDispatcher;\n    }(Dispatcher);\n    Bus = function (_super) {\n        __extends(Bus, _super);\n        function Bus() {\n            var ended, guardedSink, sink, subscribeAll, subscribeInput, subscriptions, unsubAll, unsubscribeInput, _this = this;\n            sink = void 0;\n            subscriptions = [];\n            ended = false;\n            guardedSink = function (input) {\n                return function (event) {\n                    if (event.isEnd()) {\n                        unsubscribeInput(input);\n                        return Bacon.noMore;\n                    } else {\n                        return sink(event);\n                    }\n                };\n            };\n            unsubAll = function () {\n                var sub, _i, _len, _results;\n                _results = [];\n                for (_i = 0, _len = subscriptions.length; _i < _len; _i++) {\n                    sub = subscriptions[_i];\n                    _results.push(typeof sub.unsub === 'function' ? sub.unsub() : void 0);\n                }\n                return _results;\n            };\n            subscribeInput = function (subscription) {\n                return subscription.unsub = subscription.input.subscribe(guardedSink(subscription.input));\n            };\n            unsubscribeInput = function (input) {\n                var i, sub, _i, _len;\n                for (i = _i = 0, _len = subscriptions.length; _i < _len; i = ++_i) {\n                    sub = subscriptions[i];\n                    if (sub.input === input) {\n                        if (typeof sub.unsub === 'function') {\n                            sub.unsub();\n                        }\n                        subscriptions.splice(i, 1);\n                        return;\n                    }\n                }\n            };\n            subscribeAll = function (newSink) {\n                var subscription, _i, _len, _ref3;\n                sink = newSink;\n                _ref3 = cloneArray(subscriptions);\n                for (_i = 0, _len = _ref3.length; _i < _len; _i++) {\n                    subscription = _ref3[_i];\n                    subscribeInput(subscription);\n                }\n                return unsubAll;\n            };\n            Bus.__super__.constructor.call(this, describe(Bacon, 'Bus'), subscribeAll);\n            this.plug = function (input) {\n                var sub;\n                if (ended) {\n                    return;\n                }\n                sub = { input: input };\n                subscriptions.push(sub);\n                if (sink != null) {\n                    subscribeInput(sub);\n                }\n                return function () {\n                    return unsubscribeInput(input);\n                };\n            };\n            this.push = function (value) {\n                return typeof sink === 'function' ? sink(next(value)) : void 0;\n            };\n            this.error = function (error) {\n                return typeof sink === 'function' ? sink(new Error(error)) : void 0;\n            };\n            this.end = function () {\n                ended = true;\n                unsubAll();\n                return typeof sink === 'function' ? sink(end()) : void 0;\n            };\n        }\n        return Bus;\n    }(EventStream);\n    Source = function () {\n        function Source(obs, sync, consume, subscribe, lazy, queue) {\n            var invoke;\n            this.obs = obs;\n            this.sync = sync;\n            this.subscribe = subscribe;\n            if (lazy == null) {\n                lazy = false;\n            }\n            if (queue == null) {\n                queue = [];\n            }\n            invoke = lazy ? _.id : function (f) {\n                return f();\n            };\n            if (this.subscribe == null) {\n                this.subscribe = obs.subscribe;\n            }\n            this.markEnded = function () {\n                return this.ended = true;\n            };\n            this.toString = this.obs.toString;\n            if (consume) {\n                this.consume = function () {\n                    return invoke(queue.shift());\n                };\n                this.push = function (x) {\n                    return queue.push(x);\n                };\n                this.mayHave = function (c) {\n                    return !this.ended || queue.length >= c;\n                };\n                this.hasAtLeast = function (c) {\n                    return queue.length >= c;\n                };\n                this.flatten = false;\n            } else {\n                this.consume = function () {\n                    return invoke(queue[0]);\n                };\n                this.push = function (x) {\n                    return queue = [x];\n                };\n                this.mayHave = function () {\n                    return true;\n                };\n                this.hasAtLeast = function () {\n                    return queue.length;\n                };\n                this.flatten = true;\n            }\n        }\n        return Source;\n    }();\n    BufferingSource = function (_super) {\n        __extends(BufferingSource, _super);\n        function BufferingSource(obs) {\n            var queue;\n            this.obs = obs;\n            queue = [];\n            BufferingSource.__super__.constructor.call(this, this.obs, true, false, this.obs.subscribe, false, queue);\n            this.consume = function () {\n                var values;\n                values = queue;\n                queue = [];\n                return values;\n            };\n            this.push = function (x) {\n                return queue.push(x());\n            };\n            this.hasAtLeast = function () {\n                return true;\n            };\n        }\n        return BufferingSource;\n    }(Source);\n    Source.fromObservable = function (s) {\n        if (s instanceof Source) {\n            return s;\n        } else if (s instanceof Property) {\n            return new Source(s, false, false);\n        } else {\n            return new Source(s, true, true);\n        }\n    };\n    describe = function () {\n        var args, context, method;\n        context = arguments[0], method = arguments[1], args = 3 <= arguments.length ? __slice.call(arguments, 2) : [];\n        if ((context || method) instanceof Desc) {\n            return context || method;\n        } else {\n            return new Desc(context, method, args);\n        }\n    };\n    Desc = function () {\n        function Desc(context, method, args) {\n            var collectDeps, dependsOn, findDeps, flatDeps;\n            findDeps = function (x) {\n                if (isArray(x)) {\n                    return _.flatMap(findDeps, x);\n                } else if (isObservable(x)) {\n                    return [x];\n                } else if (x instanceof Source) {\n                    return [x.obs];\n                } else {\n                    return [];\n                }\n            };\n            flatDeps = null;\n            collectDeps = function (o) {\n                var deps;\n                deps = o.internalDeps();\n                return _.each(deps, function (i, dep) {\n                    flatDeps[dep.id] = true;\n                    return collectDeps(dep);\n                });\n            };\n            dependsOn = function (b) {\n                if (flatDeps == null) {\n                    flatDeps = {};\n                    collectDeps(this);\n                }\n                return flatDeps[b.id];\n            };\n            this.apply = function (obs) {\n                var deps;\n                deps = _.cached(function () {\n                    return findDeps([context].concat(args));\n                });\n                obs.internalDeps = obs.internalDeps || deps;\n                obs.dependsOn = dependsOn;\n                obs.deps = deps;\n                obs.toString = function () {\n                    return _.toString(context) + '.' + _.toString(method) + '(' + _.map(_.toString, args) + ')';\n                };\n                obs.inspect = function () {\n                    return obs.toString();\n                };\n                obs.desc = function () {\n                    return {\n                        context: context,\n                        method: method,\n                        args: args\n                    };\n                };\n                return obs;\n            };\n        }\n        return Desc;\n    }();\n    withDescription = function () {\n        var desc, obs, _i;\n        desc = 2 <= arguments.length ? __slice.call(arguments, 0, _i = arguments.length - 1) : (_i = 0, []), obs = arguments[_i++];\n        return describe.apply(null, desc).apply(obs);\n    };\n    Bacon.when = function () {\n        var f, i, index, ix, len, needsBarrier, pat, patSources, pats, patterns, resultStream, s, sources, usage, _i, _j, _len, _len1, _ref3;\n        patterns = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n        if (patterns.length === 0) {\n            return Bacon.never();\n        }\n        len = patterns.length;\n        usage = 'when: expecting arguments in the form (Observable+,function)+';\n        assert(usage, len % 2 === 0);\n        sources = [];\n        pats = [];\n        i = 0;\n        while (i < len) {\n            patSources = _.toArray(patterns[i]);\n            f = patterns[i + 1];\n            pat = {\n                f: isFunction(f) ? f : function () {\n                    return f;\n                },\n                ixs: []\n            };\n            for (_i = 0, _len = patSources.length; _i < _len; _i++) {\n                s = patSources[_i];\n                assert(isObservable(s), usage);\n                index = _.indexOf(sources, s);\n                if (index < 0) {\n                    sources.push(s);\n                    index = sources.length - 1;\n                }\n                _ref3 = pat.ixs;\n                for (_j = 0, _len1 = _ref3.length; _j < _len1; _j++) {\n                    ix = _ref3[_j];\n                    if (ix.index === index) {\n                        ix.count++;\n                    }\n                }\n                pat.ixs.push({\n                    index: index,\n                    count: 1\n                });\n            }\n            if (patSources.length > 0) {\n                pats.push(pat);\n            }\n            i = i + 2;\n        }\n        if (!sources.length) {\n            return Bacon.never();\n        }\n        sources = _.map(Source.fromObservable, sources);\n        needsBarrier = _.any(sources, function (s) {\n            return s.flatten;\n        }) && containsDuplicateDeps(_.map(function (s) {\n            return s.obs;\n        }, sources));\n        return resultStream = new EventStream(describe.apply(null, [\n            Bacon,\n            'when'\n        ].concat(__slice.call(patterns))), function (sink) {\n            var cannotMatch, cannotSync, ends, match, nonFlattened, part, triggers;\n            triggers = [];\n            ends = false;\n            match = function (p) {\n                var _k, _len2, _ref4;\n                _ref4 = p.ixs;\n                for (_k = 0, _len2 = _ref4.length; _k < _len2; _k++) {\n                    i = _ref4[_k];\n                    if (!sources[i.index].hasAtLeast(i.count)) {\n                        return false;\n                    }\n                }\n                return true;\n            };\n            cannotSync = function (source) {\n                return !source.sync || source.ended;\n            };\n            cannotMatch = function (p) {\n                var _k, _len2, _ref4;\n                _ref4 = p.ixs;\n                for (_k = 0, _len2 = _ref4.length; _k < _len2; _k++) {\n                    i = _ref4[_k];\n                    if (!sources[i.index].mayHave(i.count)) {\n                        return true;\n                    }\n                }\n            };\n            nonFlattened = function (trigger) {\n                return !trigger.source.flatten;\n            };\n            part = function (source) {\n                return function (unsubAll) {\n                    var flush, flushLater, flushWhileTriggers;\n                    flushLater = function () {\n                        return UpdateBarrier.whenDone(resultStream, flush);\n                    };\n                    flushWhileTriggers = function () {\n                        var p, reply, trigger, val, _k, _len2;\n                        if (triggers.length > 0) {\n                            reply = Bacon.more;\n                            trigger = triggers.pop();\n                            for (_k = 0, _len2 = pats.length; _k < _len2; _k++) {\n                                p = pats[_k];\n                                if (match(p)) {\n                                    val = function () {\n                                        return p.f.apply(p, function () {\n                                            var _l, _len3, _ref4, _results;\n                                            _ref4 = p.ixs;\n                                            _results = [];\n                                            for (_l = 0, _len3 = _ref4.length; _l < _len3; _l++) {\n                                                i = _ref4[_l];\n                                                _results.push(sources[i.index].consume());\n                                            }\n                                            return _results;\n                                        }());\n                                    };\n                                    reply = sink(trigger.e.apply(val));\n                                    if (triggers.length && needsBarrier) {\n                                        triggers = _.filter(nonFlattened, triggers);\n                                    }\n                                    if (reply === Bacon.noMore) {\n                                        return reply;\n                                    } else {\n                                        return flushWhileTriggers();\n                                    }\n                                }\n                            }\n                        } else {\n                            return Bacon.more;\n                        }\n                    };\n                    flush = function () {\n                        var reply;\n                        reply = flushWhileTriggers();\n                        if (ends) {\n                            ends = false;\n                            if (_.all(sources, cannotSync) || _.all(pats, cannotMatch)) {\n                                reply = Bacon.noMore;\n                                sink(end());\n                            }\n                        }\n                        if (reply === Bacon.noMore) {\n                            unsubAll();\n                        }\n                        return reply;\n                    };\n                    return source.subscribe(function (e) {\n                        var reply;\n                        if (e.isEnd()) {\n                            ends = true;\n                            source.markEnded();\n                            flushLater();\n                        } else if (e.isError()) {\n                            reply = sink(e);\n                        } else {\n                            source.push(e.value);\n                            if (source.sync) {\n                                triggers.push({\n                                    source: source,\n                                    e: e\n                                });\n                                if (needsBarrier) {\n                                    flushLater();\n                                } else {\n                                    flush();\n                                }\n                            }\n                        }\n                        if (reply === Bacon.noMore) {\n                            unsubAll();\n                        }\n                        return reply || Bacon.more;\n                    });\n                };\n            };\n            return compositeUnsubscribe.apply(null, function () {\n                var _k, _len2, _results;\n                _results = [];\n                for (_k = 0, _len2 = sources.length; _k < _len2; _k++) {\n                    s = sources[_k];\n                    _results.push(part(s));\n                }\n                return _results;\n            }());\n        });\n    };\n    containsDuplicateDeps = function (observables, state) {\n        var checkObservable;\n        if (state == null) {\n            state = [];\n        }\n        checkObservable = function (obs) {\n            var deps;\n            if (Bacon._.contains(state, obs)) {\n                return true;\n            } else {\n                deps = obs.internalDeps();\n                if (deps.length) {\n                    state.push(obs);\n                    return Bacon._.any(deps, checkObservable);\n                } else {\n                    state.push(obs);\n                    return false;\n                }\n            }\n        };\n        return Bacon._.any(observables, checkObservable);\n    };\n    Bacon.update = function () {\n        var i, initial, lateBindFirst, patterns;\n        initial = arguments[0], patterns = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n        lateBindFirst = function (f) {\n            return function () {\n                var args;\n                args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n                return function (i) {\n                    return f.apply(null, [i].concat(args));\n                };\n            };\n        };\n        i = patterns.length - 1;\n        while (i > 0) {\n            if (!(patterns[i] instanceof Function)) {\n                patterns[i] = function (x) {\n                    return function () {\n                        return x;\n                    };\n                }(patterns[i]);\n            }\n            patterns[i] = lateBindFirst(patterns[i]);\n            i = i - 2;\n        }\n        return withDescription.apply(null, [\n            Bacon,\n            'update',\n            initial\n        ].concat(__slice.call(patterns), [Bacon.when.apply(Bacon, patterns).scan(initial, function (x, f) {\n                return f(x);\n            })]));\n    };\n    compositeUnsubscribe = function () {\n        var ss;\n        ss = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n        return new CompositeUnsubscribe(ss).unsubscribe;\n    };\n    CompositeUnsubscribe = function () {\n        function CompositeUnsubscribe(ss) {\n            var s, _i, _len;\n            if (ss == null) {\n                ss = [];\n            }\n            this.empty = __bind(this.empty, this);\n            this.count = __bind(this.count, this);\n            this.unsubscribe = __bind(this.unsubscribe, this);\n            this.add = __bind(this.add, this);\n            this.unsubscribed = false;\n            this.subscriptions = [];\n            this.starting = [];\n            for (_i = 0, _len = ss.length; _i < _len; _i++) {\n                s = ss[_i];\n                this.add(s);\n            }\n        }\n        CompositeUnsubscribe.prototype.add = function (subscription) {\n            var ended, unsub, unsubMe, _this = this;\n            if (this.unsubscribed) {\n                return;\n            }\n            ended = false;\n            unsub = nop;\n            this.starting.push(subscription);\n            unsubMe = function () {\n                if (_this.unsubscribed) {\n                    return;\n                }\n                ended = true;\n                _this.remove(unsub);\n                return _.remove(subscription, _this.starting);\n            };\n            unsub = subscription(this.unsubscribe, unsubMe);\n            if (!(this.unsubscribed || ended)) {\n                this.subscriptions.push(unsub);\n            }\n            _.remove(subscription, this.starting);\n            return unsub;\n        };\n        CompositeUnsubscribe.prototype.remove = function (unsub) {\n            if (this.unsubscribed) {\n                return;\n            }\n            if (_.remove(unsub, this.subscriptions) !== void 0) {\n                return unsub();\n            }\n        };\n        CompositeUnsubscribe.prototype.unsubscribe = function () {\n            var s, _i, _len, _ref3;\n            if (this.unsubscribed) {\n                return;\n            }\n            this.unsubscribed = true;\n            _ref3 = this.subscriptions;\n            for (_i = 0, _len = _ref3.length; _i < _len; _i++) {\n                s = _ref3[_i];\n                s();\n            }\n            this.subscriptions = [];\n            return this.starting = [];\n        };\n        CompositeUnsubscribe.prototype.count = function () {\n            if (this.unsubscribed) {\n                return 0;\n            }\n            return this.subscriptions.length + this.starting.length;\n        };\n        CompositeUnsubscribe.prototype.empty = function () {\n            return this.count() === 0;\n        };\n        return CompositeUnsubscribe;\n    }();\n    Bacon.CompositeUnsubscribe = CompositeUnsubscribe;\n    Some = function () {\n        function Some(value) {\n            this.value = value;\n        }\n        Some.prototype.getOrElse = function () {\n            return this.value;\n        };\n        Some.prototype.get = function () {\n            return this.value;\n        };\n        Some.prototype.filter = function (f) {\n            if (f(this.value)) {\n                return new Some(this.value);\n            } else {\n                return None;\n            }\n        };\n        Some.prototype.map = function (f) {\n            return new Some(f(this.value));\n        };\n        Some.prototype.forEach = function (f) {\n            return f(this.value);\n        };\n        Some.prototype.isDefined = true;\n        Some.prototype.toArray = function () {\n            return [this.value];\n        };\n        Some.prototype.inspect = function () {\n            return 'Some(' + this.value + ')';\n        };\n        Some.prototype.toString = function () {\n            return this.inspect();\n        };\n        return Some;\n    }();\n    None = {\n        getOrElse: function (value) {\n            return value;\n        },\n        filter: function () {\n            return None;\n        },\n        map: function () {\n            return None;\n        },\n        forEach: function () {\n        },\n        isDefined: false,\n        toArray: function () {\n            return [];\n        },\n        inspect: function () {\n            return 'None';\n        },\n        toString: function () {\n            return this.inspect();\n        }\n    };\n    UpdateBarrier = function () {\n        var currentEventId, findIndependent, flush, inTransaction, independent, rootEvent, waiters, whenDone;\n        rootEvent = void 0;\n        waiters = [];\n        independent = function (waiter) {\n            return !_.any(waiters, function (other) {\n                return waiter.obs.dependsOn(other.obs);\n            });\n        };\n        whenDone = function (obs, f) {\n            if (rootEvent) {\n                return waiters.push({\n                    obs: obs,\n                    f: f\n                });\n            } else {\n                return f();\n            }\n        };\n        findIndependent = function () {\n            while (!independent(waiters[0])) {\n                waiters.push(waiters.splice(0, 1)[0]);\n            }\n            return waiters.splice(0, 1)[0];\n        };\n        flush = function () {\n            if (waiters.length) {\n                findIndependent().f();\n                return flush();\n            }\n        };\n        inTransaction = function (event, context, f, args) {\n            var result;\n            if (rootEvent) {\n                return f.apply(context, args);\n            } else {\n                rootEvent = event;\n                try {\n                    result = f.apply(context, args);\n                    flush();\n                } finally {\n                    rootEvent = void 0;\n                }\n                return result;\n            }\n        };\n        currentEventId = function () {\n            if (rootEvent) {\n                return rootEvent.id;\n            } else {\n                return void 0;\n            }\n        };\n        return {\n            whenDone: whenDone,\n            inTransaction: inTransaction,\n            currentEventId: currentEventId\n        };\n    }();\n    Bacon.EventStream = EventStream;\n    Bacon.Property = Property;\n    Bacon.Observable = Observable;\n    Bacon.Bus = Bus;\n    Bacon.Initial = Initial;\n    Bacon.Next = Next;\n    Bacon.End = End;\n    Bacon.Error = Error;\n    nop = function () {\n    };\n    latterF = function (_, x) {\n        return x();\n    };\n    former = function (x, _) {\n        return x;\n    };\n    initial = function (value) {\n        return new Initial(_.always(value));\n    };\n    next = function (value) {\n        return new Next(_.always(value));\n    };\n    end = function () {\n        return new End();\n    };\n    toEvent = function (x) {\n        if (x instanceof Event) {\n            return x;\n        } else {\n            return next(x);\n        }\n    };\n    cloneArray = function (xs) {\n        return xs.slice(0);\n    };\n    assert = function (message, condition) {\n        if (!condition) {\n            throw message;\n        }\n    };\n    assertEventStream = function (event) {\n        if (!(event instanceof EventStream)) {\n            throw 'not an EventStream : ' + event;\n        }\n    };\n    assertFunction = function (f) {\n        return assert('not a function : ' + f, isFunction(f));\n    };\n    isFunction = function (f) {\n        return typeof f === 'function';\n    };\n    isArray = function (xs) {\n        return xs instanceof Array;\n    };\n    isObservable = function (x) {\n        return x instanceof Observable;\n    };\n    assertArray = function (xs) {\n        if (!isArray(xs)) {\n            throw 'not an array : ' + xs;\n        }\n    };\n    assertNoArguments = function (args) {\n        return assert('no arguments supported', args.length === 0);\n    };\n    assertString = function (x) {\n        if (typeof x !== 'string') {\n            throw 'not a string : ' + x;\n        }\n    };\n    partiallyApplied = function (f, applied) {\n        return function () {\n            var args;\n            args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n            return f.apply(null, applied.concat(args));\n        };\n    };\n    makeSpawner = function (f) {\n        if (isObservable(f)) {\n            f = _.always(f);\n        }\n        assertFunction(f);\n        return f;\n    };\n    makeFunctionArgs = function (args) {\n        args = Array.prototype.slice.call(args);\n        return makeFunction_.apply(null, args);\n    };\n    makeFunction_ = withMethodCallSupport(function () {\n        var args, f;\n        f = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n        if (isFunction(f)) {\n            if (args.length) {\n                return partiallyApplied(f, args);\n            } else {\n                return f;\n            }\n        } else if (isFieldKey(f)) {\n            return toFieldExtractor(f, args);\n        } else {\n            return _.always(f);\n        }\n    });\n    makeFunction = function (f, args) {\n        return makeFunction_.apply(null, [f].concat(__slice.call(args)));\n    };\n    isFieldKey = function (f) {\n        return typeof f === 'string' && f.length > 1 && f.charAt(0) === '.';\n    };\n    Bacon.isFieldKey = isFieldKey;\n    toFieldExtractor = function (f, args) {\n        var partFuncs, parts;\n        parts = f.slice(1).split('.');\n        partFuncs = _.map(toSimpleExtractor(args), parts);\n        return function (value) {\n            var _i, _len;\n            for (_i = 0, _len = partFuncs.length; _i < _len; _i++) {\n                f = partFuncs[_i];\n                value = f(value);\n            }\n            return value;\n        };\n    };\n    toSimpleExtractor = function (args) {\n        return function (key) {\n            return function (value) {\n                var fieldValue;\n                if (value == null) {\n                    return void 0;\n                } else {\n                    fieldValue = value[key];\n                    if (isFunction(fieldValue)) {\n                        return fieldValue.apply(value, args);\n                    } else {\n                        return fieldValue;\n                    }\n                }\n            };\n        };\n    };\n    toFieldKey = function (f) {\n        return f.slice(1);\n    };\n    toCombinator = function (f) {\n        var key;\n        if (isFunction(f)) {\n            return f;\n        } else if (isFieldKey(f)) {\n            key = toFieldKey(f);\n            return function (left, right) {\n                return left[key](right);\n            };\n        } else {\n            return assert('not a function or a field key: ' + f, false);\n        }\n    };\n    toOption = function (v) {\n        if (v instanceof Some || v === None) {\n            return v;\n        } else {\n            return new Some(v);\n        }\n    };\n    _ = {\n        indexOf: Array.prototype.indexOf ? function (xs, x) {\n            return xs.indexOf(x);\n        } : function (xs, x) {\n            var i, y, _i, _len;\n            for (i = _i = 0, _len = xs.length; _i < _len; i = ++_i) {\n                y = xs[i];\n                if (x === y) {\n                    return i;\n                }\n            }\n            return -1;\n        },\n        indexWhere: function (xs, f) {\n            var i, y, _i, _len;\n            for (i = _i = 0, _len = xs.length; _i < _len; i = ++_i) {\n                y = xs[i];\n                if (f(y)) {\n                    return i;\n                }\n            }\n            return -1;\n        },\n        head: function (xs) {\n            return xs[0];\n        },\n        always: function (x) {\n            return function () {\n                return x;\n            };\n        },\n        negate: function (f) {\n            return function (x) {\n                return !f(x);\n            };\n        },\n        empty: function (xs) {\n            return xs.length === 0;\n        },\n        tail: function (xs) {\n            return xs.slice(1, xs.length);\n        },\n        filter: function (f, xs) {\n            var filtered, x, _i, _len;\n            filtered = [];\n            for (_i = 0, _len = xs.length; _i < _len; _i++) {\n                x = xs[_i];\n                if (f(x)) {\n                    filtered.push(x);\n                }\n            }\n            return filtered;\n        },\n        map: function (f, xs) {\n            var x, _i, _len, _results;\n            _results = [];\n            for (_i = 0, _len = xs.length; _i < _len; _i++) {\n                x = xs[_i];\n                _results.push(f(x));\n            }\n            return _results;\n        },\n        each: function (xs, f) {\n            var key, value, _results;\n            _results = [];\n            for (key in xs) {\n                value = xs[key];\n                _results.push(f(key, value));\n            }\n            return _results;\n        },\n        toArray: function (xs) {\n            if (isArray(xs)) {\n                return xs;\n            } else {\n                return [xs];\n            }\n        },\n        contains: function (xs, x) {\n            return _.indexOf(xs, x) !== -1;\n        },\n        id: function (x) {\n            return x;\n        },\n        last: function (xs) {\n            return xs[xs.length - 1];\n        },\n        all: function (xs, f) {\n            var x, _i, _len;\n            if (f == null) {\n                f = _.id;\n            }\n            for (_i = 0, _len = xs.length; _i < _len; _i++) {\n                x = xs[_i];\n                if (!f(x)) {\n                    return false;\n                }\n            }\n            return true;\n        },\n        any: function (xs, f) {\n            var x, _i, _len;\n            if (f == null) {\n                f = _.id;\n            }\n            for (_i = 0, _len = xs.length; _i < _len; _i++) {\n                x = xs[_i];\n                if (f(x)) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        without: function (x, xs) {\n            return _.filter(function (y) {\n                return y !== x;\n            }, xs);\n        },\n        remove: function (x, xs) {\n            var i;\n            i = _.indexOf(xs, x);\n            if (i >= 0) {\n                return xs.splice(i, 1);\n            }\n        },\n        fold: function (xs, seed, f) {\n            var x, _i, _len;\n            for (_i = 0, _len = xs.length; _i < _len; _i++) {\n                x = xs[_i];\n                seed = f(seed, x);\n            }\n            return seed;\n        },\n        flatMap: function (f, xs) {\n            return _.fold(xs, [], function (ys, x) {\n                return ys.concat(f(x));\n            });\n        },\n        cached: function (f) {\n            var value;\n            value = None;\n            return function () {\n                if (value === None) {\n                    value = f();\n                    f = null;\n                }\n                return value;\n            };\n        },\n        toString: function (obj) {\n            var key, value;\n            try {\n                recursionDepth++;\n                if (obj == null) {\n                    return 'undefined';\n                } else if (isFunction(obj)) {\n                    return 'function';\n                } else if (isArray(obj)) {\n                    if (recursionDepth > 5) {\n                        return '[..]';\n                    }\n                    return '[' + _.map(_.toString, obj).toString() + ']';\n                } else if ((obj != null ? obj.toString : void 0) != null && obj.toString !== Object.prototype.toString) {\n                    return obj.toString();\n                } else if (typeof obj === 'object') {\n                    if (recursionDepth > 5) {\n                        return '{..}';\n                    }\n                    return '{' + function () {\n                        var _results;\n                        _results = [];\n                        for (key in obj) {\n                            value = obj[key];\n                            _results.push(_.toString(key) + ':' + _.toString(value));\n                        }\n                        return _results;\n                    }() + '}';\n                } else {\n                    return obj;\n                }\n            } finally {\n                recursionDepth--;\n            }\n        }\n    };\n    recursionDepth = 0;\n    Bacon._ = _;\n    Bacon.scheduler = {\n        setTimeout: function (f, d) {\n            return setTimeout(f, d);\n        },\n        setInterval: function (f, i) {\n            return setInterval(f, i);\n        },\n        clearInterval: function (id) {\n            return clearInterval(id);\n        },\n        now: function () {\n            return new Date().getTime();\n        }\n    };\n    if (typeof module !== 'undefined' && module !== null) {\n        module.exports = Bacon;\n        Bacon.Bacon = Bacon;\n    } else {\n        if (typeof define !== 'undefined' && define !== null && define.amd != null) {\n            define([], function () {\n                return Bacon;\n            });\n        }\n        this.Bacon = Bacon;\n    }\n}.call(this));","map":"{\"version\":3,\"sources\":[\"node_modules/baconjs/dist/Bacon.js\"],\"names\":[\"Bacon\",\"BufferingSource\",\"Bus\",\"CompositeUnsubscribe\",\"Desc\",\"Dispatcher\",\"End\",\"Error\",\"Event\",\"EventStream\",\"Initial\",\"Next\",\"None\",\"Observable\",\"Property\",\"PropertyDispatcher\",\"Some\",\"Source\",\"UpdateBarrier\",\"addPropertyInitValueToStream\",\"assert\",\"assertArray\",\"assertEventStream\",\"assertFunction\",\"assertNoArguments\",\"assertString\",\"cloneArray\",\"compositeUnsubscribe\",\"containsDuplicateDeps\",\"convertArgsToFunction\",\"describe\",\"end\",\"eventIdCounter\",\"former\",\"idCounter\",\"initial\",\"isArray\",\"isFieldKey\",\"isFunction\",\"isObservable\",\"latterF\",\"liftCallback\",\"makeFunction\",\"makeFunctionArgs\",\"makeFunction_\",\"makeSpawner\",\"next\",\"nop\",\"partiallyApplied\",\"recursionDepth\",\"registerObs\",\"spys\",\"toCombinator\",\"toEvent\",\"toFieldExtractor\",\"toFieldKey\",\"toOption\",\"toSimpleExtractor\",\"withDescription\",\"withMethodCallSupport\",\"_\",\"_ref\",\"_ref1\",\"_ref2\",\"__slice\",\"slice\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"__bind\",\"fn\",\"me\",\"apply\",\"arguments\",\"toString\",\"version\",\"fromBinder\",\"binder\",\"eventTransformer\",\"id\",\"sink\",\"unbinder\",\"args\",\"event\",\"reply\",\"value\",\"_i\",\"_len\",\"length\",\"last\",\"more\",\"noMore\",\"isEnd\",\"scheduler\",\"setTimeout\",\"$\",\"asEventStream\",\"eventName\",\"selector\",\"_this\",\"handler\",\"on\",\"off\",\"jQuery\",\"Zepto\",\"fromEventTarget\",\"target\",\"sub\",\"unsub\",\"_ref3\",\"_ref4\",\"addEventListener\",\"addListener\",\"bind\",\"removeEventListener\",\"removeListener\",\"unbind\",\"fromPromise\",\"promise\",\"abort\",\"then\",\"e\",\"later\",\"delay\",\"sequentially\",\"values\",\"index\",\"fromPoll\",\"repeatedly\",\"spy\",\"push\",\"obs\",\"running\",\"each\",\"wrapped\",\"context\",\"f\",\"methodName\",\"concat\",\"desc\",\"stream\",\"callback\",\"combineAsArray\",\"flatMap\",\"fromCallback\",\"fromNodeCallback\",\"error\",\"poll\",\"setInterval\",\"clearInterval\",\"interval\",\"constant\",\"never\",\"fromArray\",\"once\",\"send\",\"unsubd\",\"empty\",\"splice\",\"mergeAll\",\"streams\",\"fold\",\"a\",\"b\",\"merge\",\"zipAsArray\",\"zipWith\",\"xs\",\"map\",\"s\",\"toEventStream\",\"when\",\"groupSimultaneous\",\"sources\",\"_results\",\"_j\",\"_len1\",\"subscribeInternal\",\"toProperty\",\"onValues\",\"combineWith\",\"combineTemplate\",\"template\",\"applyStreamValue\",\"combinator\",\"compile\",\"compileTemplate\",\"constantValue\",\"current\",\"funcs\",\"mkContext\",\"setValue\",\"ctxStack\",\"popContext\",\"pushContext\",\"Object\",\"newContext\",\"pop\",\"rootContext\",\"isEvent\",\"isInitial\",\"isNext\",\"isError\",\"hasValue\",\"filter\",\"inspect\",\"_super\",\"valueF\",\"cached\",\"always\",\"fmap\",\"toNext\",\"combine\",\"flatMapLatest\",\"scan\",\"assign\",\"onValue\",\"subscribe\",\"onError\",\"onEnd\",\"errors\",\"withHandler\",\"takeWhile\",\"endOnError\",\"take\",\"count\",\"p\",\"sampledBy\",\"mapError\",\"mapEnd\",\"doAction\",\"skip\",\"skipDuplicates\",\"isEqual\",\"withStateMachine\",\"prev\",\"get\",\"skipErrors\",\"initState\",\"state\",\"fromF\",\"newState\",\"output\",\"outputs\",\"seed\",\"lazyF\",\"acc\",\"f_\",\"resultProperty\",\"root\",\"x\",\"y\",\"initSent\",\"sendInit\",\"forEach\",\"getOrElse\",\"whenDone\",\"zip\",\"other\",\"Array\",\"diff\",\"start\",\"prevTuple\",\"tuple\",\"firstOnly\",\"checkEnd\",\"composite\",\"add\",\"__\",\"unsubRoot\",\"unsubscribed\",\"unsubAll\",\"unsubMe\",\"unsubscribe\",\"flatMapFirst\",\"takeUntil\",\"not\",\"log\",\"console\",\"slidingWindow\",\"n\",\"minValues\",\"window\",\"decode\",\"cases\",\"awaiting\",\"_arg\",\"myValues\",\"otherValues\",\"name\",\"reduce\",\"dispatcher\",\"hasSubscribers\",\"debounce\",\"debounceImmediate\",\"throttle\",\"bufferWithTime\",\"bufferWithTimeOrCount\",\"Number\",\"MAX_VALUE\",\"bufferWithCount\",\"flushOrSchedule\",\"buffer\",\"flush\",\"schedule\",\"onInput\",\"onFlush\",\"delayMs\",\"scheduled\",\"right\",\"left\",\"ends\",\"smartSink\",\"unsubBoth\",\"initValue\",\"sampler\",\"unsubLeft\",\"unsubRight\",\"stopper\",\"endMarker\",\"data\",\"skipUntil\",\"starter\",\"started\",\"skipWhile\",\"ok\",\"startWith\",\"changes\",\"sample\",\"lazy\",\"result\",\"samplerSource\",\"thisSource\",\"and\",\"or\",\"delayChanges\",\"method\",\"sampled\",\"property\",\"justInitValue\",\"handleEvent\",\"done\",\"ended\",\"prevError\",\"pushIt\",\"pushing\",\"queue\",\"removeSub\",\"subscriptions\",\"unsubscribeFromSource\",\"waiters\",\"subscription\",\"without\",\"w\",\"ws\",\"success\",\"tmp\",\"head\",\"tail\",\"inTransaction\",\"currentValueRootId\",\"currentEventId\",\"dispatchingId\",\"maybeSubSource\",\"valId\",\"isDefined\",\"guardedSink\",\"subscribeAll\",\"subscribeInput\",\"unsubscribeInput\",\"input\",\"i\",\"newSink\",\"plug\",\"sync\",\"consume\",\"invoke\",\"markEnded\",\"shift\",\"mayHave\",\"c\",\"hasAtLeast\",\"flatten\",\"fromObservable\",\"collectDeps\",\"dependsOn\",\"findDeps\",\"flatDeps\",\"o\",\"deps\",\"internalDeps\",\"dep\",\"ix\",\"len\",\"needsBarrier\",\"pat\",\"patSources\",\"pats\",\"patterns\",\"resultStream\",\"usage\",\"toArray\",\"ixs\",\"indexOf\",\"any\",\"cannotMatch\",\"cannotSync\",\"match\",\"nonFlattened\",\"part\",\"triggers\",\"_k\",\"_len2\",\"source\",\"trigger\",\"flushLater\",\"flushWhileTriggers\",\"val\",\"_l\",\"_len3\",\"all\",\"observables\",\"checkObservable\",\"contains\",\"update\",\"lateBindFirst\",\"Function\",\"ss\",\"starting\",\"remove\",\"findIndependent\",\"independent\",\"rootEvent\",\"waiter\",\"message\",\"condition\",\"applied\",\"charAt\",\"partFuncs\",\"parts\",\"split\",\"fieldValue\",\"v\",\"indexWhere\",\"negate\",\"filtered\",\"ys\",\"obj\",\"d\",\"now\",\"Date\",\"getTime\",\"module\",\"exports\",\"define\",\"amd\"],\"mappings\":\"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\"}","lineCount":2622,"mtime":1387487762000,"deps":[],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":true,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var Bacon, BufferingSource, Bus, CompositeUnsubscribe, Desc, Dispatcher, End, Error, Event, EventStream, Initial, Next, None, Observable, Property, PropertyDispatcher, Some, Source, UpdateBarrier, addPropertyInitValueToStream, assert, assertArray, assertEventStream, assertFunction, assertNoArguments, assertString, cloneArray, compositeUnsubscribe, containsDuplicateDeps, convertArgsToFunction, describe, end, eventIdCounter, former, idCounter, initial, isArray, isFieldKey, isFunction, isObservable, latterF, liftCallback, makeFunction, makeFunctionArgs, makeFunction_, makeSpawner, next, nop, partiallyApplied, recursionDepth, registerObs, spys, toCombinator, toEvent, toFieldExtractor, toFieldKey, toOption, toSimpleExtractor, withDescription, withMethodCallSupport, _, _ref, _ref1, _ref2,\n    __slice = [].slice,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  Bacon = {\n    toString: function() {\n      return \"Bacon\";\n    }\n  };\n\n  Bacon.version = '0.7.0';\n\n  Bacon.fromBinder = function(binder, eventTransformer) {\n    if (eventTransformer == null) {\n      eventTransformer = _.id;\n    }\n    return new EventStream(describe(Bacon, \"fromBinder\", binder, eventTransformer), function(sink) {\n      var unbinder;\n      return unbinder = binder(function() {\n        var args, event, reply, value, _i, _len;\n        args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n        value = eventTransformer.apply(null, args);\n        if (!(isArray(value) && _.last(value) instanceof Event)) {\n          value = [value];\n        }\n        reply = Bacon.more;\n        for (_i = 0, _len = value.length; _i < _len; _i++) {\n          event = value[_i];\n          reply = sink(event = toEvent(event));\n          if (reply === Bacon.noMore || event.isEnd()) {\n            if (unbinder != null) {\n              unbinder();\n            } else {\n              Bacon.scheduler.setTimeout((function() {\n                return unbinder();\n              }), 0);\n            }\n            return reply;\n          }\n        }\n        return reply;\n      });\n    });\n  };\n\n  Bacon.$ = {\n    asEventStream: function(eventName, selector, eventTransformer) {\n      var _ref,\n        _this = this;\n      if (isFunction(selector)) {\n        _ref = [selector, null], eventTransformer = _ref[0], selector = _ref[1];\n      }\n      return withDescription(this, \"asEventStream\", eventName, Bacon.fromBinder(function(handler) {\n        _this.on(eventName, selector, handler);\n        return function() {\n          return _this.off(eventName, selector, handler);\n        };\n      }, eventTransformer));\n    }\n  };\n\n  if ((_ref = typeof jQuery !== \"undefined\" && jQuery !== null ? jQuery : typeof Zepto !== \"undefined\" && Zepto !== null ? Zepto : null) != null) {\n    _ref.fn.asEventStream = Bacon.$.asEventStream;\n  }\n\n  Bacon.fromEventTarget = function(target, eventName, eventTransformer) {\n    var sub, unsub, _ref1, _ref2, _ref3, _ref4;\n    sub = (_ref1 = target.addEventListener) != null ? _ref1 : (_ref2 = target.addListener) != null ? _ref2 : target.bind;\n    unsub = (_ref3 = target.removeEventListener) != null ? _ref3 : (_ref4 = target.removeListener) != null ? _ref4 : target.unbind;\n    return withDescription(Bacon, \"fromEventTarget\", target, eventName, Bacon.fromBinder(function(handler) {\n      sub.call(target, eventName, handler);\n      return function() {\n        return unsub.call(target, eventName, handler);\n      };\n    }, eventTransformer));\n  };\n\n  Bacon.fromPromise = function(promise, abort) {\n    return withDescription(Bacon, \"fromPromise\", promise, Bacon.fromBinder(function(handler) {\n      promise.then(handler, function(e) {\n        return handler(new Error(e));\n      });\n      return function() {\n        if (abort) {\n          return typeof promise.abort === \"function\" ? promise.abort() : void 0;\n        }\n      };\n    }, (function(value) {\n      return [value, end()];\n    })));\n  };\n\n  Bacon.noMore = [\"<no-more>\"];\n\n  Bacon.more = [\"<more>\"];\n\n  Bacon.later = function(delay, value) {\n    return withDescription(Bacon, \"later\", delay, value, Bacon.sequentially(delay, [value]));\n  };\n\n  Bacon.sequentially = function(delay, values) {\n    var index;\n    index = 0;\n    return withDescription(Bacon, \"sequentially\", delay, values, Bacon.fromPoll(delay, function() {\n      var value;\n      value = values[index++];\n      if (index < values.length) {\n        return value;\n      } else if (index === values.length) {\n        return [value, end()];\n      } else {\n        return end();\n      }\n    }));\n  };\n\n  Bacon.repeatedly = function(delay, values) {\n    var index;\n    index = 0;\n    return withDescription(Bacon, \"repeatedly\", delay, values, Bacon.fromPoll(delay, function() {\n      return values[index++ % values.length];\n    }));\n  };\n\n  Bacon.spy = function(spy) {\n    return spys.push(spy);\n  };\n\n  spys = [];\n\n  registerObs = function(obs) {\n    if (spys.length) {\n      if (!registerObs.running) {\n        try {\n          registerObs.running = true;\n          return _.each(spys, function(_, spy) {\n            return spy(obs);\n          });\n        } finally {\n          delete registerObs.running;\n        }\n      }\n    }\n  };\n\n  withMethodCallSupport = function(wrapped) {\n    return function() {\n      var args, context, f, methodName;\n      f = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n      if (typeof f === \"object\" && args.length) {\n        context = f;\n        methodName = args[0];\n        f = function() {\n          return context[methodName].apply(context, arguments);\n        };\n        args = args.slice(1);\n      }\n      return wrapped.apply(null, [f].concat(__slice.call(args)));\n    };\n  };\n\n  liftCallback = function(desc, wrapped) {\n    return withMethodCallSupport(function() {\n      var args, f, stream;\n      f = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n      stream = partiallyApplied(wrapped, [\n        function(values, callback) {\n          return f.apply(null, __slice.call(values).concat([callback]));\n        }\n      ]);\n      return withDescription.apply(null, [Bacon, desc, f].concat(__slice.call(args), [Bacon.combineAsArray(args).flatMap(stream)]));\n    });\n  };\n\n  Bacon.fromCallback = liftCallback(\"fromCallback\", function() {\n    var args, f;\n    f = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n    return Bacon.fromBinder(function(handler) {\n      makeFunction(f, args)(handler);\n      return nop;\n    }, (function(value) {\n      return [value, end()];\n    }));\n  });\n\n  Bacon.fromNodeCallback = liftCallback(\"fromNodeCallback\", function() {\n    var args, f;\n    f = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n    return Bacon.fromBinder(function(handler) {\n      makeFunction(f, args)(handler);\n      return nop;\n    }, function(error, value) {\n      if (error) {\n        return [new Error(error), end()];\n      }\n      return [value, end()];\n    });\n  });\n\n  Bacon.fromPoll = function(delay, poll) {\n    return withDescription(Bacon, \"fromPoll\", delay, poll, Bacon.fromBinder((function(handler) {\n      var id;\n      id = Bacon.scheduler.setInterval(handler, delay);\n      return function() {\n        return Bacon.scheduler.clearInterval(id);\n      };\n    }), poll));\n  };\n\n  Bacon.interval = function(delay, value) {\n    if (value == null) {\n      value = {};\n    }\n    return withDescription(Bacon, \"interval\", delay, value, Bacon.fromPoll(delay, function() {\n      return next(value);\n    }));\n  };\n\n  Bacon.constant = function(value) {\n    return new Property(describe(Bacon, \"constant\", value), function(sink) {\n      sink(initial(value));\n      sink(end());\n      return nop;\n    });\n  };\n\n  Bacon.never = function() {\n    return withDescription(Bacon, \"never\", Bacon.fromArray([]));\n  };\n\n  Bacon.once = function(value) {\n    return withDescription(Bacon, \"once\", value, Bacon.fromArray([value]));\n  };\n\n  Bacon.fromArray = function(values) {\n    assertArray(values);\n    values = cloneArray(values);\n    return new EventStream(describe(Bacon, \"fromArray\", values), function(sink) {\n      var send, unsubd;\n      unsubd = false;\n      send = function() {\n        var reply, value;\n        if (_.empty(values)) {\n          return sink(end());\n        } else {\n          value = values.splice(0, 1)[0];\n          reply = sink(toEvent(value));\n          if ((reply !== Bacon.noMore) && !unsubd) {\n            return send();\n          }\n        }\n      };\n      send();\n      return function() {\n        return unsubd = true;\n      };\n    });\n  };\n\n  Bacon.mergeAll = function() {\n    var streams;\n    streams = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n    if (isArray(streams[0])) {\n      streams = streams[0];\n    }\n    return withDescription.apply(null, [Bacon, \"mergeAll\"].concat(__slice.call(streams), [_.fold(streams, Bacon.never(), (function(a, b) {\n      return a.merge(b);\n    }))]));\n  };\n\n  Bacon.zipAsArray = function() {\n    var streams;\n    streams = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n    if (isArray(streams[0])) {\n      streams = streams[0];\n    }\n    return withDescription.apply(null, [Bacon, \"zipAsArray\"].concat(__slice.call(streams), [Bacon.zipWith(streams, function() {\n      var xs;\n      xs = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n      return xs;\n    })]));\n  };\n\n  Bacon.zipWith = function() {\n    var f, streams, _ref1;\n    f = arguments[0], streams = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n    if (!isFunction(f)) {\n      _ref1 = [f, streams[0]], streams = _ref1[0], f = _ref1[1];\n    }\n    streams = _.map((function(s) {\n      return s.toEventStream();\n    }), streams);\n    return withDescription.apply(null, [Bacon, \"zipWith\", f].concat(__slice.call(streams), [Bacon.when(streams, f)]));\n  };\n\n  Bacon.groupSimultaneous = function() {\n    var s, sources, streams;\n    streams = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n    if (streams.length === 1 && isArray(streams[0])) {\n      streams = streams[0];\n    }\n    sources = (function() {\n      var _i, _len, _results;\n      _results = [];\n      for (_i = 0, _len = streams.length; _i < _len; _i++) {\n        s = streams[_i];\n        _results.push(new BufferingSource(s));\n      }\n      return _results;\n    })();\n    return withDescription.apply(null, [Bacon, \"groupSimultaneous\"].concat(__slice.call(streams), [Bacon.when(sources, (function() {\n      var xs;\n      xs = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n      return xs;\n    }))]));\n  };\n\n  Bacon.combineAsArray = function() {\n    var index, s, sources, stream, streams, _i, _len;\n    streams = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n    if (streams.length === 1 && isArray(streams[0])) {\n      streams = streams[0];\n    }\n    for (index = _i = 0, _len = streams.length; _i < _len; index = ++_i) {\n      stream = streams[index];\n      if (!(isObservable(stream))) {\n        streams[index] = Bacon.constant(stream);\n      }\n    }\n    if (streams.length) {\n      sources = (function() {\n        var _j, _len1, _results;\n        _results = [];\n        for (_j = 0, _len1 = streams.length; _j < _len1; _j++) {\n          s = streams[_j];\n          _results.push(new Source(s, true, false, s.subscribeInternal));\n        }\n        return _results;\n      })();\n      return withDescription.apply(null, [Bacon, \"combineAsArray\"].concat(__slice.call(streams), [Bacon.when(sources, (function() {\n        var xs;\n        xs = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n        return xs;\n      })).toProperty()]));\n    } else {\n      return Bacon.constant([]);\n    }\n  };\n\n  Bacon.onValues = function() {\n    var f, streams, _i;\n    streams = 2 <= arguments.length ? __slice.call(arguments, 0, _i = arguments.length - 1) : (_i = 0, []), f = arguments[_i++];\n    return Bacon.combineAsArray(streams).onValues(f);\n  };\n\n  Bacon.combineWith = function() {\n    var f, streams;\n    f = arguments[0], streams = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n    return withDescription.apply(null, [Bacon, \"combineWith\", f].concat(__slice.call(streams), [Bacon.combineAsArray(streams).map(function(values) {\n      return f.apply(null, values);\n    })]));\n  };\n\n  Bacon.combineTemplate = function(template) {\n    var applyStreamValue, combinator, compile, compileTemplate, constantValue, current, funcs, mkContext, setValue, streams;\n    funcs = [];\n    streams = [];\n    current = function(ctxStack) {\n      return ctxStack[ctxStack.length - 1];\n    };\n    setValue = function(ctxStack, key, value) {\n      return current(ctxStack)[key] = value;\n    };\n    applyStreamValue = function(key, index) {\n      return function(ctxStack, values) {\n        return setValue(ctxStack, key, values[index]);\n      };\n    };\n    constantValue = function(key, value) {\n      return function(ctxStack) {\n        return setValue(ctxStack, key, value);\n      };\n    };\n    mkContext = function(template) {\n      if (isArray(template)) {\n        return [];\n      } else {\n        return {};\n      }\n    };\n    compile = function(key, value) {\n      var popContext, pushContext;\n      if (isObservable(value)) {\n        streams.push(value);\n        return funcs.push(applyStreamValue(key, streams.length - 1));\n      } else if (value === Object(value) && typeof value !== \"function\") {\n        pushContext = function(key) {\n          return function(ctxStack) {\n            var newContext;\n            newContext = mkContext(value);\n            setValue(ctxStack, key, newContext);\n            return ctxStack.push(newContext);\n          };\n        };\n        popContext = function(ctxStack) {\n          return ctxStack.pop();\n        };\n        funcs.push(pushContext(key));\n        compileTemplate(value);\n        return funcs.push(popContext);\n      } else {\n        return funcs.push(constantValue(key, value));\n      }\n    };\n    compileTemplate = function(template) {\n      return _.each(template, compile);\n    };\n    compileTemplate(template);\n    combinator = function(values) {\n      var ctxStack, f, rootContext, _i, _len;\n      rootContext = mkContext(template);\n      ctxStack = [rootContext];\n      for (_i = 0, _len = funcs.length; _i < _len; _i++) {\n        f = funcs[_i];\n        f(ctxStack, values);\n      }\n      return rootContext;\n    };\n    return withDescription(Bacon, \"combineTemplate\", template, Bacon.combineAsArray(streams).map(combinator));\n  };\n\n  eventIdCounter = 0;\n\n  Event = (function() {\n    function Event() {\n      this.id = ++eventIdCounter;\n    }\n\n    Event.prototype.isEvent = function() {\n      return true;\n    };\n\n    Event.prototype.isEnd = function() {\n      return false;\n    };\n\n    Event.prototype.isInitial = function() {\n      return false;\n    };\n\n    Event.prototype.isNext = function() {\n      return false;\n    };\n\n    Event.prototype.isError = function() {\n      return false;\n    };\n\n    Event.prototype.hasValue = function() {\n      return false;\n    };\n\n    Event.prototype.filter = function() {\n      return true;\n    };\n\n    Event.prototype.inspect = function() {\n      return this.toString();\n    };\n\n    return Event;\n\n  })();\n\n  Next = (function(_super) {\n    __extends(Next, _super);\n\n    function Next(valueF) {\n      Next.__super__.constructor.call(this);\n      if (isFunction(valueF)) {\n        this.value = _.cached(valueF);\n      } else {\n        this.value = _.always(valueF);\n      }\n    }\n\n    Next.prototype.isNext = function() {\n      return true;\n    };\n\n    Next.prototype.hasValue = function() {\n      return true;\n    };\n\n    Next.prototype.fmap = function(f) {\n      var _this = this;\n      return this.apply(function() {\n        return f(_this.value());\n      });\n    };\n\n    Next.prototype.apply = function(value) {\n      return new Next(value);\n    };\n\n    Next.prototype.filter = function(f) {\n      return f(this.value());\n    };\n\n    Next.prototype.toString = function() {\n      return _.toString(this.value());\n    };\n\n    return Next;\n\n  })(Event);\n\n  Initial = (function(_super) {\n    __extends(Initial, _super);\n\n    function Initial() {\n      _ref1 = Initial.__super__.constructor.apply(this, arguments);\n      return _ref1;\n    }\n\n    Initial.prototype.isInitial = function() {\n      return true;\n    };\n\n    Initial.prototype.isNext = function() {\n      return false;\n    };\n\n    Initial.prototype.apply = function(value) {\n      return new Initial(value);\n    };\n\n    Initial.prototype.toNext = function() {\n      return new Next(this.value);\n    };\n\n    return Initial;\n\n  })(Next);\n\n  End = (function(_super) {\n    __extends(End, _super);\n\n    function End() {\n      _ref2 = End.__super__.constructor.apply(this, arguments);\n      return _ref2;\n    }\n\n    End.prototype.isEnd = function() {\n      return true;\n    };\n\n    End.prototype.fmap = function() {\n      return this;\n    };\n\n    End.prototype.apply = function() {\n      return this;\n    };\n\n    End.prototype.toString = function() {\n      return \"<end>\";\n    };\n\n    return End;\n\n  })(Event);\n\n  Error = (function(_super) {\n    __extends(Error, _super);\n\n    function Error(error) {\n      this.error = error;\n    }\n\n    Error.prototype.isError = function() {\n      return true;\n    };\n\n    Error.prototype.fmap = function() {\n      return this;\n    };\n\n    Error.prototype.apply = function() {\n      return this;\n    };\n\n    Error.prototype.toString = function() {\n      return \"<error> \" + _.toString(this.error);\n    };\n\n    return Error;\n\n  })(Event);\n\n  idCounter = 0;\n\n  Observable = (function() {\n    function Observable(desc) {\n      this.combine = __bind(this.combine, this);\n      this.flatMapLatest = __bind(this.flatMapLatest, this);\n      this.fold = __bind(this.fold, this);\n      this.scan = __bind(this.scan, this);\n      this.id = ++idCounter;\n      this.assign = this.onValue;\n      withDescription(desc, this);\n    }\n\n    Observable.prototype.onValue = function() {\n      var f;\n      f = makeFunctionArgs(arguments);\n      return this.subscribe(function(event) {\n        if (event.hasValue()) {\n          return f(event.value());\n        }\n      });\n    };\n\n    Observable.prototype.onValues = function(f) {\n      return this.onValue(function(args) {\n        return f.apply(null, args);\n      });\n    };\n\n    Observable.prototype.onError = function() {\n      var f;\n      f = makeFunctionArgs(arguments);\n      return this.subscribe(function(event) {\n        if (event.isError()) {\n          return f(event.error);\n        }\n      });\n    };\n\n    Observable.prototype.onEnd = function() {\n      var f;\n      f = makeFunctionArgs(arguments);\n      return this.subscribe(function(event) {\n        if (event.isEnd()) {\n          return f();\n        }\n      });\n    };\n\n    Observable.prototype.errors = function() {\n      return withDescription(this, \"errors\", this.filter(function() {\n        return false;\n      }));\n    };\n\n    Observable.prototype.filter = function() {\n      var args, f;\n      f = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n      return convertArgsToFunction(this, f, args, function(f) {\n        return withDescription(this, \"filter\", f, this.withHandler(function(event) {\n          if (event.filter(f)) {\n            return this.push(event);\n          } else {\n            return Bacon.more;\n          }\n        }));\n      });\n    };\n\n    Observable.prototype.takeWhile = function() {\n      var args, f;\n      f = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n      return convertArgsToFunction(this, f, args, function(f) {\n        return withDescription(this, \"takeWhile\", f, this.withHandler(function(event) {\n          if (event.filter(f)) {\n            return this.push(event);\n          } else {\n            this.push(end());\n            return Bacon.noMore;\n          }\n        }));\n      });\n    };\n\n    Observable.prototype.endOnError = function() {\n      var args, f;\n      f = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n      if (f == null) {\n        f = true;\n      }\n      return convertArgsToFunction(this, f, args, function(f) {\n        return withDescription(this, \"endOnError\", this.withHandler(function(event) {\n          if (event.isError() && f(event.error)) {\n            this.push(event);\n            return this.push(end());\n          } else {\n            return this.push(event);\n          }\n        }));\n      });\n    };\n\n    Observable.prototype.take = function(count) {\n      if (count <= 0) {\n        return Bacon.never();\n      }\n      return withDescription(this, \"take\", count, this.withHandler(function(event) {\n        if (!event.hasValue()) {\n          return this.push(event);\n        } else {\n          count--;\n          if (count > 0) {\n            return this.push(event);\n          } else {\n            if (count === 0) {\n              this.push(event);\n            }\n            this.push(end());\n            return Bacon.noMore;\n          }\n        }\n      }));\n    };\n\n    Observable.prototype.map = function() {\n      var args, p;\n      p = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n      if (p instanceof Property) {\n        return p.sampledBy(this, former);\n      } else {\n        return convertArgsToFunction(this, p, args, function(f) {\n          return withDescription(this, \"map\", f, this.withHandler(function(event) {\n            return this.push(event.fmap(f));\n          }));\n        });\n      }\n    };\n\n    Observable.prototype.mapError = function() {\n      var f;\n      f = makeFunctionArgs(arguments);\n      return withDescription(this, \"mapError\", f, this.withHandler(function(event) {\n        if (event.isError()) {\n          return this.push(next(f(event.error)));\n        } else {\n          return this.push(event);\n        }\n      }));\n    };\n\n    Observable.prototype.mapEnd = function() {\n      var f;\n      f = makeFunctionArgs(arguments);\n      return withDescription(this, \"mapEnd\", f, this.withHandler(function(event) {\n        if (event.isEnd()) {\n          this.push(next(f(event)));\n          this.push(end());\n          return Bacon.noMore;\n        } else {\n          return this.push(event);\n        }\n      }));\n    };\n\n    Observable.prototype.doAction = function() {\n      var f;\n      f = makeFunctionArgs(arguments);\n      return withDescription(this, \"doAction\", f, this.withHandler(function(event) {\n        if (event.hasValue()) {\n          f(event.value());\n        }\n        return this.push(event);\n      }));\n    };\n\n    Observable.prototype.skip = function(count) {\n      return withDescription(this, \"skip\", count, this.withHandler(function(event) {\n        if (!event.hasValue()) {\n          return this.push(event);\n        } else if (count > 0) {\n          count--;\n          return Bacon.more;\n        } else {\n          return this.push(event);\n        }\n      }));\n    };\n\n    Observable.prototype.skipDuplicates = function(isEqual) {\n      if (isEqual == null) {\n        isEqual = function(a, b) {\n          return a === b;\n        };\n      }\n      return withDescription(this, \"skipDuplicates\", this.withStateMachine(None, function(prev, event) {\n        if (!event.hasValue()) {\n          return [prev, [event]];\n        } else if (event.isInitial() || prev === None || !isEqual(prev.get(), event.value())) {\n          return [new Some(event.value()), [event]];\n        } else {\n          return [prev, []];\n        }\n      }));\n    };\n\n    Observable.prototype.skipErrors = function() {\n      return withDescription(this, \"skipErrors\", this.withHandler(function(event) {\n        if (event.isError()) {\n          return Bacon.more;\n        } else {\n          return this.push(event);\n        }\n      }));\n    };\n\n    Observable.prototype.withStateMachine = function(initState, f) {\n      var state;\n      state = initState;\n      return withDescription(this, \"withStateMachine\", initState, f, this.withHandler(function(event) {\n        var fromF, newState, output, outputs, reply, _i, _len;\n        fromF = f(state, event);\n        newState = fromF[0], outputs = fromF[1];\n        state = newState;\n        reply = Bacon.more;\n        for (_i = 0, _len = outputs.length; _i < _len; _i++) {\n          output = outputs[_i];\n          reply = this.push(output);\n          if (reply === Bacon.noMore) {\n            return reply;\n          }\n        }\n        return reply;\n      }));\n    };\n\n    Observable.prototype.scan = function(seed, f, lazyF) {\n      var acc, f_, resultProperty, root, subscribe,\n        _this = this;\n      f_ = toCombinator(f);\n      f = lazyF ? f_ : function(x, y) {\n        return f_(x(), y());\n      };\n      acc = toOption(seed).map(function(x) {\n        return _.always(x);\n      });\n      root = this;\n      subscribe = function(sink) {\n        var initSent, reply, sendInit, unsub;\n        initSent = false;\n        unsub = nop;\n        reply = Bacon.more;\n        sendInit = function() {\n          if (!initSent) {\n            return acc.forEach(function(valueF) {\n              initSent = true;\n              reply = sink(new Initial(valueF));\n              if (reply === Bacon.noMore) {\n                unsub();\n                return unsub = nop;\n              }\n            });\n          }\n        };\n        unsub = _this.subscribe(function(event) {\n          var next, prev;\n          if (event.hasValue()) {\n            if (initSent && event.isInitial()) {\n              return Bacon.more;\n            } else {\n              if (!event.isInitial()) {\n                sendInit();\n              }\n              initSent = true;\n              prev = acc.getOrElse(function() {\n                return void 0;\n              });\n              next = _.cached(function() {\n                return f(prev, event.value);\n              });\n              acc = new Some(next);\n              return sink(event.apply(next));\n            }\n          } else {\n            if (event.isEnd()) {\n              reply = sendInit();\n            }\n            if (reply !== Bacon.noMore) {\n              return sink(event);\n            }\n          }\n        });\n        UpdateBarrier.whenDone(resultProperty, sendInit);\n        return unsub;\n      };\n      return resultProperty = new Property(describe(this, \"scan\", seed, f), subscribe);\n    };\n\n    Observable.prototype.fold = function(seed, f) {\n      return withDescription(this, \"fold\", seed, f, this.scan(seed, f).sampledBy(this.filter(false).mapEnd().toProperty()));\n    };\n\n    Observable.prototype.zip = function(other, f) {\n      if (f == null) {\n        f = Array;\n      }\n      return withDescription(this, \"zip\", other, Bacon.zipWith([this, other], f));\n    };\n\n    Observable.prototype.diff = function(start, f) {\n      f = toCombinator(f);\n      return withDescription(this, \"diff\", start, f, this.scan([start], function(prevTuple, next) {\n        return [next, f(prevTuple[0], next)];\n      }).filter(function(tuple) {\n        return tuple.length === 2;\n      }).map(function(tuple) {\n        return tuple[1];\n      }));\n    };\n\n    Observable.prototype.flatMap = function(f, firstOnly) {\n      var root;\n      f = makeSpawner(f);\n      root = this;\n      return new EventStream(describe(root, \"flatMap\" + (firstOnly ? \"First\" : \"\"), f), function(sink) {\n        var checkEnd, composite;\n        composite = new CompositeUnsubscribe();\n        checkEnd = function(unsub) {\n          unsub();\n          if (composite.empty()) {\n            return sink(end());\n          }\n        };\n        composite.add(function(__, unsubRoot) {\n          return root.subscribe(function(event) {\n            var child;\n            if (event.isEnd()) {\n              return checkEnd(unsubRoot);\n            } else if (event.isError()) {\n              return sink(event);\n            } else if (firstOnly && composite.count() > 1) {\n              return Bacon.more;\n            } else {\n              if (composite.unsubscribed) {\n                return Bacon.noMore;\n              }\n              child = f(event.value());\n              if (!(isObservable(child))) {\n                child = Bacon.once(child);\n              }\n              return composite.add(function(unsubAll, unsubMe) {\n                return child.subscribe(function(event) {\n                  var reply;\n                  if (event.isEnd()) {\n                    checkEnd(unsubMe);\n                    return Bacon.noMore;\n                  } else {\n                    if (event instanceof Initial) {\n                      event = event.toNext();\n                    }\n                    reply = sink(event);\n                    if (reply === Bacon.noMore) {\n                      unsubAll();\n                    }\n                    return reply;\n                  }\n                });\n              });\n            }\n          });\n        });\n        return composite.unsubscribe;\n      });\n    };\n\n    Observable.prototype.flatMapFirst = function(f) {\n      return this.flatMap(f, true);\n    };\n\n    Observable.prototype.flatMapLatest = function(f) {\n      var stream,\n        _this = this;\n      f = makeSpawner(f);\n      stream = this.toEventStream();\n      return withDescription(this, \"flatMapLatest\", f, stream.flatMap(function(value) {\n        return f(value).takeUntil(stream);\n      }));\n    };\n\n    Observable.prototype.not = function() {\n      return withDescription(this, \"not\", this.map(function(x) {\n        return !x;\n      }));\n    };\n\n    Observable.prototype.log = function() {\n      var args;\n      args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n      this.subscribe(function(event) {\n        return typeof console !== \"undefined\" && console !== null ? typeof console.log === \"function\" ? console.log.apply(console, __slice.call(args).concat([event.toString()])) : void 0 : void 0;\n      });\n      return this;\n    };\n\n    Observable.prototype.slidingWindow = function(n, minValues) {\n      if (minValues == null) {\n        minValues = 0;\n      }\n      return withDescription(this, \"slidingWindow\", n, minValues, this.scan([], (function(window, value) {\n        return window.concat([value]).slice(-n);\n      })).filter((function(values) {\n        return values.length >= minValues;\n      })));\n    };\n\n    Observable.prototype.combine = function(other, f) {\n      var combinator;\n      combinator = toCombinator(f);\n      return withDescription(this, \"combine\", other, f, Bacon.combineAsArray(this, other).map(function(values) {\n        return combinator(values[0], values[1]);\n      }));\n    };\n\n    Observable.prototype.decode = function(cases) {\n      return withDescription(this, \"decode\", cases, this.combine(Bacon.combineTemplate(cases), function(key, values) {\n        return values[key];\n      }));\n    };\n\n    Observable.prototype.awaiting = function(other) {\n      return withDescription(this, \"awaiting\", other, Bacon.groupSimultaneous(this, other).map(function(_arg) {\n        var myValues, otherValues;\n        myValues = _arg[0], otherValues = _arg[1];\n        return otherValues.length === 0;\n      }).toProperty(false).skipDuplicates());\n    };\n\n    Observable.prototype.name = function(name) {\n      this.toString = function() {\n        return name;\n      };\n      return this;\n    };\n\n    return Observable;\n\n  })();\n\n  Observable.prototype.reduce = Observable.prototype.fold;\n\n  EventStream = (function(_super) {\n    __extends(EventStream, _super);\n\n    function EventStream(desc, subscribe) {\n      this.takeUntil = __bind(this.takeUntil, this);\n      this.sampledBy = __bind(this.sampledBy, this);\n      var dispatcher;\n      if (isFunction(desc)) {\n        subscribe = desc;\n        desc = [];\n      }\n      EventStream.__super__.constructor.call(this, desc);\n      assertFunction(subscribe);\n      dispatcher = new Dispatcher(subscribe);\n      this.subscribe = dispatcher.subscribe;\n      this.subscribeInternal = this.subscribe;\n      this.hasSubscribers = dispatcher.hasSubscribers;\n      registerObs(this);\n    }\n\n    EventStream.prototype.delay = function(delay) {\n      return withDescription(this, \"delay\", delay, this.flatMap(function(value) {\n        return Bacon.later(delay, value);\n      }));\n    };\n\n    EventStream.prototype.debounce = function(delay) {\n      return withDescription(this, \"debounce\", delay, this.flatMapLatest(function(value) {\n        return Bacon.later(delay, value);\n      }));\n    };\n\n    EventStream.prototype.debounceImmediate = function(delay) {\n      return withDescription(this, \"debounceImmediate\", delay, this.flatMapFirst(function(value) {\n        return Bacon.once(value).concat(Bacon.later(delay).filter(false));\n      }));\n    };\n\n    EventStream.prototype.throttle = function(delay) {\n      return withDescription(this, \"throttle\", delay, this.bufferWithTime(delay).map(function(values) {\n        return values[values.length - 1];\n      }));\n    };\n\n    EventStream.prototype.bufferWithTime = function(delay) {\n      return withDescription(this, \"bufferWithTime\", delay, this.bufferWithTimeOrCount(delay, Number.MAX_VALUE));\n    };\n\n    EventStream.prototype.bufferWithCount = function(count) {\n      return withDescription(this, \"bufferWithCount\", count, this.bufferWithTimeOrCount(void 0, count));\n    };\n\n    EventStream.prototype.bufferWithTimeOrCount = function(delay, count) {\n      var flushOrSchedule;\n      flushOrSchedule = function(buffer) {\n        if (buffer.values.length === count) {\n          return buffer.flush();\n        } else if (delay !== void 0) {\n          return buffer.schedule();\n        }\n      };\n      return withDescription(this, \"bufferWithTimeOrCount\", delay, count, this.buffer(delay, flushOrSchedule, flushOrSchedule));\n    };\n\n    EventStream.prototype.buffer = function(delay, onInput, onFlush) {\n      var buffer, delayMs, reply;\n      if (onInput == null) {\n        onInput = (function() {});\n      }\n      if (onFlush == null) {\n        onFlush = (function() {});\n      }\n      buffer = {\n        scheduled: false,\n        end: null,\n        values: [],\n        flush: function() {\n          var reply;\n          this.scheduled = false;\n          if (this.values.length > 0) {\n            reply = this.push(next(this.values));\n            this.values = [];\n            if (this.end != null) {\n              return this.push(this.end);\n            } else if (reply !== Bacon.noMore) {\n              return onFlush(this);\n            }\n          } else {\n            if (this.end != null) {\n              return this.push(this.end);\n            }\n          }\n        },\n        schedule: function() {\n          var _this = this;\n          if (!this.scheduled) {\n            this.scheduled = true;\n            return delay(function() {\n              return _this.flush();\n            });\n          }\n        }\n      };\n      reply = Bacon.more;\n      if (!isFunction(delay)) {\n        delayMs = delay;\n        delay = function(f) {\n          return Bacon.scheduler.setTimeout(f, delayMs);\n        };\n      }\n      return withDescription(this, \"buffer\", this.withHandler(function(event) {\n        buffer.push = this.push;\n        if (event.isError()) {\n          reply = this.push(event);\n        } else if (event.isEnd()) {\n          buffer.end = event;\n          if (!buffer.scheduled) {\n            buffer.flush();\n          }\n        } else {\n          buffer.values.push(event.value());\n          onInput(buffer);\n        }\n        return reply;\n      }));\n    };\n\n    EventStream.prototype.merge = function(right) {\n      var left;\n      assertEventStream(right);\n      left = this;\n      return new EventStream(describe(left, \"merge\", right), function(sink) {\n        var ends, smartSink;\n        ends = 0;\n        smartSink = function(obs) {\n          return function(unsubBoth) {\n            return obs.subscribe(function(event) {\n              var reply;\n              if (event.isEnd()) {\n                ends++;\n                if (ends === 2) {\n                  return sink(end());\n                } else {\n                  return Bacon.more;\n                }\n              } else {\n                reply = sink(event);\n                if (reply === Bacon.noMore) {\n                  unsubBoth();\n                }\n                return reply;\n              }\n            });\n          };\n        };\n        return compositeUnsubscribe(smartSink(left), smartSink(right));\n      });\n    };\n\n    EventStream.prototype.toProperty = function(initValue) {\n      if (arguments.length === 0) {\n        initValue = None;\n      }\n      return withDescription(this, \"toProperty\", initValue, this.scan(initValue, latterF, true));\n    };\n\n    EventStream.prototype.toEventStream = function() {\n      return this;\n    };\n\n    EventStream.prototype.sampledBy = function(sampler, combinator) {\n      return withDescription(this, \"sampledBy\", sampler, combinator, this.toProperty().sampledBy(sampler, combinator));\n    };\n\n    EventStream.prototype.concat = function(right) {\n      var left;\n      left = this;\n      return new EventStream(describe(left, \"concat\", right), function(sink) {\n        var unsubLeft, unsubRight;\n        unsubRight = nop;\n        unsubLeft = left.subscribe(function(e) {\n          if (e.isEnd()) {\n            return unsubRight = right.subscribe(sink);\n          } else {\n            return sink(e);\n          }\n        });\n        return function() {\n          unsubLeft();\n          return unsubRight();\n        };\n      });\n    };\n\n    EventStream.prototype.takeUntil = function(stopper) {\n      var endMarker;\n      endMarker = {};\n      return withDescription(this, \"takeUntil\", stopper, Bacon.groupSimultaneous(this.mapEnd(endMarker), stopper.skipErrors()).withHandler(function(event) {\n        var data, reply, value, _i, _len, _ref3;\n        if (!event.hasValue()) {\n          return this.push(event);\n        } else {\n          _ref3 = event.value(), data = _ref3[0], stopper = _ref3[1];\n          if (stopper.length) {\n            return this.push(end());\n          } else {\n            reply = Bacon.more;\n            for (_i = 0, _len = data.length; _i < _len; _i++) {\n              value = data[_i];\n              if (value === endMarker) {\n                reply = this.push(end());\n              } else {\n                reply = this.push(next(value));\n              }\n            }\n            return reply;\n          }\n        }\n      }));\n    };\n\n    EventStream.prototype.skipUntil = function(starter) {\n      var started;\n      started = starter.take(1).map(true).toProperty(false);\n      return withDescription(this, \"skipUntil\", starter, this.filter(started));\n    };\n\n    EventStream.prototype.skipWhile = function() {\n      var args, f, ok;\n      f = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n      ok = false;\n      return convertArgsToFunction(this, f, args, function(f) {\n        return withDescription(this, \"skipWhile\", f, this.withHandler(function(event) {\n          if (ok || !event.hasValue() || !f(event.value())) {\n            if (event.hasValue()) {\n              ok = true;\n            }\n            return this.push(event);\n          } else {\n            return Bacon.more;\n          }\n        }));\n      });\n    };\n\n    EventStream.prototype.startWith = function(seed) {\n      return withDescription(this, \"startWith\", seed, Bacon.once(seed).concat(this));\n    };\n\n    EventStream.prototype.withHandler = function(handler) {\n      var dispatcher;\n      dispatcher = new Dispatcher(this.subscribe, handler);\n      return new EventStream(describe(this, \"withHandler\", handler), dispatcher.subscribe);\n    };\n\n    return EventStream;\n\n  })(Observable);\n\n  Property = (function(_super) {\n    __extends(Property, _super);\n\n    function Property(desc, subscribe, handler) {\n      this.toEventStream = __bind(this.toEventStream, this);\n      this.toProperty = __bind(this.toProperty, this);\n      this.changes = __bind(this.changes, this);\n      this.sample = __bind(this.sample, this);\n      var _this = this;\n      if (isFunction(desc)) {\n        handler = subscribe;\n        subscribe = desc;\n        desc = [];\n      }\n      Property.__super__.constructor.call(this, desc);\n      assertFunction(subscribe);\n      if (handler === true) {\n        this.subscribeInternal = subscribe;\n      } else {\n        this.subscribeInternal = new PropertyDispatcher(this, subscribe, handler).subscribe;\n      }\n      this.sampledBy = function(sampler, combinator) {\n        var lazy, result, samplerSource, stream, thisSource;\n        if (combinator != null) {\n          combinator = toCombinator(combinator);\n        } else {\n          lazy = true;\n          combinator = function(f) {\n            return f();\n          };\n        }\n        thisSource = new Source(_this, false, false, _this.subscribeInternal, lazy);\n        samplerSource = new Source(sampler, true, false, sampler.subscribe, lazy);\n        stream = Bacon.when([thisSource, samplerSource], combinator);\n        result = sampler instanceof Property ? stream.toProperty() : stream;\n        return withDescription(_this, \"sampledBy\", sampler, combinator, result);\n      };\n      this.subscribe = this.subscribeInternal;\n      registerObs(this);\n    }\n\n    Property.prototype.sample = function(interval) {\n      return withDescription(this, \"sample\", interval, this.sampledBy(Bacon.interval(interval, {})));\n    };\n\n    Property.prototype.changes = function() {\n      var _this = this;\n      return new EventStream(describe(this, \"changes\"), function(sink) {\n        return _this.subscribe(function(event) {\n          if (!event.isInitial()) {\n            return sink(event);\n          }\n        });\n      });\n    };\n\n    Property.prototype.withHandler = function(handler) {\n      return new Property(describe(this, \"withHandler\", handler), this.subscribeInternal, handler);\n    };\n\n    Property.prototype.toProperty = function() {\n      assertNoArguments(arguments);\n      return this;\n    };\n\n    Property.prototype.toEventStream = function() {\n      var _this = this;\n      return new EventStream(describe(this, \"toEventStream\"), function(sink) {\n        return _this.subscribe(function(event) {\n          if (event.isInitial()) {\n            event = event.toNext();\n          }\n          return sink(event);\n        });\n      });\n    };\n\n    Property.prototype.and = function(other) {\n      return withDescription(this, \"and\", other, this.combine(other, function(x, y) {\n        return x && y;\n      }));\n    };\n\n    Property.prototype.or = function(other) {\n      return withDescription(this, \"or\", other, this.combine(other, function(x, y) {\n        return x || y;\n      }));\n    };\n\n    Property.prototype.delay = function(delay) {\n      return this.delayChanges(\"delay\", delay, function(changes) {\n        return changes.delay(delay);\n      });\n    };\n\n    Property.prototype.debounce = function(delay) {\n      return this.delayChanges(\"debounce\", delay, function(changes) {\n        return changes.debounce(delay);\n      });\n    };\n\n    Property.prototype.throttle = function(delay) {\n      return this.delayChanges(\"throttle\", delay, function(changes) {\n        return changes.throttle(delay);\n      });\n    };\n\n    Property.prototype.delayChanges = function() {\n      var desc, f, _i;\n      desc = 2 <= arguments.length ? __slice.call(arguments, 0, _i = arguments.length - 1) : (_i = 0, []), f = arguments[_i++];\n      return withDescription.apply(null, [this].concat(__slice.call(desc), [addPropertyInitValueToStream(this, f(this.changes()))]));\n    };\n\n    Property.prototype.takeUntil = function(stopper) {\n      var changes;\n      changes = this.changes().takeUntil(stopper);\n      return withDescription(this, \"takeUntil\", stopper, addPropertyInitValueToStream(this, changes));\n    };\n\n    Property.prototype.startWith = function(value) {\n      return withDescription(this, \"startWith\", value, this.scan(value, function(prev, next) {\n        return next;\n      }));\n    };\n\n    return Property;\n\n  })(Observable);\n\n  convertArgsToFunction = function(obs, f, args, method) {\n    var sampled;\n    if (f instanceof Property) {\n      sampled = f.sampledBy(obs, function(p, s) {\n        return [p, s];\n      });\n      return method.apply(sampled, [\n        function(_arg) {\n          var p, s;\n          p = _arg[0], s = _arg[1];\n          return p;\n        }\n      ]).map(function(_arg) {\n        var p, s;\n        p = _arg[0], s = _arg[1];\n        return s;\n      });\n    } else {\n      f = makeFunction(f, args);\n      return method.apply(obs, [f]);\n    }\n  };\n\n  addPropertyInitValueToStream = function(property, stream) {\n    var justInitValue;\n    justInitValue = new EventStream(describe(property, \"justInitValue\"), function(sink) {\n      var unsub, value;\n      value = null;\n      unsub = property.subscribe(function(event) {\n        if (event.hasValue()) {\n          value = event;\n        }\n        return Bacon.noMore;\n      });\n      UpdateBarrier.whenDone(justInitValue, function() {\n        if (value != null) {\n          sink(value);\n        }\n        return sink(end());\n      });\n      return unsub;\n    });\n    return justInitValue.concat(stream).toProperty();\n  };\n\n  Dispatcher = (function() {\n    function Dispatcher(subscribe, handleEvent) {\n      var done, ended, prevError, pushIt, pushing, queue, removeSub, subscriptions, unsubscribeFromSource, waiters,\n        _this = this;\n      if (subscribe == null) {\n        subscribe = function() {\n          return nop;\n        };\n      }\n      subscriptions = [];\n      queue = null;\n      pushing = false;\n      ended = false;\n      this.hasSubscribers = function() {\n        return subscriptions.length > 0;\n      };\n      prevError = null;\n      unsubscribeFromSource = nop;\n      removeSub = function(subscription) {\n        return subscriptions = _.without(subscription, subscriptions);\n      };\n      waiters = null;\n      done = function() {\n        var w, ws, _i, _len, _results;\n        if (waiters != null) {\n          ws = waiters;\n          waiters = null;\n          _results = [];\n          for (_i = 0, _len = ws.length; _i < _len; _i++) {\n            w = ws[_i];\n            _results.push(w());\n          }\n          return _results;\n        }\n      };\n      pushIt = function(event) {\n        var reply, sub, success, tmp, _i, _len;\n        if (!pushing) {\n          if (event === prevError) {\n            return;\n          }\n          if (event.isError()) {\n            prevError = event;\n          }\n          success = false;\n          try {\n            pushing = true;\n            tmp = subscriptions;\n            for (_i = 0, _len = tmp.length; _i < _len; _i++) {\n              sub = tmp[_i];\n              reply = sub.sink(event);\n              if (reply === Bacon.noMore || event.isEnd()) {\n                removeSub(sub);\n              }\n            }\n            success = true;\n          } finally {\n            pushing = false;\n            if (!success) {\n              queue = null;\n            }\n          }\n          success = true;\n          while (queue != null ? queue.length : void 0) {\n            event = _.head(queue);\n            queue = _.tail(queue);\n            this.push(event);\n          }\n          done(event);\n          if (this.hasSubscribers()) {\n            return Bacon.more;\n          } else {\n            return Bacon.noMore;\n          }\n        } else {\n          queue = (queue || []).concat([event]);\n          return Bacon.more;\n        }\n      };\n      this.push = function(event) {\n        return UpdateBarrier.inTransaction(event, _this, pushIt, [event]);\n      };\n      if (handleEvent == null) {\n        handleEvent = function(event) {\n          return this.push(event);\n        };\n      }\n      this.handleEvent = function(event) {\n        if (event.isEnd()) {\n          ended = true;\n        }\n        return handleEvent.apply(_this, [event]);\n      };\n      this.subscribe = function(sink) {\n        var subscription;\n        if (ended) {\n          sink(end());\n          return nop;\n        } else {\n          assertFunction(sink);\n          subscription = {\n            sink: sink\n          };\n          subscriptions = subscriptions.concat(subscription);\n          if (subscriptions.length === 1) {\n            unsubscribeFromSource = subscribe(_this.handleEvent);\n          }\n          assertFunction(unsubscribeFromSource);\n          return function() {\n            removeSub(subscription);\n            if (!_this.hasSubscribers()) {\n              return unsubscribeFromSource();\n            }\n          };\n        }\n      };\n    }\n\n    return Dispatcher;\n\n  })();\n\n  PropertyDispatcher = (function(_super) {\n    __extends(PropertyDispatcher, _super);\n\n    function PropertyDispatcher(p, subscribe, handleEvent) {\n      var current, currentValueRootId, ended, push,\n        _this = this;\n      PropertyDispatcher.__super__.constructor.call(this, subscribe, handleEvent);\n      current = None;\n      currentValueRootId = void 0;\n      push = this.push;\n      subscribe = this.subscribe;\n      ended = false;\n      this.push = function(event) {\n        if (event.isEnd()) {\n          ended = true;\n        }\n        if (event.hasValue()) {\n          current = new Some(event);\n          currentValueRootId = UpdateBarrier.currentEventId();\n        }\n        return push.apply(_this, [event]);\n      };\n      this.subscribe = function(sink) {\n        var dispatchingId, initSent, maybeSubSource, reply, valId;\n        initSent = false;\n        reply = Bacon.more;\n        maybeSubSource = function() {\n          if (reply === Bacon.noMore) {\n            return nop;\n          } else if (ended) {\n            sink(end());\n            return nop;\n          } else {\n            return subscribe.apply(this, [sink]);\n          }\n        };\n        if (current.isDefined && (_this.hasSubscribers() || ended)) {\n          dispatchingId = UpdateBarrier.currentEventId();\n          valId = currentValueRootId;\n          if (!ended && valId && dispatchingId && dispatchingId !== valId) {\n            UpdateBarrier.whenDone(p, function() {\n              if (currentValueRootId === valId) {\n                return sink(initial(current.get().value()));\n              }\n            });\n            return maybeSubSource();\n          } else {\n            UpdateBarrier.inTransaction(void 0, _this, (function() {\n              return reply = sink(initial(current.get().value()));\n            }), []);\n            return maybeSubSource();\n          }\n        } else {\n          return maybeSubSource();\n        }\n      };\n    }\n\n    return PropertyDispatcher;\n\n  })(Dispatcher);\n\n  Bus = (function(_super) {\n    __extends(Bus, _super);\n\n    function Bus() {\n      var ended, guardedSink, sink, subscribeAll, subscribeInput, subscriptions, unsubAll, unsubscribeInput,\n        _this = this;\n      sink = void 0;\n      subscriptions = [];\n      ended = false;\n      guardedSink = function(input) {\n        return function(event) {\n          if (event.isEnd()) {\n            unsubscribeInput(input);\n            return Bacon.noMore;\n          } else {\n            return sink(event);\n          }\n        };\n      };\n      unsubAll = function() {\n        var sub, _i, _len, _results;\n        _results = [];\n        for (_i = 0, _len = subscriptions.length; _i < _len; _i++) {\n          sub = subscriptions[_i];\n          _results.push(typeof sub.unsub === \"function\" ? sub.unsub() : void 0);\n        }\n        return _results;\n      };\n      subscribeInput = function(subscription) {\n        return subscription.unsub = subscription.input.subscribe(guardedSink(subscription.input));\n      };\n      unsubscribeInput = function(input) {\n        var i, sub, _i, _len;\n        for (i = _i = 0, _len = subscriptions.length; _i < _len; i = ++_i) {\n          sub = subscriptions[i];\n          if (sub.input === input) {\n            if (typeof sub.unsub === \"function\") {\n              sub.unsub();\n            }\n            subscriptions.splice(i, 1);\n            return;\n          }\n        }\n      };\n      subscribeAll = function(newSink) {\n        var subscription, _i, _len, _ref3;\n        sink = newSink;\n        _ref3 = cloneArray(subscriptions);\n        for (_i = 0, _len = _ref3.length; _i < _len; _i++) {\n          subscription = _ref3[_i];\n          subscribeInput(subscription);\n        }\n        return unsubAll;\n      };\n      Bus.__super__.constructor.call(this, describe(Bacon, \"Bus\"), subscribeAll);\n      this.plug = function(input) {\n        var sub;\n        if (ended) {\n          return;\n        }\n        sub = {\n          input: input\n        };\n        subscriptions.push(sub);\n        if ((sink != null)) {\n          subscribeInput(sub);\n        }\n        return function() {\n          return unsubscribeInput(input);\n        };\n      };\n      this.push = function(value) {\n        return typeof sink === \"function\" ? sink(next(value)) : void 0;\n      };\n      this.error = function(error) {\n        return typeof sink === \"function\" ? sink(new Error(error)) : void 0;\n      };\n      this.end = function() {\n        ended = true;\n        unsubAll();\n        return typeof sink === \"function\" ? sink(end()) : void 0;\n      };\n    }\n\n    return Bus;\n\n  })(EventStream);\n\n  Source = (function() {\n    function Source(obs, sync, consume, subscribe, lazy, queue) {\n      var invoke;\n      this.obs = obs;\n      this.sync = sync;\n      this.subscribe = subscribe;\n      if (lazy == null) {\n        lazy = false;\n      }\n      if (queue == null) {\n        queue = [];\n      }\n      invoke = lazy ? _.id : function(f) {\n        return f();\n      };\n      if (this.subscribe == null) {\n        this.subscribe = obs.subscribe;\n      }\n      this.markEnded = function() {\n        return this.ended = true;\n      };\n      this.toString = this.obs.toString;\n      if (consume) {\n        this.consume = function() {\n          return invoke(queue.shift());\n        };\n        this.push = function(x) {\n          return queue.push(x);\n        };\n        this.mayHave = function(c) {\n          return !this.ended || queue.length >= c;\n        };\n        this.hasAtLeast = function(c) {\n          return queue.length >= c;\n        };\n        this.flatten = false;\n      } else {\n        this.consume = function() {\n          return invoke(queue[0]);\n        };\n        this.push = function(x) {\n          return queue = [x];\n        };\n        this.mayHave = function() {\n          return true;\n        };\n        this.hasAtLeast = function() {\n          return queue.length;\n        };\n        this.flatten = true;\n      }\n    }\n\n    return Source;\n\n  })();\n\n  BufferingSource = (function(_super) {\n    __extends(BufferingSource, _super);\n\n    function BufferingSource(obs) {\n      var queue;\n      this.obs = obs;\n      queue = [];\n      BufferingSource.__super__.constructor.call(this, this.obs, true, false, this.obs.subscribe, false, queue);\n      this.consume = function() {\n        var values;\n        values = queue;\n        queue = [];\n        return values;\n      };\n      this.push = function(x) {\n        return queue.push(x());\n      };\n      this.hasAtLeast = function() {\n        return true;\n      };\n    }\n\n    return BufferingSource;\n\n  })(Source);\n\n  Source.fromObservable = function(s) {\n    if (s instanceof Source) {\n      return s;\n    } else if (s instanceof Property) {\n      return new Source(s, false, false);\n    } else {\n      return new Source(s, true, true);\n    }\n  };\n\n  describe = function() {\n    var args, context, method;\n    context = arguments[0], method = arguments[1], args = 3 <= arguments.length ? __slice.call(arguments, 2) : [];\n    if ((context || method) instanceof Desc) {\n      return context || method;\n    } else {\n      return new Desc(context, method, args);\n    }\n  };\n\n  Desc = (function() {\n    function Desc(context, method, args) {\n      var collectDeps, dependsOn, findDeps, flatDeps;\n      findDeps = function(x) {\n        if (isArray(x)) {\n          return _.flatMap(findDeps, x);\n        } else if (isObservable(x)) {\n          return [x];\n        } else if (x instanceof Source) {\n          return [x.obs];\n        } else {\n          return [];\n        }\n      };\n      flatDeps = null;\n      collectDeps = function(o) {\n        var deps;\n        deps = o.internalDeps();\n        return _.each(deps, function(i, dep) {\n          flatDeps[dep.id] = true;\n          return collectDeps(dep);\n        });\n      };\n      dependsOn = function(b) {\n        if (flatDeps == null) {\n          flatDeps = {};\n          collectDeps(this);\n        }\n        return flatDeps[b.id];\n      };\n      this.apply = function(obs) {\n        var deps;\n        deps = _.cached((function() {\n          return findDeps([context].concat(args));\n        }));\n        obs.internalDeps = obs.internalDeps || deps;\n        obs.dependsOn = dependsOn;\n        obs.deps = deps;\n        obs.toString = function() {\n          return _.toString(context) + \".\" + _.toString(method) + \"(\" + _.map(_.toString, args) + \")\";\n        };\n        obs.inspect = function() {\n          return obs.toString();\n        };\n        obs.desc = function() {\n          return {\n            context: context,\n            method: method,\n            args: args\n          };\n        };\n        return obs;\n      };\n    }\n\n    return Desc;\n\n  })();\n\n  withDescription = function() {\n    var desc, obs, _i;\n    desc = 2 <= arguments.length ? __slice.call(arguments, 0, _i = arguments.length - 1) : (_i = 0, []), obs = arguments[_i++];\n    return describe.apply(null, desc).apply(obs);\n  };\n\n  Bacon.when = function() {\n    var f, i, index, ix, len, needsBarrier, pat, patSources, pats, patterns, resultStream, s, sources, usage, _i, _j, _len, _len1, _ref3;\n    patterns = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n    if (patterns.length === 0) {\n      return Bacon.never();\n    }\n    len = patterns.length;\n    usage = \"when: expecting arguments in the form (Observable+,function)+\";\n    assert(usage, len % 2 === 0);\n    sources = [];\n    pats = [];\n    i = 0;\n    while (i < len) {\n      patSources = _.toArray(patterns[i]);\n      f = patterns[i + 1];\n      pat = {\n        f: (isFunction(f) ? f : (function() {\n          return f;\n        })),\n        ixs: []\n      };\n      for (_i = 0, _len = patSources.length; _i < _len; _i++) {\n        s = patSources[_i];\n        assert(isObservable(s), usage);\n        index = _.indexOf(sources, s);\n        if (index < 0) {\n          sources.push(s);\n          index = sources.length - 1;\n        }\n        _ref3 = pat.ixs;\n        for (_j = 0, _len1 = _ref3.length; _j < _len1; _j++) {\n          ix = _ref3[_j];\n          if (ix.index === index) {\n            ix.count++;\n          }\n        }\n        pat.ixs.push({\n          index: index,\n          count: 1\n        });\n      }\n      if (patSources.length > 0) {\n        pats.push(pat);\n      }\n      i = i + 2;\n    }\n    if (!sources.length) {\n      return Bacon.never();\n    }\n    sources = _.map(Source.fromObservable, sources);\n    needsBarrier = (_.any(sources, function(s) {\n      return s.flatten;\n    })) && (containsDuplicateDeps(_.map((function(s) {\n      return s.obs;\n    }), sources)));\n    return resultStream = new EventStream(describe.apply(null, [Bacon, \"when\"].concat(__slice.call(patterns))), function(sink) {\n      var cannotMatch, cannotSync, ends, match, nonFlattened, part, triggers;\n      triggers = [];\n      ends = false;\n      match = function(p) {\n        var _k, _len2, _ref4;\n        _ref4 = p.ixs;\n        for (_k = 0, _len2 = _ref4.length; _k < _len2; _k++) {\n          i = _ref4[_k];\n          if (!sources[i.index].hasAtLeast(i.count)) {\n            return false;\n          }\n        }\n        return true;\n      };\n      cannotSync = function(source) {\n        return !source.sync || source.ended;\n      };\n      cannotMatch = function(p) {\n        var _k, _len2, _ref4;\n        _ref4 = p.ixs;\n        for (_k = 0, _len2 = _ref4.length; _k < _len2; _k++) {\n          i = _ref4[_k];\n          if (!sources[i.index].mayHave(i.count)) {\n            return true;\n          }\n        }\n      };\n      nonFlattened = function(trigger) {\n        return !trigger.source.flatten;\n      };\n      part = function(source) {\n        return function(unsubAll) {\n          var flush, flushLater, flushWhileTriggers;\n          flushLater = function() {\n            return UpdateBarrier.whenDone(resultStream, flush);\n          };\n          flushWhileTriggers = function() {\n            var p, reply, trigger, val, _k, _len2;\n            if (triggers.length > 0) {\n              reply = Bacon.more;\n              trigger = triggers.pop();\n              for (_k = 0, _len2 = pats.length; _k < _len2; _k++) {\n                p = pats[_k];\n                if (match(p)) {\n                  val = function() {\n                    return p.f.apply(p, (function() {\n                      var _l, _len3, _ref4, _results;\n                      _ref4 = p.ixs;\n                      _results = [];\n                      for (_l = 0, _len3 = _ref4.length; _l < _len3; _l++) {\n                        i = _ref4[_l];\n                        _results.push(sources[i.index].consume());\n                      }\n                      return _results;\n                    })());\n                  };\n                  reply = sink(trigger.e.apply(val));\n                  if (triggers.length && needsBarrier) {\n                    triggers = _.filter(nonFlattened, triggers);\n                  }\n                  if (reply === Bacon.noMore) {\n                    return reply;\n                  } else {\n                    return flushWhileTriggers();\n                  }\n                }\n              }\n            } else {\n              return Bacon.more;\n            }\n          };\n          flush = function() {\n            var reply;\n            reply = flushWhileTriggers();\n            if (ends) {\n              ends = false;\n              if (_.all(sources, cannotSync) || _.all(pats, cannotMatch)) {\n                reply = Bacon.noMore;\n                sink(end());\n              }\n            }\n            if (reply === Bacon.noMore) {\n              unsubAll();\n            }\n            return reply;\n          };\n          return source.subscribe(function(e) {\n            var reply;\n            if (e.isEnd()) {\n              ends = true;\n              source.markEnded();\n              flushLater();\n            } else if (e.isError()) {\n              reply = sink(e);\n            } else {\n              source.push(e.value);\n              if (source.sync) {\n                triggers.push({\n                  source: source,\n                  e: e\n                });\n                if (needsBarrier) {\n                  flushLater();\n                } else {\n                  flush();\n                }\n              }\n            }\n            if (reply === Bacon.noMore) {\n              unsubAll();\n            }\n            return reply || Bacon.more;\n          });\n        };\n      };\n      return compositeUnsubscribe.apply(null, (function() {\n        var _k, _len2, _results;\n        _results = [];\n        for (_k = 0, _len2 = sources.length; _k < _len2; _k++) {\n          s = sources[_k];\n          _results.push(part(s));\n        }\n        return _results;\n      })());\n    });\n  };\n\n  containsDuplicateDeps = function(observables, state) {\n    var checkObservable;\n    if (state == null) {\n      state = [];\n    }\n    checkObservable = function(obs) {\n      var deps;\n      if (Bacon._.contains(state, obs)) {\n        return true;\n      } else {\n        deps = obs.internalDeps();\n        if (deps.length) {\n          state.push(obs);\n          return Bacon._.any(deps, checkObservable);\n        } else {\n          state.push(obs);\n          return false;\n        }\n      }\n    };\n    return Bacon._.any(observables, checkObservable);\n  };\n\n  Bacon.update = function() {\n    var i, initial, lateBindFirst, patterns;\n    initial = arguments[0], patterns = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n    lateBindFirst = function(f) {\n      return function() {\n        var args;\n        args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n        return function(i) {\n          return f.apply(null, [i].concat(args));\n        };\n      };\n    };\n    i = patterns.length - 1;\n    while (i > 0) {\n      if (!(patterns[i] instanceof Function)) {\n        patterns[i] = (function(x) {\n          return function() {\n            return x;\n          };\n        })(patterns[i]);\n      }\n      patterns[i] = lateBindFirst(patterns[i]);\n      i = i - 2;\n    }\n    return withDescription.apply(null, [Bacon, \"update\", initial].concat(__slice.call(patterns), [Bacon.when.apply(Bacon, patterns).scan(initial, (function(x, f) {\n      return f(x);\n    }))]));\n  };\n\n  compositeUnsubscribe = function() {\n    var ss;\n    ss = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n    return new CompositeUnsubscribe(ss).unsubscribe;\n  };\n\n  CompositeUnsubscribe = (function() {\n    function CompositeUnsubscribe(ss) {\n      var s, _i, _len;\n      if (ss == null) {\n        ss = [];\n      }\n      this.empty = __bind(this.empty, this);\n      this.count = __bind(this.count, this);\n      this.unsubscribe = __bind(this.unsubscribe, this);\n      this.add = __bind(this.add, this);\n      this.unsubscribed = false;\n      this.subscriptions = [];\n      this.starting = [];\n      for (_i = 0, _len = ss.length; _i < _len; _i++) {\n        s = ss[_i];\n        this.add(s);\n      }\n    }\n\n    CompositeUnsubscribe.prototype.add = function(subscription) {\n      var ended, unsub, unsubMe,\n        _this = this;\n      if (this.unsubscribed) {\n        return;\n      }\n      ended = false;\n      unsub = nop;\n      this.starting.push(subscription);\n      unsubMe = function() {\n        if (_this.unsubscribed) {\n          return;\n        }\n        ended = true;\n        _this.remove(unsub);\n        return _.remove(subscription, _this.starting);\n      };\n      unsub = subscription(this.unsubscribe, unsubMe);\n      if (!(this.unsubscribed || ended)) {\n        this.subscriptions.push(unsub);\n      }\n      _.remove(subscription, this.starting);\n      return unsub;\n    };\n\n    CompositeUnsubscribe.prototype.remove = function(unsub) {\n      if (this.unsubscribed) {\n        return;\n      }\n      if ((_.remove(unsub, this.subscriptions)) !== void 0) {\n        return unsub();\n      }\n    };\n\n    CompositeUnsubscribe.prototype.unsubscribe = function() {\n      var s, _i, _len, _ref3;\n      if (this.unsubscribed) {\n        return;\n      }\n      this.unsubscribed = true;\n      _ref3 = this.subscriptions;\n      for (_i = 0, _len = _ref3.length; _i < _len; _i++) {\n        s = _ref3[_i];\n        s();\n      }\n      this.subscriptions = [];\n      return this.starting = [];\n    };\n\n    CompositeUnsubscribe.prototype.count = function() {\n      if (this.unsubscribed) {\n        return 0;\n      }\n      return this.subscriptions.length + this.starting.length;\n    };\n\n    CompositeUnsubscribe.prototype.empty = function() {\n      return this.count() === 0;\n    };\n\n    return CompositeUnsubscribe;\n\n  })();\n\n  Bacon.CompositeUnsubscribe = CompositeUnsubscribe;\n\n  Some = (function() {\n    function Some(value) {\n      this.value = value;\n    }\n\n    Some.prototype.getOrElse = function() {\n      return this.value;\n    };\n\n    Some.prototype.get = function() {\n      return this.value;\n    };\n\n    Some.prototype.filter = function(f) {\n      if (f(this.value)) {\n        return new Some(this.value);\n      } else {\n        return None;\n      }\n    };\n\n    Some.prototype.map = function(f) {\n      return new Some(f(this.value));\n    };\n\n    Some.prototype.forEach = function(f) {\n      return f(this.value);\n    };\n\n    Some.prototype.isDefined = true;\n\n    Some.prototype.toArray = function() {\n      return [this.value];\n    };\n\n    Some.prototype.inspect = function() {\n      return \"Some(\" + this.value + \")\";\n    };\n\n    Some.prototype.toString = function() {\n      return this.inspect();\n    };\n\n    return Some;\n\n  })();\n\n  None = {\n    getOrElse: function(value) {\n      return value;\n    },\n    filter: function() {\n      return None;\n    },\n    map: function() {\n      return None;\n    },\n    forEach: function() {},\n    isDefined: false,\n    toArray: function() {\n      return [];\n    },\n    inspect: function() {\n      return \"None\";\n    },\n    toString: function() {\n      return this.inspect();\n    }\n  };\n\n  UpdateBarrier = (function() {\n    var currentEventId, findIndependent, flush, inTransaction, independent, rootEvent, waiters, whenDone;\n    rootEvent = void 0;\n    waiters = [];\n    independent = function(waiter) {\n      return !_.any(waiters, (function(other) {\n        return waiter.obs.dependsOn(other.obs);\n      }));\n    };\n    whenDone = function(obs, f) {\n      if (rootEvent) {\n        return waiters.push({\n          obs: obs,\n          f: f\n        });\n      } else {\n        return f();\n      }\n    };\n    findIndependent = function() {\n      while (!independent(waiters[0])) {\n        waiters.push(waiters.splice(0, 1)[0]);\n      }\n      return waiters.splice(0, 1)[0];\n    };\n    flush = function() {\n      if (waiters.length) {\n        findIndependent().f();\n        return flush();\n      }\n    };\n    inTransaction = function(event, context, f, args) {\n      var result;\n      if (rootEvent) {\n        return f.apply(context, args);\n      } else {\n        rootEvent = event;\n        try {\n          result = f.apply(context, args);\n          flush();\n        } finally {\n          rootEvent = void 0;\n        }\n        return result;\n      }\n    };\n    currentEventId = function() {\n      if (rootEvent) {\n        return rootEvent.id;\n      } else {\n        return void 0;\n      }\n    };\n    return {\n      whenDone: whenDone,\n      inTransaction: inTransaction,\n      currentEventId: currentEventId\n    };\n  })();\n\n  Bacon.EventStream = EventStream;\n\n  Bacon.Property = Property;\n\n  Bacon.Observable = Observable;\n\n  Bacon.Bus = Bus;\n\n  Bacon.Initial = Initial;\n\n  Bacon.Next = Next;\n\n  Bacon.End = End;\n\n  Bacon.Error = Error;\n\n  nop = function() {};\n\n  latterF = function(_, x) {\n    return x();\n  };\n\n  former = function(x, _) {\n    return x;\n  };\n\n  initial = function(value) {\n    return new Initial(_.always(value));\n  };\n\n  next = function(value) {\n    return new Next(_.always(value));\n  };\n\n  end = function() {\n    return new End();\n  };\n\n  toEvent = function(x) {\n    if (x instanceof Event) {\n      return x;\n    } else {\n      return next(x);\n    }\n  };\n\n  cloneArray = function(xs) {\n    return xs.slice(0);\n  };\n\n  assert = function(message, condition) {\n    if (!condition) {\n      throw message;\n    }\n  };\n\n  assertEventStream = function(event) {\n    if (!(event instanceof EventStream)) {\n      throw \"not an EventStream : \" + event;\n    }\n  };\n\n  assertFunction = function(f) {\n    return assert(\"not a function : \" + f, isFunction(f));\n  };\n\n  isFunction = function(f) {\n    return typeof f === \"function\";\n  };\n\n  isArray = function(xs) {\n    return xs instanceof Array;\n  };\n\n  isObservable = function(x) {\n    return x instanceof Observable;\n  };\n\n  assertArray = function(xs) {\n    if (!isArray(xs)) {\n      throw \"not an array : \" + xs;\n    }\n  };\n\n  assertNoArguments = function(args) {\n    return assert(\"no arguments supported\", args.length === 0);\n  };\n\n  assertString = function(x) {\n    if (typeof x !== \"string\") {\n      throw \"not a string : \" + x;\n    }\n  };\n\n  partiallyApplied = function(f, applied) {\n    return function() {\n      var args;\n      args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n      return f.apply(null, applied.concat(args));\n    };\n  };\n\n  makeSpawner = function(f) {\n    if (isObservable(f)) {\n      f = _.always(f);\n    }\n    assertFunction(f);\n    return f;\n  };\n\n  makeFunctionArgs = function(args) {\n    args = Array.prototype.slice.call(args);\n    return makeFunction_.apply(null, args);\n  };\n\n  makeFunction_ = withMethodCallSupport(function() {\n    var args, f;\n    f = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n    if (isFunction(f)) {\n      if (args.length) {\n        return partiallyApplied(f, args);\n      } else {\n        return f;\n      }\n    } else if (isFieldKey(f)) {\n      return toFieldExtractor(f, args);\n    } else {\n      return _.always(f);\n    }\n  });\n\n  makeFunction = function(f, args) {\n    return makeFunction_.apply(null, [f].concat(__slice.call(args)));\n  };\n\n  isFieldKey = function(f) {\n    return (typeof f === \"string\") && f.length > 1 && f.charAt(0) === \".\";\n  };\n\n  Bacon.isFieldKey = isFieldKey;\n\n  toFieldExtractor = function(f, args) {\n    var partFuncs, parts;\n    parts = f.slice(1).split(\".\");\n    partFuncs = _.map(toSimpleExtractor(args), parts);\n    return function(value) {\n      var _i, _len;\n      for (_i = 0, _len = partFuncs.length; _i < _len; _i++) {\n        f = partFuncs[_i];\n        value = f(value);\n      }\n      return value;\n    };\n  };\n\n  toSimpleExtractor = function(args) {\n    return function(key) {\n      return function(value) {\n        var fieldValue;\n        if (value == null) {\n          return void 0;\n        } else {\n          fieldValue = value[key];\n          if (isFunction(fieldValue)) {\n            return fieldValue.apply(value, args);\n          } else {\n            return fieldValue;\n          }\n        }\n      };\n    };\n  };\n\n  toFieldKey = function(f) {\n    return f.slice(1);\n  };\n\n  toCombinator = function(f) {\n    var key;\n    if (isFunction(f)) {\n      return f;\n    } else if (isFieldKey(f)) {\n      key = toFieldKey(f);\n      return function(left, right) {\n        return left[key](right);\n      };\n    } else {\n      return assert(\"not a function or a field key: \" + f, false);\n    }\n  };\n\n  toOption = function(v) {\n    if (v instanceof Some || v === None) {\n      return v;\n    } else {\n      return new Some(v);\n    }\n  };\n\n  _ = {\n    indexOf: Array.prototype.indexOf ? function(xs, x) {\n      return xs.indexOf(x);\n    } : function(xs, x) {\n      var i, y, _i, _len;\n      for (i = _i = 0, _len = xs.length; _i < _len; i = ++_i) {\n        y = xs[i];\n        if (x === y) {\n          return i;\n        }\n      }\n      return -1;\n    },\n    indexWhere: function(xs, f) {\n      var i, y, _i, _len;\n      for (i = _i = 0, _len = xs.length; _i < _len; i = ++_i) {\n        y = xs[i];\n        if (f(y)) {\n          return i;\n        }\n      }\n      return -1;\n    },\n    head: function(xs) {\n      return xs[0];\n    },\n    always: function(x) {\n      return function() {\n        return x;\n      };\n    },\n    negate: function(f) {\n      return function(x) {\n        return !f(x);\n      };\n    },\n    empty: function(xs) {\n      return xs.length === 0;\n    },\n    tail: function(xs) {\n      return xs.slice(1, xs.length);\n    },\n    filter: function(f, xs) {\n      var filtered, x, _i, _len;\n      filtered = [];\n      for (_i = 0, _len = xs.length; _i < _len; _i++) {\n        x = xs[_i];\n        if (f(x)) {\n          filtered.push(x);\n        }\n      }\n      return filtered;\n    },\n    map: function(f, xs) {\n      var x, _i, _len, _results;\n      _results = [];\n      for (_i = 0, _len = xs.length; _i < _len; _i++) {\n        x = xs[_i];\n        _results.push(f(x));\n      }\n      return _results;\n    },\n    each: function(xs, f) {\n      var key, value, _results;\n      _results = [];\n      for (key in xs) {\n        value = xs[key];\n        _results.push(f(key, value));\n      }\n      return _results;\n    },\n    toArray: function(xs) {\n      if (isArray(xs)) {\n        return xs;\n      } else {\n        return [xs];\n      }\n    },\n    contains: function(xs, x) {\n      return _.indexOf(xs, x) !== -1;\n    },\n    id: function(x) {\n      return x;\n    },\n    last: function(xs) {\n      return xs[xs.length - 1];\n    },\n    all: function(xs, f) {\n      var x, _i, _len;\n      if (f == null) {\n        f = _.id;\n      }\n      for (_i = 0, _len = xs.length; _i < _len; _i++) {\n        x = xs[_i];\n        if (!f(x)) {\n          return false;\n        }\n      }\n      return true;\n    },\n    any: function(xs, f) {\n      var x, _i, _len;\n      if (f == null) {\n        f = _.id;\n      }\n      for (_i = 0, _len = xs.length; _i < _len; _i++) {\n        x = xs[_i];\n        if (f(x)) {\n          return true;\n        }\n      }\n      return false;\n    },\n    without: function(x, xs) {\n      return _.filter((function(y) {\n        return y !== x;\n      }), xs);\n    },\n    remove: function(x, xs) {\n      var i;\n      i = _.indexOf(xs, x);\n      if (i >= 0) {\n        return xs.splice(i, 1);\n      }\n    },\n    fold: function(xs, seed, f) {\n      var x, _i, _len;\n      for (_i = 0, _len = xs.length; _i < _len; _i++) {\n        x = xs[_i];\n        seed = f(seed, x);\n      }\n      return seed;\n    },\n    flatMap: function(f, xs) {\n      return _.fold(xs, [], (function(ys, x) {\n        return ys.concat(f(x));\n      }));\n    },\n    cached: function(f) {\n      var value;\n      value = None;\n      return function() {\n        if (value === None) {\n          value = f();\n          f = null;\n        }\n        return value;\n      };\n    },\n    toString: function(obj) {\n      var key, value;\n      try {\n        recursionDepth++;\n        if (obj == null) {\n          return \"undefined\";\n        } else if (isFunction(obj)) {\n          return \"function\";\n        } else if (isArray(obj)) {\n          if (recursionDepth > 5) {\n            return \"[..]\";\n          }\n          return \"[\" + _.map(_.toString, obj).toString() + \"]\";\n        } else if (((obj != null ? obj.toString : void 0) != null) && obj.toString !== Object.prototype.toString) {\n          return obj.toString();\n        } else if (typeof obj === \"object\") {\n          if (recursionDepth > 5) {\n            return \"{..}\";\n          }\n          return \"{\" + ((function() {\n            var _results;\n            _results = [];\n            for (key in obj) {\n              value = obj[key];\n              _results.push(_.toString(key) + \":\" + _.toString(value));\n            }\n            return _results;\n          })()) + \"}\";\n        } else {\n          return obj;\n        }\n      } finally {\n        recursionDepth--;\n      }\n    }\n  };\n\n  recursionDepth = 0;\n\n  Bacon._ = _;\n\n  Bacon.scheduler = {\n    setTimeout: function(f, d) {\n      return setTimeout(f, d);\n    },\n    setInterval: function(f, i) {\n      return setInterval(f, i);\n    },\n    clearInterval: function(id) {\n      return clearInterval(id);\n    },\n    now: function() {\n      return new Date().getTime();\n    }\n  };\n\n  if (typeof module !== \"undefined\" && module !== null) {\n    module.exports = Bacon;\n    Bacon.Bacon = Bacon;\n  } else {\n    if ((typeof define !== \"undefined\" && define !== null) && (define.amd != null)) {\n      define([], function() {\n        return Bacon;\n      });\n    }\n    this.Bacon = Bacon;\n  }\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/datatable.js":{"id":6,"canonicalName":"src/datatable.js","code":"(function () {\n    var DataTable, utils, _, __hasProp = {}.hasOwnProperty;\n    _ = require('16', module);\n    utils = require('5', module);\n    DataTable = function () {\n        function DataTable(vars) {\n            var key, samelen, value, varlen;\n            if (vars == null) {\n                vars = {};\n            }\n            varlen = _.map(vars, function (x) {\n                return x.length;\n            });\n            samelen = _.all(varlen, function (x) {\n                return x === varlen[0];\n            });\n            if (!samelen) {\n                throw 'arguments to DataTable must all have same length.';\n            }\n            for (key in vars) {\n                value = vars[key];\n                this[key] = value;\n            }\n        }\n        DataTable.prototype.show = function () {\n            var i, _i, _ref, _results;\n            console.log('DataTable: rows: ' + this.nrow() + ' columns: ' + this.ncol());\n            _results = [];\n            for (i = _i = 0, _ref = this.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                _results.push(console.log(this.record(i)));\n            }\n            return _results;\n        };\n        DataTable.fromRecords = function (records, union) {\n            var allkeys, key, rec, vars, _i, _j, _k, _len, _len1, _len2;\n            if (union == null) {\n                union = true;\n            }\n            if (!_.isArray(records)) {\n                throw new Error('DataTable.fromRecords: \\'records\\' arguemnt must be an array of records.');\n            }\n            allkeys = _.uniq(_.flatten(_.map(records, function (rec) {\n                return _.keys(rec);\n            })));\n            vars = {};\n            for (_i = 0, _len = allkeys.length; _i < _len; _i++) {\n                key = allkeys[_i];\n                vars[key] = [];\n            }\n            for (_j = 0, _len1 = records.length; _j < _len1; _j++) {\n                rec = records[_j];\n                for (_k = 0, _len2 = allkeys.length; _k < _len2; _k++) {\n                    key = allkeys[_k];\n                    if (rec[key] != null) {\n                        vars[key].push(rec[key]);\n                    } else {\n                        vars[key].push(null);\n                    }\n                }\n            }\n            return new DataTable(vars);\n        };\n        DataTable.build = function (vars) {\n            if (vars == null) {\n                vars = {};\n            }\n            return Object.seal(new DataTable(vars));\n        };\n        DataTable.rbind = function (tab1, tab2, union) {\n            var col1, col2, keys1, keys2, name, out, sharedKeys, _i, _len;\n            if (union == null) {\n                union = false;\n            }\n            keys1 = _.keys(tab1);\n            keys2 = _.keys(tab2);\n            sharedKeys = union ? _.union(keys1, keys2) : _.intersection(keys1, keys2);\n            out = {};\n            for (_i = 0, _len = sharedKeys.length; _i < _len; _i++) {\n                name = sharedKeys[_i];\n                col1 = tab1[name];\n                col2 = tab2[name];\n                if (!col1) {\n                    col1 = utils.repLen([null], tab1.nrow());\n                }\n                if (!col2) {\n                    col2 = utils.repLen([null], tab2.nrow());\n                }\n                out[name] = col1.concat(col2);\n            }\n            return new DataTable(out);\n        };\n        DataTable.cbind = function (tab1, tab2) {\n            var diffkeys, key, out, _i, _len;\n            if (tab1.nrow() !== tab2.nrow()) {\n                throw 'cbind requires arguments to have same number of rows';\n            }\n            out = _.cloneDeep(tab1);\n            diffkeys = _.difference(_.keys(tab2), _.keys(tab1));\n            for (_i = 0, _len = diffkeys.length; _i < _len; _i++) {\n                key = diffkeys[_i];\n                out[key] = tab2[key];\n            }\n            return out;\n        };\n        DataTable.expand = function (vars, unique, nreps) {\n            var d, i, key, name, nargs, nm, nx, orep, out, r1, r2, r3, repfac, value, _i, _j, _results;\n            if (vars == null) {\n                vars = {};\n            }\n            if (unique == null) {\n                unique = true;\n            }\n            if (nreps == null) {\n                nreps = 1;\n            }\n            if (unique) {\n                out = {};\n                for (name in vars) {\n                    value = vars[name];\n                    out[name] = _.unique(value);\n                }\n                vars = out;\n            }\n            nargs = _.size(vars);\n            nm = _.keys(vars);\n            repfac = 1;\n            d = _.map(vars, function (x) {\n                return x.length;\n            });\n            orep = _.reduce(d, function (x, acc) {\n                return x * acc;\n            });\n            out = {};\n            for (key in vars) {\n                value = vars[key];\n                nx = value.length;\n                orep = orep / nx;\n                r1 = utils.rep([repfac], nx);\n                r2 = utils.rep(function () {\n                    _results = [];\n                    for (var _i = 0; 0 <= nx ? _i < nx : _i > nx; 0 <= nx ? _i++ : _i--) {\n                        _results.push(_i);\n                    }\n                    return _results;\n                }.apply(this), r1);\n                r3 = utils.rep(r2, orep);\n                out[key] = function () {\n                    var _j, _len, _results1;\n                    _results1 = [];\n                    for (_j = 0, _len = r3.length; _j < _len; _j++) {\n                        i = r3[_j];\n                        _results1.push(value[i]);\n                    }\n                    return _results1;\n                }();\n                repfac = repfac * nx;\n            }\n            if (nreps > 1) {\n                for (i = _j = 1; 1 <= nreps ? _j <= nreps : _j >= nreps; i = 1 <= nreps ? ++_j : --_j) {\n                    out = _.merge(out, out);\n                }\n            }\n            return new DataTable(out);\n        };\n        DataTable.prototype.dropColumn = function (colname) {\n            var key, out, value;\n            out = {};\n            for (key in this) {\n                if (!__hasProp.call(this, key))\n                    continue;\n                value = this[key];\n                if (key !== colname) {\n                    out[key] = _.clone(value);\n                }\n            }\n            return new DataTable(out);\n        };\n        DataTable.prototype.subset = function (key, filter) {\n            var el, i, keep, name, out, val, value;\n            keep = function () {\n                var _i, _len, _ref, _results;\n                _ref = this[key];\n                _results = [];\n                for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n                    val = _ref[_i];\n                    if (filter(val)) {\n                        _results.push(true);\n                    } else {\n                        _results.push(false);\n                    }\n                }\n                return _results;\n            }.call(this);\n            out = {};\n            for (name in this) {\n                if (!__hasProp.call(this, name))\n                    continue;\n                value = this[name];\n                out[name] = function () {\n                    var _i, _len, _results;\n                    _results = [];\n                    for (i = _i = 0, _len = value.length; _i < _len; i = ++_i) {\n                        el = value[i];\n                        if (keep[i] === true) {\n                            _results.push(el);\n                        }\n                    }\n                    return _results;\n                }();\n            }\n            return new DataTable(out);\n        };\n        DataTable.prototype.whichRow = function (where) {\n            var count, i, key, nkeys, out, rec, value, _i, _ref;\n            out = [];\n            nkeys = _.keys(where).length;\n            for (i = _i = 0, _ref = this.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                rec = this.record(i);\n                count = utils.asArray(function () {\n                    var _results;\n                    _results = [];\n                    for (key in where) {\n                        value = where[key];\n                        _results.push(rec[key] === value);\n                    }\n                    return _results;\n                }());\n                count = _.map(count, function (x) {\n                    if (x) {\n                        return 1;\n                    } else {\n                        return 0;\n                    }\n                });\n                count = _.reduce(utils.asArray(count), function (sum, num) {\n                    return sum + num;\n                });\n                if (count === nkeys) {\n                    out.push(i);\n                }\n            }\n            return out;\n        };\n        DataTable.prototype.select = function (where) {\n            var count, i, key, nkeys, out, rec, value, _i, _ref;\n            out = [];\n            nkeys = _.keys(where).length;\n            for (i = _i = 0, _ref = this.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                rec = this.record(i);\n                count = utils.asArray(function () {\n                    var _results;\n                    _results = [];\n                    for (key in where) {\n                        value = where[key];\n                        _results.push(rec[key] === value);\n                    }\n                    return _results;\n                }());\n                count = _.map(count, function (x) {\n                    if (x) {\n                        return 1;\n                    } else {\n                        return 0;\n                    }\n                });\n                count = _.reduce(utils.asArray(count), function (sum, num) {\n                    return sum + num;\n                });\n                if (count === nkeys) {\n                    out.push(rec);\n                }\n            }\n            return out;\n        };\n        DataTable.prototype.nrow = function () {\n            var lens, name, value;\n            lens = function () {\n                var _results;\n                _results = [];\n                for (name in this) {\n                    if (!__hasProp.call(this, name))\n                        continue;\n                    value = this[name];\n                    _results.push(value.length);\n                }\n                return _results;\n            }.call(this);\n            return _.max(lens);\n        };\n        DataTable.prototype.ncol = function () {\n            return Object.keys(this).length;\n        };\n        DataTable.prototype.colnames = function () {\n            return Object.keys(this);\n        };\n        DataTable.prototype.toRecordArray = function () {\n            var i, rec, _i, _ref;\n            rec = [];\n            for (i = _i = 0, _ref = this.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                rec.push(this.record(i));\n            }\n            return rec;\n        };\n        DataTable.prototype.record = function (index) {\n            var name, rec, value;\n            rec = {};\n            for (name in this) {\n                if (!__hasProp.call(this, name))\n                    continue;\n                value = this[name];\n                rec[name] = value[index];\n            }\n            return rec;\n        };\n        DataTable.prototype.replicate = function (nreps) {\n            var name, out, value;\n            out = {};\n            for (name in this) {\n                if (!__hasProp.call(this, name))\n                    continue;\n                value = this[name];\n                out[name] = _.flatten(_.times(nreps, function (_this) {\n                    return function (n) {\n                        return value;\n                    };\n                }(this)));\n            }\n            return new DataTable(out);\n        };\n        DataTable.prototype.bindcol = function (name, column) {\n            if (column.length !== this.nrow()) {\n                throw 'new column must be same length as existing DataTable object: column.length is  ' + column.length + ' and this.length is  ' + this.nrow();\n            }\n            this[name] = column;\n            return this;\n        };\n        DataTable.prototype.bindrow = function (rows) {\n            var key, record, value, _i, _len;\n            if (!_.isArray(rows)) {\n                rows = [rows];\n            }\n            for (_i = 0, _len = rows.length; _i < _len; _i++) {\n                record = rows[_i];\n                console.log(record);\n                for (key in record) {\n                    if (!__hasProp.call(record, key))\n                        continue;\n                    value = record[key];\n                    if (!_.has(this, key)) {\n                        throw new Error('DataTable has no field named ' + key);\n                    } else {\n                        this[key].push(value);\n                    }\n                }\n            }\n            return this;\n        };\n        DataTable.prototype.shuffle = function () {\n            var i, ind, nr, out, sind, _i, _j, _results;\n            nr = this.nrow();\n            ind = function () {\n                _results = [];\n                for (var _i = 0; 0 <= nr ? _i < nr : _i > nr; 0 <= nr ? _i++ : _i--) {\n                    _results.push(_i);\n                }\n                return _results;\n            }.apply(this);\n            sind = _.shuffle(ind);\n            out = [];\n            for (i = _j = 0; 0 <= nr ? _j < nr : _j > nr; i = 0 <= nr ? ++_j : --_j) {\n                out[i] = this.record(sind[i]);\n            }\n            return DataTable.fromRecords(out);\n        };\n        return DataTable;\n    }();\n    exports.DataTable = DataTable;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/datatable.js\"],\"names\":[\"DataTable\",\"utils\",\"_\",\"__hasProp\",\"hasOwnProperty\",\"require\",\"vars\",\"key\",\"samelen\",\"value\",\"varlen\",\"map\",\"x\",\"length\",\"all\",\"prototype\",\"show\",\"i\",\"_i\",\"_ref\",\"_results\",\"console\",\"log\",\"nrow\",\"ncol\",\"push\",\"record\",\"fromRecords\",\"records\",\"union\",\"allkeys\",\"rec\",\"_j\",\"_k\",\"_len\",\"_len1\",\"_len2\",\"isArray\",\"Error\",\"uniq\",\"flatten\",\"keys\",\"build\",\"Object\",\"seal\",\"rbind\",\"tab1\",\"tab2\",\"col1\",\"col2\",\"keys1\",\"keys2\",\"name\",\"out\",\"sharedKeys\",\"intersection\",\"repLen\",\"concat\",\"cbind\",\"diffkeys\",\"cloneDeep\",\"difference\",\"expand\",\"unique\",\"nreps\",\"d\",\"nargs\",\"nm\",\"nx\",\"orep\",\"r1\",\"r2\",\"r3\",\"repfac\",\"size\",\"reduce\",\"acc\",\"rep\",\"apply\",\"_results1\",\"merge\",\"dropColumn\",\"colname\",\"call\",\"clone\",\"subset\",\"filter\",\"el\",\"keep\",\"val\",\"whichRow\",\"where\",\"count\",\"nkeys\",\"asArray\",\"sum\",\"num\",\"select\",\"lens\",\"max\",\"colnames\",\"toRecordArray\",\"index\",\"replicate\",\"times\",\"_this\",\"n\",\"bindcol\",\"column\",\"bindrow\",\"rows\",\"has\",\"shuffle\",\"ind\",\"nr\",\"sind\",\"exports\"],\"mappings\":\"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\"}","lineCount":378,"mtime":1393163172000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/utils.js","canonicalName":"src/utils.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.7.1\n(function() {\n  var DataTable, utils, _,\n    __hasProp = {}.hasOwnProperty;\n\n  _ = require('lodash');\n\n  utils = require(\"./utils\");\n\n  DataTable = (function() {\n    function DataTable(vars) {\n      var key, samelen, value, varlen;\n      if (vars == null) {\n        vars = {};\n      }\n      varlen = _.map(vars, function(x) {\n        return x.length;\n      });\n      samelen = _.all(varlen, function(x) {\n        return x === varlen[0];\n      });\n      if (!samelen) {\n        throw \"arguments to DataTable must all have same length.\";\n      }\n      for (key in vars) {\n        value = vars[key];\n        this[key] = value;\n      }\n    }\n\n    DataTable.prototype.show = function() {\n      var i, _i, _ref, _results;\n      console.log(\"DataTable: rows: \" + (this.nrow()) + \" columns: \" + (this.ncol()));\n      _results = [];\n      for (i = _i = 0, _ref = this.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        _results.push(console.log(this.record(i)));\n      }\n      return _results;\n    };\n\n    DataTable.fromRecords = function(records, union) {\n      var allkeys, key, rec, vars, _i, _j, _k, _len, _len1, _len2;\n      if (union == null) {\n        union = true;\n      }\n      if (!_.isArray(records)) {\n        throw new Error(\"DataTable.fromRecords: 'records' arguemnt must be an array of records.\");\n      }\n      allkeys = _.uniq(_.flatten(_.map(records, function(rec) {\n        return _.keys(rec);\n      })));\n      vars = {};\n      for (_i = 0, _len = allkeys.length; _i < _len; _i++) {\n        key = allkeys[_i];\n        vars[key] = [];\n      }\n      for (_j = 0, _len1 = records.length; _j < _len1; _j++) {\n        rec = records[_j];\n        for (_k = 0, _len2 = allkeys.length; _k < _len2; _k++) {\n          key = allkeys[_k];\n          if (rec[key] != null) {\n            vars[key].push(rec[key]);\n          } else {\n            vars[key].push(null);\n          }\n        }\n      }\n      return new DataTable(vars);\n    };\n\n    DataTable.build = function(vars) {\n      if (vars == null) {\n        vars = {};\n      }\n      return Object.seal(new DataTable(vars));\n    };\n\n    DataTable.rbind = function(tab1, tab2, union) {\n      var col1, col2, keys1, keys2, name, out, sharedKeys, _i, _len;\n      if (union == null) {\n        union = false;\n      }\n      keys1 = _.keys(tab1);\n      keys2 = _.keys(tab2);\n      sharedKeys = union ? _.union(keys1, keys2) : _.intersection(keys1, keys2);\n      out = {};\n      for (_i = 0, _len = sharedKeys.length; _i < _len; _i++) {\n        name = sharedKeys[_i];\n        col1 = tab1[name];\n        col2 = tab2[name];\n        if (!col1) {\n          col1 = utils.repLen([null], tab1.nrow());\n        }\n        if (!col2) {\n          col2 = utils.repLen([null], tab2.nrow());\n        }\n        out[name] = col1.concat(col2);\n      }\n      return new DataTable(out);\n    };\n\n    DataTable.cbind = function(tab1, tab2) {\n      var diffkeys, key, out, _i, _len;\n      if (tab1.nrow() !== tab2.nrow()) {\n        throw \"cbind requires arguments to have same number of rows\";\n      }\n      out = _.cloneDeep(tab1);\n      diffkeys = _.difference(_.keys(tab2), _.keys(tab1));\n      for (_i = 0, _len = diffkeys.length; _i < _len; _i++) {\n        key = diffkeys[_i];\n        out[key] = tab2[key];\n      }\n      return out;\n    };\n\n    DataTable.expand = function(vars, unique, nreps) {\n      var d, i, key, name, nargs, nm, nx, orep, out, r1, r2, r3, repfac, value, _i, _j, _results;\n      if (vars == null) {\n        vars = {};\n      }\n      if (unique == null) {\n        unique = true;\n      }\n      if (nreps == null) {\n        nreps = 1;\n      }\n      if (unique) {\n        out = {};\n        for (name in vars) {\n          value = vars[name];\n          out[name] = _.unique(value);\n        }\n        vars = out;\n      }\n      nargs = _.size(vars);\n      nm = _.keys(vars);\n      repfac = 1;\n      d = _.map(vars, function(x) {\n        return x.length;\n      });\n      orep = _.reduce(d, function(x, acc) {\n        return x * acc;\n      });\n      out = {};\n      for (key in vars) {\n        value = vars[key];\n        nx = value.length;\n        orep = orep / nx;\n        r1 = utils.rep([repfac], nx);\n        r2 = utils.rep((function() {\n          _results = [];\n          for (var _i = 0; 0 <= nx ? _i < nx : _i > nx; 0 <= nx ? _i++ : _i--){ _results.push(_i); }\n          return _results;\n        }).apply(this), r1);\n        r3 = utils.rep(r2, orep);\n        out[key] = (function() {\n          var _j, _len, _results1;\n          _results1 = [];\n          for (_j = 0, _len = r3.length; _j < _len; _j++) {\n            i = r3[_j];\n            _results1.push(value[i]);\n          }\n          return _results1;\n        })();\n        repfac = repfac * nx;\n      }\n      if (nreps > 1) {\n        for (i = _j = 1; 1 <= nreps ? _j <= nreps : _j >= nreps; i = 1 <= nreps ? ++_j : --_j) {\n          out = _.merge(out, out);\n        }\n      }\n      return new DataTable(out);\n    };\n\n    DataTable.prototype.dropColumn = function(colname) {\n      var key, out, value;\n      out = {};\n      for (key in this) {\n        if (!__hasProp.call(this, key)) continue;\n        value = this[key];\n        if (key !== colname) {\n          out[key] = _.clone(value);\n        }\n      }\n      return new DataTable(out);\n    };\n\n    DataTable.prototype.subset = function(key, filter) {\n      var el, i, keep, name, out, val, value;\n      keep = (function() {\n        var _i, _len, _ref, _results;\n        _ref = this[key];\n        _results = [];\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          val = _ref[_i];\n          if (filter(val)) {\n            _results.push(true);\n          } else {\n            _results.push(false);\n          }\n        }\n        return _results;\n      }).call(this);\n      out = {};\n      for (name in this) {\n        if (!__hasProp.call(this, name)) continue;\n        value = this[name];\n        out[name] = (function() {\n          var _i, _len, _results;\n          _results = [];\n          for (i = _i = 0, _len = value.length; _i < _len; i = ++_i) {\n            el = value[i];\n            if (keep[i] === true) {\n              _results.push(el);\n            }\n          }\n          return _results;\n        })();\n      }\n      return new DataTable(out);\n    };\n\n    DataTable.prototype.whichRow = function(where) {\n      var count, i, key, nkeys, out, rec, value, _i, _ref;\n      out = [];\n      nkeys = _.keys(where).length;\n      for (i = _i = 0, _ref = this.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        rec = this.record(i);\n        count = utils.asArray((function() {\n          var _results;\n          _results = [];\n          for (key in where) {\n            value = where[key];\n            _results.push(rec[key] === value);\n          }\n          return _results;\n        })());\n        count = _.map(count, function(x) {\n          if (x) {\n            return 1;\n          } else {\n            return 0;\n          }\n        });\n        count = _.reduce(utils.asArray(count), function(sum, num) {\n          return sum + num;\n        });\n        if (count === nkeys) {\n          out.push(i);\n        }\n      }\n      return out;\n    };\n\n    DataTable.prototype.select = function(where) {\n      var count, i, key, nkeys, out, rec, value, _i, _ref;\n      out = [];\n      nkeys = _.keys(where).length;\n      for (i = _i = 0, _ref = this.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        rec = this.record(i);\n        count = utils.asArray((function() {\n          var _results;\n          _results = [];\n          for (key in where) {\n            value = where[key];\n            _results.push(rec[key] === value);\n          }\n          return _results;\n        })());\n        count = _.map(count, function(x) {\n          if (x) {\n            return 1;\n          } else {\n            return 0;\n          }\n        });\n        count = _.reduce(utils.asArray(count), function(sum, num) {\n          return sum + num;\n        });\n        if (count === nkeys) {\n          out.push(rec);\n        }\n      }\n      return out;\n    };\n\n    DataTable.prototype.nrow = function() {\n      var lens, name, value;\n      lens = (function() {\n        var _results;\n        _results = [];\n        for (name in this) {\n          if (!__hasProp.call(this, name)) continue;\n          value = this[name];\n          _results.push(value.length);\n        }\n        return _results;\n      }).call(this);\n      return _.max(lens);\n    };\n\n    DataTable.prototype.ncol = function() {\n      return Object.keys(this).length;\n    };\n\n    DataTable.prototype.colnames = function() {\n      return Object.keys(this);\n    };\n\n    DataTable.prototype.toRecordArray = function() {\n      var i, rec, _i, _ref;\n      rec = [];\n      for (i = _i = 0, _ref = this.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        rec.push(this.record(i));\n      }\n      return rec;\n    };\n\n    DataTable.prototype.record = function(index) {\n      var name, rec, value;\n      rec = {};\n      for (name in this) {\n        if (!__hasProp.call(this, name)) continue;\n        value = this[name];\n        rec[name] = value[index];\n      }\n      return rec;\n    };\n\n    DataTable.prototype.replicate = function(nreps) {\n      var name, out, value;\n      out = {};\n      for (name in this) {\n        if (!__hasProp.call(this, name)) continue;\n        value = this[name];\n        out[name] = _.flatten(_.times(nreps, (function(_this) {\n          return function(n) {\n            return value;\n          };\n        })(this)));\n      }\n      return new DataTable(out);\n    };\n\n    DataTable.prototype.bindcol = function(name, column) {\n      if (column.length !== this.nrow()) {\n        throw \"new column must be same length as existing DataTable object: column.length is  \" + column.length + \" and this.length is  \" + (this.nrow());\n      }\n      this[name] = column;\n      return this;\n    };\n\n    DataTable.prototype.bindrow = function(rows) {\n      var key, record, value, _i, _len;\n      if (!_.isArray(rows)) {\n        rows = [rows];\n      }\n      for (_i = 0, _len = rows.length; _i < _len; _i++) {\n        record = rows[_i];\n        console.log(record);\n        for (key in record) {\n          if (!__hasProp.call(record, key)) continue;\n          value = record[key];\n          if (!_.has(this, key)) {\n            throw new Error(\"DataTable has no field named \" + key);\n          } else {\n            this[key].push(value);\n          }\n        }\n      }\n      return this;\n    };\n\n    DataTable.prototype.shuffle = function() {\n      var i, ind, nr, out, sind, _i, _j, _results;\n      nr = this.nrow();\n      ind = (function() {\n        _results = [];\n        for (var _i = 0; 0 <= nr ? _i < nr : _i > nr; 0 <= nr ? _i++ : _i--){ _results.push(_i); }\n        return _results;\n      }).apply(this);\n      sind = _.shuffle(ind);\n      out = [];\n      for (i = _j = 0; 0 <= nr ? _j < nr : _j > nr; i = 0 <= nr ? ++_j : --_j) {\n        out[i] = this.record(sind[i]);\n      }\n      return DataTable.fromRecords(out);\n    };\n\n    return DataTable;\n\n  })();\n\n  exports.DataTable = DataTable;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/utils.js":{"id":5,"canonicalName":"src/utils.js","code":"(function () {\n    var factorial, getTimestamp, swap, _, _ref, _ref1, __slice = [].slice;\n    _ = require('16', module);\n    if (typeof window !== 'undefined' && window !== null ? (_ref = window.performance) != null ? _ref.now : void 0 : void 0) {\n        getTimestamp = function () {\n            return window.performance.now();\n        };\n    } else if (typeof window !== 'undefined' && window !== null ? (_ref1 = window.performance) != null ? _ref1.webkitNow : void 0 : void 0) {\n        getTimestamp = function () {\n            return window.performance.webkitNow();\n        };\n    } else {\n        getTimestamp = function () {\n            return new Date().getTime();\n        };\n    }\n    exports.getTimestamp = getTimestamp;\n    this.browserBackDisabled = false;\n    exports.disableBrowserBack = function () {\n        var rx;\n        if (!this.browserBackDisabled) {\n            rx = /INPUT|SELECT|TEXTAREA/i;\n            this.browserBackDisabled = true;\n            return $(document).bind('keydown keypress', function (e) {\n                if (e.which === 8) {\n                    if (!rx.test(e.target.tagName) || e.target.disabled || e.target.readOnly) {\n                        return e.preventDefault();\n                    }\n                }\n            });\n        }\n    };\n    exports.module = function (name) {\n        return global[name] = global[name] || {};\n    };\n    exports.asArray = function (value) {\n        if (_.isArray(value)) {\n            return value;\n        } else if (_.isNumber(value) || _.isBoolean(value)) {\n            return [value];\n        } else {\n            return _.toArray(value);\n        }\n    };\n    swap = function (arr, a, b) {\n        var temp;\n        temp = arr[a];\n        arr[a] = arr[b];\n        return arr[b] = temp;\n    };\n    factorial = function (n) {\n        var i, val;\n        val = 1;\n        i = 1;\n        while (i < n) {\n            val *= i;\n            i++;\n        }\n        return val;\n    };\n    exports.permute = function (perm, maxlen) {\n        var i, inc, j, out, total;\n        if (maxlen == null) {\n            maxlen = 1000;\n        }\n        console.log('maxlen', maxlen);\n        total = factorial(perm.length);\n        console.log('total', total);\n        j = 0;\n        i = 0;\n        inc = 1;\n        out = [];\n        maxlen = maxlen - 1;\n        while (j < total && out.length < maxlen) {\n            console.log('j', j);\n            while (i < perm.length - 1 && i >= 0 && out.length < maxlen) {\n                out.push(perm.slice(0));\n                swap(perm, i, i + 1);\n                i += inc;\n            }\n            out.push(perm.slice(0));\n            if (inc === 1) {\n                swap(perm, 0, 1);\n            } else {\n                swap(perm, perm.length - 1, perm.length - 2);\n            }\n            j++;\n            inc *= -1;\n            i += inc;\n        }\n        return out;\n    };\n    exports.rep = function (vec, times) {\n        var el, i, j, out;\n        if (!(times instanceof Array)) {\n            times = [times];\n        }\n        if (times.length !== 1 && vec.length !== times.length) {\n            throw 'vec.length must equal times.length or times.length must be 1';\n        }\n        if (vec.length === times.length) {\n            out = function () {\n                var _i, _len, _results;\n                _results = [];\n                for (i = _i = 0, _len = vec.length; _i < _len; i = ++_i) {\n                    el = vec[i];\n                    _results.push(function () {\n                        var _j, _ref2, _results1;\n                        _results1 = [];\n                        for (j = _j = 1, _ref2 = times[i]; 1 <= _ref2 ? _j <= _ref2 : _j >= _ref2; j = 1 <= _ref2 ? ++_j : --_j) {\n                            _results1.push(el);\n                        }\n                        return _results1;\n                    }());\n                }\n                return _results;\n            }();\n            return _.flatten(out);\n        } else {\n            out = _.times(times[0], function (_this) {\n                return function (n) {\n                    return vec;\n                };\n            }(this));\n            return _.flatten(out);\n        }\n    };\n    exports.repLen = function (vec, length) {\n        var i, _i, _results;\n        if (length < 1) {\n            throw 'repLen: length must be greater than or equal to 1';\n        }\n        _results = [];\n        for (i = _i = 0; 0 <= length ? _i < length : _i > length; i = 0 <= length ? ++_i : --_i) {\n            _results.push(vec[i % vec.length]);\n        }\n        return _results;\n    };\n    exports.sample = function (elements, n, replace) {\n        var i, _i, _results;\n        if (replace == null) {\n            replace = false;\n        }\n        if (n > elements.length && !replace) {\n            throw 'cannot take sample larger than the number of elements when \\'replace\\' argument is false';\n        }\n        if (!replace) {\n            return _.shuffle(elements).slice(0, n);\n        } else {\n            _results = [];\n            for (i = _i = 0; 0 <= n ? _i < n : _i > n; i = 0 <= n ? ++_i : --_i) {\n                _results.push(elements[Math.floor(Math.random() * elements.length)]);\n            }\n            return _results;\n        }\n    };\n    exports.oneOf = function (elements) {\n        return elements[Math.floor(Math.random() * elements.length)];\n    };\n    exports.inSet = function () {\n        var set;\n        set = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n        set = _.unique(_.flatten(set));\n        return function (a) {\n            return _.contains(set, a);\n        };\n    };\n    exports.doTimer = function (length, oncomplete) {\n        var instance, start;\n        start = getTimestamp();\n        instance = function () {\n            var diff, half;\n            diff = getTimestamp() - start;\n            if (diff >= length) {\n                return oncomplete(diff);\n            } else {\n                half = Math.max((length - diff) / 2, 1);\n                if (half < 20) {\n                    half = 1;\n                }\n                return setTimeout(instance, half);\n            }\n        };\n        return setTimeout(instance, 1);\n    };\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/utils.js\"],\"names\":[\"factorial\",\"getTimestamp\",\"swap\",\"_\",\"_ref\",\"_ref1\",\"__slice\",\"slice\",\"require\",\"window\",\"performance\",\"now\",\"webkitNow\",\"Date\",\"getTime\",\"exports\",\"browserBackDisabled\",\"disableBrowserBack\",\"rx\",\"$\",\"document\",\"bind\",\"e\",\"which\",\"test\",\"target\",\"tagName\",\"disabled\",\"readOnly\",\"preventDefault\",\"module\",\"name\",\"global\",\"asArray\",\"value\",\"isArray\",\"isNumber\",\"isBoolean\",\"toArray\",\"arr\",\"a\",\"b\",\"temp\",\"n\",\"i\",\"val\",\"permute\",\"perm\",\"maxlen\",\"inc\",\"j\",\"out\",\"total\",\"console\",\"log\",\"length\",\"push\",\"rep\",\"vec\",\"times\",\"el\",\"Array\",\"_i\",\"_len\",\"_results\",\"_j\",\"_ref2\",\"_results1\",\"flatten\",\"_this\",\"repLen\",\"sample\",\"elements\",\"replace\",\"shuffle\",\"Math\",\"floor\",\"random\",\"oneOf\",\"inSet\",\"set\",\"arguments\",\"call\",\"unique\",\"contains\",\"doTimer\",\"oncomplete\",\"instance\",\"start\",\"diff\",\"half\",\"max\",\"setTimeout\"],\"mappings\":\"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\"}","lineCount":186,"mtime":1393244976000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.7.1\n(function() {\n  var factorial, getTimestamp, swap, _, _ref, _ref1,\n    __slice = [].slice;\n\n  _ = require('lodash');\n\n  if (typeof window !== \"undefined\" && window !== null ? (_ref = window.performance) != null ? _ref.now : void 0 : void 0) {\n    getTimestamp = function() {\n      return window.performance.now();\n    };\n  } else if (typeof window !== \"undefined\" && window !== null ? (_ref1 = window.performance) != null ? _ref1.webkitNow : void 0 : void 0) {\n    getTimestamp = function() {\n      return window.performance.webkitNow();\n    };\n  } else {\n    getTimestamp = function() {\n      return new Date().getTime();\n    };\n  }\n\n  exports.getTimestamp = getTimestamp;\n\n  this.browserBackDisabled = false;\n\n  exports.disableBrowserBack = function() {\n    var rx;\n    if (!this.browserBackDisabled) {\n      rx = /INPUT|SELECT|TEXTAREA/i;\n      this.browserBackDisabled = true;\n      return $(document).bind(\"keydown keypress\", function(e) {\n        if (e.which === 8) {\n          if (!rx.test(e.target.tagName) || e.target.disabled || e.target.readOnly) {\n            return e.preventDefault();\n          }\n        }\n      });\n    }\n  };\n\n  exports.module = function(name) {\n    return global[name] = global[name] || {};\n  };\n\n  exports.asArray = function(value) {\n    if (_.isArray(value)) {\n      return value;\n    } else if (_.isNumber(value) || _.isBoolean(value)) {\n      return [value];\n    } else {\n      return _.toArray(value);\n    }\n  };\n\n  swap = function(arr, a, b) {\n    var temp;\n    temp = arr[a];\n    arr[a] = arr[b];\n    return arr[b] = temp;\n  };\n\n  factorial = function(n) {\n    var i, val;\n    val = 1;\n    i = 1;\n    while (i < n) {\n      val *= i;\n      i++;\n    }\n    return val;\n  };\n\n  exports.permute = function(perm, maxlen) {\n    var i, inc, j, out, total;\n    if (maxlen == null) {\n      maxlen = 1000;\n    }\n    console.log(\"maxlen\", maxlen);\n    total = factorial(perm.length);\n    console.log(\"total\", total);\n    j = 0;\n    i = 0;\n    inc = 1;\n    out = [];\n    maxlen = maxlen - 1;\n    while (j < total && out.length < maxlen) {\n      console.log(\"j\", j);\n      while (i < perm.length - 1 && i >= 0 && out.length < maxlen) {\n        out.push(perm.slice(0));\n        swap(perm, i, i + 1);\n        i += inc;\n      }\n      out.push(perm.slice(0));\n      if (inc === 1) {\n        swap(perm, 0, 1);\n      } else {\n        swap(perm, perm.length - 1, perm.length - 2);\n      }\n      j++;\n      inc *= -1;\n      i += inc;\n    }\n    return out;\n  };\n\n\n  /*\n  exports.permute = (input) ->\n    input = _.unique(input)\n    permArr = []\n    usedChars = []\n  \n    maxlen = _.min([input.length, maxlen])\n  \n    exports.main = main = (input) ->\n  \n      for i in [0...input.length]\n        ch = input.splice(i, 1)[0]\n        usedChars.push(ch)\n        if (input.length == 0)\n          permArr.push(usedChars.slice())\n  \n        main(input)\n        input.splice(i, 0, ch)\n        usedChars.pop()\n  \n      permArr\n  \n    main(input)\n   */\n\n  exports.rep = function(vec, times) {\n    var el, i, j, out;\n    if (!(times instanceof Array)) {\n      times = [times];\n    }\n    if (times.length !== 1 && vec.length !== times.length) {\n      throw \"vec.length must equal times.length or times.length must be 1\";\n    }\n    if (vec.length === times.length) {\n      out = (function() {\n        var _i, _len, _results;\n        _results = [];\n        for (i = _i = 0, _len = vec.length; _i < _len; i = ++_i) {\n          el = vec[i];\n          _results.push((function() {\n            var _j, _ref2, _results1;\n            _results1 = [];\n            for (j = _j = 1, _ref2 = times[i]; 1 <= _ref2 ? _j <= _ref2 : _j >= _ref2; j = 1 <= _ref2 ? ++_j : --_j) {\n              _results1.push(el);\n            }\n            return _results1;\n          })());\n        }\n        return _results;\n      })();\n      return _.flatten(out);\n    } else {\n      out = _.times(times[0], (function(_this) {\n        return function(n) {\n          return vec;\n        };\n      })(this));\n      return _.flatten(out);\n    }\n  };\n\n  exports.repLen = function(vec, length) {\n    var i, _i, _results;\n    if (length < 1) {\n      throw \"repLen: length must be greater than or equal to 1\";\n    }\n    _results = [];\n    for (i = _i = 0; 0 <= length ? _i < length : _i > length; i = 0 <= length ? ++_i : --_i) {\n      _results.push(vec[i % vec.length]);\n    }\n    return _results;\n  };\n\n  exports.sample = function(elements, n, replace) {\n    var i, _i, _results;\n    if (replace == null) {\n      replace = false;\n    }\n    if (n > elements.length && !replace) {\n      throw \"cannot take sample larger than the number of elements when 'replace' argument is false\";\n    }\n    if (!replace) {\n      return _.shuffle(elements).slice(0, n);\n    } else {\n      _results = [];\n      for (i = _i = 0; 0 <= n ? _i < n : _i > n; i = 0 <= n ? ++_i : --_i) {\n        _results.push(elements[Math.floor(Math.random() * elements.length)]);\n      }\n      return _results;\n    }\n  };\n\n  exports.oneOf = function(elements) {\n    return elements[Math.floor(Math.random() * elements.length)];\n  };\n\n  exports.inSet = function() {\n    var set;\n    set = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n    set = _.unique(_.flatten(set));\n    return function(a) {\n      return _.contains(set, a);\n    };\n  };\n\n  exports.doTimer = function(length, oncomplete) {\n    var instance, start;\n    start = getTimestamp();\n    instance = function() {\n      var diff, half;\n      diff = getTimestamp() - start;\n      if (diff >= length) {\n        return oncomplete(diff);\n      } else {\n        half = Math.max((length - diff) / 2, 1);\n        if (half < 20) {\n          half = 1;\n        }\n        return setTimeout(instance, half);\n      }\n    };\n    return setTimeout(instance, 1);\n  };\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/node_modules/taffydb/taffy.js":{"id":21,"canonicalName":"node_modules/taffydb/taffy.js","code":"var TAFFY, exports, T;\n(function () {\n    'use strict';\n    var typeList, makeTest, idx, typeKey, version, TC, idpad, cmax, API, protectJSON, each, eachin, isIndexable, returnFilter, runFilters, numcharsplit, orderByCol, run, intersection, filter, makeCid, safeForJson, isRegexp;\n    ;\n    if (!TAFFY) {\n        version = '2.7';\n        TC = 1;\n        idpad = '000000';\n        cmax = 1000;\n        API = {};\n        protectJSON = function (t) {\n            if (TAFFY.isArray(t) || TAFFY.isObject(t)) {\n                return t;\n            } else {\n                return JSON.parse(t);\n            }\n        };\n        intersection = function (array1, array2) {\n            return filter(array1, function (item) {\n                return array2.indexOf(item) >= 0;\n            });\n        };\n        filter = function (obj, iterator, context) {\n            var results = [];\n            if (obj == null)\n                return results;\n            if (Array.prototype.filter && obj.filter === Array.prototype.filter)\n                return obj.filter(iterator, context);\n            each(obj, function (value, index, list) {\n                if (iterator.call(context, value, index, list))\n                    results[results.length] = value;\n            });\n            return results;\n        };\n        isRegexp = function (aObj) {\n            return Object.prototype.toString.call(aObj) === '[object RegExp]';\n        };\n        safeForJson = function (aObj) {\n            var myResult = T.isArray(aObj) ? [] : T.isObject(aObj) ? {} : null;\n            if (aObj === null)\n                return aObj;\n            for (var i in aObj) {\n                myResult[i] = isRegexp(aObj[i]) ? aObj[i].toString() : T.isArray(aObj[i]) || T.isObject(aObj[i]) ? safeForJson(aObj[i]) : aObj[i];\n            }\n            return myResult;\n        };\n        makeCid = function (aContext) {\n            var myCid = JSON.stringify(aContext);\n            if (myCid.match(/regex/) === null)\n                return myCid;\n            return JSON.stringify(safeForJson(aContext));\n        };\n        each = function (a, fun, u) {\n            var r, i, x, y;\n            if (a && (T.isArray(a) && a.length === 1 || !T.isArray(a))) {\n                fun(T.isArray(a) ? a[0] : a, 0);\n            } else {\n                for (r, i, x = 0, a = T.isArray(a) ? a : [a], y = a.length; x < y; x++) {\n                    i = a[x];\n                    if (!T.isUndefined(i) || (u || false)) {\n                        r = fun(i, x);\n                        if (r === T.EXIT) {\n                            break;\n                        }\n                    }\n                }\n            }\n        };\n        eachin = function (o, fun) {\n            var x = 0, r, i;\n            for (i in o) {\n                if (o.hasOwnProperty(i)) {\n                    r = fun(o[i], i, x++);\n                    if (r === T.EXIT) {\n                        break;\n                    }\n                }\n            }\n        };\n        API.extend = function (m, f) {\n            API[m] = function () {\n                return f.apply(this, arguments);\n            };\n        };\n        isIndexable = function (f) {\n            var i;\n            if (T.isString(f) && /[t][0-9]*[r][0-9]*/i.test(f)) {\n                return true;\n            }\n            if (T.isObject(f) && f.___id && f.___s) {\n                return true;\n            }\n            if (T.isArray(f)) {\n                i = true;\n                each(f, function (r) {\n                    if (!isIndexable(r)) {\n                        i = false;\n                        return TAFFY.EXIT;\n                    }\n                });\n                return i;\n            }\n            return false;\n        };\n        runFilters = function (r, filter) {\n            var match = true;\n            each(filter, function (mf) {\n                switch (T.typeOf(mf)) {\n                case 'function':\n                    if (!mf.apply(r)) {\n                        match = false;\n                        return TAFFY.EXIT;\n                    }\n                    break;\n                case 'array':\n                    match = mf.length === 1 ? runFilters(r, mf[0]) : mf.length === 2 ? runFilters(r, mf[0]) || runFilters(r, mf[1]) : mf.length === 3 ? runFilters(r, mf[0]) || runFilters(r, mf[1]) || runFilters(r, mf[2]) : mf.length === 4 ? runFilters(r, mf[0]) || runFilters(r, mf[1]) || runFilters(r, mf[2]) || runFilters(r, mf[3]) : false;\n                    if (mf.length > 4) {\n                        each(mf, function (f) {\n                            if (runFilters(r, f)) {\n                                match = true;\n                            }\n                        });\n                    }\n                    break;\n                }\n            });\n            return match;\n        };\n        returnFilter = function (f) {\n            var nf = [];\n            if (T.isString(f) && /[t][0-9]*[r][0-9]*/i.test(f)) {\n                f = { ___id: f };\n            }\n            if (T.isArray(f)) {\n                each(f, function (r) {\n                    nf.push(returnFilter(r));\n                });\n                f = function () {\n                    var that = this, match = false;\n                    each(nf, function (f) {\n                        if (runFilters(that, f)) {\n                            match = true;\n                        }\n                    });\n                    return match;\n                };\n                return f;\n            }\n            if (T.isObject(f)) {\n                if (T.isObject(f) && f.___id && f.___s) {\n                    f = { ___id: f.___id };\n                }\n                eachin(f, function (v, i) {\n                    if (!T.isObject(v)) {\n                        v = { 'is': v };\n                    }\n                    eachin(v, function (mtest, s) {\n                        var c = [], looper;\n                        looper = s === 'hasAll' ? function (mtest, func) {\n                            func(mtest);\n                        } : each;\n                        looper(mtest, function (mtest) {\n                            var su = true, f = false, matchFunc;\n                            matchFunc = function () {\n                                var mvalue = this[i], eqeq = '==', bangeq = '!=', eqeqeq = '===', lt = '<', gt = '>', lteq = '<=', gteq = '>=', bangeqeq = '!==', r;\n                                ;\n                                if (typeof mvalue === 'undefined') {\n                                    return false;\n                                }\n                                if (s.indexOf('!') === 0 && s !== bangeq && s !== bangeqeq) {\n                                    su = false;\n                                    s = s.substring(1, s.length);\n                                }\n                                r = s === 'regex' ? mtest.test(mvalue) : s === 'lt' || s === lt ? mvalue < mtest : s === 'gt' || s === gt ? mvalue > mtest : s === 'lte' || s === lteq ? mvalue <= mtest : s === 'gte' || s === gteq ? mvalue >= mtest : s === 'left' ? mvalue.indexOf(mtest) === 0 : s === 'leftnocase' ? mvalue.toLowerCase().indexOf(mtest.toLowerCase()) === 0 : s === 'right' ? mvalue.substring(mvalue.length - mtest.length) === mtest : s === 'rightnocase' ? mvalue.toLowerCase().substring(mvalue.length - mtest.length) === mtest.toLowerCase() : s === 'like' ? mvalue.indexOf(mtest) >= 0 : s === 'likenocase' ? mvalue.toLowerCase().indexOf(mtest.toLowerCase()) >= 0 : s === eqeqeq || s === 'is' ? mvalue === mtest : s === eqeq ? mvalue == mtest : s === bangeqeq ? mvalue !== mtest : s === bangeq ? mvalue != mtest : s === 'isnocase' ? mvalue.toLowerCase ? mvalue.toLowerCase() === mtest.toLowerCase() : mvalue === mtest : s === 'has' ? T.has(mvalue, mtest) : s === 'hasall' ? T.hasAll(mvalue, mtest) : s === 'contains' ? TAFFY.isArray(mvalue) && mvalue.indexOf(mtest) > -1 : s.indexOf('is') === -1 && !TAFFY.isNull(mvalue) && !TAFFY.isUndefined(mvalue) && !TAFFY.isObject(mtest) && !TAFFY.isArray(mtest) ? mtest === mvalue[s] : T[s] && T.isFunction(T[s]) && s.indexOf('is') === 0 ? T[s](mvalue) === mtest : T[s] && T.isFunction(T[s]) ? T[s](mvalue, mtest) : false;\n                                r = r && !su ? false : !r && !su ? true : r;\n                                return r;\n                            };\n                            c.push(matchFunc);\n                        });\n                        if (c.length === 1) {\n                            nf.push(c[0]);\n                        } else {\n                            nf.push(function () {\n                                var that = this, match = false;\n                                each(c, function (f) {\n                                    if (f.apply(that)) {\n                                        match = true;\n                                    }\n                                });\n                                return match;\n                            });\n                        }\n                    });\n                });\n                f = function () {\n                    var that = this, match = true;\n                    match = nf.length === 1 && !nf[0].apply(that) ? false : nf.length === 2 && (!nf[0].apply(that) || !nf[1].apply(that)) ? false : nf.length === 3 && (!nf[0].apply(that) || !nf[1].apply(that) || !nf[2].apply(that)) ? false : nf.length === 4 && (!nf[0].apply(that) || !nf[1].apply(that) || !nf[2].apply(that) || !nf[3].apply(that)) ? false : true;\n                    if (nf.length > 4) {\n                        each(nf, function (f) {\n                            if (!runFilters(that, f)) {\n                                match = false;\n                            }\n                        });\n                    }\n                    return match;\n                };\n                return f;\n            }\n            if (T.isFunction(f)) {\n                return f;\n            }\n        };\n        orderByCol = function (ar, o) {\n            var sortFunc = function (a, b) {\n                var r = 0;\n                T.each(o, function (sd) {\n                    var o, col, dir, c, d;\n                    o = sd.split(' ');\n                    col = o[0];\n                    dir = o.length === 1 ? 'logical' : o[1];\n                    if (dir === 'logical') {\n                        c = numcharsplit(a[col]);\n                        d = numcharsplit(b[col]);\n                        T.each(c.length <= d.length ? c : d, function (x, i) {\n                            if (c[i] < d[i]) {\n                                r = -1;\n                                return TAFFY.EXIT;\n                            } else if (c[i] > d[i]) {\n                                r = 1;\n                                return TAFFY.EXIT;\n                            }\n                        });\n                    } else if (dir === 'logicaldesc') {\n                        c = numcharsplit(a[col]);\n                        d = numcharsplit(b[col]);\n                        T.each(c.length <= d.length ? c : d, function (x, i) {\n                            if (c[i] > d[i]) {\n                                r = -1;\n                                return TAFFY.EXIT;\n                            } else if (c[i] < d[i]) {\n                                r = 1;\n                                return TAFFY.EXIT;\n                            }\n                        });\n                    } else if (dir === 'asec' && a[col] < b[col]) {\n                        r = -1;\n                        return T.EXIT;\n                    } else if (dir === 'asec' && a[col] > b[col]) {\n                        r = 1;\n                        return T.EXIT;\n                    } else if (dir === 'desc' && a[col] > b[col]) {\n                        r = -1;\n                        return T.EXIT;\n                    } else if (dir === 'desc' && a[col] < b[col]) {\n                        r = 1;\n                        return T.EXIT;\n                    }\n                    if (r === 0 && dir === 'logical' && c.length < d.length) {\n                        r = -1;\n                    } else if (r === 0 && dir === 'logical' && c.length > d.length) {\n                        r = 1;\n                    } else if (r === 0 && dir === 'logicaldesc' && c.length > d.length) {\n                        r = -1;\n                    } else if (r === 0 && dir === 'logicaldesc' && c.length < d.length) {\n                        r = 1;\n                    }\n                    if (r !== 0) {\n                        return T.EXIT;\n                    }\n                });\n                return r;\n            };\n            return ar && ar.push ? ar.sort(sortFunc) : ar;\n        };\n        (function () {\n            var cache = {}, cachcounter = 0;\n            numcharsplit = function (thing) {\n                if (cachcounter > cmax) {\n                    cache = {};\n                    cachcounter = 0;\n                }\n                return cache['_' + thing] || function () {\n                    var nthing = String(thing), na = [], rv = '_', rt = '', x, xx, c;\n                    for (x = 0, xx = nthing.length; x < xx; x++) {\n                        c = nthing.charCodeAt(x);\n                        if (c >= 48 && c <= 57 || c === 46) {\n                            if (rt !== 'n') {\n                                rt = 'n';\n                                na.push(rv.toLowerCase());\n                                rv = '';\n                            }\n                            rv = rv + nthing.charAt(x);\n                        } else {\n                            if (rt !== 's') {\n                                rt = 's';\n                                na.push(parseFloat(rv));\n                                rv = '';\n                            }\n                            rv = rv + nthing.charAt(x);\n                        }\n                    }\n                    na.push(rt === 'n' ? parseFloat(rv) : rv.toLowerCase());\n                    na.shift();\n                    cache['_' + thing] = na;\n                    cachcounter++;\n                    return na;\n                }();\n            };\n        }());\n        run = function () {\n            this.context({ results: this.getDBI().query(this.context()) });\n        };\n        API.extend('filter', function () {\n            var nc = TAFFY.mergeObj(this.context(), { run: null }), nq = [];\n            ;\n            each(nc.q, function (v) {\n                nq.push(v);\n            });\n            nc.q = nq;\n            each(arguments, function (f) {\n                nc.q.push(returnFilter(f));\n                nc.filterRaw.push(f);\n            });\n            return this.getroot(nc);\n        });\n        API.extend('order', function (o) {\n            o = o.split(',');\n            var x = [], nc;\n            each(o, function (r) {\n                x.push(r.replace(/^\\s*/, '').replace(/\\s*$/, ''));\n            });\n            nc = TAFFY.mergeObj(this.context(), { sort: null });\n            nc.order = x;\n            return this.getroot(nc);\n        });\n        API.extend('limit', function (n) {\n            var nc = TAFFY.mergeObj(this.context(), {}), limitedresults;\n            ;\n            nc.limit = n;\n            if (nc.run && nc.sort) {\n                limitedresults = [];\n                each(nc.results, function (i, x) {\n                    if (x + 1 > n) {\n                        return TAFFY.EXIT;\n                    }\n                    limitedresults.push(i);\n                });\n                nc.results = limitedresults;\n            }\n            return this.getroot(nc);\n        });\n        API.extend('start', function (n) {\n            var nc = TAFFY.mergeObj(this.context(), {}), limitedresults;\n            ;\n            nc.start = n;\n            if (nc.run && nc.sort && !nc.limit) {\n                limitedresults = [];\n                each(nc.results, function (i, x) {\n                    if (x + 1 > n) {\n                        limitedresults.push(i);\n                    }\n                });\n                nc.results = limitedresults;\n            } else {\n                nc = TAFFY.mergeObj(this.context(), {\n                    run: null,\n                    start: n\n                });\n            }\n            return this.getroot(nc);\n        });\n        API.extend('update', function (arg0, arg1, arg2) {\n            var runEvent = true, o = {}, args = arguments, that;\n            if (TAFFY.isString(arg0) && (arguments.length === 2 || arguments.length === 3)) {\n                o[arg0] = arg1;\n                if (arguments.length === 3) {\n                    runEvent = arg2;\n                }\n            } else {\n                o = arg0;\n                if (args.length === 2) {\n                    runEvent = arg1;\n                }\n            }\n            that = this;\n            run.call(this);\n            each(this.context().results, function (r) {\n                var c = o;\n                if (TAFFY.isFunction(c)) {\n                    c = c.apply(TAFFY.mergeObj(r, {}));\n                } else {\n                    if (T.isFunction(c)) {\n                        c = c(TAFFY.mergeObj(r, {}));\n                    }\n                }\n                if (TAFFY.isObject(c)) {\n                    that.getDBI().update(r.___id, c, runEvent);\n                }\n            });\n            if (this.context().results.length) {\n                this.context({ run: null });\n            }\n            return this;\n        });\n        API.extend('remove', function (runEvent) {\n            var that = this, c = 0;\n            run.call(this);\n            each(this.context().results, function (r) {\n                that.getDBI().remove(r.___id);\n                c++;\n            });\n            if (this.context().results.length) {\n                this.context({ run: null });\n                that.getDBI().removeCommit(runEvent);\n            }\n            return c;\n        });\n        API.extend('count', function () {\n            run.call(this);\n            return this.context().results.length;\n        });\n        API.extend('callback', function (f, delay) {\n            if (f) {\n                var that = this;\n                setTimeout(function () {\n                    run.call(that);\n                    f.call(that.getroot(that.context()));\n                }, delay || 0);\n            }\n            return null;\n        });\n        API.extend('get', function () {\n            run.call(this);\n            return this.context().results;\n        });\n        API.extend('stringify', function () {\n            return JSON.stringify(this.get());\n        });\n        API.extend('first', function () {\n            run.call(this);\n            return this.context().results[0] || false;\n        });\n        API.extend('last', function () {\n            run.call(this);\n            return this.context().results[this.context().results.length - 1] || false;\n        });\n        API.extend('sum', function () {\n            var total = 0, that = this;\n            run.call(that);\n            each(arguments, function (c) {\n                each(that.context().results, function (r) {\n                    total = total + (r[c] || 0);\n                });\n            });\n            return total;\n        });\n        API.extend('min', function (c) {\n            var lowest = null;\n            run.call(this);\n            each(this.context().results, function (r) {\n                if (lowest === null || r[c] < lowest) {\n                    lowest = r[c];\n                }\n            });\n            return lowest;\n        });\n        (function () {\n            var innerJoinFunction = function () {\n                    var fnCompareList, fnCombineRow, fnMain;\n                    fnCompareList = function (left_row, right_row, arg_list) {\n                        var data_lt, data_rt, op_code, error;\n                        if (arg_list.length === 2) {\n                            data_lt = left_row[arg_list[0]];\n                            op_code = '===';\n                            data_rt = right_row[arg_list[1]];\n                        } else {\n                            data_lt = left_row[arg_list[0]];\n                            op_code = arg_list[1];\n                            data_rt = right_row[arg_list[2]];\n                        }\n                        switch (op_code) {\n                        case '===':\n                            return data_lt === data_rt;\n                        case '!==':\n                            return data_lt !== data_rt;\n                        case '<':\n                            return data_lt < data_rt;\n                        case '>':\n                            return data_lt > data_rt;\n                        case '<=':\n                            return data_lt <= data_rt;\n                        case '>=':\n                            return data_lt >= data_rt;\n                        case '==':\n                            return data_lt == data_rt;\n                        case '!=':\n                            return data_lt != data_rt;\n                        default:\n                            throw String(op_code) + ' is not supported';\n                        }\n                    };\n                    fnCombineRow = function (left_row, right_row) {\n                        var out_map = {}, i, prefix;\n                        for (i in left_row) {\n                            if (left_row.hasOwnProperty(i)) {\n                                out_map[i] = left_row[i];\n                            }\n                        }\n                        for (i in right_row) {\n                            if (right_row.hasOwnProperty(i) && i !== '___id' && i !== '___s') {\n                                prefix = !TAFFY.isUndefined(out_map[i]) ? 'right_' : '';\n                                out_map[prefix + String(i)] = right_row[i];\n                            }\n                        }\n                        return out_map;\n                    };\n                    fnMain = function (table) {\n                        var right_table, i, arg_list = arguments, arg_length = arg_list.length, result_list = [];\n                        ;\n                        if (typeof table.filter !== 'function') {\n                            if (table.TAFFY) {\n                                right_table = table();\n                            } else {\n                                throw 'TAFFY DB or result not supplied';\n                            }\n                        } else {\n                            right_table = table;\n                        }\n                        this.context({ results: this.getDBI().query(this.context()) });\n                        TAFFY.each(this.context().results, function (left_row) {\n                            right_table.each(function (right_row) {\n                                var arg_data, is_ok = true;\n                                CONDITION:\n                                    for (i = 1; i < arg_length; i++) {\n                                        arg_data = arg_list[i];\n                                        if (typeof arg_data === 'function') {\n                                            is_ok = arg_data(left_row, right_row);\n                                        } else if (typeof arg_data === 'object' && arg_data.length) {\n                                            is_ok = fnCompareList(left_row, right_row, arg_data);\n                                        } else {\n                                            is_ok = false;\n                                        }\n                                        if (!is_ok) {\n                                            break CONDITION;\n                                        }\n                                    }\n                                if (is_ok) {\n                                    result_list.push(fnCombineRow(left_row, right_row));\n                                }\n                            });\n                        });\n                        return TAFFY(result_list)();\n                    };\n                    return fnMain;\n                }();\n            API.extend('join', innerJoinFunction);\n        }());\n        API.extend('max', function (c) {\n            var highest = null;\n            run.call(this);\n            each(this.context().results, function (r) {\n                if (highest === null || r[c] > highest) {\n                    highest = r[c];\n                }\n            });\n            return highest;\n        });\n        API.extend('select', function () {\n            var ra = [], args = arguments;\n            run.call(this);\n            if (arguments.length === 1) {\n                each(this.context().results, function (r) {\n                    ra.push(r[args[0]]);\n                });\n            } else {\n                each(this.context().results, function (r) {\n                    var row = [];\n                    each(args, function (c) {\n                        row.push(r[c]);\n                    });\n                    ra.push(row);\n                });\n            }\n            return ra;\n        });\n        API.extend('distinct', function () {\n            var ra = [], args = arguments;\n            run.call(this);\n            if (arguments.length === 1) {\n                each(this.context().results, function (r) {\n                    var v = r[args[0]], dup = false;\n                    each(ra, function (d) {\n                        if (v === d) {\n                            dup = true;\n                            return TAFFY.EXIT;\n                        }\n                    });\n                    if (!dup) {\n                        ra.push(v);\n                    }\n                });\n            } else {\n                each(this.context().results, function (r) {\n                    var row = [], dup = false;\n                    each(args, function (c) {\n                        row.push(r[c]);\n                    });\n                    each(ra, function (d) {\n                        var ldup = true;\n                        each(args, function (c, i) {\n                            if (row[i] !== d[i]) {\n                                ldup = false;\n                                return TAFFY.EXIT;\n                            }\n                        });\n                        if (ldup) {\n                            dup = true;\n                            return TAFFY.EXIT;\n                        }\n                    });\n                    if (!dup) {\n                        ra.push(row);\n                    }\n                });\n            }\n            return ra;\n        });\n        API.extend('supplant', function (template, returnarray) {\n            var ra = [];\n            run.call(this);\n            each(this.context().results, function (r) {\n                ra.push(template.replace(/\\{([^\\{\\}]*)\\}/g, function (a, b) {\n                    var v = r[b];\n                    return typeof v === 'string' || typeof v === 'number' ? v : a;\n                }));\n            });\n            return !returnarray ? ra.join('') : ra;\n        });\n        API.extend('each', function (m) {\n            run.call(this);\n            each(this.context().results, m);\n            return this;\n        });\n        API.extend('map', function (m) {\n            var ra = [];\n            run.call(this);\n            each(this.context().results, function (r) {\n                ra.push(m(r));\n            });\n            return ra;\n        });\n        T = function (d) {\n            var TOb = [], ID = {}, RC = 1, settings = {\n                    template: false,\n                    onInsert: false,\n                    onUpdate: false,\n                    onRemove: false,\n                    onDBChange: false,\n                    storageName: false,\n                    forcePropertyCase: null,\n                    cacheSize: 100,\n                    name: ''\n                }, dm = new Date(), CacheCount = 0, CacheClear = 0, Cache = {}, DBI, runIndexes, root;\n            ;\n            runIndexes = function (indexes) {\n                var records = [], UniqueEnforce = false;\n                if (indexes.length === 0) {\n                    return TOb;\n                }\n                each(indexes, function (f) {\n                    if (T.isString(f) && /[t][0-9]*[r][0-9]*/i.test(f) && TOb[ID[f]]) {\n                        records.push(TOb[ID[f]]);\n                        UniqueEnforce = true;\n                    }\n                    if (T.isObject(f) && f.___id && f.___s && TOb[ID[f.___id]]) {\n                        records.push(TOb[ID[f.___id]]);\n                        UniqueEnforce = true;\n                    }\n                    if (T.isArray(f)) {\n                        each(f, function (r) {\n                            each(runIndexes(r), function (rr) {\n                                records.push(rr);\n                            });\n                        });\n                    }\n                });\n                if (UniqueEnforce && records.length > 1) {\n                    records = [];\n                }\n                return records;\n            };\n            DBI = {\n                dm: function (nd) {\n                    if (nd) {\n                        dm = nd;\n                        Cache = {};\n                        CacheCount = 0;\n                        CacheClear = 0;\n                    }\n                    if (settings.onDBChange) {\n                        setTimeout(function () {\n                            settings.onDBChange.call(TOb);\n                        }, 0);\n                    }\n                    if (settings.storageName) {\n                        setTimeout(function () {\n                            localStorage.setItem('taffy_' + settings.storageName, JSON.stringify(TOb));\n                        });\n                    }\n                    return dm;\n                },\n                insert: function (i, runEvent) {\n                    var columns = [], records = [], input = protectJSON(i);\n                    ;\n                    each(input, function (v, i) {\n                        var nv, o;\n                        if (T.isArray(v) && i === 0) {\n                            each(v, function (av) {\n                                columns.push(settings.forcePropertyCase === 'lower' ? av.toLowerCase() : settings.forcePropertyCase === 'upper' ? av.toUpperCase() : av);\n                            });\n                            return true;\n                        } else if (T.isArray(v)) {\n                            nv = {};\n                            each(v, function (av, ai) {\n                                nv[columns[ai]] = av;\n                            });\n                            v = nv;\n                        } else if (T.isObject(v) && settings.forcePropertyCase) {\n                            o = {};\n                            eachin(v, function (av, ai) {\n                                o[settings.forcePropertyCase === 'lower' ? ai.toLowerCase() : settings.forcePropertyCase === 'upper' ? ai.toUpperCase() : ai] = v[ai];\n                            });\n                            v = o;\n                        }\n                        RC++;\n                        v.___id = 'T' + String(idpad + TC).slice(-6) + 'R' + String(idpad + RC).slice(-6);\n                        v.___s = true;\n                        records.push(v.___id);\n                        if (settings.template) {\n                            v = T.mergeObj(settings.template, v);\n                        }\n                        TOb.push(v);\n                        ID[v.___id] = TOb.length - 1;\n                        if (settings.onInsert && (runEvent || TAFFY.isUndefined(runEvent))) {\n                            settings.onInsert.call(v);\n                        }\n                        DBI.dm(new Date());\n                    });\n                    return root(records);\n                },\n                sort: function (o) {\n                    TOb = orderByCol(TOb, o.split(','));\n                    ID = {};\n                    each(TOb, function (r, i) {\n                        ID[r.___id] = i;\n                    });\n                    DBI.dm(new Date());\n                    return true;\n                },\n                update: function (id, changes, runEvent) {\n                    var nc = {}, or, nr, tc, hasChange;\n                    if (settings.forcePropertyCase) {\n                        eachin(changes, function (v, p) {\n                            nc[settings.forcePropertyCase === 'lower' ? p.toLowerCase() : settings.forcePropertyCase === 'upper' ? p.toUpperCase() : p] = v;\n                        });\n                        changes = nc;\n                    }\n                    or = TOb[ID[id]];\n                    nr = T.mergeObj(or, changes);\n                    tc = {};\n                    hasChange = false;\n                    eachin(nr, function (v, i) {\n                        if (TAFFY.isUndefined(or[i]) || or[i] !== v) {\n                            tc[i] = v;\n                            hasChange = true;\n                        }\n                    });\n                    if (hasChange) {\n                        if (settings.onUpdate && (runEvent || TAFFY.isUndefined(runEvent))) {\n                            settings.onUpdate.call(nr, TOb[ID[id]], tc);\n                        }\n                        TOb[ID[id]] = nr;\n                        DBI.dm(new Date());\n                    }\n                },\n                remove: function (id) {\n                    TOb[ID[id]].___s = false;\n                },\n                removeCommit: function (runEvent) {\n                    var x;\n                    for (x = TOb.length - 1; x > -1; x--) {\n                        if (!TOb[x].___s) {\n                            if (settings.onRemove && (runEvent || TAFFY.isUndefined(runEvent))) {\n                                settings.onRemove.call(TOb[x]);\n                            }\n                            ID[TOb[x].___id] = undefined;\n                            TOb.splice(x, 1);\n                        }\n                    }\n                    ID = {};\n                    each(TOb, function (r, i) {\n                        ID[r.___id] = i;\n                    });\n                    DBI.dm(new Date());\n                },\n                query: function (context) {\n                    var returnq, cid, results, indexed, limitq, ni;\n                    if (settings.cacheSize) {\n                        cid = '';\n                        each(context.filterRaw, function (r) {\n                            if (T.isFunction(r)) {\n                                cid = 'nocache';\n                                return TAFFY.EXIT;\n                            }\n                        });\n                        if (cid === '') {\n                            cid = makeCid(T.mergeObj(context, {\n                                q: false,\n                                run: false,\n                                sort: false\n                            }));\n                        }\n                    }\n                    if (!context.results || !context.run || context.run && DBI.dm() > context.run) {\n                        results = [];\n                        if (settings.cacheSize && Cache[cid]) {\n                            Cache[cid].i = CacheCount++;\n                            return Cache[cid].results;\n                        } else {\n                            if (context.q.length === 0 && context.index.length === 0) {\n                                each(TOb, function (r) {\n                                    results.push(r);\n                                });\n                                returnq = results;\n                            } else {\n                                indexed = runIndexes(context.index);\n                                each(indexed, function (r) {\n                                    if (context.q.length === 0 || runFilters(r, context.q)) {\n                                        results.push(r);\n                                    }\n                                });\n                                returnq = results;\n                            }\n                        }\n                    } else {\n                        returnq = context.results;\n                    }\n                    if (context.order.length > 0 && (!context.run || !context.sort)) {\n                        returnq = orderByCol(returnq, context.order);\n                    }\n                    if (returnq.length && (context.limit && context.limit < returnq.length || context.start)) {\n                        limitq = [];\n                        each(returnq, function (r, i) {\n                            if (!context.start || context.start && i + 1 >= context.start) {\n                                if (context.limit) {\n                                    ni = context.start ? i + 1 - context.start : i;\n                                    if (ni < context.limit) {\n                                        limitq.push(r);\n                                    } else if (ni > context.limit) {\n                                        return TAFFY.EXIT;\n                                    }\n                                } else {\n                                    limitq.push(r);\n                                }\n                            }\n                        });\n                        returnq = limitq;\n                    }\n                    if (settings.cacheSize && cid !== 'nocache') {\n                        CacheClear++;\n                        setTimeout(function () {\n                            var bCounter, nc;\n                            if (CacheClear >= settings.cacheSize * 2) {\n                                CacheClear = 0;\n                                bCounter = CacheCount - settings.cacheSize;\n                                nc = {};\n                                eachin(function (r, k) {\n                                    if (r.i >= bCounter) {\n                                        nc[k] = r;\n                                    }\n                                });\n                                Cache = nc;\n                            }\n                        }, 0);\n                        Cache[cid] = {\n                            i: CacheCount++,\n                            results: returnq\n                        };\n                    }\n                    return returnq;\n                }\n            };\n            root = function () {\n                var iAPI, context;\n                iAPI = TAFFY.mergeObj(TAFFY.mergeObj(API, { insert: undefined }), {\n                    getDBI: function () {\n                        return DBI;\n                    },\n                    getroot: function (c) {\n                        return root.call(c);\n                    },\n                    context: function (n) {\n                        if (n) {\n                            context = TAFFY.mergeObj(context, n.hasOwnProperty('results') ? TAFFY.mergeObj(n, {\n                                run: new Date(),\n                                sort: new Date()\n                            }) : n);\n                        }\n                        return context;\n                    },\n                    extend: undefined\n                });\n                context = this && this.q ? this : {\n                    limit: false,\n                    start: false,\n                    q: [],\n                    filterRaw: [],\n                    index: [],\n                    order: [],\n                    results: false,\n                    run: null,\n                    sort: null,\n                    settings: settings\n                };\n                each(arguments, function (f) {\n                    if (isIndexable(f)) {\n                        context.index.push(f);\n                    } else {\n                        context.q.push(returnFilter(f));\n                    }\n                    context.filterRaw.push(f);\n                });\n                return iAPI;\n            };\n            TC++;\n            if (d) {\n                DBI.insert(d);\n            }\n            root.insert = DBI.insert;\n            root.merge = function (i, key, runEvent) {\n                var search = {}, finalSearch = [], obj = {};\n                ;\n                runEvent = runEvent || false;\n                key = key || 'id';\n                each(i, function (o) {\n                    var existingObject;\n                    search[key] = o[key];\n                    finalSearch.push(o[key]);\n                    existingObject = root(search).first();\n                    if (existingObject) {\n                        DBI.update(existingObject.___id, o, runEvent);\n                    } else {\n                        DBI.insert(o, runEvent);\n                    }\n                });\n                obj[key] = finalSearch;\n                return root(obj);\n            };\n            root.TAFFY = true;\n            root.sort = DBI.sort;\n            root.settings = function (n) {\n                if (n) {\n                    settings = TAFFY.mergeObj(settings, n);\n                    if (n.template) {\n                        root().update(n.template);\n                    }\n                }\n                return settings;\n            };\n            root.store = function (n) {\n                var r = false, i;\n                if (localStorage) {\n                    if (n) {\n                        i = localStorage.getItem('taffy_' + n);\n                        if (i && i.length > 0) {\n                            root.insert(i);\n                            r = true;\n                        }\n                        if (TOb.length > 0) {\n                            setTimeout(function () {\n                                localStorage.setItem('taffy_' + settings.storageName, JSON.stringify(TOb));\n                            });\n                        }\n                    }\n                    root.settings({ storageName: n });\n                }\n                return root;\n            };\n            return root;\n        };\n        TAFFY = T;\n        T.each = each;\n        T.eachin = eachin;\n        T.extend = API.extend;\n        TAFFY.EXIT = 'TAFFYEXIT';\n        TAFFY.mergeObj = function (ob1, ob2) {\n            var c = {};\n            eachin(ob1, function (v, n) {\n                c[n] = ob1[n];\n            });\n            eachin(ob2, function (v, n) {\n                c[n] = ob2[n];\n            });\n            return c;\n        };\n        TAFFY.has = function (var1, var2) {\n            var re = false, n;\n            if (var1.TAFFY) {\n                re = var1(var2);\n                if (re.length > 0) {\n                    return true;\n                } else {\n                    return false;\n                }\n            } else {\n                switch (T.typeOf(var1)) {\n                case 'object':\n                    if (T.isObject(var2)) {\n                        eachin(var2, function (v, n) {\n                            if (re === true && !T.isUndefined(var1[n]) && var1.hasOwnProperty(n)) {\n                                re = T.has(var1[n], var2[n]);\n                            } else {\n                                re = false;\n                                return TAFFY.EXIT;\n                            }\n                        });\n                    } else if (T.isArray(var2)) {\n                        each(var2, function (v, n) {\n                            re = T.has(var1, var2[n]);\n                            if (re) {\n                                return TAFFY.EXIT;\n                            }\n                        });\n                    } else if (T.isString(var2)) {\n                        if (!TAFFY.isUndefined(var1[var2])) {\n                            return true;\n                        } else {\n                            return false;\n                        }\n                    }\n                    return re;\n                case 'array':\n                    if (T.isObject(var2)) {\n                        each(var1, function (v, i) {\n                            re = T.has(var1[i], var2);\n                            if (re === true) {\n                                return TAFFY.EXIT;\n                            }\n                        });\n                    } else if (T.isArray(var2)) {\n                        each(var2, function (v2, i2) {\n                            each(var1, function (v1, i1) {\n                                re = T.has(var1[i1], var2[i2]);\n                                if (re === true) {\n                                    return TAFFY.EXIT;\n                                }\n                            });\n                            if (re === true) {\n                                return TAFFY.EXIT;\n                            }\n                        });\n                    } else if (T.isString(var2) || T.isNumber(var2)) {\n                        re = false;\n                        for (n = 0; n < var1.length; n++) {\n                            re = T.has(var1[n], var2);\n                            if (re) {\n                                return true;\n                            }\n                        }\n                    }\n                    return re;\n                case 'string':\n                    if (T.isString(var2) && var2 === var1) {\n                        return true;\n                    }\n                    break;\n                default:\n                    if (T.typeOf(var1) === T.typeOf(var2) && var1 === var2) {\n                        return true;\n                    }\n                    break;\n                }\n            }\n            return false;\n        };\n        TAFFY.hasAll = function (var1, var2) {\n            var T = TAFFY, ar;\n            if (T.isArray(var2)) {\n                ar = true;\n                each(var2, function (v) {\n                    ar = T.has(var1, v);\n                    if (ar === false) {\n                        return TAFFY.EXIT;\n                    }\n                });\n                return ar;\n            } else {\n                return T.has(var1, var2);\n            }\n        };\n        TAFFY.typeOf = function (v) {\n            var s = typeof v;\n            if (s === 'object') {\n                if (v) {\n                    if (typeof v.length === 'number' && !v.propertyIsEnumerable('length')) {\n                        s = 'array';\n                    }\n                } else {\n                    s = 'null';\n                }\n            }\n            return s;\n        };\n        TAFFY.getObjectKeys = function (ob) {\n            var kA = [];\n            eachin(ob, function (n, h) {\n                kA.push(h);\n            });\n            kA.sort();\n            return kA;\n        };\n        TAFFY.isSameArray = function (ar1, ar2) {\n            return TAFFY.isArray(ar1) && TAFFY.isArray(ar2) && ar1.join(',') === ar2.join(',') ? true : false;\n        };\n        TAFFY.isSameObject = function (ob1, ob2) {\n            var T = TAFFY, rv = true;\n            if (T.isObject(ob1) && T.isObject(ob2)) {\n                if (T.isSameArray(T.getObjectKeys(ob1), T.getObjectKeys(ob2))) {\n                    eachin(ob1, function (v, n) {\n                        if (!(T.isObject(ob1[n]) && T.isObject(ob2[n]) && T.isSameObject(ob1[n], ob2[n]) || T.isArray(ob1[n]) && T.isArray(ob2[n]) && T.isSameArray(ob1[n], ob2[n]) || ob1[n] === ob2[n])) {\n                            rv = false;\n                            return TAFFY.EXIT;\n                        }\n                    });\n                } else {\n                    rv = false;\n                }\n            } else {\n                rv = false;\n            }\n            return rv;\n        };\n        typeList = [\n            'String',\n            'Number',\n            'Object',\n            'Array',\n            'Boolean',\n            'Null',\n            'Function',\n            'Undefined'\n        ];\n        makeTest = function (thisKey) {\n            return function (data) {\n                return TAFFY.typeOf(data) === thisKey.toLowerCase() ? true : false;\n            };\n        };\n        for (idx = 0; idx < typeList.length; idx++) {\n            typeKey = typeList[idx];\n            TAFFY['is' + typeKey] = makeTest(typeKey);\n        }\n    }\n}());\nif (typeof exports === 'object') {\n    exports.taffy = TAFFY;\n}","map":"{\"version\":3,\"sources\":[\"node_modules/taffydb/taffy.js\"],\"names\":[\"TAFFY\",\"exports\",\"T\",\"typeList\",\"makeTest\",\"idx\",\"typeKey\",\"version\",\"TC\",\"idpad\",\"cmax\",\"API\",\"protectJSON\",\"each\",\"eachin\",\"isIndexable\",\"returnFilter\",\"runFilters\",\"numcharsplit\",\"orderByCol\",\"run\",\"intersection\",\"filter\",\"makeCid\",\"safeForJson\",\"isRegexp\",\"t\",\"isArray\",\"isObject\",\"JSON\",\"parse\",\"array1\",\"array2\",\"item\",\"indexOf\",\"obj\",\"iterator\",\"context\",\"results\",\"Array\",\"prototype\",\"value\",\"index\",\"list\",\"call\",\"length\",\"aObj\",\"Object\",\"toString\",\"myResult\",\"i\",\"aContext\",\"myCid\",\"stringify\",\"match\",\"a\",\"fun\",\"u\",\"r\",\"x\",\"y\",\"isUndefined\",\"EXIT\",\"o\",\"hasOwnProperty\",\"extend\",\"m\",\"f\",\"apply\",\"arguments\",\"isString\",\"test\",\"___id\",\"___s\",\"mf\",\"typeOf\",\"nf\",\"push\",\"that\",\"v\",\"mtest\",\"s\",\"c\",\"looper\",\"func\",\"su\",\"matchFunc\",\"mvalue\",\"eqeq\",\"bangeq\",\"eqeqeq\",\"lt\",\"gt\",\"lteq\",\"gteq\",\"bangeqeq\",\"substring\",\"toLowerCase\",\"has\",\"hasAll\",\"isNull\",\"isFunction\",\"ar\",\"sortFunc\",\"b\",\"sd\",\"col\",\"dir\",\"d\",\"split\",\"sort\",\"cache\",\"cachcounter\",\"thing\",\"nthing\",\"String\",\"na\",\"rv\",\"rt\",\"xx\",\"charCodeAt\",\"charAt\",\"parseFloat\",\"shift\",\"getDBI\",\"query\",\"nc\",\"mergeObj\",\"nq\",\"q\",\"filterRaw\",\"getroot\",\"replace\",\"order\",\"n\",\"limitedresults\",\"limit\",\"start\",\"arg0\",\"arg1\",\"arg2\",\"runEvent\",\"args\",\"update\",\"remove\",\"removeCommit\",\"delay\",\"setTimeout\",\"get\",\"total\",\"lowest\",\"innerJoinFunction\",\"fnCompareList\",\"fnCombineRow\",\"fnMain\",\"left_row\",\"right_row\",\"arg_list\",\"data_lt\",\"data_rt\",\"op_code\",\"error\",\"out_map\",\"prefix\",\"table\",\"right_table\",\"arg_length\",\"result_list\",\"arg_data\",\"is_ok\",\"highest\",\"ra\",\"row\",\"dup\",\"ldup\",\"template\",\"returnarray\",\"join\",\"TOb\",\"ID\",\"RC\",\"settings\",\"onInsert\",\"onUpdate\",\"onRemove\",\"onDBChange\",\"storageName\",\"forcePropertyCase\",\"cacheSize\",\"name\",\"dm\",\"Date\",\"CacheCount\",\"CacheClear\",\"Cache\",\"DBI\",\"runIndexes\",\"root\",\"indexes\",\"records\",\"UniqueEnforce\",\"rr\",\"nd\",\"localStorage\",\"setItem\",\"insert\",\"columns\",\"input\",\"nv\",\"av\",\"toUpperCase\",\"ai\",\"slice\",\"id\",\"changes\",\"or\",\"nr\",\"tc\",\"hasChange\",\"p\",\"undefined\",\"splice\",\"returnq\",\"cid\",\"indexed\",\"limitq\",\"ni\",\"bCounter\",\"k\",\"iAPI\",\"merge\",\"key\",\"search\",\"finalSearch\",\"existingObject\",\"first\",\"store\",\"getItem\",\"ob1\",\"ob2\",\"var1\",\"var2\",\"re\",\"v2\",\"i2\",\"v1\",\"i1\",\"isNumber\",\"propertyIsEnumerable\",\"getObjectKeys\",\"ob\",\"kA\",\"h\",\"isSameArray\",\"ar1\",\"ar2\",\"isSameObject\",\"thisKey\",\"data\",\"taffy\"],\"mappings\":\"AA2BA,IAAIA,KAAJ,EAAWC,OAAX,EAAoBC,CAApB,CA3BA;AA4BA,CAAC,YAAY;AAAA,IACX,aADW;AAAA,IAEX,IACEC,QADF,EACgBC,QADhB,EAC8BC,GAD9B,EACsCC,OADtC,EAEEC,OAFF,EAEgBC,EAFhB,EAE8BC,KAF9B,EAEsCC,IAFtC,EAGEC,GAHF,EAGgBC,WAHhB,EAG8BC,IAH9B,EAGsCC,MAHtC,EAIEC,WAJF,EAIgBC,YAJhB,EAI8BC,UAJ9B,EAKEC,YALF,EAKgBC,UALhB,EAK8BC,GAL9B,EAKsCC,YALtC,EAMEC,MANF,EAMgBC,OANhB,EAM8BC,WAN9B,EAOEC,QAPF,CAFW;AAAA,IAUT,CAVS;AAAA,IAaX,IAAK,CAAEzB,KAAP,EAAc;AAAA,QAIZO,OAAA,GAAU,KAAV,CAJY;AAAA,QAKZC,EAAA,GAAU,CAAV,CALY;AAAA,QAMZC,KAAA,GAAU,QAAV,CANY;AAAA,QAOZC,IAAA,GAAU,IAAV,CAPY;AAAA,QAQZC,GAAA,GAAU,EAAV,CARY;AAAA,QAUZC,WAAA,GAAc,UAAWc,CAAX,EAAe;AAAA,YAO3B,IAAK1B,KAAA,CAAM2B,OAAN,CAAeD,CAAf,KAAsB1B,KAAA,CAAM4B,QAAN,CAAgBF,CAAhB,CAA3B,EAAgD;AAAA,gBAC9C,OAAOA,CAAP,CAD8C;AAAA,aAAhD,MAGK;AAAA,gBACH,OAAOG,IAAA,CAAKC,KAAL,CAAYJ,CAAZ,CAAP,CADG;AAAA,aAVsB;AAAA,SAA7B,CAVY;AAAA,QA0BZL,YAAA,GAAe,UAASU,MAAT,EAAiBC,MAAjB,EAAyB;AAAA,YACpC,OAAOV,MAAA,CAAOS,MAAP,EAAe,UAASE,IAAT,EAAe;AAAA,gBACnC,OAAOD,MAAA,CAAOE,OAAP,CAAeD,IAAf,KAAwB,CAA/B,CADmC;AAAA,aAA9B,CAAP,CADoC;AAAA,SAAxC,CA1BY;AAAA,QAiCZX,MAAA,GAAS,UAASa,GAAT,EAAcC,QAAd,EAAwBC,OAAxB,EAAiC;AAAA,YACtC,IAAIC,OAAA,GAAU,EAAd,CADsC;AAAA,YAEtC,IAAIH,GAAA,IAAO,IAAX;AAAA,gBAAiB,OAAOG,OAAP,CAFqB;AAAA,YAGtC,IAAIC,KAAA,CAAMC,SAAN,CAAgBlB,MAAhB,IAA0Ba,GAAA,CAAIb,MAAJ,KAAeiB,KAAA,CAAMC,SAAN,CAAgBlB,MAA7D;AAAA,gBAAqE,OAAOa,GAAA,CAAIb,MAAJ,CAAWc,QAAX,EAAqBC,OAArB,CAAP,CAH/B;AAAA,YAItCxB,IAAA,CAAKsB,GAAL,EAAU,UAASM,KAAT,EAAgBC,KAAhB,EAAuBC,IAAvB,EAA6B;AAAA,gBACrC,IAAIP,QAAA,CAASQ,IAAT,CAAcP,OAAd,EAAuBI,KAAvB,EAA8BC,KAA9B,EAAqCC,IAArC,CAAJ;AAAA,oBAAgDL,OAAA,CAAQA,OAAA,CAAQO,MAAhB,IAA0BJ,KAA1B,CADX;AAAA,aAAvC,EAJsC;AAAA,YAOtC,OAAOH,OAAP,CAPsC;AAAA,SAA1C,CAjCY;AAAA,QA2CZb,QAAA,GAAW,UAASqB,IAAT,EAAe;AAAA,YACtB,OAAOC,MAAA,CAAOP,SAAP,CAAiBQ,QAAjB,CAA0BJ,IAA1B,CAA+BE,IAA/B,MAAuC,iBAA9C,CADsB;AAAA,SAA1B,CA3CY;AAAA,QA+CZtB,WAAA,GAAc,UAASsB,IAAT,EAAe;AAAA,YACzB,IAAIG,QAAA,GAAW/C,CAAA,CAAEyB,OAAF,CAAUmB,IAAV,IAAkB,EAAlB,GAAuB5C,CAAA,CAAE0B,QAAF,CAAWkB,IAAX,IAAmB,EAAnB,GAAwB,IAA9D,CADyB;AAAA,YAEzB,IAAGA,IAAA,KAAO,IAAV;AAAA,gBAAgB,OAAOA,IAAP,CAFS;AAAA,YAGzB,SAAQI,CAAR,IAAaJ,IAAb,EAAmB;AAAA,gBACfG,QAAA,CAASC,CAAT,IAAezB,QAAA,CAASqB,IAAA,CAAKI,CAAL,CAAT,IAAoBJ,IAAA,CAAKI,CAAL,EAAQF,QAAR,EAApB,GAAyC9C,CAAA,CAAEyB,OAAF,CAAUmB,IAAA,CAAKI,CAAL,CAAV,KAAsBhD,CAAA,CAAE0B,QAAF,CAAWkB,IAAA,CAAKI,CAAL,CAAX,CAAtB,GAA4C1B,WAAA,CAAYsB,IAAA,CAAKI,CAAL,CAAZ,CAA5C,GAAmEJ,IAAA,CAAKI,CAAL,CAA3H,CADe;AAAA,aAHM;AAAA,YAMzB,OAAOD,QAAP,CANyB;AAAA,SAA7B,CA/CY;AAAA,QAwDZ1B,OAAA,GAAU,UAAS4B,QAAT,EAAmB;AAAA,YACzB,IAAIC,KAAA,GAAQvB,IAAA,CAAKwB,SAAL,CAAeF,QAAf,CAAZ,CADyB;AAAA,YAEzB,IAAGC,KAAA,CAAME,KAAN,CAAY,OAAZ,MAAuB,IAA1B;AAAA,gBAAgC,OAAOF,KAAP,CAFP;AAAA,YAGzB,OAAOvB,IAAA,CAAKwB,SAAL,CAAe7B,WAAA,CAAY2B,QAAZ,CAAf,CAAP,CAHyB;AAAA,SAA7B,CAxDY;AAAA,QA8DZtC,IAAA,GAAO,UAAW0C,CAAX,EAAcC,GAAd,EAAmBC,CAAnB,EAAuB;AAAA,YAC5B,IAAIC,CAAJ,EAAOR,CAAP,EAAUS,CAAV,EAAaC,CAAb,CAD4B;AAAA,YAa5B,IAAKL,CAAA,IAAM,CAACrD,CAAA,CAAEyB,OAAF,CAAW4B,CAAX,KAAkBA,CAAA,CAAEV,MAAF,KAAa,CAAhC,IAAuC,CAAC3C,CAAA,CAAEyB,OAAF,CAAW4B,CAAX,CAAxC,CAAX,EAAqE;AAAA,gBACnEC,GAAA,CAAMtD,CAAA,CAAEyB,OAAF,CAAW4B,CAAX,CAAD,GAAmBA,CAAA,CAAE,CAAF,CAAnB,GAA0BA,CAA/B,EAAkC,CAAlC,EADmE;AAAA,aAArE,MAGK;AAAA,gBACH,KAAMG,CAAA,EAAGR,CAAH,EAAMS,CAAA,GAAI,CAAV,EAAaJ,CAAA,GAAKrD,CAAA,CAAEyB,OAAF,CAAW4B,CAAX,CAAD,GAAmBA,CAAnB,GAAuB,CAACA,CAAD,CAAxC,EAA6CK,CAAA,GAAIL,CAAA,CAAEV,MAAzD,EACMc,CAAA,GAAIC,CADV,EACaD,CAAA,EADb,EAEA;AAAA,oBACET,CAAA,GAAIK,CAAA,CAAEI,CAAF,CAAJ,CADF;AAAA,oBAEE,IAAK,CAACzD,CAAA,CAAE2D,WAAF,CAAeX,CAAf,CAAD,IAAwB,CAAAO,CAAA,IAAK,KAAL,CAA7B,EAA0C;AAAA,wBACxCC,CAAA,GAAIF,GAAA,CAAKN,CAAL,EAAQS,CAAR,CAAJ,CADwC;AAAA,wBAExC,IAAKD,CAAA,KAAMxD,CAAA,CAAE4D,IAAb,EAAmB;AAAA,4BACjB,MADiB;AAAA,yBAFqB;AAAA,qBAF5C;AAAA,iBAHG;AAAA,aAhBuB;AAAA,SAA9B,CA9DY;AAAA,QA8FZhD,MAAA,GAAS,UAAWiD,CAAX,EAAcP,GAAd,EAAoB;AAAA,YAS3B,IAAIG,CAAA,GAAI,CAAR,EAAWD,CAAX,EAAcR,CAAd,CAT2B;AAAA,YAW3B,KAAMA,CAAN,IAAWa,CAAX,EAAc;AAAA,gBACZ,IAAKA,CAAA,CAAEC,cAAF,CAAkBd,CAAlB,CAAL,EAA4B;AAAA,oBAC1BQ,CAAA,GAAIF,GAAA,CAAKO,CAAA,CAAEb,CAAF,CAAL,EAAWA,CAAX,EAAcS,CAAA,EAAd,CAAJ,CAD0B;AAAA,oBAE1B,IAAKD,CAAA,KAAMxD,CAAA,CAAE4D,IAAb,EAAmB;AAAA,wBACjB,MADiB;AAAA,qBAFO;AAAA,iBADhB;AAAA,aAXa;AAAA,SAA7B,CA9FY;AAAA,QAoHZnD,GAAA,CAAIsD,MAAJ,GAAa,UAAWC,CAAX,EAAcC,CAAd,EAAkB;AAAA,YAO7BxD,GAAA,CAAIuD,CAAJ,IAAS,YAAY;AAAA,gBACnB,OAAOC,CAAA,CAAEC,KAAF,CAAS,IAAT,EAAeC,SAAf,CAAP,CADmB;AAAA,aAArB,CAP6B;AAAA,SAA/B,CApHY;AAAA,QAgIZtD,WAAA,GAAc,UAAWoD,CAAX,EAAe;AAAA,YAC3B,IAAIjB,CAAJ,CAD2B;AAAA,YAG3B,IAAKhD,CAAA,CAAEoE,QAAF,CAAYH,CAAZ,KAAmB,sBAAsBI,IAAtB,CAA4BJ,CAA5B,CAAxB,EAAyD;AAAA,gBACvD,OAAO,IAAP,CADuD;AAAA,aAH9B;AAAA,YAO3B,IAAKjE,CAAA,CAAE0B,QAAF,CAAYuC,CAAZ,KAAmBA,CAAA,CAAEK,KAArB,IAA8BL,CAAA,CAAEM,IAArC,EAA2C;AAAA,gBACzC,OAAO,IAAP,CADyC;AAAA,aAPhB;AAAA,YAY3B,IAAKvE,CAAA,CAAEyB,OAAF,CAAWwC,CAAX,CAAL,EAAqB;AAAA,gBACnBjB,CAAA,GAAI,IAAJ,CADmB;AAAA,gBAEnBrC,IAAA,CAAMsD,CAAN,EAAS,UAAWT,CAAX,EAAe;AAAA,oBACtB,IAAK,CAAC3C,WAAA,CAAa2C,CAAb,CAAN,EAAwB;AAAA,wBACtBR,CAAA,GAAI,KAAJ,CADsB;AAAA,wBAGtB,OAAOlD,KAAA,CAAM8D,IAAb,CAHsB;AAAA,qBADF;AAAA,iBAAxB,EAFmB;AAAA,gBASnB,OAAOZ,CAAP,CATmB;AAAA,aAZM;AAAA,YAwB3B,OAAO,KAAP,CAxB2B;AAAA,SAA7B,CAhIY;AAAA,QA2JZjC,UAAA,GAAa,UAAWyC,CAAX,EAAcpC,MAAd,EAAuB;AAAA,YAMlC,IAAIgC,KAAA,GAAQ,IAAZ,CANkC;AAAA,YASlCzC,IAAA,CAAMS,MAAN,EAAc,UAAWoD,EAAX,EAAgB;AAAA,gBAC5B,QAASxE,CAAA,CAAEyE,MAAF,CAAUD,EAAV,CAAT;AAAA,gBACE,KAAK,UAAL;AAAA,oBAEE,IAAK,CAACA,EAAA,CAAGN,KAAH,CAAUV,CAAV,CAAN,EAAqB;AAAA,wBACnBJ,KAAA,GAAQ,KAAR,CADmB;AAAA,wBAEnB,OAAOtD,KAAA,CAAM8D,IAAb,CAFmB;AAAA,qBAFvB;AAAA,oBAME,MAPJ;AAAA,gBAQE,KAAK,OAAL;AAAA,oBAEER,KAAA,GAASoB,EAAA,CAAG7B,MAAH,KAAc,CAAf,GAAqB5B,UAAA,CAAYyC,CAAZ,EAAegB,EAAA,CAAG,CAAH,CAAf,CAArB,GACLA,EAAA,CAAG7B,MAAH,KAAc,CAAf,GAAqB5B,UAAA,CAAYyC,CAAZ,EAAegB,EAAA,CAAG,CAAH,CAAf,KACnBzD,UAAA,CAAYyC,CAAZ,EAAegB,EAAA,CAAG,CAAH,CAAf,CADF,GAEGA,EAAA,CAAG7B,MAAH,KAAc,CAAf,GAAqB5B,UAAA,CAAYyC,CAAZ,EAAegB,EAAA,CAAG,CAAH,CAAf,KACnBzD,UAAA,CAAYyC,CAAZ,EAAegB,EAAA,CAAG,CAAH,CAAf,CADmB,IACOzD,UAAA,CAAYyC,CAAZ,EAAegB,EAAA,CAAG,CAAH,CAAf,CAD5B,GAEGA,EAAA,CAAG7B,MAAH,KAAc,CAAf,GAAqB5B,UAAA,CAAYyC,CAAZ,EAAegB,EAAA,CAAG,CAAH,CAAf,KACnBzD,UAAA,CAAYyC,CAAZ,EAAegB,EAAA,CAAG,CAAH,CAAf,CADmB,IACOzD,UAAA,CAAYyC,CAAZ,EAAegB,EAAA,CAAG,CAAH,CAAf,CADP,IAEnBzD,UAAA,CAAYyC,CAAZ,EAAegB,EAAA,CAAG,CAAH,CAAf,CAFF,GAE4B,KAPlC,CAFF;AAAA,oBAUE,IAAKA,EAAA,CAAG7B,MAAH,GAAY,CAAjB,EAAoB;AAAA,wBAClBhC,IAAA,CAAM6D,EAAN,EAAU,UAAWP,CAAX,EAAe;AAAA,4BACvB,IAAKlD,UAAA,CAAYyC,CAAZ,EAAeS,CAAf,CAAL,EAAyB;AAAA,gCACvBb,KAAA,GAAQ,IAAR,CADuB;AAAA,6BADF;AAAA,yBAAzB,EADkB;AAAA,qBAVtB;AAAA,oBAiBE,MAzBJ;AAAA,iBAD4B;AAAA,aAA9B,EATkC;AAAA,YAuClC,OAAOA,KAAP,CAvCkC;AAAA,SAApC,CA3JY;AAAA,QAqMZtC,YAAA,GAAe,UAAWmD,CAAX,EAAe;AAAA,YAQ5B,IAAIS,EAAA,GAAK,EAAT,CAR4B;AAAA,YAS5B,IAAK1E,CAAA,CAAEoE,QAAF,CAAYH,CAAZ,KAAmB,sBAAsBI,IAAtB,CAA4BJ,CAA5B,CAAxB,EAAyD;AAAA,gBACvDA,CAAA,GAAI,EAAEK,KAAA,EAAQL,CAAV,EAAJ,CADuD;AAAA,aAT7B;AAAA,YAY5B,IAAKjE,CAAA,CAAEyB,OAAF,CAAWwC,CAAX,CAAL,EAAqB;AAAA,gBAGnBtD,IAAA,CAAMsD,CAAN,EAAS,UAAWT,CAAX,EAAe;AAAA,oBAEtBkB,EAAA,CAAGC,IAAH,CAAS7D,YAAA,CAAc0C,CAAd,CAAT,EAFsB;AAAA,iBAAxB,EAHmB;AAAA,gBASnBS,CAAA,GAAI,YAAY;AAAA,oBACd,IAAIW,IAAA,GAAO,IAAX,EAAiBxB,KAAA,GAAQ,KAAzB,CADc;AAAA,oBAEdzC,IAAA,CAAM+D,EAAN,EAAU,UAAWT,CAAX,EAAe;AAAA,wBACvB,IAAKlD,UAAA,CAAY6D,IAAZ,EAAkBX,CAAlB,CAAL,EAA4B;AAAA,4BAC1Bb,KAAA,GAAQ,IAAR,CAD0B;AAAA,yBADL;AAAA,qBAAzB,EAFc;AAAA,oBAOd,OAAOA,KAAP,CAPc;AAAA,iBAAhB,CATmB;AAAA,gBAkBnB,OAAOa,CAAP,CAlBmB;AAAA,aAZO;AAAA,YAkC5B,IAAKjE,CAAA,CAAE0B,QAAF,CAAYuC,CAAZ,CAAL,EAAsB;AAAA,gBACpB,IAAKjE,CAAA,CAAE0B,QAAF,CAAYuC,CAAZ,KAAmBA,CAAA,CAAEK,KAArB,IAA8BL,CAAA,CAAEM,IAArC,EAA2C;AAAA,oBACzCN,CAAA,GAAI,EAAEK,KAAA,EAAQL,CAAA,CAAEK,KAAZ,EAAJ,CADyC;AAAA,iBADvB;AAAA,gBAMpB1D,MAAA,CAAQqD,CAAR,EAAW,UAAWY,CAAX,EAAc7B,CAAd,EAAkB;AAAA,oBAG3B,IAAK,CAAChD,CAAA,CAAE0B,QAAF,CAAYmD,CAAZ,CAAN,EAAuB;AAAA,wBACrBA,CAAA,GAAI,EACF,MAAOA,CADL,EAAJ,CADqB;AAAA,qBAHI;AAAA,oBAS3BjE,MAAA,CAAQiE,CAAR,EAAW,UAAWC,KAAX,EAAkBC,CAAlB,EAAsB;AAAA,wBAE/B,IAAIC,CAAA,GAAI,EAAR,EAAYC,MAAZ,CAF+B;AAAA,wBAK/BA,MAAA,GAAUF,CAAA,KAAM,QAAP,GACP,UAAWD,KAAX,EAAkBI,IAAlB,EAAyB;AAAA,4BACvBA,IAAA,CAAMJ,KAAN,EADuB;AAAA,yBADlB,GAGHnE,IAHN,CAL+B;AAAA,wBAW/BsE,MAAA,CAAQH,KAAR,EAAe,UAAWA,KAAX,EAAmB;AAAA,4BAIhC,IAAIK,EAAA,GAAK,IAAT,EAAelB,CAAA,GAAI,KAAnB,EAA0BmB,SAA1B,CAJgC;AAAA,4BAQhCA,SAAA,GAAY,YAAY;AAAA,gCAGtB,IACEC,MAAA,GAAW,KAAKrC,CAAL,CADb,EAEEsC,IAAA,GAAW,IAFb,EAGEC,MAAA,GAAW,IAHb,EAIEC,MAAA,GAAW,KAJb,EAKEC,EAAA,GAAO,GALT,EAMEC,EAAA,GAAO,GANT,EAOEC,IAAA,GAAS,IAPX,EAQEC,IAAA,GAAS,IARX,EASEC,QAAA,GAAW,KATb,EAUErC,CAVF,CAHsB;AAAA,gCAcpB,CAdoB;AAAA,gCAgBtB,IAAI,OAAO6B,MAAP,KAAkB,WAAtB,EAAmC;AAAA,oCACjC,OAAO,KAAP,CADiC;AAAA,iCAhBb;AAAA,gCAoBtB,IAAMN,CAAA,CAAE/C,OAAF,CAAW,GAAX,MAAqB,CAAtB,IAA4B+C,CAAA,KAAMQ,MAAlC,IACHR,CAAA,KAAMc,QADR,EAEA;AAAA,oCAEEV,EAAA,GAAK,KAAL,CAFF;AAAA,oCAGEJ,CAAA,GAAIA,CAAA,CAAEe,SAAF,CAAa,CAAb,EAAgBf,CAAA,CAAEpC,MAAlB,CAAJ,CAHF;AAAA,iCAtBsB;AAAA,gCA6BtBa,CAAA,GACGuB,CAAA,KAAM,OAAP,GAAmBD,KAAA,CAAMT,IAAN,CAAYgB,MAAZ,CAAnB,GAA4CN,CAAA,KAAM,IAAN,IAAcA,CAAA,KAAMU,EAArB,GACxCJ,MAAA,GAASP,KAD+B,GACpBC,CAAA,KAAM,IAAN,IAAcA,CAAA,KAAMW,EAArB,GACnBL,MAAA,GAASP,KADU,GACCC,CAAA,KAAM,KAAN,IAAeA,CAAA,KAAMY,IAAtB,GACnBN,MAAA,IAAUP,KADS,GACCC,CAAA,KAAM,KAAN,IAAeA,CAAA,KAAMa,IAAtB,GACnBP,MAAA,IAAUP,KADS,GACCC,CAAA,KAAM,MAAP,GACnBM,MAAA,CAAOrD,OAAP,CAAgB8C,KAAhB,MAA4B,CADT,GACeC,CAAA,KAAM,YAAP,GACjCM,MAAA,CAAOU,WAAP,GAAqB/D,OAArB,CAA8B8C,KAAA,CAAMiB,WAAN,EAA9B,MACG,CAF8B,GAExBhB,CAAA,KAAM,OAAP,GACRM,MAAA,CAAOS,SAAP,CAAmBT,MAAA,CAAO1C,MAAP,GAAgBmC,KAAA,CAAMnC,MAAzC,MACGmC,KAFK,GAEKC,CAAA,KAAM,aAAP,GACZM,MAAA,CAAOU,WAAP,GAAqBD,SAArB,CACAT,MAAA,CAAO1C,MAAP,GAAgBmC,KAAA,CAAMnC,MADtB,MACoCmC,KAAA,CAAMiB,WAAN,EAFxB,GAGVhB,CAAA,KAAM,MAAP,GACDM,MAAA,CAAOrD,OAAP,CAAgB8C,KAAhB,KAA2B,CAD1B,GACgCC,CAAA,KAAM,YAAP,GAChCM,MAAA,CAAOU,WAAP,GAAqB/D,OAArB,CAA6B8C,KAAA,CAAMiB,WAAN,EAA7B,KAAqD,CADrB,GAE9BhB,CAAA,KAAMS,MAAN,IAAgBT,CAAA,KAAM,IAAvB,GACDM,MAAA,KAAYP,KADX,GACqBC,CAAA,KAAMO,IAAP,GACrBD,MAAA,IAAUP,KADW,GACDC,CAAA,KAAMc,QAAP,GACnBR,MAAA,KAAYP,KADO,GACGC,CAAA,KAAMQ,MAAP,GACrBF,MAAA,IAAUP,KADW,GACDC,CAAA,KAAM,UAAP,GACnBM,MAAA,CAAOU,WAAP,GACCV,MAAA,CAAOU,WAAP,OAAyBjB,KAAA,CAAMiB,WAAN,EAD1B,GAEGV,MAAA,KAAWP,KAHK,GAGKC,CAAA,KAAM,KAAP,GACvB/E,CAAA,CAAEgG,GAAF,CAAOX,MAAP,EAAeP,KAAf,CADuB,GACIC,CAAA,KAAM,QAAP,GAC1B/E,CAAA,CAAEiG,MAAF,CAAUZ,MAAV,EAAkBP,KAAlB,CAD0B,GACIC,CAAA,KAAM,UAAP,GAC7BjF,KAAA,CAAM2B,OAAN,CAAc4D,MAAd,KAAyBA,MAAA,CAAOrD,OAAP,CAAe8C,KAAf,IAAwB,CAAC,CADrB,GAE9BC,CAAA,CAAE/C,OAAF,CAAW,IAAX,MAAsB,CAAC,CAAvB,IACK,CAAClC,KAAA,CAAMoG,MAAN,CAAcb,MAAd,CADN,IAEK,CAACvF,KAAA,CAAM6D,WAAN,CAAmB0B,MAAnB,CAFN,IAGK,CAACvF,KAAA,CAAM4B,QAAN,CAAgBoD,KAAhB,CAHN,IAIK,CAAChF,KAAA,CAAM2B,OAAN,CAAeqD,KAAf,CALkD,GAOvDA,KAAA,KAAUO,MAAA,CAAON,CAAP,CAP6C,GAQrD/E,CAAA,CAAE+E,CAAF,KAAQ/E,CAAA,CAAEmG,UAAF,CAAcnG,CAAA,CAAE+E,CAAF,CAAd,CAAR,IACAA,CAAA,CAAE/C,OAAF,CAAW,IAAX,MAAsB,CADvB,GAEFhC,CAAA,CAAE+E,CAAF,EAAMM,MAAN,MAAmBP,KAFjB,GAGC9E,CAAA,CAAE+E,CAAF,KAAQ/E,CAAA,CAAEmG,UAAF,CAAcnG,CAAA,CAAE+E,CAAF,CAAd,CAAT,GACF/E,CAAA,CAAE+E,CAAF,EAAMM,MAAN,EAAcP,KAAd,CADE,GACuB,KAtC7B,CA7BsB;AAAA,gCAsEtBtB,CAAA,GAAKA,CAAA,IAAK,CAAC2B,EAAP,GAAa,KAAb,GAAsB,CAAC3B,CAAD,IAAM,CAAC2B,EAAR,GAAc,IAAd,GAAqB3B,CAA9C,CAtEsB;AAAA,gCAwEtB,OAAOA,CAAP,CAxEsB;AAAA,6BAAxB,CARgC;AAAA,4BAkFhCwB,CAAA,CAAEL,IAAF,CAAQS,SAAR,EAlFgC;AAAA,yBAAlC,EAX+B;AAAA,wBAiG/B,IAAKJ,CAAA,CAAErC,MAAF,KAAa,CAAlB,EAAqB;AAAA,4BAEnB+B,EAAA,CAAGC,IAAH,CAASK,CAAA,CAAE,CAAF,CAAT,EAFmB;AAAA,yBAArB,MAIK;AAAA,4BAGHN,EAAA,CAAGC,IAAH,CAAS,YAAY;AAAA,gCACnB,IAAIC,IAAA,GAAO,IAAX,EAAiBxB,KAAA,GAAQ,KAAzB,CADmB;AAAA,gCAEnBzC,IAAA,CAAMqE,CAAN,EAAS,UAAWf,CAAX,EAAe;AAAA,oCACtB,IAAKA,CAAA,CAAEC,KAAF,CAASU,IAAT,CAAL,EAAsB;AAAA,wCACpBxB,KAAA,GAAQ,IAAR,CADoB;AAAA,qCADA;AAAA,iCAAxB,EAFmB;AAAA,gCAOnB,OAAOA,KAAP,CAPmB;AAAA,6BAArB,EAHG;AAAA,yBArG0B;AAAA,qBAAjC,EAT2B;AAAA,iBAA7B,EANoB;AAAA,gBAqIpBa,CAAA,GAAI,YAAY;AAAA,oBACd,IAAIW,IAAA,GAAO,IAAX,EAAiBxB,KAAA,GAAQ,IAAzB,CADc;AAAA,oBAGdA,KAAA,GAASsB,EAAA,CAAG/B,MAAH,KAAc,CAAd,IAAmB,CAAC+B,EAAA,CAAG,CAAH,EAAMR,KAAN,CAAaU,IAAb,CAArB,GAA4C,KAA5C,GACLF,EAAA,CAAG/B,MAAH,KAAc,CAAd,IACE,EAAC+B,EAAA,CAAG,CAAH,EAAMR,KAAN,CAAaU,IAAb,CAAD,IAAwB,CAACF,EAAA,CAAG,CAAH,EAAMR,KAAN,CAAaU,IAAb,CAAzB,CADH,GACoD,KADpD,GAEGF,EAAA,CAAG/B,MAAH,KAAc,CAAd,IACE,EAAC+B,EAAA,CAAG,CAAH,EAAMR,KAAN,CAAaU,IAAb,CAAD,IAAwB,CAACF,EAAA,CAAG,CAAH,EAAMR,KAAN,CAAaU,IAAb,CAAzB,IACC,CAACF,EAAA,CAAG,CAAH,EAAMR,KAAN,CAAaU,IAAb,CADF,CADH,GAE6B,KAF7B,GAGGF,EAAA,CAAG/B,MAAH,KAAc,CAAd,IACE,EAAC+B,EAAA,CAAG,CAAH,EAAMR,KAAN,CAAaU,IAAb,CAAD,IAAwB,CAACF,EAAA,CAAG,CAAH,EAAMR,KAAN,CAAaU,IAAb,CAAzB,IACC,CAACF,EAAA,CAAG,CAAH,EAAMR,KAAN,CAAaU,IAAb,CADF,IACyB,CAACF,EAAA,CAAG,CAAH,EAAMR,KAAN,CAAaU,IAAb,CAD1B,CADH,GAEqD,KAFrD,GAGI,IATV,CAHc;AAAA,oBAad,IAAKF,EAAA,CAAG/B,MAAH,GAAY,CAAjB,EAAoB;AAAA,wBAClBhC,IAAA,CAAM+D,EAAN,EAAU,UAAWT,CAAX,EAAe;AAAA,4BACvB,IAAK,CAAClD,UAAA,CAAY6D,IAAZ,EAAkBX,CAAlB,CAAN,EAA6B;AAAA,gCAC3Bb,KAAA,GAAQ,KAAR,CAD2B;AAAA,6BADN;AAAA,yBAAzB,EADkB;AAAA,qBAbN;AAAA,oBAoBd,OAAOA,KAAP,CApBc;AAAA,iBAAhB,CArIoB;AAAA,gBA2JpB,OAAOa,CAAP,CA3JoB;AAAA,aAlCM;AAAA,YAiM5B,IAAKjE,CAAA,CAAEmG,UAAF,CAAclC,CAAd,CAAL,EAAwB;AAAA,gBACtB,OAAOA,CAAP,CADsB;AAAA,aAjMI;AAAA,SAA9B,CArMY;AAAA,QA2YZhD,UAAA,GAAa,UAAWmF,EAAX,EAAevC,CAAf,EAAmB;AAAA,YAS9B,IAAIwC,QAAA,GAAW,UAAWhD,CAAX,EAAciD,CAAd,EAAkB;AAAA,gBAE/B,IAAI9C,CAAA,GAAI,CAAR,CAF+B;AAAA,gBAI/BxD,CAAA,CAAEW,IAAF,CAAQkD,CAAR,EAAW,UAAW0C,EAAX,EAAgB;AAAA,oBAGzB,IAAI1C,CAAJ,EAAO2C,GAAP,EAAYC,GAAZ,EAAiBzB,CAAjB,EAAoB0B,CAApB,CAHyB;AAAA,oBAIzB7C,CAAA,GAAI0C,EAAA,CAAGI,KAAH,CAAU,GAAV,CAAJ,CAJyB;AAAA,oBAKzBH,GAAA,GAAM3C,CAAA,CAAE,CAAF,CAAN,CALyB;AAAA,oBAQzB4C,GAAA,GAAO5C,CAAA,CAAElB,MAAF,KAAa,CAAd,GAAmB,SAAnB,GAA+BkB,CAAA,CAAE,CAAF,CAArC,CARyB;AAAA,oBAWzB,IAAK4C,GAAA,KAAQ,SAAb,EAAwB;AAAA,wBAEtBzB,CAAA,GAAIhE,YAAA,CAAcqC,CAAA,CAAEmD,GAAF,CAAd,CAAJ,CAFsB;AAAA,wBAGtBE,CAAA,GAAI1F,YAAA,CAAcsF,CAAA,CAAEE,GAAF,CAAd,CAAJ,CAHsB;AAAA,wBAKtBxG,CAAA,CAAEW,IAAF,CAASqE,CAAA,CAAErC,MAAF,IAAY+D,CAAA,CAAE/D,MAAf,GAAyBqC,CAAzB,GAA6B0B,CAArC,EAAwC,UAAWjD,CAAX,EAAcT,CAAd,EAAkB;AAAA,4BACxD,IAAKgC,CAAA,CAAEhC,CAAF,IAAO0D,CAAA,CAAE1D,CAAF,CAAZ,EAAkB;AAAA,gCAChBQ,CAAA,GAAI,CAAC,CAAL,CADgB;AAAA,gCAEhB,OAAO1D,KAAA,CAAM8D,IAAb,CAFgB;AAAA,6BAAlB,MAIK,IAAKoB,CAAA,CAAEhC,CAAF,IAAO0D,CAAA,CAAE1D,CAAF,CAAZ,EAAkB;AAAA,gCACrBQ,CAAA,GAAI,CAAJ,CADqB;AAAA,gCAErB,OAAO1D,KAAA,CAAM8D,IAAb,CAFqB;AAAA,6BALiC;AAAA,yBAA1D,EALsB;AAAA,qBAAxB,MAgBK,IAAK6C,GAAA,KAAQ,aAAb,EAA4B;AAAA,wBAE/BzB,CAAA,GAAIhE,YAAA,CAAcqC,CAAA,CAAEmD,GAAF,CAAd,CAAJ,CAF+B;AAAA,wBAG/BE,CAAA,GAAI1F,YAAA,CAAcsF,CAAA,CAAEE,GAAF,CAAd,CAAJ,CAH+B;AAAA,wBAK/BxG,CAAA,CAAEW,IAAF,CAASqE,CAAA,CAAErC,MAAF,IAAY+D,CAAA,CAAE/D,MAAf,GAAyBqC,CAAzB,GAA6B0B,CAArC,EAAwC,UAAWjD,CAAX,EAAcT,CAAd,EAAkB;AAAA,4BACxD,IAAKgC,CAAA,CAAEhC,CAAF,IAAO0D,CAAA,CAAE1D,CAAF,CAAZ,EAAkB;AAAA,gCAChBQ,CAAA,GAAI,CAAC,CAAL,CADgB;AAAA,gCAEhB,OAAO1D,KAAA,CAAM8D,IAAb,CAFgB;AAAA,6BAAlB,MAIK,IAAKoB,CAAA,CAAEhC,CAAF,IAAO0D,CAAA,CAAE1D,CAAF,CAAZ,EAAkB;AAAA,gCACrBQ,CAAA,GAAI,CAAJ,CADqB;AAAA,gCAErB,OAAO1D,KAAA,CAAM8D,IAAb,CAFqB;AAAA,6BALiC;AAAA,yBAA1D,EAL+B;AAAA,qBAA5B,MAgBA,IAAK6C,GAAA,KAAQ,MAAR,IAAkBpD,CAAA,CAAEmD,GAAF,IAASF,CAAA,CAAEE,GAAF,CAAhC,EAAwC;AAAA,wBAE3ChD,CAAA,GAAI,CAAC,CAAL,CAF2C;AAAA,wBAG3C,OAAOxD,CAAA,CAAE4D,IAAT,CAH2C;AAAA,qBAAxC,MAKA,IAAK6C,GAAA,KAAQ,MAAR,IAAkBpD,CAAA,CAAEmD,GAAF,IAASF,CAAA,CAAEE,GAAF,CAAhC,EAAwC;AAAA,wBAE3ChD,CAAA,GAAI,CAAJ,CAF2C;AAAA,wBAG3C,OAAOxD,CAAA,CAAE4D,IAAT,CAH2C;AAAA,qBAAxC,MAKA,IAAK6C,GAAA,KAAQ,MAAR,IAAkBpD,CAAA,CAAEmD,GAAF,IAASF,CAAA,CAAEE,GAAF,CAAhC,EAAwC;AAAA,wBAE3ChD,CAAA,GAAI,CAAC,CAAL,CAF2C;AAAA,wBAG3C,OAAOxD,CAAA,CAAE4D,IAAT,CAH2C;AAAA,qBAAxC,MAMA,IAAK6C,GAAA,KAAQ,MAAR,IAAkBpD,CAAA,CAAEmD,GAAF,IAASF,CAAA,CAAEE,GAAF,CAAhC,EAAwC;AAAA,wBAE3ChD,CAAA,GAAI,CAAJ,CAF2C;AAAA,wBAG3C,OAAOxD,CAAA,CAAE4D,IAAT,CAH2C;AAAA,qBA3DpB;AAAA,oBAkEzB,IAAKJ,CAAA,KAAM,CAAN,IAAWiD,GAAA,KAAQ,SAAnB,IAAgCzB,CAAA,CAAErC,MAAF,GAAW+D,CAAA,CAAE/D,MAAlD,EAA0D;AAAA,wBACxDa,CAAA,GAAI,CAAC,CAAL,CADwD;AAAA,qBAA1D,MAGK,IAAKA,CAAA,KAAM,CAAN,IAAWiD,GAAA,KAAQ,SAAnB,IAAgCzB,CAAA,CAAErC,MAAF,GAAW+D,CAAA,CAAE/D,MAAlD,EAA0D;AAAA,wBAC7Da,CAAA,GAAI,CAAJ,CAD6D;AAAA,qBAA1D,MAGA,IAAKA,CAAA,KAAM,CAAN,IAAWiD,GAAA,KAAQ,aAAnB,IAAoCzB,CAAA,CAAErC,MAAF,GAAW+D,CAAA,CAAE/D,MAAtD,EAA8D;AAAA,wBACjEa,CAAA,GAAI,CAAC,CAAL,CADiE;AAAA,qBAA9D,MAGA,IAAKA,CAAA,KAAM,CAAN,IAAWiD,GAAA,KAAQ,aAAnB,IAAoCzB,CAAA,CAAErC,MAAF,GAAW+D,CAAA,CAAE/D,MAAtD,EAA8D;AAAA,wBACjEa,CAAA,GAAI,CAAJ,CADiE;AAAA,qBA3E1C;AAAA,oBA+EzB,IAAKA,CAAA,KAAM,CAAX,EAAc;AAAA,wBACZ,OAAOxD,CAAA,CAAE4D,IAAT,CADY;AAAA,qBA/EW;AAAA,iBAA3B,EAJ+B;AAAA,gBAyF/B,OAAOJ,CAAP,CAzF+B;AAAA,aAAjC,CAT8B;AAAA,YAqG9B,OAAQ4C,EAAA,IAAMA,EAAA,CAAGzB,IAAV,GAAkByB,EAAA,CAAGQ,IAAH,CAASP,QAAT,CAAlB,GAAwCD,EAA/C,CArG8B;AAAA,SAAhC,CA3YY;AAAA,QA2fZ,CAAC,YAAY;AAAA,YAEX,IAAIS,KAAA,GAAQ,EAAZ,EAAgBC,WAAA,GAAc,CAA9B,CAFW;AAAA,YAIX9F,YAAA,GAAe,UAAW+F,KAAX,EAAmB;AAAA,gBAEhC,IAAKD,WAAA,GAActG,IAAnB,EAAyB;AAAA,oBACvBqG,KAAA,GAAQ,EAAR,CADuB;AAAA,oBAEvBC,WAAA,GAAc,CAAd,CAFuB;AAAA,iBAFO;AAAA,gBAQhC,OAAOD,KAAA,CAAM,MAAME,KAAZ,KAAuB,YAAY;AAAA,oBAGxC,IAAIC,MAAA,GAASC,MAAA,CAAQF,KAAR,CAAb,EACEG,EAAA,GAAK,EADP,EAEEC,EAAA,GAAK,GAFP,EAGEC,EAAA,GAAK,EAHP,EAIE3D,CAJF,EAIK4D,EAJL,EAISrC,CAJT,CAHwC;AAAA,oBAUxC,KAAMvB,CAAA,GAAI,CAAJ,EAAO4D,EAAA,GAAKL,MAAA,CAAOrE,MAAzB,EAAiCc,CAAA,GAAI4D,EAArC,EAAyC5D,CAAA,EAAzC,EAA8C;AAAA,wBAE5CuB,CAAA,GAAIgC,MAAA,CAAOM,UAAP,CAAmB7D,CAAnB,CAAJ,CAF4C;AAAA,wBAK5C,IAAOuB,CAAA,IAAK,EAAL,IAAWA,CAAA,IAAK,EAAlB,IAA0BA,CAAA,KAAM,EAArC,EAAyC;AAAA,4BACvC,IAAKoC,EAAA,KAAO,GAAZ,EAAiB;AAAA,gCACfA,EAAA,GAAK,GAAL,CADe;AAAA,gCAEfF,EAAA,CAAGvC,IAAH,CAASwC,EAAA,CAAGpB,WAAH,EAAT,EAFe;AAAA,gCAGfoB,EAAA,GAAK,EAAL,CAHe;AAAA,6BADsB;AAAA,4BAMvCA,EAAA,GAAKA,EAAA,GAAKH,MAAA,CAAOO,MAAP,CAAe9D,CAAf,CAAV,CANuC;AAAA,yBAAzC,MAQK;AAAA,4BAGH,IAAK2D,EAAA,KAAO,GAAZ,EAAiB;AAAA,gCACfA,EAAA,GAAK,GAAL,CADe;AAAA,gCAEfF,EAAA,CAAGvC,IAAH,CAAS6C,UAAA,CAAYL,EAAZ,CAAT,EAFe;AAAA,gCAGfA,EAAA,GAAK,EAAL,CAHe;AAAA,6BAHd;AAAA,4BAQHA,EAAA,GAAKA,EAAA,GAAKH,MAAA,CAAOO,MAAP,CAAe9D,CAAf,CAAV,CARG;AAAA,yBAbuC;AAAA,qBAVN;AAAA,oBAmCxCyD,EAAA,CAAGvC,IAAH,CAAUyC,EAAA,KAAO,GAAR,GAAeI,UAAA,CAAYL,EAAZ,CAAf,GAAkCA,EAAA,CAAGpB,WAAH,EAA3C,EAnCwC;AAAA,oBAoCxCmB,EAAA,CAAGO,KAAH,GApCwC;AAAA,oBAsCxCZ,KAAA,CAAM,MAAME,KAAZ,IAAqBG,EAArB,CAtCwC;AAAA,oBAuCxCJ,WAAA,GAvCwC;AAAA,oBAyCxC,OAAOI,EAAP,CAzCwC;AAAA,iBAAZ,EAA9B,CARgC;AAAA,aAAlC,CAJW;AAAA,SAAZ,EAAD,EA3fY;AAAA,QA2jBZhG,GAAA,GAAM,YAAY;AAAA,YAChB,KAAKiB,OAAL,CAAc,EACZC,OAAA,EAAU,KAAKsF,MAAL,GAAcC,KAAd,CAAqB,KAAKxF,OAAL,EAArB,CADE,EAAd,EADgB;AAAA,SAAlB,CA3jBY;AAAA,QAkkBZ1B,GAAA,CAAIsD,MAAJ,CAAY,QAAZ,EAAsB,YAAY;AAAA,YAOhC,IACE6D,EAAA,GAAK9H,KAAA,CAAM+H,QAAN,CAAgB,KAAK1F,OAAL,EAAhB,EAAgC,EAAEjB,GAAA,EAAM,IAAR,EAAhC,CADP,EAEE4G,EAAA,GAAK,EAFP,CAPgC;AAAA,YAUhC,CAVgC;AAAA,YAWhCnH,IAAA,CAAMiH,EAAA,CAAGG,CAAT,EAAY,UAAWlD,CAAX,EAAe;AAAA,gBACzBiD,EAAA,CAAGnD,IAAH,CAASE,CAAT,EADyB;AAAA,aAA3B,EAXgC;AAAA,YAchC+C,EAAA,CAAGG,CAAH,GAAOD,EAAP,CAdgC;AAAA,YAgBhCnH,IAAA,CAAMwD,SAAN,EAAiB,UAAWF,CAAX,EAAe;AAAA,gBAC9B2D,EAAA,CAAGG,CAAH,CAAKpD,IAAL,CAAW7D,YAAA,CAAcmD,CAAd,CAAX,EAD8B;AAAA,gBAE9B2D,EAAA,CAAGI,SAAH,CAAarD,IAAb,CAAmBV,CAAnB,EAF8B;AAAA,aAAhC,EAhBgC;AAAA,YAqBhC,OAAO,KAAKgE,OAAL,CAAcL,EAAd,CAAP,CArBgC;AAAA,SAAlC,EAlkBY;AAAA,QA0lBZnH,GAAA,CAAIsD,MAAJ,CAAY,OAAZ,EAAqB,UAAWF,CAAX,EAAe;AAAA,YAMlCA,CAAA,GAAIA,CAAA,CAAE8C,KAAF,CAAS,GAAT,CAAJ,CANkC;AAAA,YAOlC,IAAIlD,CAAA,GAAI,EAAR,EAAYmE,EAAZ,CAPkC;AAAA,YASlCjH,IAAA,CAAMkD,CAAN,EAAS,UAAWL,CAAX,EAAe;AAAA,gBACtBC,CAAA,CAAEkB,IAAF,CAAQnB,CAAA,CAAE0E,OAAF,CAAW,MAAX,EAAmB,EAAnB,EAAwBA,OAAxB,CAAiC,MAAjC,EAAyC,EAAzC,CAAR,EADsB;AAAA,aAAxB,EATkC;AAAA,YAalCN,EAAA,GAAK9H,KAAA,CAAM+H,QAAN,CAAgB,KAAK1F,OAAL,EAAhB,EAAgC,EAACyE,IAAA,EAAO,IAAR,EAAhC,CAAL,CAbkC;AAAA,YAclCgB,EAAA,CAAGO,KAAH,GAAW1E,CAAX,CAdkC;AAAA,YAgBlC,OAAO,KAAKwE,OAAL,CAAcL,EAAd,CAAP,CAhBkC;AAAA,SAApC,EA1lBY;AAAA,QA6mBZnH,GAAA,CAAIsD,MAAJ,CAAY,OAAZ,EAAqB,UAAWqE,CAAX,EAAe;AAAA,YAMlC,IAAIR,EAAA,GAAK9H,KAAA,CAAM+H,QAAN,CAAgB,KAAK1F,OAAL,EAAhB,EAAgC,EAAhC,CAAT,EACEkG,cADF,CANkC;AAAA,YAQhC,CARgC;AAAA,YAUlCT,EAAA,CAAGU,KAAH,GAAWF,CAAX,CAVkC;AAAA,YAYlC,IAAKR,EAAA,CAAG1G,GAAH,IAAU0G,EAAA,CAAGhB,IAAlB,EAAwB;AAAA,gBACtByB,cAAA,GAAiB,EAAjB,CADsB;AAAA,gBAEtB1H,IAAA,CAAMiH,EAAA,CAAGxF,OAAT,EAAkB,UAAWY,CAAX,EAAcS,CAAd,EAAkB;AAAA,oBAClC,IAAMA,CAAA,GAAI,CAAL,GAAU2E,CAAf,EAAkB;AAAA,wBAChB,OAAOtI,KAAA,CAAM8D,IAAb,CADgB;AAAA,qBADgB;AAAA,oBAIlCyE,cAAA,CAAe1D,IAAf,CAAqB3B,CAArB,EAJkC;AAAA,iBAApC,EAFsB;AAAA,gBAQtB4E,EAAA,CAAGxF,OAAH,GAAaiG,cAAb,CARsB;AAAA,aAZU;AAAA,YAuBlC,OAAO,KAAKJ,OAAL,CAAcL,EAAd,CAAP,CAvBkC;AAAA,SAApC,EA7mBY;AAAA,QAuoBZnH,GAAA,CAAIsD,MAAJ,CAAY,OAAZ,EAAqB,UAAWqE,CAAX,EAAe;AAAA,YAMlC,IAAIR,EAAA,GAAK9H,KAAA,CAAM+H,QAAN,CAAgB,KAAK1F,OAAL,EAAhB,EAAgC,EAAhC,CAAT,EACEkG,cADF,CANkC;AAAA,YAQhC,CARgC;AAAA,YAUlCT,EAAA,CAAGW,KAAH,GAAWH,CAAX,CAVkC;AAAA,YAYlC,IAAKR,EAAA,CAAG1G,GAAH,IAAU0G,EAAA,CAAGhB,IAAb,IAAqB,CAACgB,EAAA,CAAGU,KAA9B,EAAqC;AAAA,gBACnCD,cAAA,GAAiB,EAAjB,CADmC;AAAA,gBAEnC1H,IAAA,CAAMiH,EAAA,CAAGxF,OAAT,EAAkB,UAAWY,CAAX,EAAcS,CAAd,EAAkB;AAAA,oBAClC,IAAMA,CAAA,GAAI,CAAL,GAAU2E,CAAf,EAAkB;AAAA,wBAChBC,cAAA,CAAe1D,IAAf,CAAqB3B,CAArB,EADgB;AAAA,qBADgB;AAAA,iBAApC,EAFmC;AAAA,gBAOnC4E,EAAA,CAAGxF,OAAH,GAAaiG,cAAb,CAPmC;AAAA,aAArC,MASK;AAAA,gBACHT,EAAA,GAAK9H,KAAA,CAAM+H,QAAN,CAAgB,KAAK1F,OAAL,EAAhB,EAAgC;AAAA,oBAACjB,GAAA,EAAM,IAAP;AAAA,oBAAaqH,KAAA,EAAQH,CAArB;AAAA,iBAAhC,CAAL,CADG;AAAA,aArB6B;AAAA,YAyBlC,OAAO,KAAKH,OAAL,CAAcL,EAAd,CAAP,CAzBkC;AAAA,SAApC,EAvoBY;AAAA,QAmqBZnH,GAAA,CAAIsD,MAAJ,CAAY,QAAZ,EAAsB,UAAWyE,IAAX,EAAiBC,IAAjB,EAAuBC,IAAvB,EAA8B;AAAA,YAKlD,IAAIC,QAAA,GAAW,IAAf,EAAqB9E,CAAA,GAAI,EAAzB,EAA6B+E,IAAA,GAAOzE,SAApC,EAA+CS,IAA/C,CALkD;AAAA,YAMlD,IAAK9E,KAAA,CAAMsE,QAAN,CAAgBoE,IAAhB,KACF,CAAArE,SAAA,CAAUxB,MAAV,KAAqB,CAArB,IAA0BwB,SAAA,CAAUxB,MAAV,KAAqB,CAA/C,CADH,EAEA;AAAA,gBACEkB,CAAA,CAAE2E,IAAF,IAAUC,IAAV,CADF;AAAA,gBAEE,IAAKtE,SAAA,CAAUxB,MAAV,KAAqB,CAA1B,EAA6B;AAAA,oBAC3BgG,QAAA,GAAWD,IAAX,CAD2B;AAAA,iBAF/B;AAAA,aAFA,MAQK;AAAA,gBACH7E,CAAA,GAAI2E,IAAJ,CADG;AAAA,gBAEH,IAAKI,IAAA,CAAKjG,MAAL,KAAgB,CAArB,EAAwB;AAAA,oBACtBgG,QAAA,GAAWF,IAAX,CADsB;AAAA,iBAFrB;AAAA,aAd6C;AAAA,YAqBlD7D,IAAA,GAAO,IAAP,CArBkD;AAAA,YAsBlD1D,GAAA,CAAIwB,IAAJ,CAAU,IAAV,EAtBkD;AAAA,YAuBlD/B,IAAA,CAAM,KAAKwB,OAAL,GAAeC,OAArB,EAA8B,UAAWoB,CAAX,EAAe;AAAA,gBAC3C,IAAIwB,CAAA,GAAInB,CAAR,CAD2C;AAAA,gBAE3C,IAAK/D,KAAA,CAAMqG,UAAN,CAAkBnB,CAAlB,CAAL,EAA4B;AAAA,oBAC1BA,CAAA,GAAIA,CAAA,CAAEd,KAAF,CAASpE,KAAA,CAAM+H,QAAN,CAAgBrE,CAAhB,EAAmB,EAAnB,CAAT,CAAJ,CAD0B;AAAA,iBAA5B,MAGK;AAAA,oBACH,IAAKxD,CAAA,CAAEmG,UAAF,CAAcnB,CAAd,CAAL,EAAwB;AAAA,wBACtBA,CAAA,GAAIA,CAAA,CAAGlF,KAAA,CAAM+H,QAAN,CAAgBrE,CAAhB,EAAmB,EAAnB,CAAH,CAAJ,CADsB;AAAA,qBADrB;AAAA,iBALsC;AAAA,gBAU3C,IAAK1D,KAAA,CAAM4B,QAAN,CAAgBsD,CAAhB,CAAL,EAA0B;AAAA,oBACxBJ,IAAA,CAAK8C,MAAL,GAAcmB,MAAd,CAAsBrF,CAAA,CAAEc,KAAxB,EAA+BU,CAA/B,EAAkC2D,QAAlC,EADwB;AAAA,iBAViB;AAAA,aAA7C,EAvBkD;AAAA,YAqClD,IAAK,KAAKxG,OAAL,GAAeC,OAAf,CAAuBO,MAA5B,EAAoC;AAAA,gBAClC,KAAKR,OAAL,CAAc,EAAEjB,GAAA,EAAM,IAAR,EAAd,EADkC;AAAA,aArCc;AAAA,YAwClD,OAAO,IAAP,CAxCkD;AAAA,SAApD,EAnqBY;AAAA,QA6sBZT,GAAA,CAAIsD,MAAJ,CAAY,QAAZ,EAAsB,UAAW4E,QAAX,EAAsB;AAAA,YAK1C,IAAI/D,IAAA,GAAO,IAAX,EAAiBI,CAAA,GAAI,CAArB,CAL0C;AAAA,YAM1C9D,GAAA,CAAIwB,IAAJ,CAAU,IAAV,EAN0C;AAAA,YAO1C/B,IAAA,CAAM,KAAKwB,OAAL,GAAeC,OAArB,EAA8B,UAAWoB,CAAX,EAAe;AAAA,gBAC3CoB,IAAA,CAAK8C,MAAL,GAAcoB,MAAd,CAAsBtF,CAAA,CAAEc,KAAxB,EAD2C;AAAA,gBAE3CU,CAAA,GAF2C;AAAA,aAA7C,EAP0C;AAAA,YAW1C,IAAK,KAAK7C,OAAL,GAAeC,OAAf,CAAuBO,MAA5B,EAAoC;AAAA,gBAClC,KAAKR,OAAL,CAAc,EACZjB,GAAA,EAAM,IADM,EAAd,EADkC;AAAA,gBAIlC0D,IAAA,CAAK8C,MAAL,GAAcqB,YAAd,CAA4BJ,QAA5B,EAJkC;AAAA,aAXM;AAAA,YAkB1C,OAAO3D,CAAP,CAlB0C;AAAA,SAA5C,EA7sBY;AAAA,QAmuBZvE,GAAA,CAAIsD,MAAJ,CAAY,OAAZ,EAAqB,YAAY;AAAA,YAK/B7C,GAAA,CAAIwB,IAAJ,CAAU,IAAV,EAL+B;AAAA,YAM/B,OAAO,KAAKP,OAAL,GAAeC,OAAf,CAAuBO,MAA9B,CAN+B;AAAA,SAAjC,EAnuBY;AAAA,QA4uBZlC,GAAA,CAAIsD,MAAJ,CAAY,UAAZ,EAAwB,UAAWE,CAAX,EAAc+E,KAAd,EAAsB;AAAA,YAM5C,IAAK/E,CAAL,EAAQ;AAAA,gBACN,IAAIW,IAAA,GAAO,IAAX,CADM;AAAA,gBAENqE,UAAA,CAAY,YAAY;AAAA,oBACtB/H,GAAA,CAAIwB,IAAJ,CAAUkC,IAAV,EADsB;AAAA,oBAEtBX,CAAA,CAAEvB,IAAF,CAAQkC,IAAA,CAAKqD,OAAL,CAAcrD,IAAA,CAAKzC,OAAL,EAAd,CAAR,EAFsB;AAAA,iBAAxB,EAGG6G,KAAA,IAAS,CAHZ,EAFM;AAAA,aANoC;AAAA,YAe5C,OAAO,IAAP,CAf4C;AAAA,SAA9C,EA5uBY;AAAA,QA8vBZvI,GAAA,CAAIsD,MAAJ,CAAY,KAAZ,EAAmB,YAAY;AAAA,YAK7B7C,GAAA,CAAIwB,IAAJ,CAAU,IAAV,EAL6B;AAAA,YAM7B,OAAO,KAAKP,OAAL,GAAeC,OAAtB,CAN6B;AAAA,SAA/B,EA9vBY;AAAA,QAuwBZ3B,GAAA,CAAIsD,MAAJ,CAAY,WAAZ,EAAyB,YAAY;AAAA,YAKnC,OAAOpC,IAAA,CAAKwB,SAAL,CAAgB,KAAK+F,GAAL,EAAhB,CAAP,CALmC;AAAA,SAArC,EAvwBY;AAAA,QA8wBZzI,GAAA,CAAIsD,MAAJ,CAAY,OAAZ,EAAqB,YAAY;AAAA,YAK/B7C,GAAA,CAAIwB,IAAJ,CAAU,IAAV,EAL+B;AAAA,YAM/B,OAAO,KAAKP,OAAL,GAAeC,OAAf,CAAuB,CAAvB,KAA6B,KAApC,CAN+B;AAAA,SAAjC,EA9wBY;AAAA,QAsxBZ3B,GAAA,CAAIsD,MAAJ,CAAY,MAAZ,EAAoB,YAAY;AAAA,YAK9B7C,GAAA,CAAIwB,IAAJ,CAAU,IAAV,EAL8B;AAAA,YAM9B,OAAO,KAAKP,OAAL,GAAeC,OAAf,CAAuB,KAAKD,OAAL,GAAeC,OAAf,CAAuBO,MAAvB,GAAgC,CAAvD,KACL,KADF,CAN8B;AAAA,SAAhC,EAtxBY;AAAA,QAiyBZlC,GAAA,CAAIsD,MAAJ,CAAY,KAAZ,EAAmB,YAAY;AAAA,YAM7B,IAAIoF,KAAA,GAAQ,CAAZ,EAAevE,IAAA,GAAO,IAAtB,CAN6B;AAAA,YAO7B1D,GAAA,CAAIwB,IAAJ,CAAUkC,IAAV,EAP6B;AAAA,YAQ7BjE,IAAA,CAAMwD,SAAN,EAAiB,UAAWa,CAAX,EAAe;AAAA,gBAC9BrE,IAAA,CAAMiE,IAAA,CAAKzC,OAAL,GAAeC,OAArB,EAA8B,UAAWoB,CAAX,EAAe;AAAA,oBAC3C2F,KAAA,GAAQA,KAAA,GAAS,CAAA3F,CAAA,CAAEwB,CAAF,KAAQ,CAAR,CAAjB,CAD2C;AAAA,iBAA7C,EAD8B;AAAA,aAAhC,EAR6B;AAAA,YAa7B,OAAOmE,KAAP,CAb6B;AAAA,SAA/B,EAjyBY;AAAA,QAizBZ1I,GAAA,CAAIsD,MAAJ,CAAY,KAAZ,EAAmB,UAAWiB,CAAX,EAAe;AAAA,YAMhC,IAAIoE,MAAA,GAAS,IAAb,CANgC;AAAA,YAOhClI,GAAA,CAAIwB,IAAJ,CAAU,IAAV,EAPgC;AAAA,YAQhC/B,IAAA,CAAM,KAAKwB,OAAL,GAAeC,OAArB,EAA8B,UAAWoB,CAAX,EAAe;AAAA,gBAC3C,IAAK4F,MAAA,KAAW,IAAX,IAAmB5F,CAAA,CAAEwB,CAAF,IAAOoE,MAA/B,EAAuC;AAAA,oBACrCA,MAAA,GAAS5F,CAAA,CAAEwB,CAAF,CAAT,CADqC;AAAA,iBADI;AAAA,aAA7C,EARgC;AAAA,YAahC,OAAOoE,MAAP,CAbgC;AAAA,SAAlC,EAjzBY;AAAA,QAy2BZ,CAAC,YAAY;AAAA,YACX,IAAIC,iBAAA,GAAqB,YAAY;AAAA,oBACnC,IAAIC,aAAJ,EAAmBC,YAAnB,EAAiCC,MAAjC,CADmC;AAAA,oBAGnCF,aAAA,GAAgB,UAAWG,QAAX,EAAqBC,SAArB,EAAgCC,QAAhC,EAA2C;AAAA,wBACzD,IAAIC,OAAJ,EAAaC,OAAb,EAAsBC,OAAtB,EAA+BC,KAA/B,CADyD;AAAA,wBAGzD,IAAKJ,QAAA,CAAShH,MAAT,KAAoB,CAAzB,EAA4B;AAAA,4BAC1BiH,OAAA,GAAUH,QAAA,CAASE,QAAA,CAAS,CAAT,CAAT,CAAV,CAD0B;AAAA,4BAE1BG,OAAA,GAAU,KAAV,CAF0B;AAAA,4BAG1BD,OAAA,GAAUH,SAAA,CAAUC,QAAA,CAAS,CAAT,CAAV,CAAV,CAH0B;AAAA,yBAA5B,MAKK;AAAA,4BACHC,OAAA,GAAUH,QAAA,CAASE,QAAA,CAAS,CAAT,CAAT,CAAV,CADG;AAAA,4BAEHG,OAAA,GAAUH,QAAA,CAAS,CAAT,CAAV,CAFG;AAAA,4BAGHE,OAAA,GAAUH,SAAA,CAAUC,QAAA,CAAS,CAAT,CAAV,CAAV,CAHG;AAAA,yBARoD;AAAA,wBAezD,QAASG,OAAT;AAAA,wBACE,KAAK,KAAL;AAAA,4BACE,OAAOF,OAAA,KAAYC,OAAnB,CAFJ;AAAA,wBAGE,KAAK,KAAL;AAAA,4BACE,OAAOD,OAAA,KAAYC,OAAnB,CAJJ;AAAA,wBAKE,KAAK,GAAL;AAAA,4BACE,OAAOD,OAAA,GAAUC,OAAjB,CANJ;AAAA,wBAOE,KAAK,GAAL;AAAA,4BACE,OAAOD,OAAA,GAAUC,OAAjB,CARJ;AAAA,wBASE,KAAK,IAAL;AAAA,4BACE,OAAOD,OAAA,IAAWC,OAAlB,CAVJ;AAAA,wBAWE,KAAK,IAAL;AAAA,4BACE,OAAOD,OAAA,IAAWC,OAAlB,CAZJ;AAAA,wBAaE,KAAK,IAAL;AAAA,4BACE,OAAOD,OAAA,IAAWC,OAAlB,CAdJ;AAAA,wBAeE,KAAK,IAAL;AAAA,4BACE,OAAOD,OAAA,IAAWC,OAAlB,CAhBJ;AAAA,wBAiBE;AAAA,4BACE,MAAM5C,MAAA,CAAQ6C,OAAR,IAAoB,mBAA1B,CAlBJ;AAAA,yBAfyD;AAAA,qBAA3D,CAHmC;AAAA,oBA4CnCP,YAAA,GAAe,UAAWE,QAAX,EAAqBC,SAArB,EAAiC;AAAA,wBAC9C,IAAIM,OAAA,GAAU,EAAd,EAAkBhH,CAAlB,EAAqBiH,MAArB,CAD8C;AAAA,wBAG9C,KAAMjH,CAAN,IAAWyG,QAAX,EAAqB;AAAA,4BACnB,IAAKA,QAAA,CAAS3F,cAAT,CAAyBd,CAAzB,CAAL,EAAmC;AAAA,gCACjCgH,OAAA,CAAQhH,CAAR,IAAayG,QAAA,CAASzG,CAAT,CAAb,CADiC;AAAA,6BADhB;AAAA,yBAHyB;AAAA,wBAQ9C,KAAMA,CAAN,IAAW0G,SAAX,EAAsB;AAAA,4BACpB,IAAKA,SAAA,CAAU5F,cAAV,CAA0Bd,CAA1B,KAAiCA,CAAA,KAAM,OAAvC,IACHA,CAAA,KAAM,MADR,EAEA;AAAA,gCACEiH,MAAA,GAAS,CAACnK,KAAA,CAAM6D,WAAN,CAAmBqG,OAAA,CAAQhH,CAAR,CAAnB,CAAD,GAAmC,QAAnC,GAA8C,EAAvD,CADF;AAAA,gCAEEgH,OAAA,CAAQC,MAAA,GAAShD,MAAA,CAAQjE,CAAR,CAAjB,IAAiC0G,SAAA,CAAU1G,CAAV,CAAjC,CAFF;AAAA,6BAHoB;AAAA,yBARwB;AAAA,wBAgB9C,OAAOgH,OAAP,CAhB8C;AAAA,qBAAhD,CA5CmC;AAAA,oBA+DnCR,MAAA,GAAS,UAAWU,KAAX,EAAmB;AAAA,wBAC1B,IACEC,WADF,EACenH,CADf,EAEE2G,QAAA,GAAWxF,SAFb,EAGEiG,UAAA,GAAaT,QAAA,CAAShH,MAHxB,EAIE0H,WAAA,GAAc,EAJhB,CAD0B;AAAA,wBAMxB,CANwB;AAAA,wBAQ1B,IAAK,OAAOH,KAAA,CAAM9I,MAAb,KAAwB,UAA7B,EAAyC;AAAA,4BACvC,IAAK8I,KAAA,CAAMpK,KAAX,EAAkB;AAAA,gCAAEqK,WAAA,GAAcD,KAAA,EAAd,CAAF;AAAA,6BAAlB,MACK;AAAA,gCACH,MAAM,iCAAN,CADG;AAAA,6BAFkC;AAAA,yBAAzC,MAMK;AAAA,4BAAEC,WAAA,GAAcD,KAAd,CAAF;AAAA,yBAdqB;AAAA,wBAgB1B,KAAK/H,OAAL,CAAc,EACZC,OAAA,EAAU,KAAKsF,MAAL,GAAcC,KAAd,CAAqB,KAAKxF,OAAL,EAArB,CADE,EAAd,EAhB0B;AAAA,wBAoB1BrC,KAAA,CAAMa,IAAN,CAAY,KAAKwB,OAAL,GAAeC,OAA3B,EAAoC,UAAWqH,QAAX,EAAsB;AAAA,4BACxDU,WAAA,CAAYxJ,IAAZ,CAAkB,UAAW+I,SAAX,EAAuB;AAAA,gCACvC,IAAIY,QAAJ,EAAcC,KAAA,GAAQ,IAAtB,CADuC;AAAA,gCAEvC;AAAA,oCACE,KAAMvH,CAAA,GAAI,CAAV,EAAaA,CAAA,GAAIoH,UAAjB,EAA6BpH,CAAA,EAA7B,EAAkC;AAAA,wCAChCsH,QAAA,GAAWX,QAAA,CAAS3G,CAAT,CAAX,CADgC;AAAA,wCAEhC,IAAK,OAAOsH,QAAP,KAAoB,UAAzB,EAAqC;AAAA,4CACnCC,KAAA,GAAQD,QAAA,CAAUb,QAAV,EAAoBC,SAApB,CAAR,CADmC;AAAA,yCAArC,MAGK,IAAK,OAAOY,QAAP,KAAoB,QAApB,IAAgCA,QAAA,CAAS3H,MAA9C,EAAsD;AAAA,4CACzD4H,KAAA,GAAQjB,aAAA,CAAeG,QAAf,EAAyBC,SAAzB,EAAoCY,QAApC,CAAR,CADyD;AAAA,yCAAtD,MAGA;AAAA,4CACHC,KAAA,GAAQ,KAAR,CADG;AAAA,yCAR2B;AAAA,wCAYhC,IAAK,CAACA,KAAN,EAAa;AAAA,4CAAE,gBAAF;AAAA,yCAZmB;AAAA,qCAHG;AAAA,gCAkBvC,IAAKA,KAAL,EAAY;AAAA,oCACVF,WAAA,CAAY1F,IAAZ,CAAkB4E,YAAA,CAAcE,QAAd,EAAwBC,SAAxB,CAAlB,EADU;AAAA,iCAlB2B;AAAA,6BAAzC,EADwD;AAAA,yBAA1D,EApB0B;AAAA,wBA4C1B,OAAO5J,KAAA,CAAOuK,WAAP,GAAP,CA5C0B;AAAA,qBAA5B,CA/DmC;AAAA,oBA8GnC,OAAOb,MAAP,CA9GmC;AAAA,iBAAZ,EAAzB,CADW;AAAA,YAkHX/I,GAAA,CAAIsD,MAAJ,CAAY,MAAZ,EAAoBsF,iBAApB,EAlHW;AAAA,SAAZ,EAAD,EAz2BY;AAAA,QA89BZ5I,GAAA,CAAIsD,MAAJ,CAAY,KAAZ,EAAmB,UAAWiB,CAAX,EAAe;AAAA,YAMhC,IAAIwF,OAAA,GAAU,IAAd,CANgC;AAAA,YAOhCtJ,GAAA,CAAIwB,IAAJ,CAAU,IAAV,EAPgC;AAAA,YAQhC/B,IAAA,CAAM,KAAKwB,OAAL,GAAeC,OAArB,EAA8B,UAAWoB,CAAX,EAAe;AAAA,gBAC3C,IAAKgH,OAAA,KAAY,IAAZ,IAAoBhH,CAAA,CAAEwB,CAAF,IAAOwF,OAAhC,EAAyC;AAAA,oBACvCA,OAAA,GAAUhH,CAAA,CAAEwB,CAAF,CAAV,CADuC;AAAA,iBADE;AAAA,aAA7C,EARgC;AAAA,YAahC,OAAOwF,OAAP,CAbgC;AAAA,SAAlC,EA99BY;AAAA,QA8+BZ/J,GAAA,CAAIsD,MAAJ,CAAY,QAAZ,EAAsB,YAAY;AAAA,YAQhC,IAAI0G,EAAA,GAAK,EAAT,EAAa7B,IAAA,GAAOzE,SAApB,CARgC;AAAA,YAShCjD,GAAA,CAAIwB,IAAJ,CAAU,IAAV,EATgC;AAAA,YAUhC,IAAKyB,SAAA,CAAUxB,MAAV,KAAqB,CAA1B,EAA6B;AAAA,gBAE3BhC,IAAA,CAAM,KAAKwB,OAAL,GAAeC,OAArB,EAA8B,UAAWoB,CAAX,EAAe;AAAA,oBAE3CiH,EAAA,CAAG9F,IAAH,CAASnB,CAAA,CAAEoF,IAAA,CAAK,CAAL,CAAF,CAAT,EAF2C;AAAA,iBAA7C,EAF2B;AAAA,aAA7B,MAOK;AAAA,gBACHjI,IAAA,CAAM,KAAKwB,OAAL,GAAeC,OAArB,EAA8B,UAAWoB,CAAX,EAAe;AAAA,oBAC3C,IAAIkH,GAAA,GAAM,EAAV,CAD2C;AAAA,oBAE3C/J,IAAA,CAAMiI,IAAN,EAAY,UAAW5D,CAAX,EAAe;AAAA,wBACzB0F,GAAA,CAAI/F,IAAJ,CAAUnB,CAAA,CAAEwB,CAAF,CAAV,EADyB;AAAA,qBAA3B,EAF2C;AAAA,oBAK3CyF,EAAA,CAAG9F,IAAH,CAAS+F,GAAT,EAL2C;AAAA,iBAA7C,EADG;AAAA,aAjB2B;AAAA,YA0BhC,OAAOD,EAAP,CA1BgC;AAAA,SAAlC,EA9+BY;AAAA,QA0gCZhK,GAAA,CAAIsD,MAAJ,CAAY,UAAZ,EAAwB,YAAY;AAAA,YAOlC,IAAI0G,EAAA,GAAK,EAAT,EAAa7B,IAAA,GAAOzE,SAApB,CAPkC;AAAA,YAQlCjD,GAAA,CAAIwB,IAAJ,CAAU,IAAV,EARkC;AAAA,YASlC,IAAKyB,SAAA,CAAUxB,MAAV,KAAqB,CAA1B,EAA6B;AAAA,gBAE3BhC,IAAA,CAAM,KAAKwB,OAAL,GAAeC,OAArB,EAA8B,UAAWoB,CAAX,EAAe;AAAA,oBAC3C,IAAIqB,CAAA,GAAIrB,CAAA,CAAEoF,IAAA,CAAK,CAAL,CAAF,CAAR,EAAoB+B,GAAA,GAAM,KAA1B,CAD2C;AAAA,oBAE3ChK,IAAA,CAAM8J,EAAN,EAAU,UAAW/D,CAAX,EAAe;AAAA,wBACvB,IAAK7B,CAAA,KAAM6B,CAAX,EAAc;AAAA,4BACZiE,GAAA,GAAM,IAAN,CADY;AAAA,4BAEZ,OAAO7K,KAAA,CAAM8D,IAAb,CAFY;AAAA,yBADS;AAAA,qBAAzB,EAF2C;AAAA,oBAQ3C,IAAK,CAAC+G,GAAN,EAAW;AAAA,wBACTF,EAAA,CAAG9F,IAAH,CAASE,CAAT,EADS;AAAA,qBARgC;AAAA,iBAA7C,EAF2B;AAAA,aAA7B,MAeK;AAAA,gBACHlE,IAAA,CAAM,KAAKwB,OAAL,GAAeC,OAArB,EAA8B,UAAWoB,CAAX,EAAe;AAAA,oBAC3C,IAAIkH,GAAA,GAAM,EAAV,EAAcC,GAAA,GAAM,KAApB,CAD2C;AAAA,oBAE3ChK,IAAA,CAAMiI,IAAN,EAAY,UAAW5D,CAAX,EAAe;AAAA,wBACzB0F,GAAA,CAAI/F,IAAJ,CAAUnB,CAAA,CAAEwB,CAAF,CAAV,EADyB;AAAA,qBAA3B,EAF2C;AAAA,oBAK3CrE,IAAA,CAAM8J,EAAN,EAAU,UAAW/D,CAAX,EAAe;AAAA,wBACvB,IAAIkE,IAAA,GAAO,IAAX,CADuB;AAAA,wBAEvBjK,IAAA,CAAMiI,IAAN,EAAY,UAAW5D,CAAX,EAAchC,CAAd,EAAkB;AAAA,4BAC5B,IAAK0H,GAAA,CAAI1H,CAAJ,MAAW0D,CAAA,CAAE1D,CAAF,CAAhB,EAAsB;AAAA,gCACpB4H,IAAA,GAAO,KAAP,CADoB;AAAA,gCAEpB,OAAO9K,KAAA,CAAM8D,IAAb,CAFoB;AAAA,6BADM;AAAA,yBAA9B,EAFuB;AAAA,wBAQvB,IAAKgH,IAAL,EAAW;AAAA,4BACTD,GAAA,GAAM,IAAN,CADS;AAAA,4BAET,OAAO7K,KAAA,CAAM8D,IAAb,CAFS;AAAA,yBARY;AAAA,qBAAzB,EAL2C;AAAA,oBAkB3C,IAAK,CAAC+G,GAAN,EAAW;AAAA,wBACTF,EAAA,CAAG9F,IAAH,CAAS+F,GAAT,EADS;AAAA,qBAlBgC;AAAA,iBAA7C,EADG;AAAA,aAxB6B;AAAA,YAgDlC,OAAOD,EAAP,CAhDkC;AAAA,SAApC,EA1gCY;AAAA,QA4jCZhK,GAAA,CAAIsD,MAAJ,CAAY,UAAZ,EAAwB,UAAW8G,QAAX,EAAqBC,WAArB,EAAmC;AAAA,YAMzD,IAAIL,EAAA,GAAK,EAAT,CANyD;AAAA,YAOzDvJ,GAAA,CAAIwB,IAAJ,CAAU,IAAV,EAPyD;AAAA,YAQzD/B,IAAA,CAAM,KAAKwB,OAAL,GAAeC,OAArB,EAA8B,UAAWoB,CAAX,EAAe;AAAA,gBAE3CiH,EAAA,CAAG9F,IAAH,CAASkG,QAAA,CAAS3C,OAAT,CAAkB,iBAAlB,EAAqC,UAAW7E,CAAX,EAAciD,CAAd,EAAkB;AAAA,oBAC9D,IAAIzB,CAAA,GAAIrB,CAAA,CAAE8C,CAAF,CAAR,CAD8D;AAAA,oBAE9D,OAAO,OAAOzB,CAAP,KAAa,QAAb,IAAyB,OAAOA,CAAP,KAAa,QAAtC,GAAiDA,CAAjD,GAAqDxB,CAA5D,CAF8D;AAAA,iBAAvD,CAAT,EAF2C;AAAA,aAA7C,EARyD;AAAA,YAezD,OAAQ,CAACyH,WAAF,GAAiBL,EAAA,CAAGM,IAAH,CAAS,EAAT,CAAjB,GAAiCN,EAAxC,CAfyD;AAAA,SAA3D,EA5jCY;AAAA,QA+kCZhK,GAAA,CAAIsD,MAAJ,CAAY,MAAZ,EAAoB,UAAWC,CAAX,EAAe;AAAA,YAMjC9C,GAAA,CAAIwB,IAAJ,CAAU,IAAV,EANiC;AAAA,YAOjC/B,IAAA,CAAM,KAAKwB,OAAL,GAAeC,OAArB,EAA8B4B,CAA9B,EAPiC;AAAA,YAQjC,OAAO,IAAP,CARiC;AAAA,SAAnC,EA/kCY;AAAA,QAylCZvD,GAAA,CAAIsD,MAAJ,CAAY,KAAZ,EAAmB,UAAWC,CAAX,EAAe;AAAA,YAMhC,IAAIyG,EAAA,GAAK,EAAT,CANgC;AAAA,YAOhCvJ,GAAA,CAAIwB,IAAJ,CAAU,IAAV,EAPgC;AAAA,YAQhC/B,IAAA,CAAM,KAAKwB,OAAL,GAAeC,OAArB,EAA8B,UAAWoB,CAAX,EAAe;AAAA,gBAC3CiH,EAAA,CAAG9F,IAAH,CAASX,CAAA,CAAGR,CAAH,CAAT,EAD2C;AAAA,aAA7C,EARgC;AAAA,YAWhC,OAAOiH,EAAP,CAXgC;AAAA,SAAlC,EAzlCY;AAAA,QAymCZzK,CAAA,GAAI,UAAW0G,CAAX,EAAe;AAAA,YAOjB,IAAIsE,GAAA,GAAM,EAAV,EACEC,EAAA,GAAK,EADP,EAEEC,EAAA,GAAK,CAFP,EAGEC,QAAA,GAAW;AAAA,oBACTN,QAAA,EAAoB,KADX;AAAA,oBAETO,QAAA,EAAoB,KAFX;AAAA,oBAGTC,QAAA,EAAoB,KAHX;AAAA,oBAITC,QAAA,EAAoB,KAJX;AAAA,oBAKTC,UAAA,EAAoB,KALX;AAAA,oBAMTC,WAAA,EAAoB,KANX;AAAA,oBAOTC,iBAAA,EAAoB,IAPX;AAAA,oBAQTC,SAAA,EAAoB,GARX;AAAA,oBASTC,IAAA,EAAoB,EATX;AAAA,iBAHb,EAcEC,EAAA,GAAK,IAAIC,IAAJ,EAdP,EAeEC,UAAA,GAAa,CAff,EAgBEC,UAAA,GAAa,CAhBf,EAiBEC,KAAA,GAAQ,EAjBV,EAkBEC,GAlBF,EAkBOC,UAlBP,EAkBmBC,IAlBnB,CAPiB;AAAA,YA0Bf,CA1Be;AAAA,YAyCjBD,UAAA,GAAa,UAAWE,OAAX,EAAqB;AAAA,gBAOhC,IAAIC,OAAA,GAAU,EAAd,EAAkBC,aAAA,GAAgB,KAAlC,CAPgC;AAAA,gBAShC,IAAKF,OAAA,CAAQzJ,MAAR,KAAmB,CAAxB,EAA2B;AAAA,oBACzB,OAAOqI,GAAP,CADyB;AAAA,iBATK;AAAA,gBAahCrK,IAAA,CAAMyL,OAAN,EAAe,UAAWnI,CAAX,EAAe;AAAA,oBAE5B,IAAKjE,CAAA,CAAEoE,QAAF,CAAYH,CAAZ,KAAmB,sBAAsBI,IAAtB,CAA4BJ,CAA5B,CAAnB,IACH+G,GAAA,CAAIC,EAAA,CAAGhH,CAAH,CAAJ,CADF,EAEA;AAAA,wBACEoI,OAAA,CAAQ1H,IAAR,CAAcqG,GAAA,CAAIC,EAAA,CAAGhH,CAAH,CAAJ,CAAd,EADF;AAAA,wBAEEqI,aAAA,GAAgB,IAAhB,CAFF;AAAA,qBAJ4B;AAAA,oBAS5B,IAAKtM,CAAA,CAAE0B,QAAF,CAAYuC,CAAZ,KAAmBA,CAAA,CAAEK,KAArB,IAA8BL,CAAA,CAAEM,IAAhC,IACHyG,GAAA,CAAIC,EAAA,CAAGhH,CAAA,CAAEK,KAAL,CAAJ,CADF,EAEA;AAAA,wBACE+H,OAAA,CAAQ1H,IAAR,CAAcqG,GAAA,CAAIC,EAAA,CAAGhH,CAAA,CAAEK,KAAL,CAAJ,CAAd,EADF;AAAA,wBAEEgI,aAAA,GAAgB,IAAhB,CAFF;AAAA,qBAX4B;AAAA,oBAgB5B,IAAKtM,CAAA,CAAEyB,OAAF,CAAWwC,CAAX,CAAL,EAAqB;AAAA,wBACnBtD,IAAA,CAAMsD,CAAN,EAAS,UAAWT,CAAX,EAAe;AAAA,4BACtB7C,IAAA,CAAMuL,UAAA,CAAY1I,CAAZ,CAAN,EAAuB,UAAW+I,EAAX,EAAgB;AAAA,gCACrCF,OAAA,CAAQ1H,IAAR,CAAc4H,EAAd,EADqC;AAAA,6BAAvC,EADsB;AAAA,yBAAxB,EADmB;AAAA,qBAhBO;AAAA,iBAA9B,EAbgC;AAAA,gBAsChC,IAAKD,aAAA,IAAiBD,OAAA,CAAQ1J,MAAR,GAAiB,CAAvC,EAA0C;AAAA,oBACxC0J,OAAA,GAAU,EAAV,CADwC;AAAA,iBAtCV;AAAA,gBA0ChC,OAAOA,OAAP,CA1CgC;AAAA,aAAlC,CAzCiB;AAAA,YAsFjBJ,GAAA,GAAM;AAAA,gBAKJL,EAAA,EAAe,UAAWY,EAAX,EAAgB;AAAA,oBAM7B,IAAKA,EAAL,EAAS;AAAA,wBACPZ,EAAA,GAAKY,EAAL,CADO;AAAA,wBAEPR,KAAA,GAAQ,EAAR,CAFO;AAAA,wBAGPF,UAAA,GAAa,CAAb,CAHO;AAAA,wBAIPC,UAAA,GAAa,CAAb,CAJO;AAAA,qBANoB;AAAA,oBAY7B,IAAKZ,QAAA,CAASI,UAAd,EAA0B;AAAA,wBACxBtC,UAAA,CAAY,YAAY;AAAA,4BACtBkC,QAAA,CAASI,UAAT,CAAoB7I,IAApB,CAA0BsI,GAA1B,EADsB;AAAA,yBAAxB,EAEG,CAFH,EADwB;AAAA,qBAZG;AAAA,oBAiB7B,IAAKG,QAAA,CAASK,WAAd,EAA2B;AAAA,wBACzBvC,UAAA,CAAY,YAAY;AAAA,4BACtBwD,YAAA,CAAaC,OAAb,CAAsB,WAAWvB,QAAA,CAASK,WAA1C,EACE7J,IAAA,CAAKwB,SAAL,CAAgB6H,GAAhB,CADF,EADsB;AAAA,yBAAxB,EADyB;AAAA,qBAjBE;AAAA,oBAuB7B,OAAOY,EAAP,CAvB6B;AAAA,iBAL3B;AAAA,gBA8BJe,MAAA,EAAe,UAAW3J,CAAX,EAAc2F,QAAd,EAAyB;AAAA,oBAMtC,IAAIiE,OAAA,GAAU,EAAd,EACEP,OAAA,GAAY,EADd,EAEEQ,KAAA,GAAYnM,WAAA,CAAasC,CAAb,CAFd,CANsC;AAAA,oBASpC,CAToC;AAAA,oBAUtCrC,IAAA,CAAMkM,KAAN,EAAa,UAAWhI,CAAX,EAAc7B,CAAd,EAAkB;AAAA,wBAC7B,IAAI8J,EAAJ,EAAQjJ,CAAR,CAD6B;AAAA,wBAE7B,IAAK7D,CAAA,CAAEyB,OAAF,CAAWoD,CAAX,KAAkB7B,CAAA,KAAM,CAA7B,EAAgC;AAAA,4BAC9BrC,IAAA,CAAMkE,CAAN,EAAS,UAAWkI,EAAX,EAAgB;AAAA,gCAEvBH,OAAA,CAAQjI,IAAR,CAAewG,QAAA,CAASM,iBAAT,KAA+B,OAAhC,GACVsB,EAAA,CAAGhH,WAAH,EADU,GAEPoF,QAAA,CAASM,iBAAT,KAA+B,OAAhC,GACFsB,EAAA,CAAGC,WAAH,EADE,GACiBD,EAHvB,EAFuB;AAAA,6BAAzB,EAD8B;AAAA,4BAQ9B,OAAO,IAAP,CAR8B;AAAA,yBAAhC,MAUK,IAAK/M,CAAA,CAAEyB,OAAF,CAAWoD,CAAX,CAAL,EAAqB;AAAA,4BACxBiI,EAAA,GAAK,EAAL,CADwB;AAAA,4BAExBnM,IAAA,CAAMkE,CAAN,EAAS,UAAWkI,EAAX,EAAeE,EAAf,EAAoB;AAAA,gCAC3BH,EAAA,CAAGF,OAAA,CAAQK,EAAR,CAAH,IAAkBF,EAAlB,CAD2B;AAAA,6BAA7B,EAFwB;AAAA,4BAKxBlI,CAAA,GAAIiI,EAAJ,CALwB;AAAA,yBAArB,MAQA,IAAK9M,CAAA,CAAE0B,QAAF,CAAYmD,CAAZ,KAAmBsG,QAAA,CAASM,iBAAjC,EAAoD;AAAA,4BACvD5H,CAAA,GAAI,EAAJ,CADuD;AAAA,4BAGvDjD,MAAA,CAAQiE,CAAR,EAAW,UAAWkI,EAAX,EAAeE,EAAf,EAAoB;AAAA,gCAC7BpJ,CAAA,CAAGsH,QAAA,CAASM,iBAAT,KAA+B,OAAhC,GAA2CwB,EAAA,CAAGlH,WAAH,EAA3C,GACGoF,QAAA,CAASM,iBAAT,KAA+B,OAAhC,GACAwB,EAAA,CAAGD,WAAH,EADA,GACmBC,EAFvB,IAE6BpI,CAAA,CAAEoI,EAAF,CAF7B,CAD6B;AAAA,6BAA/B,EAHuD;AAAA,4BAQvDpI,CAAA,GAAIhB,CAAJ,CARuD;AAAA,yBApB5B;AAAA,wBA+B7BqH,EAAA,GA/B6B;AAAA,wBAgC7BrG,CAAA,CAAEP,KAAF,GAAU,MAAM2C,MAAA,CAAQ1G,KAAA,GAAQD,EAAhB,EAAqB4M,KAArB,CAA4B,CAAC,CAA7B,CAAN,GAAyC,GAAzC,GACRjG,MAAA,CAAQ1G,KAAA,GAAQ2K,EAAhB,EAAqBgC,KAArB,CAA4B,CAAC,CAA7B,CADF,CAhC6B;AAAA,wBAkC7BrI,CAAA,CAAEN,IAAF,GAAS,IAAT,CAlC6B;AAAA,wBAmC7B8H,OAAA,CAAQ1H,IAAR,CAAcE,CAAA,CAAEP,KAAhB,EAnC6B;AAAA,wBAoC7B,IAAK6G,QAAA,CAASN,QAAd,EAAwB;AAAA,4BACtBhG,CAAA,GAAI7E,CAAA,CAAE6H,QAAF,CAAYsD,QAAA,CAASN,QAArB,EAA+BhG,CAA/B,CAAJ,CADsB;AAAA,yBApCK;AAAA,wBAuC7BmG,GAAA,CAAIrG,IAAJ,CAAUE,CAAV,EAvC6B;AAAA,wBAyC7BoG,EAAA,CAAGpG,CAAA,CAAEP,KAAL,IAAc0G,GAAA,CAAIrI,MAAJ,GAAa,CAA3B,CAzC6B;AAAA,wBA0C7B,IAAKwI,QAAA,CAASC,QAAT,IACF,CAAAzC,QAAA,IAAY7I,KAAA,CAAM6D,WAAN,CAAmBgF,QAAnB,CAAZ,CADH,EAEA;AAAA,4BACEwC,QAAA,CAASC,QAAT,CAAkB1I,IAAlB,CAAwBmC,CAAxB,EADF;AAAA,yBA5C6B;AAAA,wBA+C7BoH,GAAA,CAAIL,EAAJ,CAAQ,IAAIC,IAAJ,EAAR,EA/C6B;AAAA,qBAA/B,EAVsC;AAAA,oBA2DtC,OAAOM,IAAA,CAAME,OAAN,CAAP,CA3DsC;AAAA,iBA9BpC;AAAA,gBA2FJzF,IAAA,EAAe,UAAW/C,CAAX,EAAe;AAAA,oBAK5BmH,GAAA,GAAM/J,UAAA,CAAY+J,GAAZ,EAAiBnH,CAAA,CAAE8C,KAAF,CAAS,GAAT,CAAjB,CAAN,CAL4B;AAAA,oBAM5BsE,EAAA,GAAK,EAAL,CAN4B;AAAA,oBAO5BtK,IAAA,CAAMqK,GAAN,EAAW,UAAWxH,CAAX,EAAcR,CAAd,EAAkB;AAAA,wBAC3BiI,EAAA,CAAGzH,CAAA,CAAEc,KAAL,IAActB,CAAd,CAD2B;AAAA,qBAA7B,EAP4B;AAAA,oBAU5BiJ,GAAA,CAAIL,EAAJ,CAAQ,IAAIC,IAAJ,EAAR,EAV4B;AAAA,oBAW5B,OAAO,IAAP,CAX4B;AAAA,iBA3F1B;AAAA,gBAwGJhD,MAAA,EAAe,UAAWsE,EAAX,EAAeC,OAAf,EAAwBzE,QAAxB,EAAmC;AAAA,oBAOhD,IAAIf,EAAA,GAAK,EAAT,EAAayF,EAAb,EAAiBC,EAAjB,EAAqBC,EAArB,EAAyBC,SAAzB,CAPgD;AAAA,oBAQhD,IAAKrC,QAAA,CAASM,iBAAd,EAAiC;AAAA,wBAC/B7K,MAAA,CAAQwM,OAAR,EAAiB,UAAWvI,CAAX,EAAc4I,CAAd,EAAkB;AAAA,4BACjC7F,EAAA,CAAIuD,QAAA,CAASM,iBAAT,KAA+B,OAAhC,GAA2CgC,CAAA,CAAE1H,WAAF,EAA3C,GACEoF,QAAA,CAASM,iBAAT,KAA+B,OAAhC,GAA2CgC,CAAA,CAAET,WAAF,EAA3C,GACAS,CAFJ,IAES5I,CAFT,CADiC;AAAA,yBAAnC,EAD+B;AAAA,wBAM/BuI,OAAA,GAAUxF,EAAV,CAN+B;AAAA,qBARe;AAAA,oBAiBhDyF,EAAA,GAAKrC,GAAA,CAAIC,EAAA,CAAGkC,EAAH,CAAJ,CAAL,CAjBgD;AAAA,oBAkBhDG,EAAA,GAAKtN,CAAA,CAAE6H,QAAF,CAAYwF,EAAZ,EAAgBD,OAAhB,CAAL,CAlBgD;AAAA,oBAoBhDG,EAAA,GAAK,EAAL,CApBgD;AAAA,oBAqBhDC,SAAA,GAAY,KAAZ,CArBgD;AAAA,oBAsBhD5M,MAAA,CAAQ0M,EAAR,EAAY,UAAWzI,CAAX,EAAc7B,CAAd,EAAkB;AAAA,wBAC5B,IAAKlD,KAAA,CAAM6D,WAAN,CAAmB0J,EAAA,CAAGrK,CAAH,CAAnB,KAA8BqK,EAAA,CAAGrK,CAAH,MAAU6B,CAA7C,EAAgD;AAAA,4BAC9C0I,EAAA,CAAGvK,CAAH,IAAQ6B,CAAR,CAD8C;AAAA,4BAE9C2I,SAAA,GAAY,IAAZ,CAF8C;AAAA,yBADpB;AAAA,qBAA9B,EAtBgD;AAAA,oBA4BhD,IAAKA,SAAL,EAAgB;AAAA,wBACd,IAAKrC,QAAA,CAASE,QAAT,IACF,CAAA1C,QAAA,IAAY7I,KAAA,CAAM6D,WAAN,CAAmBgF,QAAnB,CAAZ,CADH,EAEA;AAAA,4BACEwC,QAAA,CAASE,QAAT,CAAkB3I,IAAlB,CAAwB4K,EAAxB,EAA4BtC,GAAA,CAAIC,EAAA,CAAGkC,EAAH,CAAJ,CAA5B,EAAyCI,EAAzC,EADF;AAAA,yBAHc;AAAA,wBAMdvC,GAAA,CAAIC,EAAA,CAAGkC,EAAH,CAAJ,IAAcG,EAAd,CANc;AAAA,wBAOdrB,GAAA,CAAIL,EAAJ,CAAQ,IAAIC,IAAJ,EAAR,EAPc;AAAA,qBA5BgC;AAAA,iBAxG9C;AAAA,gBA8IJ/C,MAAA,EAAe,UAAWqE,EAAX,EAAgB;AAAA,oBAM7BnC,GAAA,CAAIC,EAAA,CAAGkC,EAAH,CAAJ,EAAY5I,IAAZ,GAAmB,KAAnB,CAN6B;AAAA,iBA9I3B;AAAA,gBAsJJwE,YAAA,EAAe,UAAWJ,QAAX,EAAsB;AAAA,oBACnC,IAAIlF,CAAJ,CADmC;AAAA,oBAOnC,KAAMA,CAAA,GAAIuH,GAAA,CAAIrI,MAAJ,GAAa,CAAvB,EAA0Bc,CAAA,GAAI,CAAC,CAA/B,EAAkCA,CAAA,EAAlC,EAAuC;AAAA,wBAErC,IAAK,CAACuH,GAAA,CAAIvH,CAAJ,EAAOc,IAAb,EAAmB;AAAA,4BACjB,IAAK4G,QAAA,CAASG,QAAT,IACF,CAAA3C,QAAA,IAAY7I,KAAA,CAAM6D,WAAN,CAAmBgF,QAAnB,CAAZ,CADH,EAEA;AAAA,gCACEwC,QAAA,CAASG,QAAT,CAAkB5I,IAAlB,CAAwBsI,GAAA,CAAIvH,CAAJ,CAAxB,EADF;AAAA,6BAHiB;AAAA,4BAMjBwH,EAAA,CAAGD,GAAA,CAAIvH,CAAJ,EAAOa,KAAV,IAAmBoJ,SAAnB,CANiB;AAAA,4BAOjB1C,GAAA,CAAI2C,MAAJ,CAAYlK,CAAZ,EAAe,CAAf,EAPiB;AAAA,yBAFkB;AAAA,qBAPJ;AAAA,oBAmBnCwH,EAAA,GAAK,EAAL,CAnBmC;AAAA,oBAoBnCtK,IAAA,CAAMqK,GAAN,EAAW,UAAWxH,CAAX,EAAcR,CAAd,EAAkB;AAAA,wBAC3BiI,EAAA,CAAGzH,CAAA,CAAEc,KAAL,IAActB,CAAd,CAD2B;AAAA,qBAA7B,EApBmC;AAAA,oBAuBnCiJ,GAAA,CAAIL,EAAJ,CAAQ,IAAIC,IAAJ,EAAR,EAvBmC;AAAA,iBAtJjC;AAAA,gBA+KJlE,KAAA,EAAQ,UAAWxF,OAAX,EAAqB;AAAA,oBAK3B,IAAIyL,OAAJ,EAAaC,GAAb,EAAkBzL,OAAlB,EAA2B0L,OAA3B,EAAoCC,MAApC,EAA4CC,EAA5C,CAL2B;AAAA,oBAO3B,IAAK7C,QAAA,CAASO,SAAd,EAA0B;AAAA,wBACxBmC,GAAA,GAAM,EAAN,CADwB;AAAA,wBAExBlN,IAAA,CAAMwB,OAAA,CAAQ6F,SAAd,EAAyB,UAAWxE,CAAX,EAAe;AAAA,4BACtC,IAAKxD,CAAA,CAAEmG,UAAF,CAAc3C,CAAd,CAAL,EAAwB;AAAA,gCACtBqK,GAAA,GAAM,SAAN,CADsB;AAAA,gCAEtB,OAAO/N,KAAA,CAAM8D,IAAb,CAFsB;AAAA,6BADc;AAAA,yBAAxC,EAFwB;AAAA,wBAQxB,IAAKiK,GAAA,KAAQ,EAAb,EAAiB;AAAA,4BACfA,GAAA,GAAMxM,OAAA,CAASrB,CAAA,CAAE6H,QAAF,CAAY1F,OAAZ,EACb;AAAA,gCAAC4F,CAAA,EAAI,KAAL;AAAA,gCAAY7G,GAAA,EAAM,KAAlB;AAAA,gCAAyB0F,IAAA,EAAO,KAAhC;AAAA,6BADa,CAAT,CAAN,CADe;AAAA,yBARO;AAAA,qBAPC;AAAA,oBAqB3B,IAAK,CAACzE,OAAA,CAAQC,OAAT,IAAoB,CAACD,OAAA,CAAQjB,GAA7B,IACFiB,OAAA,CAAQjB,GAAR,IAAe+K,GAAA,CAAIL,EAAJ,KAAWzJ,OAAA,CAAQjB,GADrC,EAEA;AAAA,wBACEkB,OAAA,GAAU,EAAV,CADF;AAAA,wBAKE,IAAK+I,QAAA,CAASO,SAAT,IAAsBM,KAAA,CAAM6B,GAAN,CAA3B,EAAuC;AAAA,4BAErC7B,KAAA,CAAM6B,GAAN,EAAW7K,CAAX,GAAe8I,UAAA,EAAf,CAFqC;AAAA,4BAGrC,OAAOE,KAAA,CAAM6B,GAAN,EAAWzL,OAAlB,CAHqC;AAAA,yBAAvC,MAKK;AAAA,4BAEH,IAAKD,OAAA,CAAQ4F,CAAR,CAAUpF,MAAV,KAAqB,CAArB,IAA0BR,OAAA,CAAQK,KAAR,CAAcG,MAAd,KAAyB,CAAxD,EAA2D;AAAA,gCACzDhC,IAAA,CAAMqK,GAAN,EAAW,UAAWxH,CAAX,EAAe;AAAA,oCACxBpB,OAAA,CAAQuC,IAAR,CAAcnB,CAAd,EADwB;AAAA,iCAA1B,EADyD;AAAA,gCAIzDoK,OAAA,GAAUxL,OAAV,CAJyD;AAAA,6BAA3D,MAMK;AAAA,gCAGH0L,OAAA,GAAU5B,UAAA,CAAY/J,OAAA,CAAQK,KAApB,CAAV,CAHG;AAAA,gCAMH7B,IAAA,CAAMmN,OAAN,EAAe,UAAWtK,CAAX,EAAe;AAAA,oCAE5B,IAAKrB,OAAA,CAAQ4F,CAAR,CAAUpF,MAAV,KAAqB,CAArB,IAA0B5B,UAAA,CAAYyC,CAAZ,EAAerB,OAAA,CAAQ4F,CAAvB,CAA/B,EAA2D;AAAA,wCACzD3F,OAAA,CAAQuC,IAAR,CAAcnB,CAAd,EADyD;AAAA,qCAF/B;AAAA,iCAA9B,EANG;AAAA,gCAaHoK,OAAA,GAAUxL,OAAV,CAbG;AAAA,6BARF;AAAA,yBAVP;AAAA,qBAFA,MAuCK;AAAA,wBAEHwL,OAAA,GAAUzL,OAAA,CAAQC,OAAlB,CAFG;AAAA,qBA5DsB;AAAA,oBAiE3B,IAAKD,OAAA,CAAQgG,KAAR,CAAcxF,MAAd,GAAuB,CAAvB,IAA6B,EAACR,OAAA,CAAQjB,GAAT,IAAgB,CAACiB,OAAA,CAAQyE,IAAzB,CAAlC,EAAkE;AAAA,wBAEhEgH,OAAA,GAAU3M,UAAA,CAAY2M,OAAZ,EAAqBzL,OAAA,CAAQgG,KAA7B,CAAV,CAFgE;AAAA,qBAjEvC;AAAA,oBAuE3B,IAAKyF,OAAA,CAAQjL,MAAR,IACF,CAACR,OAAA,CAAQmG,KAAR,IAAiBnG,OAAA,CAAQmG,KAAR,GAAgBsF,OAAA,CAAQjL,MAA1C,IACCR,OAAA,CAAQoG,KADT,CADH,EAGE;AAAA,wBACAwF,MAAA,GAAS,EAAT,CADA;AAAA,wBAEApN,IAAA,CAAMiN,OAAN,EAAe,UAAWpK,CAAX,EAAcR,CAAd,EAAkB;AAAA,4BAC/B,IAAK,CAACb,OAAA,CAAQoG,KAAT,IACFpG,OAAA,CAAQoG,KAAR,IAAkBvF,CAAA,GAAI,CAAL,IAAWb,OAAA,CAAQoG,KADvC,EAEA;AAAA,gCACE,IAAKpG,OAAA,CAAQmG,KAAb,EAAoB;AAAA,oCAClB0F,EAAA,GAAM7L,OAAA,CAAQoG,KAAT,GAAmBvF,CAAA,GAAI,CAAL,GAAUb,OAAA,CAAQoG,KAApC,GAA4CvF,CAAjD,CADkB;AAAA,oCAElB,IAAKgL,EAAA,GAAK7L,OAAA,CAAQmG,KAAlB,EAAyB;AAAA,wCACvByF,MAAA,CAAOpJ,IAAP,CAAanB,CAAb,EADuB;AAAA,qCAAzB,MAGK,IAAKwK,EAAA,GAAK7L,OAAA,CAAQmG,KAAlB,EAAyB;AAAA,wCAC5B,OAAOxI,KAAA,CAAM8D,IAAb,CAD4B;AAAA,qCALZ;AAAA,iCAApB,MASK;AAAA,oCACHmK,MAAA,CAAOpJ,IAAP,CAAanB,CAAb,EADG;AAAA,iCAVP;AAAA,6BAH+B;AAAA,yBAAjC,EAFA;AAAA,wBAoBAoK,OAAA,GAAUG,MAAV,CApBA;AAAA,qBA1EyB;AAAA,oBAkG3B,IAAK5C,QAAA,CAASO,SAAT,IAAsBmC,GAAA,KAAQ,SAAnC,EAA8C;AAAA,wBAC5C9B,UAAA,GAD4C;AAAA,wBAG5C9C,UAAA,CAAY,YAAY;AAAA,4BACtB,IAAIgF,QAAJ,EAAcrG,EAAd,CADsB;AAAA,4BAEtB,IAAKmE,UAAA,IAAcZ,QAAA,CAASO,SAAT,GAAqB,CAAxC,EAA2C;AAAA,gCACzCK,UAAA,GAAa,CAAb,CADyC;AAAA,gCAEzCkC,QAAA,GAAWnC,UAAA,GAAaX,QAAA,CAASO,SAAjC,CAFyC;AAAA,gCAGzC9D,EAAA,GAAK,EAAL,CAHyC;AAAA,gCAIzChH,MAAA,CAAQ,UAAW4C,CAAX,EAAc0K,CAAd,EAAkB;AAAA,oCACxB,IAAK1K,CAAA,CAAER,CAAF,IAAOiL,QAAZ,EAAsB;AAAA,wCACpBrG,EAAA,CAAGsG,CAAH,IAAQ1K,CAAR,CADoB;AAAA,qCADE;AAAA,iCAA1B,EAJyC;AAAA,gCASzCwI,KAAA,GAAQpE,EAAR,CATyC;AAAA,6BAFrB;AAAA,yBAAxB,EAaG,CAbH,EAH4C;AAAA,wBAkB5CoE,KAAA,CAAM6B,GAAN,IAAa;AAAA,4BAAE7K,CAAA,EAAI8I,UAAA,EAAN;AAAA,4BAAoB1J,OAAA,EAAUwL,OAA9B;AAAA,yBAAb,CAlB4C;AAAA,qBAlGnB;AAAA,oBAsH3B,OAAOA,OAAP,CAtH2B;AAAA,iBA/KzB;AAAA,aAAN,CAtFiB;AAAA,YAgYjBzB,IAAA,GAAO,YAAY;AAAA,gBACjB,IAAIgC,IAAJ,EAAUhM,OAAV,CADiB;AAAA,gBAYjBgM,IAAA,GAAOrO,KAAA,CAAM+H,QAAN,CAAgB/H,KAAA,CAAM+H,QAAN,CAAgBpH,GAAhB,EAAqB,EAAEkM,MAAA,EAASe,SAAX,EAArB,CAAhB,EACL;AAAA,oBAAEhG,MAAA,EAAU,YAAY;AAAA,wBAAE,OAAOuE,GAAP,CAAF;AAAA,qBAAxB;AAAA,oBACEhE,OAAA,EAAU,UAAWjD,CAAX,EAAe;AAAA,wBAAE,OAAOmH,IAAA,CAAKzJ,IAAL,CAAWsC,CAAX,CAAP,CAAF;AAAA,qBAD3B;AAAA,oBAEA7C,OAAA,EAAU,UAAWiG,CAAX,EAAe;AAAA,wBAKvB,IAAKA,CAAL,EAAQ;AAAA,4BACNjG,OAAA,GAAUrC,KAAA,CAAM+H,QAAN,CAAgB1F,OAAhB,EACRiG,CAAA,CAAEtE,cAAF,CAAiB,SAAjB,IACIhE,KAAA,CAAM+H,QAAN,CAAgBO,CAAhB,EAAmB;AAAA,gCAAElH,GAAA,EAAM,IAAI2K,IAAJ,EAAR;AAAA,gCAAoBjF,IAAA,EAAM,IAAIiF,IAAJ,EAA1B;AAAA,6BAAnB,CADJ,GAEIzD,CAHI,CAAV,CADM;AAAA,yBALe;AAAA,wBAYvB,OAAOjG,OAAP,CAZuB;AAAA,qBAFzB;AAAA,oBAgBA4B,MAAA,EAAU2J,SAhBV;AAAA,iBADK,CAAP,CAZiB;AAAA,gBAgCjBvL,OAAA,GAAW,QAAQ,KAAK4F,CAAd,GAAmB,IAAnB,GAA0B;AAAA,oBAClCO,KAAA,EAAY,KADsB;AAAA,oBAElCC,KAAA,EAAY,KAFsB;AAAA,oBAGlCR,CAAA,EAAY,EAHsB;AAAA,oBAIlCC,SAAA,EAAY,EAJsB;AAAA,oBAKlCxF,KAAA,EAAY,EALsB;AAAA,oBAMlC2F,KAAA,EAAY,EANsB;AAAA,oBAOlC/F,OAAA,EAAY,KAPsB;AAAA,oBAQlClB,GAAA,EAAY,IARsB;AAAA,oBASlC0F,IAAA,EAAY,IATsB;AAAA,oBAUlCuE,QAAA,EAAYA,QAVsB;AAAA,iBAApC,CAhCiB;AAAA,gBAgDjBxK,IAAA,CAAMwD,SAAN,EAAiB,UAAWF,CAAX,EAAe;AAAA,oBAE9B,IAAKpD,WAAA,CAAaoD,CAAb,CAAL,EAAuB;AAAA,wBACrB9B,OAAA,CAAQK,KAAR,CAAcmC,IAAd,CAAoBV,CAApB,EADqB;AAAA,qBAAvB,MAGK;AAAA,wBACH9B,OAAA,CAAQ4F,CAAR,CAAUpD,IAAV,CAAgB7D,YAAA,CAAcmD,CAAd,CAAhB,EADG;AAAA,qBALyB;AAAA,oBAQ9B9B,OAAA,CAAQ6F,SAAR,CAAkBrD,IAAlB,CAAwBV,CAAxB,EAR8B;AAAA,iBAAhC,EAhDiB;AAAA,gBA4DjB,OAAOkK,IAAP,CA5DiB;AAAA,aAAnB,CAhYiB;AAAA,YAmcjB7N,EAAA,GAnciB;AAAA,YAocjB,IAAKoG,CAAL,EAAQ;AAAA,gBACNuF,GAAA,CAAIU,MAAJ,CAAYjG,CAAZ,EADM;AAAA,aApcS;AAAA,YAycjByF,IAAA,CAAKQ,MAAL,GAAcV,GAAA,CAAIU,MAAlB,CAzciB;AAAA,YA2cjBR,IAAA,CAAKiC,KAAL,GAAa,UAAWpL,CAAX,EAAcqL,GAAd,EAAmB1F,QAAnB,EAA8B;AAAA,gBACzC,IACE2F,MAAA,GAAc,EADhB,EAEEC,WAAA,GAAc,EAFhB,EAGEtM,GAAA,GAAc,EAHhB,CADyC;AAAA,gBAKvC,CALuC;AAAA,gBAOzC0G,QAAA,GAAcA,QAAA,IAAY,KAA1B,CAPyC;AAAA,gBAQzC0F,GAAA,GAAcA,GAAA,IAAY,IAA1B,CARyC;AAAA,gBAUzC1N,IAAA,CAAMqC,CAAN,EAAS,UAAWa,CAAX,EAAe;AAAA,oBACtB,IAAI2K,cAAJ,CADsB;AAAA,oBAEtBF,MAAA,CAAOD,GAAP,IAAcxK,CAAA,CAAEwK,GAAF,CAAd,CAFsB;AAAA,oBAGtBE,WAAA,CAAY5J,IAAZ,CAAkBd,CAAA,CAAEwK,GAAF,CAAlB,EAHsB;AAAA,oBAItBG,cAAA,GAAiBrC,IAAA,CAAMmC,MAAN,EAAeG,KAAf,EAAjB,CAJsB;AAAA,oBAKtB,IAAKD,cAAL,EAAqB;AAAA,wBACnBvC,GAAA,CAAIpD,MAAJ,CAAY2F,cAAA,CAAelK,KAA3B,EAAkCT,CAAlC,EAAqC8E,QAArC,EADmB;AAAA,qBAArB,MAGK;AAAA,wBACHsD,GAAA,CAAIU,MAAJ,CAAY9I,CAAZ,EAAe8E,QAAf,EADG;AAAA,qBARiB;AAAA,iBAAxB,EAVyC;AAAA,gBAuBzC1G,GAAA,CAAIoM,GAAJ,IAAWE,WAAX,CAvByC;AAAA,gBAwBzC,OAAOpC,IAAA,CAAMlK,GAAN,CAAP,CAxByC;AAAA,aAA3C,CA3ciB;AAAA,YAsejBkK,IAAA,CAAKrM,KAAL,GAAa,IAAb,CAteiB;AAAA,YAuejBqM,IAAA,CAAKvF,IAAL,GAAYqF,GAAA,CAAIrF,IAAhB,CAveiB;AAAA,YA4ejBuF,IAAA,CAAKhB,QAAL,GAAgB,UAAW/C,CAAX,EAAe;AAAA,gBAK7B,IAAKA,CAAL,EAAQ;AAAA,oBACN+C,QAAA,GAAWrL,KAAA,CAAM+H,QAAN,CAAgBsD,QAAhB,EAA0B/C,CAA1B,CAAX,CADM;AAAA,oBAEN,IAAKA,CAAA,CAAEyC,QAAP,EAAiB;AAAA,wBAEfsB,IAAA,GAAOtD,MAAP,CAAeT,CAAA,CAAEyC,QAAjB,EAFe;AAAA,qBAFX;AAAA,iBALqB;AAAA,gBAY7B,OAAOM,QAAP,CAZ6B;AAAA,aAA/B,CA5eiB;AAAA,YA+fjBgB,IAAA,CAAKuC,KAAL,GAAa,UAAWtG,CAAX,EAAe;AAAA,gBAM1B,IAAI5E,CAAA,GAAI,KAAR,EAAeR,CAAf,CAN0B;AAAA,gBAO1B,IAAKyJ,YAAL,EAAmB;AAAA,oBACjB,IAAKrE,CAAL,EAAQ;AAAA,wBACNpF,CAAA,GAAIyJ,YAAA,CAAakC,OAAb,CAAsB,WAAWvG,CAAjC,CAAJ,CADM;AAAA,wBAEN,IAAKpF,CAAA,IAAKA,CAAA,CAAEL,MAAF,GAAW,CAArB,EAAwB;AAAA,4BACtBwJ,IAAA,CAAKQ,MAAL,CAAa3J,CAAb,EADsB;AAAA,4BAEtBQ,CAAA,GAAI,IAAJ,CAFsB;AAAA,yBAFlB;AAAA,wBAMN,IAAKwH,GAAA,CAAIrI,MAAJ,GAAa,CAAlB,EAAqB;AAAA,4BACnBsG,UAAA,CAAY,YAAY;AAAA,gCACtBwD,YAAA,CAAaC,OAAb,CAAsB,WAAWvB,QAAA,CAASK,WAA1C,EACE7J,IAAA,CAAKwB,SAAL,CAAgB6H,GAAhB,CADF,EADsB;AAAA,6BAAxB,EADmB;AAAA,yBANf;AAAA,qBADS;AAAA,oBAcjBmB,IAAA,CAAKhB,QAAL,CAAe,EAACK,WAAA,EAAcpD,CAAf,EAAf,EAdiB;AAAA,iBAPO;AAAA,gBAuB1B,OAAO+D,IAAP,CAvB0B;AAAA,aAA5B,CA/fiB;AAAA,YA6hBjB,OAAOA,IAAP,CA7hBiB;AAAA,SAAnB,CAzmCY;AAAA,QA4oDZrM,KAAA,GAAQE,CAAR,CA5oDY;AAAA,QAopDZA,CAAA,CAAEW,IAAF,GAASA,IAAT,CAppDY;AAAA,QA2pDZX,CAAA,CAAEY,MAAF,GAAWA,MAAX,CA3pDY;AAAA,QAkqDZZ,CAAA,CAAE+D,MAAF,GAAWtD,GAAA,CAAIsD,MAAf,CAlqDY;AAAA,QA0qDZjE,KAAA,CAAM8D,IAAN,GAAa,WAAb,CA1qDY;AAAA,QAqrDZ9D,KAAA,CAAM+H,QAAN,GAAiB,UAAW+G,GAAX,EAAgBC,GAAhB,EAAsB;AAAA,YACrC,IAAI7J,CAAA,GAAI,EAAR,CADqC;AAAA,YAErCpE,MAAA,CAAQgO,GAAR,EAAa,UAAW/J,CAAX,EAAcuD,CAAd,EAAkB;AAAA,gBAAEpD,CAAA,CAAEoD,CAAF,IAAOwG,GAAA,CAAIxG,CAAJ,CAAP,CAAF;AAAA,aAA/B,EAFqC;AAAA,YAGrCxH,MAAA,CAAQiO,GAAR,EAAa,UAAWhK,CAAX,EAAcuD,CAAd,EAAkB;AAAA,gBAAEpD,CAAA,CAAEoD,CAAF,IAAOyG,GAAA,CAAIzG,CAAJ,CAAP,CAAF;AAAA,aAA/B,EAHqC;AAAA,YAIrC,OAAOpD,CAAP,CAJqC;AAAA,SAAvC,CArrDY;AAAA,QAssDZlF,KAAA,CAAMkG,GAAN,GAAY,UAAW8I,IAAX,EAAiBC,IAAjB,EAAwB;AAAA,YAElC,IAAIC,EAAA,GAAK,KAAT,EAAgB5G,CAAhB,CAFkC;AAAA,YAIlC,IAAM0G,IAAA,CAAKhP,KAAX,EAAmB;AAAA,gBACjBkP,EAAA,GAAKF,IAAA,CAAMC,IAAN,CAAL,CADiB;AAAA,gBAEjB,IAAKC,EAAA,CAAGrM,MAAH,GAAY,CAAjB,EAAoB;AAAA,oBAClB,OAAO,IAAP,CADkB;AAAA,iBAApB,MAGK;AAAA,oBACH,OAAO,KAAP,CADG;AAAA,iBALY;AAAA,aAAnB,MASK;AAAA,gBAEH,QAAS3C,CAAA,CAAEyE,MAAF,CAAUqK,IAAV,CAAT;AAAA,gBACE,KAAK,QAAL;AAAA,oBACE,IAAK9O,CAAA,CAAE0B,QAAF,CAAYqN,IAAZ,CAAL,EAAyB;AAAA,wBACvBnO,MAAA,CAAQmO,IAAR,EAAc,UAAWlK,CAAX,EAAcuD,CAAd,EAAkB;AAAA,4BAC9B,IAAK4G,EAAA,KAAO,IAAP,IAAe,CAAChP,CAAA,CAAE2D,WAAF,CAAemL,IAAA,CAAK1G,CAAL,CAAf,CAAhB,IACH0G,IAAA,CAAKhL,cAAL,CAAqBsE,CAArB,CADF,EAEA;AAAA,gCACE4G,EAAA,GAAKhP,CAAA,CAAEgG,GAAF,CAAO8I,IAAA,CAAK1G,CAAL,CAAP,EAAgB2G,IAAA,CAAK3G,CAAL,CAAhB,CAAL,CADF;AAAA,6BAFA,MAKK;AAAA,gCACH4G,EAAA,GAAK,KAAL,CADG;AAAA,gCAEH,OAAOlP,KAAA,CAAM8D,IAAb,CAFG;AAAA,6BANyB;AAAA,yBAAhC,EADuB;AAAA,qBAAzB,MAaK,IAAK5D,CAAA,CAAEyB,OAAF,CAAWsN,IAAX,CAAL,EAAwB;AAAA,wBAC3BpO,IAAA,CAAMoO,IAAN,EAAY,UAAWlK,CAAX,EAAcuD,CAAd,EAAkB;AAAA,4BAC5B4G,EAAA,GAAKhP,CAAA,CAAEgG,GAAF,CAAO8I,IAAP,EAAaC,IAAA,CAAK3G,CAAL,CAAb,CAAL,CAD4B;AAAA,4BAE5B,IAAK4G,EAAL,EAAS;AAAA,gCACP,OAAOlP,KAAA,CAAM8D,IAAb,CADO;AAAA,6BAFmB;AAAA,yBAA9B,EAD2B;AAAA,qBAAxB,MAQA,IAAK5D,CAAA,CAAEoE,QAAF,CAAY2K,IAAZ,CAAL,EAAyB;AAAA,wBAC5B,IAAK,CAACjP,KAAA,CAAM6D,WAAN,CAAmBmL,IAAA,CAAKC,IAAL,CAAnB,CAAN,EAAuC;AAAA,4BACrC,OAAO,IAAP,CADqC;AAAA,yBAAvC,MAGK;AAAA,4BACH,OAAO,KAAP,CADG;AAAA,yBAJuB;AAAA,qBAtBhC;AAAA,oBA8BE,OAAOC,EAAP,CA/BJ;AAAA,gBAgCE,KAAK,OAAL;AAAA,oBACE,IAAKhP,CAAA,CAAE0B,QAAF,CAAYqN,IAAZ,CAAL,EAAyB;AAAA,wBACvBpO,IAAA,CAAMmO,IAAN,EAAY,UAAWjK,CAAX,EAAc7B,CAAd,EAAkB;AAAA,4BAC5BgM,EAAA,GAAKhP,CAAA,CAAEgG,GAAF,CAAO8I,IAAA,CAAK9L,CAAL,CAAP,EAAgB+L,IAAhB,CAAL,CAD4B;AAAA,4BAE5B,IAAKC,EAAA,KAAO,IAAZ,EAAkB;AAAA,gCAChB,OAAOlP,KAAA,CAAM8D,IAAb,CADgB;AAAA,6BAFU;AAAA,yBAA9B,EADuB;AAAA,qBAAzB,MAQK,IAAK5D,CAAA,CAAEyB,OAAF,CAAWsN,IAAX,CAAL,EAAwB;AAAA,wBAC3BpO,IAAA,CAAMoO,IAAN,EAAY,UAAWE,EAAX,EAAeC,EAAf,EAAoB;AAAA,4BAC9BvO,IAAA,CAAMmO,IAAN,EAAY,UAAWK,EAAX,EAAeC,EAAf,EAAoB;AAAA,gCAC9BJ,EAAA,GAAKhP,CAAA,CAAEgG,GAAF,CAAO8I,IAAA,CAAKM,EAAL,CAAP,EAAiBL,IAAA,CAAKG,EAAL,CAAjB,CAAL,CAD8B;AAAA,gCAE9B,IAAKF,EAAA,KAAO,IAAZ,EAAkB;AAAA,oCAChB,OAAOlP,KAAA,CAAM8D,IAAb,CADgB;AAAA,iCAFY;AAAA,6BAAhC,EAD8B;AAAA,4BAO9B,IAAKoL,EAAA,KAAO,IAAZ,EAAkB;AAAA,gCAChB,OAAOlP,KAAA,CAAM8D,IAAb,CADgB;AAAA,6BAPY;AAAA,yBAAhC,EAD2B;AAAA,qBAAxB,MAaA,IAAK5D,CAAA,CAAEoE,QAAF,CAAY2K,IAAZ,KAAsB/O,CAAA,CAAEqP,QAAF,CAAYN,IAAZ,CAA3B,EAA+C;AAAA,wBACnDC,EAAA,GAAK,KAAL,CADmD;AAAA,wBAElD,KAAM5G,CAAA,GAAI,CAAV,EAAaA,CAAA,GAAI0G,IAAA,CAAKnM,MAAtB,EAA8ByF,CAAA,EAA9B,EAAmC;AAAA,4BACjC4G,EAAA,GAAKhP,CAAA,CAAEgG,GAAF,CAAO8I,IAAA,CAAK1G,CAAL,CAAP,EAAgB2G,IAAhB,CAAL,CADiC;AAAA,4BAEjC,IAAKC,EAAL,EAAS;AAAA,gCACP,OAAO,IAAP,CADO;AAAA,6BAFwB;AAAA,yBAFe;AAAA,qBAtBtD;AAAA,oBA+BE,OAAOA,EAAP,CA/DJ;AAAA,gBAgEE,KAAK,QAAL;AAAA,oBACE,IAAKhP,CAAA,CAAEoE,QAAF,CAAY2K,IAAZ,KAAsBA,IAAA,KAASD,IAApC,EAA0C;AAAA,wBACxC,OAAO,IAAP,CADwC;AAAA,qBAD5C;AAAA,oBAIE,MApEJ;AAAA,gBAqEE;AAAA,oBACE,IAAK9O,CAAA,CAAEyE,MAAF,CAAUqK,IAAV,MAAqB9O,CAAA,CAAEyE,MAAF,CAAUsK,IAAV,CAArB,IAAyCD,IAAA,KAASC,IAAvD,EAA6D;AAAA,wBAC3D,OAAO,IAAP,CAD2D;AAAA,qBAD/D;AAAA,oBAIE,MAzEJ;AAAA,iBAFG;AAAA,aAb6B;AAAA,YA2FlC,OAAO,KAAP,CA3FkC;AAAA,SAApC,CAtsDY;AAAA,QA8yDZjP,KAAA,CAAMmG,MAAN,GAAe,UAAW6I,IAAX,EAAiBC,IAAjB,EAAwB;AAAA,YAErC,IAAI/O,CAAA,GAAIF,KAAR,EAAesG,EAAf,CAFqC;AAAA,YAGrC,IAAKpG,CAAA,CAAEyB,OAAF,CAAWsN,IAAX,CAAL,EAAwB;AAAA,gBACtB3I,EAAA,GAAK,IAAL,CADsB;AAAA,gBAEtBzF,IAAA,CAAMoO,IAAN,EAAY,UAAWlK,CAAX,EAAe;AAAA,oBACzBuB,EAAA,GAAKpG,CAAA,CAAEgG,GAAF,CAAO8I,IAAP,EAAajK,CAAb,CAAL,CADyB;AAAA,oBAEzB,IAAKuB,EAAA,KAAO,KAAZ,EAAmB;AAAA,wBACjB,OAAOtG,KAAA,CAAM8D,IAAb,CADiB;AAAA,qBAFM;AAAA,iBAA3B,EAFsB;AAAA,gBAQtB,OAAOwC,EAAP,CARsB;AAAA,aAAxB,MAUK;AAAA,gBACH,OAAOpG,CAAA,CAAEgG,GAAF,CAAO8I,IAAP,EAAaC,IAAb,CAAP,CADG;AAAA,aAbgC;AAAA,SAAvC,CA9yDY;AAAA,QAs0DZjP,KAAA,CAAM2E,MAAN,GAAe,UAAWI,CAAX,EAAe;AAAA,YAC5B,IAAIE,CAAA,GAAI,OAAOF,CAAf,CAD4B;AAAA,YAE5B,IAAKE,CAAA,KAAM,QAAX,EAAqB;AAAA,gBACnB,IAAKF,CAAL,EAAQ;AAAA,oBACN,IAAK,OAAOA,CAAA,CAAElC,MAAT,KAAoB,QAApB,IACH,CAAEkC,CAAA,CAAEyK,oBAAF,CAAwB,QAAxB,CADJ,EAEA;AAAA,wBACEvK,CAAA,GAAI,OAAJ,CADF;AAAA,qBAHM;AAAA,iBAAR,MAOK;AAAA,oBACHA,CAAA,GAAI,MAAJ,CADG;AAAA,iBARc;AAAA,aAFO;AAAA,YAc5B,OAAOA,CAAP,CAd4B;AAAA,SAA9B,CAt0DY;AAAA,QA81DZjF,KAAA,CAAMyP,aAAN,GAAsB,UAAWC,EAAX,EAAgB;AAAA,YACpC,IAAIC,EAAA,GAAK,EAAT,CADoC;AAAA,YAEpC7O,MAAA,CAAQ4O,EAAR,EAAY,UAAWpH,CAAX,EAAcsH,CAAd,EAAkB;AAAA,gBAC5BD,EAAA,CAAG9K,IAAH,CAAS+K,CAAT,EAD4B;AAAA,aAA9B,EAFoC;AAAA,YAKpCD,EAAA,CAAG7I,IAAH,GALoC;AAAA,YAMpC,OAAO6I,EAAP,CANoC;AAAA,SAAtC,CA91DY;AAAA,QA82DZ3P,KAAA,CAAM6P,WAAN,GAAoB,UAAWC,GAAX,EAAgBC,GAAhB,EAAsB;AAAA,YACxC,OAAQ/P,KAAA,CAAM2B,OAAN,CAAemO,GAAf,KAAwB9P,KAAA,CAAM2B,OAAN,CAAeoO,GAAf,CAAxB,IACND,GAAA,CAAI7E,IAAJ,CAAU,GAAV,MAAoB8E,GAAA,CAAI9E,IAAJ,CAAU,GAAV,CADf,GACkC,IADlC,GACyC,KADhD,CADwC;AAAA,SAA1C,CA92DY;AAAA,QA23DZjL,KAAA,CAAMgQ,YAAN,GAAqB,UAAWlB,GAAX,EAAgBC,GAAhB,EAAsB;AAAA,YACzC,IAAI7O,CAAA,GAAIF,KAAR,EAAeqH,EAAA,GAAK,IAApB,CADyC;AAAA,YAGzC,IAAKnH,CAAA,CAAE0B,QAAF,CAAYkN,GAAZ,KAAqB5O,CAAA,CAAE0B,QAAF,CAAYmN,GAAZ,CAA1B,EAA6C;AAAA,gBAC3C,IAAK7O,CAAA,CAAE2P,WAAF,CAAe3P,CAAA,CAAEuP,aAAF,CAAiBX,GAAjB,CAAf,EACH5O,CAAA,CAAEuP,aAAF,CAAiBV,GAAjB,CADG,CAAL,EAEA;AAAA,oBACEjO,MAAA,CAAQgO,GAAR,EAAa,UAAW/J,CAAX,EAAcuD,CAAd,EAAkB;AAAA,wBAC7B,IAAK,CAAI,CAACpI,CAAA,CAAE0B,QAAF,CAAYkN,GAAA,CAAIxG,CAAJ,CAAZ,KAAwBpI,CAAA,CAAE0B,QAAF,CAAYmN,GAAA,CAAIzG,CAAJ,CAAZ,CAAxB,IACRpI,CAAA,CAAE8P,YAAF,CAAgBlB,GAAA,CAAIxG,CAAJ,CAAhB,EAAwByG,GAAA,CAAIzG,CAAJ,CAAxB,CADO,IAENpI,CAAA,CAAEyB,OAAF,CAAWmN,GAAA,CAAIxG,CAAJ,CAAX,KAAuBpI,CAAA,CAAEyB,OAAF,CAAWoN,GAAA,CAAIzG,CAAJ,CAAX,CAAvB,IACCpI,CAAA,CAAE2P,WAAF,CAAef,GAAA,CAAIxG,CAAJ,CAAf,EAAuByG,GAAA,CAAIzG,CAAJ,CAAvB,CAHK,IAGgCwG,GAAA,CAAIxG,CAAJ,MAAWyG,GAAA,CAAIzG,CAAJ,CAH3C,CAAT,EAIE;AAAA,4BACAjB,EAAA,GAAK,KAAL,CADA;AAAA,4BAEA,OAAOrH,KAAA,CAAM8D,IAAb,CAFA;AAAA,yBAL2B;AAAA,qBAA/B,EADF;AAAA,iBAFA,MAcK;AAAA,oBACHuD,EAAA,GAAK,KAAL,CADG;AAAA,iBAfsC;AAAA,aAA7C,MAmBK;AAAA,gBACHA,EAAA,GAAK,KAAL,CADG;AAAA,aAtBoC;AAAA,YAyBzC,OAAOA,EAAP,CAzByC;AAAA,SAA3C,CA33DY;AAAA,QAk6DZlH,QAAA,GAAW;AAAA,YACT,QADS;AAAA,YACE,QADF;AAAA,YACY,QADZ;AAAA,YACwB,OADxB;AAAA,YAET,SAFS;AAAA,YAEE,MAFF;AAAA,YAEY,UAFZ;AAAA,YAEwB,WAFxB;AAAA,SAAX,CAl6DY;AAAA,QAu6DZC,QAAA,GAAW,UAAW6P,OAAX,EAAqB;AAAA,YAC9B,OAAO,UAAWC,IAAX,EAAkB;AAAA,gBACvB,OAAOlQ,KAAA,CAAM2E,MAAN,CAAcuL,IAAd,MAAyBD,OAAA,CAAQhK,WAAR,EAAzB,GAAiD,IAAjD,GAAwD,KAA/D,CADuB;AAAA,aAAzB,CAD8B;AAAA,SAAhC,CAv6DY;AAAA,QA66DZ,KAAM5F,GAAA,GAAM,CAAZ,EAAeA,GAAA,GAAMF,QAAA,CAAS0C,MAA9B,EAAsCxC,GAAA,EAAtC,EAA6C;AAAA,YAC3CC,OAAA,GAAUH,QAAA,CAASE,GAAT,CAAV,CAD2C;AAAA,YAE3CL,KAAA,CAAM,OAAOM,OAAb,IAAwBF,QAAA,CAAUE,OAAV,CAAxB,CAF2C;AAAA,SA76DjC;AAAA,KAbH;AAAA,CAAZ,EAAD,EA5BA;AA69DA,IAAK,OAAOL,OAAP,KAAoB,QAAzB,EAAmC;AAAA,IACjCA,OAAA,CAAQkQ,KAAR,GAAgBnQ,KAAhB,CADiC;AAAA\"}","lineCount":1167,"mtime":1363321711000,"deps":[],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":true,"isCoreModule":false,"realCanonicalName":null,"src":"/*\r\n\r\n Software License Agreement (BSD License)\r\n http://taffydb.com\r\n Copyright (c)\r\n All rights reserved.\r\n\r\n\r\n Redistribution and use of this software in source and binary forms, with or without modification, are permitted provided that the following condition is met:\r\n\r\n * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\r\n\r\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\r\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n\r\n */\r\n\r\n/*jslint        browser : true, continue : true,\r\n devel  : true, indent  : 2,    maxerr   : 500,\r\n newcap : true, nomen   : true, plusplus : true,\r\n regexp : true, sloppy  : true, vars     : false,\r\n white  : true\r\n*/\r\n\r\n// BUILD 193d48d, modified by mmikowski to pass jslint\r\n\r\n// Setup TAFFY name space to return an object with methods\r\nvar TAFFY, exports, T;\r\n(function () {\r\n  'use strict';\r\n  var\r\n    typeList,     makeTest,     idx,    typeKey,\r\n    version,      TC,           idpad,  cmax,\r\n    API,          protectJSON,  each,   eachin,\r\n    isIndexable,  returnFilter, runFilters,\r\n    numcharsplit, orderByCol,   run,    intersection,\r\n    filter,       makeCid,      safeForJson,\r\n    isRegexp\r\n    ;\r\n\r\n\r\n  if ( ! TAFFY ){\r\n    // TC = Counter for Taffy DBs on page, used for unique IDs\r\n    // cmax = size of charnumarray conversion cache\r\n    // idpad = zeros to pad record IDs with\r\n    version = '2.7';\r\n    TC      = 1;\r\n    idpad   = '000000';\r\n    cmax    = 1000;\r\n    API     = {};\r\n\r\n    protectJSON = function ( t ) {\r\n      // ****************************************\r\n      // *\r\n      // * Takes: a variable\r\n      // * Returns: the variable if object/array or the parsed variable if JSON\r\n      // *\r\n      // ****************************************  \r\n      if ( TAFFY.isArray( t ) || TAFFY.isObject( t ) ){\r\n        return t;\r\n      }\r\n      else {\r\n        return JSON.parse( t );\r\n      }\r\n    };\r\n    \r\n    // gracefully stolen from underscore.js\r\n    intersection = function(array1, array2) {\r\n        return filter(array1, function(item) {\r\n          return array2.indexOf(item) >= 0;\r\n        });\r\n    };\r\n\r\n    // gracefully stolen from underscore.js\r\n    filter = function(obj, iterator, context) {\r\n        var results = [];\r\n        if (obj == null) return results;\r\n        if (Array.prototype.filter && obj.filter === Array.prototype.filter) return obj.filter(iterator, context);\r\n        each(obj, function(value, index, list) {\r\n          if (iterator.call(context, value, index, list)) results[results.length] = value;\r\n        });\r\n        return results;\r\n    };\r\n    \r\n    isRegexp = function(aObj) {\r\n        return Object.prototype.toString.call(aObj)==='[object RegExp]';\r\n    }\r\n    \r\n    safeForJson = function(aObj) {\r\n        var myResult = T.isArray(aObj) ? [] : T.isObject(aObj) ? {} : null;\r\n        if(aObj===null) return aObj;\r\n        for(var i in aObj) {\r\n            myResult[i]  = isRegexp(aObj[i]) ? aObj[i].toString() : T.isArray(aObj[i]) || T.isObject(aObj[i]) ? safeForJson(aObj[i]) : aObj[i];\r\n        }\r\n        return myResult;\r\n    }\r\n    \r\n    makeCid = function(aContext) {\r\n        var myCid = JSON.stringify(aContext);\r\n        if(myCid.match(/regex/)===null) return myCid;\r\n        return JSON.stringify(safeForJson(aContext));\r\n    }\r\n    \r\n    each = function ( a, fun, u ) {\r\n      var r, i, x, y;\r\n      // ****************************************\r\n      // *\r\n      // * Takes:\r\n      // * a = an object/value or an array of objects/values\r\n      // * f = a function\r\n      // * u = optional flag to describe how to handle undefined values\r\n      //   in array of values. True: pass them to the functions,\r\n      //   False: skip. Default False;\r\n      // * Purpose: Used to loop over arrays\r\n      // *\r\n      // ****************************************  \r\n      if ( a && ((T.isArray( a ) && a.length === 1) || (!T.isArray( a ))) ){\r\n        fun( (T.isArray( a )) ? a[0] : a, 0 );\r\n      }\r\n      else {\r\n        for ( r, i, x = 0, a = (T.isArray( a )) ? a : [a], y = a.length;\r\n              x < y; x++ )\r\n        {\r\n          i = a[x];\r\n          if ( !T.isUndefined( i ) || (u || false) ){\r\n            r = fun( i, x );\r\n            if ( r === T.EXIT ){\r\n              break;\r\n            }\r\n\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    eachin = function ( o, fun ) {\r\n      // ****************************************\r\n      // *\r\n      // * Takes:\r\n      // * o = an object\r\n      // * f = a function\r\n      // * Purpose: Used to loop over objects\r\n      // *\r\n      // ****************************************  \r\n      var x = 0, r, i;\r\n\r\n      for ( i in o ){\r\n        if ( o.hasOwnProperty( i ) ){\r\n          r = fun( o[i], i, x++ );\r\n          if ( r === T.EXIT ){\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n    };\r\n\r\n    API.extend = function ( m, f ) {\r\n      // ****************************************\r\n      // *\r\n      // * Takes: method name, function\r\n      // * Purpose: Add a custom method to the API\r\n      // *\r\n      // ****************************************  \r\n      API[m] = function () {\r\n        return f.apply( this, arguments );\r\n      };\r\n    };\r\n\r\n    isIndexable = function ( f ) {\r\n      var i;\r\n      // Check to see if record ID\r\n      if ( T.isString( f ) && /[t][0-9]*[r][0-9]*/i.test( f ) ){\r\n        return true;\r\n      }\r\n      // Check to see if record\r\n      if ( T.isObject( f ) && f.___id && f.___s ){\r\n        return true;\r\n      }\r\n\r\n      // Check to see if array of indexes\r\n      if ( T.isArray( f ) ){\r\n        i = true;\r\n        each( f, function ( r ) {\r\n          if ( !isIndexable( r ) ){\r\n            i = false;\r\n\r\n            return TAFFY.EXIT;\r\n          }\r\n        });\r\n        return i;\r\n      }\r\n\r\n      return false;\r\n    };\r\n\r\n    runFilters = function ( r, filter ) {\r\n      // ****************************************\r\n      // *\r\n      // * Takes: takes a record and a collection of filters\r\n      // * Returns: true if the record matches, false otherwise\r\n      // ****************************************\r\n      var match = true;\r\n\r\n\r\n      each( filter, function ( mf ) {\r\n        switch ( T.typeOf( mf ) ){\r\n          case 'function':\r\n            // run function\r\n            if ( !mf.apply( r ) ){\r\n              match = false;\r\n              return TAFFY.EXIT;\r\n            }\r\n            break;\r\n          case 'array':\r\n            // loop array and treat like a SQL or\r\n            match = (mf.length === 1) ? (runFilters( r, mf[0] )) :\r\n              (mf.length === 2) ? (runFilters( r, mf[0] ) ||\r\n                runFilters( r, mf[1] )) :\r\n                (mf.length === 3) ? (runFilters( r, mf[0] ) ||\r\n                  runFilters( r, mf[1] ) || runFilters( r, mf[2] )) :\r\n                  (mf.length === 4) ? (runFilters( r, mf[0] ) ||\r\n                    runFilters( r, mf[1] ) || runFilters( r, mf[2] ) ||\r\n                    runFilters( r, mf[3] )) : false;\r\n            if ( mf.length > 4 ){\r\n              each( mf, function ( f ) {\r\n                if ( runFilters( r, f ) ){\r\n                  match = true;\r\n                }\r\n              });\r\n            }\r\n            break;\r\n        }\r\n      });\r\n\r\n      return match;\r\n    };\r\n\r\n    returnFilter = function ( f ) {\r\n      // ****************************************\r\n      // *\r\n      // * Takes: filter object\r\n      // * Returns: a filter function\r\n      // * Purpose: Take a filter object and return a function that can be used to compare\r\n      // * a TaffyDB record to see if the record matches a query\r\n      // ****************************************  \r\n      var nf = [];\r\n      if ( T.isString( f ) && /[t][0-9]*[r][0-9]*/i.test( f ) ){\r\n        f = { ___id : f };\r\n      }\r\n      if ( T.isArray( f ) ){\r\n        // if we are working with an array\r\n\r\n        each( f, function ( r ) {\r\n          // loop the array and return a filter func for each value\r\n          nf.push( returnFilter( r ) );\r\n        });\r\n        // now build a func to loop over the filters and return true if ANY of the filters match\r\n        // This handles logical OR expressions\r\n        f = function () {\r\n          var that = this, match = false;\r\n          each( nf, function ( f ) {\r\n            if ( runFilters( that, f ) ){\r\n              match = true;\r\n            }\r\n          });\r\n          return match;\r\n        };\r\n        return f;\r\n\r\n      }\r\n      // if we are dealing with an Object\r\n      if ( T.isObject( f ) ){\r\n        if ( T.isObject( f ) && f.___id && f.___s ){\r\n          f = { ___id : f.___id };\r\n        }\r\n\r\n        // Loop over each value on the object to prep match type and match value\r\n        eachin( f, function ( v, i ) {\r\n\r\n          // default match type to IS/Equals\r\n          if ( !T.isObject( v ) ){\r\n            v = {\r\n              'is' : v\r\n            };\r\n          }\r\n          // loop over each value on the value object  - if any\r\n          eachin( v, function ( mtest, s ) {\r\n            // s = match type, e.g. is, hasAll, like, etc\r\n            var c = [], looper;\r\n\r\n            // function to loop and apply filter\r\n            looper = (s === 'hasAll') ?\r\n              function ( mtest, func ) {\r\n                func( mtest );\r\n              } : each;\r\n\r\n            // loop over each test\r\n            looper( mtest, function ( mtest ) {\r\n\r\n              // su = match success\r\n              // f = match false\r\n              var su = true, f = false, matchFunc;\r\n\r\n\r\n              // push a function onto the filter collection to do the matching\r\n              matchFunc = function () {\r\n\r\n                // get the value from the record\r\n                var\r\n                  mvalue   = this[i],\r\n                  eqeq     = '==',\r\n                  bangeq   = '!=',\r\n                  eqeqeq   = '===',\r\n                  lt   = '<',\r\n                  gt   = '>',\r\n                  lteq   = '<=',\r\n                  gteq   = '>=',\r\n                  bangeqeq = '!==',\r\n                  r\r\n                  ;\r\n\r\n                if (typeof mvalue === 'undefined') {\r\n                  return false;\r\n                }\r\n                \r\n                if ( (s.indexOf( '!' ) === 0) && s !== bangeq &&\r\n                  s !== bangeqeq )\r\n                {\r\n                  // if the filter name starts with ! as in '!is' then reverse the match logic and remove the !\r\n                  su = false;\r\n                  s = s.substring( 1, s.length );\r\n                }\r\n                // get the match results based on the s/match type\r\n                /*jslint eqeq : true */\r\n                r = (\r\n                  (s === 'regex') ? (mtest.test( mvalue )) : (s === 'lt' || s === lt)\r\n                  ? (mvalue < mtest)  : (s === 'gt' || s === gt)\r\n                  ? (mvalue > mtest)  : (s === 'lte' || s === lteq)\r\n                  ? (mvalue <= mtest) : (s === 'gte' || s === gteq)\r\n                  ? (mvalue >= mtest) : (s === 'left')\r\n                  ? (mvalue.indexOf( mtest ) === 0) : (s === 'leftnocase')\r\n                  ? (mvalue.toLowerCase().indexOf( mtest.toLowerCase() )\r\n                    === 0) : (s === 'right')\r\n                  ? (mvalue.substring( (mvalue.length - mtest.length) )\r\n                    === mtest) : (s === 'rightnocase')\r\n                  ? (mvalue.toLowerCase().substring(\r\n                    (mvalue.length - mtest.length) ) === mtest.toLowerCase())\r\n                    : (s === 'like')\r\n                  ? (mvalue.indexOf( mtest ) >= 0) : (s === 'likenocase')\r\n                  ? (mvalue.toLowerCase().indexOf(mtest.toLowerCase()) >= 0)\r\n                    : (s === eqeqeq || s === 'is')\r\n                  ? (mvalue ===  mtest) : (s === eqeq)\r\n                  ? (mvalue == mtest) : (s === bangeqeq)\r\n                  ? (mvalue !==  mtest) : (s === bangeq)\r\n                  ? (mvalue != mtest) : (s === 'isnocase')\r\n                  ? (mvalue.toLowerCase\r\n                    ? mvalue.toLowerCase() === mtest.toLowerCase()\r\n                      : mvalue === mtest) : (s === 'has')\r\n                  ? (T.has( mvalue, mtest )) : (s === 'hasall')\r\n                  ? (T.hasAll( mvalue, mtest )) : (s === 'contains')\r\n                  ? (TAFFY.isArray(mvalue) && mvalue.indexOf(mtest) > -1) : (\r\n                    s.indexOf( 'is' ) === -1\r\n                      && !TAFFY.isNull( mvalue )\r\n                      && !TAFFY.isUndefined( mvalue )\r\n                      && !TAFFY.isObject( mtest )\r\n                      && !TAFFY.isArray( mtest )\r\n                    )\r\n                  ? (mtest === mvalue[s])\r\n                    : (T[s] && T.isFunction( T[s] )\r\n                    && s.indexOf( 'is' ) === 0)\r\n                  ? T[s]( mvalue ) === mtest\r\n                    : (T[s] && T.isFunction( T[s] ))\r\n                  ? T[s]( mvalue, mtest ) : (false)\r\n                );\r\n                /*jslint eqeq : false */\r\n                r = (r && !su) ? false : (!r && !su) ? true : r;\r\n\r\n                return r;\r\n              };\r\n              c.push( matchFunc );\r\n\r\n            });\r\n            // if only one filter in the collection push it onto the filter list without the array\r\n            if ( c.length === 1 ){\r\n\r\n              nf.push( c[0] );\r\n            }\r\n            else {\r\n              // else build a function to loop over all the filters and return true only if ALL match\r\n              // this is a logical AND\r\n              nf.push( function () {\r\n                var that = this, match = false;\r\n                each( c, function ( f ) {\r\n                  if ( f.apply( that ) ){\r\n                    match = true;\r\n                  }\r\n                });\r\n                return match;\r\n              });\r\n            }\r\n          });\r\n        });\r\n        // finally return a single function that wraps all the other functions and will run a query\r\n        // where all functions have to return true for a record to appear in a query result\r\n        f = function () {\r\n          var that = this, match = true;\r\n          // faster if less than  4 functions\r\n          match = (nf.length === 1 && !nf[0].apply( that )) ? false :\r\n            (nf.length === 2 &&\r\n              (!nf[0].apply( that ) || !nf[1].apply( that ))) ? false :\r\n              (nf.length === 3 &&\r\n                (!nf[0].apply( that ) || !nf[1].apply( that ) ||\r\n                  !nf[2].apply( that ))) ? false :\r\n                (nf.length === 4 &&\r\n                  (!nf[0].apply( that ) || !nf[1].apply( that ) ||\r\n                    !nf[2].apply( that ) || !nf[3].apply( that ))) ? false\r\n                  : true;\r\n          if ( nf.length > 4 ){\r\n            each( nf, function ( f ) {\r\n              if ( !runFilters( that, f ) ){\r\n                match = false;\r\n              }\r\n            });\r\n          }\r\n          return match;\r\n        };\r\n        return f;\r\n      }\r\n\r\n      // if function\r\n      if ( T.isFunction( f ) ){\r\n        return f;\r\n      }\r\n    };\r\n\r\n    orderByCol = function ( ar, o ) {\r\n      // ****************************************\r\n      // *\r\n      // * Takes: takes an array and a sort object\r\n      // * Returns: the array sorted\r\n      // * Purpose: Accept filters such as \"[col], [col2]\" or \"[col] desc\" and sort on those columns\r\n      // *\r\n      // ****************************************\r\n\r\n      var sortFunc = function ( a, b ) {\r\n        // function to pass to the native array.sort to sort an array\r\n        var r = 0;\r\n\r\n        T.each( o, function ( sd ) {\r\n          // loop over the sort instructions\r\n          // get the column name\r\n          var o, col, dir, c, d;\r\n          o = sd.split( ' ' );\r\n          col = o[0];\r\n\r\n          // get the direction\r\n          dir = (o.length === 1) ? \"logical\" : o[1];\r\n\r\n\r\n          if ( dir === 'logical' ){\r\n            // if dir is logical than grab the charnum arrays for the two values we are looking at\r\n            c = numcharsplit( a[col] );\r\n            d = numcharsplit( b[col] );\r\n            // loop over the charnumarrays until one value is higher than the other\r\n            T.each( (c.length <= d.length) ? c : d, function ( x, i ) {\r\n              if ( c[i] < d[i] ){\r\n                r = -1;\r\n                return TAFFY.EXIT;\r\n              }\r\n              else if ( c[i] > d[i] ){\r\n                r = 1;\r\n                return TAFFY.EXIT;\r\n              }\r\n            } );\r\n          }\r\n          else if ( dir === 'logicaldesc' ){\r\n            // if logicaldesc than grab the charnum arrays for the two values we are looking at\r\n            c = numcharsplit( a[col] );\r\n            d = numcharsplit( b[col] );\r\n            // loop over the charnumarrays until one value is lower than the other\r\n            T.each( (c.length <= d.length) ? c : d, function ( x, i ) {\r\n              if ( c[i] > d[i] ){\r\n                r = -1;\r\n                return TAFFY.EXIT;\r\n              }\r\n              else if ( c[i] < d[i] ){\r\n                r = 1;\r\n                return TAFFY.EXIT;\r\n              }\r\n            } );\r\n          }\r\n          else if ( dir === 'asec' && a[col] < b[col] ){\r\n            // if asec - default - check to see which is higher\r\n            r = -1;\r\n            return T.EXIT;\r\n          }\r\n          else if ( dir === 'asec' && a[col] > b[col] ){\r\n            // if asec - default - check to see which is higher\r\n            r = 1;\r\n            return T.EXIT;\r\n          }\r\n          else if ( dir === 'desc' && a[col] > b[col] ){\r\n            // if desc check to see which is lower\r\n            r = -1;\r\n            return T.EXIT;\r\n\r\n          }\r\n          else if ( dir === 'desc' && a[col] < b[col] ){\r\n            // if desc check to see which is lower\r\n            r = 1;\r\n            return T.EXIT;\r\n\r\n          }\r\n          // if r is still 0 and we are doing a logical sort than look to see if one array is longer than the other\r\n          if ( r === 0 && dir === 'logical' && c.length < d.length ){\r\n            r = -1;\r\n          }\r\n          else if ( r === 0 && dir === 'logical' && c.length > d.length ){\r\n            r = 1;\r\n          }\r\n          else if ( r === 0 && dir === 'logicaldesc' && c.length > d.length ){\r\n            r = -1;\r\n          }\r\n          else if ( r === 0 && dir === 'logicaldesc' && c.length < d.length ){\r\n            r = 1;\r\n          }\r\n\r\n          if ( r !== 0 ){\r\n            return T.EXIT;\r\n          }\r\n\r\n\r\n        } );\r\n        return r;\r\n      };\r\n      // call the sort function and return the newly sorted array\r\n      return (ar && ar.push) ? ar.sort( sortFunc ) : ar;\r\n\r\n\r\n    };\r\n\r\n    // ****************************************\r\n    // *\r\n    // * Takes: a string containing numbers and letters and turn it into an array\r\n    // * Returns: return an array of numbers and letters\r\n    // * Purpose: Used for logical sorting. String Example: 12ABC results: [12,'ABC']\r\n    // **************************************** \r\n    (function () {\r\n      // creates a cache for numchar conversions\r\n      var cache = {}, cachcounter = 0;\r\n      // creates the numcharsplit function\r\n      numcharsplit = function ( thing ) {\r\n        // if over 1000 items exist in the cache, clear it and start over\r\n        if ( cachcounter > cmax ){\r\n          cache = {};\r\n          cachcounter = 0;\r\n        }\r\n\r\n        // if a cache can be found for a numchar then return its array value\r\n        return cache['_' + thing] || (function () {\r\n          // otherwise do the conversion\r\n          // make sure it is a string and setup so other variables\r\n          var nthing = String( thing ),\r\n            na = [],\r\n            rv = '_',\r\n            rt = '',\r\n            x, xx, c;\r\n\r\n          // loop over the string char by char\r\n          for ( x = 0, xx = nthing.length; x < xx; x++ ){\r\n            // take the char at each location\r\n            c = nthing.charCodeAt( x );\r\n            // check to see if it is a valid number char and append it to the array.\r\n            // if last char was a string push the string to the charnum array\r\n            if ( ( c >= 48 && c <= 57 ) || c === 46 ){\r\n              if ( rt !== 'n' ){\r\n                rt = 'n';\r\n                na.push( rv.toLowerCase() );\r\n                rv = '';\r\n              }\r\n              rv = rv + nthing.charAt( x );\r\n            }\r\n            else {\r\n              // check to see if it is a valid string char and append to string\r\n              // if last char was a number push the whole number to the charnum array\r\n              if ( rt !== 's' ){\r\n                rt = 's';\r\n                na.push( parseFloat( rv ) );\r\n                rv = '';\r\n              }\r\n              rv = rv + nthing.charAt( x );\r\n            }\r\n          }\r\n          // once done, push the last value to the charnum array and remove the first uneeded item\r\n          na.push( (rt === 'n') ? parseFloat( rv ) : rv.toLowerCase() );\r\n          na.shift();\r\n          // add to cache\r\n          cache['_' + thing] = na;\r\n          cachcounter++;\r\n          // return charnum array\r\n          return na;\r\n        }());\r\n      };\r\n    }());\r\n\r\n    // ****************************************\r\n    // *\r\n    // * Runs a query\r\n    // **************************************** \r\n\r\n\r\n    run = function () {\r\n      this.context( {\r\n        results : this.getDBI().query( this.context() )\r\n      });\r\n\r\n    };\r\n\r\n    API.extend( 'filter', function () {\r\n      // ****************************************\r\n      // *\r\n      // * Takes: takes unlimited filter objects as arguments\r\n      // * Returns: method collection\r\n      // * Purpose: Take filters as objects and cache functions for later lookup when a query is run\r\n      // **************************************** \r\n      var\r\n        nc = TAFFY.mergeObj( this.context(), { run : null } ),\r\n        nq = []\r\n      ;\r\n      each( nc.q, function ( v ) {\r\n        nq.push( v );\r\n      });\r\n      nc.q = nq;\r\n      // Hadnle passing of ___ID or a record on lookup.\r\n      each( arguments, function ( f ) {\r\n        nc.q.push( returnFilter( f ) );\r\n        nc.filterRaw.push( f );\r\n      });\r\n\r\n      return this.getroot( nc );\r\n    });\r\n\r\n    API.extend( 'order', function ( o ) {\r\n      // ****************************************\r\n      // *\r\n      // * Purpose: takes a string and creates an array of order instructions to be used with a query\r\n      // ****************************************\r\n\r\n      o = o.split( ',' );\r\n      var x = [], nc;\r\n\r\n      each( o, function ( r ) {\r\n        x.push( r.replace( /^\\s*/, '' ).replace( /\\s*$/, '' ) );\r\n      });\r\n\r\n      nc = TAFFY.mergeObj( this.context(), {sort : null} );\r\n      nc.order = x;\r\n\r\n      return this.getroot( nc );\r\n    });\r\n\r\n    API.extend( 'limit', function ( n ) {\r\n      // ****************************************\r\n      // *\r\n      // * Purpose: takes a limit number to limit the number of rows returned by a query. Will update the results\r\n      // * of a query\r\n      // **************************************** \r\n      var nc = TAFFY.mergeObj( this.context(), {}),\r\n        limitedresults\r\n        ;\r\n\r\n      nc.limit = n;\r\n\r\n      if ( nc.run && nc.sort ){\r\n        limitedresults = [];\r\n        each( nc.results, function ( i, x ) {\r\n          if ( (x + 1) > n ){\r\n            return TAFFY.EXIT;\r\n          }\r\n          limitedresults.push( i );\r\n        });\r\n        nc.results = limitedresults;\r\n      }\r\n\r\n      return this.getroot( nc );\r\n    });\r\n\r\n    API.extend( 'start', function ( n ) {\r\n      // ****************************************\r\n      // *\r\n      // * Purpose: takes a limit number to limit the number of rows returned by a query. Will update the results\r\n      // * of a query\r\n      // **************************************** \r\n      var nc = TAFFY.mergeObj( this.context(), {} ),\r\n        limitedresults\r\n        ;\r\n\r\n      nc.start = n;\r\n\r\n      if ( nc.run && nc.sort && !nc.limit ){\r\n        limitedresults = [];\r\n        each( nc.results, function ( i, x ) {\r\n          if ( (x + 1) > n ){\r\n            limitedresults.push( i );\r\n          }\r\n        });\r\n        nc.results = limitedresults;\r\n      }\r\n      else {\r\n        nc = TAFFY.mergeObj( this.context(), {run : null, start : n} );\r\n      }\r\n\r\n      return this.getroot( nc );\r\n    });\r\n\r\n    API.extend( 'update', function ( arg0, arg1, arg2 ) {\r\n      // ****************************************\r\n      // *\r\n      // * Takes: a object and passes it off DBI update method for all matched records\r\n      // **************************************** \r\n      var runEvent = true, o = {}, args = arguments, that;\r\n      if ( TAFFY.isString( arg0 ) &&\r\n        (arguments.length === 2 || arguments.length === 3) )\r\n      {\r\n        o[arg0] = arg1;\r\n        if ( arguments.length === 3 ){\r\n          runEvent = arg2;\r\n        }\r\n      }\r\n      else {\r\n        o = arg0;\r\n        if ( args.length === 2 ){\r\n          runEvent = arg1;\r\n        }\r\n      }\r\n\r\n      that = this;\r\n      run.call( this );\r\n      each( this.context().results, function ( r ) {\r\n        var c = o;\r\n        if ( TAFFY.isFunction( c ) ){\r\n          c = c.apply( TAFFY.mergeObj( r, {} ) );\r\n        }\r\n        else {\r\n          if ( T.isFunction( c ) ){\r\n            c = c( TAFFY.mergeObj( r, {} ) );\r\n          }\r\n        }\r\n        if ( TAFFY.isObject( c ) ){\r\n          that.getDBI().update( r.___id, c, runEvent );\r\n        }\r\n      });\r\n      if ( this.context().results.length ){\r\n        this.context( { run : null });\r\n      }\r\n      return this;\r\n    });\r\n    API.extend( 'remove', function ( runEvent ) {\r\n      // ****************************************\r\n      // *\r\n      // * Purpose: removes records from the DB via the remove and removeCommit DBI methods\r\n      // **************************************** \r\n      var that = this, c = 0;\r\n      run.call( this );\r\n      each( this.context().results, function ( r ) {\r\n        that.getDBI().remove( r.___id );\r\n        c++;\r\n      });\r\n      if ( this.context().results.length ){\r\n        this.context( {\r\n          run : null\r\n        });\r\n        that.getDBI().removeCommit( runEvent );\r\n      }\r\n\r\n      return c;\r\n    });\r\n\r\n\r\n    API.extend( 'count', function () {\r\n      // ****************************************\r\n      // *\r\n      // * Returns: The length of a query result\r\n      // **************************************** \r\n      run.call( this );\r\n      return this.context().results.length;\r\n    });\r\n\r\n    API.extend( 'callback', function ( f, delay ) {\r\n      // ****************************************\r\n      // *\r\n      // * Returns null;\r\n      // * Runs a function on return of run.call\r\n      // **************************************** \r\n      if ( f ){\r\n        var that = this;\r\n        setTimeout( function () {\r\n          run.call( that );\r\n          f.call( that.getroot( that.context() ) );\r\n        }, delay || 0 );\r\n      }\r\n\r\n\r\n      return null;\r\n    });\r\n\r\n    API.extend( 'get', function () {\r\n      // ****************************************\r\n      // *\r\n      // * Returns: An array of all matching records\r\n      // **************************************** \r\n      run.call( this );\r\n      return this.context().results;\r\n    });\r\n\r\n    API.extend( 'stringify', function () {\r\n      // ****************************************\r\n      // *\r\n      // * Returns: An JSON string of all matching records\r\n      // **************************************** \r\n      return JSON.stringify( this.get() );\r\n    });\r\n    API.extend( 'first', function () {\r\n      // ****************************************\r\n      // *\r\n      // * Returns: The first matching record\r\n      // **************************************** \r\n      run.call( this );\r\n      return this.context().results[0] || false;\r\n    });\r\n    API.extend( 'last', function () {\r\n      // ****************************************\r\n      // *\r\n      // * Returns: The last matching record\r\n      // **************************************** \r\n      run.call( this );\r\n      return this.context().results[this.context().results.length - 1] ||\r\n        false;\r\n    });\r\n\r\n\r\n    API.extend( 'sum', function () {\r\n      // ****************************************\r\n      // *\r\n      // * Takes: column to sum up\r\n      // * Returns: Sums the values of a column\r\n      // **************************************** \r\n      var total = 0, that = this;\r\n      run.call( that );\r\n      each( arguments, function ( c ) {\r\n        each( that.context().results, function ( r ) {\r\n          total = total + (r[c] || 0);\r\n        });\r\n      });\r\n      return total;\r\n    });\r\n\r\n    API.extend( 'min', function ( c ) {\r\n      // ****************************************\r\n      // *\r\n      // * Takes: column to find min\r\n      // * Returns: the lowest value\r\n      // **************************************** \r\n      var lowest = null;\r\n      run.call( this );\r\n      each( this.context().results, function ( r ) {\r\n        if ( lowest === null || r[c] < lowest ){\r\n          lowest = r[c];\r\n        }\r\n      });\r\n      return lowest;\r\n    });\r\n\r\n    //  Taffy innerJoin Extension (OCD edition)\r\n    //  =======================================\r\n    //\r\n    //  How to Use\r\n    //  **********\r\n    //\r\n    //  left_table.innerJoin( right_table, condition1 <,... conditionN> )\r\n    //\r\n    //  A condition can take one of 2 forms:\r\n    //\r\n    //    1. An ARRAY with 2 or 3 values:\r\n    //    A column name from the left table, an optional comparison string,\r\n    //    and column name from the right table.  The condition passes if the test\r\n    //    indicated is true.   If the condition string is omitted, '===' is assumed.\r\n    //    EXAMPLES: [ 'last_used_time', '>=', 'current_use_time' ], [ 'user_id','id' ]\r\n    //\r\n    //    2. A FUNCTION:\r\n    //    The function receives a left table row and right table row during the\r\n    //    cartesian join.  If the function returns true for the rows considered,\r\n    //    the merged row is included in the result set.\r\n    //    EXAMPLE: function (l,r){ return l.name === r.label; }\r\n    //\r\n    //  Conditions are considered in the order they are presented.  Therefore the best\r\n    //  performance is realized when the least expensive and highest prune-rate\r\n    //  conditions are placed first, since if they return false Taffy skips any\r\n    //  further condition tests.\r\n    //\r\n    //  Other notes\r\n    //  ***********\r\n    //\r\n    //  This code passes jslint with the exception of 2 warnings about\r\n    //  the '==' and '!=' lines.  We can't do anything about that short of\r\n    //  deleting the lines.\r\n    //\r\n    //  Credits\r\n    //  *******\r\n    //\r\n    //  Heavily based upon the work of Ian Toltz.\r\n    //  Revisions to API by Michael Mikowski.\r\n    //  Code convention per standards in http://manning.com/mikowski\r\n    (function () {\r\n      var innerJoinFunction = (function () {\r\n        var fnCompareList, fnCombineRow, fnMain;\r\n\r\n        fnCompareList = function ( left_row, right_row, arg_list ) {\r\n          var data_lt, data_rt, op_code, error;\r\n\r\n          if ( arg_list.length === 2 ){\r\n            data_lt = left_row[arg_list[0]];\r\n            op_code = '===';\r\n            data_rt = right_row[arg_list[1]];\r\n          }\r\n          else {\r\n            data_lt = left_row[arg_list[0]];\r\n            op_code = arg_list[1];\r\n            data_rt = right_row[arg_list[2]];\r\n          }\r\n\r\n          /*jslint eqeq : true */\r\n          switch ( op_code ){\r\n            case '===' :\r\n              return data_lt === data_rt;\r\n            case '!==' :\r\n              return data_lt !== data_rt;\r\n            case '<'   :\r\n              return data_lt < data_rt;\r\n            case '>'   :\r\n              return data_lt > data_rt;\r\n            case '<='  :\r\n              return data_lt <= data_rt;\r\n            case '>='  :\r\n              return data_lt >= data_rt;\r\n            case '=='  :\r\n              return data_lt == data_rt;\r\n            case '!='  :\r\n              return data_lt != data_rt;\r\n            default :\r\n              throw String( op_code ) + ' is not supported';\r\n          }\r\n          // 'jslint eqeq : false'  here results in\r\n          // \"Unreachable '/*jslint' after 'return'\".\r\n          // We don't need it though, as the rule exception\r\n          // is discarded at the end of this functional scope\r\n        };\r\n\r\n        fnCombineRow = function ( left_row, right_row ) {\r\n          var out_map = {}, i, prefix;\r\n\r\n          for ( i in left_row ){\r\n            if ( left_row.hasOwnProperty( i ) ){\r\n              out_map[i] = left_row[i];\r\n            }\r\n          }\r\n          for ( i in right_row ){\r\n            if ( right_row.hasOwnProperty( i ) && i !== '___id' &&\r\n              i !== '___s' )\r\n            {\r\n              prefix = !TAFFY.isUndefined( out_map[i] ) ? 'right_' : '';\r\n              out_map[prefix + String( i ) ] = right_row[i];\r\n            }\r\n          }\r\n          return out_map;\r\n        };\r\n\r\n        fnMain = function ( table ) {\r\n          var\r\n            right_table, i,\r\n            arg_list = arguments,\r\n            arg_length = arg_list.length,\r\n            result_list = []\r\n            ;\r\n\r\n          if ( typeof table.filter !== 'function' ){\r\n            if ( table.TAFFY ){ right_table = table(); }\r\n            else {\r\n              throw 'TAFFY DB or result not supplied';\r\n            }\r\n          }\r\n          else { right_table = table; }\r\n\r\n          this.context( {\r\n            results : this.getDBI().query( this.context() )\r\n          } );\r\n\r\n          TAFFY.each( this.context().results, function ( left_row ) {\r\n            right_table.each( function ( right_row ) {\r\n              var arg_data, is_ok = true;\r\n              CONDITION:\r\n                for ( i = 1; i < arg_length; i++ ){\r\n                  arg_data = arg_list[i];\r\n                  if ( typeof arg_data === 'function' ){\r\n                    is_ok = arg_data( left_row, right_row );\r\n                  }\r\n                  else if ( typeof arg_data === 'object' && arg_data.length ){\r\n                    is_ok = fnCompareList( left_row, right_row, arg_data );\r\n                  }\r\n                  else {\r\n                    is_ok = false;\r\n                  }\r\n\r\n                  if ( !is_ok ){ break CONDITION; } // short circuit\r\n                }\r\n\r\n              if ( is_ok ){\r\n                result_list.push( fnCombineRow( left_row, right_row ) );\r\n              }\r\n            } );\r\n          } );\r\n          return TAFFY( result_list )();\r\n        };\r\n\r\n        return fnMain;\r\n      }());\r\n\r\n      API.extend( 'join', innerJoinFunction );\r\n    }());\r\n\r\n    API.extend( 'max', function ( c ) {\r\n      // ****************************************\r\n      // *\r\n      // * Takes: column to find max\r\n      // * Returns: the highest value\r\n      // ****************************************\r\n      var highest = null;\r\n      run.call( this );\r\n      each( this.context().results, function ( r ) {\r\n        if ( highest === null || r[c] > highest ){\r\n          highest = r[c];\r\n        }\r\n      });\r\n      return highest;\r\n    });\r\n\r\n    API.extend( 'select', function () {\r\n      // ****************************************\r\n      // *\r\n      // * Takes: columns to select values into an array\r\n      // * Returns: array of values\r\n      // * Note if more than one column is given an array of arrays is returned\r\n      // **************************************** \r\n\r\n      var ra = [], args = arguments;\r\n      run.call( this );\r\n      if ( arguments.length === 1 ){\r\n\r\n        each( this.context().results, function ( r ) {\r\n\r\n          ra.push( r[args[0]] );\r\n        });\r\n      }\r\n      else {\r\n        each( this.context().results, function ( r ) {\r\n          var row = [];\r\n          each( args, function ( c ) {\r\n            row.push( r[c] );\r\n          });\r\n          ra.push( row );\r\n        });\r\n      }\r\n      return ra;\r\n    });\r\n    API.extend( 'distinct', function () {\r\n      // ****************************************\r\n      // *\r\n      // * Takes: columns to select unique alues into an array\r\n      // * Returns: array of values\r\n      // * Note if more than one column is given an array of arrays is returned\r\n      // **************************************** \r\n      var ra = [], args = arguments;\r\n      run.call( this );\r\n      if ( arguments.length === 1 ){\r\n\r\n        each( this.context().results, function ( r ) {\r\n          var v = r[args[0]], dup = false;\r\n          each( ra, function ( d ) {\r\n            if ( v === d ){\r\n              dup = true;\r\n              return TAFFY.EXIT;\r\n            }\r\n          });\r\n          if ( !dup ){\r\n            ra.push( v );\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        each( this.context().results, function ( r ) {\r\n          var row = [], dup = false;\r\n          each( args, function ( c ) {\r\n            row.push( r[c] );\r\n          });\r\n          each( ra, function ( d ) {\r\n            var ldup = true;\r\n            each( args, function ( c, i ) {\r\n              if ( row[i] !== d[i] ){\r\n                ldup = false;\r\n                return TAFFY.EXIT;\r\n              }\r\n            });\r\n            if ( ldup ){\r\n              dup = true;\r\n              return TAFFY.EXIT;\r\n            }\r\n          });\r\n          if ( !dup ){\r\n            ra.push( row );\r\n          }\r\n        });\r\n      }\r\n      return ra;\r\n    });\r\n    API.extend( 'supplant', function ( template, returnarray ) {\r\n      // ****************************************\r\n      // *\r\n      // * Takes: a string template formated with key to be replaced with values from the rows, flag to determine if we want array of strings\r\n      // * Returns: array of values or a string\r\n      // **************************************** \r\n      var ra = [];\r\n      run.call( this );\r\n      each( this.context().results, function ( r ) {\r\n        // TODO: The curly braces used to be unescaped\r\n        ra.push( template.replace( /\\{([^\\{\\}]*)\\}/g, function ( a, b ) {\r\n          var v = r[b];\r\n          return typeof v === 'string' || typeof v === 'number' ? v : a;\r\n        } ) );\r\n      });\r\n      return (!returnarray) ? ra.join( \"\" ) : ra;\r\n    });\r\n\r\n\r\n    API.extend( 'each', function ( m ) {\r\n      // ****************************************\r\n      // *\r\n      // * Takes: a function\r\n      // * Purpose: loops over every matching record and applies the function\r\n      // **************************************** \r\n      run.call( this );\r\n      each( this.context().results, m );\r\n      return this;\r\n    });\r\n    API.extend( 'map', function ( m ) {\r\n      // ****************************************\r\n      // *\r\n      // * Takes: a function\r\n      // * Purpose: loops over every matching record and applies the function, returing the results in an array\r\n      // **************************************** \r\n      var ra = [];\r\n      run.call( this );\r\n      each( this.context().results, function ( r ) {\r\n        ra.push( m( r ) );\r\n      });\r\n      return ra;\r\n    });\r\n\r\n\r\n\r\n    T = function ( d ) {\r\n      // ****************************************\r\n      // *\r\n      // * T is the main TAFFY object\r\n      // * Takes: an array of objects or JSON\r\n      // * Returns a new TAFFYDB\r\n      // **************************************** \r\n      var TOb = [],\r\n        ID = {},\r\n        RC = 1,\r\n        settings = {\r\n          template          : false,\r\n          onInsert          : false,\r\n          onUpdate          : false,\r\n          onRemove          : false,\r\n          onDBChange        : false,\r\n          storageName       : false,\r\n          forcePropertyCase : null,\r\n          cacheSize         : 100,\r\n          name              : ''\r\n        },\r\n        dm = new Date(),\r\n        CacheCount = 0,\r\n        CacheClear = 0,\r\n        Cache = {},\r\n        DBI, runIndexes, root\r\n        ;\r\n      // ****************************************\r\n      // *\r\n      // * TOb = this database\r\n      // * ID = collection of the record IDs and locations within the DB, used for fast lookups\r\n      // * RC = record counter, used for creating IDs\r\n      // * settings.template = the template to merge all new records with\r\n      // * settings.onInsert = event given a copy of the newly inserted record\r\n      // * settings.onUpdate = event given the original record, the changes, and the new record\r\n      // * settings.onRemove = event given the removed record\r\n      // * settings.forcePropertyCase = on insert force the proprty case to be lower or upper. default lower, null/undefined will leave case as is\r\n      // * dm = the modify date of the database, used for query caching\r\n      // **************************************** \r\n\r\n\r\n      runIndexes = function ( indexes ) {\r\n        // ****************************************\r\n        // *\r\n        // * Takes: a collection of indexes\r\n        // * Returns: collection with records matching indexed filters\r\n        // **************************************** \r\n\r\n        var records = [], UniqueEnforce = false;\r\n\r\n        if ( indexes.length === 0 ){\r\n          return TOb;\r\n        }\r\n\r\n        each( indexes, function ( f ) {\r\n          // Check to see if record ID\r\n          if ( T.isString( f ) && /[t][0-9]*[r][0-9]*/i.test( f ) &&\r\n            TOb[ID[f]] )\r\n          {\r\n            records.push( TOb[ID[f]] );\r\n            UniqueEnforce = true;\r\n          }\r\n          // Check to see if record\r\n          if ( T.isObject( f ) && f.___id && f.___s &&\r\n            TOb[ID[f.___id]] )\r\n          {\r\n            records.push( TOb[ID[f.___id]] );\r\n            UniqueEnforce = true;\r\n          }\r\n          // Check to see if array of indexes\r\n          if ( T.isArray( f ) ){\r\n            each( f, function ( r ) {\r\n              each( runIndexes( r ), function ( rr ) {\r\n                records.push( rr );\r\n              });\r\n\r\n            });\r\n          }\r\n        });\r\n        if ( UniqueEnforce && records.length > 1 ){\r\n          records = [];\r\n        }\r\n\r\n        return records;\r\n      };\r\n\r\n      DBI = {\r\n        // ****************************************\r\n        // *\r\n        // * The DBI is the internal DataBase Interface that interacts with the data\r\n        // **************************************** \r\n        dm           : function ( nd ) {\r\n          // ****************************************\r\n          // *\r\n          // * Takes: an optional new modify date\r\n          // * Purpose: used to get and set the DB modify date\r\n          // **************************************** \r\n          if ( nd ){\r\n            dm = nd;\r\n            Cache = {};\r\n            CacheCount = 0;\r\n            CacheClear = 0;\r\n          }\r\n          if ( settings.onDBChange ){\r\n            setTimeout( function () {\r\n              settings.onDBChange.call( TOb );\r\n            }, 0 );\r\n          }\r\n          if ( settings.storageName ){\r\n            setTimeout( function () {\r\n              localStorage.setItem( 'taffy_' + settings.storageName,\r\n                JSON.stringify( TOb ) );\r\n            });\r\n          }\r\n          return dm;\r\n        },\r\n        insert       : function ( i, runEvent ) {\r\n          // ****************************************\r\n          // *\r\n          // * Takes: a new record to insert\r\n          // * Purpose: merge the object with the template, add an ID, insert into DB, call insert event\r\n          // **************************************** \r\n          var columns = [],\r\n            records   = [],\r\n            input     = protectJSON( i )\r\n            ;\r\n          each( input, function ( v, i ) {\r\n            var nv, o;\r\n            if ( T.isArray( v ) && i === 0 ){\r\n              each( v, function ( av ) {\r\n\r\n                columns.push( (settings.forcePropertyCase === 'lower')\r\n                  ? av.toLowerCase()\r\n                    : (settings.forcePropertyCase === 'upper')\r\n                  ? av.toUpperCase() : av );\r\n              });\r\n              return true;\r\n            }\r\n            else if ( T.isArray( v ) ){\r\n              nv = {};\r\n              each( v, function ( av, ai ) {\r\n                nv[columns[ai]] = av;\r\n              });\r\n              v = nv;\r\n\r\n            }\r\n            else if ( T.isObject( v ) && settings.forcePropertyCase ){\r\n              o = {};\r\n\r\n              eachin( v, function ( av, ai ) {\r\n                o[(settings.forcePropertyCase === 'lower') ? ai.toLowerCase()\r\n                  : (settings.forcePropertyCase === 'upper')\r\n                  ? ai.toUpperCase() : ai] = v[ai];\r\n              });\r\n              v = o;\r\n            }\r\n\r\n            RC++;\r\n            v.___id = 'T' + String( idpad + TC ).slice( -6 ) + 'R' +\r\n              String( idpad + RC ).slice( -6 );\r\n            v.___s = true;\r\n            records.push( v.___id );\r\n            if ( settings.template ){\r\n              v = T.mergeObj( settings.template, v );\r\n            }\r\n            TOb.push( v );\r\n\r\n            ID[v.___id] = TOb.length - 1;\r\n            if ( settings.onInsert &&\r\n              (runEvent || TAFFY.isUndefined( runEvent )) )\r\n            {\r\n              settings.onInsert.call( v );\r\n            }\r\n            DBI.dm( new Date() );\r\n          });\r\n          return root( records );\r\n        },\r\n        sort         : function ( o ) {\r\n          // ****************************************\r\n          // *\r\n          // * Purpose: Change the sort order of the DB itself and reset the ID bucket\r\n          // **************************************** \r\n          TOb = orderByCol( TOb, o.split( ',' ) );\r\n          ID = {};\r\n          each( TOb, function ( r, i ) {\r\n            ID[r.___id] = i;\r\n          });\r\n          DBI.dm( new Date() );\r\n          return true;\r\n        },\r\n        update       : function ( id, changes, runEvent ) {\r\n          // ****************************************\r\n          // *\r\n          // * Takes: the ID of record being changed and the changes\r\n          // * Purpose: Update a record and change some or all values, call the on update method\r\n          // ****************************************\r\n\r\n          var nc = {}, or, nr, tc, hasChange;\r\n          if ( settings.forcePropertyCase ){\r\n            eachin( changes, function ( v, p ) {\r\n              nc[(settings.forcePropertyCase === 'lower') ? p.toLowerCase()\r\n                : (settings.forcePropertyCase === 'upper') ? p.toUpperCase()\r\n                : p] = v;\r\n            });\r\n            changes = nc;\r\n          }\r\n\r\n          or = TOb[ID[id]];\r\n          nr = T.mergeObj( or, changes );\r\n\r\n          tc = {};\r\n          hasChange = false;\r\n          eachin( nr, function ( v, i ) {\r\n            if ( TAFFY.isUndefined( or[i] ) || or[i] !== v ){\r\n              tc[i] = v;\r\n              hasChange = true;\r\n            }\r\n          });\r\n          if ( hasChange ){\r\n            if ( settings.onUpdate &&\r\n              (runEvent || TAFFY.isUndefined( runEvent )) )\r\n            {\r\n              settings.onUpdate.call( nr, TOb[ID[id]], tc );\r\n            }\r\n            TOb[ID[id]] = nr;\r\n            DBI.dm( new Date() );\r\n          }\r\n        },\r\n        remove       : function ( id ) {\r\n          // ****************************************\r\n          // *\r\n          // * Takes: the ID of record to be removed\r\n          // * Purpose: remove a record, changes its ___s value to false\r\n          // **************************************** \r\n          TOb[ID[id]].___s = false;\r\n        },\r\n        removeCommit : function ( runEvent ) {\r\n          var x;\r\n          // ****************************************\r\n          // *\r\n          // * \r\n          // * Purpose: loop over all records and remove records with ___s = false, call onRemove event, clear ID\r\n          // ****************************************\r\n          for ( x = TOb.length - 1; x > -1; x-- ){\r\n\r\n            if ( !TOb[x].___s ){\r\n              if ( settings.onRemove &&\r\n                (runEvent || TAFFY.isUndefined( runEvent )) )\r\n              {\r\n                settings.onRemove.call( TOb[x] );\r\n              }\r\n              ID[TOb[x].___id] = undefined;\r\n              TOb.splice( x, 1 );\r\n            }\r\n          }\r\n          ID = {};\r\n          each( TOb, function ( r, i ) {\r\n            ID[r.___id] = i;\r\n          });\r\n          DBI.dm( new Date() );\r\n        },\r\n        query : function ( context ) {\r\n          // ****************************************\r\n          // *\r\n          // * Takes: the context object for a query and either returns a cache result or a new query result\r\n          // **************************************** \r\n          var returnq, cid, results, indexed, limitq, ni;\r\n\r\n          if ( settings.cacheSize ) {\r\n            cid = '';\r\n            each( context.filterRaw, function ( r ) {\r\n              if ( T.isFunction( r ) ){\r\n                cid = 'nocache';\r\n                return TAFFY.EXIT;\r\n              }\r\n            });\r\n            if ( cid === '' ){\r\n              cid = makeCid( T.mergeObj( context,\r\n                {q : false, run : false, sort : false} ) );\r\n            }\r\n          }\r\n          // Run a new query if there are no results or the run date has been cleared\r\n          if ( !context.results || !context.run ||\r\n            (context.run && DBI.dm() > context.run) )\r\n          {\r\n            results = [];\r\n\r\n            // check Cache\r\n\r\n            if ( settings.cacheSize && Cache[cid] ){\r\n\r\n              Cache[cid].i = CacheCount++;\r\n              return Cache[cid].results;\r\n            }\r\n            else {\r\n              // if no filter, return DB\r\n              if ( context.q.length === 0 && context.index.length === 0 ){\r\n                each( TOb, function ( r ) {\r\n                  results.push( r );\r\n                });\r\n                returnq = results;\r\n              }\r\n              else {\r\n                // use indexes\r\n\r\n                indexed = runIndexes( context.index );\r\n\r\n                // run filters\r\n                each( indexed, function ( r ) {\r\n                  // Run filter to see if record matches query\r\n                  if ( context.q.length === 0 || runFilters( r, context.q ) ){\r\n                    results.push( r );\r\n                  }\r\n                });\r\n\r\n                returnq = results;\r\n              }\r\n            }\r\n\r\n\r\n          }\r\n          else {\r\n            // If query exists and run has not been cleared return the cache results\r\n            returnq = context.results;\r\n          }\r\n          // If a custom order array exists and the run has been clear or the sort has been cleared\r\n          if ( context.order.length > 0 && (!context.run || !context.sort) ){\r\n            // order the results\r\n            returnq = orderByCol( returnq, context.order );\r\n          }\r\n\r\n          // If a limit on the number of results exists and it is less than the returned results, limit results\r\n          if ( returnq.length &&\r\n            ((context.limit && context.limit < returnq.length) ||\r\n              context.start)\r\n          ) {\r\n            limitq = [];\r\n            each( returnq, function ( r, i ) {\r\n              if ( !context.start ||\r\n                (context.start && (i + 1) >= context.start) )\r\n              {\r\n                if ( context.limit ){\r\n                  ni = (context.start) ? (i + 1) - context.start : i;\r\n                  if ( ni < context.limit ){\r\n                    limitq.push( r );\r\n                  }\r\n                  else if ( ni > context.limit ){\r\n                    return TAFFY.EXIT;\r\n                  }\r\n                }\r\n                else {\r\n                  limitq.push( r );\r\n                }\r\n              }\r\n            });\r\n            returnq = limitq;\r\n          }\r\n\r\n          // update cache\r\n          if ( settings.cacheSize && cid !== 'nocache' ){\r\n            CacheClear++;\r\n\r\n            setTimeout( function () {\r\n              var bCounter, nc;\r\n              if ( CacheClear >= settings.cacheSize * 2 ){\r\n                CacheClear = 0;\r\n                bCounter = CacheCount - settings.cacheSize;\r\n                nc = {};\r\n                eachin( function ( r, k ) {\r\n                  if ( r.i >= bCounter ){\r\n                    nc[k] = r;\r\n                  }\r\n                });\r\n                Cache = nc;\r\n              }\r\n            }, 0 );\r\n\r\n            Cache[cid] = { i : CacheCount++, results : returnq };\r\n          }\r\n          return returnq;\r\n        }\r\n      };\r\n\r\n\r\n      root = function () {\r\n        var iAPI, context;\r\n        // ****************************************\r\n        // *\r\n        // * The root function that gets returned when a new DB is created\r\n        // * Takes: unlimited filter arguments and creates filters to be run when a query is called\r\n        // **************************************** \r\n        // ****************************************\r\n        // *\r\n        // * iAPI is the the method collection valiable when a query has been started by calling dbname\r\n        // * Certain methods are or are not avaliable once you have started a query such as insert -- you can only insert into root\r\n        // ****************************************\r\n        iAPI = TAFFY.mergeObj( TAFFY.mergeObj( API, { insert : undefined } ),\r\n          { getDBI  : function () { return DBI; },\r\n            getroot : function ( c ) { return root.call( c ); },\r\n          context : function ( n ) {\r\n            // ****************************************\r\n            // *\r\n            // * The context contains all the information to manage a query including filters, limits, and sorts\r\n            // **************************************** \r\n            if ( n ){\r\n              context = TAFFY.mergeObj( context,\r\n                n.hasOwnProperty('results')\r\n                  ? TAFFY.mergeObj( n, { run : new Date(), sort: new Date() })\r\n                  : n\r\n              );\r\n            }\r\n            return context;\r\n          },\r\n          extend  : undefined\r\n        });\r\n\r\n        context = (this && this.q) ? this : {\r\n          limit     : false,\r\n          start     : false,\r\n          q         : [],\r\n          filterRaw : [],\r\n          index     : [],\r\n          order     : [],\r\n          results   : false,\r\n          run       : null,\r\n          sort      : null,\r\n          settings  : settings\r\n        };\r\n        // ****************************************\r\n        // *\r\n        // * Call the query method to setup a new query\r\n        // **************************************** \r\n        each( arguments, function ( f ) {\r\n\r\n          if ( isIndexable( f ) ){\r\n            context.index.push( f );\r\n          }\r\n          else {\r\n            context.q.push( returnFilter( f ) );\r\n          }\r\n          context.filterRaw.push( f );\r\n        });\r\n\r\n\r\n        return iAPI;\r\n      };\r\n\r\n      // ****************************************\r\n      // *\r\n      // * If new records have been passed on creation of the DB either as JSON or as an array/object, insert them\r\n      // **************************************** \r\n      TC++;\r\n      if ( d ){\r\n        DBI.insert( d );\r\n      }\r\n\r\n\r\n      root.insert = DBI.insert;\r\n\r\n      root.merge = function ( i, key, runEvent ) {\r\n        var\r\n          search      = {},\r\n          finalSearch = [],\r\n          obj         = {}\r\n          ;\r\n\r\n        runEvent    = runEvent || false;\r\n        key         = key      || 'id';\r\n\r\n        each( i, function ( o ) {\r\n          var existingObject;\r\n          search[key] = o[key];\r\n          finalSearch.push( o[key] );\r\n          existingObject = root( search ).first();\r\n          if ( existingObject ){\r\n            DBI.update( existingObject.___id, o, runEvent );\r\n          }\r\n          else {\r\n            DBI.insert( o, runEvent );\r\n          }\r\n        });\r\n\r\n        obj[key] = finalSearch;\r\n        return root( obj );\r\n      };\r\n\r\n      root.TAFFY = true;\r\n      root.sort = DBI.sort;\r\n      // ****************************************\r\n      // *\r\n      // * These are the methods that can be accessed on off the root DB function. Example dbname.insert;\r\n      // **************************************** \r\n      root.settings = function ( n ) {\r\n        // ****************************************\r\n        // *\r\n        // * Getting and setting for this DB's settings/events\r\n        // **************************************** \r\n        if ( n ){\r\n          settings = TAFFY.mergeObj( settings, n );\r\n          if ( n.template ){\r\n\r\n            root().update( n.template );\r\n          }\r\n        }\r\n        return settings;\r\n      };\r\n\r\n      // ****************************************\r\n      // *\r\n      // * These are the methods that can be accessed on off the root DB function. Example dbname.insert;\r\n      // **************************************** \r\n      root.store = function ( n ) {\r\n        // ****************************************\r\n        // *\r\n        // * Setup localstorage for this DB on a given name\r\n        // * Pull data into the DB as needed\r\n        // **************************************** \r\n        var r = false, i;\r\n        if ( localStorage ){\r\n          if ( n ){\r\n            i = localStorage.getItem( 'taffy_' + n );\r\n            if ( i && i.length > 0 ){\r\n              root.insert( i );\r\n              r = true;\r\n            }\r\n            if ( TOb.length > 0 ){\r\n              setTimeout( function () {\r\n                localStorage.setItem( 'taffy_' + settings.storageName,\r\n                  JSON.stringify( TOb ) );\r\n              });\r\n            }\r\n          }\r\n          root.settings( {storageName : n} );\r\n        }\r\n        return root;\r\n      };\r\n\r\n      // ****************************************\r\n      // *\r\n      // * Return root on DB creation and start having fun\r\n      // **************************************** \r\n      return root;\r\n    };\r\n    // ****************************************\r\n    // *\r\n    // * Sets the global TAFFY object\r\n    // **************************************** \r\n    TAFFY = T;\r\n\r\n\r\n    // ****************************************\r\n    // *\r\n    // * Create public each method\r\n    // *\r\n    // ****************************************   \r\n    T.each = each;\r\n\r\n    // ****************************************\r\n    // *\r\n    // * Create public eachin method\r\n    // *\r\n    // ****************************************   \r\n    T.eachin = eachin;\r\n    // ****************************************\r\n    // *\r\n    // * Create public extend method\r\n    // * Add a custom method to the API\r\n    // *\r\n    // ****************************************   \r\n    T.extend = API.extend;\r\n\r\n\r\n    // ****************************************\r\n    // *\r\n    // * Creates TAFFY.EXIT value that can be returned to stop an each loop\r\n    // *\r\n    // ****************************************  \r\n    TAFFY.EXIT = 'TAFFYEXIT';\r\n\r\n    // ****************************************\r\n    // *\r\n    // * Create public utility mergeObj method\r\n    // * Return a new object where items from obj2\r\n    // * have replaced or been added to the items in\r\n    // * obj1\r\n    // * Purpose: Used to combine objs\r\n    // *\r\n    // ****************************************   \r\n    TAFFY.mergeObj = function ( ob1, ob2 ) {\r\n      var c = {};\r\n      eachin( ob1, function ( v, n ) { c[n] = ob1[n]; });\r\n      eachin( ob2, function ( v, n ) { c[n] = ob2[n]; });\r\n      return c;\r\n    };\r\n\r\n\r\n    // ****************************************\r\n    // *\r\n    // * Create public utility has method\r\n    // * Returns true if a complex object, array\r\n    // * or taffy collection contains the material\r\n    // * provided in the second argument\r\n    // * Purpose: Used to comare objects\r\n    // *\r\n    // ****************************************\r\n    TAFFY.has = function ( var1, var2 ) {\r\n\r\n      var re = false, n;\r\n\r\n      if ( (var1.TAFFY) ){\r\n        re = var1( var2 );\r\n        if ( re.length > 0 ){\r\n          return true;\r\n        }\r\n        else {\r\n          return false;\r\n        }\r\n      }\r\n      else {\r\n\r\n        switch ( T.typeOf( var1 ) ){\r\n          case 'object':\r\n            if ( T.isObject( var2 ) ){\r\n              eachin( var2, function ( v, n ) {\r\n                if ( re === true && !T.isUndefined( var1[n] ) &&\r\n                  var1.hasOwnProperty( n ) )\r\n                {\r\n                  re = T.has( var1[n], var2[n] );\r\n                }\r\n                else {\r\n                  re = false;\r\n                  return TAFFY.EXIT;\r\n                }\r\n              });\r\n            }\r\n            else if ( T.isArray( var2 ) ){\r\n              each( var2, function ( v, n ) {\r\n                re = T.has( var1, var2[n] );\r\n                if ( re ){\r\n                  return TAFFY.EXIT;\r\n                }\r\n              });\r\n            }\r\n            else if ( T.isString( var2 ) ){\r\n              if ( !TAFFY.isUndefined( var1[var2] ) ){\r\n                return true;\r\n              }\r\n              else {\r\n                return false;\r\n              }\r\n            }\r\n            return re;\r\n          case 'array':\r\n            if ( T.isObject( var2 ) ){\r\n              each( var1, function ( v, i ) {\r\n                re = T.has( var1[i], var2 );\r\n                if ( re === true ){\r\n                  return TAFFY.EXIT;\r\n                }\r\n              });\r\n            }\r\n            else if ( T.isArray( var2 ) ){\r\n              each( var2, function ( v2, i2 ) {\r\n                each( var1, function ( v1, i1 ) {\r\n                  re = T.has( var1[i1], var2[i2] );\r\n                  if ( re === true ){\r\n                    return TAFFY.EXIT;\r\n                  }\r\n                });\r\n                if ( re === true ){\r\n                  return TAFFY.EXIT;\r\n                }\r\n              });\r\n            }\r\n            else if ( T.isString( var2 ) || T.isNumber( var2 ) ){\r\n             re = false;\r\n              for ( n = 0; n < var1.length; n++ ){\r\n                re = T.has( var1[n], var2 );\r\n                if ( re ){\r\n                  return true;\r\n                }\r\n              }\r\n            }\r\n            return re;\r\n          case 'string':\r\n            if ( T.isString( var2 ) && var2 === var1 ){\r\n              return true;\r\n            }\r\n            break;\r\n          default:\r\n            if ( T.typeOf( var1 ) === T.typeOf( var2 ) && var1 === var2 ){\r\n              return true;\r\n            }\r\n            break;\r\n        }\r\n      }\r\n      return false;\r\n    };\r\n\r\n    // ****************************************\r\n    // *\r\n    // * Create public utility hasAll method\r\n    // * Returns true if a complex object, array\r\n    // * or taffy collection contains the material\r\n    // * provided in the call - for arrays it must\r\n    // * contain all the material in each array item\r\n    // * Purpose: Used to comare objects\r\n    // *\r\n    // ****************************************\r\n    TAFFY.hasAll = function ( var1, var2 ) {\r\n\r\n      var T = TAFFY, ar;\r\n      if ( T.isArray( var2 ) ){\r\n        ar = true;\r\n        each( var2, function ( v ) {\r\n          ar = T.has( var1, v );\r\n          if ( ar === false ){\r\n            return TAFFY.EXIT;\r\n          }\r\n        });\r\n        return ar;\r\n      }\r\n      else {\r\n        return T.has( var1, var2 );\r\n      }\r\n    };\r\n\r\n\r\n    // ****************************************\r\n    // *\r\n    // * typeOf Fixed in JavaScript as public utility\r\n    // *\r\n    // ****************************************\r\n    TAFFY.typeOf = function ( v ) {\r\n      var s = typeof v;\r\n      if ( s === 'object' ){\r\n        if ( v ){\r\n          if ( typeof v.length === 'number' &&\r\n            !(v.propertyIsEnumerable( 'length' )) )\r\n          {\r\n            s = 'array';\r\n          }\r\n        }\r\n        else {\r\n          s = 'null';\r\n        }\r\n      }\r\n      return s;\r\n    };\r\n\r\n    // ****************************************\r\n    // *\r\n    // * Create public utility getObjectKeys method\r\n    // * Returns an array of an objects keys\r\n    // * Purpose: Used to get the keys for an object\r\n    // *\r\n    // ****************************************   \r\n    TAFFY.getObjectKeys = function ( ob ) {\r\n      var kA = [];\r\n      eachin( ob, function ( n, h ) {\r\n        kA.push( h );\r\n      });\r\n      kA.sort();\r\n      return kA;\r\n    };\r\n\r\n    // ****************************************\r\n    // *\r\n    // * Create public utility isSameArray\r\n    // * Returns an array of an objects keys\r\n    // * Purpose: Used to get the keys for an object\r\n    // *\r\n    // ****************************************   \r\n    TAFFY.isSameArray = function ( ar1, ar2 ) {\r\n      return (TAFFY.isArray( ar1 ) && TAFFY.isArray( ar2 ) &&\r\n        ar1.join( ',' ) === ar2.join( ',' )) ? true : false;\r\n    };\r\n\r\n    // ****************************************\r\n    // *\r\n    // * Create public utility isSameObject method\r\n    // * Returns true if objects contain the same\r\n    // * material or false if they do not\r\n    // * Purpose: Used to comare objects\r\n    // *\r\n    // ****************************************   \r\n    TAFFY.isSameObject = function ( ob1, ob2 ) {\r\n      var T = TAFFY, rv = true;\r\n\r\n      if ( T.isObject( ob1 ) && T.isObject( ob2 ) ){\r\n        if ( T.isSameArray( T.getObjectKeys( ob1 ),\r\n          T.getObjectKeys( ob2 ) ) )\r\n        {\r\n          eachin( ob1, function ( v, n ) {\r\n            if ( ! ( (T.isObject( ob1[n] ) && T.isObject( ob2[n] ) &&\r\n              T.isSameObject( ob1[n], ob2[n] )) ||\r\n              (T.isArray( ob1[n] ) && T.isArray( ob2[n] ) &&\r\n                T.isSameArray( ob1[n], ob2[n] )) || (ob1[n] === ob2[n]) )\r\n            ) {\r\n              rv = false;\r\n              return TAFFY.EXIT;\r\n            }\r\n          });\r\n        }\r\n        else {\r\n          rv = false;\r\n        }\r\n      }\r\n      else {\r\n        rv = false;\r\n      }\r\n      return rv;\r\n    };\r\n\r\n    // ****************************************\r\n    // *\r\n    // * Create public utility is[DataType] methods\r\n    // * Return true if obj is datatype, false otherwise\r\n    // * Purpose: Used to determine if arguments are of certain data type\r\n    // *\r\n    // * mmikowski 2012-08-06 refactored to make much less \"magical\":\r\n    // *   fewer closures and passes jslint\r\n    // *\r\n    // ****************************************\r\n\r\n    typeList = [\r\n      'String',  'Number', 'Object',   'Array',\r\n      'Boolean', 'Null',   'Function', 'Undefined'\r\n    ];\r\n  \r\n    makeTest = function ( thisKey ) {\r\n      return function ( data ) {\r\n        return TAFFY.typeOf( data ) === thisKey.toLowerCase() ? true : false;\r\n      };\r\n    };\r\n  \r\n    for ( idx = 0; idx < typeList.length; idx++ ){\r\n      typeKey = typeList[idx];\r\n      TAFFY['is' + typeKey] = makeTest( typeKey );\r\n    }\r\n  }\r\n}());\r\n\r\nif ( typeof(exports) === 'object' ){\r\n  exports.taffy = TAFFY;\r\n}\r\n\r\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/components.js":{"id":13,"canonicalName":"src/components/components.js","code":"(function () {\n    var KP;\n    exports.Sound = require('24', module).Sound;\n    exports.Confirm = require('25', module).Confirm;\n    exports.First = require('26', module).First;\n    exports.Group = require('27', module).Group;\n    exports.Grid = require('27', module).Grid;\n    KP = require('28', module);\n    exports.KeyPress = KP.KeyPress;\n    exports.SpaceKey = KP.SpaceKey;\n    exports.AnyKey = KP.AnyKey;\n    exports.MousePress = require('29', module).MousePress;\n    exports.Prompt = require('30', module).Prompt;\n    exports.Sequence = require('31', module).Sequence;\n    exports.Timeout = require('32', module).Timeout;\n    exports.Click = require('33', module).Click;\n    exports.Nothing = require('34', module).Nothing;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/components.js\"],\"names\":[\"KP\",\"exports\",\"Sound\",\"require\",\"Confirm\",\"First\",\"Group\",\"Grid\",\"KeyPress\",\"SpaceKey\",\"AnyKey\",\"MousePress\",\"Prompt\",\"Sequence\",\"Timeout\",\"Click\",\"Nothing\",\"call\"],\"mappings\":\"AACA,CAAC,YAAW;AAAA,IACV,IAAIA,EAAJ,CADU;AAAA,IAGVC,OAAA,CAAQC,KAAR,GAAgBC,OAAA,C,IAAA,E,MAAA,EAAmBD,KAAnC,CAHU;AAAA,IAKVD,OAAA,CAAQG,OAAR,GAAkBD,OAAA,C,IAAA,E,MAAA,EAAqBC,OAAvC,CALU;AAAA,IAOVH,OAAA,CAAQI,KAAR,GAAgBF,OAAA,C,IAAA,E,MAAA,EAAmBE,KAAnC,CAPU;AAAA,IASVJ,OAAA,CAAQK,KAAR,GAAgBH,OAAA,C,IAAA,E,MAAA,EAAmBG,KAAnC,CATU;AAAA,IAWVL,OAAA,CAAQM,IAAR,GAAeJ,OAAA,C,IAAA,E,MAAA,EAAmBI,IAAlC,CAXU;AAAA,IAaVP,EAAA,GAAKG,OAAA,C,IAAA,E,MAAA,CAAL,CAbU;AAAA,IAeVF,OAAA,CAAQO,QAAR,GAAmBR,EAAA,CAAGQ,QAAtB,CAfU;AAAA,IAiBVP,OAAA,CAAQQ,QAAR,GAAmBT,EAAA,CAAGS,QAAtB,CAjBU;AAAA,IAmBVR,OAAA,CAAQS,MAAR,GAAiBV,EAAA,CAAGU,MAApB,CAnBU;AAAA,IAqBVT,OAAA,CAAQU,UAAR,GAAqBR,OAAA,C,IAAA,E,MAAA,EAAwBQ,UAA7C,CArBU;AAAA,IAuBVV,OAAA,CAAQW,MAAR,GAAiBT,OAAA,C,IAAA,E,MAAA,EAAoBS,MAArC,CAvBU;AAAA,IAyBVX,OAAA,CAAQY,QAAR,GAAmBV,OAAA,C,IAAA,E,MAAA,EAAsBU,QAAzC,CAzBU;AAAA,IA2BVZ,OAAA,CAAQa,OAAR,GAAkBX,OAAA,C,IAAA,E,MAAA,EAAqBW,OAAvC,CA3BU;AAAA,IA6BVb,OAAA,CAAQc,KAAR,GAAgBZ,OAAA,C,IAAA,E,MAAA,EAAmBY,KAAnC,CA7BU;AAAA,IA+BVd,OAAA,CAAQe,OAAR,GAAkBb,OAAA,C,IAAA,E,MAAA,EAAqBa,OAAvC,CA/BU;AAAA,CAAZ,CAiCGC,IAjCH,CAiCQ,IAjCR\"}","lineCount":18,"mtime":1392868212000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/sound.js","canonicalName":"src/components/sound.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/confirm.js","canonicalName":"src/components/confirm.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/first.js","canonicalName":"src/components/first.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/group.js","canonicalName":"src/components/group.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/group.js","canonicalName":"src/components/group.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/keypress.js","canonicalName":"src/components/keypress.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/mousepress.js","canonicalName":"src/components/mousepress.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/prompt.js","canonicalName":"src/components/prompt.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/sequence.js","canonicalName":"src/components/sequence.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/timeout.js","canonicalName":"src/components/timeout.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/click.js","canonicalName":"src/components/click.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/nothing.js","canonicalName":"src/components/nothing.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.7.1\n(function() {\n  var KP;\n\n  exports.Sound = require(\"./sound\").Sound;\n\n  exports.Confirm = require(\"./confirm\").Confirm;\n\n  exports.First = require(\"./first\").First;\n\n  exports.Group = require(\"./group\").Group;\n\n  exports.Grid = require(\"./group\").Grid;\n\n  KP = require(\"./keypress\");\n\n  exports.KeyPress = KP.KeyPress;\n\n  exports.SpaceKey = KP.SpaceKey;\n\n  exports.AnyKey = KP.AnyKey;\n\n  exports.MousePress = require(\"./mousepress\").MousePress;\n\n  exports.Prompt = require(\"./prompt\").Prompt;\n\n  exports.Sequence = require(\"./sequence\").Sequence;\n\n  exports.Timeout = require(\"./timeout\").Timeout;\n\n  exports.Click = require(\"./click\").Click;\n\n  exports.Nothing = require(\"./nothing\").Nothing;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/nothing.js":{"id":34,"canonicalName":"src/components/nothing.js","code":"(function () {\n    var Nothing, Stimulus, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Stimulus = require('8', module).Stimulus;\n    Nothing = function (_super) {\n        __extends(Nothing, _super);\n        function Nothing(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            Nothing.__super__.constructor.call(this, spec);\n        }\n        Nothing.prototype.render = function (context, layer) {\n        };\n        return Nothing;\n    }(Stimulus);\n    exports.Nothing = Nothing;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/nothing.js\"],\"names\":[\"Nothing\",\"Stimulus\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"spec\",\"render\",\"context\",\"layer\",\"exports\"],\"mappings\":\"AACA,CAAC,YAAW;AAAA,IACV,IAAIA,OAAJ,EAAaC,QAAb,EACEC,SAAA,GAAY,GAAGC,cADjB,EAEEC,SAAA,GAAY,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAA,YAAE,SAASC,GAAT,IAAgBD,MAAhB,EAAwB;AAAA,gBAAE,IAAIJ,SAAA,CAAUM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ;AAAA,oBAAiCF,KAAA,CAAME,GAAN,IAAaD,MAAA,CAAOC,GAAP,CAAb,CAAnC;AAAA,aAA1B;AAAA,YAAyF,SAASE,IAAT,GAAgB;AAAA,gBAAE,KAAKC,WAAL,GAAmBL,KAAnB,CAAF;AAAA,aAAzG;AAAA,YAAuII,IAAA,CAAKE,SAAL,GAAiBL,MAAA,CAAOK,SAAxB,CAAvI;AAAA,YAA0KN,KAAA,CAAMM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA1K;AAAA,YAAwMJ,KAAA,CAAMO,SAAN,GAAkBN,MAAA,CAAOK,SAAzB,CAAxM;AAAA,YAA4O,OAAON,KAAP,CAA5O;AAAA,SAFtC,CADU;AAAA,IAKVJ,QAAA,GAAWY,OAAA,C,GAAA,E,MAAA,EAAuBZ,QAAlC,CALU;AAAA,IAOVD,OAAA,GAAW,UAASc,MAAT,EAAiB;AAAA,QAC1BV,SAAA,CAAUJ,OAAV,EAAmBc,MAAnB,EAD0B;AAAA,QAG1B,SAASd,OAAT,CAAiBe,IAAjB,EAAuB;AAAA,YACrB,IAAIA,IAAA,IAAQ,IAAZ,EAAkB;AAAA,gBAChBA,IAAA,GAAO,EAAP,CADgB;AAAA,aADG;AAAA,YAIrBf,OAAA,CAAQY,SAAR,CAAkBF,WAAlB,CAA8BF,IAA9B,CAAmC,IAAnC,EAAyCO,IAAzC,EAJqB;AAAA,SAHG;AAAA,QAU1Bf,OAAA,CAAQW,SAAR,CAAkBK,MAAlB,GAA2B,UAASC,OAAT,EAAkBC,KAAlB,EAAyB;AAAA,SAApD,CAV0B;AAAA,QAY1B,OAAOlB,OAAP,CAZ0B;AAAA,KAAlB,CAcPC,QAdO,CAAV,CAPU;AAAA,IAuBVkB,OAAA,CAAQnB,OAAR,GAAkBA,OAAlB,CAvBU;AAAA,CAAZ,CAyBGQ,IAzBH,CAyBQ,IAzBR\"}","lineCount":29,"mtime":1391947239000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.6.3\n(function() {\n  var Nothing, Stimulus,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Stimulus = require(\"../stimresp\").Stimulus;\n\n  Nothing = (function(_super) {\n    __extends(Nothing, _super);\n\n    function Nothing(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      Nothing.__super__.constructor.call(this, spec);\n    }\n\n    Nothing.prototype.render = function(context, layer) {};\n\n    return Nothing;\n\n  })(Stimulus);\n\n  exports.Nothing = Nothing;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/click.js":{"id":33,"canonicalName":"src/components/click.js","code":"(function () {\n    var Click, Q, Response, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Q = require('17', module);\n    Response = require('8', module).Response;\n    Click = function (_super) {\n        __extends(Click, _super);\n        function Click(refid) {\n            this.refid = refid;\n            Click.__super__.constructor.call(this);\n        }\n        Click.prototype.activate = function (context) {\n            var deferred, element, _this = this;\n            element = context.stage.get('#' + this.refid);\n            if (!element) {\n                throw new Error('cannot find element with id' + this.refid);\n            }\n            deferred = Q.defer();\n            element.on('click', function (ev) {\n                return deferred.resolve(ev);\n            });\n            return deferred.promise;\n        };\n        return Click;\n    }(Response);\n    exports.Click = Click;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/click.js\"],\"names\":[\"Click\",\"Q\",\"Response\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"refid\",\"activate\",\"context\",\"deferred\",\"element\",\"_this\",\"stage\",\"get\",\"Error\",\"defer\",\"on\",\"ev\",\"resolve\",\"promise\",\"exports\"],\"mappings\":\"AACA,CAAC,YAAW;AAAA,IACV,IAAIA,KAAJ,EAAWC,CAAX,EAAcC,QAAd,EACEC,SAAA,GAAY,GAAGC,cADjB,EAEEC,SAAA,GAAY,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAA,YAAE,SAASC,GAAT,IAAgBD,MAAhB,EAAwB;AAAA,gBAAE,IAAIJ,SAAA,CAAUM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ;AAAA,oBAAiCF,KAAA,CAAME,GAAN,IAAaD,MAAA,CAAOC,GAAP,CAAb,CAAnC;AAAA,aAA1B;AAAA,YAAyF,SAASE,IAAT,GAAgB;AAAA,gBAAE,KAAKC,WAAL,GAAmBL,KAAnB,CAAF;AAAA,aAAzG;AAAA,YAAuII,IAAA,CAAKE,SAAL,GAAiBL,MAAA,CAAOK,SAAxB,CAAvI;AAAA,YAA0KN,KAAA,CAAMM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA1K;AAAA,YAAwMJ,KAAA,CAAMO,SAAN,GAAkBN,MAAA,CAAOK,SAAzB,CAAxM;AAAA,YAA4O,OAAON,KAAP,CAA5O;AAAA,SAFtC,CADU;AAAA,IAKVL,CAAA,GAAIa,OAAA,C,IAAA,E,MAAA,CAAJ,CALU;AAAA,IAOVZ,QAAA,GAAWY,OAAA,C,GAAA,E,MAAA,EAAuBZ,QAAlC,CAPU;AAAA,IASVF,KAAA,GAAS,UAASe,MAAT,EAAiB;AAAA,QACxBV,SAAA,CAAUL,KAAV,EAAiBe,MAAjB,EADwB;AAAA,QAGxB,SAASf,KAAT,CAAegB,KAAf,EAAsB;AAAA,YACpB,KAAKA,KAAL,GAAaA,KAAb,CADoB;AAAA,YAEpBhB,KAAA,CAAMa,SAAN,CAAgBF,WAAhB,CAA4BF,IAA5B,CAAiC,IAAjC,EAFoB;AAAA,SAHE;AAAA,QAQxBT,KAAA,CAAMY,SAAN,CAAgBK,QAAhB,GAA2B,UAASC,OAAT,EAAkB;AAAA,YAC3C,IAAIC,QAAJ,EAAcC,OAAd,EACEC,KAAA,GAAQ,IADV,CAD2C;AAAA,YAG3CD,OAAA,GAAUF,OAAA,CAAQI,KAAR,CAAcC,GAAd,CAAkB,MAAM,KAAKP,KAA7B,CAAV,CAH2C;AAAA,YAI3C,IAAI,CAACI,OAAL,EAAc;AAAA,gBACZ,MAAM,IAAII,KAAJ,CAAU,gCAAgC,KAAKR,KAA/C,CAAN,CADY;AAAA,aAJ6B;AAAA,YAO3CG,QAAA,GAAWlB,CAAA,CAAEwB,KAAF,EAAX,CAP2C;AAAA,YAQ3CL,OAAA,CAAQM,EAAR,CAAW,OAAX,EAAoB,UAASC,EAAT,EAAa;AAAA,gBAC/B,OAAOR,QAAA,CAASS,OAAT,CAAiBD,EAAjB,CAAP,CAD+B;AAAA,aAAjC,EAR2C;AAAA,YAW3C,OAAOR,QAAA,CAASU,OAAhB,CAX2C;AAAA,SAA7C,CARwB;AAAA,QAsBxB,OAAO7B,KAAP,CAtBwB;AAAA,KAAlB,CAwBLE,QAxBK,CAAR,CATU;AAAA,IAmCV4B,OAAA,CAAQ9B,KAAR,GAAgBA,KAAhB,CAnCU;AAAA,CAAZ,CAqCGS,IArCH,CAqCQ,IArCR\"}","lineCount":38,"mtime":1391293166000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/q/q.js","canonicalName":"node_modules/q/q.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.6.3\n(function() {\n  var Click, Q, Response,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Q = require(\"q\");\n\n  Response = require(\"../stimresp\").Response;\n\n  Click = (function(_super) {\n    __extends(Click, _super);\n\n    function Click(refid) {\n      this.refid = refid;\n      Click.__super__.constructor.call(this);\n    }\n\n    Click.prototype.activate = function(context) {\n      var deferred, element,\n        _this = this;\n      element = context.stage.get(\"#\" + this.refid);\n      if (!element) {\n        throw new Error(\"cannot find element with id\" + this.refid);\n      }\n      deferred = Q.defer();\n      element.on(\"click\", function(ev) {\n        return deferred.resolve(ev);\n      });\n      return deferred.promise;\n    };\n\n    return Click;\n\n  })(Response);\n\n  exports.Click = Click;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/timeout.js":{"id":32,"canonicalName":"src/components/timeout.js","code":"(function () {\n    var Q, Response, ResponseData, Timeout, utils, _ref, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    utils = require('5', module);\n    Q = require('17', module);\n    Response = require('8', module).Response;\n    ResponseData = require('8', module).ResponseData;\n    Timeout = function (_super) {\n        __extends(Timeout, _super);\n        function Timeout() {\n            _ref = Timeout.__super__.constructor.apply(this, arguments);\n            return _ref;\n        }\n        Timeout.prototype.defaults = { duration: 1000 };\n        Timeout.prototype.activate = function (context) {\n            var deferred, _this = this;\n            deferred = Q.defer();\n            utils.doTimer(this.spec.duration, function (diff) {\n                var resp;\n                resp = {\n                    name: 'Timeout',\n                    id: _this.id,\n                    timeElapsed: diff,\n                    timeRequested: _this.spec.duration\n                };\n                return deferred.resolve(new ResponseData(resp));\n            });\n            return deferred.promise;\n        };\n        return Timeout;\n    }(Response);\n    exports.Timeout = Timeout;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/timeout.js\"],\"names\":[\"Q\",\"Response\",\"ResponseData\",\"Timeout\",\"utils\",\"_ref\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"apply\",\"arguments\",\"defaults\",\"duration\",\"activate\",\"context\",\"deferred\",\"_this\",\"defer\",\"doTimer\",\"spec\",\"diff\",\"resp\",\"name\",\"id\",\"timeElapsed\",\"timeRequested\",\"resolve\",\"promise\",\"exports\"],\"mappings\":\"AACA,CAAC,YAAW;AAAA,IACV,IAAIA,CAAJ,EAAOC,QAAP,EAAiBC,YAAjB,EAA+BC,OAA/B,EAAwCC,KAAxC,EAA+CC,IAA/C,EACEC,SAAA,GAAY,GAAGC,cADjB,EAEEC,SAAA,GAAY,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAA,YAAE,SAASC,GAAT,IAAgBD,MAAhB,EAAwB;AAAA,gBAAE,IAAIJ,SAAA,CAAUM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ;AAAA,oBAAiCF,KAAA,CAAME,GAAN,IAAaD,MAAA,CAAOC,GAAP,CAAb,CAAnC;AAAA,aAA1B;AAAA,YAAyF,SAASE,IAAT,GAAgB;AAAA,gBAAE,KAAKC,WAAL,GAAmBL,KAAnB,CAAF;AAAA,aAAzG;AAAA,YAAuII,IAAA,CAAKE,SAAL,GAAiBL,MAAA,CAAOK,SAAxB,CAAvI;AAAA,YAA0KN,KAAA,CAAMM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA1K;AAAA,YAAwMJ,KAAA,CAAMO,SAAN,GAAkBN,MAAA,CAAOK,SAAzB,CAAxM;AAAA,YAA4O,OAAON,KAAP,CAA5O;AAAA,SAFtC,CADU;AAAA,IAKVL,KAAA,GAAQa,OAAA,C,GAAA,E,MAAA,CAAR,CALU;AAAA,IAOVjB,CAAA,GAAIiB,OAAA,C,IAAA,E,MAAA,CAAJ,CAPU;AAAA,IASVhB,QAAA,GAAWgB,OAAA,C,GAAA,E,MAAA,EAAuBhB,QAAlC,CATU;AAAA,IAWVC,YAAA,GAAee,OAAA,C,GAAA,E,MAAA,EAAuBf,YAAtC,CAXU;AAAA,IAaVC,OAAA,GAAW,UAASe,MAAT,EAAiB;AAAA,QAC1BV,SAAA,CAAUL,OAAV,EAAmBe,MAAnB,EAD0B;AAAA,QAG1B,SAASf,OAAT,GAAmB;AAAA,YACjBE,IAAA,GAAOF,OAAA,CAAQa,SAAR,CAAkBF,WAAlB,CAA8BK,KAA9B,CAAoC,IAApC,EAA0CC,SAA1C,CAAP,CADiB;AAAA,YAEjB,OAAOf,IAAP,CAFiB;AAAA,SAHO;AAAA,QAQ1BF,OAAA,CAAQY,SAAR,CAAkBM,QAAlB,GAA6B,EAC3BC,QAAA,EAAU,IADiB,EAA7B,CAR0B;AAAA,QAY1BnB,OAAA,CAAQY,SAAR,CAAkBQ,QAAlB,GAA6B,UAASC,OAAT,EAAkB;AAAA,YAC7C,IAAIC,QAAJ,EACEC,KAAA,GAAQ,IADV,CAD6C;AAAA,YAG7CD,QAAA,GAAWzB,CAAA,CAAE2B,KAAF,EAAX,CAH6C;AAAA,YAI7CvB,KAAA,CAAMwB,OAAN,CAAc,KAAKC,IAAL,CAAUP,QAAxB,EAAkC,UAASQ,IAAT,EAAe;AAAA,gBAC/C,IAAIC,IAAJ,CAD+C;AAAA,gBAE/CA,IAAA,GAAO;AAAA,oBACLC,IAAA,EAAM,SADD;AAAA,oBAELC,EAAA,EAAIP,KAAA,CAAMO,EAFL;AAAA,oBAGLC,WAAA,EAAaJ,IAHR;AAAA,oBAILK,aAAA,EAAeT,KAAA,CAAMG,IAAN,CAAWP,QAJrB;AAAA,iBAAP,CAF+C;AAAA,gBAQ/C,OAAOG,QAAA,CAASW,OAAT,CAAiB,IAAIlC,YAAJ,CAAiB6B,IAAjB,CAAjB,CAAP,CAR+C;AAAA,aAAjD,EAJ6C;AAAA,YAc7C,OAAON,QAAA,CAASY,OAAhB,CAd6C;AAAA,SAA/C,CAZ0B;AAAA,QA6B1B,OAAOlC,OAAP,CA7B0B;AAAA,KAAlB,CA+BPF,QA/BO,CAAV,CAbU;AAAA,IA8CVqC,OAAA,CAAQnC,OAAR,GAAkBA,OAAlB,CA9CU;AAAA,CAAZ,CAgDGS,IAhDH,CAgDQ,IAhDR\"}","lineCount":44,"mtime":1391997097000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/src/utils.js","canonicalName":"src/utils.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/q/q.js","canonicalName":"node_modules/q/q.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.6.3\n(function() {\n  var Q, Response, ResponseData, Timeout, utils, _ref,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  utils = require(\"../utils\");\n\n  Q = require(\"q\");\n\n  Response = require(\"../stimresp\").Response;\n\n  ResponseData = require(\"../stimresp\").ResponseData;\n\n  Timeout = (function(_super) {\n    __extends(Timeout, _super);\n\n    function Timeout() {\n      _ref = Timeout.__super__.constructor.apply(this, arguments);\n      return _ref;\n    }\n\n    Timeout.prototype.defaults = {\n      duration: 1000\n    };\n\n    Timeout.prototype.activate = function(context) {\n      var deferred,\n        _this = this;\n      deferred = Q.defer();\n      utils.doTimer(this.spec.duration, function(diff) {\n        var resp;\n        resp = {\n          name: \"Timeout\",\n          id: _this.id,\n          timeElapsed: diff,\n          timeRequested: _this.spec.duration\n        };\n        return deferred.resolve(new ResponseData(resp));\n      });\n      return deferred.promise;\n    };\n\n    return Timeout;\n\n  })(Response);\n\n  exports.Timeout = Timeout;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/sequence.js":{"id":31,"canonicalName":"src/components/sequence.js","code":"(function () {\n    var Presentable, Q, Sequence, Stimulus, Timeout, utils, _, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Stimulus = require('8', module).Stimulus;\n    Timeout = require('32', module).Timeout;\n    Presentable = require('8', module).Presentable;\n    Q = require('17', module);\n    utils = require('5', module);\n    _ = require('16', module);\n    Sequence = function (_super) {\n        __extends(Sequence, _super);\n        function Sequence(stims, soa, clear, times) {\n            var i;\n            this.stims = stims;\n            this.soa = soa;\n            this.clear = clear != null ? clear : true;\n            this.times = times != null ? times : 1;\n            Sequence.__super__.constructor.call(this, {});\n            if (this.soa.length !== this.stims.length) {\n                this.soa = utils.repLen(this.soa, this.stims.length);\n            }\n            this.onsets = function () {\n                var _i, _ref, _results;\n                _results = [];\n                for (i = _i = 0, _ref = this.soa.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                    _results.push(_.reduce(this.soa.slice(0, +i + 1 || 9000000000), function (x, acc) {\n                        return x + acc;\n                    }));\n                }\n                return _results;\n            }.call(this);\n        }\n        Sequence.prototype.genseq = function (context) {\n            var deferred, _i, _ref, _results;\n            deferred = Q.defer();\n            _.forEach(function () {\n                _results = [];\n                for (var _i = 0, _ref = this.stims.length; 0 <= _ref ? _i < _ref : _i > _ref; 0 <= _ref ? _i++ : _i--) {\n                    _results.push(_i);\n                }\n                return _results;\n            }.apply(this), function (_this) {\n                return function (i) {\n                    var ev, stim;\n                    ev = new Timeout({ duration: _this.onsets[i] });\n                    stim = _this.stims[i];\n                    return ev.activate(context).then(function () {\n                        var p;\n                        if (!_this.stopped) {\n                            if (_this.clear) {\n                                context.clearContent();\n                            }\n                            p = stim.render(context);\n                            p.present(context);\n                            context.draw();\n                            if (i === _this.stims.length - 1) {\n                                return deferred.resolve(1);\n                            }\n                        }\n                    });\n                };\n            }(this));\n            return deferred.promise;\n        };\n        Sequence.prototype.render = function (context) {\n            return {\n                present: function (_this) {\n                    return function (context) {\n                        var i, result, _i, _ref;\n                        result = Q.resolve(0);\n                        for (i = _i = 0, _ref = _this.times; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                            console.log('i ', i);\n                            result = result.then(function () {\n                                return _this.genseq(context);\n                            });\n                        }\n                        return result.then(function () {\n                            return context.clearContent();\n                        });\n                    };\n                }(this)\n            };\n        };\n        return Sequence;\n    }(Stimulus);\n    exports.Sequence = Sequence;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/sequence.js\"],\"names\":[\"Presentable\",\"Q\",\"Sequence\",\"Stimulus\",\"Timeout\",\"utils\",\"_\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"stims\",\"soa\",\"clear\",\"times\",\"i\",\"length\",\"repLen\",\"onsets\",\"_i\",\"_ref\",\"_results\",\"push\",\"reduce\",\"slice\",\"x\",\"acc\",\"genseq\",\"context\",\"deferred\",\"defer\",\"forEach\",\"apply\",\"_this\",\"ev\",\"stim\",\"duration\",\"activate\",\"then\",\"p\",\"stopped\",\"clearContent\",\"render\",\"present\",\"draw\",\"resolve\",\"promise\",\"result\",\"console\",\"log\",\"exports\"],\"mappings\":\"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\"}","lineCount":98,"mtime":1393112367000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/timeout.js","canonicalName":"src/components/timeout.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/q/q.js","canonicalName":"node_modules/q/q.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/utils.js","canonicalName":"src/utils.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.7.1\n(function() {\n  var Presentable, Q, Sequence, Stimulus, Timeout, utils, _,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Stimulus = require(\"../stimresp\").Stimulus;\n\n  Timeout = require(\"./timeout\").Timeout;\n\n  Presentable = require(\"../stimresp\").Presentable;\n\n  Q = require(\"q\");\n\n  utils = require(\"../utils\");\n\n  _ = require(\"lodash\");\n\n  Sequence = (function(_super) {\n    __extends(Sequence, _super);\n\n    function Sequence(stims, soa, clear, times) {\n      var i;\n      this.stims = stims;\n      this.soa = soa;\n      this.clear = clear != null ? clear : true;\n      this.times = times != null ? times : 1;\n      Sequence.__super__.constructor.call(this, {});\n      if (this.soa.length !== this.stims.length) {\n        this.soa = utils.repLen(this.soa, this.stims.length);\n      }\n      this.onsets = (function() {\n        var _i, _ref, _results;\n        _results = [];\n        for (i = _i = 0, _ref = this.soa.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n          _results.push(_.reduce(this.soa.slice(0, +i + 1 || 9e9), function(x, acc) {\n            return x + acc;\n          }));\n        }\n        return _results;\n      }).call(this);\n    }\n\n    Sequence.prototype.genseq = function(context) {\n      var deferred, _i, _ref, _results;\n      deferred = Q.defer();\n      _.forEach((function() {\n        _results = [];\n        for (var _i = 0, _ref = this.stims.length; 0 <= _ref ? _i < _ref : _i > _ref; 0 <= _ref ? _i++ : _i--){ _results.push(_i); }\n        return _results;\n      }).apply(this), (function(_this) {\n        return function(i) {\n          var ev, stim;\n          ev = new Timeout({\n            duration: _this.onsets[i]\n          });\n          stim = _this.stims[i];\n          return ev.activate(context).then(function() {\n            var p;\n            if (!_this.stopped) {\n              if (_this.clear) {\n                context.clearContent();\n              }\n              p = stim.render(context);\n              p.present(context);\n              context.draw();\n              if (i === _this.stims.length - 1) {\n                return deferred.resolve(1);\n              }\n            }\n          });\n        };\n      })(this));\n      return deferred.promise;\n    };\n\n    Sequence.prototype.render = function(context) {\n      return {\n        present: (function(_this) {\n          return function(context) {\n            var i, result, _i, _ref;\n            result = Q.resolve(0);\n            for (i = _i = 0, _ref = _this.times; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n              console.log(\"i \", i);\n              result = result.then(function() {\n                return _this.genseq(context);\n              });\n            }\n            return result.then(function() {\n              return context.clearContent();\n            });\n          };\n        })(this)\n      };\n    };\n\n    return Sequence;\n\n  })(Stimulus);\n\n  exports.Sequence = Sequence;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/prompt.js":{"id":30,"canonicalName":"src/components/prompt.js","code":"(function () {\n    var Prompt, Q, Response, utils, _ref, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    utils = require('5', module);\n    Q = require('17', module);\n    Response = require('8', module).Response;\n    Prompt = function (_super) {\n        __extends(Prompt, _super);\n        function Prompt() {\n            _ref = Prompt.__super__.constructor.apply(this, arguments);\n            return _ref;\n        }\n        Prompt.prototype.defaults = {\n            title: 'Prompt',\n            delay: 0,\n            defaultValue: '',\n            theme: 'vex-theme-wireframe'\n        };\n        Prompt.prototype.activate = function (context) {\n            var deferred, promise, _this = this;\n            deferred = Q.defer();\n            promise = Q.delay(this.spec.delay);\n            promise.then(function (f) {\n                return vex.dialog.prompt({\n                    message: _this.spec.title,\n                    placeholder: _this.spec.defaultValue,\n                    className: 'vex-theme-wireframe',\n                    callback: function (value) {\n                        return deferred.resolve(value);\n                    }\n                });\n            });\n            return deferred.promise;\n        };\n        return Prompt;\n    }(Response);\n    exports.Prompt = Prompt;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/prompt.js\"],\"names\":[\"Prompt\",\"Q\",\"Response\",\"utils\",\"_ref\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"apply\",\"arguments\",\"defaults\",\"title\",\"delay\",\"defaultValue\",\"theme\",\"activate\",\"context\",\"deferred\",\"promise\",\"_this\",\"defer\",\"spec\",\"then\",\"f\",\"vex\",\"dialog\",\"prompt\",\"message\",\"placeholder\",\"className\",\"callback\",\"value\",\"resolve\",\"exports\"],\"mappings\":\"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\"}","lineCount":49,"mtime":1391946936000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/src/utils.js","canonicalName":"src/utils.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/q/q.js","canonicalName":"node_modules/q/q.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.6.3\n(function() {\n  var Prompt, Q, Response, utils, _ref,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  utils = require(\"../utils\");\n\n  Q = require(\"q\");\n\n  Response = require(\"../stimresp\").Response;\n\n  Prompt = (function(_super) {\n    __extends(Prompt, _super);\n\n    function Prompt() {\n      _ref = Prompt.__super__.constructor.apply(this, arguments);\n      return _ref;\n    }\n\n    Prompt.prototype.defaults = {\n      title: \"Prompt\",\n      delay: 0,\n      defaultValue: \"\",\n      theme: 'vex-theme-wireframe'\n    };\n\n    Prompt.prototype.activate = function(context) {\n      var deferred, promise,\n        _this = this;\n      deferred = Q.defer();\n      promise = Q.delay(this.spec.delay);\n      promise.then(function(f) {\n        return vex.dialog.prompt({\n          message: _this.spec.title,\n          placeholder: _this.spec.defaultValue,\n          className: 'vex-theme-wireframe',\n          callback: function(value) {\n            return deferred.resolve(value);\n          }\n        });\n      });\n      return deferred.promise;\n    };\n\n    return Prompt;\n\n  })(Response);\n\n  exports.Prompt = Prompt;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/mousepress.js":{"id":29,"canonicalName":"src/components/mousepress.js","code":"(function () {\n    var MousePress, Q, Response, ResponseData, utils, _ref, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Q = require('17', module);\n    Response = require('8', module).Response;\n    ResponseData = require('8', module).ResponseData;\n    utils = require('5', module);\n    MousePress = function (_super) {\n        __extends(MousePress, _super);\n        function MousePress() {\n            _ref = MousePress.__super__.constructor.apply(this, arguments);\n            return _ref;\n        }\n        MousePress.prototype.activate = function (context) {\n            var deferred, mouse, myname, _this = this;\n            this.startTime = utils.getTimestamp();\n            myname = this.name;\n            deferred = Q.defer();\n            mouse = context.mousepressStream();\n            mouse.stream.take(1).onValue(function (event) {\n                var resp, timestamp;\n                timestamp = utils.getTimestamp();\n                mouse.stop();\n                resp = {\n                    name: myname,\n                    id: _this.id,\n                    KeyTime: timestamp,\n                    RT: timestamp - _this.startTime,\n                    Accuracy: Acc\n                };\n                return deferred.resolve(new ResponseData(resp));\n            });\n            return deferred.promise;\n        };\n        return MousePress;\n    }(Response);\n    exports.MousePress = MousePress;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/mousepress.js\"],\"names\":[\"MousePress\",\"Q\",\"Response\",\"ResponseData\",\"utils\",\"_ref\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"apply\",\"arguments\",\"activate\",\"context\",\"deferred\",\"mouse\",\"myname\",\"_this\",\"startTime\",\"getTimestamp\",\"name\",\"defer\",\"mousepressStream\",\"stream\",\"take\",\"onValue\",\"event\",\"resp\",\"timestamp\",\"stop\",\"id\",\"KeyTime\",\"RT\",\"Accuracy\",\"Acc\",\"resolve\",\"promise\",\"exports\"],\"mappings\":\"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\"}","lineCount":49,"mtime":1390100825000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/q/q.js","canonicalName":"node_modules/q/q.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/utils.js","canonicalName":"src/utils.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.6.3\n(function() {\n  var MousePress, Q, Response, ResponseData, utils, _ref,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Q = require(\"q\");\n\n  Response = require(\"../stimresp\").Response;\n\n  ResponseData = require(\"../stimresp\").ResponseData;\n\n  utils = require(\"../utils\");\n\n  MousePress = (function(_super) {\n    __extends(MousePress, _super);\n\n    function MousePress() {\n      _ref = MousePress.__super__.constructor.apply(this, arguments);\n      return _ref;\n    }\n\n    MousePress.prototype.activate = function(context) {\n      var deferred, mouse, myname,\n        _this = this;\n      this.startTime = utils.getTimestamp();\n      myname = this.name;\n      deferred = Q.defer();\n      mouse = context.mousepressStream();\n      mouse.stream.take(1).onValue(function(event) {\n        var resp, timestamp;\n        timestamp = utils.getTimestamp();\n        mouse.stop();\n        resp = {\n          name: myname,\n          id: _this.id,\n          KeyTime: timestamp,\n          RT: timestamp - _this.startTime,\n          Accuracy: Acc\n        };\n        return deferred.resolve(new ResponseData(resp));\n      });\n      return deferred.promise;\n    };\n\n    return MousePress;\n\n  })(Response);\n\n  exports.MousePress = MousePress;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/keypress.js":{"id":28,"canonicalName":"src/components/keypress.js","code":"(function () {\n    var AnyKey, KeyPress, KeyResponse, Q, Response, ResponseData, SpaceKey, i, keyTable, utils, _, _i, _j, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Q = require('17', module);\n    Response = require('8', module).Response;\n    ResponseData = require('8', module).ResponseData;\n    utils = require('5', module);\n    _ = require('16', module);\n    keyTable = {\n        8: 'backspace',\n        9: 'tab',\n        13: 'enter',\n        16: 'shift',\n        17: 'ctrl',\n        18: 'alt',\n        20: 'capslock',\n        27: 'esc',\n        32: 'space',\n        33: 'pageup',\n        34: 'pagedown',\n        35: 'end',\n        36: 'home',\n        37: 'left',\n        38: 'up',\n        39: 'right',\n        40: 'down',\n        45: 'ins',\n        46: 'del',\n        91: 'meta',\n        93: 'meta',\n        224: 'meta',\n        106: '*',\n        107: '+',\n        109: '-',\n        110: '.',\n        111: '/',\n        186: ';',\n        187: '=',\n        188: ',',\n        189: '-',\n        190: '.',\n        191: '/',\n        192: '`',\n        219: '[',\n        220: '\\\\',\n        221: ']'\n    };\n    for (i = _i = 1; _i < 20; i = ++_i) {\n        keyTable[111 + i] = 'f' + i;\n    }\n    for (i = _j = 1; _j <= 9; i = ++_j) {\n        keyTable[i + 96];\n    }\n    KeyResponse = function (_super) {\n        __extends(KeyResponse, _super);\n        function KeyResponse() {\n            return KeyResponse.__super__.constructor.apply(this, arguments);\n        }\n        KeyResponse.prototype.defaults = {\n            keys: [\n                '1',\n                '2'\n            ],\n            correct: ['1'],\n            timeout: null\n        };\n        KeyResponse.prototype.createResponseData = function (timeStamp, startTime, Acc, char) {\n            var resp;\n            resp = {\n                name: this.name,\n                id: this.id,\n                KeyTime: timeStamp,\n                RT: timeStamp - startTime,\n                Accuracy: Acc,\n                KeyChar: char\n            };\n            return resp;\n        };\n        KeyResponse.prototype.resolveOnTimeout = function (deferred, timeout) {\n            return utils.doTimer(timeout, function (_this) {\n                return function (diff) {\n                    var Acc, resp, timeStamp;\n                    if (!deferred.isResolved) {\n                        timeStamp = utils.getTimestamp();\n                        Acc = false;\n                        resp = _this.createResponseData(timeStamp, _this.startTime, Acc, '');\n                        return deferred.resolve(new ResponseData(resp));\n                    }\n                };\n            }(this));\n        };\n        return KeyResponse;\n    }(Response);\n    KeyPress = function (_super) {\n        __extends(KeyPress, _super);\n        function KeyPress() {\n            return KeyPress.__super__.constructor.apply(this, arguments);\n        }\n        KeyPress.prototype.activate = function (context) {\n            var deferred, keyStream;\n            this.startTime = utils.getTimestamp();\n            deferred = Q.defer();\n            keyStream = context.keypressStream();\n            if (this.spec.timeout != null) {\n                this.resolveOnTimeout(deferred, this.spec.timeout);\n            }\n            keyStream.filter(function (_this) {\n                return function (event) {\n                    var char;\n                    char = String.fromCharCode(event.keyCode);\n                    return _.contains(_this.spec.keys, char);\n                };\n            }(this)).take(1).onValue(function (_this) {\n                return function (filtered) {\n                    var Acc, resp, timeStamp;\n                    timeStamp = utils.getTimestamp();\n                    Acc = _.contains(_this.spec.correct, String.fromCharCode(filtered.keyCode));\n                    resp = _this.createResponseData(timeStamp, _this.startTime, Acc, String.fromCharCode(filtered.keyCode));\n                    return deferred.resolve(new ResponseData(resp));\n                };\n            }(this));\n            return deferred.promise;\n        };\n        return KeyPress;\n    }(KeyResponse);\n    exports.KeyPress = KeyPress;\n    SpaceKey = function (_super) {\n        __extends(SpaceKey, _super);\n        function SpaceKey() {\n            return SpaceKey.__super__.constructor.apply(this, arguments);\n        }\n        SpaceKey.prototype.activate = function (context) {\n            var deferred, keyStream;\n            this.startTime = utils.getTimestamp();\n            deferred = Q.defer();\n            keyStream = context.keypressStream();\n            keyStream.filter(function (_this) {\n                return function (event) {\n                    return event.keyCode === 32;\n                };\n            }(this)).take(1).onValue(function (_this) {\n                return function (event) {\n                    var resp, timeStamp;\n                    timeStamp = utils.getTimestamp();\n                    resp = {\n                        name: 'SpaceKey',\n                        id: _this.id,\n                        KeyTime: timeStamp,\n                        RT: timeStamp - _this.startTime,\n                        KeyChar: 'space'\n                    };\n                    return deferred.resolve(new ResponseData(resp));\n                };\n            }(this));\n            return deferred.promise;\n        };\n        return SpaceKey;\n    }(Response);\n    AnyKey = function (_super) {\n        __extends(AnyKey, _super);\n        function AnyKey() {\n            return AnyKey.__super__.constructor.apply(this, arguments);\n        }\n        AnyKey.prototype.activate = function (context) {\n            var deferred, keyStream;\n            this.startTime = utils.getTimestamp();\n            deferred = Q.defer();\n            keyStream = context.keypressStream();\n            keyStream.take(1).onValue(function (_this) {\n                return function (event) {\n                    var resp, timeStamp;\n                    timeStamp = utils.getTimestamp();\n                    resp = {\n                        name: 'AnyKey',\n                        id: _this.id,\n                        KeyTime: timeStamp,\n                        RT: timeStamp - _this.startTime,\n                        KeyChar: String.fromCharCode(event.keyCode)\n                    };\n                    return deferred.resolve(new ResponseData(resp));\n                };\n            }(this));\n            return deferred.promise;\n        };\n        return AnyKey;\n    }(Response);\n    exports.SpaceKey = SpaceKey;\n    exports.AnyKey = AnyKey;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/keypress.js\"],\"names\":[\"AnyKey\",\"KeyPress\",\"KeyResponse\",\"Q\",\"Response\",\"ResponseData\",\"SpaceKey\",\"i\",\"keyTable\",\"utils\",\"_\",\"_i\",\"_j\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"apply\",\"arguments\",\"defaults\",\"keys\",\"correct\",\"timeout\",\"createResponseData\",\"timeStamp\",\"startTime\",\"Acc\",\"char\",\"resp\",\"name\",\"id\",\"KeyTime\",\"RT\",\"Accuracy\",\"KeyChar\",\"resolveOnTimeout\",\"deferred\",\"doTimer\",\"_this\",\"diff\",\"isResolved\",\"getTimestamp\",\"resolve\",\"activate\",\"context\",\"keyStream\",\"defer\",\"keypressStream\",\"spec\",\"filter\",\"event\",\"String\",\"fromCharCode\",\"keyCode\",\"contains\",\"take\",\"onValue\",\"filtered\",\"promise\",\"exports\"],\"mappings\":\"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\"}","lineCount":200,"mtime":1392730448000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/q/q.js","canonicalName":"node_modules/q/q.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/utils.js","canonicalName":"src/utils.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.7.1\n(function() {\n  var AnyKey, KeyPress, KeyResponse, Q, Response, ResponseData, SpaceKey, i, keyTable, utils, _, _i, _j,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Q = require(\"q\");\n\n  Response = require(\"../stimresp\").Response;\n\n  ResponseData = require(\"../stimresp\").ResponseData;\n\n  utils = require(\"../utils\");\n\n  _ = require('lodash');\n\n  keyTable = {\n    8: 'backspace',\n    9: 'tab',\n    13: 'enter',\n    16: 'shift',\n    17: 'ctrl',\n    18: 'alt',\n    20: 'capslock',\n    27: 'esc',\n    32: 'space',\n    33: 'pageup',\n    34: 'pagedown',\n    35: 'end',\n    36: 'home',\n    37: 'left',\n    38: 'up',\n    39: 'right',\n    40: 'down',\n    45: 'ins',\n    46: 'del',\n    91: 'meta',\n    93: 'meta',\n    224: 'meta',\n    106: '*',\n    107: '+',\n    109: '-',\n    110: '.',\n    111: '/',\n    186: ';',\n    187: '=',\n    188: ',',\n    189: '-',\n    190: '.',\n    191: '/',\n    192: '`',\n    219: '[',\n    220: \"\\\\\",\n    221: ']'\n  };\n\n  for (i = _i = 1; _i < 20; i = ++_i) {\n    keyTable[111 + i] = 'f' + i;\n  }\n\n  for (i = _j = 1; _j <= 9; i = ++_j) {\n    keyTable[i + 96];\n  }\n\n  KeyResponse = (function(_super) {\n    __extends(KeyResponse, _super);\n\n    function KeyResponse() {\n      return KeyResponse.__super__.constructor.apply(this, arguments);\n    }\n\n    KeyResponse.prototype.defaults = {\n      keys: ['1', '2'],\n      correct: ['1'],\n      timeout: null\n    };\n\n    KeyResponse.prototype.createResponseData = function(timeStamp, startTime, Acc, char) {\n      var resp;\n      resp = {\n        name: this.name,\n        id: this.id,\n        KeyTime: timeStamp,\n        RT: timeStamp - startTime,\n        Accuracy: Acc,\n        KeyChar: char\n      };\n      return resp;\n    };\n\n    KeyResponse.prototype.resolveOnTimeout = function(deferred, timeout) {\n      return utils.doTimer(timeout, (function(_this) {\n        return function(diff) {\n          var Acc, resp, timeStamp;\n          if (!deferred.isResolved) {\n            timeStamp = utils.getTimestamp();\n            Acc = false;\n            resp = _this.createResponseData(timeStamp, _this.startTime, Acc, '');\n            return deferred.resolve(new ResponseData(resp));\n          }\n        };\n      })(this));\n    };\n\n    return KeyResponse;\n\n  })(Response);\n\n  KeyPress = (function(_super) {\n    __extends(KeyPress, _super);\n\n    function KeyPress() {\n      return KeyPress.__super__.constructor.apply(this, arguments);\n    }\n\n    KeyPress.prototype.activate = function(context) {\n      var deferred, keyStream;\n      this.startTime = utils.getTimestamp();\n      deferred = Q.defer();\n      keyStream = context.keypressStream();\n      if (this.spec.timeout != null) {\n        this.resolveOnTimeout(deferred, this.spec.timeout);\n      }\n      keyStream.filter((function(_this) {\n        return function(event) {\n          var char;\n          char = String.fromCharCode(event.keyCode);\n          return _.contains(_this.spec.keys, char);\n        };\n      })(this)).take(1).onValue((function(_this) {\n        return function(filtered) {\n          var Acc, resp, timeStamp;\n          timeStamp = utils.getTimestamp();\n          Acc = _.contains(_this.spec.correct, String.fromCharCode(filtered.keyCode));\n          resp = _this.createResponseData(timeStamp, _this.startTime, Acc, String.fromCharCode(filtered.keyCode));\n          return deferred.resolve(new ResponseData(resp));\n        };\n      })(this));\n      return deferred.promise;\n    };\n\n    return KeyPress;\n\n  })(KeyResponse);\n\n  exports.KeyPress = KeyPress;\n\n  SpaceKey = (function(_super) {\n    __extends(SpaceKey, _super);\n\n    function SpaceKey() {\n      return SpaceKey.__super__.constructor.apply(this, arguments);\n    }\n\n    SpaceKey.prototype.activate = function(context) {\n      var deferred, keyStream;\n      this.startTime = utils.getTimestamp();\n      deferred = Q.defer();\n      keyStream = context.keypressStream();\n      keyStream.filter((function(_this) {\n        return function(event) {\n          return event.keyCode === 32;\n        };\n      })(this)).take(1).onValue((function(_this) {\n        return function(event) {\n          var resp, timeStamp;\n          timeStamp = utils.getTimestamp();\n          resp = {\n            name: \"SpaceKey\",\n            id: _this.id,\n            KeyTime: timeStamp,\n            RT: timeStamp - _this.startTime,\n            KeyChar: \"space\"\n          };\n          return deferred.resolve(new ResponseData(resp));\n        };\n      })(this));\n      return deferred.promise;\n    };\n\n    return SpaceKey;\n\n  })(Response);\n\n  AnyKey = (function(_super) {\n    __extends(AnyKey, _super);\n\n    function AnyKey() {\n      return AnyKey.__super__.constructor.apply(this, arguments);\n    }\n\n    AnyKey.prototype.activate = function(context) {\n      var deferred, keyStream;\n      this.startTime = utils.getTimestamp();\n      deferred = Q.defer();\n      keyStream = context.keypressStream();\n      keyStream.take(1).onValue((function(_this) {\n        return function(event) {\n          var resp, timeStamp;\n          timeStamp = utils.getTimestamp();\n          resp = {\n            name: \"AnyKey\",\n            id: _this.id,\n            KeyTime: timeStamp,\n            RT: timeStamp - _this.startTime,\n            KeyChar: String.fromCharCode(event.keyCode)\n          };\n          return deferred.resolve(new ResponseData(resp));\n        };\n      })(this));\n      return deferred.promise;\n    };\n\n    return AnyKey;\n\n  })(Response);\n\n  exports.SpaceKey = SpaceKey;\n\n  exports.AnyKey = AnyKey;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/group.js":{"id":27,"canonicalName":"src/components/group.js","code":"(function () {\n    var ContainerDrawable, Grid, Group, Stimulus, layout, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Stimulus = require('8', module).Stimulus;\n    ContainerDrawable = require('8', module).ContainerDrawable;\n    layout = require('9', module);\n    Group = function (_super) {\n        __extends(Group, _super);\n        function Group(stims, layout) {\n            var stim, _i, _len, _ref;\n            this.stims = stims;\n            Group.__super__.constructor.call(this, {});\n            if (layout) {\n                this.layout = layout;\n                _ref = this.stims;\n                for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n                    stim = _ref[_i];\n                    stim.layout = layout;\n                }\n            }\n        }\n        Group.prototype.render = function (context) {\n            var nodes, stim;\n            nodes = function () {\n                var _i, _len, _ref, _results;\n                _ref = this.stims;\n                _results = [];\n                for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n                    stim = _ref[_i];\n                    _results.push(stim.render(context));\n                }\n                return _results;\n            }.call(this);\n            return new ContainerDrawable(nodes);\n        };\n        return Group;\n    }(Stimulus);\n    exports.Group = Group;\n    Grid = function (_super) {\n        __extends(Grid, _super);\n        function Grid(stims, rows, columns, bounds) {\n            var stim, _i, _len, _ref;\n            this.stims = stims;\n            this.rows = rows;\n            this.columns = columns;\n            this.bounds = bounds;\n            this.layout = new layout.GridLayout(this.rows, this.columns, this.bounds);\n            _ref = this.stims;\n            for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n                stim = _ref[_i];\n                stim.layout = this.layout;\n            }\n        }\n        return Grid;\n    }(Group);\n    exports.Grid = Grid;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/group.js\"],\"names\":[\"ContainerDrawable\",\"Grid\",\"Group\",\"Stimulus\",\"layout\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"stims\",\"stim\",\"_i\",\"_len\",\"_ref\",\"length\",\"render\",\"context\",\"nodes\",\"_results\",\"push\",\"exports\",\"rows\",\"columns\",\"bounds\",\"GridLayout\"],\"mappings\":\"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\"}","lineCount":68,"mtime":1393078312000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/layout.js","canonicalName":"src/layout.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.7.1\n(function() {\n  var ContainerDrawable, Grid, Group, Stimulus, layout,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Stimulus = require(\"../stimresp\").Stimulus;\n\n  ContainerDrawable = require(\"../stimresp\").ContainerDrawable;\n\n  layout = require(\"../layout\");\n\n  Group = (function(_super) {\n    __extends(Group, _super);\n\n    function Group(stims, layout) {\n      var stim, _i, _len, _ref;\n      this.stims = stims;\n      Group.__super__.constructor.call(this, {});\n      if (layout) {\n        this.layout = layout;\n        _ref = this.stims;\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          stim = _ref[_i];\n          stim.layout = layout;\n        }\n      }\n    }\n\n    Group.prototype.render = function(context) {\n      var nodes, stim;\n      nodes = (function() {\n        var _i, _len, _ref, _results;\n        _ref = this.stims;\n        _results = [];\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          stim = _ref[_i];\n          _results.push(stim.render(context));\n        }\n        return _results;\n      }).call(this);\n      return new ContainerDrawable(nodes);\n    };\n\n    return Group;\n\n  })(Stimulus);\n\n  exports.Group = Group;\n\n  Grid = (function(_super) {\n    __extends(Grid, _super);\n\n    function Grid(stims, rows, columns, bounds) {\n      var stim, _i, _len, _ref;\n      this.stims = stims;\n      this.rows = rows;\n      this.columns = columns;\n      this.bounds = bounds;\n      this.layout = new layout.GridLayout(this.rows, this.columns, this.bounds);\n      _ref = this.stims;\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        stim = _ref[_i];\n        stim.layout = this.layout;\n      }\n    }\n\n    return Grid;\n\n  })(Group);\n\n  exports.Grid = Grid;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/first.js":{"id":26,"canonicalName":"src/components/first.js","code":"(function () {\n    var First, Q, Response, _, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    _ = require('16', module);\n    Q = require('17', module);\n    Response = require('8', module).Response;\n    First = function (_super) {\n        __extends(First, _super);\n        function First(responses) {\n            this.responses = responses;\n            First.__super__.constructor.call(this, {});\n        }\n        First.prototype.activate = function (context) {\n            var deferred, _done, _this = this;\n            console.log('activating first');\n            _done = false;\n            deferred = Q.defer();\n            _.forEach(this.responses, function (resp) {\n                return resp.activate(context).then(function (obj) {\n                    if (!_done) {\n                        console.log('resolving response', obj);\n                        deferred.resolve(obj);\n                        return _done = true;\n                    } else {\n                        return console.log('not resolving, already done');\n                    }\n                });\n            });\n            return deferred.promise;\n        };\n        return First;\n    }(Response);\n    exports.First = First;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/first.js\"],\"names\":[\"First\",\"Q\",\"Response\",\"_\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"responses\",\"activate\",\"context\",\"deferred\",\"_done\",\"_this\",\"console\",\"log\",\"defer\",\"forEach\",\"resp\",\"then\",\"obj\",\"resolve\",\"promise\",\"exports\"],\"mappings\":\"AACA,CAAC,YAAW;AAAA,IACV,IAAIA,KAAJ,EAAWC,CAAX,EAAcC,QAAd,EAAwBC,CAAxB,EACEC,SAAA,GAAY,GAAGC,cADjB,EAEEC,SAAA,GAAY,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAA,YAAE,SAASC,GAAT,IAAgBD,MAAhB,EAAwB;AAAA,gBAAE,IAAIJ,SAAA,CAAUM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ;AAAA,oBAAiCF,KAAA,CAAME,GAAN,IAAaD,MAAA,CAAOC,GAAP,CAAb,CAAnC;AAAA,aAA1B;AAAA,YAAyF,SAASE,IAAT,GAAgB;AAAA,gBAAE,KAAKC,WAAL,GAAmBL,KAAnB,CAAF;AAAA,aAAzG;AAAA,YAAuII,IAAA,CAAKE,SAAL,GAAiBL,MAAA,CAAOK,SAAxB,CAAvI;AAAA,YAA0KN,KAAA,CAAMM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA1K;AAAA,YAAwMJ,KAAA,CAAMO,SAAN,GAAkBN,MAAA,CAAOK,SAAzB,CAAxM;AAAA,YAA4O,OAAON,KAAP,CAA5O;AAAA,SAFtC,CADU;AAAA,IAKVJ,CAAA,GAAIY,OAAA,C,IAAA,E,MAAA,CAAJ,CALU;AAAA,IAOVd,CAAA,GAAIc,OAAA,C,IAAA,E,MAAA,CAAJ,CAPU;AAAA,IASVb,QAAA,GAAWa,OAAA,C,GAAA,E,MAAA,EAAuBb,QAAlC,CATU;AAAA,IAWVF,KAAA,GAAS,UAASgB,MAAT,EAAiB;AAAA,QACxBV,SAAA,CAAUN,KAAV,EAAiBgB,MAAjB,EADwB;AAAA,QAGxB,SAAShB,KAAT,CAAeiB,SAAf,EAA0B;AAAA,YACxB,KAAKA,SAAL,GAAiBA,SAAjB,CADwB;AAAA,YAExBjB,KAAA,CAAMc,SAAN,CAAgBF,WAAhB,CAA4BF,IAA5B,CAAiC,IAAjC,EAAuC,EAAvC,EAFwB;AAAA,SAHF;AAAA,QAQxBV,KAAA,CAAMa,SAAN,CAAgBK,QAAhB,GAA2B,UAASC,OAAT,EAAkB;AAAA,YAC3C,IAAIC,QAAJ,EAAcC,KAAd,EACEC,KAAA,GAAQ,IADV,CAD2C;AAAA,YAG3CC,OAAA,CAAQC,GAAR,CAAY,kBAAZ,EAH2C;AAAA,YAI3CH,KAAA,GAAQ,KAAR,CAJ2C;AAAA,YAK3CD,QAAA,GAAWnB,CAAA,CAAEwB,KAAF,EAAX,CAL2C;AAAA,YAM3CtB,CAAA,CAAEuB,OAAF,CAAU,KAAKT,SAAf,EAA0B,UAASU,IAAT,EAAe;AAAA,gBACvC,OAAOA,IAAA,CAAKT,QAAL,CAAcC,OAAd,EAAuBS,IAAvB,CAA4B,UAASC,GAAT,EAAc;AAAA,oBAC/C,IAAI,CAACR,KAAL,EAAY;AAAA,wBACVE,OAAA,CAAQC,GAAR,CAAY,oBAAZ,EAAkCK,GAAlC,EADU;AAAA,wBAEVT,QAAA,CAASU,OAAT,CAAiBD,GAAjB,EAFU;AAAA,wBAGV,OAAOR,KAAA,GAAQ,IAAf,CAHU;AAAA,qBAAZ,MAIO;AAAA,wBACL,OAAOE,OAAA,CAAQC,GAAR,CAAY,6BAAZ,CAAP,CADK;AAAA,qBALwC;AAAA,iBAA1C,CAAP,CADuC;AAAA,aAAzC,EAN2C;AAAA,YAiB3C,OAAOJ,QAAA,CAASW,OAAhB,CAjB2C;AAAA,SAA7C,CARwB;AAAA,QA4BxB,OAAO/B,KAAP,CA5BwB;AAAA,KAAlB,CA8BLE,QA9BK,CAAR,CAXU;AAAA,IA2CV8B,OAAA,CAAQhC,KAAR,GAAgBA,KAAhB,CA3CU;AAAA,CAAZ,CA6CGU,IA7CH,CA6CQ,IA7CR\"}","lineCount":45,"mtime":1390100825000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/q/q.js","canonicalName":"node_modules/q/q.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.6.3\n(function() {\n  var First, Q, Response, _,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  _ = require('lodash');\n\n  Q = require(\"q\");\n\n  Response = require(\"../stimresp\").Response;\n\n  First = (function(_super) {\n    __extends(First, _super);\n\n    function First(responses) {\n      this.responses = responses;\n      First.__super__.constructor.call(this, {});\n    }\n\n    First.prototype.activate = function(context) {\n      var deferred, _done,\n        _this = this;\n      console.log(\"activating first\");\n      _done = false;\n      deferred = Q.defer();\n      _.forEach(this.responses, function(resp) {\n        return resp.activate(context).then(function(obj) {\n          if (!_done) {\n            console.log(\"resolving response\", obj);\n            deferred.resolve(obj);\n            return _done = true;\n          } else {\n            return console.log(\"not resolving, already done\");\n          }\n        });\n      });\n      return deferred.promise;\n    };\n\n    return First;\n\n  })(Response);\n\n  exports.First = First;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/confirm.js":{"id":25,"canonicalName":"src/components/confirm.js","code":"(function () {\n    var Confirm, Q, Response, _ref, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Q = require('17', module);\n    Response = require('8', module).Response;\n    Confirm = function (_super) {\n        __extends(Confirm, _super);\n        function Confirm() {\n            _ref = Confirm.__super__.constructor.apply(this, arguments);\n            return _ref;\n        }\n        Confirm.prototype.defaults = {\n            message: '',\n            delay: 0,\n            defaultValue: '',\n            theme: 'vex-theme-wireframe'\n        };\n        Confirm.prototype.activate = function (context) {\n            var deferred, promise, _this = this;\n            console.log('activating confirm dialog');\n            deferred = Q.defer();\n            promise = Q.delay(this.spec.delay);\n            promise.then(function (f) {\n                console.log('rendering confirm dialog');\n                return vex.dialog.confirm({\n                    message: _this.spec.message,\n                    className: _this.spec.theme,\n                    callback: function (value) {\n                        return deferred.resolve(value);\n                    }\n                });\n            });\n            return deferred.promise;\n        };\n        return Confirm;\n    }(Response);\n    exports.Confirm = Confirm;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/confirm.js\"],\"names\":[\"Confirm\",\"Q\",\"Response\",\"_ref\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"apply\",\"arguments\",\"defaults\",\"message\",\"delay\",\"defaultValue\",\"theme\",\"activate\",\"context\",\"deferred\",\"promise\",\"_this\",\"console\",\"log\",\"defer\",\"spec\",\"then\",\"f\",\"vex\",\"dialog\",\"confirm\",\"className\",\"callback\",\"value\",\"resolve\",\"exports\"],\"mappings\":\"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\"}","lineCount":49,"mtime":1390162535000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/q/q.js","canonicalName":"node_modules/q/q.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.6.3\n(function() {\n  var Confirm, Q, Response, _ref,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Q = require(\"q\");\n\n  Response = require(\"../stimresp\").Response;\n\n  Confirm = (function(_super) {\n    __extends(Confirm, _super);\n\n    function Confirm() {\n      _ref = Confirm.__super__.constructor.apply(this, arguments);\n      return _ref;\n    }\n\n    Confirm.prototype.defaults = {\n      message: \"\",\n      delay: 0,\n      defaultValue: \"\",\n      theme: 'vex-theme-wireframe'\n    };\n\n    Confirm.prototype.activate = function(context) {\n      var deferred, promise,\n        _this = this;\n      console.log(\"activating confirm dialog\");\n      deferred = Q.defer();\n      promise = Q.delay(this.spec.delay);\n      promise.then(function(f) {\n        console.log(\"rendering confirm dialog\");\n        return vex.dialog.confirm({\n          message: _this.spec.message,\n          className: _this.spec.theme,\n          callback: function(value) {\n            return deferred.resolve(value);\n          }\n        });\n      });\n      return deferred.promise;\n    };\n\n    return Confirm;\n\n  })(Response);\n\n  exports.Confirm = Confirm;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/sound.js":{"id":24,"canonicalName":"src/components/sound.js","code":"(function () {\n    var Sound, Stimulus, buzz, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Stimulus = require('8', module).Stimulus;\n    buzz = require('35', module);\n    Sound = function (_super) {\n        __extends(Sound, _super);\n        Sound.prototype.defaults = { url: 'http://www.centraloutdoors.com/mp3/sheep/sheep.wav' };\n        function Sound(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            Sound.__super__.constructor.call(this, spec);\n            this.sound = new buzz.sound(this.spec.url);\n        }\n        Sound.prototype.render = function (context, layer) {\n            return this.sound.play();\n        };\n        return Sound;\n    }(Stimulus);\n    exports.Sound = Sound;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/sound.js\"],\"names\":[\"Sound\",\"Stimulus\",\"buzz\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"defaults\",\"url\",\"spec\",\"sound\",\"render\",\"context\",\"layer\",\"play\",\"exports\"],\"mappings\":\"AACA,CAAC,YAAW;AAAA,IACV,IAAIA,KAAJ,EAAWC,QAAX,EAAqBC,IAArB,EACEC,SAAA,GAAY,GAAGC,cADjB,EAEEC,SAAA,GAAY,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAA,YAAE,SAASC,GAAT,IAAgBD,MAAhB,EAAwB;AAAA,gBAAE,IAAIJ,SAAA,CAAUM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ;AAAA,oBAAiCF,KAAA,CAAME,GAAN,IAAaD,MAAA,CAAOC,GAAP,CAAb,CAAnC;AAAA,aAA1B;AAAA,YAAyF,SAASE,IAAT,GAAgB;AAAA,gBAAE,KAAKC,WAAL,GAAmBL,KAAnB,CAAF;AAAA,aAAzG;AAAA,YAAuII,IAAA,CAAKE,SAAL,GAAiBL,MAAA,CAAOK,SAAxB,CAAvI;AAAA,YAA0KN,KAAA,CAAMM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA1K;AAAA,YAAwMJ,KAAA,CAAMO,SAAN,GAAkBN,MAAA,CAAOK,SAAzB,CAAxM;AAAA,YAA4O,OAAON,KAAP,CAA5O;AAAA,SAFtC,CADU;AAAA,IAKVL,QAAA,GAAWa,OAAA,C,GAAA,E,MAAA,EAAuBb,QAAlC,CALU;AAAA,IAOVC,IAAA,GAAOY,OAAA,C,IAAA,E,MAAA,CAAP,CAPU;AAAA,IASVd,KAAA,GAAS,UAASe,MAAT,EAAiB;AAAA,QACxBV,SAAA,CAAUL,KAAV,EAAiBe,MAAjB,EADwB;AAAA,QAGxBf,KAAA,CAAMY,SAAN,CAAgBI,QAAhB,GAA2B,EACzBC,GAAA,EAAK,oDADoB,EAA3B,CAHwB;AAAA,QAOxB,SAASjB,KAAT,CAAekB,IAAf,EAAqB;AAAA,YACnB,IAAIA,IAAA,IAAQ,IAAZ,EAAkB;AAAA,gBAChBA,IAAA,GAAO,EAAP,CADgB;AAAA,aADC;AAAA,YAInBlB,KAAA,CAAMa,SAAN,CAAgBF,WAAhB,CAA4BF,IAA5B,CAAiC,IAAjC,EAAuCS,IAAvC,EAJmB;AAAA,YAKnB,KAAKC,KAAL,GAAa,IAAIjB,IAAA,CAAKiB,KAAT,CAAe,KAAKD,IAAL,CAAUD,GAAzB,CAAb,CALmB;AAAA,SAPG;AAAA,QAexBjB,KAAA,CAAMY,SAAN,CAAgBQ,MAAhB,GAAyB,UAASC,OAAT,EAAkBC,KAAlB,EAAyB;AAAA,YAChD,OAAO,KAAKH,KAAL,CAAWI,IAAX,EAAP,CADgD;AAAA,SAAlD,CAfwB;AAAA,QAmBxB,OAAOvB,KAAP,CAnBwB;AAAA,KAAlB,CAqBLC,QArBK,CAAR,CATU;AAAA,IAgCVuB,OAAA,CAAQxB,KAAR,GAAgBA,KAAhB,CAhCU;AAAA,CAAZ,CAkCGS,IAlCH,CAkCQ,IAlCR\"}","lineCount":33,"mtime":1391813989000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/buzz.js","canonicalName":"jslibs/buzz.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.6.3\n(function() {\n  var Sound, Stimulus, buzz,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Stimulus = require(\"../stimresp\").Stimulus;\n\n  buzz = require(\"../../jslibs/buzz\");\n\n  Sound = (function(_super) {\n    __extends(Sound, _super);\n\n    Sound.prototype.defaults = {\n      url: \"http://www.centraloutdoors.com/mp3/sheep/sheep.wav\"\n    };\n\n    function Sound(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      Sound.__super__.constructor.call(this, spec);\n      this.sound = new buzz.sound(this.spec.url);\n    }\n\n    Sound.prototype.render = function(context, layer) {\n      return this.sound.play();\n    };\n\n    return Sound;\n\n  })(Stimulus);\n\n  exports.Sound = Sound;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/jslibs/buzz.js":{"id":35,"canonicalName":"jslibs/buzz.js","code":"(function (name, context, factory) {\n    if (typeof module !== 'undefined' && module.exports) {\n        module.exports = factory();\n    } else if (typeof context.define === 'function' && context.define.amd) {\n        define(name, [], factory);\n    } else {\n        context[name] = factory();\n    }\n}('buzz', this, function () {\n    var buzz = {\n            defaults: {\n                autoplay: false,\n                duration: 5000,\n                formats: [],\n                loop: false,\n                placeholder: '--',\n                preload: 'metadata',\n                volume: 80,\n                document: document\n            },\n            types: {\n                mp3: 'audio/mpeg',\n                ogg: 'audio/ogg',\n                wav: 'audio/wav',\n                aac: 'audio/aac',\n                m4a: 'audio/x-m4a'\n            },\n            sounds: [],\n            el: document.createElement('audio'),\n            sound: function (src, options) {\n                options = options || {};\n                var doc = options.document || buzz.defaults.document;\n                var pid = 0, events = [], eventsOnce = {}, supported = buzz.isSupported();\n                this.load = function () {\n                    if (!supported) {\n                        return this;\n                    }\n                    this.sound.load();\n                    return this;\n                };\n                this.play = function () {\n                    if (!supported) {\n                        return this;\n                    }\n                    this.sound.play();\n                    return this;\n                };\n                this.togglePlay = function () {\n                    if (!supported) {\n                        return this;\n                    }\n                    if (this.sound.paused) {\n                        this.sound.play();\n                    } else {\n                        this.sound.pause();\n                    }\n                    return this;\n                };\n                this.pause = function () {\n                    if (!supported) {\n                        return this;\n                    }\n                    this.sound.pause();\n                    return this;\n                };\n                this.isPaused = function () {\n                    if (!supported) {\n                        return null;\n                    }\n                    return this.sound.paused;\n                };\n                this.stop = function () {\n                    if (!supported) {\n                        return this;\n                    }\n                    this.setTime(0);\n                    this.sound.pause();\n                    return this;\n                };\n                this.isEnded = function () {\n                    if (!supported) {\n                        return null;\n                    }\n                    return this.sound.ended;\n                };\n                this.loop = function () {\n                    if (!supported) {\n                        return this;\n                    }\n                    this.sound.loop = 'loop';\n                    this.bind('ended.buzzloop', function () {\n                        this.currentTime = 0;\n                        this.play();\n                    });\n                    return this;\n                };\n                this.unloop = function () {\n                    if (!supported) {\n                        return this;\n                    }\n                    this.sound.removeAttribute('loop');\n                    this.unbind('ended.buzzloop');\n                    return this;\n                };\n                this.mute = function () {\n                    if (!supported) {\n                        return this;\n                    }\n                    this.sound.muted = true;\n                    return this;\n                };\n                this.unmute = function () {\n                    if (!supported) {\n                        return this;\n                    }\n                    this.sound.muted = false;\n                    return this;\n                };\n                this.toggleMute = function () {\n                    if (!supported) {\n                        return this;\n                    }\n                    this.sound.muted = !this.sound.muted;\n                    return this;\n                };\n                this.isMuted = function () {\n                    if (!supported) {\n                        return null;\n                    }\n                    return this.sound.muted;\n                };\n                this.setVolume = function (volume) {\n                    if (!supported) {\n                        return this;\n                    }\n                    if (volume < 0) {\n                        volume = 0;\n                    }\n                    if (volume > 100) {\n                        volume = 100;\n                    }\n                    this.volume = volume;\n                    this.sound.volume = volume / 100;\n                    return this;\n                };\n                this.getVolume = function () {\n                    if (!supported) {\n                        return this;\n                    }\n                    return this.volume;\n                };\n                this.increaseVolume = function (value) {\n                    return this.setVolume(this.volume + (value || 1));\n                };\n                this.decreaseVolume = function (value) {\n                    return this.setVolume(this.volume - (value || 1));\n                };\n                this.setTime = function (time) {\n                    if (!supported) {\n                        return this;\n                    }\n                    var set = true;\n                    this.whenReady(function () {\n                        if (set === true) {\n                            set = false;\n                            this.sound.currentTime = time;\n                        }\n                    });\n                    return this;\n                };\n                this.getTime = function () {\n                    if (!supported) {\n                        return null;\n                    }\n                    var time = Math.round(this.sound.currentTime * 100) / 100;\n                    return isNaN(time) ? buzz.defaults.placeholder : time;\n                };\n                this.setPercent = function (percent) {\n                    if (!supported) {\n                        return this;\n                    }\n                    return this.setTime(buzz.fromPercent(percent, this.sound.duration));\n                };\n                this.getPercent = function () {\n                    if (!supported) {\n                        return null;\n                    }\n                    var percent = Math.round(buzz.toPercent(this.sound.currentTime, this.sound.duration));\n                    return isNaN(percent) ? buzz.defaults.placeholder : percent;\n                };\n                this.setSpeed = function (duration) {\n                    if (!supported) {\n                        return this;\n                    }\n                    this.sound.playbackRate = duration;\n                    return this;\n                };\n                this.getSpeed = function () {\n                    if (!supported) {\n                        return null;\n                    }\n                    return this.sound.playbackRate;\n                };\n                this.getDuration = function () {\n                    if (!supported) {\n                        return null;\n                    }\n                    var duration = Math.round(this.sound.duration * 100) / 100;\n                    return isNaN(duration) ? buzz.defaults.placeholder : duration;\n                };\n                this.getPlayed = function () {\n                    if (!supported) {\n                        return null;\n                    }\n                    return timerangeToArray(this.sound.played);\n                };\n                this.getBuffered = function () {\n                    if (!supported) {\n                        return null;\n                    }\n                    return timerangeToArray(this.sound.buffered);\n                };\n                this.getSeekable = function () {\n                    if (!supported) {\n                        return null;\n                    }\n                    return timerangeToArray(this.sound.seekable);\n                };\n                this.getErrorCode = function () {\n                    if (supported && this.sound.error) {\n                        return this.sound.error.code;\n                    }\n                    return 0;\n                };\n                this.getErrorMessage = function () {\n                    if (!supported) {\n                        return null;\n                    }\n                    switch (this.getErrorCode()) {\n                    case 1:\n                        return 'MEDIA_ERR_ABORTED';\n                    case 2:\n                        return 'MEDIA_ERR_NETWORK';\n                    case 3:\n                        return 'MEDIA_ERR_DECODE';\n                    case 4:\n                        return 'MEDIA_ERR_SRC_NOT_SUPPORTED';\n                    default:\n                        return null;\n                    }\n                };\n                this.getStateCode = function () {\n                    if (!supported) {\n                        return null;\n                    }\n                    return this.sound.readyState;\n                };\n                this.getStateMessage = function () {\n                    if (!supported) {\n                        return null;\n                    }\n                    switch (this.getStateCode()) {\n                    case 0:\n                        return 'HAVE_NOTHING';\n                    case 1:\n                        return 'HAVE_METADATA';\n                    case 2:\n                        return 'HAVE_CURRENT_DATA';\n                    case 3:\n                        return 'HAVE_FUTURE_DATA';\n                    case 4:\n                        return 'HAVE_ENOUGH_DATA';\n                    default:\n                        return null;\n                    }\n                };\n                this.getNetworkStateCode = function () {\n                    if (!supported) {\n                        return null;\n                    }\n                    return this.sound.networkState;\n                };\n                this.getNetworkStateMessage = function () {\n                    if (!supported) {\n                        return null;\n                    }\n                    switch (this.getNetworkStateCode()) {\n                    case 0:\n                        return 'NETWORK_EMPTY';\n                    case 1:\n                        return 'NETWORK_IDLE';\n                    case 2:\n                        return 'NETWORK_LOADING';\n                    case 3:\n                        return 'NETWORK_NO_SOURCE';\n                    default:\n                        return null;\n                    }\n                };\n                this.set = function (key, value) {\n                    if (!supported) {\n                        return this;\n                    }\n                    this.sound[key] = value;\n                    return this;\n                };\n                this.get = function (key) {\n                    if (!supported) {\n                        return null;\n                    }\n                    return key ? this.sound[key] : this.sound;\n                };\n                this.bind = function (types, func) {\n                    if (!supported) {\n                        return this;\n                    }\n                    types = types.split(' ');\n                    var self = this, efunc = function (e) {\n                            func.call(self, e);\n                        };\n                    for (var t = 0; t < types.length; t++) {\n                        var type = types[t], idx = type;\n                        type = idx.split('.')[0];\n                        events.push({\n                            idx: idx,\n                            func: efunc\n                        });\n                        this.sound.addEventListener(type, efunc, true);\n                    }\n                    return this;\n                };\n                this.unbind = function (types) {\n                    if (!supported) {\n                        return this;\n                    }\n                    types = types.split(' ');\n                    for (var t = 0; t < types.length; t++) {\n                        var idx = types[t], type = idx.split('.')[0];\n                        for (var i = 0; i < events.length; i++) {\n                            var namespace = events[i].idx.split('.');\n                            if (events[i].idx == idx || namespace[1] && namespace[1] == idx.replace('.', '')) {\n                                this.sound.removeEventListener(type, events[i].func, true);\n                                events.splice(i, 1);\n                            }\n                        }\n                    }\n                    return this;\n                };\n                this.bindOnce = function (type, func) {\n                    if (!supported) {\n                        return this;\n                    }\n                    var self = this;\n                    eventsOnce[pid++] = false;\n                    this.bind(type + '.' + pid, function () {\n                        if (!eventsOnce[pid]) {\n                            eventsOnce[pid] = true;\n                            func.call(self);\n                        }\n                        self.unbind(type + '.' + pid);\n                    });\n                    return this;\n                };\n                this.trigger = function (types) {\n                    if (!supported) {\n                        return this;\n                    }\n                    types = types.split(' ');\n                    for (var t = 0; t < types.length; t++) {\n                        var idx = types[t];\n                        for (var i = 0; i < events.length; i++) {\n                            var eventType = events[i].idx.split('.');\n                            if (events[i].idx == idx || eventType[0] && eventType[0] == idx.replace('.', '')) {\n                                var evt = doc.createEvent('HTMLEvents');\n                                evt.initEvent(eventType[0], false, true);\n                                this.sound.dispatchEvent(evt);\n                            }\n                        }\n                    }\n                    return this;\n                };\n                this.fadeTo = function (to, duration, callback) {\n                    if (!supported) {\n                        return this;\n                    }\n                    if (duration instanceof Function) {\n                        callback = duration;\n                        duration = buzz.defaults.duration;\n                    } else {\n                        duration = duration || buzz.defaults.duration;\n                    }\n                    var from = this.volume, delay = duration / Math.abs(from - to), self = this;\n                    this.play();\n                    function doFade() {\n                        setTimeout(function () {\n                            if (from < to && self.volume < to) {\n                                self.setVolume(self.volume += 1);\n                                doFade();\n                            } else if (from > to && self.volume > to) {\n                                self.setVolume(self.volume -= 1);\n                                doFade();\n                            } else if (callback instanceof Function) {\n                                callback.apply(self);\n                            }\n                        }, delay);\n                    }\n                    this.whenReady(function () {\n                        doFade();\n                    });\n                    return this;\n                };\n                this.fadeIn = function (duration, callback) {\n                    if (!supported) {\n                        return this;\n                    }\n                    return this.setVolume(0).fadeTo(100, duration, callback);\n                };\n                this.fadeOut = function (duration, callback) {\n                    if (!supported) {\n                        return this;\n                    }\n                    return this.fadeTo(0, duration, callback);\n                };\n                this.fadeWith = function (sound, duration) {\n                    if (!supported) {\n                        return this;\n                    }\n                    this.fadeOut(duration, function () {\n                        this.stop();\n                    });\n                    sound.play().fadeIn(duration);\n                    return this;\n                };\n                this.whenReady = function (func) {\n                    if (!supported) {\n                        return null;\n                    }\n                    var self = this;\n                    if (this.sound.readyState === 0) {\n                        this.bind('canplay.buzzwhenready', function () {\n                            func.call(self);\n                        });\n                    } else {\n                        func.call(self);\n                    }\n                };\n                function timerangeToArray(timeRange) {\n                    var array = [], length = timeRange.length - 1;\n                    for (var i = 0; i <= length; i++) {\n                        array.push({\n                            start: timeRange.start(i),\n                            end: timeRange.end(i)\n                        });\n                    }\n                    return array;\n                }\n                function getExt(filename) {\n                    return filename.split('.').pop();\n                }\n                function addSource(sound, src) {\n                    var source = doc.createElement('source');\n                    source.src = src;\n                    if (buzz.types[getExt(src)]) {\n                        source.type = buzz.types[getExt(src)];\n                    }\n                    sound.appendChild(source);\n                }\n                if (supported && src) {\n                    for (var i in buzz.defaults) {\n                        if (buzz.defaults.hasOwnProperty(i)) {\n                            options[i] = options[i] || buzz.defaults[i];\n                        }\n                    }\n                    this.sound = doc.createElement('audio');\n                    if (src instanceof Array) {\n                        for (var j in src) {\n                            if (src.hasOwnProperty(j)) {\n                                addSource(this.sound, src[j]);\n                            }\n                        }\n                    } else if (options.formats.length) {\n                        for (var k in options.formats) {\n                            if (options.formats.hasOwnProperty(k)) {\n                                addSource(this.sound, src + '.' + options.formats[k]);\n                            }\n                        }\n                    } else {\n                        addSource(this.sound, src);\n                    }\n                    if (options.loop) {\n                        this.loop();\n                    }\n                    if (options.autoplay) {\n                        this.sound.autoplay = 'autoplay';\n                    }\n                    if (options.preload === true) {\n                        this.sound.preload = 'auto';\n                    } else if (options.preload === false) {\n                        this.sound.preload = 'none';\n                    } else {\n                        this.sound.preload = options.preload;\n                    }\n                    this.setVolume(options.volume);\n                    buzz.sounds.push(this);\n                }\n            },\n            group: function (sounds) {\n                sounds = argsToArray(sounds, arguments);\n                this.getSounds = function () {\n                    return sounds;\n                };\n                this.add = function (soundArray) {\n                    soundArray = argsToArray(soundArray, arguments);\n                    for (var a = 0; a < soundArray.length; a++) {\n                        sounds.push(soundArray[a]);\n                    }\n                };\n                this.remove = function (soundArray) {\n                    soundArray = argsToArray(soundArray, arguments);\n                    for (var a = 0; a < soundArray.length; a++) {\n                        for (var i = 0; i < sounds.length; i++) {\n                            if (sounds[i] == soundArray[a]) {\n                                sounds.splice(i, 1);\n                                break;\n                            }\n                        }\n                    }\n                };\n                this.load = function () {\n                    fn('load');\n                    return this;\n                };\n                this.play = function () {\n                    fn('play');\n                    return this;\n                };\n                this.togglePlay = function () {\n                    fn('togglePlay');\n                    return this;\n                };\n                this.pause = function (time) {\n                    fn('pause', time);\n                    return this;\n                };\n                this.stop = function () {\n                    fn('stop');\n                    return this;\n                };\n                this.mute = function () {\n                    fn('mute');\n                    return this;\n                };\n                this.unmute = function () {\n                    fn('unmute');\n                    return this;\n                };\n                this.toggleMute = function () {\n                    fn('toggleMute');\n                    return this;\n                };\n                this.setVolume = function (volume) {\n                    fn('setVolume', volume);\n                    return this;\n                };\n                this.increaseVolume = function (value) {\n                    fn('increaseVolume', value);\n                    return this;\n                };\n                this.decreaseVolume = function (value) {\n                    fn('decreaseVolume', value);\n                    return this;\n                };\n                this.loop = function () {\n                    fn('loop');\n                    return this;\n                };\n                this.unloop = function () {\n                    fn('unloop');\n                    return this;\n                };\n                this.setTime = function (time) {\n                    fn('setTime', time);\n                    return this;\n                };\n                this.set = function (key, value) {\n                    fn('set', key, value);\n                    return this;\n                };\n                this.bind = function (type, func) {\n                    fn('bind', type, func);\n                    return this;\n                };\n                this.unbind = function (type) {\n                    fn('unbind', type);\n                    return this;\n                };\n                this.bindOnce = function (type, func) {\n                    fn('bindOnce', type, func);\n                    return this;\n                };\n                this.trigger = function (type) {\n                    fn('trigger', type);\n                    return this;\n                };\n                this.fade = function (from, to, duration, callback) {\n                    fn('fade', from, to, duration, callback);\n                    return this;\n                };\n                this.fadeIn = function (duration, callback) {\n                    fn('fadeIn', duration, callback);\n                    return this;\n                };\n                this.fadeOut = function (duration, callback) {\n                    fn('fadeOut', duration, callback);\n                    return this;\n                };\n                function fn() {\n                    var args = argsToArray(null, arguments), func = args.shift();\n                    for (var i = 0; i < sounds.length; i++) {\n                        sounds[i][func].apply(sounds[i], args);\n                    }\n                }\n                function argsToArray(array, args) {\n                    return array instanceof Array ? array : Array.prototype.slice.call(args);\n                }\n            },\n            all: function () {\n                return new buzz.group(buzz.sounds);\n            },\n            isSupported: function () {\n                return !!buzz.el.canPlayType;\n            },\n            isOGGSupported: function () {\n                return !!buzz.el.canPlayType && buzz.el.canPlayType('audio/ogg; codecs=\"vorbis\"');\n            },\n            isWAVSupported: function () {\n                return !!buzz.el.canPlayType && buzz.el.canPlayType('audio/wav; codecs=\"1\"');\n            },\n            isMP3Supported: function () {\n                return !!buzz.el.canPlayType && buzz.el.canPlayType('audio/mpeg;');\n            },\n            isAACSupported: function () {\n                return !!buzz.el.canPlayType && (buzz.el.canPlayType('audio/x-m4a;') || buzz.el.canPlayType('audio/aac;'));\n            },\n            toTimer: function (time, withHours) {\n                var h, m, s;\n                h = Math.floor(time / 3600);\n                h = isNaN(h) ? '--' : h >= 10 ? h : '0' + h;\n                m = withHours ? Math.floor(time / 60 % 60) : Math.floor(time / 60);\n                m = isNaN(m) ? '--' : m >= 10 ? m : '0' + m;\n                s = Math.floor(time % 60);\n                s = isNaN(s) ? '--' : s >= 10 ? s : '0' + s;\n                return withHours ? h + ':' + m + ':' + s : m + ':' + s;\n            },\n            fromTimer: function (time) {\n                var splits = time.toString().split(':');\n                if (splits && splits.length == 3) {\n                    time = parseInt(splits[0], 10) * 3600 + parseInt(splits[1], 10) * 60 + parseInt(splits[2], 10);\n                }\n                if (splits && splits.length == 2) {\n                    time = parseInt(splits[0], 10) * 60 + parseInt(splits[1], 10);\n                }\n                return time;\n            },\n            toPercent: function (value, total, decimal) {\n                var r = Math.pow(10, decimal || 0);\n                return Math.round(value * 100 / total * r) / r;\n            },\n            fromPercent: function (percent, total, decimal) {\n                var r = Math.pow(10, decimal || 0);\n                return Math.round(total / 100 * percent * r) / r;\n            }\n        };\n    return buzz;\n}));","map":"{\"version\":3,\"sources\":[\"jslibs/buzz.js\"],\"names\":[\"name\",\"context\",\"factory\",\"module\",\"exports\",\"define\",\"amd\",\"buzz\",\"defaults\",\"autoplay\",\"duration\",\"formats\",\"loop\",\"placeholder\",\"preload\",\"volume\",\"document\",\"types\",\"mp3\",\"ogg\",\"wav\",\"aac\",\"m4a\",\"sounds\",\"el\",\"createElement\",\"sound\",\"src\",\"options\",\"doc\",\"pid\",\"events\",\"eventsOnce\",\"supported\",\"isSupported\",\"load\",\"play\",\"togglePlay\",\"paused\",\"pause\",\"isPaused\",\"stop\",\"setTime\",\"isEnded\",\"ended\",\"bind\",\"currentTime\",\"unloop\",\"removeAttribute\",\"unbind\",\"mute\",\"muted\",\"unmute\",\"toggleMute\",\"isMuted\",\"setVolume\",\"getVolume\",\"increaseVolume\",\"value\",\"decreaseVolume\",\"time\",\"set\",\"whenReady\",\"getTime\",\"Math\",\"round\",\"isNaN\",\"setPercent\",\"percent\",\"fromPercent\",\"getPercent\",\"toPercent\",\"setSpeed\",\"playbackRate\",\"getSpeed\",\"getDuration\",\"getPlayed\",\"timerangeToArray\",\"played\",\"getBuffered\",\"buffered\",\"getSeekable\",\"seekable\",\"getErrorCode\",\"error\",\"code\",\"getErrorMessage\",\"getStateCode\",\"readyState\",\"getStateMessage\",\"getNetworkStateCode\",\"networkState\",\"getNetworkStateMessage\",\"key\",\"get\",\"func\",\"split\",\"self\",\"efunc\",\"e\",\"call\",\"t\",\"length\",\"type\",\"idx\",\"push\",\"addEventListener\",\"i\",\"namespace\",\"replace\",\"removeEventListener\",\"splice\",\"bindOnce\",\"trigger\",\"eventType\",\"evt\",\"createEvent\",\"initEvent\",\"dispatchEvent\",\"fadeTo\",\"to\",\"callback\",\"Function\",\"from\",\"delay\",\"abs\",\"doFade\",\"setTimeout\",\"apply\",\"fadeIn\",\"fadeOut\",\"fadeWith\",\"timeRange\",\"array\",\"start\",\"end\",\"getExt\",\"filename\",\"pop\",\"addSource\",\"source\",\"appendChild\",\"hasOwnProperty\",\"Array\",\"j\",\"k\",\"group\",\"argsToArray\",\"arguments\",\"getSounds\",\"add\",\"soundArray\",\"a\",\"remove\",\"fn\",\"fade\",\"args\",\"shift\",\"prototype\",\"slice\",\"all\",\"canPlayType\",\"isOGGSupported\",\"isWAVSupported\",\"isMP3Supported\",\"isAACSupported\",\"toTimer\",\"withHours\",\"h\",\"m\",\"s\",\"floor\",\"fromTimer\",\"splits\",\"toString\",\"parseInt\",\"total\",\"decimal\",\"r\",\"pow\"],\"mappings\":\"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\"}","lineCount":675,"mtime":1388978347000,"deps":[],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":" // ----------------------------------------------------------------------------\n // Buzz, a Javascript HTML5 Audio library\n // v1.1.0 - released 2013-08-15 13:18\n // Licensed under the MIT license.\n // http://buzz.jaysalvat.com/\n // ----------------------------------------------------------------------------\n // Copyright (C) 2010-2013 Jay Salvat\n // http://jaysalvat.com/\n // ----------------------------------------------------------------------------\n\n(function(name, context, factory) {\n    if (typeof module !== \"undefined\" && module.exports) {\n        module.exports = factory();\n    } else if (typeof context.define === \"function\" && context.define.amd) {\n        define(name, [], factory);\n    } else {\n        context[name] = factory();\n    }\n})(\"buzz\", this, function() {\n    var buzz = {\n        defaults: {\n            autoplay: false,\n            duration: 5e3,\n            formats: [],\n            loop: false,\n            placeholder: \"--\",\n            preload: \"metadata\",\n            volume: 80,\n            document: document\n        },\n        types: {\n            mp3: \"audio/mpeg\",\n            ogg: \"audio/ogg\",\n            wav: \"audio/wav\",\n            aac: \"audio/aac\",\n            m4a: \"audio/x-m4a\"\n        },\n        sounds: [],\n        el: document.createElement(\"audio\"),\n        sound: function(src, options) {\n            options = options || {};\n            var doc = options.document || buzz.defaults.document;\n            var pid = 0, events = [], eventsOnce = {}, supported = buzz.isSupported();\n            this.load = function() {\n                if (!supported) {\n                    return this;\n                }\n                this.sound.load();\n                return this;\n            };\n            this.play = function() {\n                if (!supported) {\n                    return this;\n                }\n                this.sound.play();\n                return this;\n            };\n            this.togglePlay = function() {\n                if (!supported) {\n                    return this;\n                }\n                if (this.sound.paused) {\n                    this.sound.play();\n                } else {\n                    this.sound.pause();\n                }\n                return this;\n            };\n            this.pause = function() {\n                if (!supported) {\n                    return this;\n                }\n                this.sound.pause();\n                return this;\n            };\n            this.isPaused = function() {\n                if (!supported) {\n                    return null;\n                }\n                return this.sound.paused;\n            };\n            this.stop = function() {\n                if (!supported) {\n                    return this;\n                }\n                this.setTime(0);\n                this.sound.pause();\n                return this;\n            };\n            this.isEnded = function() {\n                if (!supported) {\n                    return null;\n                }\n                return this.sound.ended;\n            };\n            this.loop = function() {\n                if (!supported) {\n                    return this;\n                }\n                this.sound.loop = \"loop\";\n                this.bind(\"ended.buzzloop\", function() {\n                    this.currentTime = 0;\n                    this.play();\n                });\n                return this;\n            };\n            this.unloop = function() {\n                if (!supported) {\n                    return this;\n                }\n                this.sound.removeAttribute(\"loop\");\n                this.unbind(\"ended.buzzloop\");\n                return this;\n            };\n            this.mute = function() {\n                if (!supported) {\n                    return this;\n                }\n                this.sound.muted = true;\n                return this;\n            };\n            this.unmute = function() {\n                if (!supported) {\n                    return this;\n                }\n                this.sound.muted = false;\n                return this;\n            };\n            this.toggleMute = function() {\n                if (!supported) {\n                    return this;\n                }\n                this.sound.muted = !this.sound.muted;\n                return this;\n            };\n            this.isMuted = function() {\n                if (!supported) {\n                    return null;\n                }\n                return this.sound.muted;\n            };\n            this.setVolume = function(volume) {\n                if (!supported) {\n                    return this;\n                }\n                if (volume < 0) {\n                    volume = 0;\n                }\n                if (volume > 100) {\n                    volume = 100;\n                }\n                this.volume = volume;\n                this.sound.volume = volume / 100;\n                return this;\n            };\n            this.getVolume = function() {\n                if (!supported) {\n                    return this;\n                }\n                return this.volume;\n            };\n            this.increaseVolume = function(value) {\n                return this.setVolume(this.volume + (value || 1));\n            };\n            this.decreaseVolume = function(value) {\n                return this.setVolume(this.volume - (value || 1));\n            };\n            this.setTime = function(time) {\n                if (!supported) {\n                    return this;\n                }\n                var set = true;\n                this.whenReady(function() {\n                    if (set === true) {\n                        set = false;\n                        this.sound.currentTime = time;\n                    }\n                });\n                return this;\n            };\n            this.getTime = function() {\n                if (!supported) {\n                    return null;\n                }\n                var time = Math.round(this.sound.currentTime * 100) / 100;\n                return isNaN(time) ? buzz.defaults.placeholder : time;\n            };\n            this.setPercent = function(percent) {\n                if (!supported) {\n                    return this;\n                }\n                return this.setTime(buzz.fromPercent(percent, this.sound.duration));\n            };\n            this.getPercent = function() {\n                if (!supported) {\n                    return null;\n                }\n                var percent = Math.round(buzz.toPercent(this.sound.currentTime, this.sound.duration));\n                return isNaN(percent) ? buzz.defaults.placeholder : percent;\n            };\n            this.setSpeed = function(duration) {\n                if (!supported) {\n                    return this;\n                }\n                this.sound.playbackRate = duration;\n                return this;\n            };\n            this.getSpeed = function() {\n                if (!supported) {\n                    return null;\n                }\n                return this.sound.playbackRate;\n            };\n            this.getDuration = function() {\n                if (!supported) {\n                    return null;\n                }\n                var duration = Math.round(this.sound.duration * 100) / 100;\n                return isNaN(duration) ? buzz.defaults.placeholder : duration;\n            };\n            this.getPlayed = function() {\n                if (!supported) {\n                    return null;\n                }\n                return timerangeToArray(this.sound.played);\n            };\n            this.getBuffered = function() {\n                if (!supported) {\n                    return null;\n                }\n                return timerangeToArray(this.sound.buffered);\n            };\n            this.getSeekable = function() {\n                if (!supported) {\n                    return null;\n                }\n                return timerangeToArray(this.sound.seekable);\n            };\n            this.getErrorCode = function() {\n                if (supported && this.sound.error) {\n                    return this.sound.error.code;\n                }\n                return 0;\n            };\n            this.getErrorMessage = function() {\n                if (!supported) {\n                    return null;\n                }\n                switch (this.getErrorCode()) {\n                  case 1:\n                    return \"MEDIA_ERR_ABORTED\";\n\n                  case 2:\n                    return \"MEDIA_ERR_NETWORK\";\n\n                  case 3:\n                    return \"MEDIA_ERR_DECODE\";\n\n                  case 4:\n                    return \"MEDIA_ERR_SRC_NOT_SUPPORTED\";\n\n                  default:\n                    return null;\n                }\n            };\n            this.getStateCode = function() {\n                if (!supported) {\n                    return null;\n                }\n                return this.sound.readyState;\n            };\n            this.getStateMessage = function() {\n                if (!supported) {\n                    return null;\n                }\n                switch (this.getStateCode()) {\n                  case 0:\n                    return \"HAVE_NOTHING\";\n\n                  case 1:\n                    return \"HAVE_METADATA\";\n\n                  case 2:\n                    return \"HAVE_CURRENT_DATA\";\n\n                  case 3:\n                    return \"HAVE_FUTURE_DATA\";\n\n                  case 4:\n                    return \"HAVE_ENOUGH_DATA\";\n\n                  default:\n                    return null;\n                }\n            };\n            this.getNetworkStateCode = function() {\n                if (!supported) {\n                    return null;\n                }\n                return this.sound.networkState;\n            };\n            this.getNetworkStateMessage = function() {\n                if (!supported) {\n                    return null;\n                }\n                switch (this.getNetworkStateCode()) {\n                  case 0:\n                    return \"NETWORK_EMPTY\";\n\n                  case 1:\n                    return \"NETWORK_IDLE\";\n\n                  case 2:\n                    return \"NETWORK_LOADING\";\n\n                  case 3:\n                    return \"NETWORK_NO_SOURCE\";\n\n                  default:\n                    return null;\n                }\n            };\n            this.set = function(key, value) {\n                if (!supported) {\n                    return this;\n                }\n                this.sound[key] = value;\n                return this;\n            };\n            this.get = function(key) {\n                if (!supported) {\n                    return null;\n                }\n                return key ? this.sound[key] : this.sound;\n            };\n            this.bind = function(types, func) {\n                if (!supported) {\n                    return this;\n                }\n                types = types.split(\" \");\n                var self = this, efunc = function(e) {\n                    func.call(self, e);\n                };\n                for (var t = 0; t < types.length; t++) {\n                    var type = types[t], idx = type;\n                    type = idx.split(\".\")[0];\n                    events.push({\n                        idx: idx,\n                        func: efunc\n                    });\n                    this.sound.addEventListener(type, efunc, true);\n                }\n                return this;\n            };\n            this.unbind = function(types) {\n                if (!supported) {\n                    return this;\n                }\n                types = types.split(\" \");\n                for (var t = 0; t < types.length; t++) {\n                    var idx = types[t], type = idx.split(\".\")[0];\n                    for (var i = 0; i < events.length; i++) {\n                        var namespace = events[i].idx.split(\".\");\n                        if (events[i].idx == idx || namespace[1] && namespace[1] == idx.replace(\".\", \"\")) {\n                            this.sound.removeEventListener(type, events[i].func, true);\n                            events.splice(i, 1);\n                        }\n                    }\n                }\n                return this;\n            };\n            this.bindOnce = function(type, func) {\n                if (!supported) {\n                    return this;\n                }\n                var self = this;\n                eventsOnce[pid++] = false;\n                this.bind(type + \".\" + pid, function() {\n                    if (!eventsOnce[pid]) {\n                        eventsOnce[pid] = true;\n                        func.call(self);\n                    }\n                    self.unbind(type + \".\" + pid);\n                });\n                return this;\n            };\n            this.trigger = function(types) {\n                if (!supported) {\n                    return this;\n                }\n                types = types.split(\" \");\n                for (var t = 0; t < types.length; t++) {\n                    var idx = types[t];\n                    for (var i = 0; i < events.length; i++) {\n                        var eventType = events[i].idx.split(\".\");\n                        if (events[i].idx == idx || eventType[0] && eventType[0] == idx.replace(\".\", \"\")) {\n                            var evt = doc.createEvent(\"HTMLEvents\");\n                            evt.initEvent(eventType[0], false, true);\n                            this.sound.dispatchEvent(evt);\n                        }\n                    }\n                }\n                return this;\n            };\n            this.fadeTo = function(to, duration, callback) {\n                if (!supported) {\n                    return this;\n                }\n                if (duration instanceof Function) {\n                    callback = duration;\n                    duration = buzz.defaults.duration;\n                } else {\n                    duration = duration || buzz.defaults.duration;\n                }\n                var from = this.volume, delay = duration / Math.abs(from - to), self = this;\n                this.play();\n                function doFade() {\n                    setTimeout(function() {\n                        if (from < to && self.volume < to) {\n                            self.setVolume(self.volume += 1);\n                            doFade();\n                        } else if (from > to && self.volume > to) {\n                            self.setVolume(self.volume -= 1);\n                            doFade();\n                        } else if (callback instanceof Function) {\n                            callback.apply(self);\n                        }\n                    }, delay);\n                }\n                this.whenReady(function() {\n                    doFade();\n                });\n                return this;\n            };\n            this.fadeIn = function(duration, callback) {\n                if (!supported) {\n                    return this;\n                }\n                return this.setVolume(0).fadeTo(100, duration, callback);\n            };\n            this.fadeOut = function(duration, callback) {\n                if (!supported) {\n                    return this;\n                }\n                return this.fadeTo(0, duration, callback);\n            };\n            this.fadeWith = function(sound, duration) {\n                if (!supported) {\n                    return this;\n                }\n                this.fadeOut(duration, function() {\n                    this.stop();\n                });\n                sound.play().fadeIn(duration);\n                return this;\n            };\n            this.whenReady = function(func) {\n                if (!supported) {\n                    return null;\n                }\n                var self = this;\n                if (this.sound.readyState === 0) {\n                    this.bind(\"canplay.buzzwhenready\", function() {\n                        func.call(self);\n                    });\n                } else {\n                    func.call(self);\n                }\n            };\n            function timerangeToArray(timeRange) {\n                var array = [], length = timeRange.length - 1;\n                for (var i = 0; i <= length; i++) {\n                    array.push({\n                        start: timeRange.start(i),\n                        end: timeRange.end(i)\n                    });\n                }\n                return array;\n            }\n            function getExt(filename) {\n                return filename.split(\".\").pop();\n            }\n            function addSource(sound, src) {\n                var source = doc.createElement(\"source\");\n                source.src = src;\n                if (buzz.types[getExt(src)]) {\n                    source.type = buzz.types[getExt(src)];\n                }\n                sound.appendChild(source);\n            }\n            if (supported && src) {\n                for (var i in buzz.defaults) {\n                    if (buzz.defaults.hasOwnProperty(i)) {\n                        options[i] = options[i] || buzz.defaults[i];\n                    }\n                }\n                this.sound = doc.createElement(\"audio\");\n                if (src instanceof Array) {\n                    for (var j in src) {\n                        if (src.hasOwnProperty(j)) {\n                            addSource(this.sound, src[j]);\n                        }\n                    }\n                } else if (options.formats.length) {\n                    for (var k in options.formats) {\n                        if (options.formats.hasOwnProperty(k)) {\n                            addSource(this.sound, src + \".\" + options.formats[k]);\n                        }\n                    }\n                } else {\n                    addSource(this.sound, src);\n                }\n                if (options.loop) {\n                    this.loop();\n                }\n                if (options.autoplay) {\n                    this.sound.autoplay = \"autoplay\";\n                }\n                if (options.preload === true) {\n                    this.sound.preload = \"auto\";\n                } else if (options.preload === false) {\n                    this.sound.preload = \"none\";\n                } else {\n                    this.sound.preload = options.preload;\n                }\n                this.setVolume(options.volume);\n                buzz.sounds.push(this);\n            }\n        },\n        group: function(sounds) {\n            sounds = argsToArray(sounds, arguments);\n            this.getSounds = function() {\n                return sounds;\n            };\n            this.add = function(soundArray) {\n                soundArray = argsToArray(soundArray, arguments);\n                for (var a = 0; a < soundArray.length; a++) {\n                    sounds.push(soundArray[a]);\n                }\n            };\n            this.remove = function(soundArray) {\n                soundArray = argsToArray(soundArray, arguments);\n                for (var a = 0; a < soundArray.length; a++) {\n                    for (var i = 0; i < sounds.length; i++) {\n                        if (sounds[i] == soundArray[a]) {\n                            sounds.splice(i, 1);\n                            break;\n                        }\n                    }\n                }\n            };\n            this.load = function() {\n                fn(\"load\");\n                return this;\n            };\n            this.play = function() {\n                fn(\"play\");\n                return this;\n            };\n            this.togglePlay = function() {\n                fn(\"togglePlay\");\n                return this;\n            };\n            this.pause = function(time) {\n                fn(\"pause\", time);\n                return this;\n            };\n            this.stop = function() {\n                fn(\"stop\");\n                return this;\n            };\n            this.mute = function() {\n                fn(\"mute\");\n                return this;\n            };\n            this.unmute = function() {\n                fn(\"unmute\");\n                return this;\n            };\n            this.toggleMute = function() {\n                fn(\"toggleMute\");\n                return this;\n            };\n            this.setVolume = function(volume) {\n                fn(\"setVolume\", volume);\n                return this;\n            };\n            this.increaseVolume = function(value) {\n                fn(\"increaseVolume\", value);\n                return this;\n            };\n            this.decreaseVolume = function(value) {\n                fn(\"decreaseVolume\", value);\n                return this;\n            };\n            this.loop = function() {\n                fn(\"loop\");\n                return this;\n            };\n            this.unloop = function() {\n                fn(\"unloop\");\n                return this;\n            };\n            this.setTime = function(time) {\n                fn(\"setTime\", time);\n                return this;\n            };\n            this.set = function(key, value) {\n                fn(\"set\", key, value);\n                return this;\n            };\n            this.bind = function(type, func) {\n                fn(\"bind\", type, func);\n                return this;\n            };\n            this.unbind = function(type) {\n                fn(\"unbind\", type);\n                return this;\n            };\n            this.bindOnce = function(type, func) {\n                fn(\"bindOnce\", type, func);\n                return this;\n            };\n            this.trigger = function(type) {\n                fn(\"trigger\", type);\n                return this;\n            };\n            this.fade = function(from, to, duration, callback) {\n                fn(\"fade\", from, to, duration, callback);\n                return this;\n            };\n            this.fadeIn = function(duration, callback) {\n                fn(\"fadeIn\", duration, callback);\n                return this;\n            };\n            this.fadeOut = function(duration, callback) {\n                fn(\"fadeOut\", duration, callback);\n                return this;\n            };\n            function fn() {\n                var args = argsToArray(null, arguments), func = args.shift();\n                for (var i = 0; i < sounds.length; i++) {\n                    sounds[i][func].apply(sounds[i], args);\n                }\n            }\n            function argsToArray(array, args) {\n                return array instanceof Array ? array : Array.prototype.slice.call(args);\n            }\n        },\n        all: function() {\n            return new buzz.group(buzz.sounds);\n        },\n        isSupported: function() {\n            return !!buzz.el.canPlayType;\n        },\n        isOGGSupported: function() {\n            return !!buzz.el.canPlayType && buzz.el.canPlayType('audio/ogg; codecs=\"vorbis\"');\n        },\n        isWAVSupported: function() {\n            return !!buzz.el.canPlayType && buzz.el.canPlayType('audio/wav; codecs=\"1\"');\n        },\n        isMP3Supported: function() {\n            return !!buzz.el.canPlayType && buzz.el.canPlayType(\"audio/mpeg;\");\n        },\n        isAACSupported: function() {\n            return !!buzz.el.canPlayType && (buzz.el.canPlayType(\"audio/x-m4a;\") || buzz.el.canPlayType(\"audio/aac;\"));\n        },\n        toTimer: function(time, withHours) {\n            var h, m, s;\n            h = Math.floor(time / 3600);\n            h = isNaN(h) ? \"--\" : h >= 10 ? h : \"0\" + h;\n            m = withHours ? Math.floor(time / 60 % 60) : Math.floor(time / 60);\n            m = isNaN(m) ? \"--\" : m >= 10 ? m : \"0\" + m;\n            s = Math.floor(time % 60);\n            s = isNaN(s) ? \"--\" : s >= 10 ? s : \"0\" + s;\n            return withHours ? h + \":\" + m + \":\" + s : m + \":\" + s;\n        },\n        fromTimer: function(time) {\n            var splits = time.toString().split(\":\");\n            if (splits && splits.length == 3) {\n                time = parseInt(splits[0], 10) * 3600 + parseInt(splits[1], 10) * 60 + parseInt(splits[2], 10);\n            }\n            if (splits && splits.length == 2) {\n                time = parseInt(splits[0], 10) * 60 + parseInt(splits[1], 10);\n            }\n            return time;\n        },\n        toPercent: function(value, total, decimal) {\n            var r = Math.pow(10, decimal || 0);\n            return Math.round(value * 100 / total * r) / r;\n        },\n        fromPercent: function(percent, total, decimal) {\n            var r = Math.pow(10, decimal || 0);\n            return Math.round(total / 100 * percent * r) / r;\n        }\n    };\n    return buzz;\n});","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/html/html.js":{"id":12,"canonicalName":"src/components/html/html.js","code":"(function () {\n    var Drawable, GStimulus, HMixResp, HMixStim, Html, HtmlMixin, HtmlResponse, HtmlStimulus, Mixen, Response, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    GStimulus = require('8', module).GraphicalStimulus;\n    Drawable = require('8', module).Drawable;\n    Response = require('8', module).Response;\n    Mixen = require('36', module);\n    HtmlMixin = function () {\n        HtmlMixin.prototype.tag = 'div';\n        HtmlMixin.prototype.div = function () {\n            return $(document.createElement('div'));\n        };\n        function HtmlMixin() {\n            this.el = document.createElement(this.tag);\n            this.el = $(this.el);\n        }\n        HtmlMixin.prototype.positionElement = function (el, x, y) {\n            return el.css({\n                position: 'absolute',\n                left: x,\n                top: y\n            });\n        };\n        HtmlMixin.prototype.centerElement = function (el) {\n            return el.css({\n                margin: '0 auto',\n                position: 'absolute',\n                left: '50%',\n                top: '50%'\n            });\n        };\n        return HtmlMixin;\n    }();\n    HMixStim = Mixen(HtmlMixin, GStimulus);\n    HMixResp = Mixen(HtmlMixin, Response);\n    HtmlStimulus = function (_super) {\n        __extends(HtmlStimulus, _super);\n        function HtmlStimulus(spec) {\n            HtmlStimulus.__super__.constructor.call(this, spec);\n        }\n        HtmlStimulus.prototype.presentable = function (element) {\n            return new (function (_super1) {\n                __extends(_Class, _super1);\n                function _Class(element) {\n                    this.element = element;\n                }\n                _Class.prototype.x = function () {\n                    return this.element.position().left;\n                };\n                _Class.prototype.y = function () {\n                    return this.element.position().top;\n                };\n                _Class.prototype.width = function () {\n                    return this.element.width();\n                };\n                _Class.prototype.height = function () {\n                    return this.element.height();\n                };\n                _Class.prototype.present = function (context) {\n                    return this.element.show();\n                };\n                return _Class;\n            }(Drawable))(element);\n        };\n        HtmlStimulus.prototype.render = function (context) {\n            var coords;\n            console.log('rendering html stimulus', this.name);\n            this.el.hide();\n            context.appendHtml(this.el);\n            console.log('@spec.position', this.spec.position);\n            console.log('@spec.x', this.spec.x);\n            console.log('@spec.y', this.spec.y);\n            console.log('@el width', this.el.width());\n            console.log('@el height', this.el.height());\n            coords = this.computeCoordinates(context, this.spec.position, this.el.width(), this.el.height());\n            console.log('coords', coords);\n            this.positionElement(this.el, coords[0], coords[1]);\n            return this.presentable(this.el);\n        };\n        return HtmlStimulus;\n    }(HMixStim);\n    HtmlResponse = function (_super) {\n        __extends(HtmlResponse, _super);\n        function HtmlResponse() {\n            HtmlResponse.__super__.constructor.apply(this, arguments);\n        }\n        return HtmlResponse;\n    }(HMixResp);\n    exports.HtmlStimulus = HtmlStimulus;\n    exports.HtmlResponse = HtmlResponse;\n    Html = {};\n    Html.HtmlButton = require('37', module).HtmlButton;\n    Html.HtmlLink = require('38', module).HtmlLink;\n    Html.HtmlLabel = require('39', module).HtmlLabel;\n    Html.HtmlIcon = require('40', module).HtmlIcon;\n    Html.Instructions = require('41', module).Instructions;\n    Html.Markdown = require('42', module).Markdown;\n    Html.Message = require('43', module).Message;\n    Html.Page = require('44', module).Page;\n    Html.HtmlResponse = HtmlResponse;\n    Html.HtmlStimulus = HtmlStimulus;\n    exports.Html = Html;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/html/html.js\"],\"names\":[\"Drawable\",\"GStimulus\",\"HMixResp\",\"HMixStim\",\"Html\",\"HtmlMixin\",\"HtmlResponse\",\"HtmlStimulus\",\"Mixen\",\"Response\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"GraphicalStimulus\",\"tag\",\"div\",\"$\",\"document\",\"createElement\",\"el\",\"positionElement\",\"x\",\"y\",\"css\",\"position\",\"left\",\"top\",\"centerElement\",\"margin\",\"_super\",\"spec\",\"presentable\",\"element\",\"_super1\",\"_Class\",\"width\",\"height\",\"present\",\"context\",\"show\",\"render\",\"coords\",\"console\",\"log\",\"name\",\"hide\",\"appendHtml\",\"computeCoordinates\",\"apply\",\"arguments\",\"exports\",\"HtmlButton\",\"HtmlLink\",\"HtmlLabel\",\"HtmlIcon\",\"Instructions\",\"Markdown\",\"Message\",\"Page\"],\"mappings\":\"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\"}","lineCount":114,"mtime":1392953009000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/mixen/mixen.js","canonicalName":"node_modules/mixen/mixen.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/html/htmlbutton.js","canonicalName":"src/components/html/htmlbutton.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/html/htmllink.js","canonicalName":"src/components/html/htmllink.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/html/htmllabel.js","canonicalName":"src/components/html/htmllabel.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/html/htmlicon.js","canonicalName":"src/components/html/htmlicon.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/html/instructions.js","canonicalName":"src/components/html/instructions.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/html/markdown.js","canonicalName":"src/components/html/markdown.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/html/message.js","canonicalName":"src/components/html/message.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/html/page.js","canonicalName":"src/components/html/page.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.7.1\n(function() {\n  var Drawable, GStimulus, HMixResp, HMixStim, Html, HtmlMixin, HtmlResponse, HtmlStimulus, Mixen, Response,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  GStimulus = require(\"../../stimresp\").GraphicalStimulus;\n\n  Drawable = require(\"../../stimresp\").Drawable;\n\n  Response = require(\"../../stimresp\").Response;\n\n  Mixen = require(\"mixen\");\n\n  HtmlMixin = (function() {\n    HtmlMixin.prototype.tag = \"div\";\n\n    HtmlMixin.prototype.div = function() {\n      return $(document.createElement(\"div\"));\n    };\n\n    function HtmlMixin() {\n      this.el = document.createElement(this.tag);\n      this.el = $(this.el);\n    }\n\n    HtmlMixin.prototype.positionElement = function(el, x, y) {\n      return el.css({\n        position: \"absolute\",\n        left: x,\n        top: y\n      });\n    };\n\n    HtmlMixin.prototype.centerElement = function(el) {\n      return el.css({\n        margin: \"0 auto\",\n        position: \"absolute\",\n        left: \"50%\",\n        top: \"50%\"\n      });\n    };\n\n    return HtmlMixin;\n\n  })();\n\n  HMixStim = Mixen(HtmlMixin, GStimulus);\n\n  HMixResp = Mixen(HtmlMixin, Response);\n\n  HtmlStimulus = (function(_super) {\n    __extends(HtmlStimulus, _super);\n\n    function HtmlStimulus(spec) {\n      HtmlStimulus.__super__.constructor.call(this, spec);\n    }\n\n    HtmlStimulus.prototype.presentable = function(element) {\n      return new ((function(_super1) {\n        __extends(_Class, _super1);\n\n        function _Class(element) {\n          this.element = element;\n        }\n\n        _Class.prototype.x = function() {\n          return this.element.position().left;\n        };\n\n        _Class.prototype.y = function() {\n          return this.element.position().top;\n        };\n\n        _Class.prototype.width = function() {\n          return this.element.width();\n        };\n\n        _Class.prototype.height = function() {\n          return this.element.height();\n        };\n\n        _Class.prototype.present = function(context) {\n          return this.element.show();\n        };\n\n        return _Class;\n\n      })(Drawable))(element);\n    };\n\n    HtmlStimulus.prototype.render = function(context) {\n      var coords;\n      console.log(\"rendering html stimulus\", this.name);\n      this.el.hide();\n      context.appendHtml(this.el);\n      console.log(\"@spec.position\", this.spec.position);\n      console.log(\"@spec.x\", this.spec.x);\n      console.log(\"@spec.y\", this.spec.y);\n      console.log(\"@el width\", this.el.width());\n      console.log(\"@el height\", this.el.height());\n      coords = this.computeCoordinates(context, this.spec.position, this.el.width(), this.el.height());\n      console.log(\"coords\", coords);\n      this.positionElement(this.el, coords[0], coords[1]);\n      return this.presentable(this.el);\n    };\n\n    return HtmlStimulus;\n\n  })(HMixStim);\n\n  HtmlResponse = (function(_super) {\n    __extends(HtmlResponse, _super);\n\n    function HtmlResponse() {\n      HtmlResponse.__super__.constructor.apply(this, arguments);\n    }\n\n    return HtmlResponse;\n\n  })(HMixResp);\n\n  exports.HtmlStimulus = HtmlStimulus;\n\n  exports.HtmlResponse = HtmlResponse;\n\n  Html = {};\n\n  Html.HtmlButton = require(\"./htmlbutton\").HtmlButton;\n\n  Html.HtmlLink = require(\"./htmllink\").HtmlLink;\n\n  Html.HtmlLabel = require(\"./htmllabel\").HtmlLabel;\n\n  Html.HtmlIcon = require(\"./htmlicon\").HtmlIcon;\n\n  Html.Instructions = require(\"./instructions\").Instructions;\n\n  Html.Markdown = require(\"./markdown\").Markdown;\n\n  Html.Message = require(\"./message\").Message;\n\n  Html.Page = require(\"./page\").Page;\n\n  Html.HtmlResponse = HtmlResponse;\n\n  Html.HtmlStimulus = HtmlStimulus;\n\n  exports.Html = Html;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/html/page.js":{"id":44,"canonicalName":"src/components/html/page.js","code":"(function () {\n    var HtmlStimulus, Page, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    HtmlStimulus = require('12', module).HtmlStimulus;\n    Page = function (_super) {\n        __extends(Page, _super);\n        Page.prototype.defaults = { html: '<p>HTML Page</p>' };\n        function Page(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            Page.__super__.constructor.call(this, spec);\n            this.el.append(this.spec.html);\n        }\n        return Page;\n    }(HtmlStimulus);\n    exports.Page = Page;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/html/page.js\"],\"names\":[\"HtmlStimulus\",\"Page\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"defaults\",\"html\",\"spec\",\"el\",\"append\",\"exports\"],\"mappings\":\"AACA,CAAC,YAAW;AAAA,IACV,IAAIA,YAAJ,EAAkBC,IAAlB,EACEC,SAAA,GAAY,GAAGC,cADjB,EAEEC,SAAA,GAAY,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAA,YAAE,SAASC,GAAT,IAAgBD,MAAhB,EAAwB;AAAA,gBAAE,IAAIJ,SAAA,CAAUM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ;AAAA,oBAAiCF,KAAA,CAAME,GAAN,IAAaD,MAAA,CAAOC,GAAP,CAAb,CAAnC;AAAA,aAA1B;AAAA,YAAyF,SAASE,IAAT,GAAgB;AAAA,gBAAE,KAAKC,WAAL,GAAmBL,KAAnB,CAAF;AAAA,aAAzG;AAAA,YAAuII,IAAA,CAAKE,SAAL,GAAiBL,MAAA,CAAOK,SAAxB,CAAvI;AAAA,YAA0KN,KAAA,CAAMM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA1K;AAAA,YAAwMJ,KAAA,CAAMO,SAAN,GAAkBN,MAAA,CAAOK,SAAzB,CAAxM;AAAA,YAA4O,OAAON,KAAP,CAA5O;AAAA,SAFtC,CADU;AAAA,IAKVL,YAAA,GAAea,OAAA,C,IAAA,E,MAAA,EAAkBb,YAAjC,CALU;AAAA,IAOVC,IAAA,GAAQ,UAASa,MAAT,EAAiB;AAAA,QACvBV,SAAA,CAAUH,IAAV,EAAgBa,MAAhB,EADuB;AAAA,QAGvBb,IAAA,CAAKU,SAAL,CAAeI,QAAf,GAA0B,EACxBC,IAAA,EAAM,kBADkB,EAA1B,CAHuB;AAAA,QAOvB,SAASf,IAAT,CAAcgB,IAAd,EAAoB;AAAA,YAClB,IAAIA,IAAA,IAAQ,IAAZ,EAAkB;AAAA,gBAChBA,IAAA,GAAO,EAAP,CADgB;AAAA,aADA;AAAA,YAIlBhB,IAAA,CAAKW,SAAL,CAAeF,WAAf,CAA2BF,IAA3B,CAAgC,IAAhC,EAAsCS,IAAtC,EAJkB;AAAA,YAKlB,KAAKC,EAAL,CAAQC,MAAR,CAAe,KAAKF,IAAL,CAAUD,IAAzB,EALkB;AAAA,SAPG;AAAA,QAevB,OAAOf,IAAP,CAfuB;AAAA,KAAlB,CAiBJD,YAjBI,CAAP,CAPU;AAAA,IA0BVoB,OAAA,CAAQnB,IAAR,GAAeA,IAAf,CA1BU;AAAA,CAAZ,CA4BGO,IA5BH,CA4BQ,IA5BR\"}","lineCount":29,"mtime":1394019994000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/html/html.js","canonicalName":"src/components/html/html.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.7.1\n(function() {\n  var HtmlStimulus, Page,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  HtmlStimulus = require(\"./html\").HtmlStimulus;\n\n  Page = (function(_super) {\n    __extends(Page, _super);\n\n    Page.prototype.defaults = {\n      html: \"<p>HTML Page</p>\"\n    };\n\n    function Page(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      Page.__super__.constructor.call(this, spec);\n      this.el.append(this.spec.html);\n    }\n\n    return Page;\n\n  })(HtmlStimulus);\n\n  exports.Page = Page;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/html/message.js":{"id":43,"canonicalName":"src/components/html/message.js","code":"(function () {\n    var Message, html, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    html = require('12', module);\n    Message = function (_super) {\n        __extends(Message, _super);\n        Message.prototype.defaults = {\n            title: 'Message!',\n            content: 'your content here',\n            color: '',\n            size: 'large'\n        };\n        function Message(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            Message.__super__.constructor.call(this, spec);\n            this.el.addClass(this.messageClass());\n            this.title = $('<div>' + this.spec.title + '</div>').addClass('header');\n            this.content = $('<p>' + this.spec.content + '</p>');\n            this.el.append(this.title);\n            this.el.append(this.content);\n        }\n        Message.prototype.messageClass = function () {\n            return 'ui message ' + this.spec.color + ' ' + this.spec.size;\n        };\n        return Message;\n    }(html.HtmlStimulus);\n    exports.Message = Message;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/html/message.js\"],\"names\":[\"Message\",\"html\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"defaults\",\"title\",\"content\",\"color\",\"size\",\"spec\",\"el\",\"addClass\",\"messageClass\",\"$\",\"append\",\"HtmlStimulus\",\"exports\"],\"mappings\":\"AACA,CAAC,YAAW;AAAA,IACV,IAAIA,OAAJ,EAAaC,IAAb,EACEC,SAAA,GAAY,GAAGC,cADjB,EAEEC,SAAA,GAAY,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAA,YAAE,SAASC,GAAT,IAAgBD,MAAhB,EAAwB;AAAA,gBAAE,IAAIJ,SAAA,CAAUM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ;AAAA,oBAAiCF,KAAA,CAAME,GAAN,IAAaD,MAAA,CAAOC,GAAP,CAAb,CAAnC;AAAA,aAA1B;AAAA,YAAyF,SAASE,IAAT,GAAgB;AAAA,gBAAE,KAAKC,WAAL,GAAmBL,KAAnB,CAAF;AAAA,aAAzG;AAAA,YAAuII,IAAA,CAAKE,SAAL,GAAiBL,MAAA,CAAOK,SAAxB,CAAvI;AAAA,YAA0KN,KAAA,CAAMM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA1K;AAAA,YAAwMJ,KAAA,CAAMO,SAAN,GAAkBN,MAAA,CAAOK,SAAzB,CAAxM;AAAA,YAA4O,OAAON,KAAP,CAA5O;AAAA,SAFtC,CADU;AAAA,IAKVJ,IAAA,GAAOY,OAAA,C,IAAA,E,MAAA,CAAP,CALU;AAAA,IAOVb,OAAA,GAAW,UAASc,MAAT,EAAiB;AAAA,QAC1BV,SAAA,CAAUJ,OAAV,EAAmBc,MAAnB,EAD0B;AAAA,QAG1Bd,OAAA,CAAQW,SAAR,CAAkBI,QAAlB,GAA6B;AAAA,YAC3BC,KAAA,EAAO,UADoB;AAAA,YAE3BC,OAAA,EAAS,mBAFkB;AAAA,YAG3BC,KAAA,EAAO,EAHoB;AAAA,YAI3BC,IAAA,EAAM,OAJqB;AAAA,SAA7B,CAH0B;AAAA,QAU1B,SAASnB,OAAT,CAAiBoB,IAAjB,EAAuB;AAAA,YACrB,IAAIA,IAAA,IAAQ,IAAZ,EAAkB;AAAA,gBAChBA,IAAA,GAAO,EAAP,CADgB;AAAA,aADG;AAAA,YAIrBpB,OAAA,CAAQY,SAAR,CAAkBF,WAAlB,CAA8BF,IAA9B,CAAmC,IAAnC,EAAyCY,IAAzC,EAJqB;AAAA,YAKrB,KAAKC,EAAL,CAAQC,QAAR,CAAiB,KAAKC,YAAL,EAAjB,EALqB;AAAA,YAMrB,KAAKP,KAAL,GAAaQ,CAAA,CAAE,UAAU,KAAKJ,IAAL,CAAUJ,KAApB,GAA4B,QAA9B,EAAwCM,QAAxC,CAAiD,QAAjD,CAAb,CANqB;AAAA,YAOrB,KAAKL,OAAL,GAAeO,CAAA,CAAE,QAAQ,KAAKJ,IAAL,CAAUH,OAAlB,GAA4B,MAA9B,CAAf,CAPqB;AAAA,YAQrB,KAAKI,EAAL,CAAQI,MAAR,CAAe,KAAKT,KAApB,EARqB;AAAA,YASrB,KAAKK,EAAL,CAAQI,MAAR,CAAe,KAAKR,OAApB,EATqB;AAAA,SAVG;AAAA,QAsB1BjB,OAAA,CAAQW,SAAR,CAAkBY,YAAlB,GAAiC,YAAW;AAAA,YAC1C,OAAO,gBAAgB,KAAKH,IAAL,CAAUF,KAA1B,GAAkC,GAAlC,GAAwC,KAAKE,IAAL,CAAUD,IAAzD,CAD0C;AAAA,SAA5C,CAtB0B;AAAA,QA0B1B,OAAOnB,OAAP,CA1B0B;AAAA,KAAlB,CA4BPC,IAAA,CAAKyB,YA5BE,CAAV,CAPU;AAAA,IAqCVC,OAAA,CAAQ3B,OAAR,GAAkBA,OAAlB,CArCU;AAAA,CAAZ,CAuCGQ,IAvCH,CAuCQ,IAvCR\"}","lineCount":41,"mtime":1390100825000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/html/html.js","canonicalName":"src/components/html/html.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.6.3\n(function() {\n  var Message, html,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  html = require(\"./html\");\n\n  Message = (function(_super) {\n    __extends(Message, _super);\n\n    Message.prototype.defaults = {\n      title: \"Message!\",\n      content: \"your content here\",\n      color: \"\",\n      size: \"large\"\n    };\n\n    function Message(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      Message.__super__.constructor.call(this, spec);\n      this.el.addClass(this.messageClass());\n      this.title = $(\"<div>\" + this.spec.title + \"</div>\").addClass(\"header\");\n      this.content = $(\"<p>\" + this.spec.content + \"</p>\");\n      this.el.append(this.title);\n      this.el.append(this.content);\n    }\n\n    Message.prototype.messageClass = function() {\n      return \"ui message \" + this.spec.color + \" \" + this.spec.size;\n    };\n\n    return Message;\n\n  })(html.HtmlStimulus);\n\n  exports.Message = Message;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/html/markdown.js":{"id":42,"canonicalName":"src/components/html/markdown.js","code":"(function () {\n    var Markdown, html, marked, _, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    html = require('12', module);\n    marked = require('45', module);\n    _ = require('16', module);\n    Markdown = function (_super) {\n        __extends(Markdown, _super);\n        function Markdown(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            Markdown.__super__.constructor.call(this, spec);\n            if (_.isString(spec)) {\n                this.spec = {};\n                this.spec.x = 0;\n                this.spec.y = 0;\n                this.spec.content = spec;\n            }\n            if (this.spec.url != null) {\n                $.ajax({\n                    url: this.spec.url,\n                    success: function (_this) {\n                        return function (result) {\n                            _this.spec.content = result;\n                            return _this.el.append(marked(_this.spec.content));\n                        };\n                    }(this),\n                    error: function (_this) {\n                        return function (result) {\n                            return console.log('ajax failure', result);\n                        };\n                    }(this)\n                });\n            } else {\n                this.el.append($(marked(this.spec.content)));\n            }\n            this.el.addClass('markdown');\n        }\n        return Markdown;\n    }(html.HtmlStimulus);\n    exports.Markdown = Markdown;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/html/markdown.js\"],\"names\":[\"Markdown\",\"html\",\"marked\",\"_\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"spec\",\"isString\",\"x\",\"y\",\"content\",\"url\",\"$\",\"ajax\",\"success\",\"_this\",\"result\",\"el\",\"append\",\"error\",\"console\",\"log\",\"addClass\",\"HtmlStimulus\",\"exports\"],\"mappings\":\"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\"}","lineCount":54,"mtime":1394019910000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/html/html.js","canonicalName":"src/components/html/html.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/marked/lib/marked.js","canonicalName":"node_modules/marked/lib/marked.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.7.1\n(function() {\n  var Markdown, html, marked, _,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  html = require(\"./html\");\n\n  marked = require(\"marked\");\n\n  _ = require('lodash');\n\n  Markdown = (function(_super) {\n    __extends(Markdown, _super);\n\n    function Markdown(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      Markdown.__super__.constructor.call(this, spec);\n      if (_.isString(spec)) {\n        this.spec = {};\n        this.spec.x = 0;\n        this.spec.y = 0;\n        this.spec.content = spec;\n      }\n      if (this.spec.url != null) {\n        $.ajax({\n          url: this.spec.url,\n          success: (function(_this) {\n            return function(result) {\n              _this.spec.content = result;\n              return _this.el.append(marked(_this.spec.content));\n            };\n          })(this),\n          error: (function(_this) {\n            return function(result) {\n              return console.log(\"ajax failure\", result);\n            };\n          })(this)\n        });\n      } else {\n        this.el.append($(marked(this.spec.content)));\n      }\n      this.el.addClass(\"markdown\");\n    }\n\n    return Markdown;\n\n  })(html.HtmlStimulus);\n\n  exports.Markdown = Markdown;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/node_modules/marked/lib/marked.js":{"id":45,"canonicalName":"node_modules/marked/lib/marked.js","code":";\n(function () {\n    var block = {\n            newline: /^\\n+/,\n            code: /^( {4}[^\\n]+\\n*)+/,\n            fences: noop,\n            hr: /^( *[-*_]){3,} *(?:\\n+|$)/,\n            heading: /^ *(#{1,6}) *([^\\n]+?) *#* *(?:\\n+|$)/,\n            nptable: noop,\n            lheading: /^([^\\n]+)\\n *(=|-){2,} *(?:\\n+|$)/,\n            blockquote: /^( *>[^\\n]+(\\n[^\\n]+)*\\n*)+/,\n            list: /^( *)(bull) [\\s\\S]+?(?:hr|\\n{2,}(?! )(?!\\1bull )\\n*|\\s*$)/,\n            html: /^ *(?:comment|closed|closing) *(?:\\n{2,}|\\s*$)/,\n            def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +[\"(]([^\\n]+)[\")])? *(?:\\n+|$)/,\n            table: noop,\n            paragraph: /^((?:[^\\n]+\\n?(?!hr|heading|lheading|blockquote|tag|def))+)\\n*/,\n            text: /^[^\\n]+/\n        };\n    block.bullet = /(?:[*+-]|\\d+\\.)/;\n    block.item = /^( *)(bull) [^\\n]*(?:\\n(?!\\1bull )[^\\n]*)*/;\n    block.item = replace(block.item, 'gm')(/bull/g, block.bullet)();\n    block.list = replace(block.list)(/bull/g, block.bullet)('hr', /\\n+(?=(?: *[-*_]){3,} *(?:\\n+|$))/)();\n    block._tag = '(?!(?:' + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code' + '|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo' + '|span|br|wbr|ins|del|img)\\\\b)\\\\w+(?!:/|@)\\\\b';\n    block.html = replace(block.html)('comment', /<!--[\\s\\S]*?-->/)('closed', /<(tag)[\\s\\S]+?<\\/\\1>/)('closing', /<tag(?:\"[^\"]*\"|'[^']*'|[^'\">])*?>/)(/tag/g, block._tag)();\n    block.paragraph = replace(block.paragraph)('hr', block.hr)('heading', block.heading)('lheading', block.lheading)('blockquote', block.blockquote)('tag', '<' + block._tag)('def', block.def)();\n    block.normal = merge({}, block);\n    block.gfm = merge({}, block.normal, {\n        fences: /^ *(`{3,}|~{3,}) *(\\S+)? *\\n([\\s\\S]+?)\\s*\\1 *(?:\\n+|$)/,\n        paragraph: /^/\n    });\n    block.gfm.paragraph = replace(block.paragraph)('(?!', '(?!' + block.gfm.fences.source.replace('\\\\1', '\\\\2') + '|' + block.list.source.replace('\\\\1', '\\\\3') + '|')();\n    block.tables = merge({}, block.gfm, {\n        nptable: /^ *(\\S.*\\|.*)\\n *([-:]+ *\\|[-| :]*)\\n((?:.*\\|.*(?:\\n|$))*)\\n*/,\n        table: /^ *\\|(.+)\\n *\\|( *[-:]+[-| :]*)\\n((?: *\\|.*(?:\\n|$))*)\\n*/\n    });\n    function Lexer(options) {\n        this.tokens = [];\n        this.tokens.links = {};\n        this.options = options || marked.defaults;\n        this.rules = block.normal;\n        if (this.options.gfm) {\n            if (this.options.tables) {\n                this.rules = block.tables;\n            } else {\n                this.rules = block.gfm;\n            }\n        }\n    }\n    Lexer.rules = block;\n    Lexer.lex = function (src, options) {\n        var lexer = new Lexer(options);\n        return lexer.lex(src);\n    };\n    Lexer.prototype.lex = function (src) {\n        src = src.replace(/\\r\\n|\\r/g, '\\n').replace(/\\t/g, '    ').replace(/\\u00a0/g, ' ').replace(/\\u2424/g, '\\n');\n        return this.token(src, true);\n    };\n    Lexer.prototype.token = function (src, top) {\n        var src = src.replace(/^ +$/gm, ''), next, loose, cap, bull, b, item, space, i, l;\n        while (src) {\n            if (cap = this.rules.newline.exec(src)) {\n                src = src.substring(cap[0].length);\n                if (cap[0].length > 1) {\n                    this.tokens.push({ type: 'space' });\n                }\n            }\n            if (cap = this.rules.code.exec(src)) {\n                src = src.substring(cap[0].length);\n                cap = cap[0].replace(/^ {4}/gm, '');\n                this.tokens.push({\n                    type: 'code',\n                    text: !this.options.pedantic ? cap.replace(/\\n+$/, '') : cap\n                });\n                continue;\n            }\n            if (cap = this.rules.fences.exec(src)) {\n                src = src.substring(cap[0].length);\n                this.tokens.push({\n                    type: 'code',\n                    lang: cap[2],\n                    text: cap[3]\n                });\n                continue;\n            }\n            if (cap = this.rules.heading.exec(src)) {\n                src = src.substring(cap[0].length);\n                this.tokens.push({\n                    type: 'heading',\n                    depth: cap[1].length,\n                    text: cap[2]\n                });\n                continue;\n            }\n            if (top && (cap = this.rules.nptable.exec(src))) {\n                src = src.substring(cap[0].length);\n                item = {\n                    type: 'table',\n                    header: cap[1].replace(/^ *| *\\| *$/g, '').split(/ *\\| */),\n                    align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n                    cells: cap[3].replace(/\\n$/, '').split('\\n')\n                };\n                for (i = 0; i < item.align.length; i++) {\n                    if (/^ *-+: *$/.test(item.align[i])) {\n                        item.align[i] = 'right';\n                    } else if (/^ *:-+: *$/.test(item.align[i])) {\n                        item.align[i] = 'center';\n                    } else if (/^ *:-+ *$/.test(item.align[i])) {\n                        item.align[i] = 'left';\n                    } else {\n                        item.align[i] = null;\n                    }\n                }\n                for (i = 0; i < item.cells.length; i++) {\n                    item.cells[i] = item.cells[i].split(/ *\\| */);\n                }\n                this.tokens.push(item);\n                continue;\n            }\n            if (cap = this.rules.lheading.exec(src)) {\n                src = src.substring(cap[0].length);\n                this.tokens.push({\n                    type: 'heading',\n                    depth: cap[2] === '=' ? 1 : 2,\n                    text: cap[1]\n                });\n                continue;\n            }\n            if (cap = this.rules.hr.exec(src)) {\n                src = src.substring(cap[0].length);\n                this.tokens.push({ type: 'hr' });\n                continue;\n            }\n            if (cap = this.rules.blockquote.exec(src)) {\n                src = src.substring(cap[0].length);\n                this.tokens.push({ type: 'blockquote_start' });\n                cap = cap[0].replace(/^ *> ?/gm, '');\n                this.token(cap, top);\n                this.tokens.push({ type: 'blockquote_end' });\n                continue;\n            }\n            if (cap = this.rules.list.exec(src)) {\n                src = src.substring(cap[0].length);\n                bull = cap[2];\n                this.tokens.push({\n                    type: 'list_start',\n                    ordered: bull.length > 1\n                });\n                cap = cap[0].match(this.rules.item);\n                next = false;\n                l = cap.length;\n                i = 0;\n                for (; i < l; i++) {\n                    item = cap[i];\n                    space = item.length;\n                    item = item.replace(/^ *([*+-]|\\d+\\.) +/, '');\n                    if (~item.indexOf('\\n ')) {\n                        space -= item.length;\n                        item = !this.options.pedantic ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '') : item.replace(/^ {1,4}/gm, '');\n                    }\n                    if (this.options.smartLists && i !== l - 1) {\n                        b = block.bullet.exec(cap[i + 1])[0];\n                        if (bull !== b && !(bull.length > 1 && b.length > 1)) {\n                            src = cap.slice(i + 1).join('\\n') + src;\n                            i = l - 1;\n                        }\n                    }\n                    loose = next || /\\n\\n(?!\\s*$)/.test(item);\n                    if (i !== l - 1) {\n                        next = item.charAt(item.length - 1) === '\\n';\n                        if (!loose)\n                            loose = next;\n                    }\n                    this.tokens.push({ type: loose ? 'loose_item_start' : 'list_item_start' });\n                    this.token(item, false);\n                    this.tokens.push({ type: 'list_item_end' });\n                }\n                this.tokens.push({ type: 'list_end' });\n                continue;\n            }\n            if (cap = this.rules.html.exec(src)) {\n                src = src.substring(cap[0].length);\n                this.tokens.push({\n                    type: this.options.sanitize ? 'paragraph' : 'html',\n                    pre: cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style',\n                    text: cap[0]\n                });\n                continue;\n            }\n            if (top && (cap = this.rules.def.exec(src))) {\n                src = src.substring(cap[0].length);\n                this.tokens.links[cap[1].toLowerCase()] = {\n                    href: cap[2],\n                    title: cap[3]\n                };\n                continue;\n            }\n            if (top && (cap = this.rules.table.exec(src))) {\n                src = src.substring(cap[0].length);\n                item = {\n                    type: 'table',\n                    header: cap[1].replace(/^ *| *\\| *$/g, '').split(/ *\\| */),\n                    align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n                    cells: cap[3].replace(/(?: *\\| *)?\\n$/, '').split('\\n')\n                };\n                for (i = 0; i < item.align.length; i++) {\n                    if (/^ *-+: *$/.test(item.align[i])) {\n                        item.align[i] = 'right';\n                    } else if (/^ *:-+: *$/.test(item.align[i])) {\n                        item.align[i] = 'center';\n                    } else if (/^ *:-+ *$/.test(item.align[i])) {\n                        item.align[i] = 'left';\n                    } else {\n                        item.align[i] = null;\n                    }\n                }\n                for (i = 0; i < item.cells.length; i++) {\n                    item.cells[i] = item.cells[i].replace(/^ *\\| *| *\\| *$/g, '').split(/ *\\| */);\n                }\n                this.tokens.push(item);\n                continue;\n            }\n            if (top && (cap = this.rules.paragraph.exec(src))) {\n                src = src.substring(cap[0].length);\n                this.tokens.push({\n                    type: 'paragraph',\n                    text: cap[1].charAt(cap[1].length - 1) === '\\n' ? cap[1].slice(0, -1) : cap[1]\n                });\n                continue;\n            }\n            if (cap = this.rules.text.exec(src)) {\n                src = src.substring(cap[0].length);\n                this.tokens.push({\n                    type: 'text',\n                    text: cap[0]\n                });\n                continue;\n            }\n            if (src) {\n                throw new Error('Infinite loop on byte: ' + src.charCodeAt(0));\n            }\n        }\n        return this.tokens;\n    };\n    var inline = {\n            escape: /^\\\\([\\\\`*{}\\[\\]()#+\\-.!_>])/,\n            autolink: /^<([^ >]+(@|:\\/)[^ >]+)>/,\n            url: noop,\n            tag: /^<!--[\\s\\S]*?-->|^<\\/?\\w+(?:\"[^\"]*\"|'[^']*'|[^'\">])*?>/,\n            link: /^!?\\[(inside)\\]\\(href\\)/,\n            reflink: /^!?\\[(inside)\\]\\s*\\[([^\\]]*)\\]/,\n            nolink: /^!?\\[((?:\\[[^\\]]*\\]|[^\\[\\]])*)\\]/,\n            strong: /^__([\\s\\S]+?)__(?!_)|^\\*\\*([\\s\\S]+?)\\*\\*(?!\\*)/,\n            em: /^\\b_((?:__|[\\s\\S])+?)_\\b|^\\*((?:\\*\\*|[\\s\\S])+?)\\*(?!\\*)/,\n            code: /^(`+)\\s*([\\s\\S]*?[^`])\\s*\\1(?!`)/,\n            br: /^ {2,}\\n(?!\\s*$)/,\n            del: noop,\n            text: /^[\\s\\S]+?(?=[\\\\<!\\[_*`]| {2,}\\n|$)/\n        };\n    inline._inside = /(?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*/;\n    inline._href = /\\s*<?([\\s\\S]*?)>?(?:\\s+['\"]([\\s\\S]*?)['\"])?\\s*/;\n    inline.link = replace(inline.link)('inside', inline._inside)('href', inline._href)();\n    inline.reflink = replace(inline.reflink)('inside', inline._inside)();\n    inline.normal = merge({}, inline);\n    inline.pedantic = merge({}, inline.normal, {\n        strong: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n        em: /^_(?=\\S)([\\s\\S]*?\\S)_(?!_)|^\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)/\n    });\n    inline.gfm = merge({}, inline.normal, {\n        escape: replace(inline.escape)('])', '~|])')(),\n        url: /^(https?:\\/\\/[^\\s<]+[^<.,:;\"')\\]\\s])/,\n        del: /^~~(?=\\S)([\\s\\S]*?\\S)~~/,\n        text: replace(inline.text)(']|', '~]|')('|', '|https?://|')()\n    });\n    inline.breaks = merge({}, inline.gfm, {\n        br: replace(inline.br)('{2,}', '*')(),\n        text: replace(inline.gfm.text)('{2,}', '*')()\n    });\n    function InlineLexer(links, options) {\n        this.options = options || marked.defaults;\n        this.links = links;\n        this.rules = inline.normal;\n        this.renderer = this.options.renderer || new Renderer();\n        if (!this.links) {\n            throw new Error('Tokens array requires a `links` property.');\n        }\n        if (this.options.gfm) {\n            if (this.options.breaks) {\n                this.rules = inline.breaks;\n            } else {\n                this.rules = inline.gfm;\n            }\n        } else if (this.options.pedantic) {\n            this.rules = inline.pedantic;\n        }\n    }\n    InlineLexer.rules = inline;\n    InlineLexer.output = function (src, links, options) {\n        var inline = new InlineLexer(links, options);\n        return inline.output(src);\n    };\n    InlineLexer.prototype.output = function (src) {\n        var out = '', link, text, href, cap;\n        while (src) {\n            if (cap = this.rules.escape.exec(src)) {\n                src = src.substring(cap[0].length);\n                out += cap[1];\n                continue;\n            }\n            if (cap = this.rules.autolink.exec(src)) {\n                src = src.substring(cap[0].length);\n                if (cap[2] === '@') {\n                    text = cap[1].charAt(6) === ':' ? this.mangle(cap[1].substring(7)) : this.mangle(cap[1]);\n                    href = this.mangle('mailto:') + text;\n                } else {\n                    text = escape(cap[1]);\n                    href = text;\n                }\n                out += this.renderer.link(href, null, text);\n                continue;\n            }\n            if (cap = this.rules.url.exec(src)) {\n                src = src.substring(cap[0].length);\n                text = escape(cap[1]);\n                href = text;\n                out += this.renderer.link(href, null, text);\n                continue;\n            }\n            if (cap = this.rules.tag.exec(src)) {\n                src = src.substring(cap[0].length);\n                out += this.options.sanitize ? escape(cap[0]) : cap[0];\n                continue;\n            }\n            if (cap = this.rules.link.exec(src)) {\n                src = src.substring(cap[0].length);\n                out += this.outputLink(cap, {\n                    href: cap[2],\n                    title: cap[3]\n                });\n                continue;\n            }\n            if ((cap = this.rules.reflink.exec(src)) || (cap = this.rules.nolink.exec(src))) {\n                src = src.substring(cap[0].length);\n                link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n                link = this.links[link.toLowerCase()];\n                if (!link || !link.href) {\n                    out += cap[0].charAt(0);\n                    src = cap[0].substring(1) + src;\n                    continue;\n                }\n                out += this.outputLink(cap, link);\n                continue;\n            }\n            if (cap = this.rules.strong.exec(src)) {\n                src = src.substring(cap[0].length);\n                out += this.renderer.strong(this.output(cap[2] || cap[1]));\n                continue;\n            }\n            if (cap = this.rules.em.exec(src)) {\n                src = src.substring(cap[0].length);\n                out += this.renderer.em(this.output(cap[2] || cap[1]));\n                continue;\n            }\n            if (cap = this.rules.code.exec(src)) {\n                src = src.substring(cap[0].length);\n                out += this.renderer.codespan(escape(cap[2], true));\n                continue;\n            }\n            if (cap = this.rules.br.exec(src)) {\n                src = src.substring(cap[0].length);\n                out += this.renderer.br();\n                continue;\n            }\n            if (cap = this.rules.del.exec(src)) {\n                src = src.substring(cap[0].length);\n                out += this.renderer.del(this.output(cap[1]));\n                continue;\n            }\n            if (cap = this.rules.text.exec(src)) {\n                src = src.substring(cap[0].length);\n                out += escape(this.smartypants(cap[0]));\n                continue;\n            }\n            if (src) {\n                throw new Error('Infinite loop on byte: ' + src.charCodeAt(0));\n            }\n        }\n        return out;\n    };\n    InlineLexer.prototype.outputLink = function (cap, link) {\n        var href = escape(link.href), title = link.title ? escape(link.title) : null;\n        return cap[0].charAt(0) !== '!' ? this.renderer.link(href, title, this.output(cap[1])) : this.renderer.image(href, title, escape(cap[1]));\n    };\n    InlineLexer.prototype.smartypants = function (text) {\n        if (!this.options.smartypants)\n            return text;\n        return text.replace(/--/g, '\\u2014').replace(/(^|[-\\u2014/(\\[{\"\\s])'/g, '$1\\u2018').replace(/'/g, '\\u2019').replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g, '$1\\u201c').replace(/\"/g, '\\u201d').replace(/\\.{3}/g, '\\u2026');\n    };\n    InlineLexer.prototype.mangle = function (text) {\n        var out = '', l = text.length, i = 0, ch;\n        for (; i < l; i++) {\n            ch = text.charCodeAt(i);\n            if (Math.random() > 0.5) {\n                ch = 'x' + ch.toString(16);\n            }\n            out += '&#' + ch + ';';\n        }\n        return out;\n    };\n    function Renderer() {\n    }\n    Renderer.prototype.code = function (code, lang, escaped, options) {\n        options = options || {};\n        if (options.highlight) {\n            var out = options.highlight(code, lang);\n            if (out != null && out !== code) {\n                escaped = true;\n                code = out;\n            }\n        }\n        if (!lang) {\n            return '<pre><code>' + (escaped ? code : escape(code, true)) + '\\n</code></pre>';\n        }\n        return '<pre><code class=\"' + options.langPrefix + lang + '\">' + (escaped ? code : escape(code)) + '\\n</code></pre>\\n';\n    };\n    Renderer.prototype.blockquote = function (quote) {\n        return '<blockquote>\\n' + quote + '</blockquote>\\n';\n    };\n    Renderer.prototype.html = function (html) {\n        return html;\n    };\n    Renderer.prototype.heading = function (text, level, raw, options) {\n        return '<h' + level + ' id=\"' + options.headerPrefix + raw.toLowerCase().replace(/[^\\w]+/g, '-') + '\">' + text + '</h' + level + '>\\n';\n    };\n    Renderer.prototype.hr = function () {\n        return '<hr>\\n';\n    };\n    Renderer.prototype.list = function (body, ordered) {\n        var type = ordered ? 'ol' : 'ul';\n        return '<' + type + '>\\n' + body + '</' + type + '>\\n';\n    };\n    Renderer.prototype.listitem = function (text) {\n        return '<li>' + text + '</li>\\n';\n    };\n    Renderer.prototype.paragraph = function (text) {\n        return '<p>' + text + '</p>\\n';\n    };\n    Renderer.prototype.table = function (header, body) {\n        return '<table>\\n' + '<thead>\\n' + header + '</thead>\\n' + '<tbody>\\n' + body + '</tbody>\\n' + '</table>\\n';\n    };\n    Renderer.prototype.tablerow = function (content) {\n        return '<tr>\\n' + content + '</tr>\\n';\n    };\n    Renderer.prototype.tablecell = function (content, flags) {\n        var type = flags.header ? 'th' : 'td';\n        var tag = flags.align ? '<' + type + ' style=\"text-align:' + flags.align + '\">' : '<' + type + '>';\n        return tag + content + '</' + type + '>\\n';\n    };\n    Renderer.prototype.strong = function (text) {\n        return '<strong>' + text + '</strong>';\n    };\n    Renderer.prototype.em = function (text) {\n        return '<em>' + text + '</em>';\n    };\n    Renderer.prototype.codespan = function (text) {\n        return '<code>' + text + '</code>';\n    };\n    Renderer.prototype.br = function () {\n        return '<br>';\n    };\n    Renderer.prototype.del = function (text) {\n        return '<del>' + text + '</del>';\n    };\n    Renderer.prototype.link = function (href, title, text) {\n        var out = '<a href=\"' + href + '\"';\n        if (title) {\n            out += ' title=\"' + title + '\"';\n        }\n        out += '>' + text + '</a>';\n        return out;\n    };\n    Renderer.prototype.image = function (href, title, text) {\n        var out = '<img src=\"' + href + '\" alt=\"' + text + '\"';\n        if (title) {\n            out += ' title=\"' + title + '\"';\n        }\n        out += '>';\n        return out;\n    };\n    function Parser(options) {\n        this.tokens = [];\n        this.token = null;\n        this.options = options || marked.defaults;\n        this.options.renderer = this.options.renderer || new Renderer();\n        this.renderer = this.options.renderer;\n    }\n    Parser.parse = function (src, options, renderer) {\n        var parser = new Parser(options, renderer);\n        return parser.parse(src);\n    };\n    Parser.prototype.parse = function (src) {\n        this.inline = new InlineLexer(src.links, this.options, this.renderer);\n        this.tokens = src.reverse();\n        var out = '';\n        while (this.next()) {\n            out += this.tok();\n        }\n        return out;\n    };\n    Parser.prototype.next = function () {\n        return this.token = this.tokens.pop();\n    };\n    Parser.prototype.peek = function () {\n        return this.tokens[this.tokens.length - 1] || 0;\n    };\n    Parser.prototype.parseText = function () {\n        var body = this.token.text;\n        while (this.peek().type === 'text') {\n            body += '\\n' + this.next().text;\n        }\n        return this.inline.output(body);\n    };\n    Parser.prototype.tok = function () {\n        switch (this.token.type) {\n        case 'space': {\n                return '';\n            }\n        case 'hr': {\n                return this.renderer.hr();\n            }\n        case 'heading': {\n                return this.renderer.heading(this.inline.output(this.token.text), this.token.depth, this.token.text, this.options);\n            }\n        case 'code': {\n                return this.renderer.code(this.token.text, this.token.lang, this.token.escaped, this.options);\n            }\n        case 'table': {\n                var header = '', body = '', i, row, cell, flags, j;\n                cell = '';\n                for (i = 0; i < this.token.header.length; i++) {\n                    flags = {\n                        header: true,\n                        align: this.token.align[i]\n                    };\n                    cell += this.renderer.tablecell(this.inline.output(this.token.header[i]), {\n                        header: true,\n                        align: this.token.align[i]\n                    });\n                }\n                header += this.renderer.tablerow(cell);\n                for (i = 0; i < this.token.cells.length; i++) {\n                    row = this.token.cells[i];\n                    cell = '';\n                    for (j = 0; j < row.length; j++) {\n                        cell += this.renderer.tablecell(this.inline.output(row[j]), {\n                            header: false,\n                            align: this.token.align[j]\n                        });\n                    }\n                    body += this.renderer.tablerow(cell);\n                }\n                return this.renderer.table(header, body);\n            }\n        case 'blockquote_start': {\n                var body = '';\n                while (this.next().type !== 'blockquote_end') {\n                    body += this.tok();\n                }\n                return this.renderer.blockquote(body);\n            }\n        case 'list_start': {\n                var body = '', ordered = this.token.ordered;\n                while (this.next().type !== 'list_end') {\n                    body += this.tok();\n                }\n                return this.renderer.list(body, ordered);\n            }\n        case 'list_item_start': {\n                var body = '';\n                while (this.next().type !== 'list_item_end') {\n                    body += this.token.type === 'text' ? this.parseText() : this.tok();\n                }\n                return this.renderer.listitem(body);\n            }\n        case 'loose_item_start': {\n                var body = '';\n                while (this.next().type !== 'list_item_end') {\n                    body += this.tok();\n                }\n                return this.renderer.listitem(body);\n            }\n        case 'html': {\n                var html = !this.token.pre && !this.options.pedantic ? this.inline.output(this.token.text) : this.token.text;\n                return this.renderer.html(html);\n            }\n        case 'paragraph': {\n                return this.renderer.paragraph(this.inline.output(this.token.text));\n            }\n        case 'text': {\n                return this.renderer.paragraph(this.parseText());\n            }\n        }\n    };\n    function escape(html, encode) {\n        return html.replace(!encode ? /&(?!#?\\w+;)/g : /&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;').replace(/'/g, '&#39;');\n    }\n    function replace(regex, opt) {\n        regex = regex.source;\n        opt = opt || '';\n        return function self(name, val) {\n            if (!name)\n                return new RegExp(regex, opt);\n            val = val.source || val;\n            val = val.replace(/(^|[^\\[])\\^/g, '$1');\n            regex = regex.replace(name, val);\n            return self;\n        };\n    }\n    function noop() {\n    }\n    noop.exec = noop;\n    function merge(obj) {\n        var i = 1, target, key;\n        for (; i < arguments.length; i++) {\n            target = arguments[i];\n            for (key in target) {\n                if (Object.prototype.hasOwnProperty.call(target, key)) {\n                    obj[key] = target[key];\n                }\n            }\n        }\n        return obj;\n    }\n    function marked(src, opt, callback) {\n        if (callback || typeof opt === 'function') {\n            if (!callback) {\n                callback = opt;\n                opt = null;\n            }\n            opt = merge({}, marked.defaults, opt || {});\n            var highlight = opt.highlight, tokens, pending, i = 0;\n            try {\n                tokens = Lexer.lex(src, opt);\n            } catch (e) {\n                return callback(e);\n            }\n            pending = tokens.length;\n            var done = function () {\n                var out, err;\n                try {\n                    out = Parser.parse(tokens, opt);\n                } catch (e) {\n                    err = e;\n                }\n                opt.highlight = highlight;\n                return err ? callback(err) : callback(null, out);\n            };\n            if (!highlight || highlight.length < 3) {\n                return done();\n            }\n            delete opt.highlight;\n            if (!pending)\n                return done();\n            for (; i < tokens.length; i++) {\n                (function (token) {\n                    if (token.type !== 'code') {\n                        return --pending || done();\n                    }\n                    return highlight(token.text, token.lang, function (err, code) {\n                        if (code == null || code === token.text) {\n                            return --pending || done();\n                        }\n                        token.text = code;\n                        token.escaped = true;\n                        --pending || done();\n                    });\n                }(tokens[i]));\n            }\n            return;\n        }\n        try {\n            if (opt)\n                opt = merge({}, marked.defaults, opt);\n            return Parser.parse(Lexer.lex(src, opt), opt);\n        } catch (e) {\n            e.message += '\\nPlease report this to https://github.com/chjj/marked.';\n            if ((opt || marked.defaults).silent) {\n                return '<p>An error occured:</p><pre>' + escape(e.message + '', true) + '</pre>';\n            }\n            throw e;\n        }\n    }\n    marked.options = marked.setOptions = function (opt) {\n        merge(marked.defaults, opt);\n        return marked;\n    };\n    marked.defaults = {\n        gfm: true,\n        tables: true,\n        breaks: false,\n        pedantic: false,\n        sanitize: false,\n        smartLists: false,\n        silent: false,\n        highlight: null,\n        langPrefix: 'lang-',\n        smartypants: false,\n        headerPrefix: '',\n        renderer: new Renderer()\n    };\n    marked.Parser = Parser;\n    marked.parser = Parser.parse;\n    marked.Renderer = Renderer;\n    marked.Lexer = Lexer;\n    marked.lexer = Lexer.lex;\n    marked.InlineLexer = InlineLexer;\n    marked.inlineLexer = InlineLexer.output;\n    marked.parse = marked;\n    if (typeof exports === 'object') {\n        module.exports = marked;\n    } else if (typeof define === 'function' && define.amd) {\n        define(function () {\n            return marked;\n        });\n    } else {\n        this.marked = marked;\n    }\n}.call(function () {\n    return this || (typeof window !== 'undefined' ? window : global);\n}()));","map":"{\"version\":3,\"sources\":[\"node_modules/marked/lib/marked.js\"],\"names\":[\"block\",\"newline\",\"code\",\"fences\",\"noop\",\"hr\",\"heading\",\"nptable\",\"lheading\",\"blockquote\",\"list\",\"html\",\"def\",\"table\",\"paragraph\",\"text\",\"bullet\",\"item\",\"replace\",\"_tag\",\"normal\",\"merge\",\"gfm\",\"source\",\"tables\",\"Lexer\",\"options\",\"tokens\",\"links\",\"marked\",\"defaults\",\"rules\",\"lex\",\"src\",\"lexer\",\"prototype\",\"token\",\"top\",\"next\",\"loose\",\"cap\",\"bull\",\"b\",\"space\",\"i\",\"l\",\"exec\",\"substring\",\"length\",\"push\",\"type\",\"pedantic\",\"lang\",\"depth\",\"header\",\"split\",\"align\",\"cells\",\"test\",\"ordered\",\"match\",\"indexOf\",\"RegExp\",\"smartLists\",\"slice\",\"join\",\"charAt\",\"sanitize\",\"pre\",\"toLowerCase\",\"href\",\"title\",\"Error\",\"charCodeAt\",\"inline\",\"escape\",\"autolink\",\"url\",\"tag\",\"link\",\"reflink\",\"nolink\",\"strong\",\"em\",\"br\",\"del\",\"_inside\",\"_href\",\"breaks\",\"InlineLexer\",\"renderer\",\"Renderer\",\"output\",\"out\",\"mangle\",\"outputLink\",\"codespan\",\"smartypants\",\"image\",\"ch\",\"Math\",\"random\",\"toString\",\"escaped\",\"highlight\",\"langPrefix\",\"quote\",\"level\",\"raw\",\"headerPrefix\",\"body\",\"listitem\",\"tablerow\",\"content\",\"tablecell\",\"flags\",\"Parser\",\"parse\",\"parser\",\"reverse\",\"tok\",\"pop\",\"peek\",\"parseText\",\"row\",\"cell\",\"j\",\"encode\",\"regex\",\"opt\",\"self\",\"name\",\"val\",\"obj\",\"target\",\"key\",\"arguments\",\"Object\",\"hasOwnProperty\",\"call\",\"callback\",\"pending\",\"e\",\"done\",\"err\",\"message\",\"silent\",\"setOptions\",\"inlineLexer\",\"exports\",\"module\",\"define\",\"amd\",\"window\",\"global\"],\"mappings\":\"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\"}","lineCount":729,"mtime":1387893943000,"deps":[],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":true,"isCoreModule":false,"realCanonicalName":null,"src":"/**\n * marked - a markdown parser\n * Copyright (c) 2011-2013, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/chjj/marked\n */\n\n;(function() {\n\n/**\n * Block-Level Grammar\n */\n\nvar block = {\n  newline: /^\\n+/,\n  code: /^( {4}[^\\n]+\\n*)+/,\n  fences: noop,\n  hr: /^( *[-*_]){3,} *(?:\\n+|$)/,\n  heading: /^ *(#{1,6}) *([^\\n]+?) *#* *(?:\\n+|$)/,\n  nptable: noop,\n  lheading: /^([^\\n]+)\\n *(=|-){2,} *(?:\\n+|$)/,\n  blockquote: /^( *>[^\\n]+(\\n[^\\n]+)*\\n*)+/,\n  list: /^( *)(bull) [\\s\\S]+?(?:hr|\\n{2,}(?! )(?!\\1bull )\\n*|\\s*$)/,\n  html: /^ *(?:comment|closed|closing) *(?:\\n{2,}|\\s*$)/,\n  def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +[\"(]([^\\n]+)[\")])? *(?:\\n+|$)/,\n  table: noop,\n  paragraph: /^((?:[^\\n]+\\n?(?!hr|heading|lheading|blockquote|tag|def))+)\\n*/,\n  text: /^[^\\n]+/\n};\n\nblock.bullet = /(?:[*+-]|\\d+\\.)/;\nblock.item = /^( *)(bull) [^\\n]*(?:\\n(?!\\1bull )[^\\n]*)*/;\nblock.item = replace(block.item, 'gm')\n  (/bull/g, block.bullet)\n  ();\n\nblock.list = replace(block.list)\n  (/bull/g, block.bullet)\n  ('hr', /\\n+(?=(?: *[-*_]){3,} *(?:\\n+|$))/)\n  ();\n\nblock._tag = '(?!(?:'\n  + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code'\n  + '|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo'\n  + '|span|br|wbr|ins|del|img)\\\\b)\\\\w+(?!:/|@)\\\\b';\n\nblock.html = replace(block.html)\n  ('comment', /<!--[\\s\\S]*?-->/)\n  ('closed', /<(tag)[\\s\\S]+?<\\/\\1>/)\n  ('closing', /<tag(?:\"[^\"]*\"|'[^']*'|[^'\">])*?>/)\n  (/tag/g, block._tag)\n  ();\n\nblock.paragraph = replace(block.paragraph)\n  ('hr', block.hr)\n  ('heading', block.heading)\n  ('lheading', block.lheading)\n  ('blockquote', block.blockquote)\n  ('tag', '<' + block._tag)\n  ('def', block.def)\n  ();\n\n/**\n * Normal Block Grammar\n */\n\nblock.normal = merge({}, block);\n\n/**\n * GFM Block Grammar\n */\n\nblock.gfm = merge({}, block.normal, {\n  fences: /^ *(`{3,}|~{3,}) *(\\S+)? *\\n([\\s\\S]+?)\\s*\\1 *(?:\\n+|$)/,\n  paragraph: /^/\n});\n\nblock.gfm.paragraph = replace(block.paragraph)\n  ('(?!', '(?!'\n    + block.gfm.fences.source.replace('\\\\1', '\\\\2') + '|'\n    + block.list.source.replace('\\\\1', '\\\\3') + '|')\n  ();\n\n/**\n * GFM + Tables Block Grammar\n */\n\nblock.tables = merge({}, block.gfm, {\n  nptable: /^ *(\\S.*\\|.*)\\n *([-:]+ *\\|[-| :]*)\\n((?:.*\\|.*(?:\\n|$))*)\\n*/,\n  table: /^ *\\|(.+)\\n *\\|( *[-:]+[-| :]*)\\n((?: *\\|.*(?:\\n|$))*)\\n*/\n});\n\n/**\n * Block Lexer\n */\n\nfunction Lexer(options) {\n  this.tokens = [];\n  this.tokens.links = {};\n  this.options = options || marked.defaults;\n  this.rules = block.normal;\n\n  if (this.options.gfm) {\n    if (this.options.tables) {\n      this.rules = block.tables;\n    } else {\n      this.rules = block.gfm;\n    }\n  }\n}\n\n/**\n * Expose Block Rules\n */\n\nLexer.rules = block;\n\n/**\n * Static Lex Method\n */\n\nLexer.lex = function(src, options) {\n  var lexer = new Lexer(options);\n  return lexer.lex(src);\n};\n\n/**\n * Preprocessing\n */\n\nLexer.prototype.lex = function(src) {\n  src = src\n    .replace(/\\r\\n|\\r/g, '\\n')\n    .replace(/\\t/g, '    ')\n    .replace(/\\u00a0/g, ' ')\n    .replace(/\\u2424/g, '\\n');\n\n  return this.token(src, true);\n};\n\n/**\n * Lexing\n */\n\nLexer.prototype.token = function(src, top) {\n  var src = src.replace(/^ +$/gm, '')\n    , next\n    , loose\n    , cap\n    , bull\n    , b\n    , item\n    , space\n    , i\n    , l;\n\n  while (src) {\n    // newline\n    if (cap = this.rules.newline.exec(src)) {\n      src = src.substring(cap[0].length);\n      if (cap[0].length > 1) {\n        this.tokens.push({\n          type: 'space'\n        });\n      }\n    }\n\n    // code\n    if (cap = this.rules.code.exec(src)) {\n      src = src.substring(cap[0].length);\n      cap = cap[0].replace(/^ {4}/gm, '');\n      this.tokens.push({\n        type: 'code',\n        text: !this.options.pedantic\n          ? cap.replace(/\\n+$/, '')\n          : cap\n      });\n      continue;\n    }\n\n    // fences (gfm)\n    if (cap = this.rules.fences.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'code',\n        lang: cap[2],\n        text: cap[3]\n      });\n      continue;\n    }\n\n    // heading\n    if (cap = this.rules.heading.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'heading',\n        depth: cap[1].length,\n        text: cap[2]\n      });\n      continue;\n    }\n\n    // table no leading pipe (gfm)\n    if (top && (cap = this.rules.nptable.exec(src))) {\n      src = src.substring(cap[0].length);\n\n      item = {\n        type: 'table',\n        header: cap[1].replace(/^ *| *\\| *$/g, '').split(/ *\\| */),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        cells: cap[3].replace(/\\n$/, '').split('\\n')\n      };\n\n      for (i = 0; i < item.align.length; i++) {\n        if (/^ *-+: *$/.test(item.align[i])) {\n          item.align[i] = 'right';\n        } else if (/^ *:-+: *$/.test(item.align[i])) {\n          item.align[i] = 'center';\n        } else if (/^ *:-+ *$/.test(item.align[i])) {\n          item.align[i] = 'left';\n        } else {\n          item.align[i] = null;\n        }\n      }\n\n      for (i = 0; i < item.cells.length; i++) {\n        item.cells[i] = item.cells[i].split(/ *\\| */);\n      }\n\n      this.tokens.push(item);\n\n      continue;\n    }\n\n    // lheading\n    if (cap = this.rules.lheading.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'heading',\n        depth: cap[2] === '=' ? 1 : 2,\n        text: cap[1]\n      });\n      continue;\n    }\n\n    // hr\n    if (cap = this.rules.hr.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'hr'\n      });\n      continue;\n    }\n\n    // blockquote\n    if (cap = this.rules.blockquote.exec(src)) {\n      src = src.substring(cap[0].length);\n\n      this.tokens.push({\n        type: 'blockquote_start'\n      });\n\n      cap = cap[0].replace(/^ *> ?/gm, '');\n\n      // Pass `top` to keep the current\n      // \"toplevel\" state. This is exactly\n      // how markdown.pl works.\n      this.token(cap, top);\n\n      this.tokens.push({\n        type: 'blockquote_end'\n      });\n\n      continue;\n    }\n\n    // list\n    if (cap = this.rules.list.exec(src)) {\n      src = src.substring(cap[0].length);\n      bull = cap[2];\n\n      this.tokens.push({\n        type: 'list_start',\n        ordered: bull.length > 1\n      });\n\n      // Get each top-level item.\n      cap = cap[0].match(this.rules.item);\n\n      next = false;\n      l = cap.length;\n      i = 0;\n\n      for (; i < l; i++) {\n        item = cap[i];\n\n        // Remove the list item's bullet\n        // so it is seen as the next token.\n        space = item.length;\n        item = item.replace(/^ *([*+-]|\\d+\\.) +/, '');\n\n        // Outdent whatever the\n        // list item contains. Hacky.\n        if (~item.indexOf('\\n ')) {\n          space -= item.length;\n          item = !this.options.pedantic\n            ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '')\n            : item.replace(/^ {1,4}/gm, '');\n        }\n\n        // Determine whether the next list item belongs here.\n        // Backpedal if it does not belong in this list.\n        if (this.options.smartLists && i !== l - 1) {\n          b = block.bullet.exec(cap[i + 1])[0];\n          if (bull !== b && !(bull.length > 1 && b.length > 1)) {\n            src = cap.slice(i + 1).join('\\n') + src;\n            i = l - 1;\n          }\n        }\n\n        // Determine whether item is loose or not.\n        // Use: /(^|\\n)(?! )[^\\n]+\\n\\n(?!\\s*$)/\n        // for discount behavior.\n        loose = next || /\\n\\n(?!\\s*$)/.test(item);\n        if (i !== l - 1) {\n          next = item.charAt(item.length - 1) === '\\n';\n          if (!loose) loose = next;\n        }\n\n        this.tokens.push({\n          type: loose\n            ? 'loose_item_start'\n            : 'list_item_start'\n        });\n\n        // Recurse.\n        this.token(item, false);\n\n        this.tokens.push({\n          type: 'list_item_end'\n        });\n      }\n\n      this.tokens.push({\n        type: 'list_end'\n      });\n\n      continue;\n    }\n\n    // html\n    if (cap = this.rules.html.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: this.options.sanitize\n          ? 'paragraph'\n          : 'html',\n        pre: cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style',\n        text: cap[0]\n      });\n      continue;\n    }\n\n    // def\n    if (top && (cap = this.rules.def.exec(src))) {\n      src = src.substring(cap[0].length);\n      this.tokens.links[cap[1].toLowerCase()] = {\n        href: cap[2],\n        title: cap[3]\n      };\n      continue;\n    }\n\n    // table (gfm)\n    if (top && (cap = this.rules.table.exec(src))) {\n      src = src.substring(cap[0].length);\n\n      item = {\n        type: 'table',\n        header: cap[1].replace(/^ *| *\\| *$/g, '').split(/ *\\| */),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        cells: cap[3].replace(/(?: *\\| *)?\\n$/, '').split('\\n')\n      };\n\n      for (i = 0; i < item.align.length; i++) {\n        if (/^ *-+: *$/.test(item.align[i])) {\n          item.align[i] = 'right';\n        } else if (/^ *:-+: *$/.test(item.align[i])) {\n          item.align[i] = 'center';\n        } else if (/^ *:-+ *$/.test(item.align[i])) {\n          item.align[i] = 'left';\n        } else {\n          item.align[i] = null;\n        }\n      }\n\n      for (i = 0; i < item.cells.length; i++) {\n        item.cells[i] = item.cells[i]\n          .replace(/^ *\\| *| *\\| *$/g, '')\n          .split(/ *\\| */);\n      }\n\n      this.tokens.push(item);\n\n      continue;\n    }\n\n    // top-level paragraph\n    if (top && (cap = this.rules.paragraph.exec(src))) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'paragraph',\n        text: cap[1].charAt(cap[1].length - 1) === '\\n'\n          ? cap[1].slice(0, -1)\n          : cap[1]\n      });\n      continue;\n    }\n\n    // text\n    if (cap = this.rules.text.exec(src)) {\n      // Top-level should never reach here.\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'text',\n        text: cap[0]\n      });\n      continue;\n    }\n\n    if (src) {\n      throw new\n        Error('Infinite loop on byte: ' + src.charCodeAt(0));\n    }\n  }\n\n  return this.tokens;\n};\n\n/**\n * Inline-Level Grammar\n */\n\nvar inline = {\n  escape: /^\\\\([\\\\`*{}\\[\\]()#+\\-.!_>])/,\n  autolink: /^<([^ >]+(@|:\\/)[^ >]+)>/,\n  url: noop,\n  tag: /^<!--[\\s\\S]*?-->|^<\\/?\\w+(?:\"[^\"]*\"|'[^']*'|[^'\">])*?>/,\n  link: /^!?\\[(inside)\\]\\(href\\)/,\n  reflink: /^!?\\[(inside)\\]\\s*\\[([^\\]]*)\\]/,\n  nolink: /^!?\\[((?:\\[[^\\]]*\\]|[^\\[\\]])*)\\]/,\n  strong: /^__([\\s\\S]+?)__(?!_)|^\\*\\*([\\s\\S]+?)\\*\\*(?!\\*)/,\n  em: /^\\b_((?:__|[\\s\\S])+?)_\\b|^\\*((?:\\*\\*|[\\s\\S])+?)\\*(?!\\*)/,\n  code: /^(`+)\\s*([\\s\\S]*?[^`])\\s*\\1(?!`)/,\n  br: /^ {2,}\\n(?!\\s*$)/,\n  del: noop,\n  text: /^[\\s\\S]+?(?=[\\\\<!\\[_*`]| {2,}\\n|$)/\n};\n\ninline._inside = /(?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*/;\ninline._href = /\\s*<?([\\s\\S]*?)>?(?:\\s+['\"]([\\s\\S]*?)['\"])?\\s*/;\n\ninline.link = replace(inline.link)\n  ('inside', inline._inside)\n  ('href', inline._href)\n  ();\n\ninline.reflink = replace(inline.reflink)\n  ('inside', inline._inside)\n  ();\n\n/**\n * Normal Inline Grammar\n */\n\ninline.normal = merge({}, inline);\n\n/**\n * Pedantic Inline Grammar\n */\n\ninline.pedantic = merge({}, inline.normal, {\n  strong: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n  em: /^_(?=\\S)([\\s\\S]*?\\S)_(?!_)|^\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)/\n});\n\n/**\n * GFM Inline Grammar\n */\n\ninline.gfm = merge({}, inline.normal, {\n  escape: replace(inline.escape)('])', '~|])')(),\n  url: /^(https?:\\/\\/[^\\s<]+[^<.,:;\"')\\]\\s])/,\n  del: /^~~(?=\\S)([\\s\\S]*?\\S)~~/,\n  text: replace(inline.text)\n    (']|', '~]|')\n    ('|', '|https?://|')\n    ()\n});\n\n/**\n * GFM + Line Breaks Inline Grammar\n */\n\ninline.breaks = merge({}, inline.gfm, {\n  br: replace(inline.br)('{2,}', '*')(),\n  text: replace(inline.gfm.text)('{2,}', '*')()\n});\n\n/**\n * Inline Lexer & Compiler\n */\n\nfunction InlineLexer(links, options) {\n  this.options = options || marked.defaults;\n  this.links = links;\n  this.rules = inline.normal;\n  this.renderer = this.options.renderer || new Renderer;\n\n  if (!this.links) {\n    throw new\n      Error('Tokens array requires a `links` property.');\n  }\n\n  if (this.options.gfm) {\n    if (this.options.breaks) {\n      this.rules = inline.breaks;\n    } else {\n      this.rules = inline.gfm;\n    }\n  } else if (this.options.pedantic) {\n    this.rules = inline.pedantic;\n  }\n}\n\n/**\n * Expose Inline Rules\n */\n\nInlineLexer.rules = inline;\n\n/**\n * Static Lexing/Compiling Method\n */\n\nInlineLexer.output = function(src, links, options) {\n  var inline = new InlineLexer(links, options);\n  return inline.output(src);\n};\n\n/**\n * Lexing/Compiling\n */\n\nInlineLexer.prototype.output = function(src) {\n  var out = ''\n    , link\n    , text\n    , href\n    , cap;\n\n  while (src) {\n    // escape\n    if (cap = this.rules.escape.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += cap[1];\n      continue;\n    }\n\n    // autolink\n    if (cap = this.rules.autolink.exec(src)) {\n      src = src.substring(cap[0].length);\n      if (cap[2] === '@') {\n        text = cap[1].charAt(6) === ':'\n          ? this.mangle(cap[1].substring(7))\n          : this.mangle(cap[1]);\n        href = this.mangle('mailto:') + text;\n      } else {\n        text = escape(cap[1]);\n        href = text;\n      }\n      out += this.renderer.link(href, null, text);\n      continue;\n    }\n\n    // url (gfm)\n    if (cap = this.rules.url.exec(src)) {\n      src = src.substring(cap[0].length);\n      text = escape(cap[1]);\n      href = text;\n      out += this.renderer.link(href, null, text);\n      continue;\n    }\n\n    // tag\n    if (cap = this.rules.tag.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.options.sanitize\n        ? escape(cap[0])\n        : cap[0];\n      continue;\n    }\n\n    // link\n    if (cap = this.rules.link.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.outputLink(cap, {\n        href: cap[2],\n        title: cap[3]\n      });\n      continue;\n    }\n\n    // reflink, nolink\n    if ((cap = this.rules.reflink.exec(src))\n        || (cap = this.rules.nolink.exec(src))) {\n      src = src.substring(cap[0].length);\n      link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n      link = this.links[link.toLowerCase()];\n      if (!link || !link.href) {\n        out += cap[0].charAt(0);\n        src = cap[0].substring(1) + src;\n        continue;\n      }\n      out += this.outputLink(cap, link);\n      continue;\n    }\n\n    // strong\n    if (cap = this.rules.strong.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.strong(this.output(cap[2] || cap[1]));\n      continue;\n    }\n\n    // em\n    if (cap = this.rules.em.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.em(this.output(cap[2] || cap[1]));\n      continue;\n    }\n\n    // code\n    if (cap = this.rules.code.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.codespan(escape(cap[2], true));\n      continue;\n    }\n\n    // br\n    if (cap = this.rules.br.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.br();\n      continue;\n    }\n\n    // del (gfm)\n    if (cap = this.rules.del.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.del(this.output(cap[1]));\n      continue;\n    }\n\n    // text\n    if (cap = this.rules.text.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += escape(this.smartypants(cap[0]));\n      continue;\n    }\n\n    if (src) {\n      throw new\n        Error('Infinite loop on byte: ' + src.charCodeAt(0));\n    }\n  }\n\n  return out;\n};\n\n/**\n * Compile Link\n */\n\nInlineLexer.prototype.outputLink = function(cap, link) {\n  var href = escape(link.href)\n    , title = link.title ? escape(link.title) : null;\n\n  return cap[0].charAt(0) !== '!'\n    ? this.renderer.link(href, title, this.output(cap[1]))\n    : this.renderer.image(href, title, escape(cap[1]));\n};\n\n/**\n * Smartypants Transformations\n */\n\nInlineLexer.prototype.smartypants = function(text) {\n  if (!this.options.smartypants) return text;\n  return text\n    // em-dashes\n    .replace(/--/g, '\\u2014')\n    // opening singles\n    .replace(/(^|[-\\u2014/(\\[{\"\\s])'/g, '$1\\u2018')\n    // closing singles & apostrophes\n    .replace(/'/g, '\\u2019')\n    // opening doubles\n    .replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g, '$1\\u201c')\n    // closing doubles\n    .replace(/\"/g, '\\u201d')\n    // ellipses\n    .replace(/\\.{3}/g, '\\u2026');\n};\n\n/**\n * Mangle Links\n */\n\nInlineLexer.prototype.mangle = function(text) {\n  var out = ''\n    , l = text.length\n    , i = 0\n    , ch;\n\n  for (; i < l; i++) {\n    ch = text.charCodeAt(i);\n    if (Math.random() > 0.5) {\n      ch = 'x' + ch.toString(16);\n    }\n    out += '&#' + ch + ';';\n  }\n\n  return out;\n};\n\n/**\n * Renderer\n */\n\nfunction Renderer() {}\n\nRenderer.prototype.code = function(code, lang, escaped, options) {\n  options = options || {};\n\n  if (options.highlight) {\n    var out = options.highlight(code, lang);\n    if (out != null && out !== code) {\n      escaped = true;\n      code = out;\n    }\n  }\n\n  if (!lang) {\n    return '<pre><code>'\n      + (escaped ? code : escape(code, true))\n      + '\\n</code></pre>';\n  }\n\n  return '<pre><code class=\"'\n    + options.langPrefix\n    + lang\n    + '\">'\n    + (escaped ? code : escape(code))\n    + '\\n</code></pre>\\n';\n};\n\nRenderer.prototype.blockquote = function(quote) {\n  return '<blockquote>\\n' + quote + '</blockquote>\\n';\n};\n\nRenderer.prototype.html = function(html) {\n  return html;\n};\n\nRenderer.prototype.heading = function(text, level, raw, options) {\n  return '<h'\n    + level\n    + ' id=\"'\n    + options.headerPrefix\n    + raw.toLowerCase().replace(/[^\\w]+/g, '-')\n    + '\">'\n    + text\n    + '</h'\n    + level\n    + '>\\n';\n};\n\nRenderer.prototype.hr = function() {\n  return '<hr>\\n';\n};\n\nRenderer.prototype.list = function(body, ordered) {\n  var type = ordered ? 'ol' : 'ul';\n  return '<' + type + '>\\n' + body + '</' + type + '>\\n';\n};\n\nRenderer.prototype.listitem = function(text) {\n  return '<li>' + text + '</li>\\n';\n};\n\nRenderer.prototype.paragraph = function(text) {\n  return '<p>' + text + '</p>\\n';\n};\n\nRenderer.prototype.table = function(header, body) {\n  return '<table>\\n'\n    + '<thead>\\n'\n    + header\n    + '</thead>\\n'\n    + '<tbody>\\n'\n    + body\n    + '</tbody>\\n'\n    + '</table>\\n';\n};\n\nRenderer.prototype.tablerow = function(content) {\n  return '<tr>\\n' + content + '</tr>\\n';\n};\n\nRenderer.prototype.tablecell = function(content, flags) {\n  var type = flags.header ? 'th' : 'td';\n  var tag = flags.align\n    ? '<' + type + ' style=\"text-align:' + flags.align + '\">'\n    : '<' + type + '>';\n  return tag + content + '</' + type + '>\\n';\n};\n\n// span level renderer\nRenderer.prototype.strong = function(text) {\n  return '<strong>' + text + '</strong>';\n};\n\nRenderer.prototype.em = function(text) {\n  return '<em>' + text + '</em>';\n};\n\nRenderer.prototype.codespan = function(text) {\n  return '<code>' + text + '</code>';\n};\n\nRenderer.prototype.br = function() {\n  return '<br>';\n};\n\nRenderer.prototype.del = function(text) {\n  return '<del>' + text + '</del>';\n};\n\nRenderer.prototype.link = function(href, title, text) {\n  var out = '<a href=\"' + href + '\"';\n  if (title) {\n    out += ' title=\"' + title + '\"';\n  }\n  out += '>' + text + '</a>';\n  return out;\n};\n\nRenderer.prototype.image = function(href, title, text) {\n  var out = '<img src=\"' + href + '\" alt=\"' + text + '\"';\n  if (title) {\n    out += ' title=\"' + title + '\"';\n  }\n  out += '>';\n  return out;\n};\n\n/**\n * Parsing & Compiling\n */\n\nfunction Parser(options) {\n  this.tokens = [];\n  this.token = null;\n  this.options = options || marked.defaults;\n  this.options.renderer = this.options.renderer || new Renderer;\n  this.renderer = this.options.renderer;\n}\n\n/**\n * Static Parse Method\n */\n\nParser.parse = function(src, options, renderer) {\n  var parser = new Parser(options, renderer);\n  return parser.parse(src);\n};\n\n/**\n * Parse Loop\n */\n\nParser.prototype.parse = function(src) {\n  this.inline = new InlineLexer(src.links, this.options, this.renderer);\n  this.tokens = src.reverse();\n\n  var out = '';\n  while (this.next()) {\n    out += this.tok();\n  }\n\n  return out;\n};\n\n/**\n * Next Token\n */\n\nParser.prototype.next = function() {\n  return this.token = this.tokens.pop();\n};\n\n/**\n * Preview Next Token\n */\n\nParser.prototype.peek = function() {\n  return this.tokens[this.tokens.length - 1] || 0;\n};\n\n/**\n * Parse Text Tokens\n */\n\nParser.prototype.parseText = function() {\n  var body = this.token.text;\n\n  while (this.peek().type === 'text') {\n    body += '\\n' + this.next().text;\n  }\n\n  return this.inline.output(body);\n};\n\n/**\n * Parse Current Token\n */\n\nParser.prototype.tok = function() {\n  switch (this.token.type) {\n    case 'space': {\n      return '';\n    }\n    case 'hr': {\n      return this.renderer.hr();\n    }\n    case 'heading': {\n      return this.renderer.heading(\n        this.inline.output(this.token.text),\n        this.token.depth,\n        this.token.text,\n        this.options\n      );\n    }\n    case 'code': {\n      return this.renderer.code(this.token.text,\n        this.token.lang,\n        this.token.escaped,\n        this.options);\n    }\n    case 'table': {\n      var header = ''\n        , body = ''\n        , i\n        , row\n        , cell\n        , flags\n        , j;\n\n      // header\n      cell = '';\n      for (i = 0; i < this.token.header.length; i++) {\n        flags = { header: true, align: this.token.align[i] };\n        cell += this.renderer.tablecell(\n          this.inline.output(this.token.header[i]),\n          { header: true, align: this.token.align[i] }\n        );\n      }\n      header += this.renderer.tablerow(cell);\n\n      for (i = 0; i < this.token.cells.length; i++) {\n        row = this.token.cells[i];\n\n        cell = '';\n        for (j = 0; j < row.length; j++) {\n          cell += this.renderer.tablecell(\n            this.inline.output(row[j]),\n            { header: false, align: this.token.align[j] }\n          );\n        }\n\n        body += this.renderer.tablerow(cell);\n      }\n      return this.renderer.table(header, body);\n    }\n    case 'blockquote_start': {\n      var body = '';\n\n      while (this.next().type !== 'blockquote_end') {\n        body += this.tok();\n      }\n\n      return this.renderer.blockquote(body);\n    }\n    case 'list_start': {\n      var body = ''\n        , ordered = this.token.ordered;\n\n      while (this.next().type !== 'list_end') {\n        body += this.tok();\n      }\n\n      return this.renderer.list(body, ordered);\n    }\n    case 'list_item_start': {\n      var body = '';\n\n      while (this.next().type !== 'list_item_end') {\n        body += this.token.type === 'text'\n          ? this.parseText()\n          : this.tok();\n      }\n\n      return this.renderer.listitem(body);\n    }\n    case 'loose_item_start': {\n      var body = '';\n\n      while (this.next().type !== 'list_item_end') {\n        body += this.tok();\n      }\n\n      return this.renderer.listitem(body);\n    }\n    case 'html': {\n      var html = !this.token.pre && !this.options.pedantic\n        ? this.inline.output(this.token.text)\n        : this.token.text;\n      return this.renderer.html(html);\n    }\n    case 'paragraph': {\n      return this.renderer.paragraph(this.inline.output(this.token.text));\n    }\n    case 'text': {\n      return this.renderer.paragraph(this.parseText());\n    }\n  }\n};\n\n/**\n * Helpers\n */\n\nfunction escape(html, encode) {\n  return html\n    .replace(!encode ? /&(?!#?\\w+;)/g : /&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#39;');\n}\n\nfunction replace(regex, opt) {\n  regex = regex.source;\n  opt = opt || '';\n  return function self(name, val) {\n    if (!name) return new RegExp(regex, opt);\n    val = val.source || val;\n    val = val.replace(/(^|[^\\[])\\^/g, '$1');\n    regex = regex.replace(name, val);\n    return self;\n  };\n}\n\nfunction noop() {}\nnoop.exec = noop;\n\nfunction merge(obj) {\n  var i = 1\n    , target\n    , key;\n\n  for (; i < arguments.length; i++) {\n    target = arguments[i];\n    for (key in target) {\n      if (Object.prototype.hasOwnProperty.call(target, key)) {\n        obj[key] = target[key];\n      }\n    }\n  }\n\n  return obj;\n}\n\n\n/**\n * Marked\n */\n\nfunction marked(src, opt, callback) {\n  if (callback || typeof opt === 'function') {\n    if (!callback) {\n      callback = opt;\n      opt = null;\n    }\n\n    opt = merge({}, marked.defaults, opt || {});\n\n    var highlight = opt.highlight\n      , tokens\n      , pending\n      , i = 0;\n\n    try {\n      tokens = Lexer.lex(src, opt)\n    } catch (e) {\n      return callback(e);\n    }\n\n    pending = tokens.length;\n\n    var done = function() {\n      var out, err;\n\n      try {\n        out = Parser.parse(tokens, opt);\n      } catch (e) {\n        err = e;\n      }\n\n      opt.highlight = highlight;\n\n      return err\n        ? callback(err)\n        : callback(null, out);\n    };\n\n    if (!highlight || highlight.length < 3) {\n      return done();\n    }\n\n    delete opt.highlight;\n\n    if (!pending) return done();\n\n    for (; i < tokens.length; i++) {\n      (function(token) {\n        if (token.type !== 'code') {\n          return --pending || done();\n        }\n        return highlight(token.text, token.lang, function(err, code) {\n          if (code == null || code === token.text) {\n            return --pending || done();\n          }\n          token.text = code;\n          token.escaped = true;\n          --pending || done();\n        });\n      })(tokens[i]);\n    }\n\n    return;\n  }\n  try {\n    if (opt) opt = merge({}, marked.defaults, opt);\n    return Parser.parse(Lexer.lex(src, opt), opt);\n  } catch (e) {\n    e.message += '\\nPlease report this to https://github.com/chjj/marked.';\n    if ((opt || marked.defaults).silent) {\n      return '<p>An error occured:</p><pre>'\n        + escape(e.message + '', true)\n        + '</pre>';\n    }\n    throw e;\n  }\n}\n\n/**\n * Options\n */\n\nmarked.options =\nmarked.setOptions = function(opt) {\n  merge(marked.defaults, opt);\n  return marked;\n};\n\nmarked.defaults = {\n  gfm: true,\n  tables: true,\n  breaks: false,\n  pedantic: false,\n  sanitize: false,\n  smartLists: false,\n  silent: false,\n  highlight: null,\n  langPrefix: 'lang-',\n  smartypants: false,\n  headerPrefix: '',\n  renderer: new Renderer\n};\n\n/**\n * Expose\n */\n\nmarked.Parser = Parser;\nmarked.parser = Parser.parse;\n\nmarked.Renderer = Renderer;\n\nmarked.Lexer = Lexer;\nmarked.lexer = Lexer.lex;\n\nmarked.InlineLexer = InlineLexer;\nmarked.inlineLexer = InlineLexer.output;\n\nmarked.parse = marked;\n\nif (typeof exports === 'object') {\n  module.exports = marked;\n} else if (typeof define === 'function' && define.amd) {\n  define(function() { return marked; });\n} else {\n  this.marked = marked;\n}\n\n}).call(function() {\n  return this || (typeof window !== 'undefined' ? window : global);\n}());\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/html/instructions.js":{"id":41,"canonicalName":"src/components/html/instructions.js","code":"(function () {\n    var Instructions, Markdown, Q, html, _, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    html = require('12', module);\n    Q = require('17', module);\n    Markdown = require('42', module).Markdown;\n    _ = require('16', module);\n    Instructions = function (_super) {\n        __extends(Instructions, _super);\n        function Instructions(spec) {\n            var content, div, i, itm, key, md, type, value;\n            if (spec == null) {\n                spec = {};\n            }\n            Instructions.__super__.constructor.call(this, spec);\n            this.pages = function () {\n                var _ref, _results;\n                _ref = this.spec.pages;\n                _results = [];\n                for (key in _ref) {\n                    value = _ref[key];\n                    type = _.keys(value)[0];\n                    content = _.values(value)[0];\n                    md = new Markdown(content);\n                    div = this.div();\n                    div.addClass('ui stacked segment').append(md.el);\n                    _results.push(div);\n                }\n                return _results;\n            }.call(this);\n            this.menu = this.div();\n            this.menu.addClass('ui borderless pagination menu');\n            this.back = $('<a class=\"item\">\\n  <i class=\"icon left arrow\"></i>  Previous\\n </a>').attr('id', 'instructions_back');\n            this.next = $('<a class=\"item\">\\nNext <i class=\"icon right arrow\"></i>\\n</a>').attr('id', 'instructions_next');\n            this.menu.append(this.back).append('\\n');\n            this.items = function () {\n                var _i, _ref, _results;\n                _results = [];\n                for (i = _i = 1, _ref = this.pages.length; 1 <= _ref ? _i <= _ref : _i >= _ref; i = 1 <= _ref ? ++_i : --_i) {\n                    itm = $('<a class=\"item\">' + i + ' of ' + this.pages.length + '</a>');\n                    this.menu.append(itm).append('\\n');\n                    _results.push(itm);\n                }\n                return _results;\n            }.call(this);\n            this.items[0].addClass('active');\n            this.menu.append(this.next).css('position', 'absolute').css('right', '15px');\n            this.currentPage = 0;\n            this.el.append(this.pages[this.currentPage]);\n            this.el.append(this.menu);\n        }\n        Instructions.prototype.activate = function (context) {\n            this.deferred = Q.defer();\n            return this.deferred.promise;\n        };\n        Instructions.prototype.updateEl = function (currentPage) {\n            this.el.empty();\n            this.el.append(this.pages[this.currentPage]);\n            return this.el.append(this.menu);\n        };\n        Instructions.prototype.render = function (context, layer) {\n            var _this = this;\n            this.next.click(function (e) {\n                if (_this.currentPage < _this.pages.length - 1) {\n                    _this.items[_this.currentPage].removeClass('active');\n                    _this.currentPage += 1;\n                    _this.items[_this.currentPage].addClass('active');\n                    _this.updateEl(_this.currentPage);\n                    return _this.render(context);\n                } else {\n                    return _this.deferred.resolve(0);\n                }\n            });\n            this.back.click(function (e) {\n                if (_this.currentPage > 0) {\n                    _this.items[_this.currentPage].removeClass('active');\n                    _this.currentPage -= 1;\n                    _this.items[_this.currentPage].addClass('active');\n                    _this.updateEl(_this.currentPage);\n                    return _this.render(context);\n                }\n            });\n            if (this.currentPage > 0) {\n                this.back.removeClass('disabled');\n            }\n            $(this.pages[this.currentPage]).css({ 'min-height': context.height() - 50 });\n            return context.appendHtml(this.el);\n        };\n        return Instructions;\n    }(html.HtmlResponse);\n    exports.Instructions = Instructions;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/html/instructions.js\"],\"names\":[\"Instructions\",\"Markdown\",\"Q\",\"html\",\"_\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"spec\",\"content\",\"div\",\"i\",\"itm\",\"md\",\"type\",\"value\",\"pages\",\"_ref\",\"_results\",\"keys\",\"values\",\"addClass\",\"append\",\"el\",\"push\",\"menu\",\"back\",\"$\",\"attr\",\"next\",\"items\",\"_i\",\"length\",\"css\",\"currentPage\",\"activate\",\"context\",\"deferred\",\"defer\",\"promise\",\"updateEl\",\"empty\",\"render\",\"layer\",\"_this\",\"click\",\"e\",\"removeClass\",\"resolve\",\"height\",\"appendHtml\",\"HtmlResponse\",\"exports\"],\"mappings\":\"AACA,CAAC,YAAW;AAAA,IACV,IAAIA,YAAJ,EAAkBC,QAAlB,EAA4BC,CAA5B,EAA+BC,IAA/B,EAAqCC,CAArC,EACEC,SAAA,GAAY,GAAGC,cADjB,EAEEC,SAAA,GAAY,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAA,YAAE,SAASC,GAAT,IAAgBD,MAAhB,EAAwB;AAAA,gBAAE,IAAIJ,SAAA,CAAUM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ;AAAA,oBAAiCF,KAAA,CAAME,GAAN,IAAaD,MAAA,CAAOC,GAAP,CAAb,CAAnC;AAAA,aAA1B;AAAA,YAAyF,SAASE,IAAT,GAAgB;AAAA,gBAAE,KAAKC,WAAL,GAAmBL,KAAnB,CAAF;AAAA,aAAzG;AAAA,YAAuII,IAAA,CAAKE,SAAL,GAAiBL,MAAA,CAAOK,SAAxB,CAAvI;AAAA,YAA0KN,KAAA,CAAMM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA1K;AAAA,YAAwMJ,KAAA,CAAMO,SAAN,GAAkBN,MAAA,CAAOK,SAAzB,CAAxM;AAAA,YAA4O,OAAON,KAAP,CAA5O;AAAA,SAFtC,CADU;AAAA,IAKVL,IAAA,GAAOa,OAAA,C,IAAA,E,MAAA,CAAP,CALU;AAAA,IAOVd,CAAA,GAAIc,OAAA,C,IAAA,E,MAAA,CAAJ,CAPU;AAAA,IASVf,QAAA,GAAWe,OAAA,C,IAAA,E,MAAA,EAAsBf,QAAjC,CATU;AAAA,IAWVG,CAAA,GAAIY,OAAA,C,IAAA,E,MAAA,CAAJ,CAXU;AAAA,IAaVhB,YAAA,GAAgB,UAASiB,MAAT,EAAiB;AAAA,QAC/BV,SAAA,CAAUP,YAAV,EAAwBiB,MAAxB,EAD+B;AAAA,QAG/B,SAASjB,YAAT,CAAsBkB,IAAtB,EAA4B;AAAA,YAC1B,IAAIC,OAAJ,EAAaC,GAAb,EAAkBC,CAAlB,EAAqBC,GAArB,EAA0BZ,GAA1B,EAA+Ba,EAA/B,EAAmCC,IAAnC,EAAyCC,KAAzC,CAD0B;AAAA,YAE1B,IAAIP,IAAA,IAAQ,IAAZ,EAAkB;AAAA,gBAChBA,IAAA,GAAO,EAAP,CADgB;AAAA,aAFQ;AAAA,YAK1BlB,YAAA,CAAae,SAAb,CAAuBF,WAAvB,CAAmCF,IAAnC,CAAwC,IAAxC,EAA8CO,IAA9C,EAL0B;AAAA,YAM1B,KAAKQ,KAAL,GAAc,YAAW;AAAA,gBACvB,IAAIC,IAAJ,EAAUC,QAAV,CADuB;AAAA,gBAEvBD,IAAA,GAAO,KAAKT,IAAL,CAAUQ,KAAjB,CAFuB;AAAA,gBAGvBE,QAAA,GAAW,EAAX,CAHuB;AAAA,gBAIvB,KAAKlB,GAAL,IAAYiB,IAAZ,EAAkB;AAAA,oBAChBF,KAAA,GAAQE,IAAA,CAAKjB,GAAL,CAAR,CADgB;AAAA,oBAEhBc,IAAA,GAAOpB,CAAA,CAAEyB,IAAF,CAAOJ,KAAP,EAAc,CAAd,CAAP,CAFgB;AAAA,oBAGhBN,OAAA,GAAUf,CAAA,CAAE0B,MAAF,CAASL,KAAT,EAAgB,CAAhB,CAAV,CAHgB;AAAA,oBAIhBF,EAAA,GAAK,IAAItB,QAAJ,CAAakB,OAAb,CAAL,CAJgB;AAAA,oBAKhBC,GAAA,GAAM,KAAKA,GAAL,EAAN,CALgB;AAAA,oBAMhBA,GAAA,CAAIW,QAAJ,CAAa,oBAAb,EAAmCC,MAAnC,CAA0CT,EAAA,CAAGU,EAA7C,EANgB;AAAA,oBAOhBL,QAAA,CAASM,IAAT,CAAcd,GAAd,EAPgB;AAAA,iBAJK;AAAA,gBAavB,OAAOQ,QAAP,CAbuB;AAAA,aAAZ,CAcVjB,IAdU,CAcL,IAdK,CAAb,CAN0B;AAAA,YAqB1B,KAAKwB,IAAL,GAAY,KAAKf,GAAL,EAAZ,CArB0B;AAAA,YAsB1B,KAAKe,IAAL,CAAUJ,QAAV,CAAmB,+BAAnB,EAtB0B;AAAA,YAuB1B,KAAKK,IAAL,GAAYC,CAAA,CAAE,sEAAF,EAA8EC,IAA9E,CAAmF,IAAnF,EAAyF,mBAAzF,CAAZ,CAvB0B;AAAA,YAwB1B,KAAKC,IAAL,GAAYF,CAAA,CAAE,+DAAF,EAAuEC,IAAvE,CAA4E,IAA5E,EAAkF,mBAAlF,CAAZ,CAxB0B;AAAA,YAyB1B,KAAKH,IAAL,CAAUH,MAAV,CAAiB,KAAKI,IAAtB,EAA4BJ,MAA5B,CAAmC,IAAnC,EAzB0B;AAAA,YA0B1B,KAAKQ,KAAL,GAAc,YAAW;AAAA,gBACvB,IAAIC,EAAJ,EAAQd,IAAR,EAAcC,QAAd,CADuB;AAAA,gBAEvBA,QAAA,GAAW,EAAX,CAFuB;AAAA,gBAGvB,KAAKP,CAAA,GAAIoB,EAAA,GAAK,CAAT,EAAYd,IAAA,GAAO,KAAKD,KAAL,CAAWgB,MAAnC,EAA2C,KAAKf,IAAL,GAAYc,EAAA,IAAMd,IAAlB,GAAyBc,EAAA,IAAMd,IAA1E,EAAgFN,CAAA,GAAI,KAAKM,IAAL,GAAY,EAAEc,EAAd,GAAmB,EAAEA,EAAzG,EAA6G;AAAA,oBAC3GnB,GAAA,GAAMe,CAAA,CAAE,qBAAuBhB,CAAvB,GAA2B,MAA3B,GAAoC,KAAKK,KAAL,CAAWgB,MAA/C,GAAwD,MAA1D,CAAN,CAD2G;AAAA,oBAE3G,KAAKP,IAAL,CAAUH,MAAV,CAAiBV,GAAjB,EAAsBU,MAAtB,CAA6B,IAA7B,EAF2G;AAAA,oBAG3GJ,QAAA,CAASM,IAAT,CAAcZ,GAAd,EAH2G;AAAA,iBAHtF;AAAA,gBAQvB,OAAOM,QAAP,CARuB;AAAA,aAAZ,CASVjB,IATU,CASL,IATK,CAAb,CA1B0B;AAAA,YAoC1B,KAAK6B,KAAL,CAAW,CAAX,EAAcT,QAAd,CAAuB,QAAvB,EApC0B;AAAA,YAqC1B,KAAKI,IAAL,CAAUH,MAAV,CAAiB,KAAKO,IAAtB,EAA4BI,GAA5B,CAAgC,UAAhC,EAA4C,UAA5C,EAAwDA,GAAxD,CAA4D,OAA5D,EAAqE,MAArE,EArC0B;AAAA,YAsC1B,KAAKC,WAAL,GAAmB,CAAnB,CAtC0B;AAAA,YAuC1B,KAAKX,EAAL,CAAQD,MAAR,CAAe,KAAKN,KAAL,CAAW,KAAKkB,WAAhB,CAAf,EAvC0B;AAAA,YAwC1B,KAAKX,EAAL,CAAQD,MAAR,CAAe,KAAKG,IAApB,EAxC0B;AAAA,SAHG;AAAA,QA8C/BnC,YAAA,CAAac,SAAb,CAAuB+B,QAAvB,GAAkC,UAASC,OAAT,EAAkB;AAAA,YAClD,KAAKC,QAAL,GAAgB7C,CAAA,CAAE8C,KAAF,EAAhB,CADkD;AAAA,YAElD,OAAO,KAAKD,QAAL,CAAcE,OAArB,CAFkD;AAAA,SAApD,CA9C+B;AAAA,QAmD/BjD,YAAA,CAAac,SAAb,CAAuBoC,QAAvB,GAAkC,UAASN,WAAT,EAAsB;AAAA,YACtD,KAAKX,EAAL,CAAQkB,KAAR,GADsD;AAAA,YAEtD,KAAKlB,EAAL,CAAQD,MAAR,CAAe,KAAKN,KAAL,CAAW,KAAKkB,WAAhB,CAAf,EAFsD;AAAA,YAGtD,OAAO,KAAKX,EAAL,CAAQD,MAAR,CAAe,KAAKG,IAApB,CAAP,CAHsD;AAAA,SAAxD,CAnD+B;AAAA,QAyD/BnC,YAAA,CAAac,SAAb,CAAuBsC,MAAvB,GAAgC,UAASN,OAAT,EAAkBO,KAAlB,EAAyB;AAAA,YACvD,IAAIC,KAAA,GAAQ,IAAZ,CADuD;AAAA,YAEvD,KAAKf,IAAL,CAAUgB,KAAV,CAAgB,UAASC,CAAT,EAAY;AAAA,gBAC1B,IAAIF,KAAA,CAAMV,WAAN,GAAqBU,KAAA,CAAM5B,KAAN,CAAYgB,MAAZ,GAAqB,CAA9C,EAAkD;AAAA,oBAChDY,KAAA,CAAMd,KAAN,CAAYc,KAAA,CAAMV,WAAlB,EAA+Ba,WAA/B,CAA2C,QAA3C,EADgD;AAAA,oBAEhDH,KAAA,CAAMV,WAAN,IAAqB,CAArB,CAFgD;AAAA,oBAGhDU,KAAA,CAAMd,KAAN,CAAYc,KAAA,CAAMV,WAAlB,EAA+Bb,QAA/B,CAAwC,QAAxC,EAHgD;AAAA,oBAIhDuB,KAAA,CAAMJ,QAAN,CAAeI,KAAA,CAAMV,WAArB,EAJgD;AAAA,oBAKhD,OAAOU,KAAA,CAAMF,MAAN,CAAaN,OAAb,CAAP,CALgD;AAAA,iBAAlD,MAMO;AAAA,oBACL,OAAOQ,KAAA,CAAMP,QAAN,CAAeW,OAAf,CAAuB,CAAvB,CAAP,CADK;AAAA,iBAPmB;AAAA,aAA5B,EAFuD;AAAA,YAavD,KAAKtB,IAAL,CAAUmB,KAAV,CAAgB,UAASC,CAAT,EAAY;AAAA,gBAC1B,IAAIF,KAAA,CAAMV,WAAN,GAAoB,CAAxB,EAA2B;AAAA,oBACzBU,KAAA,CAAMd,KAAN,CAAYc,KAAA,CAAMV,WAAlB,EAA+Ba,WAA/B,CAA2C,QAA3C,EADyB;AAAA,oBAEzBH,KAAA,CAAMV,WAAN,IAAqB,CAArB,CAFyB;AAAA,oBAGzBU,KAAA,CAAMd,KAAN,CAAYc,KAAA,CAAMV,WAAlB,EAA+Bb,QAA/B,CAAwC,QAAxC,EAHyB;AAAA,oBAIzBuB,KAAA,CAAMJ,QAAN,CAAeI,KAAA,CAAMV,WAArB,EAJyB;AAAA,oBAKzB,OAAOU,KAAA,CAAMF,MAAN,CAAaN,OAAb,CAAP,CALyB;AAAA,iBADD;AAAA,aAA5B,EAbuD;AAAA,YAsBvD,IAAI,KAAKF,WAAL,GAAmB,CAAvB,EAA0B;AAAA,gBACxB,KAAKR,IAAL,CAAUqB,WAAV,CAAsB,UAAtB,EADwB;AAAA,aAtB6B;AAAA,YAyBvDpB,CAAA,CAAE,KAAKX,KAAL,CAAW,KAAKkB,WAAhB,CAAF,EAAgCD,GAAhC,CAAoC,EAClC,cAAcG,OAAA,CAAQa,MAAR,KAAmB,EADC,EAApC,EAzBuD;AAAA,YA4BvD,OAAOb,OAAA,CAAQc,UAAR,CAAmB,KAAK3B,EAAxB,CAAP,CA5BuD;AAAA,SAAzD,CAzD+B;AAAA,QAwF/B,OAAOjC,YAAP,CAxF+B;AAAA,KAAlB,CA0FZG,IAAA,CAAK0D,YA1FO,CAAf,CAbU;AAAA,IAyGVC,OAAA,CAAQ9D,YAAR,GAAuBA,YAAvB,CAzGU;AAAA,CAAZ,CA2GGW,IA3GH,CA2GQ,IA3GR\"}","lineCount":103,"mtime":1390100825000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/html/html.js","canonicalName":"src/components/html/html.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/q/q.js","canonicalName":"node_modules/q/q.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/html/markdown.js","canonicalName":"src/components/html/markdown.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.6.3\n(function() {\n  var Instructions, Markdown, Q, html, _,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  html = require(\"./html\");\n\n  Q = require(\"q\");\n\n  Markdown = require(\"./markdown\").Markdown;\n\n  _ = require('lodash');\n\n  Instructions = (function(_super) {\n    __extends(Instructions, _super);\n\n    function Instructions(spec) {\n      var content, div, i, itm, key, md, type, value;\n      if (spec == null) {\n        spec = {};\n      }\n      Instructions.__super__.constructor.call(this, spec);\n      this.pages = (function() {\n        var _ref, _results;\n        _ref = this.spec.pages;\n        _results = [];\n        for (key in _ref) {\n          value = _ref[key];\n          type = _.keys(value)[0];\n          content = _.values(value)[0];\n          md = new Markdown(content);\n          div = this.div();\n          div.addClass(\"ui stacked segment\").append(md.el);\n          _results.push(div);\n        }\n        return _results;\n      }).call(this);\n      this.menu = this.div();\n      this.menu.addClass(\"ui borderless pagination menu\");\n      this.back = $(\"<a class=\\\"item\\\">\\n  <i class=\\\"icon left arrow\\\"></i>  Previous\\n </a>\").attr(\"id\", \"instructions_back\");\n      this.next = $(\"<a class=\\\"item\\\">\\nNext <i class=\\\"icon right arrow\\\"></i>\\n</a>\").attr(\"id\", \"instructions_next\");\n      this.menu.append(this.back).append(\"\\n\");\n      this.items = (function() {\n        var _i, _ref, _results;\n        _results = [];\n        for (i = _i = 1, _ref = this.pages.length; 1 <= _ref ? _i <= _ref : _i >= _ref; i = 1 <= _ref ? ++_i : --_i) {\n          itm = $(\"<a class=\\\"item\\\">\" + i + \" of \" + this.pages.length + \"</a>\");\n          this.menu.append(itm).append(\"\\n\");\n          _results.push(itm);\n        }\n        return _results;\n      }).call(this);\n      this.items[0].addClass(\"active\");\n      this.menu.append(this.next).css(\"position\", \"absolute\").css(\"right\", \"15px\");\n      this.currentPage = 0;\n      this.el.append(this.pages[this.currentPage]);\n      this.el.append(this.menu);\n    }\n\n    Instructions.prototype.activate = function(context) {\n      this.deferred = Q.defer();\n      return this.deferred.promise;\n    };\n\n    Instructions.prototype.updateEl = function(currentPage) {\n      this.el.empty();\n      this.el.append(this.pages[this.currentPage]);\n      return this.el.append(this.menu);\n    };\n\n    Instructions.prototype.render = function(context, layer) {\n      var _this = this;\n      this.next.click(function(e) {\n        if (_this.currentPage < (_this.pages.length - 1)) {\n          _this.items[_this.currentPage].removeClass(\"active\");\n          _this.currentPage += 1;\n          _this.items[_this.currentPage].addClass(\"active\");\n          _this.updateEl(_this.currentPage);\n          return _this.render(context);\n        } else {\n          return _this.deferred.resolve(0);\n        }\n      });\n      this.back.click(function(e) {\n        if (_this.currentPage > 0) {\n          _this.items[_this.currentPage].removeClass(\"active\");\n          _this.currentPage -= 1;\n          _this.items[_this.currentPage].addClass(\"active\");\n          _this.updateEl(_this.currentPage);\n          return _this.render(context);\n        }\n      });\n      if (this.currentPage > 0) {\n        this.back.removeClass(\"disabled\");\n      }\n      $(this.pages[this.currentPage]).css({\n        \"min-height\": context.height() - 50\n      });\n      return context.appendHtml(this.el);\n    };\n\n    return Instructions;\n\n  })(html.HtmlResponse);\n\n  exports.Instructions = Instructions;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/html/htmlicon.js":{"id":40,"canonicalName":"src/components/html/htmlicon.js","code":"(function () {\n    var HtmlIcon, html, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    html = require('12', module);\n    HtmlIcon = function (_super) {\n        __extends(HtmlIcon, _super);\n        HtmlIcon.prototype.defaults = {\n            glyph: 'plane',\n            size: 'massive'\n        };\n        function HtmlIcon(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            HtmlIcon.__super__.constructor.call(this, spec);\n            this.html = $('<i></i>');\n            this.html.addClass(this.spec.glyph + ' ' + this.spec.size + ' icon');\n            this.el.append(this.html);\n        }\n        return HtmlIcon;\n    }(html.HtmlStimulus);\n    exports.HtmlIcon = HtmlIcon;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/html/htmlicon.js\"],\"names\":[\"HtmlIcon\",\"html\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"defaults\",\"glyph\",\"size\",\"spec\",\"$\",\"addClass\",\"el\",\"append\",\"HtmlStimulus\",\"exports\"],\"mappings\":\"AACA,CAAC,YAAW;AAAA,IACV,IAAIA,QAAJ,EAAcC,IAAd,EACEC,SAAA,GAAY,GAAGC,cADjB,EAEEC,SAAA,GAAY,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAA,YAAE,SAASC,GAAT,IAAgBD,MAAhB,EAAwB;AAAA,gBAAE,IAAIJ,SAAA,CAAUM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ;AAAA,oBAAiCF,KAAA,CAAME,GAAN,IAAaD,MAAA,CAAOC,GAAP,CAAb,CAAnC;AAAA,aAA1B;AAAA,YAAyF,SAASE,IAAT,GAAgB;AAAA,gBAAE,KAAKC,WAAL,GAAmBL,KAAnB,CAAF;AAAA,aAAzG;AAAA,YAAuII,IAAA,CAAKE,SAAL,GAAiBL,MAAA,CAAOK,SAAxB,CAAvI;AAAA,YAA0KN,KAAA,CAAMM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA1K;AAAA,YAAwMJ,KAAA,CAAMO,SAAN,GAAkBN,MAAA,CAAOK,SAAzB,CAAxM;AAAA,YAA4O,OAAON,KAAP,CAA5O;AAAA,SAFtC,CADU;AAAA,IAKVJ,IAAA,GAAOY,OAAA,C,IAAA,E,MAAA,CAAP,CALU;AAAA,IAOVb,QAAA,GAAY,UAASc,MAAT,EAAiB;AAAA,QAC3BV,SAAA,CAAUJ,QAAV,EAAoBc,MAApB,EAD2B;AAAA,QAG3Bd,QAAA,CAASW,SAAT,CAAmBI,QAAnB,GAA8B;AAAA,YAC5BC,KAAA,EAAO,OADqB;AAAA,YAE5BC,IAAA,EAAM,SAFsB;AAAA,SAA9B,CAH2B;AAAA,QAQ3B,SAASjB,QAAT,CAAkBkB,IAAlB,EAAwB;AAAA,YACtB,IAAIA,IAAA,IAAQ,IAAZ,EAAkB;AAAA,gBAChBA,IAAA,GAAO,EAAP,CADgB;AAAA,aADI;AAAA,YAItBlB,QAAA,CAASY,SAAT,CAAmBF,WAAnB,CAA+BF,IAA/B,CAAoC,IAApC,EAA0CU,IAA1C,EAJsB;AAAA,YAKtB,KAAKjB,IAAL,GAAYkB,CAAA,CAAE,SAAF,CAAZ,CALsB;AAAA,YAMtB,KAAKlB,IAAL,CAAUmB,QAAV,CAAmB,KAAKF,IAAL,CAAUF,KAAV,GAAkB,GAAlB,GAAwB,KAAKE,IAAL,CAAUD,IAAlC,GAAyC,OAA5D,EANsB;AAAA,YAOtB,KAAKI,EAAL,CAAQC,MAAR,CAAe,KAAKrB,IAApB,EAPsB;AAAA,SARG;AAAA,QAkB3B,OAAOD,QAAP,CAlB2B;AAAA,KAAlB,CAoBRC,IAAA,CAAKsB,YApBG,CAAX,CAPU;AAAA,IA6BVC,OAAA,CAAQxB,QAAR,GAAmBA,QAAnB,CA7BU;AAAA,CAAZ,CA+BGQ,IA/BH,CA+BQ,IA/BR\"}","lineCount":34,"mtime":1390100825000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/html/html.js","canonicalName":"src/components/html/html.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.6.3\n(function() {\n  var HtmlIcon, html,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  html = require(\"./html\");\n\n  HtmlIcon = (function(_super) {\n    __extends(HtmlIcon, _super);\n\n    HtmlIcon.prototype.defaults = {\n      glyph: \"plane\",\n      size: \"massive\"\n    };\n\n    function HtmlIcon(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      HtmlIcon.__super__.constructor.call(this, spec);\n      this.html = $(\"<i></i>\");\n      this.html.addClass(this.spec.glyph + \" \" + this.spec.size + \" icon\");\n      this.el.append(this.html);\n    }\n\n    return HtmlIcon;\n\n  })(html.HtmlStimulus);\n\n  exports.HtmlIcon = HtmlIcon;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/html/htmllabel.js":{"id":39,"canonicalName":"src/components/html/htmllabel.js","code":"(function () {\n    var HtmlLabel, html, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    html = require('12', module);\n    HtmlLabel = function (_super) {\n        __extends(HtmlLabel, _super);\n        HtmlLabel.prototype.defaults = {\n            glyph: null,\n            size: 'large',\n            text: 'label',\n            color: 'orange'\n        };\n        function HtmlLabel(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            HtmlLabel.__super__.constructor.call(this, spec);\n            this.el.addClass('ui ' + this.spec.color + ' ' + this.spec.size + ' label');\n            this.el.append(this.spec.text + ' ');\n            if (this.spec.glyph != null) {\n                this.el.append('<i class=\"' + this.spec.glyph + ' ' + this.spec.size + '  icon\"></i>');\n            }\n        }\n        return HtmlLabel;\n    }(html.HtmlStimulus);\n    exports.HtmlLabel = HtmlLabel;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/html/htmllabel.js\"],\"names\":[\"HtmlLabel\",\"html\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"defaults\",\"glyph\",\"size\",\"text\",\"color\",\"spec\",\"el\",\"addClass\",\"append\",\"HtmlStimulus\",\"exports\"],\"mappings\":\"AACA,CAAC,YAAW;AAAA,IACV,IAAIA,SAAJ,EAAeC,IAAf,EACEC,SAAA,GAAY,GAAGC,cADjB,EAEEC,SAAA,GAAY,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAA,YAAE,SAASC,GAAT,IAAgBD,MAAhB,EAAwB;AAAA,gBAAE,IAAIJ,SAAA,CAAUM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ;AAAA,oBAAiCF,KAAA,CAAME,GAAN,IAAaD,MAAA,CAAOC,GAAP,CAAb,CAAnC;AAAA,aAA1B;AAAA,YAAyF,SAASE,IAAT,GAAgB;AAAA,gBAAE,KAAKC,WAAL,GAAmBL,KAAnB,CAAF;AAAA,aAAzG;AAAA,YAAuII,IAAA,CAAKE,SAAL,GAAiBL,MAAA,CAAOK,SAAxB,CAAvI;AAAA,YAA0KN,KAAA,CAAMM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA1K;AAAA,YAAwMJ,KAAA,CAAMO,SAAN,GAAkBN,MAAA,CAAOK,SAAzB,CAAxM;AAAA,YAA4O,OAAON,KAAP,CAA5O;AAAA,SAFtC,CADU;AAAA,IAKVJ,IAAA,GAAOY,OAAA,C,IAAA,E,MAAA,CAAP,CALU;AAAA,IAOVb,SAAA,GAAa,UAASc,MAAT,EAAiB;AAAA,QAC5BV,SAAA,CAAUJ,SAAV,EAAqBc,MAArB,EAD4B;AAAA,QAG5Bd,SAAA,CAAUW,SAAV,CAAoBI,QAApB,GAA+B;AAAA,YAC7BC,KAAA,EAAO,IADsB;AAAA,YAE7BC,IAAA,EAAM,OAFuB;AAAA,YAG7BC,IAAA,EAAM,OAHuB;AAAA,YAI7BC,KAAA,EAAO,QAJsB;AAAA,SAA/B,CAH4B;AAAA,QAU5B,SAASnB,SAAT,CAAmBoB,IAAnB,EAAyB;AAAA,YACvB,IAAIA,IAAA,IAAQ,IAAZ,EAAkB;AAAA,gBAChBA,IAAA,GAAO,EAAP,CADgB;AAAA,aADK;AAAA,YAIvBpB,SAAA,CAAUY,SAAV,CAAoBF,WAApB,CAAgCF,IAAhC,CAAqC,IAArC,EAA2CY,IAA3C,EAJuB;AAAA,YAKvB,KAAKC,EAAL,CAAQC,QAAR,CAAiB,QAAQ,KAAKF,IAAL,CAAUD,KAAlB,GAA0B,GAA1B,GAAgC,KAAKC,IAAL,CAAUH,IAA1C,GAAiD,QAAlE,EALuB;AAAA,YAMvB,KAAKI,EAAL,CAAQE,MAAR,CAAe,KAAKH,IAAL,CAAUF,IAAV,GAAiB,GAAhC,EANuB;AAAA,YAOvB,IAAI,KAAKE,IAAL,CAAUJ,KAAV,IAAmB,IAAvB,EAA6B;AAAA,gBAC3B,KAAKK,EAAL,CAAQE,MAAR,CAAe,eAAgB,KAAKH,IAAL,CAAUJ,KAA1B,GAAkC,GAAlC,GAAwC,KAAKI,IAAL,CAAUH,IAAlD,GAAyD,cAAxE,EAD2B;AAAA,aAPN;AAAA,SAVG;AAAA,QAsB5B,OAAOjB,SAAP,CAtB4B;AAAA,KAAlB,CAwBTC,IAAA,CAAKuB,YAxBI,CAAZ,CAPU;AAAA,IAiCVC,OAAA,CAAQzB,SAAR,GAAoBA,SAApB,CAjCU;AAAA,CAAZ,CAmCGQ,IAnCH,CAmCQ,IAnCR\"}","lineCount":38,"mtime":1390100825000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/html/html.js","canonicalName":"src/components/html/html.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.6.3\n(function() {\n  var HtmlLabel, html,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  html = require(\"./html\");\n\n  HtmlLabel = (function(_super) {\n    __extends(HtmlLabel, _super);\n\n    HtmlLabel.prototype.defaults = {\n      glyph: null,\n      size: \"large\",\n      text: \"label\",\n      color: \"orange\"\n    };\n\n    function HtmlLabel(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      HtmlLabel.__super__.constructor.call(this, spec);\n      this.el.addClass(\"ui \" + this.spec.color + \" \" + this.spec.size + \" label\");\n      this.el.append(this.spec.text + \" \");\n      if (this.spec.glyph != null) {\n        this.el.append(\"<i class=\\\"\" + this.spec.glyph + \" \" + this.spec.size + \"  icon\\\"></i>\");\n      }\n    }\n\n    return HtmlLabel;\n\n  })(html.HtmlStimulus);\n\n  exports.HtmlLabel = HtmlLabel;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/html/htmllink.js":{"id":38,"canonicalName":"src/components/html/htmllink.js","code":"(function () {\n    var HtmlLink, html, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    html = require('12', module);\n    HtmlLink = function (_super) {\n        __extends(HtmlLink, _super);\n        HtmlLink.prototype.defaults = { label: 'link' };\n        function HtmlLink(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            HtmlLink.__super__.constructor.call(this, spec);\n            this.html = $('<a href=\\'#\\'>' + this.spec.label + '</a>');\n            this.el.append(this.html);\n        }\n        return HtmlLink;\n    }(html.HtmlStimulus);\n    exports.HtmlLink = HtmlLink;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/html/htmllink.js\"],\"names\":[\"HtmlLink\",\"html\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"defaults\",\"label\",\"spec\",\"$\",\"el\",\"append\",\"HtmlStimulus\",\"exports\"],\"mappings\":\"AACA,CAAC,YAAW;AAAA,IACV,IAAIA,QAAJ,EAAcC,IAAd,EACEC,SAAA,GAAY,GAAGC,cADjB,EAEEC,SAAA,GAAY,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAA,YAAE,SAASC,GAAT,IAAgBD,MAAhB,EAAwB;AAAA,gBAAE,IAAIJ,SAAA,CAAUM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ;AAAA,oBAAiCF,KAAA,CAAME,GAAN,IAAaD,MAAA,CAAOC,GAAP,CAAb,CAAnC;AAAA,aAA1B;AAAA,YAAyF,SAASE,IAAT,GAAgB;AAAA,gBAAE,KAAKC,WAAL,GAAmBL,KAAnB,CAAF;AAAA,aAAzG;AAAA,YAAuII,IAAA,CAAKE,SAAL,GAAiBL,MAAA,CAAOK,SAAxB,CAAvI;AAAA,YAA0KN,KAAA,CAAMM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA1K;AAAA,YAAwMJ,KAAA,CAAMO,SAAN,GAAkBN,MAAA,CAAOK,SAAzB,CAAxM;AAAA,YAA4O,OAAON,KAAP,CAA5O;AAAA,SAFtC,CADU;AAAA,IAKVJ,IAAA,GAAOY,OAAA,C,IAAA,E,MAAA,CAAP,CALU;AAAA,IAOVb,QAAA,GAAY,UAASc,MAAT,EAAiB;AAAA,QAC3BV,SAAA,CAAUJ,QAAV,EAAoBc,MAApB,EAD2B;AAAA,QAG3Bd,QAAA,CAASW,SAAT,CAAmBI,QAAnB,GAA8B,EAC5BC,KAAA,EAAO,MADqB,EAA9B,CAH2B;AAAA,QAO3B,SAAShB,QAAT,CAAkBiB,IAAlB,EAAwB;AAAA,YACtB,IAAIA,IAAA,IAAQ,IAAZ,EAAkB;AAAA,gBAChBA,IAAA,GAAO,EAAP,CADgB;AAAA,aADI;AAAA,YAItBjB,QAAA,CAASY,SAAT,CAAmBF,WAAnB,CAA+BF,IAA/B,CAAoC,IAApC,EAA0CS,IAA1C,EAJsB;AAAA,YAKtB,KAAKhB,IAAL,GAAYiB,CAAA,CAAE,mBAAiB,KAAKD,IAAL,CAAUD,KAA3B,GAAmC,MAArC,CAAZ,CALsB;AAAA,YAMtB,KAAKG,EAAL,CAAQC,MAAR,CAAe,KAAKnB,IAApB,EANsB;AAAA,SAPG;AAAA,QAgB3B,OAAOD,QAAP,CAhB2B;AAAA,KAAlB,CAkBRC,IAAA,CAAKoB,YAlBG,CAAX,CAPU;AAAA,IA2BVC,OAAA,CAAQtB,QAAR,GAAmBA,QAAnB,CA3BU;AAAA,CAAZ,CA6BGQ,IA7BH,CA6BQ,IA7BR\"}","lineCount":30,"mtime":1392952482000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/html/html.js","canonicalName":"src/components/html/html.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.7.1\n(function() {\n  var HtmlLink, html,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  html = require(\"./html\");\n\n  HtmlLink = (function(_super) {\n    __extends(HtmlLink, _super);\n\n    HtmlLink.prototype.defaults = {\n      label: \"link\"\n    };\n\n    function HtmlLink(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      HtmlLink.__super__.constructor.call(this, spec);\n      this.html = $(\"<a href='#'>\" + this.spec.label + \"</a>\");\n      this.el.append(this.html);\n    }\n\n    return HtmlLink;\n\n  })(html.HtmlStimulus);\n\n  exports.HtmlLink = HtmlLink;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/html/htmlbutton.js":{"id":37,"canonicalName":"src/components/html/htmlbutton.js","code":"(function () {\n    var HtmlButton, html, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    html = require('12', module);\n    HtmlButton = function (_super) {\n        __extends(HtmlButton, _super);\n        HtmlButton.prototype.defaults = {\n            label: 'Next',\n            'class': ''\n        };\n        function HtmlButton(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            HtmlButton.__super__.constructor.call(this, spec);\n            this.el.addClass('ui button');\n            this.el.addClass(this.spec['class']);\n            this.el.append(this.spec.label);\n        }\n        return HtmlButton;\n    }(html.HtmlStimulus);\n    exports.HtmlButton = HtmlButton;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/html/htmlbutton.js\"],\"names\":[\"HtmlButton\",\"html\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"defaults\",\"label\",\"spec\",\"el\",\"addClass\",\"append\",\"HtmlStimulus\",\"exports\"],\"mappings\":\"AACA,CAAC,YAAW;AAAA,IACV,IAAIA,UAAJ,EAAgBC,IAAhB,EACEC,SAAA,GAAY,GAAGC,cADjB,EAEEC,SAAA,GAAY,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAA,YAAE,SAASC,GAAT,IAAgBD,MAAhB,EAAwB;AAAA,gBAAE,IAAIJ,SAAA,CAAUM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ;AAAA,oBAAiCF,KAAA,CAAME,GAAN,IAAaD,MAAA,CAAOC,GAAP,CAAb,CAAnC;AAAA,aAA1B;AAAA,YAAyF,SAASE,IAAT,GAAgB;AAAA,gBAAE,KAAKC,WAAL,GAAmBL,KAAnB,CAAF;AAAA,aAAzG;AAAA,YAAuII,IAAA,CAAKE,SAAL,GAAiBL,MAAA,CAAOK,SAAxB,CAAvI;AAAA,YAA0KN,KAAA,CAAMM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA1K;AAAA,YAAwMJ,KAAA,CAAMO,SAAN,GAAkBN,MAAA,CAAOK,SAAzB,CAAxM;AAAA,YAA4O,OAAON,KAAP,CAA5O;AAAA,SAFtC,CADU;AAAA,IAKVJ,IAAA,GAAOY,OAAA,C,IAAA,E,MAAA,CAAP,CALU;AAAA,IAOVb,UAAA,GAAc,UAASc,MAAT,EAAiB;AAAA,QAC7BV,SAAA,CAAUJ,UAAV,EAAsBc,MAAtB,EAD6B;AAAA,QAG7Bd,UAAA,CAAWW,SAAX,CAAqBI,QAArB,GAAgC;AAAA,YAC9BC,KAAA,EAAO,MADuB;AAAA,YAE9B,SAAS,EAFqB;AAAA,SAAhC,CAH6B;AAAA,QAQ7B,SAAShB,UAAT,CAAoBiB,IAApB,EAA0B;AAAA,YACxB,IAAIA,IAAA,IAAQ,IAAZ,EAAkB;AAAA,gBAChBA,IAAA,GAAO,EAAP,CADgB;AAAA,aADM;AAAA,YAIxBjB,UAAA,CAAWY,SAAX,CAAqBF,WAArB,CAAiCF,IAAjC,CAAsC,IAAtC,EAA4CS,IAA5C,EAJwB;AAAA,YAKxB,KAAKC,EAAL,CAAQC,QAAR,CAAiB,WAAjB,EALwB;AAAA,YAMxB,KAAKD,EAAL,CAAQC,QAAR,CAAiB,KAAKF,IAAL,CAAU,OAAV,CAAjB,EANwB;AAAA,YAOxB,KAAKC,EAAL,CAAQE,MAAR,CAAe,KAAKH,IAAL,CAAUD,KAAzB,EAPwB;AAAA,SARG;AAAA,QAkB7B,OAAOhB,UAAP,CAlB6B;AAAA,KAAlB,CAoBVC,IAAA,CAAKoB,YApBK,CAAb,CAPU;AAAA,IA6BVC,OAAA,CAAQtB,UAAR,GAAqBA,UAArB,CA7BU;AAAA,CAAZ,CA+BGQ,IA/BH,CA+BQ,IA/BR\"}","lineCount":34,"mtime":1392952975000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/html/html.js","canonicalName":"src/components/html/html.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.7.1\n(function() {\n  var HtmlButton, html,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  html = require(\"./html\");\n\n  HtmlButton = (function(_super) {\n    __extends(HtmlButton, _super);\n\n    HtmlButton.prototype.defaults = {\n      label: \"Next\",\n      \"class\": \"\"\n    };\n\n    function HtmlButton(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      HtmlButton.__super__.constructor.call(this, spec);\n      this.el.addClass(\"ui button\");\n      this.el.addClass(this.spec[\"class\"]);\n      this.el.append(this.spec.label);\n    }\n\n    return HtmlButton;\n\n  })(html.HtmlStimulus);\n\n  exports.HtmlButton = HtmlButton;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/node_modules/mixen/mixen.js":{"id":36,"canonicalName":"node_modules/mixen/mixen.js","code":"(function () {\n    var Mixen, indexOf, moduleSuper, uniqueId, __slice = [].slice, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    indexOf = function (haystack, needle) {\n        var i, stalk, _i, _len;\n        for (i = _i = 0, _len = haystack.length; _i < _len; i = ++_i) {\n            stalk = haystack[i];\n            if (stalk === needle) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    uniqueId = function () {\n        var id;\n        id = 0;\n        return function () {\n            return id++;\n        };\n    }();\n    Mixen = function () {\n        return Mixen.createMixen.apply(Mixen, arguments);\n    };\n    Mixen.createdMixens = {};\n    Mixen.createMixen = function () {\n        var Inst, Last, method, mods, module, _base, _i, _len, _ref, _ref1;\n        mods = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n        Last = mods[mods.length - 1];\n        _ref = mods.slice(0).reverse();\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            module = _ref[_i];\n            Inst = function (_super) {\n                __extends(Inst, _super);\n                function Inst() {\n                    var args, mod, _j, _len1;\n                    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n                    for (_j = 0, _len1 = mods.length; _j < _len1; _j++) {\n                        mod = mods[_j];\n                        mod.apply(this, args);\n                    }\n                }\n                return Inst;\n            }(Last);\n            Last = Inst;\n            for (method in module.prototype) {\n                Inst.prototype[method] = module.prototype[method];\n            }\n            _ref1 = module.prototype;\n            for (method in _ref1) {\n                if (!__hasProp.call(_ref1, method))\n                    continue;\n                if (method === 'constructor') {\n                    continue;\n                }\n                if (typeof module.prototype[method] !== 'function') {\n                    continue;\n                }\n                if (module.__super__ == null) {\n                    module.__super__ = {};\n                }\n                if ((_base = module.__super__)[method] == null) {\n                    _base[method] = moduleSuper(module, method);\n                }\n            }\n        }\n        Last.prototype._mixen_id = uniqueId();\n        Mixen.createdMixens[Last.prototype._mixen_id] = mods;\n        return Last;\n    };\n    moduleSuper = function (module, method) {\n        return function () {\n            var args, current, id, modules, nextModule, pos;\n            args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n            current = this.constructor.prototype;\n            id = null;\n            while (true) {\n                if (current === Object.prototype) {\n                    return;\n                }\n                id = current._mixen_id;\n                if (id != null) {\n                    break;\n                }\n                current = current.constructor.__super__.constructor.prototype;\n            }\n            if (id == null) {\n                return;\n            }\n            modules = Mixen.createdMixens[id];\n            pos = indexOf(modules, module);\n            nextModule = null;\n            while (pos++ < modules.length - 1) {\n                nextModule = modules[pos];\n                if (nextModule.prototype[method] != null) {\n                    break;\n                }\n            }\n            if (nextModule != null && nextModule.prototype != null && nextModule.prototype[method] != null) {\n                return nextModule.prototype[method].apply(this, args);\n            }\n        };\n    };\n    if (typeof define === 'function' && define.amd) {\n        define(function () {\n            return Mixen;\n        });\n    } else if (typeof exports === 'object') {\n        module.exports = Mixen;\n    } else {\n        window.Mixen = Mixen;\n    }\n}.call(this));","map":"{\"version\":3,\"sources\":[\"node_modules/mixen/mixen.js\"],\"names\":[\"Mixen\",\"indexOf\",\"moduleSuper\",\"uniqueId\",\"__slice\",\"slice\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"haystack\",\"needle\",\"i\",\"stalk\",\"_i\",\"_len\",\"length\",\"id\",\"createMixen\",\"apply\",\"arguments\",\"createdMixens\",\"Inst\",\"Last\",\"method\",\"mods\",\"module\",\"_base\",\"_ref\",\"_ref1\",\"reverse\",\"_super\",\"args\",\"mod\",\"_j\",\"_len1\",\"_mixen_id\",\"current\",\"modules\",\"nextModule\",\"pos\",\"Object\",\"define\",\"amd\",\"exports\",\"window\"],\"mappings\":\"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\"}","lineCount":123,"mtime":1390100825000,"deps":[],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":true,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.6.3\n(function() {\n  var Mixen, indexOf, moduleSuper, uniqueId,\n    __slice = [].slice,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  indexOf = function(haystack, needle) {\n    var i, stalk, _i, _len;\n    for (i = _i = 0, _len = haystack.length; _i < _len; i = ++_i) {\n      stalk = haystack[i];\n      if (stalk === needle) {\n        return i;\n      }\n    }\n    return -1;\n  };\n\n  uniqueId = (function() {\n    var id;\n    id = 0;\n    return function() {\n      return id++;\n    };\n  })();\n\n  Mixen = function() {\n    return Mixen.createMixen.apply(Mixen, arguments);\n  };\n\n  Mixen.createdMixens = {};\n\n  Mixen.createMixen = function() {\n    var Inst, Last, method, mods, module, _base, _i, _len, _ref, _ref1;\n    mods = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n    Last = mods[mods.length - 1];\n    _ref = mods.slice(0).reverse();\n    for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n      module = _ref[_i];\n      Inst = (function(_super) {\n        __extends(Inst, _super);\n\n        function Inst() {\n          var args, mod, _j, _len1;\n          args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n          for (_j = 0, _len1 = mods.length; _j < _len1; _j++) {\n            mod = mods[_j];\n            mod.apply(this, args);\n          }\n        }\n\n        return Inst;\n\n      })(Last);\n      Last = Inst;\n      for (method in module.prototype) {\n        Inst.prototype[method] = module.prototype[method];\n      }\n      _ref1 = module.prototype;\n      for (method in _ref1) {\n        if (!__hasProp.call(_ref1, method)) continue;\n        if (method === 'constructor') {\n          continue;\n        }\n        if (typeof module.prototype[method] !== 'function') {\n          continue;\n        }\n        if (module.__super__ == null) {\n          module.__super__ = {};\n        }\n        if ((_base = module.__super__)[method] == null) {\n          _base[method] = moduleSuper(module, method);\n        }\n      }\n    }\n    Last.prototype._mixen_id = uniqueId();\n    Mixen.createdMixens[Last.prototype._mixen_id] = mods;\n    return Last;\n  };\n\n  moduleSuper = function(module, method) {\n    return function() {\n      var args, current, id, modules, nextModule, pos;\n      args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n      current = this.constructor.prototype;\n      id = null;\n      while (true) {\n        if (current === Object.prototype) {\n          return;\n        }\n        id = current._mixen_id;\n        if (id != null) {\n          break;\n        }\n        current = current.constructor.__super__.constructor.prototype;\n      }\n      if (id == null) {\n        return;\n      }\n      modules = Mixen.createdMixens[id];\n      pos = indexOf(modules, module);\n      nextModule = null;\n      while (pos++ < modules.length - 1) {\n        nextModule = modules[pos];\n        if (nextModule.prototype[method] != null) {\n          break;\n        }\n      }\n      if ((nextModule != null) && (nextModule.prototype != null) && (nextModule.prototype[method] != null)) {\n        return nextModule.prototype[method].apply(this, args);\n      }\n    };\n  };\n\n  if (typeof define === 'function' && define.amd) {\n    define(function() {\n      return Mixen;\n    });\n  } else if (typeof exports === 'object') {\n    module.exports = Mixen;\n  } else {\n    window.Mixen = Mixen;\n  }\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/canvas/canvas.js":{"id":11,"canonicalName":"src/components/canvas/canvas.js","code":"(function () {\n    var Canvas;\n    Canvas = {};\n    Canvas.Arrow = require('46', module).Arrow;\n    Canvas.Background = require('23', module).Background;\n    Canvas.Blank = require('47', module).Blank;\n    Canvas.Circle = require('48', module).Circle;\n    Canvas.Clear = require('49', module).Clear;\n    Canvas.FixationCross = require('50', module).FixationCross;\n    Canvas.CanvasBorder = require('51', module).CanvasBorder;\n    Canvas.GridLines = require('52', module).GridLines;\n    Canvas.Picture = require('53', module).Picture;\n    Canvas.Rectangle = require('54', module).Rectangle;\n    Canvas.StartButton = require('55', module).StartButton;\n    Canvas.Text = require('56', module).Text;\n    Canvas.TextInput = require('57', module).TextInput;\n    Canvas.LabeledElement = require('58', module).LabeledElement;\n    exports.Canvas = Canvas;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/canvas/canvas.js\"],\"names\":[\"Canvas\",\"Arrow\",\"require\",\"Background\",\"Blank\",\"Circle\",\"Clear\",\"FixationCross\",\"CanvasBorder\",\"GridLines\",\"Picture\",\"Rectangle\",\"StartButton\",\"Text\",\"TextInput\",\"LabeledElement\",\"exports\",\"call\"],\"mappings\":\"AACA,CAAC,YAAW;AAAA,IACV,IAAIA,MAAJ,CADU;AAAA,IAGVA,MAAA,GAAS,EAAT,CAHU;AAAA,IAKVA,MAAA,CAAOC,KAAP,GAAeC,OAAA,C,IAAA,E,MAAA,EAAmBD,KAAlC,CALU;AAAA,IAOVD,MAAA,CAAOG,UAAP,GAAoBD,OAAA,C,IAAA,E,MAAA,EAAwBC,UAA5C,CAPU;AAAA,IASVH,MAAA,CAAOI,KAAP,GAAeF,OAAA,C,IAAA,E,MAAA,EAAmBE,KAAlC,CATU;AAAA,IAWVJ,MAAA,CAAOK,MAAP,GAAgBH,OAAA,C,IAAA,E,MAAA,EAAoBG,MAApC,CAXU;AAAA,IAaVL,MAAA,CAAOM,KAAP,GAAeJ,OAAA,C,IAAA,E,MAAA,EAAmBI,KAAlC,CAbU;AAAA,IAeVN,MAAA,CAAOO,aAAP,GAAuBL,OAAA,C,IAAA,E,MAAA,EAA2BK,aAAlD,CAfU;AAAA,IAiBVP,MAAA,CAAOQ,YAAP,GAAsBN,OAAA,C,IAAA,E,MAAA,EAA0BM,YAAhD,CAjBU;AAAA,IAmBVR,MAAA,CAAOS,SAAP,GAAmBP,OAAA,C,IAAA,E,MAAA,EAAuBO,SAA1C,CAnBU;AAAA,IAqBVT,MAAA,CAAOU,OAAP,GAAiBR,OAAA,C,IAAA,E,MAAA,EAAqBQ,OAAtC,CArBU;AAAA,IAuBVV,MAAA,CAAOW,SAAP,GAAmBT,OAAA,C,IAAA,E,MAAA,EAAuBS,SAA1C,CAvBU;AAAA,IAyBVX,MAAA,CAAOY,WAAP,GAAqBV,OAAA,C,IAAA,E,MAAA,EAAyBU,WAA9C,CAzBU;AAAA,IA2BVZ,MAAA,CAAOa,IAAP,GAAcX,OAAA,C,IAAA,E,MAAA,EAAkBW,IAAhC,CA3BU;AAAA,IA6BVb,MAAA,CAAOc,SAAP,GAAmBZ,OAAA,C,IAAA,E,MAAA,EAAuBY,SAA1C,CA7BU;AAAA,IA+BVd,MAAA,CAAOe,cAAP,GAAwBb,OAAA,C,IAAA,E,MAAA,EAAqBa,cAA7C,CA/BU;AAAA,IAiCVC,OAAA,CAAQhB,MAAR,GAAiBA,MAAjB,CAjCU;AAAA,CAAZ,CAmCGiB,IAnCH,CAmCQ,IAnCR\"}","lineCount":19,"mtime":1392176501000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/canvas/arrow.js","canonicalName":"src/components/canvas/arrow.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/canvas/background.js","canonicalName":"src/components/canvas/background.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/canvas/blank.js","canonicalName":"src/components/canvas/blank.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/canvas/circle.js","canonicalName":"src/components/canvas/circle.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/canvas/clear.js","canonicalName":"src/components/canvas/clear.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/canvas/fixationcross.js","canonicalName":"src/components/canvas/fixationcross.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/canvas/canvasborder.js","canonicalName":"src/components/canvas/canvasborder.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/canvas/gridlines.js","canonicalName":"src/components/canvas/gridlines.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/canvas/picture.js","canonicalName":"src/components/canvas/picture.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/canvas/rectangle.js","canonicalName":"src/components/canvas/rectangle.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/canvas/startbutton.js","canonicalName":"src/components/canvas/startbutton.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/canvas/text.js","canonicalName":"src/components/canvas/text.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/canvas/textinput.js","canonicalName":"src/components/canvas/textinput.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/canvas/labeled.js","canonicalName":"src/components/canvas/labeled.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.6.3\n(function() {\n  var Canvas;\n\n  Canvas = {};\n\n  Canvas.Arrow = require(\"./arrow\").Arrow;\n\n  Canvas.Background = require(\"./background\").Background;\n\n  Canvas.Blank = require(\"./blank\").Blank;\n\n  Canvas.Circle = require(\"./circle\").Circle;\n\n  Canvas.Clear = require(\"./clear\").Clear;\n\n  Canvas.FixationCross = require(\"./fixationcross\").FixationCross;\n\n  Canvas.CanvasBorder = require(\"./canvasborder\").CanvasBorder;\n\n  Canvas.GridLines = require(\"./gridlines\").GridLines;\n\n  Canvas.Picture = require(\"./picture\").Picture;\n\n  Canvas.Rectangle = require(\"./rectangle\").Rectangle;\n\n  Canvas.StartButton = require(\"./startbutton\").StartButton;\n\n  Canvas.Text = require(\"./text\").Text;\n\n  Canvas.TextInput = require(\"./textinput\").TextInput;\n\n  Canvas.LabeledElement = require(\"./labeled\").LabeledElement;\n\n  exports.Canvas = Canvas;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/canvas/labeled.js":{"id":58,"canonicalName":"src/components/canvas/labeled.js","code":"(function () {\n    var Kinetic, LabeledElement, StimResp, Text, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Kinetic = require('15', module).Kinetic;\n    Text = require('59', module).Text;\n    StimResp = require('8', module);\n    LabeledElement = function (_super) {\n        __extends(LabeledElement, _super);\n        LabeledElement.prototype.defaults = {\n            position: 'below',\n            content: 'Label',\n            align: 'center',\n            gap: 10,\n            fontSize: 32,\n            fill: 'black',\n            fontFamily: 'Arial'\n        };\n        function LabeledElement(element, spec) {\n            this.element = element;\n            if (spec == null) {\n                spec = {};\n            }\n            LabeledElement.__super__.constructor.call(this, spec);\n        }\n        LabeledElement.prototype.render = function (context) {\n            var target;\n            target = this.element.render(context);\n            this.text = new Kinetic.Text({\n                x: 0,\n                y: 0,\n                text: this.spec.content,\n                fontSize: this.spec.fontSize,\n                fill: this.spec.fill,\n                align: this.spec.align,\n                width: target.width(),\n                fontFamily: this.spec.fontFamily,\n                padding: 2\n            });\n            console.log('labeled text', this.text.getPosition());\n            console.log('labeled target width:', target.width());\n            console.log('labeled target height:', target.height());\n            switch (this.spec.position) {\n            case 'below':\n                this.text.setPosition({\n                    x: target.x(),\n                    y: target.y() + target.height() + this.spec.gap\n                });\n                break;\n            case 'above':\n                this.text.setPosition({\n                    x: target.x(),\n                    y: target.y() - this.text.getTextHeight()\n                });\n                break;\n            case 'left':\n                this.text.setPosition({\n                    x: target.x() - this.text.getTextWidth() - this.spec.gap,\n                    y: target.y()\n                });\n                break;\n            case 'right':\n                this.text.setPosition({\n                    x: target.x() + target.width() + this.spec.gap,\n                    y: target.y()\n                });\n            }\n            return new StimResp.ContainerDrawable([\n                target,\n                new StimResp.KineticDrawable(this.text)\n            ]);\n        };\n        return LabeledElement;\n    }(StimResp.Stimulus);\n    exports.LabeledElement = LabeledElement;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/canvas/labeled.js\"],\"names\":[\"Kinetic\",\"LabeledElement\",\"StimResp\",\"Text\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"defaults\",\"position\",\"content\",\"align\",\"gap\",\"fontSize\",\"fill\",\"fontFamily\",\"element\",\"spec\",\"render\",\"context\",\"target\",\"text\",\"x\",\"y\",\"width\",\"padding\",\"console\",\"log\",\"getPosition\",\"height\",\"setPosition\",\"getTextHeight\",\"getTextWidth\",\"ContainerDrawable\",\"KineticDrawable\",\"Stimulus\",\"exports\"],\"mappings\":\"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\"}","lineCount":86,"mtime":1392686969000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/canvas/Text.js","canonicalName":"src/components/canvas/Text.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.7.1\n(function() {\n  var Kinetic, LabeledElement, StimResp, Text,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Kinetic = require(\"../../../jslibs/kinetic\").Kinetic;\n\n  Text = require(\"./Text\").Text;\n\n  StimResp = require(\"../../stimresp\");\n\n  LabeledElement = (function(_super) {\n    __extends(LabeledElement, _super);\n\n    LabeledElement.prototype.defaults = {\n      position: \"below\",\n      content: \"Label\",\n      align: \"center\",\n      gap: 10,\n      fontSize: 32,\n      fill: \"black\",\n      fontFamily: \"Arial\"\n    };\n\n    function LabeledElement(element, spec) {\n      this.element = element;\n      if (spec == null) {\n        spec = {};\n      }\n      LabeledElement.__super__.constructor.call(this, spec);\n    }\n\n    LabeledElement.prototype.render = function(context) {\n      var target;\n      target = this.element.render(context);\n      this.text = new Kinetic.Text({\n        x: 0,\n        y: 0,\n        text: this.spec.content,\n        fontSize: this.spec.fontSize,\n        fill: this.spec.fill,\n        align: this.spec.align,\n        width: target.width(),\n        fontFamily: this.spec.fontFamily,\n        padding: 2\n      });\n      console.log(\"labeled text\", this.text.getPosition());\n      console.log(\"labeled target width:\", target.width());\n      console.log(\"labeled target height:\", target.height());\n      switch (this.spec.position) {\n        case \"below\":\n          this.text.setPosition({\n            x: target.x(),\n            y: target.y() + target.height() + this.spec.gap\n          });\n          break;\n        case \"above\":\n          this.text.setPosition({\n            x: target.x(),\n            y: target.y() - this.text.getTextHeight()\n          });\n          break;\n        case \"left\":\n          this.text.setPosition({\n            x: target.x() - this.text.getTextWidth() - this.spec.gap,\n            y: target.y()\n          });\n          break;\n        case \"right\":\n          this.text.setPosition({\n            x: target.x() + target.width() + this.spec.gap,\n            y: target.y()\n          });\n      }\n      return new StimResp.ContainerDrawable([target, new StimResp.KineticDrawable(this.text)]);\n    };\n\n    return LabeledElement;\n\n  })(StimResp.Stimulus);\n\n  exports.LabeledElement = LabeledElement;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/canvas/Text.js":{"id":59,"canonicalName":"src/components/canvas/Text.js","code":"(function () {\n    var KStimulus, Kinetic, Text, layout, _, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    layout = require('9', module);\n    Kinetic = require('15', module).Kinetic;\n    _ = require('16', module);\n    KStimulus = require('8', module).KineticStimulus;\n    Text = function (_super) {\n        __extends(Text, _super);\n        Text.prototype.defaults = {\n            content: 'Text',\n            x: 5,\n            y: 5,\n            width: null,\n            fill: 'black',\n            fontSize: 40,\n            fontFamily: 'Arial',\n            align: 'center',\n            position: null\n        };\n        function Text(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            if (spec.content != null && _.isArray(spec.content)) {\n                spec.content = spec.content.join(' \\n ');\n                if (spec.lineHeight == null) {\n                    spec.lineHeight = 2;\n                }\n            }\n            Text.__super__.constructor.call(this, spec);\n        }\n        Text.prototype.initialize = function () {\n            return this.text = new Kinetic.Text({\n                x: 0,\n                y: 0,\n                text: this.spec.content,\n                fontSize: this.spec.fontSize,\n                fontFamily: this.spec.fontFamily,\n                fill: this.spec.fill,\n                lineHeight: this.spec.lineHeight || 1,\n                width: this.spec.width,\n                listening: false,\n                align: this.spec.align\n            });\n        };\n        Text.prototype.render = function (context, layer) {\n            var coords;\n            coords = this.computeCoordinates(context, this.spec.position, this.text.getWidth(), this.text.getHeight());\n            this.text.setPosition({\n                x: coords[0],\n                y: coords[1]\n            });\n            return this.presentable(this.text);\n        };\n        return Text;\n    }(KStimulus);\n    exports.Text = Text;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/canvas/Text.js\"],\"names\":[\"KStimulus\",\"Kinetic\",\"Text\",\"layout\",\"_\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"KineticStimulus\",\"_super\",\"defaults\",\"content\",\"x\",\"y\",\"width\",\"fill\",\"fontSize\",\"fontFamily\",\"align\",\"position\",\"spec\",\"isArray\",\"join\",\"lineHeight\",\"initialize\",\"text\",\"listening\",\"render\",\"context\",\"layer\",\"coords\",\"computeCoordinates\",\"getWidth\",\"getHeight\",\"setPosition\",\"presentable\",\"exports\"],\"mappings\":\"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\"}","lineCount":70,"mtime":1392647443000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/src/layout.js","canonicalName":"src/layout.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.7.1\n(function() {\n  var KStimulus, Kinetic, Text, layout, _,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  layout = require(\"../../layout\");\n\n  Kinetic = require(\"../../../jslibs/kinetic\").Kinetic;\n\n  _ = require('lodash');\n\n  KStimulus = require(\"../../stimresp\").KineticStimulus;\n\n  Text = (function(_super) {\n    __extends(Text, _super);\n\n    Text.prototype.defaults = {\n      content: \"Text\",\n      x: 5,\n      y: 5,\n      width: null,\n      fill: \"black\",\n      fontSize: 40,\n      fontFamily: \"Arial\",\n      align: \"center\",\n      position: null\n    };\n\n    function Text(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      if ((spec.content != null) && _.isArray(spec.content)) {\n        spec.content = spec.content.join(' \\n ');\n        if (spec.lineHeight == null) {\n          spec.lineHeight = 2;\n        }\n      }\n      Text.__super__.constructor.call(this, spec);\n    }\n\n    Text.prototype.initialize = function() {\n      return this.text = new Kinetic.Text({\n        x: 0,\n        y: 0,\n        text: this.spec.content,\n        fontSize: this.spec.fontSize,\n        fontFamily: this.spec.fontFamily,\n        fill: this.spec.fill,\n        lineHeight: this.spec.lineHeight || 1,\n        width: this.spec.width,\n        listening: false,\n        align: this.spec.align\n      });\n    };\n\n    Text.prototype.render = function(context, layer) {\n      var coords;\n      coords = this.computeCoordinates(context, this.spec.position, this.text.getWidth(), this.text.getHeight());\n      this.text.setPosition({\n        x: coords[0],\n        y: coords[1]\n      });\n      return this.presentable(this.text);\n    };\n\n    return Text;\n\n  })(KStimulus);\n\n  exports.Text = Text;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/canvas/textinput.js":{"id":57,"canonicalName":"src/components/canvas/textinput.js","code":"(function () {\n    var KStimulus, Kinetic, TextInput, utils, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    utils = require('5', module);\n    Kinetic = require('15', module).Kinetic;\n    KStimulus = require('8', module).KineticStimulus;\n    TextInput = function (_super) {\n        __extends(TextInput, _super);\n        TextInput.prototype.defaults = {\n            x: 100,\n            y: 100,\n            width: 200,\n            height: 40,\n            defaultValue: '',\n            fill: '#FAF5E6',\n            stroke: '#0099FF',\n            strokeWidth: 1,\n            content: ''\n        };\n        function TextInput(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            TextInput.__super__.constructor.call(this, spec);\n            utils.disableBrowserBack();\n        }\n        TextInput.prototype.getChar = function (e) {\n            if (e.keyCode !== 16) {\n                if (e.keyCode >= 65 && e.keyCode <= 90) {\n                    if (e.shiftKey) {\n                        return String.fromCharCode(e.keyCode);\n                    } else {\n                        return String.fromCharCode(e.keyCode + 32);\n                    }\n                } else if (e.keyCode >= 48 && e.keyCode <= 57) {\n                    return String.fromCharCode(e.keyCode);\n                } else {\n                    switch (e.keyCode) {\n                    case 186:\n                        return ';';\n                    case 187:\n                        return '=';\n                    case 188:\n                        return ',';\n                    case 189:\n                        return '-';\n                    default:\n                        return '';\n                    }\n                }\n            } else {\n                return String.fromCharCode(e.keyCode);\n            }\n        };\n        TextInput.prototype.animateCursor = function (layer, cursor) {\n            var flashTime;\n            flashTime = 0;\n            return new Kinetic.Animation(function (_this) {\n                return function (frame) {\n                    if (frame.time > flashTime + 500) {\n                        flashTime = frame.time;\n                        if (cursor.getOpacity() === 1) {\n                            cursor.setOpacity(0);\n                        } else {\n                            cursor.setOpacity(1);\n                        }\n                        return layer.draw();\n                    }\n                };\n            }(this), layer);\n        };\n        TextInput.prototype.render = function (context, layer) {\n            var cursor, cursorBlink, enterPressed, fsize, group, keyStream, text, textContent, textRect;\n            textRect = new Kinetic.Rect({\n                x: this.spec.x,\n                y: this.spec.y,\n                width: this.spec.width,\n                height: this.spec.height,\n                fill: this.spec.fill,\n                cornerRadius: 4,\n                lineJoin: 'round',\n                stroke: this.spec.stroke,\n                strokeWidth: this.spec.strokeWidth\n            });\n            textContent = this.spec.content;\n            fsize = 0.85 * this.spec.height;\n            text = new Kinetic.Text({\n                text: this.spec.content,\n                x: this.spec.x + 2,\n                y: this.spec.y - 5,\n                height: this.spec.height,\n                fontSize: fsize,\n                fill: 'black',\n                padding: 10,\n                align: 'left'\n            });\n            cursor = new Kinetic.Rect({\n                x: text.getX() + text.getWidth() - 7,\n                y: this.spec.y + 5,\n                width: 1.5,\n                height: text.getHeight() - 10,\n                fill: 'black'\n            });\n            enterPressed = false;\n            keyStream = context.keydownStream();\n            keyStream.takeWhile(function (_this) {\n                return function (x) {\n                    return enterPressed === false && !_this.stopped;\n                };\n            }(this)).onValue(function (_this) {\n                return function (event) {\n                    var char;\n                    if (event.keyCode === 13) {\n                        return enterPressed = true;\n                    } else if (event.keyCode === 8) {\n                        textContent = textContent.slice(0, -1);\n                        text.setText(textContent);\n                        cursor.setX(text.getX() + text.getWidth() - 7);\n                        return layer.draw();\n                    } else if (text.getWidth() > textRect.getWidth()) {\n                    } else {\n                        char = _this.getChar(event);\n                        textContent += char;\n                        text.setText(textContent);\n                        cursor.setX(text.getX() + text.getWidth() - 7);\n                        return layer.draw();\n                    }\n                };\n            }(this));\n            cursorBlink = this.animateCursor(layer, cursor);\n            cursorBlink.start();\n            group = new Kinetic.Group({});\n            group.add(textRect);\n            group.add(cursor);\n            group.add(text);\n            return layer.add(group);\n        };\n        return TextInput;\n    }(KStimulus);\n    exports.TextInput = TextInput;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/canvas/textinput.js\"],\"names\":[\"KStimulus\",\"Kinetic\",\"TextInput\",\"utils\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"KineticStimulus\",\"_super\",\"defaults\",\"x\",\"y\",\"width\",\"height\",\"defaultValue\",\"fill\",\"stroke\",\"strokeWidth\",\"content\",\"spec\",\"disableBrowserBack\",\"getChar\",\"e\",\"keyCode\",\"shiftKey\",\"String\",\"fromCharCode\",\"animateCursor\",\"layer\",\"cursor\",\"flashTime\",\"Animation\",\"_this\",\"frame\",\"time\",\"getOpacity\",\"setOpacity\",\"draw\",\"render\",\"context\",\"cursorBlink\",\"enterPressed\",\"fsize\",\"group\",\"keyStream\",\"text\",\"textContent\",\"textRect\",\"Rect\",\"cornerRadius\",\"lineJoin\",\"Text\",\"fontSize\",\"padding\",\"align\",\"getX\",\"getWidth\",\"getHeight\",\"keydownStream\",\"takeWhile\",\"stopped\",\"onValue\",\"event\",\"char\",\"slice\",\"setText\",\"setX\",\"start\",\"Group\",\"add\",\"exports\"],\"mappings\":\"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\"}","lineCount":152,"mtime":1392646867000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/src/utils.js","canonicalName":"src/utils.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.7.1\n(function() {\n  var KStimulus, Kinetic, TextInput, utils,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  utils = require(\"../../utils\");\n\n  Kinetic = require(\"../../../jslibs/kinetic\").Kinetic;\n\n  KStimulus = require(\"../../stimresp\").KineticStimulus;\n\n  TextInput = (function(_super) {\n    __extends(TextInput, _super);\n\n    TextInput.prototype.defaults = {\n      x: 100,\n      y: 100,\n      width: 200,\n      height: 40,\n      defaultValue: \"\",\n      fill: \"#FAF5E6\",\n      stroke: \"#0099FF\",\n      strokeWidth: 1,\n      content: \"\"\n    };\n\n    function TextInput(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      TextInput.__super__.constructor.call(this, spec);\n      utils.disableBrowserBack();\n    }\n\n    TextInput.prototype.getChar = function(e) {\n      if (e.keyCode !== 16) {\n        if (e.keyCode >= 65 && e.keyCode <= 90) {\n          if (e.shiftKey) {\n            return String.fromCharCode(e.keyCode);\n          } else {\n            return String.fromCharCode(e.keyCode + 32);\n          }\n        } else if (e.keyCode >= 48 && e.keyCode <= 57) {\n          return String.fromCharCode(e.keyCode);\n        } else {\n          switch (e.keyCode) {\n            case 186:\n              return \";\";\n            case 187:\n              return \"=\";\n            case 188:\n              return \",\";\n            case 189:\n              return \"-\";\n            default:\n              return \"\";\n          }\n        }\n      } else {\n        return String.fromCharCode(e.keyCode);\n      }\n    };\n\n    TextInput.prototype.animateCursor = function(layer, cursor) {\n      var flashTime;\n      flashTime = 0;\n      return new Kinetic.Animation((function(_this) {\n        return function(frame) {\n          if (frame.time > (flashTime + 500)) {\n            flashTime = frame.time;\n            if (cursor.getOpacity() === 1) {\n              cursor.setOpacity(0);\n            } else {\n              cursor.setOpacity(1);\n            }\n            return layer.draw();\n          }\n        };\n      })(this), layer);\n    };\n\n    TextInput.prototype.render = function(context, layer) {\n      var cursor, cursorBlink, enterPressed, fsize, group, keyStream, text, textContent, textRect;\n      textRect = new Kinetic.Rect({\n        x: this.spec.x,\n        y: this.spec.y,\n        width: this.spec.width,\n        height: this.spec.height,\n        fill: this.spec.fill,\n        cornerRadius: 4,\n        lineJoin: \"round\",\n        stroke: this.spec.stroke,\n        strokeWidth: this.spec.strokeWidth\n      });\n      textContent = this.spec.content;\n      fsize = .85 * this.spec.height;\n      text = new Kinetic.Text({\n        text: this.spec.content,\n        x: this.spec.x + 2,\n        y: this.spec.y - 5,\n        height: this.spec.height,\n        fontSize: fsize,\n        fill: \"black\",\n        padding: 10,\n        align: \"left\"\n      });\n      cursor = new Kinetic.Rect({\n        x: text.getX() + text.getWidth() - 7,\n        y: this.spec.y + 5,\n        width: 1.5,\n        height: text.getHeight() - 10,\n        fill: \"black\"\n      });\n      enterPressed = false;\n      keyStream = context.keydownStream();\n      keyStream.takeWhile((function(_this) {\n        return function(x) {\n          return enterPressed === false && !_this.stopped;\n        };\n      })(this)).onValue((function(_this) {\n        return function(event) {\n          var char;\n          if (event.keyCode === 13) {\n            return enterPressed = true;\n          } else if (event.keyCode === 8) {\n            textContent = textContent.slice(0, -1);\n            text.setText(textContent);\n            cursor.setX(text.getX() + text.getWidth() - 7);\n            return layer.draw();\n          } else if (text.getWidth() > textRect.getWidth()) {\n\n          } else {\n            char = _this.getChar(event);\n            textContent += char;\n            text.setText(textContent);\n            cursor.setX(text.getX() + text.getWidth() - 7);\n            return layer.draw();\n          }\n        };\n      })(this));\n      cursorBlink = this.animateCursor(layer, cursor);\n      cursorBlink.start();\n      group = new Kinetic.Group({});\n      group.add(textRect);\n      group.add(cursor);\n      group.add(text);\n      return layer.add(group);\n    };\n\n    return TextInput;\n\n  })(KStimulus);\n\n  exports.TextInput = TextInput;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/canvas/text.js":{"id":56,"canonicalName":"src/components/canvas/text.js","code":"(function () {\n    var KStimulus, Kinetic, Text, layout, _, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    layout = require('9', module);\n    Kinetic = require('15', module).Kinetic;\n    _ = require('16', module);\n    KStimulus = require('8', module).KineticStimulus;\n    Text = function (_super) {\n        __extends(Text, _super);\n        Text.prototype.defaults = {\n            content: 'Text',\n            x: 5,\n            y: 5,\n            width: null,\n            fill: 'black',\n            fontSize: 40,\n            fontFamily: 'Arial',\n            align: 'center',\n            position: null\n        };\n        function Text(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            if (spec.content != null && _.isArray(spec.content)) {\n                spec.content = spec.content.join(' \\n ');\n                if (spec.lineHeight == null) {\n                    spec.lineHeight = 2;\n                }\n            }\n            Text.__super__.constructor.call(this, spec);\n        }\n        Text.prototype.initialize = function () {\n            return this.text = new Kinetic.Text({\n                x: 0,\n                y: 0,\n                text: this.spec.content,\n                fontSize: this.spec.fontSize,\n                fontFamily: this.spec.fontFamily,\n                fill: this.spec.fill,\n                lineHeight: this.spec.lineHeight || 1,\n                width: this.spec.width,\n                listening: false,\n                align: this.spec.align\n            });\n        };\n        Text.prototype.render = function (context, layer) {\n            var coords;\n            coords = this.computeCoordinates(context, this.spec.position, this.text.getWidth(), this.text.getHeight());\n            this.text.setPosition({\n                x: coords[0],\n                y: coords[1]\n            });\n            return this.presentable(this.text);\n        };\n        return Text;\n    }(KStimulus);\n    exports.Text = Text;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/canvas/text.js\"],\"names\":[\"KStimulus\",\"Kinetic\",\"Text\",\"layout\",\"_\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"KineticStimulus\",\"_super\",\"defaults\",\"content\",\"x\",\"y\",\"width\",\"fill\",\"fontSize\",\"fontFamily\",\"align\",\"position\",\"spec\",\"isArray\",\"join\",\"lineHeight\",\"initialize\",\"text\",\"listening\",\"render\",\"context\",\"layer\",\"coords\",\"computeCoordinates\",\"getWidth\",\"getHeight\",\"setPosition\",\"presentable\",\"exports\"],\"mappings\":\"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\"}","lineCount":70,"mtime":1392647443000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/src/layout.js","canonicalName":"src/layout.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.7.1\n(function() {\n  var KStimulus, Kinetic, Text, layout, _,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  layout = require(\"../../layout\");\n\n  Kinetic = require(\"../../../jslibs/kinetic\").Kinetic;\n\n  _ = require('lodash');\n\n  KStimulus = require(\"../../stimresp\").KineticStimulus;\n\n  Text = (function(_super) {\n    __extends(Text, _super);\n\n    Text.prototype.defaults = {\n      content: \"Text\",\n      x: 5,\n      y: 5,\n      width: null,\n      fill: \"black\",\n      fontSize: 40,\n      fontFamily: \"Arial\",\n      align: \"center\",\n      position: null\n    };\n\n    function Text(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      if ((spec.content != null) && _.isArray(spec.content)) {\n        spec.content = spec.content.join(' \\n ');\n        if (spec.lineHeight == null) {\n          spec.lineHeight = 2;\n        }\n      }\n      Text.__super__.constructor.call(this, spec);\n    }\n\n    Text.prototype.initialize = function() {\n      return this.text = new Kinetic.Text({\n        x: 0,\n        y: 0,\n        text: this.spec.content,\n        fontSize: this.spec.fontSize,\n        fontFamily: this.spec.fontFamily,\n        fill: this.spec.fill,\n        lineHeight: this.spec.lineHeight || 1,\n        width: this.spec.width,\n        listening: false,\n        align: this.spec.align\n      });\n    };\n\n    Text.prototype.render = function(context, layer) {\n      var coords;\n      coords = this.computeCoordinates(context, this.spec.position, this.text.getWidth(), this.text.getHeight());\n      this.text.setPosition({\n        x: coords[0],\n        y: coords[1]\n      });\n      return this.presentable(this.text);\n    };\n\n    return Text;\n\n  })(KStimulus);\n\n  exports.Text = Text;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/canvas/startbutton.js":{"id":55,"canonicalName":"src/components/canvas/startbutton.js","code":"(function () {\n    var KStimulus, Kinetic, StartButton, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Kinetic = require('15', module).Kinetic;\n    KStimulus = require('8', module).KineticStimulus;\n    StartButton = function (_super) {\n        __extends(StartButton, _super);\n        function StartButton() {\n            return StartButton.__super__.constructor.apply(this, arguments);\n        }\n        StartButton.prototype.defaults = {\n            width: 150,\n            height: 75\n        };\n        StartButton.prototype.render = function (context) {\n            var button, group, text, xcenter, ycenter;\n            xcenter = context.width() / 2;\n            ycenter = context.height() / 2;\n            group = new Kinetic.Group({ id: this.spec.id });\n            text = new Kinetic.Text({\n                text: 'Start',\n                x: xcenter - this.spec.width / 2,\n                y: ycenter - this.spec.height / 2,\n                width: this.spec.width,\n                height: this.spec.height,\n                fontSize: 30,\n                fill: 'white',\n                fontFamily: 'Arial',\n                align: 'center',\n                padding: 20\n            });\n            button = new Kinetic.Rect({\n                x: xcenter - this.spec.width / 2,\n                y: ycenter - text.getHeight() / 2,\n                width: this.spec.width,\n                height: text.getHeight(),\n                fill: 'black',\n                cornerRadius: 10,\n                stroke: 'LightSteelBlue',\n                strokeWidth: 5\n            });\n            group.add(button);\n            group.add(text);\n            return this.presentable(group);\n        };\n        return StartButton;\n    }(KStimulus);\n    exports.StartButton = StartButton;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/canvas/startbutton.js\"],\"names\":[\"KStimulus\",\"Kinetic\",\"StartButton\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"KineticStimulus\",\"_super\",\"apply\",\"arguments\",\"defaults\",\"width\",\"height\",\"render\",\"context\",\"button\",\"group\",\"text\",\"xcenter\",\"ycenter\",\"Group\",\"id\",\"spec\",\"Text\",\"x\",\"y\",\"fontSize\",\"fill\",\"fontFamily\",\"align\",\"padding\",\"Rect\",\"getHeight\",\"cornerRadius\",\"stroke\",\"strokeWidth\",\"add\",\"presentable\",\"exports\"],\"mappings\":\"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\"}","lineCount":60,"mtime":1392646703000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.7.1\n(function() {\n  var KStimulus, Kinetic, StartButton,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Kinetic = require(\"../../../jslibs/kinetic\").Kinetic;\n\n  KStimulus = require(\"../../stimresp\").KineticStimulus;\n\n  StartButton = (function(_super) {\n    __extends(StartButton, _super);\n\n    function StartButton() {\n      return StartButton.__super__.constructor.apply(this, arguments);\n    }\n\n    StartButton.prototype.defaults = {\n      width: 150,\n      height: 75\n    };\n\n    StartButton.prototype.render = function(context) {\n      var button, group, text, xcenter, ycenter;\n      xcenter = context.width() / 2;\n      ycenter = context.height() / 2;\n      group = new Kinetic.Group({\n        id: this.spec.id\n      });\n      text = new Kinetic.Text({\n        text: \"Start\",\n        x: xcenter - this.spec.width / 2,\n        y: ycenter - this.spec.height / 2,\n        width: this.spec.width,\n        height: this.spec.height,\n        fontSize: 30,\n        fill: \"white\",\n        fontFamily: \"Arial\",\n        align: \"center\",\n        padding: 20\n      });\n      button = new Kinetic.Rect({\n        x: xcenter - this.spec.width / 2,\n        y: ycenter - text.getHeight() / 2,\n        width: this.spec.width,\n        height: text.getHeight(),\n        fill: \"black\",\n        cornerRadius: 10,\n        stroke: \"LightSteelBlue\",\n        strokeWidth: 5\n      });\n      group.add(button);\n      group.add(text);\n      return this.presentable(group);\n    };\n\n    return StartButton;\n\n  })(KStimulus);\n\n  exports.StartButton = StartButton;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/canvas/rectangle.js":{"id":54,"canonicalName":"src/components/canvas/rectangle.js","code":"(function () {\n    var KStimulus, Kinetic, Rectangle, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Kinetic = require('15', module).Kinetic;\n    KStimulus = require('8', module).KineticStimulus;\n    Rectangle = function (_super) {\n        __extends(Rectangle, _super);\n        Rectangle.prototype.defaults = {\n            x: 0,\n            y: 0,\n            width: 100,\n            height: 100,\n            opacity: 1,\n            fill: 'black'\n        };\n        function Rectangle(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            Rectangle.__super__.constructor.call(this, spec);\n        }\n        Rectangle.prototype.render = function (context) {\n            var coords, rect;\n            console.log('rendering rectangle');\n            coords = this.computeCoordinates(context, this.spec.position, this.spec.width, this.spec.height);\n            rect = new Kinetic.Rect({\n                x: coords[0],\n                y: coords[1],\n                width: this.spec.width,\n                height: this.spec.height,\n                fill: this.spec.fill,\n                stroke: this.spec.stroke,\n                strokeWidth: this.spec.strokeWidth,\n                opacity: this.spec.opacity\n            });\n            return this.presentable(rect);\n        };\n        return Rectangle;\n    }(KStimulus);\n    exports.Rectangle = Rectangle;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/canvas/rectangle.js\"],\"names\":[\"KStimulus\",\"Kinetic\",\"Rectangle\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"KineticStimulus\",\"_super\",\"defaults\",\"x\",\"y\",\"width\",\"height\",\"opacity\",\"fill\",\"spec\",\"render\",\"context\",\"coords\",\"rect\",\"console\",\"log\",\"computeCoordinates\",\"position\",\"Rect\",\"stroke\",\"strokeWidth\",\"presentable\",\"exports\"],\"mappings\":\"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\"}","lineCount":52,"mtime":1392647882000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.7.1\n(function() {\n  var KStimulus, Kinetic, Rectangle,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Kinetic = require(\"../../../jslibs/kinetic\").Kinetic;\n\n  KStimulus = require(\"../../stimresp\").KineticStimulus;\n\n  Rectangle = (function(_super) {\n    __extends(Rectangle, _super);\n\n    Rectangle.prototype.defaults = {\n      x: 0,\n      y: 0,\n      width: 100,\n      height: 100,\n      opacity: 1,\n      fill: \"black\"\n    };\n\n    function Rectangle(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      Rectangle.__super__.constructor.call(this, spec);\n    }\n\n    Rectangle.prototype.render = function(context) {\n      var coords, rect;\n      console.log(\"rendering rectangle\");\n      coords = this.computeCoordinates(context, this.spec.position, this.spec.width, this.spec.height);\n      rect = new Kinetic.Rect({\n        x: coords[0],\n        y: coords[1],\n        width: this.spec.width,\n        height: this.spec.height,\n        fill: this.spec.fill,\n        stroke: this.spec.stroke,\n        strokeWidth: this.spec.strokeWidth,\n        opacity: this.spec.opacity\n      });\n      return this.presentable(rect);\n    };\n\n    return Rectangle;\n\n  })(KStimulus);\n\n  exports.Rectangle = Rectangle;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/canvas/picture.js":{"id":53,"canonicalName":"src/components/canvas/picture.js","code":"(function () {\n    var KStimulus, Kinetic, Picture, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Kinetic = require('15', module).Kinetic;\n    KStimulus = require('8', module).KineticStimulus;\n    Picture = function (_super) {\n        __extends(Picture, _super);\n        Picture.prototype.defaults = {\n            url: 'http://www.html5canvastutorials.com/demos/assets/yoda.jpg',\n            x: 0,\n            y: 0\n        };\n        function Picture(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            Picture.__super__.constructor.call(this, spec);\n            this.imageObj = new Image();\n            this.image = null;\n            this.imageObj.onload = function (_this) {\n                return function () {\n                    return _this.image = new Kinetic.Image({\n                        x: _this.spec.x,\n                        y: _this.spec.y,\n                        image: _this.imageObj,\n                        width: _this.spec.width || _this.imageObj.width,\n                        height: _this.spec.height || _this.imageObj.height\n                    });\n                };\n            }(this);\n            this.imageObj.src = this.spec.url;\n        }\n        Picture.prototype.render = function (context) {\n            return this.presentable(this.image);\n        };\n        return Picture;\n    }(KStimulus);\n    exports.Picture = Picture;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/canvas/picture.js\"],\"names\":[\"KStimulus\",\"Kinetic\",\"Picture\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"KineticStimulus\",\"_super\",\"defaults\",\"url\",\"x\",\"y\",\"spec\",\"imageObj\",\"Image\",\"image\",\"onload\",\"_this\",\"width\",\"height\",\"src\",\"render\",\"context\",\"presentable\",\"exports\"],\"mappings\":\"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\"}","lineCount":50,"mtime":1392646317000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.7.1\n(function() {\n  var KStimulus, Kinetic, Picture,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Kinetic = require(\"../../../jslibs/kinetic\").Kinetic;\n\n  KStimulus = require(\"../../stimresp\").KineticStimulus;\n\n  Picture = (function(_super) {\n    __extends(Picture, _super);\n\n    Picture.prototype.defaults = {\n      url: \"http://www.html5canvastutorials.com/demos/assets/yoda.jpg\",\n      x: 0,\n      y: 0\n    };\n\n    function Picture(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      Picture.__super__.constructor.call(this, spec);\n      this.imageObj = new Image();\n      this.image = null;\n      this.imageObj.onload = (function(_this) {\n        return function() {\n          return _this.image = new Kinetic.Image({\n            x: _this.spec.x,\n            y: _this.spec.y,\n            image: _this.imageObj,\n            width: _this.spec.width || _this.imageObj.width,\n            height: _this.spec.height || _this.imageObj.height\n          });\n        };\n      })(this);\n      this.imageObj.src = this.spec.url;\n    }\n\n    Picture.prototype.render = function(context) {\n      return this.presentable(this.image);\n    };\n\n    return Picture;\n\n  })(KStimulus);\n\n  exports.Picture = Picture;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/canvas/gridlines.js":{"id":52,"canonicalName":"src/components/canvas/gridlines.js","code":"(function () {\n    var GridLines, KStimulus, Kinetic, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Kinetic = require('15', module).Kinetic;\n    KStimulus = require('8', module).KineticStimulus;\n    GridLines = function (_super) {\n        __extends(GridLines, _super);\n        GridLines.prototype.defaults = {\n            x: 0,\n            y: 0,\n            width: null,\n            height: null,\n            rows: 3,\n            cols: 3,\n            stroke: 'black',\n            strokeWidth: 2,\n            dashArray: null\n        };\n        function GridLines(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            GridLines.__super__.constructor.call(this, spec);\n        }\n        GridLines.prototype.render = function (context) {\n            var group, height, i, line, width, x, y, _i, _j, _ref, _ref1;\n            if (this.spec.height == null) {\n                height = context.height();\n            } else {\n                height = this.spec.height;\n            }\n            if (this.spec.width == null) {\n                width = context.width();\n            } else {\n                width = this.spec.width;\n            }\n            group = new Kinetic.Group();\n            for (i = _i = 0, _ref = this.spec.rows; 0 <= _ref ? _i <= _ref : _i >= _ref; i = 0 <= _ref ? ++_i : --_i) {\n                y = this.spec.y + i * height / this.spec.rows;\n                line = new Kinetic.Line({\n                    points: [\n                        this.spec.x,\n                        y,\n                        this.spec.x + width,\n                        y\n                    ],\n                    stroke: this.spec.stroke,\n                    strokeWidth: this.spec.strokeWidth,\n                    dashArray: this.spec.dashArray\n                });\n                group.add(line);\n            }\n            for (i = _j = 0, _ref1 = this.spec.cols; 0 <= _ref1 ? _j <= _ref1 : _j >= _ref1; i = 0 <= _ref1 ? ++_j : --_j) {\n                x = this.spec.x + i * width / this.spec.cols;\n                line = new Kinetic.Line({\n                    points: [\n                        x,\n                        this.spec.y,\n                        x,\n                        this.spec.y + height\n                    ],\n                    stroke: this.spec.stroke,\n                    strokeWidth: this.spec.strokeWidth,\n                    dashArray: this.spec.dashArray\n                });\n                group.add(line);\n            }\n            return this.presentable(group);\n        };\n        return GridLines;\n    }(KStimulus);\n    exports.GridLines = GridLines;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/canvas/gridlines.js\"],\"names\":[\"GridLines\",\"KStimulus\",\"Kinetic\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"KineticStimulus\",\"_super\",\"defaults\",\"x\",\"y\",\"width\",\"height\",\"rows\",\"cols\",\"stroke\",\"strokeWidth\",\"dashArray\",\"spec\",\"render\",\"context\",\"group\",\"i\",\"line\",\"_i\",\"_j\",\"_ref\",\"_ref1\",\"Group\",\"Line\",\"points\",\"add\",\"presentable\",\"exports\"],\"mappings\":\"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\"}","lineCount":84,"mtime":1392646221000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.7.1\n(function() {\n  var GridLines, KStimulus, Kinetic,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Kinetic = require(\"../../../jslibs/kinetic\").Kinetic;\n\n  KStimulus = require(\"../../stimresp\").KineticStimulus;\n\n  GridLines = (function(_super) {\n    __extends(GridLines, _super);\n\n    GridLines.prototype.defaults = {\n      x: 0,\n      y: 0,\n      width: null,\n      height: null,\n      rows: 3,\n      cols: 3,\n      stroke: \"black\",\n      strokeWidth: 2,\n      dashArray: null\n    };\n\n    function GridLines(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      GridLines.__super__.constructor.call(this, spec);\n    }\n\n    GridLines.prototype.render = function(context) {\n      var group, height, i, line, width, x, y, _i, _j, _ref, _ref1;\n      if (this.spec.height == null) {\n        height = context.height();\n      } else {\n        height = this.spec.height;\n      }\n      if (this.spec.width == null) {\n        width = context.width();\n      } else {\n        width = this.spec.width;\n      }\n      group = new Kinetic.Group();\n      for (i = _i = 0, _ref = this.spec.rows; 0 <= _ref ? _i <= _ref : _i >= _ref; i = 0 <= _ref ? ++_i : --_i) {\n        y = this.spec.y + (i * height / this.spec.rows);\n        line = new Kinetic.Line({\n          points: [this.spec.x, y, this.spec.x + width, y],\n          stroke: this.spec.stroke,\n          strokeWidth: this.spec.strokeWidth,\n          dashArray: this.spec.dashArray\n        });\n        group.add(line);\n      }\n      for (i = _j = 0, _ref1 = this.spec.cols; 0 <= _ref1 ? _j <= _ref1 : _j >= _ref1; i = 0 <= _ref1 ? ++_j : --_j) {\n        x = this.spec.x + (i * width / this.spec.cols);\n        line = new Kinetic.Line({\n          points: [x, this.spec.y, x, this.spec.y + height],\n          stroke: this.spec.stroke,\n          strokeWidth: this.spec.strokeWidth,\n          dashArray: this.spec.dashArray\n        });\n        group.add(line);\n      }\n      return this.presentable(group);\n    };\n\n    return GridLines;\n\n  })(KStimulus);\n\n  exports.GridLines = GridLines;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/canvas/canvasborder.js":{"id":51,"canonicalName":"src/components/canvas/canvasborder.js","code":"(function () {\n    var CanvasBorder, KStimulus, Kinetic, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Kinetic = require('15', module).Kinetic;\n    KStimulus = require('8', module).KineticStimulus;\n    CanvasBorder = function (_super) {\n        __extends(CanvasBorder, _super);\n        CanvasBorder.prototype.defaults = {\n            strokeWidth: 5,\n            stroke: 'black'\n        };\n        function CanvasBorder(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            CanvasBorder.__super__.constructor.call(this, spec);\n        }\n        CanvasBorder.prototype.render = function (context) {\n            var border;\n            border = new Kinetic.Rect({\n                x: 0,\n                y: 0,\n                width: context.width(),\n                height: context.height(),\n                strokeWidth: this.spec.strokeWidth,\n                stroke: this.spec.stroke\n            });\n            return this.presentable(border);\n        };\n        return CanvasBorder;\n    }(KStimulus);\n    exports.CanvasBorder = CanvasBorder;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/canvas/canvasborder.js\"],\"names\":[\"CanvasBorder\",\"KStimulus\",\"Kinetic\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"KineticStimulus\",\"_super\",\"defaults\",\"strokeWidth\",\"stroke\",\"spec\",\"render\",\"context\",\"border\",\"Rect\",\"x\",\"y\",\"width\",\"height\",\"presentable\",\"exports\"],\"mappings\":\"AACA,CAAC,YAAW;AAAA,IACV,IAAIA,YAAJ,EAAkBC,SAAlB,EAA6BC,OAA7B,EACEC,SAAA,GAAY,GAAGC,cADjB,EAEEC,SAAA,GAAY,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAA,YAAE,SAASC,GAAT,IAAgBD,MAAhB,EAAwB;AAAA,gBAAE,IAAIJ,SAAA,CAAUM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ;AAAA,oBAAiCF,KAAA,CAAME,GAAN,IAAaD,MAAA,CAAOC,GAAP,CAAb,CAAnC;AAAA,aAA1B;AAAA,YAAyF,SAASE,IAAT,GAAgB;AAAA,gBAAE,KAAKC,WAAL,GAAmBL,KAAnB,CAAF;AAAA,aAAzG;AAAA,YAAuII,IAAA,CAAKE,SAAL,GAAiBL,MAAA,CAAOK,SAAxB,CAAvI;AAAA,YAA0KN,KAAA,CAAMM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA1K;AAAA,YAAwMJ,KAAA,CAAMO,SAAN,GAAkBN,MAAA,CAAOK,SAAzB,CAAxM;AAAA,YAA4O,OAAON,KAAP,CAA5O;AAAA,SAFtC,CADU;AAAA,IAKVJ,OAAA,GAAUY,OAAA,C,IAAA,E,MAAA,EAAmCZ,OAA7C,CALU;AAAA,IAOVD,SAAA,GAAYa,OAAA,C,GAAA,E,MAAA,EAA0BC,eAAtC,CAPU;AAAA,IASVf,YAAA,GAAgB,UAASgB,MAAT,EAAiB;AAAA,QAC/BX,SAAA,CAAUL,YAAV,EAAwBgB,MAAxB,EAD+B;AAAA,QAG/BhB,YAAA,CAAaY,SAAb,CAAuBK,QAAvB,GAAkC;AAAA,YAChCC,WAAA,EAAa,CADmB;AAAA,YAEhCC,MAAA,EAAQ,OAFwB;AAAA,SAAlC,CAH+B;AAAA,QAQ/B,SAASnB,YAAT,CAAsBoB,IAAtB,EAA4B;AAAA,YAC1B,IAAIA,IAAA,IAAQ,IAAZ,EAAkB;AAAA,gBAChBA,IAAA,GAAO,EAAP,CADgB;AAAA,aADQ;AAAA,YAI1BpB,YAAA,CAAaa,SAAb,CAAuBF,WAAvB,CAAmCF,IAAnC,CAAwC,IAAxC,EAA8CW,IAA9C,EAJ0B;AAAA,SARG;AAAA,QAe/BpB,YAAA,CAAaY,SAAb,CAAuBS,MAAvB,GAAgC,UAASC,OAAT,EAAkB;AAAA,YAChD,IAAIC,MAAJ,CADgD;AAAA,YAEhDA,MAAA,GAAS,IAAIrB,OAAA,CAAQsB,IAAZ,CAAiB;AAAA,gBACxBC,CAAA,EAAG,CADqB;AAAA,gBAExBC,CAAA,EAAG,CAFqB;AAAA,gBAGxBC,KAAA,EAAOL,OAAA,CAAQK,KAAR,EAHiB;AAAA,gBAIxBC,MAAA,EAAQN,OAAA,CAAQM,MAAR,EAJgB;AAAA,gBAKxBV,WAAA,EAAa,KAAKE,IAAL,CAAUF,WALC;AAAA,gBAMxBC,MAAA,EAAQ,KAAKC,IAAL,CAAUD,MANM;AAAA,aAAjB,CAAT,CAFgD;AAAA,YAUhD,OAAO,KAAKU,WAAL,CAAiBN,MAAjB,CAAP,CAVgD;AAAA,SAAlD,CAf+B;AAAA,QA4B/B,OAAOvB,YAAP,CA5B+B;AAAA,KAAlB,CA8BZC,SA9BY,CAAf,CATU;AAAA,IAyCV6B,OAAA,CAAQ9B,YAAR,GAAuBA,YAAvB,CAzCU;AAAA,CAAZ,CA2CGS,IA3CH,CA2CQ,IA3CR\"}","lineCount":44,"mtime":1392645758000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.7.1\n(function() {\n  var CanvasBorder, KStimulus, Kinetic,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Kinetic = require(\"../../../jslibs/kinetic\").Kinetic;\n\n  KStimulus = require(\"../../stimresp\").KineticStimulus;\n\n  CanvasBorder = (function(_super) {\n    __extends(CanvasBorder, _super);\n\n    CanvasBorder.prototype.defaults = {\n      strokeWidth: 5,\n      stroke: \"black\"\n    };\n\n    function CanvasBorder(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      CanvasBorder.__super__.constructor.call(this, spec);\n    }\n\n    CanvasBorder.prototype.render = function(context) {\n      var border;\n      border = new Kinetic.Rect({\n        x: 0,\n        y: 0,\n        width: context.width(),\n        height: context.height(),\n        strokeWidth: this.spec.strokeWidth,\n        stroke: this.spec.stroke\n      });\n      return this.presentable(border);\n    };\n\n    return CanvasBorder;\n\n  })(KStimulus);\n\n  exports.CanvasBorder = CanvasBorder;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/canvas/fixationcross.js":{"id":50,"canonicalName":"src/components/canvas/fixationcross.js","code":"(function () {\n    var FixationCross, KStimulus, Kinetic, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Kinetic = require('15', module).Kinetic;\n    KStimulus = require('8', module).KineticStimulus;\n    FixationCross = function (_super) {\n        __extends(FixationCross, _super);\n        FixationCross.prototype.defaults = {\n            strokeWidth: 8,\n            length: 150,\n            fill: 'black'\n        };\n        function FixationCross(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            FixationCross.__super__.constructor.call(this, spec);\n        }\n        FixationCross.prototype.render = function (context) {\n            var group, horz, len, vert, x, y;\n            x = context.width() / 2;\n            y = context.height() / 2;\n            len = this.toPixels(this.spec.length, context.width());\n            console.log('FIX len is', len);\n            horz = new Kinetic.Rect({\n                x: x - len / 2,\n                y: y,\n                width: len,\n                height: this.spec.strokeWidth,\n                fill: this.spec.fill\n            });\n            vert = new Kinetic.Rect({\n                x: x - this.spec.strokeWidth / 2,\n                y: y - len / 2 + this.spec.strokeWidth / 2,\n                width: this.spec.strokeWidth,\n                height: len,\n                fill: this.spec.fill\n            });\n            group = new Kinetic.Group();\n            group.add(horz);\n            group.add(vert);\n            return this.presentable(group);\n        };\n        return FixationCross;\n    }(KStimulus);\n    exports.FixationCross = FixationCross;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/canvas/fixationcross.js\"],\"names\":[\"FixationCross\",\"KStimulus\",\"Kinetic\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"KineticStimulus\",\"_super\",\"defaults\",\"strokeWidth\",\"length\",\"fill\",\"spec\",\"render\",\"context\",\"group\",\"horz\",\"len\",\"vert\",\"x\",\"y\",\"width\",\"height\",\"toPixels\",\"console\",\"log\",\"Rect\",\"Group\",\"add\",\"presentable\",\"exports\"],\"mappings\":\"AACA,CAAC,YAAW;AAAA,IACV,IAAIA,aAAJ,EAAmBC,SAAnB,EAA8BC,OAA9B,EACEC,SAAA,GAAY,GAAGC,cADjB,EAEEC,SAAA,GAAY,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAA,YAAE,SAASC,GAAT,IAAgBD,MAAhB,EAAwB;AAAA,gBAAE,IAAIJ,SAAA,CAAUM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ;AAAA,oBAAiCF,KAAA,CAAME,GAAN,IAAaD,MAAA,CAAOC,GAAP,CAAb,CAAnC;AAAA,aAA1B;AAAA,YAAyF,SAASE,IAAT,GAAgB;AAAA,gBAAE,KAAKC,WAAL,GAAmBL,KAAnB,CAAF;AAAA,aAAzG;AAAA,YAAuII,IAAA,CAAKE,SAAL,GAAiBL,MAAA,CAAOK,SAAxB,CAAvI;AAAA,YAA0KN,KAAA,CAAMM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA1K;AAAA,YAAwMJ,KAAA,CAAMO,SAAN,GAAkBN,MAAA,CAAOK,SAAzB,CAAxM;AAAA,YAA4O,OAAON,KAAP,CAA5O;AAAA,SAFtC,CADU;AAAA,IAKVJ,OAAA,GAAUY,OAAA,C,IAAA,E,MAAA,EAAmCZ,OAA7C,CALU;AAAA,IAOVD,SAAA,GAAYa,OAAA,C,GAAA,E,MAAA,EAA0BC,eAAtC,CAPU;AAAA,IASVf,aAAA,GAAiB,UAASgB,MAAT,EAAiB;AAAA,QAChCX,SAAA,CAAUL,aAAV,EAAyBgB,MAAzB,EADgC;AAAA,QAGhChB,aAAA,CAAcY,SAAd,CAAwBK,QAAxB,GAAmC;AAAA,YACjCC,WAAA,EAAa,CADoB;AAAA,YAEjCC,MAAA,EAAQ,GAFyB;AAAA,YAGjCC,IAAA,EAAM,OAH2B;AAAA,SAAnC,CAHgC;AAAA,QAShC,SAASpB,aAAT,CAAuBqB,IAAvB,EAA6B;AAAA,YAC3B,IAAIA,IAAA,IAAQ,IAAZ,EAAkB;AAAA,gBAChBA,IAAA,GAAO,EAAP,CADgB;AAAA,aADS;AAAA,YAI3BrB,aAAA,CAAca,SAAd,CAAwBF,WAAxB,CAAoCF,IAApC,CAAyC,IAAzC,EAA+CY,IAA/C,EAJ2B;AAAA,SATG;AAAA,QAgBhCrB,aAAA,CAAcY,SAAd,CAAwBU,MAAxB,GAAiC,UAASC,OAAT,EAAkB;AAAA,YACjD,IAAIC,KAAJ,EAAWC,IAAX,EAAiBC,GAAjB,EAAsBC,IAAtB,EAA4BC,CAA5B,EAA+BC,CAA/B,CADiD;AAAA,YAEjDD,CAAA,GAAIL,OAAA,CAAQO,KAAR,KAAkB,CAAtB,CAFiD;AAAA,YAGjDD,CAAA,GAAIN,OAAA,CAAQQ,MAAR,KAAmB,CAAvB,CAHiD;AAAA,YAIjDL,GAAA,GAAM,KAAKM,QAAL,CAAc,KAAKX,IAAL,CAAUF,MAAxB,EAAgCI,OAAA,CAAQO,KAAR,EAAhC,CAAN,CAJiD;AAAA,YAKjDG,OAAA,CAAQC,GAAR,CAAY,YAAZ,EAA0BR,GAA1B,EALiD;AAAA,YAMjDD,IAAA,GAAO,IAAIvB,OAAA,CAAQiC,IAAZ,CAAiB;AAAA,gBACtBP,CAAA,EAAGA,CAAA,GAAIF,GAAA,GAAM,CADS;AAAA,gBAEtBG,CAAA,EAAGA,CAFmB;AAAA,gBAGtBC,KAAA,EAAOJ,GAHe;AAAA,gBAItBK,MAAA,EAAQ,KAAKV,IAAL,CAAUH,WAJI;AAAA,gBAKtBE,IAAA,EAAM,KAAKC,IAAL,CAAUD,IALM;AAAA,aAAjB,CAAP,CANiD;AAAA,YAajDO,IAAA,GAAO,IAAIzB,OAAA,CAAQiC,IAAZ,CAAiB;AAAA,gBACtBP,CAAA,EAAGA,CAAA,GAAI,KAAKP,IAAL,CAAUH,WAAV,GAAwB,CADT;AAAA,gBAEtBW,CAAA,EAAGA,CAAA,GAAIH,GAAA,GAAM,CAAV,GAAc,KAAKL,IAAL,CAAUH,WAAV,GAAwB,CAFnB;AAAA,gBAGtBY,KAAA,EAAO,KAAKT,IAAL,CAAUH,WAHK;AAAA,gBAItBa,MAAA,EAAQL,GAJc;AAAA,gBAKtBN,IAAA,EAAM,KAAKC,IAAL,CAAUD,IALM;AAAA,aAAjB,CAAP,CAbiD;AAAA,YAoBjDI,KAAA,GAAQ,IAAItB,OAAA,CAAQkC,KAAZ,EAAR,CApBiD;AAAA,YAqBjDZ,KAAA,CAAMa,GAAN,CAAUZ,IAAV,EArBiD;AAAA,YAsBjDD,KAAA,CAAMa,GAAN,CAAUV,IAAV,EAtBiD;AAAA,YAuBjD,OAAO,KAAKW,WAAL,CAAiBd,KAAjB,CAAP,CAvBiD;AAAA,SAAnD,CAhBgC;AAAA,QA0ChC,OAAOxB,aAAP,CA1CgC;AAAA,KAAlB,CA4CbC,SA5Ca,CAAhB,CATU;AAAA,IAuDVsC,OAAA,CAAQvC,aAAR,GAAwBA,aAAxB,CAvDU;AAAA,CAAZ,CAyDGS,IAzDH,CAyDQ,IAzDR\"}","lineCount":58,"mtime":1393077708000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.7.1\n(function() {\n  var FixationCross, KStimulus, Kinetic,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Kinetic = require(\"../../../jslibs/kinetic\").Kinetic;\n\n  KStimulus = require(\"../../stimresp\").KineticStimulus;\n\n  FixationCross = (function(_super) {\n    __extends(FixationCross, _super);\n\n    FixationCross.prototype.defaults = {\n      strokeWidth: 8,\n      length: 150,\n      fill: 'black'\n    };\n\n    function FixationCross(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      FixationCross.__super__.constructor.call(this, spec);\n    }\n\n    FixationCross.prototype.render = function(context) {\n      var group, horz, len, vert, x, y;\n      x = context.width() / 2;\n      y = context.height() / 2;\n      len = this.toPixels(this.spec.length, context.width());\n      console.log(\"FIX len is\", len);\n      horz = new Kinetic.Rect({\n        x: x - len / 2,\n        y: y,\n        width: len,\n        height: this.spec.strokeWidth,\n        fill: this.spec.fill\n      });\n      vert = new Kinetic.Rect({\n        x: x - this.spec.strokeWidth / 2,\n        y: y - len / 2 + this.spec.strokeWidth / 2,\n        width: this.spec.strokeWidth,\n        height: len,\n        fill: this.spec.fill\n      });\n      group = new Kinetic.Group();\n      group.add(horz);\n      group.add(vert);\n      return this.presentable(group);\n    };\n\n    return FixationCross;\n\n  })(KStimulus);\n\n  exports.FixationCross = FixationCross;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/canvas/clear.js":{"id":49,"canonicalName":"src/components/canvas/clear.js","code":"(function () {\n    var ActionPresentable, Clear, GStimulus, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    GStimulus = require('8', module).GraphicalStimulus;\n    ActionPresentable = require('8', module).ActionPresentable;\n    Clear = function (_super) {\n        __extends(Clear, _super);\n        function Clear() {\n            return Clear.__super__.constructor.apply(this, arguments);\n        }\n        Clear.prototype.render = function (context) {\n            return new ActionPresentable(function (context) {\n                return context.clearContent(true);\n            });\n        };\n        return Clear;\n    }(GStimulus);\n    exports.Clear = Clear;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/canvas/clear.js\"],\"names\":[\"ActionPresentable\",\"Clear\",\"GStimulus\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"GraphicalStimulus\",\"_super\",\"apply\",\"arguments\",\"render\",\"context\",\"clearContent\",\"exports\"],\"mappings\":\"AACA,CAAC,YAAW;AAAA,IACV,IAAIA,iBAAJ,EAAuBC,KAAvB,EAA8BC,SAA9B,EACEC,SAAA,GAAY,GAAGC,cADjB,EAEEC,SAAA,GAAY,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAA,YAAE,SAASC,GAAT,IAAgBD,MAAhB,EAAwB;AAAA,gBAAE,IAAIJ,SAAA,CAAUM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ;AAAA,oBAAiCF,KAAA,CAAME,GAAN,IAAaD,MAAA,CAAOC,GAAP,CAAb,CAAnC;AAAA,aAA1B;AAAA,YAAyF,SAASE,IAAT,GAAgB;AAAA,gBAAE,KAAKC,WAAL,GAAmBL,KAAnB,CAAF;AAAA,aAAzG;AAAA,YAAuII,IAAA,CAAKE,SAAL,GAAiBL,MAAA,CAAOK,SAAxB,CAAvI;AAAA,YAA0KN,KAAA,CAAMM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA1K;AAAA,YAAwMJ,KAAA,CAAMO,SAAN,GAAkBN,MAAA,CAAOK,SAAzB,CAAxM;AAAA,YAA4O,OAAON,KAAP,CAA5O;AAAA,SAFtC,CADU;AAAA,IAKVJ,SAAA,GAAYY,OAAA,C,GAAA,E,MAAA,EAA0BC,iBAAtC,CALU;AAAA,IAOVf,iBAAA,GAAoBc,OAAA,C,GAAA,E,MAAA,EAA0Bd,iBAA9C,CAPU;AAAA,IASVC,KAAA,GAAS,UAASe,MAAT,EAAiB;AAAA,QACxBX,SAAA,CAAUJ,KAAV,EAAiBe,MAAjB,EADwB;AAAA,QAGxB,SAASf,KAAT,GAAiB;AAAA,YACf,OAAOA,KAAA,CAAMY,SAAN,CAAgBF,WAAhB,CAA4BM,KAA5B,CAAkC,IAAlC,EAAwCC,SAAxC,CAAP,CADe;AAAA,SAHO;AAAA,QAOxBjB,KAAA,CAAMW,SAAN,CAAgBO,MAAhB,GAAyB,UAASC,OAAT,EAAkB;AAAA,YACzC,OAAO,IAAIpB,iBAAJ,CAAsB,UAASoB,OAAT,EAAkB;AAAA,gBAC7C,OAAOA,OAAA,CAAQC,YAAR,CAAqB,IAArB,CAAP,CAD6C;AAAA,aAAxC,CAAP,CADyC;AAAA,SAA3C,CAPwB;AAAA,QAaxB,OAAOpB,KAAP,CAbwB;AAAA,KAAlB,CAeLC,SAfK,CAAR,CATU;AAAA,IA0BVoB,OAAA,CAAQrB,KAAR,GAAgBA,KAAhB,CA1BU;AAAA,CAAZ,CA4BGQ,IA5BH,CA4BQ,IA5BR\"}","lineCount":30,"mtime":1392646119000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.7.1\n(function() {\n  var ActionPresentable, Clear, GStimulus,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  GStimulus = require(\"../../stimresp\").GraphicalStimulus;\n\n  ActionPresentable = require(\"../../stimresp\").ActionPresentable;\n\n  Clear = (function(_super) {\n    __extends(Clear, _super);\n\n    function Clear() {\n      return Clear.__super__.constructor.apply(this, arguments);\n    }\n\n    Clear.prototype.render = function(context) {\n      return new ActionPresentable(function(context) {\n        return context.clearContent(true);\n      });\n    };\n\n    return Clear;\n\n  })(GStimulus);\n\n  exports.Clear = Clear;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/canvas/circle.js":{"id":48,"canonicalName":"src/components/canvas/circle.js","code":"(function () {\n    var Circle, KDrawable, KStimulus, Kinetic, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Kinetic = require('15', module).Kinetic;\n    KStimulus = require('8', module).KineticStimulus;\n    KDrawable = require('8', module).KineticDrawable;\n    Circle = function (_super) {\n        __extends(Circle, _super);\n        Circle.prototype.defaults = {\n            x: 50,\n            y: 50,\n            radius: 50,\n            fill: 'red',\n            opacity: 1,\n            origin: 'center'\n        };\n        function Circle(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            Circle.__super__.constructor.call(this, spec);\n        }\n        Circle.prototype.initialize = function () {\n            return this.circle = new Kinetic.Circle({\n                x: this.spec.x,\n                y: this.spec.y,\n                radius: this.spec.radius,\n                fill: this.spec.fill,\n                stroke: this.spec.stroke,\n                strokeWidth: this.spec.strokeWidth,\n                opacity: this.spec.opacity\n            });\n        };\n        Circle.prototype.render = function (context) {\n            var coords;\n            coords = this.computeCoordinates(context, this.spec.position, this.circle.getWidth(), this.circle.getHeight());\n            this.circle.setPosition({\n                x: coords[0] + this.circle.getWidth() / 2,\n                y: coords[1] + this.circle.getHeight() / 2\n            });\n            return new (function (_super1) {\n                __extends(_Class, _super1);\n                function _Class() {\n                    return _Class.__super__.constructor.apply(this, arguments);\n                }\n                _Class.prototype.x = function () {\n                    return this.nodes[0].getX() - this.nodes[0].getWidth() / 2;\n                };\n                _Class.prototype.y = function () {\n                    return this.nodes[0].getY() - this.nodes[0].getHeight() / 2;\n                };\n                _Class.prototype.width = function () {\n                    return this.nodes[0].getWidth();\n                };\n                _Class.prototype.height = function () {\n                    return this.nodes[0].getHeight();\n                };\n                return _Class;\n            }(KDrawable))(this.circle);\n        };\n        return Circle;\n    }(KStimulus);\n    exports.Circle = Circle;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/canvas/circle.js\"],\"names\":[\"Circle\",\"KDrawable\",\"KStimulus\",\"Kinetic\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"KineticStimulus\",\"KineticDrawable\",\"_super\",\"defaults\",\"x\",\"y\",\"radius\",\"fill\",\"opacity\",\"origin\",\"spec\",\"initialize\",\"circle\",\"stroke\",\"strokeWidth\",\"render\",\"context\",\"coords\",\"computeCoordinates\",\"position\",\"getWidth\",\"getHeight\",\"setPosition\",\"_super1\",\"_Class\",\"apply\",\"arguments\",\"nodes\",\"getX\",\"getY\",\"width\",\"height\",\"exports\"],\"mappings\":\"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\"}","lineCount":75,"mtime":1392988178000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.7.1\n(function() {\n  var Circle, KDrawable, KStimulus, Kinetic,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Kinetic = require(\"../../../jslibs/kinetic\").Kinetic;\n\n  KStimulus = require(\"../../stimresp\").KineticStimulus;\n\n  KDrawable = require(\"../../stimresp\").KineticDrawable;\n\n  Circle = (function(_super) {\n    __extends(Circle, _super);\n\n    Circle.prototype.defaults = {\n      x: 50,\n      y: 50,\n      radius: 50,\n      fill: 'red',\n      opacity: 1,\n      origin: \"center\"\n    };\n\n    function Circle(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      Circle.__super__.constructor.call(this, spec);\n    }\n\n    Circle.prototype.initialize = function() {\n      return this.circle = new Kinetic.Circle({\n        x: this.spec.x,\n        y: this.spec.y,\n        radius: this.spec.radius,\n        fill: this.spec.fill,\n        stroke: this.spec.stroke,\n        strokeWidth: this.spec.strokeWidth,\n        opacity: this.spec.opacity\n      });\n    };\n\n    Circle.prototype.render = function(context) {\n      var coords;\n      coords = this.computeCoordinates(context, this.spec.position, this.circle.getWidth(), this.circle.getHeight());\n      this.circle.setPosition({\n        x: coords[0] + this.circle.getWidth() / 2,\n        y: coords[1] + this.circle.getHeight() / 2\n      });\n      return new ((function(_super1) {\n        __extends(_Class, _super1);\n\n        function _Class() {\n          return _Class.__super__.constructor.apply(this, arguments);\n        }\n\n        _Class.prototype.x = function() {\n          return this.nodes[0].getX() - this.nodes[0].getWidth() / 2;\n        };\n\n        _Class.prototype.y = function() {\n          return this.nodes[0].getY() - this.nodes[0].getHeight() / 2;\n        };\n\n        _Class.prototype.width = function() {\n          return this.nodes[0].getWidth();\n        };\n\n        _Class.prototype.height = function() {\n          return this.nodes[0].getHeight();\n        };\n\n        return _Class;\n\n      })(KDrawable))(this.circle);\n    };\n\n    return Circle;\n\n  })(KStimulus);\n\n  exports.Circle = Circle;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/canvas/blank.js":{"id":47,"canonicalName":"src/components/canvas/blank.js","code":"(function () {\n    var Blank, KStimulus, Kinetic, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Kinetic = require('15', module).Kinetic;\n    KStimulus = require('8', module).KineticStimulus;\n    Blank = function (_super) {\n        __extends(Blank, _super);\n        function Blank() {\n            return Blank.__super__.constructor.apply(this, arguments);\n        }\n        Blank.prototype.defaults = {\n            fill: 'white',\n            opacity: 1\n        };\n        Blank.prototype.render = function (context) {\n            var blank;\n            blank = new Kinetic.Rect({\n                x: 0,\n                y: 0,\n                width: context.width(),\n                height: context.height(),\n                fill: this.spec.fill,\n                opacity: this.spec.opacity\n            });\n            return this.presentable(blank);\n        };\n        return Blank;\n    }(KStimulus);\n    exports.Blank = Blank;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/canvas/blank.js\"],\"names\":[\"Blank\",\"KStimulus\",\"Kinetic\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"KineticStimulus\",\"_super\",\"apply\",\"arguments\",\"defaults\",\"fill\",\"opacity\",\"render\",\"context\",\"blank\",\"Rect\",\"x\",\"y\",\"width\",\"height\",\"spec\",\"presentable\",\"exports\"],\"mappings\":\"AACA,CAAC,YAAW;AAAA,IACV,IAAIA,KAAJ,EAAWC,SAAX,EAAsBC,OAAtB,EACEC,SAAA,GAAY,GAAGC,cADjB,EAEEC,SAAA,GAAY,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAA,YAAE,SAASC,GAAT,IAAgBD,MAAhB,EAAwB;AAAA,gBAAE,IAAIJ,SAAA,CAAUM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ;AAAA,oBAAiCF,KAAA,CAAME,GAAN,IAAaD,MAAA,CAAOC,GAAP,CAAb,CAAnC;AAAA,aAA1B;AAAA,YAAyF,SAASE,IAAT,GAAgB;AAAA,gBAAE,KAAKC,WAAL,GAAmBL,KAAnB,CAAF;AAAA,aAAzG;AAAA,YAAuII,IAAA,CAAKE,SAAL,GAAiBL,MAAA,CAAOK,SAAxB,CAAvI;AAAA,YAA0KN,KAAA,CAAMM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA1K;AAAA,YAAwMJ,KAAA,CAAMO,SAAN,GAAkBN,MAAA,CAAOK,SAAzB,CAAxM;AAAA,YAA4O,OAAON,KAAP,CAA5O;AAAA,SAFtC,CADU;AAAA,IAKVJ,OAAA,GAAUY,OAAA,C,IAAA,E,MAAA,EAAmCZ,OAA7C,CALU;AAAA,IAOVD,SAAA,GAAYa,OAAA,C,GAAA,E,MAAA,EAA0BC,eAAtC,CAPU;AAAA,IASVf,KAAA,GAAS,UAASgB,MAAT,EAAiB;AAAA,QACxBX,SAAA,CAAUL,KAAV,EAAiBgB,MAAjB,EADwB;AAAA,QAGxB,SAAShB,KAAT,GAAiB;AAAA,YACf,OAAOA,KAAA,CAAMa,SAAN,CAAgBF,WAAhB,CAA4BM,KAA5B,CAAkC,IAAlC,EAAwCC,SAAxC,CAAP,CADe;AAAA,SAHO;AAAA,QAOxBlB,KAAA,CAAMY,SAAN,CAAgBO,QAAhB,GAA2B;AAAA,YACzBC,IAAA,EAAM,OADmB;AAAA,YAEzBC,OAAA,EAAS,CAFgB;AAAA,SAA3B,CAPwB;AAAA,QAYxBrB,KAAA,CAAMY,SAAN,CAAgBU,MAAhB,GAAyB,UAASC,OAAT,EAAkB;AAAA,YACzC,IAAIC,KAAJ,CADyC;AAAA,YAEzCA,KAAA,GAAQ,IAAItB,OAAA,CAAQuB,IAAZ,CAAiB;AAAA,gBACvBC,CAAA,EAAG,CADoB;AAAA,gBAEvBC,CAAA,EAAG,CAFoB;AAAA,gBAGvBC,KAAA,EAAOL,OAAA,CAAQK,KAAR,EAHgB;AAAA,gBAIvBC,MAAA,EAAQN,OAAA,CAAQM,MAAR,EAJe;AAAA,gBAKvBT,IAAA,EAAM,KAAKU,IAAL,CAAUV,IALO;AAAA,gBAMvBC,OAAA,EAAS,KAAKS,IAAL,CAAUT,OANI;AAAA,aAAjB,CAAR,CAFyC;AAAA,YAUzC,OAAO,KAAKU,WAAL,CAAiBP,KAAjB,CAAP,CAVyC;AAAA,SAA3C,CAZwB;AAAA,QAyBxB,OAAOxB,KAAP,CAzBwB;AAAA,KAAlB,CA2BLC,SA3BK,CAAR,CATU;AAAA,IAsCV+B,OAAA,CAAQhC,KAAR,GAAgBA,KAAhB,CAtCU;AAAA,CAAZ,CAwCGS,IAxCH,CAwCQ,IAxCR\"}","lineCount":41,"mtime":1392645766000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.7.1\n(function() {\n  var Blank, KStimulus, Kinetic,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Kinetic = require(\"../../../jslibs/kinetic\").Kinetic;\n\n  KStimulus = require(\"../../stimresp\").KineticStimulus;\n\n  Blank = (function(_super) {\n    __extends(Blank, _super);\n\n    function Blank() {\n      return Blank.__super__.constructor.apply(this, arguments);\n    }\n\n    Blank.prototype.defaults = {\n      fill: \"white\",\n      opacity: 1\n    };\n\n    Blank.prototype.render = function(context) {\n      var blank;\n      blank = new Kinetic.Rect({\n        x: 0,\n        y: 0,\n        width: context.width(),\n        height: context.height(),\n        fill: this.spec.fill,\n        opacity: this.spec.opacity\n      });\n      return this.presentable(blank);\n    };\n\n    return Blank;\n\n  })(KStimulus);\n\n  exports.Blank = Blank;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/canvas/arrow.js":{"id":46,"canonicalName":"src/components/canvas/arrow.js","code":"(function () {\n    var Arrow, KStimulus, Kinetic, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    KStimulus = require('8', module).KineticStimulus;\n    Kinetic = require('15', module).Kinetic;\n    Arrow = function (_super) {\n        __extends(Arrow, _super);\n        Arrow.prototype.defaults = {\n            x: 100,\n            y: 100,\n            length: 100,\n            direction: 'right',\n            thickness: 40,\n            fill: 'black',\n            arrowSize: 25,\n            angle: null\n        };\n        function Arrow(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            Arrow.__super__.constructor.call(this, spec);\n        }\n        Arrow.prototype.initialize = function () {\n            var height, len, shaftLength, _this;\n            if (this.spec.angle != null) {\n                this.angle = this.spec.angle;\n            } else {\n                this.angle = function () {\n                    switch (this.spec.direction) {\n                    case 'right':\n                        return 0;\n                    case 'left':\n                        return 180;\n                    case 'up':\n                        return 90;\n                    case 'down':\n                        return 270;\n                    default:\n                        return 0;\n                    }\n                }.call(this);\n            }\n            shaftLength = this.spec.length - this.spec.arrowSize;\n            this.arrowShaft = new Kinetic.Rect({\n                x: 0,\n                y: 0,\n                width: shaftLength,\n                height: this.spec.thickness,\n                fill: this.spec.fill,\n                stroke: this.spec.stroke,\n                strokeWidth: this.spec.strokeWidth,\n                opacity: this.spec.opacity\n            });\n            _this = this;\n            this.arrowHead = new Kinetic.Shape({\n                drawFunc: function (cx) {\n                    cx.beginPath();\n                    cx.moveTo(shaftLength, -_this.spec.arrowSize / 2);\n                    cx.lineTo(shaftLength + _this.spec.arrowSize, _this.spec.thickness / 2);\n                    cx.lineTo(shaftLength, _this.spec.thickness + _this.spec.arrowSize / 2);\n                    cx.closePath();\n                    return cx.fillStrokeShape(this);\n                },\n                fill: _this.spec.fill,\n                stroke: this.spec.stroke,\n                strokeWidth: this.spec.strokeWidth,\n                opacity: this.spec.opacity,\n                width: _this.spec.arrowSize,\n                height: _this.spec.arrowSize + _this.spec.thickness\n            });\n            len = shaftLength + this.spec.arrowSize;\n            height = this.spec.thickness;\n            this.node = new Kinetic.Group({\n                x: 0,\n                y: 0,\n                rotationDeg: this.angle,\n                offset: [\n                    len / 2,\n                    height / 2\n                ]\n            });\n            this.node.add(this.arrowShaft);\n            return this.node.add(this.arrowHead);\n        };\n        Arrow.prototype.render = function (context) {\n            var coords;\n            coords = this.computeCoordinates(context, this.spec.position, this.arrowShaft.getWidth(), this.arrowShaft.getHeight());\n            this.node.setPosition({\n                x: coords[0] + (this.arrowShaft.getWidth() + this.spec.arrowSize) / 2,\n                y: coords[1] + this.spec.thickness / 2\n            });\n            return this.presentable(this.node);\n        };\n        return Arrow;\n    }(KStimulus);\n    exports.Arrow = Arrow;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/canvas/arrow.js\"],\"names\":[\"Arrow\",\"KStimulus\",\"Kinetic\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"KineticStimulus\",\"_super\",\"defaults\",\"x\",\"y\",\"length\",\"direction\",\"thickness\",\"fill\",\"arrowSize\",\"angle\",\"spec\",\"initialize\",\"height\",\"len\",\"shaftLength\",\"_this\",\"arrowShaft\",\"Rect\",\"width\",\"stroke\",\"strokeWidth\",\"opacity\",\"arrowHead\",\"Shape\",\"drawFunc\",\"cx\",\"beginPath\",\"moveTo\",\"lineTo\",\"closePath\",\"fillStrokeShape\",\"node\",\"Group\",\"rotationDeg\",\"offset\",\"add\",\"render\",\"context\",\"coords\",\"computeCoordinates\",\"position\",\"getWidth\",\"getHeight\",\"setPosition\",\"presentable\",\"exports\"],\"mappings\":\"AACA,CAAC,YAAW;AAAA,IACV,IAAIA,KAAJ,EAAWC,SAAX,EAAsBC,OAAtB,EACEC,SAAA,GAAY,GAAGC,cADjB,EAEEC,SAAA,GAAY,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAA,YAAE,SAASC,GAAT,IAAgBD,MAAhB,EAAwB;AAAA,gBAAE,IAAIJ,SAAA,CAAUM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ;AAAA,oBAAiCF,KAAA,CAAME,GAAN,IAAaD,MAAA,CAAOC,GAAP,CAAb,CAAnC;AAAA,aAA1B;AAAA,YAAyF,SAASE,IAAT,GAAgB;AAAA,gBAAE,KAAKC,WAAL,GAAmBL,KAAnB,CAAF;AAAA,aAAzG;AAAA,YAAuII,IAAA,CAAKE,SAAL,GAAiBL,MAAA,CAAOK,SAAxB,CAAvI;AAAA,YAA0KN,KAAA,CAAMM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA1K;AAAA,YAAwMJ,KAAA,CAAMO,SAAN,GAAkBN,MAAA,CAAOK,SAAzB,CAAxM;AAAA,YAA4O,OAAON,KAAP,CAA5O;AAAA,SAFtC,CADU;AAAA,IAKVL,SAAA,GAAYa,OAAA,C,GAAA,E,MAAA,EAA0BC,eAAtC,CALU;AAAA,IAOVb,OAAA,GAAUY,OAAA,C,IAAA,E,MAAA,EAAmCZ,OAA7C,CAPU;AAAA,IASVF,KAAA,GAAS,UAASgB,MAAT,EAAiB;AAAA,QACxBX,SAAA,CAAUL,KAAV,EAAiBgB,MAAjB,EADwB;AAAA,QAGxBhB,KAAA,CAAMY,SAAN,CAAgBK,QAAhB,GAA2B;AAAA,YACzBC,CAAA,EAAG,GADsB;AAAA,YAEzBC,CAAA,EAAG,GAFsB;AAAA,YAGzBC,MAAA,EAAQ,GAHiB;AAAA,YAIzBC,SAAA,EAAW,OAJc;AAAA,YAKzBC,SAAA,EAAW,EALc;AAAA,YAMzBC,IAAA,EAAM,OANmB;AAAA,YAOzBC,SAAA,EAAW,EAPc;AAAA,YAQzBC,KAAA,EAAO,IARkB;AAAA,SAA3B,CAHwB;AAAA,QAcxB,SAASzB,KAAT,CAAe0B,IAAf,EAAqB;AAAA,YACnB,IAAIA,IAAA,IAAQ,IAAZ,EAAkB;AAAA,gBAChBA,IAAA,GAAO,EAAP,CADgB;AAAA,aADC;AAAA,YAInB1B,KAAA,CAAMa,SAAN,CAAgBF,WAAhB,CAA4BF,IAA5B,CAAiC,IAAjC,EAAuCiB,IAAvC,EAJmB;AAAA,SAdG;AAAA,QAqBxB1B,KAAA,CAAMY,SAAN,CAAgBe,UAAhB,GAA6B,YAAW;AAAA,YACtC,IAAIC,MAAJ,EAAYC,GAAZ,EAAiBC,WAAjB,EAA8BC,KAA9B,CADsC;AAAA,YAEtC,IAAI,KAAKL,IAAL,CAAUD,KAAV,IAAmB,IAAvB,EAA6B;AAAA,gBAC3B,KAAKA,KAAL,GAAa,KAAKC,IAAL,CAAUD,KAAvB,CAD2B;AAAA,aAA7B,MAEO;AAAA,gBACL,KAAKA,KAAL,GAAc,YAAW;AAAA,oBACvB,QAAQ,KAAKC,IAAL,CAAUL,SAAlB;AAAA,oBACE,KAAK,OAAL;AAAA,wBACE,OAAO,CAAP,CAFJ;AAAA,oBAGE,KAAK,MAAL;AAAA,wBACE,OAAO,GAAP,CAJJ;AAAA,oBAKE,KAAK,IAAL;AAAA,wBACE,OAAO,EAAP,CANJ;AAAA,oBAOE,KAAK,MAAL;AAAA,wBACE,OAAO,GAAP,CARJ;AAAA,oBASE;AAAA,wBACE,OAAO,CAAP,CAVJ;AAAA,qBADuB;AAAA,iBAAZ,CAaVZ,IAbU,CAaL,IAbK,CAAb,CADK;AAAA,aAJ+B;AAAA,YAoBtCqB,WAAA,GAAc,KAAKJ,IAAL,CAAUN,MAAV,GAAmB,KAAKM,IAAL,CAAUF,SAA3C,CApBsC;AAAA,YAqBtC,KAAKQ,UAAL,GAAkB,IAAI9B,OAAA,CAAQ+B,IAAZ,CAAiB;AAAA,gBACjCf,CAAA,EAAG,CAD8B;AAAA,gBAEjCC,CAAA,EAAG,CAF8B;AAAA,gBAGjCe,KAAA,EAAOJ,WAH0B;AAAA,gBAIjCF,MAAA,EAAQ,KAAKF,IAAL,CAAUJ,SAJe;AAAA,gBAKjCC,IAAA,EAAM,KAAKG,IAAL,CAAUH,IALiB;AAAA,gBAMjCY,MAAA,EAAQ,KAAKT,IAAL,CAAUS,MANe;AAAA,gBAOjCC,WAAA,EAAa,KAAKV,IAAL,CAAUU,WAPU;AAAA,gBAQjCC,OAAA,EAAS,KAAKX,IAAL,CAAUW,OARc;AAAA,aAAjB,CAAlB,CArBsC;AAAA,YA+BtCN,KAAA,GAAQ,IAAR,CA/BsC;AAAA,YAgCtC,KAAKO,SAAL,GAAiB,IAAIpC,OAAA,CAAQqC,KAAZ,CAAkB;AAAA,gBACjCC,QAAA,EAAU,UAASC,EAAT,EAAa;AAAA,oBACrBA,EAAA,CAAGC,SAAH,GADqB;AAAA,oBAErBD,EAAA,CAAGE,MAAH,CAAUb,WAAV,EAAuB,CAACC,KAAA,CAAML,IAAN,CAAWF,SAAZ,GAAwB,CAA/C,EAFqB;AAAA,oBAGrBiB,EAAA,CAAGG,MAAH,CAAUd,WAAA,GAAcC,KAAA,CAAML,IAAN,CAAWF,SAAnC,EAA8CO,KAAA,CAAML,IAAN,CAAWJ,SAAX,GAAuB,CAArE,EAHqB;AAAA,oBAIrBmB,EAAA,CAAGG,MAAH,CAAUd,WAAV,EAAuBC,KAAA,CAAML,IAAN,CAAWJ,SAAX,GAAuBS,KAAA,CAAML,IAAN,CAAWF,SAAX,GAAuB,CAArE,EAJqB;AAAA,oBAKrBiB,EAAA,CAAGI,SAAH,GALqB;AAAA,oBAMrB,OAAOJ,EAAA,CAAGK,eAAH,CAAmB,IAAnB,CAAP,CANqB;AAAA,iBADU;AAAA,gBASjCvB,IAAA,EAAMQ,KAAA,CAAML,IAAN,CAAWH,IATgB;AAAA,gBAUjCY,MAAA,EAAQ,KAAKT,IAAL,CAAUS,MAVe;AAAA,gBAWjCC,WAAA,EAAa,KAAKV,IAAL,CAAUU,WAXU;AAAA,gBAYjCC,OAAA,EAAS,KAAKX,IAAL,CAAUW,OAZc;AAAA,gBAajCH,KAAA,EAAOH,KAAA,CAAML,IAAN,CAAWF,SAbe;AAAA,gBAcjCI,MAAA,EAAQG,KAAA,CAAML,IAAN,CAAWF,SAAX,GAAuBO,KAAA,CAAML,IAAN,CAAWJ,SAdT;AAAA,aAAlB,CAAjB,CAhCsC;AAAA,YAgDtCO,GAAA,GAAMC,WAAA,GAAc,KAAKJ,IAAL,CAAUF,SAA9B,CAhDsC;AAAA,YAiDtCI,MAAA,GAAS,KAAKF,IAAL,CAAUJ,SAAnB,CAjDsC;AAAA,YAkDtC,KAAKyB,IAAL,GAAY,IAAI7C,OAAA,CAAQ8C,KAAZ,CAAkB;AAAA,gBAC5B9B,CAAA,EAAG,CADyB;AAAA,gBAE5BC,CAAA,EAAG,CAFyB;AAAA,gBAG5B8B,WAAA,EAAa,KAAKxB,KAHU;AAAA,gBAI5ByB,MAAA,EAAQ;AAAA,oBAACrB,GAAA,GAAM,CAAP;AAAA,oBAAUD,MAAA,GAAS,CAAnB;AAAA,iBAJoB;AAAA,aAAlB,CAAZ,CAlDsC;AAAA,YAwDtC,KAAKmB,IAAL,CAAUI,GAAV,CAAc,KAAKnB,UAAnB,EAxDsC;AAAA,YAyDtC,OAAO,KAAKe,IAAL,CAAUI,GAAV,CAAc,KAAKb,SAAnB,CAAP,CAzDsC;AAAA,SAAxC,CArBwB;AAAA,QAiFxBtC,KAAA,CAAMY,SAAN,CAAgBwC,MAAhB,GAAyB,UAASC,OAAT,EAAkB;AAAA,YACzC,IAAIC,MAAJ,CADyC;AAAA,YAEzCA,MAAA,GAAS,KAAKC,kBAAL,CAAwBF,OAAxB,EAAiC,KAAK3B,IAAL,CAAU8B,QAA3C,EAAqD,KAAKxB,UAAL,CAAgByB,QAAhB,EAArD,EAAiF,KAAKzB,UAAL,CAAgB0B,SAAhB,EAAjF,CAAT,CAFyC;AAAA,YAGzC,KAAKX,IAAL,CAAUY,WAAV,CAAsB;AAAA,gBACpBzC,CAAA,EAAGoC,MAAA,CAAO,CAAP,IAAa,MAAKtB,UAAL,CAAgByB,QAAhB,KAA6B,KAAK/B,IAAL,CAAUF,SAAvC,CAAD,GAAqD,CADhD;AAAA,gBAEpBL,CAAA,EAAGmC,MAAA,CAAO,CAAP,IAAY,KAAK5B,IAAL,CAAUJ,SAAV,GAAsB,CAFjB;AAAA,aAAtB,EAHyC;AAAA,YAOzC,OAAO,KAAKsC,WAAL,CAAiB,KAAKb,IAAtB,CAAP,CAPyC;AAAA,SAA3C,CAjFwB;AAAA,QA2FxB,OAAO/C,KAAP,CA3FwB;AAAA,KAAlB,CA6FLC,SA7FK,CAAR,CATU;AAAA,IAwGV4D,OAAA,CAAQ7D,KAAR,GAAgBA,KAAhB,CAxGU;AAAA,CAAZ,CA0GGS,IA1GH,CA0GQ,IA1GR\"}","lineCount":109,"mtime":1392864794000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.7.1\n(function() {\n  var Arrow, KStimulus, Kinetic,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  KStimulus = require(\"../../stimresp\").KineticStimulus;\n\n  Kinetic = require(\"../../../jslibs/kinetic\").Kinetic;\n\n  Arrow = (function(_super) {\n    __extends(Arrow, _super);\n\n    Arrow.prototype.defaults = {\n      x: 100,\n      y: 100,\n      length: 100,\n      direction: \"right\",\n      thickness: 40,\n      fill: \"black\",\n      arrowSize: 25,\n      angle: null\n    };\n\n    function Arrow(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      Arrow.__super__.constructor.call(this, spec);\n    }\n\n    Arrow.prototype.initialize = function() {\n      var height, len, shaftLength, _this;\n      if (this.spec.angle != null) {\n        this.angle = this.spec.angle;\n      } else {\n        this.angle = (function() {\n          switch (this.spec.direction) {\n            case \"right\":\n              return 0;\n            case \"left\":\n              return 180;\n            case \"up\":\n              return 90;\n            case \"down\":\n              return 270;\n            default:\n              return 0;\n          }\n        }).call(this);\n      }\n      shaftLength = this.spec.length - this.spec.arrowSize;\n      this.arrowShaft = new Kinetic.Rect({\n        x: 0,\n        y: 0,\n        width: shaftLength,\n        height: this.spec.thickness,\n        fill: this.spec.fill,\n        stroke: this.spec.stroke,\n        strokeWidth: this.spec.strokeWidth,\n        opacity: this.spec.opacity\n      });\n      _this = this;\n      this.arrowHead = new Kinetic.Shape({\n        drawFunc: function(cx) {\n          cx.beginPath();\n          cx.moveTo(shaftLength, -_this.spec.arrowSize / 2.0);\n          cx.lineTo(shaftLength + _this.spec.arrowSize, _this.spec.thickness / 2.0);\n          cx.lineTo(shaftLength, _this.spec.thickness + _this.spec.arrowSize / 2.0);\n          cx.closePath();\n          return cx.fillStrokeShape(this);\n        },\n        fill: _this.spec.fill,\n        stroke: this.spec.stroke,\n        strokeWidth: this.spec.strokeWidth,\n        opacity: this.spec.opacity,\n        width: _this.spec.arrowSize,\n        height: _this.spec.arrowSize + _this.spec.thickness\n      });\n      len = shaftLength + this.spec.arrowSize;\n      height = this.spec.thickness;\n      this.node = new Kinetic.Group({\n        x: 0,\n        y: 0,\n        rotationDeg: this.angle,\n        offset: [len / 2, height / 2]\n      });\n      this.node.add(this.arrowShaft);\n      return this.node.add(this.arrowHead);\n    };\n\n    Arrow.prototype.render = function(context) {\n      var coords;\n      coords = this.computeCoordinates(context, this.spec.position, this.arrowShaft.getWidth(), this.arrowShaft.getHeight());\n      this.node.setPosition({\n        x: coords[0] + (this.arrowShaft.getWidth() + this.spec.arrowSize) / 2,\n        y: coords[1] + this.spec.thickness / 2\n      });\n      return this.presentable(this.node);\n    };\n\n    return Arrow;\n\n  })(KStimulus);\n\n  exports.Arrow = Arrow;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/design.js":{"id":10,"canonicalName":"src/design.js","code":"(function () {\n    var ArrayIterator, BlockStructure, CellTable, ConditionSet, DataTable, DependentFactorNode, ExpDesign, Factor, FactorNode, FactorSetNode, FactorSpec, ItemNode, ItemSetNode, Iterator, SamplerNode, TaskNode, TrialList, VarSpec, csv, sampler, trimWhiteSpace, utils, _, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    _ = require('16', module);\n    utils = require('5', module);\n    DataTable = require('6', module).DataTable;\n    csv = require('18', module);\n    sampler = require('7', module);\n    exports.Factor = Factor = function (_super) {\n        __extends(Factor, _super);\n        Factor.asFactor = function (arr) {\n            return function (func, args, ctor) {\n                ctor.prototype = func.prototype;\n                var child = new ctor(), result = func.apply(child, args);\n                return Object(result) === result ? result : child;\n            }(Factor, arr, function () {\n            });\n        };\n        function Factor(arr) {\n            var arg, _i, _len;\n            for (_i = 0, _len = arr.length; _i < _len; _i++) {\n                arg = arr[_i];\n                this.push(arg);\n            }\n            this.levels = _.uniq(arr).sort();\n        }\n        return Factor;\n    }(Array);\n    exports.VarSpec = VarSpec = function () {\n        function VarSpec() {\n        }\n        VarSpec.name = '';\n        VarSpec.nblocks = 1;\n        VarSpec.reps = 1;\n        VarSpec.expanded = {};\n        VarSpec.prototype.names = function () {\n            return this.name;\n        };\n        VarSpec.prototype.ntrials = function () {\n            return this.nblocks * this.reps;\n        };\n        VarSpec.prototype.valueAt = function (block, trial) {\n        };\n        return VarSpec;\n    }();\n    exports.FactorSpec = FactorSpec = function (_super) {\n        __extends(FactorSpec, _super);\n        function FactorSpec(name, levels) {\n            this.name = name;\n            this.levels = levels;\n            this.factorSet = {};\n            this.factorSet[this.name] = this.levels;\n            this.conditionTable = DataTable.expand(this.factorSet);\n        }\n        FactorSpec.prototype.cross = function (other) {\n            return new CrossedFactorSpec(this.nblocks, this.reps, [\n                this,\n                other\n            ]);\n        };\n        FactorSpec.prototype.expand = function (nblocks, reps) {\n            var blocks, concatBlocks, i, prop, vset, _i, _results;\n            prop = {};\n            prop[this.name] = this.levels;\n            vset = new DataTable(prop);\n            blocks = function () {\n                var _i, _results;\n                _results = [];\n                for (i = _i = 1; 1 <= nblocks ? _i <= nblocks : _i >= nblocks; i = 1 <= nblocks ? ++_i : --_i) {\n                    _results.push(vset.replicate(reps));\n                }\n                return _results;\n            }();\n            concatBlocks = _.reduce(blocks, function (sum, nex) {\n                return DataTable.rbind(sum, nex);\n            });\n            concatBlocks.bindcol('$Block', utils.rep(function () {\n                _results = [];\n                for (var _i = 1; 1 <= nblocks ? _i <= nblocks : _i >= nblocks; 1 <= nblocks ? _i++ : _i--) {\n                    _results.push(_i);\n                }\n                return _results;\n            }.apply(this), utils.rep(reps * vset.nrow(), nblocks)));\n            return concatBlocks;\n        };\n        return FactorSpec;\n    }(exports.VarSpec);\n    exports.CellTable = CellTable = function (_super) {\n        __extends(CellTable, _super);\n        function CellTable(parents) {\n            var fac;\n            this.parents = parents;\n            this.parentNames = function () {\n                var _i, _len, _ref, _results;\n                _ref = this.parents;\n                _results = [];\n                for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n                    fac = _ref[_i];\n                    _results.push(fac.name);\n                }\n                return _results;\n            }.call(this);\n            this.name = _.reduce(this.parentNames, function (n, n1) {\n                return n + ':' + n1;\n            });\n            this.levels = function () {\n                var _i, _len, _ref, _results;\n                _ref = this.parents;\n                _results = [];\n                for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n                    fac = _ref[_i];\n                    _results.push(fac.levels);\n                }\n                return _results;\n            }.call(this);\n            this.factorSet = _.zipObject(this.parentNames, this.levels);\n            this.table = DataTable.expand(this.factorSet);\n        }\n        CellTable.prototype.names = function () {\n            return this.parentNames;\n        };\n        CellTable.prototype.cells = function () {\n            return this.table.toRecordArray();\n        };\n        CellTable.prototype.conditions = function () {\n            var i, rec, _i, _ref, _results;\n            _results = [];\n            for (i = _i = 0, _ref = this.table.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                rec = this.table.record(i);\n                _results.push(_.reduce(rec, function (n, n1) {\n                    return n + ':' + n1;\n                }));\n            }\n            return _results;\n        };\n        CellTable.prototype.expand = function (nblocks, reps) {\n            var blocks, i;\n            return blocks = function () {\n                var _i, _results;\n                _results = [];\n                for (i = _i = 1; 1 <= nblocks ? _i <= nblocks : _i >= nblocks; i = 1 <= nblocks ? ++_i : --_i) {\n                    _results.push(this.table.replicate(reps));\n                }\n                return _results;\n            }.call(this);\n        };\n        return CellTable;\n    }(exports.VarSpec);\n    exports.BlockStructure = BlockStructure = function () {\n        function BlockStructure(nblocks, trialsPerBlock) {\n            this.nblocks = nblocks;\n            this.trialsPerBlock = trialsPerBlock;\n        }\n        return BlockStructure;\n    }();\n    exports.TaskNode = TaskNode = function () {\n        function TaskNode(varNodes, crossedSet) {\n            var i, vname, _i, _j, _k, _len, _len1, _ref, _ref1, _ref2;\n            this.varNodes = varNodes;\n            this.crossedSet = crossedSet != null ? crossedSet : [];\n            this.factorNames = _.map(this.varNodes, function (x) {\n                return x.name;\n            });\n            this.varmap = {};\n            for (i = _i = 0, _ref = this.factorNames.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                this.varmap[this.factorNames[i]] = this.varSpecs[i];\n            }\n            if (this.crossedSet.length > 0) {\n                _ref1 = this.crossedSet;\n                for (_j = 0, _len = _ref1.length; _j < _len; _j++) {\n                    vname = _ref1[_j];\n                    this.crossedVars = this.varmap[vname];\n                }\n                this.crossedSpec = new CrossedFactorSpec(this.crossedVars);\n            } else {\n                this.crossedVars = [];\n                this.crossedSpec = {};\n            }\n            this.uncrossedVars = _.difference(this.factorNames, this.crossedSet);\n            _ref2 = this.uncrossedVars;\n            for (_k = 0, _len1 = _ref2.length; _k < _len1; _k++) {\n                vname = _ref2[_k];\n                this.uncrossedSpec = this.varmap[vname];\n            }\n            ({\n                expand: function (nblocks, nreps) {\n                    var ctable;\n                    if (this.crossedVars.length > 0) {\n                        return ctable = this.crossedSpec.expand(nblocks, nreps);\n                    }\n                }\n            });\n        }\n        return TaskNode;\n    }();\n    FactorNode = FactorNode = function () {\n        FactorNode.build = function (name, spec) {\n            return new FactorNode(name, spec.levels);\n        };\n        function FactorNode(name, levels) {\n            this.name = name;\n            this.levels = levels;\n            this.cellTable = new CellTable([this]);\n        }\n        FactorNode.prototype.choose = function () {\n            return utils.oneOf(this.levels);\n        };\n        FactorNode.prototype.chooseK = function (k) {\n            return utils.permute(this.levels, k);\n        };\n        FactorNode.prototype.chooseDependent = function (recArray) {\n            return this.chooseK(recArray.length);\n        };\n        FactorNode.prototype.expand = function (nblocks, nreps) {\n            return this.cellTable.expand(nblocks, nreps);\n        };\n        return FactorNode;\n    }();\n    exports.FactorNode = FactorNode;\n    DependentFactorNode = DependentFactorNode = function () {\n        DependentFactorNode.build = function (name, spec) {\n            return new DependentFactorNode(name, spec.levels, spec.choose);\n        };\n        function DependentFactorNode(name, levels, chooseFun) {\n            this.name = name;\n            this.levels = levels;\n            this.chooseFun = chooseFun;\n            this.cellTable = new CellTable([this]);\n        }\n        DependentFactorNode.prototype.choose = function (record) {\n            return this.chooseFun(record);\n        };\n        DependentFactorNode.prototype.chooseDependent = function (recArray) {\n            return _.map(recArray, function (_this) {\n                return function (rec) {\n                    return _this.choose(rec);\n                };\n            }(this));\n        };\n        DependentFactorNode.prototype.expand = function (nblocks, nreps) {\n            return this.cellTable.expand(nblocks, nreps);\n        };\n        return DependentFactorNode;\n    }();\n    exports.DependentFactorNode = DependentFactorNode;\n    exports.FactorSetNode = FactorSetNode = function () {\n        FactorSetNode.build = function (spec) {\n            var fnodes, key, value;\n            fnodes = function () {\n                var _results;\n                _results = [];\n                for (key in spec) {\n                    value = spec[key];\n                    _results.push(exports.FactorNode.build(key, value));\n                }\n                return _results;\n            }();\n            return new FactorSetNode(fnodes);\n        };\n        function FactorSetNode(factors) {\n            var i, _i, _ref;\n            this.factors = factors;\n            this.factorNames = _.map(this.factors, function (x) {\n                return x.name;\n            });\n            this.varmap = {};\n            for (i = _i = 0, _ref = this.factorNames.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                this.varmap[this.factorNames[i]] = this.factors[i];\n            }\n            this.cellTable = new CellTable(this.factors);\n            this.name = this.cellTable.name;\n        }\n        FactorSetNode.prototype.levels = function () {\n            return this.cellTable.levels;\n        };\n        FactorSetNode.prototype.conditions = function () {\n            return this.cellTable.conditions();\n        };\n        FactorSetNode.prototype.cells = function () {\n            return this.cellTable.cells();\n        };\n        FactorSetNode.prototype.expand = function (nblocks, nreps) {\n            return this.cellTable.expand(nblocks, nreps);\n        };\n        FactorSetNode.prototype.trialList = function (nblocks, nreps) {\n            var blk, blocks, i, j, tlist, _i, _j, _len, _ref;\n            if (nblocks == null) {\n                nblocks = 1;\n            }\n            if (nreps == null) {\n                nreps = 1;\n            }\n            blocks = this.expand(nblocks, nreps);\n            tlist = new TrialList(nblocks);\n            for (i = _i = 0, _len = blocks.length; _i < _len; i = ++_i) {\n                blk = blocks[i];\n                for (j = _j = 0, _ref = blk.nrow(); 0 <= _ref ? _j < _ref : _j > _ref; j = 0 <= _ref ? ++_j : --_j) {\n                    tlist.add(i, blk.record(j));\n                }\n            }\n            return tlist;\n        };\n        return FactorSetNode;\n    }();\n    exports.Iterator = Iterator = function () {\n        function Iterator() {\n        }\n        Iterator.prototype.hasNext = function () {\n            return false;\n        };\n        Iterator.prototype.next = function () {\n            throw 'empty iterator';\n        };\n        Iterator.prototype.map = function (fun) {\n            throw 'empty iterator';\n        };\n        return Iterator;\n    }();\n    exports.ArrayIterator = ArrayIterator = function (_super) {\n        __extends(ArrayIterator, _super);\n        function ArrayIterator(arr) {\n            this.arr = arr;\n            this.cursor = 0;\n            ({\n                hasNext: function () {\n                    return this.cursor < this.arr.length;\n                },\n                next: function () {\n                    var ret;\n                    ret = this.arr[this.cursor];\n                    this.cursor = this.cursor + 1;\n                    return ret;\n                },\n                map: function (f) {\n                    return _.map(this.arr, function (el) {\n                        return f(el);\n                    });\n                }\n            });\n        }\n        return ArrayIterator;\n    }(Iterator);\n    TrialList = function () {\n        TrialList.fromBlockArray = function (blocks) {\n            var i, rec, tlist, _i, _j, _len, _ref, _ref1;\n            tlist = new TrialList(blocks.length);\n            for (i = _i = 0, _ref = blocks.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                _ref1 = blocks[i].toRecordArray();\n                for (_j = 0, _len = _ref1.length; _j < _len; _j++) {\n                    rec = _ref1[_j];\n                    tlist.add(i, rec);\n                }\n            }\n            return tlist;\n        };\n        function TrialList(nblocks) {\n            var i, _i;\n            this.blocks = [];\n            for (i = _i = 0; 0 <= nblocks ? _i < nblocks : _i > nblocks; i = 0 <= nblocks ? ++_i : --_i) {\n                this.blocks.push([]);\n            }\n        }\n        TrialList.prototype.add = function (block, trial) {\n            var blen;\n            if (block >= this.blocks.length) {\n                blen = this.blocks.length;\n                throw new Error('block index ' + block + ' exceeds number of blocks in TrialList ' + blen);\n            }\n            return this.blocks[block].push(trial);\n        };\n        TrialList.prototype.get = function (block, trialNum) {\n            return this.blocks[block][trialNum];\n        };\n        TrialList.prototype.getBlock = function (block) {\n            return this.blocks[block];\n        };\n        TrialList.prototype.nblocks = function () {\n            return this.blocks.length;\n        };\n        TrialList.prototype.ntrials = function () {\n            var nt;\n            nt = _.map(this.blocks, function (b) {\n                return b.length;\n            });\n            return _.reduce(nt, function (x0, x1) {\n                return x0 + x1;\n            });\n        };\n        TrialList.prototype.shuffle = function () {\n            return this.blocks = _.map(this.blocks, function (blk) {\n                return _.shuffle(blk);\n            });\n        };\n        TrialList.prototype.bind = function (fun) {\n            var blk, i, out, ret, trial, _i, _j, _len, _len1, _ref;\n            out = new TrialList(this.blocks.length);\n            _ref = this.blocks;\n            for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {\n                blk = _ref[i];\n                for (_j = 0, _len1 = blk.length; _j < _len1; _j++) {\n                    trial = blk[_j];\n                    ret = fun(trial);\n                    out.add(i, _.assign(trial, ret));\n                }\n            }\n            return out;\n        };\n        TrialList.prototype.blockIterator = function () {\n            return new ArrayIterator(_.map(this.blocks, function (blk) {\n                return new ArrayIterator(blk);\n            }));\n        };\n        return TrialList;\n    }();\n    exports.TrialList = TrialList;\n    trimWhiteSpace = function (records) {\n        var i, key, out, record, trimmed, value, _i, _ref;\n        trimmed = [];\n        for (i = _i = 0, _ref = records.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n            record = records[i];\n            out = {};\n            for (key in record) {\n                value = record[key];\n                out[key.trim()] = value.trim();\n            }\n            trimmed.push(out);\n        }\n        return trimmed;\n    };\n    exports.ItemNode = ItemNode = function () {\n        ItemNode.build = function (name, spec) {\n            var attrs, dtable, inode, items, snode;\n            if (spec.type == null) {\n                spec.type = 'text';\n            }\n            snode = spec.sampler != null ? SamplerNode.build(spec.sampler) : new SamplerNode('default', {});\n            if (spec.data != null) {\n                dtable = DataTable.fromRecords(spec.data);\n                attrs = dtable.dropColumn(name);\n                items = dtable[name];\n                return new ItemNode(name, items, attrs, spec.type, snode.makeSampler(items));\n            } else if (spec.csv != null) {\n                inode = null;\n                $.ajax({\n                    url: spec.csv.url,\n                    dataType: 'text',\n                    async: false,\n                    success: function (_this) {\n                        return function (data) {\n                            var records;\n                            records = trimWhiteSpace(csv.toObjects(data));\n                            dtable = DataTable.fromRecords(records);\n                            items = dtable[name];\n                            attrs = dtable.dropColumn(name);\n                            return inode = new ItemNode(name, items, attrs, spec.type, snode.makeSampler(items));\n                        };\n                    }(this),\n                    error: function (x) {\n                        return console.log(x);\n                    }\n                });\n                return inode;\n            }\n        };\n        function ItemNode(name, items, attributes, type, sampler) {\n            this.name = name;\n            this.items = items;\n            this.attributes = attributes;\n            this.type = type;\n            this.sampler = sampler;\n            if (this.items.length !== this.attributes.nrow()) {\n                throw 'Number of items must equal number of attributes';\n            }\n        }\n        ItemNode.prototype.sample = function (n) {\n            return this.sampler.take(n);\n        };\n        return ItemNode;\n    }();\n    exports.ItemSetNode = ItemSetNode = function () {\n        ItemSetNode.build = function (spec) {\n            var key, nodes, value;\n            nodes = function () {\n                var _results;\n                _results = [];\n                for (key in spec) {\n                    value = spec[key];\n                    _results.push(exports.ItemNode.build(key, value));\n                }\n                return _results;\n            }();\n            return new ItemSetNode(nodes);\n        };\n        function ItemSetNode(itemNodes) {\n            this.itemNodes = itemNodes;\n            this.names = _.map(this.itemNodes, function (n) {\n                return n.name;\n            });\n        }\n        ItemSetNode.prototype.sample = function (n) {\n            var i, items, j, name, out, record, _i, _j, _len, _ref;\n            items = _.map(this.itemNodes, function (node) {\n                return node.sample(n);\n            });\n            out = [];\n            for (i = _i = 0; 0 <= n ? _i < n : _i > n; i = 0 <= n ? ++_i : --_i) {\n                record = {};\n                _ref = this.names;\n                for (j = _j = 0, _len = _ref.length; _j < _len; j = ++_j) {\n                    name = _ref[j];\n                    record[name] = items[j][i];\n                }\n                out.push(record);\n            }\n            return out;\n        };\n        return ItemSetNode;\n    }();\n    SamplerNode = SamplerNode = function () {\n        SamplerNode.build = function (spec) {\n            if (spec.type == null) {\n                spec.type = 'default';\n            }\n            return new SamplerNode(spec.type, spec);\n        };\n        function SamplerNode(type, params) {\n            this.makeSampler = function () {\n                switch (type) {\n                case 'default':\n                    return function (items) {\n                        return new sampler.Sampler(items, params);\n                    };\n                case 'exhaustive':\n                    return function (items) {\n                        return new sampler.ExhaustiveSampler(items, params);\n                    };\n                case 'replacement':\n                    return function (items) {\n                        return new sampler.ReplacementSampler(items, params);\n                    };\n                default:\n                    throw new Error('unrecognized sampler type', type);\n                }\n            }();\n        }\n        return SamplerNode;\n    }();\n    exports.SamplerNode = SamplerNode;\n    exports.ConditionSet = ConditionSet = function () {\n        ConditionSet.build = function (spec) {\n            var key, value, _crossed, _uncrossed;\n            if (spec.Crossed == null && !spec.Uncrossed) {\n                _crossed = exports.FactorSetNode.build(spec.Crossed);\n                _uncrossed = {};\n            } else {\n                _crossed = exports.FactorSetNode.build(spec.Crossed);\n                _uncrossed = function () {\n                    var _ref, _results;\n                    _ref = spec.Uncrossed;\n                    _results = [];\n                    for (key in _ref) {\n                        value = _ref[key];\n                        _results.push(DependentFactorNode.build(key, value));\n                    }\n                    return _results;\n                }();\n            }\n            return new ConditionSet(_crossed, _uncrossed);\n        };\n        function ConditionSet(crossed, uncrossed) {\n            this.crossed = crossed;\n            this.uncrossed = uncrossed;\n            this.factorNames = [].concat(this.crossed.factorNames).concat(_.map(this.uncrossed, function (_this) {\n                return function (fac) {\n                    return fac.name;\n                };\n            }(this)));\n            this.factorArray = _.clone(this.crossed.factors);\n            _.forEach(this.uncrossed, function (_this) {\n                return function (fac) {\n                    return _this.factorArray.push(fac);\n                };\n            }(this));\n            this.factorSet = _.zipObject(this.factorNames, this.factorArray);\n        }\n        ConditionSet.prototype.expand = function (nblocks, nreps) {\n            var blk, cellTab, i, _i, _j, _len, _ref;\n            cellTab = this.crossed.expand(nblocks, nreps);\n            for (_i = 0, _len = cellTab.length; _i < _len; _i++) {\n                blk = cellTab[_i];\n                for (i = _j = 0, _ref = this.uncrossed.length; 0 <= _ref ? _j < _ref : _j > _ref; i = 0 <= _ref ? ++_j : --_j) {\n                    blk.bindcol(this.uncrossed[i].name, this.uncrossed[i].chooseDependent(blk.toRecordArray()));\n                }\n            }\n            return TrialList.fromBlockArray(cellTab);\n        };\n        return ConditionSet;\n    }();\n    exports.ExpDesign = ExpDesign = function () {\n        ExpDesign.blocks = 1;\n        ExpDesign.validate = function (spec) {\n            var des;\n            if (!('Design' in spec)) {\n                throw 'Design is undefined';\n            }\n            des = spec['Design'];\n            if (!('Variables' in des)) {\n                throw 'Variables is undefined';\n            }\n            if (!('Structure' in des)) {\n                throw 'Structure is undefined';\n            }\n            if (!('Items' in spec)) {\n                throw 'Items is undefined';\n            }\n        };\n        ExpDesign.splitCrossedItems = function (itemSpec, crossedVariables) {\n            var attrnames, conditionTable, i, indices, itemSets, j, keySet, levs, record, values;\n            attrnames = crossedVariables.colnames();\n            keySet = function () {\n                var _i, _ref, _results;\n                _results = [];\n                for (i = _i = 0, _ref = crossedVariables.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                    record = crossedVariables.record(i);\n                    levs = _.values(record);\n                    _results.push(_.reduce(levs, function (a, b) {\n                        return a + ':' + b;\n                    }));\n                }\n                return _results;\n            }();\n            values = itemSpec['values'];\n            conditionTable = new DataTable(_.pick(itemSpec, attrnames));\n            itemSets = function () {\n                var _i, _ref, _results;\n                _results = [];\n                for (i = _i = 0, _ref = crossedVariables.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                    record = crossedVariables.record(i);\n                    indices = conditionTable.whichRow(record);\n                    _results.push(function () {\n                        var _j, _len, _results1;\n                        _results1 = [];\n                        for (_j = 0, _len = indices.length; _j < _len; _j++) {\n                            j = indices[_j];\n                            _results1.push(values[j]);\n                        }\n                        return _results1;\n                    }());\n                }\n                return _results;\n            }();\n            return _.zipObject(keySet, itemSets);\n        };\n        ExpDesign.prototype.init = function (spec) {\n            this.design = spec['Design'];\n            this.variables = this.design['Variables'];\n            this.itemSpec = spec['Items'];\n            this.structure = this.design['Structure'];\n            this.factorNames = _.keys(this.variables);\n            this.crossed = this.variables['Crossed'];\n            return this.auxiliary = this.variables['Auxiliary'];\n        };\n        ExpDesign.prototype.initStructure = function () {\n            if (this.structure['type'] === 'Block') {\n                if (!_.has(this.structure, 'reps_per_block')) {\n                    this.structure['reps_per_block'] = 1;\n                }\n                this.reps_per_block = this.structure['reps_per_block'];\n                return this.blocks = this.structure['blocks'];\n            } else {\n                this.reps_per_block = 1;\n                return this.blocks = 1;\n            }\n        };\n        ExpDesign.prototype.makeConditionalSampler = function (crossedSpec, crossedItems) {\n            var crossedItemMap, crossedItemName, key;\n            crossedItemName = _.keys(crossedItems)[0];\n            console.log('names:', crossedSpec.names());\n            crossedItemMap = function () {\n                var _i, _len, _ref, _results;\n                _ref = crossedSpec.names();\n                _results = [];\n                for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n                    key = _ref[_i];\n                    _results.push(crossedItems[crossedItemName][key]);\n                }\n                return _results;\n            }();\n            crossedItemMap = _.zipObject(_.keys(this.crossed), crossedItemMap);\n            console.log('item map: ', crossedItemMap);\n            return new ConditionalSampler(crossedItems[crossedItemName].values, new DataTable(crossedItemMap), crossedSpec);\n        };\n        ExpDesign.prototype.makeCrossedSpec = function (crossed, nblocks, nreps) {\n            var factors, key, val;\n            factors = function () {\n                var _results;\n                _results = [];\n                for (key in crossed) {\n                    val = crossed[key];\n                    _results.push(new FactorSpec(nblocks, nreps, key, val.levels));\n                }\n                return _results;\n            }();\n            return crossed = new CrossedFactorSpec(nblocks, nreps, factors);\n        };\n        ExpDesign.prototype.makeFactorSpec = function (fac, nblocks, nreps) {\n            return new FactorSpec(nblocks, nreps, _.keys(fac)[0], _.values(fac)[0]);\n        };\n        function ExpDesign(spec) {\n            var crossedItems, crossedSampler;\n            if (spec == null) {\n                spec = {};\n            }\n            ExpDesign.validate(spec);\n            this.init(spec);\n            this.initStructure();\n            this.crossedSpec = this.makeCrossedSpec(this.crossed, this.blocks, this.reps_per_block);\n            crossedItems = this.itemSpec.Crossed;\n            crossedSampler = this.makeConditionalSampler(this.crossedSpec, crossedItems);\n            this.fullDesign = this.crossedSpec.expanded.bindcol(_.keys(crossedItems)[0], crossedSampler.take(this.crossedSpec.expanded.nrow()));\n            console.log(this.crossedDesign);\n        }\n        return ExpDesign;\n    }();\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/design.js\"],\"names\":[\"ArrayIterator\",\"BlockStructure\",\"CellTable\",\"ConditionSet\",\"DataTable\",\"DependentFactorNode\",\"ExpDesign\",\"Factor\",\"FactorNode\",\"FactorSetNode\",\"FactorSpec\",\"ItemNode\",\"ItemSetNode\",\"Iterator\",\"SamplerNode\",\"TaskNode\",\"TrialList\",\"VarSpec\",\"csv\",\"sampler\",\"trimWhiteSpace\",\"utils\",\"_\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"exports\",\"_super\",\"asFactor\",\"arr\",\"func\",\"args\",\"result\",\"apply\",\"Object\",\"arg\",\"_i\",\"_len\",\"length\",\"push\",\"levels\",\"uniq\",\"sort\",\"Array\",\"name\",\"nblocks\",\"reps\",\"expanded\",\"names\",\"ntrials\",\"valueAt\",\"block\",\"trial\",\"factorSet\",\"conditionTable\",\"expand\",\"cross\",\"other\",\"CrossedFactorSpec\",\"blocks\",\"concatBlocks\",\"i\",\"prop\",\"vset\",\"_results\",\"replicate\",\"reduce\",\"sum\",\"nex\",\"rbind\",\"bindcol\",\"rep\",\"nrow\",\"parents\",\"fac\",\"parentNames\",\"_ref\",\"n\",\"n1\",\"zipObject\",\"table\",\"cells\",\"toRecordArray\",\"conditions\",\"rec\",\"record\",\"trialsPerBlock\",\"varNodes\",\"crossedSet\",\"vname\",\"_j\",\"_k\",\"_len1\",\"_ref1\",\"_ref2\",\"factorNames\",\"map\",\"x\",\"varmap\",\"varSpecs\",\"crossedVars\",\"crossedSpec\",\"uncrossedVars\",\"difference\",\"uncrossedSpec\",\"nreps\",\"ctable\",\"build\",\"spec\",\"cellTable\",\"choose\",\"oneOf\",\"chooseK\",\"k\",\"permute\",\"chooseDependent\",\"recArray\",\"chooseFun\",\"_this\",\"fnodes\",\"value\",\"factors\",\"trialList\",\"blk\",\"j\",\"tlist\",\"add\",\"hasNext\",\"next\",\"fun\",\"cursor\",\"ret\",\"f\",\"el\",\"fromBlockArray\",\"blen\",\"Error\",\"get\",\"trialNum\",\"getBlock\",\"nt\",\"b\",\"x0\",\"x1\",\"shuffle\",\"bind\",\"out\",\"assign\",\"blockIterator\",\"records\",\"trimmed\",\"trim\",\"attrs\",\"dtable\",\"inode\",\"items\",\"snode\",\"type\",\"data\",\"fromRecords\",\"dropColumn\",\"makeSampler\",\"$\",\"ajax\",\"url\",\"dataType\",\"async\",\"success\",\"toObjects\",\"error\",\"console\",\"log\",\"attributes\",\"sample\",\"take\",\"nodes\",\"itemNodes\",\"node\",\"params\",\"Sampler\",\"ExhaustiveSampler\",\"ReplacementSampler\",\"_crossed\",\"_uncrossed\",\"Crossed\",\"Uncrossed\",\"crossed\",\"uncrossed\",\"concat\",\"factorArray\",\"clone\",\"forEach\",\"cellTab\",\"validate\",\"des\",\"splitCrossedItems\",\"itemSpec\",\"crossedVariables\",\"attrnames\",\"indices\",\"itemSets\",\"keySet\",\"levs\",\"values\",\"colnames\",\"a\",\"pick\",\"whichRow\",\"_results1\",\"init\",\"design\",\"variables\",\"structure\",\"keys\",\"auxiliary\",\"initStructure\",\"has\",\"reps_per_block\",\"makeConditionalSampler\",\"crossedItems\",\"crossedItemMap\",\"crossedItemName\",\"ConditionalSampler\",\"makeCrossedSpec\",\"val\",\"makeFactorSpec\",\"crossedSampler\",\"fullDesign\",\"crossedDesign\"],\"mappings\":\"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\"}","lineCount":736,"mtime":1394019647000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/utils.js","canonicalName":"src/utils.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/datatable.js","canonicalName":"src/datatable.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/jquery.csv.js","canonicalName":"jslibs/jquery.csv.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/samplers.js","canonicalName":"src/samplers.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.7.1\n(function() {\n  var ArrayIterator, BlockStructure, CellTable, ConditionSet, DataTable, DependentFactorNode, ExpDesign, Factor, FactorNode, FactorSetNode, FactorSpec, ItemNode, ItemSetNode, Iterator, SamplerNode, TaskNode, TrialList, VarSpec, csv, sampler, trimWhiteSpace, utils, _,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  _ = require('lodash');\n\n  utils = require(\"./utils\");\n\n  DataTable = require(\"./datatable\").DataTable;\n\n  csv = require('../jslibs/jquery.csv.js');\n\n  sampler = require(\"./samplers\");\n\n  exports.Factor = Factor = (function(_super) {\n    __extends(Factor, _super);\n\n    Factor.asFactor = function(arr) {\n      return (function(func, args, ctor) {\n        ctor.prototype = func.prototype;\n        var child = new ctor, result = func.apply(child, args);\n        return Object(result) === result ? result : child;\n      })(Factor, arr, function(){});\n    };\n\n    function Factor(arr) {\n      var arg, _i, _len;\n      for (_i = 0, _len = arr.length; _i < _len; _i++) {\n        arg = arr[_i];\n        this.push(arg);\n      }\n      this.levels = _.uniq(arr).sort();\n    }\n\n    return Factor;\n\n  })(Array);\n\n  exports.VarSpec = VarSpec = (function() {\n    function VarSpec() {}\n\n    VarSpec.name = \"\";\n\n    VarSpec.nblocks = 1;\n\n    VarSpec.reps = 1;\n\n    VarSpec.expanded = {};\n\n    VarSpec.prototype.names = function() {\n      return this.name;\n    };\n\n    VarSpec.prototype.ntrials = function() {\n      return this.nblocks * this.reps;\n    };\n\n    VarSpec.prototype.valueAt = function(block, trial) {};\n\n    return VarSpec;\n\n  })();\n\n  exports.FactorSpec = FactorSpec = (function(_super) {\n    __extends(FactorSpec, _super);\n\n    function FactorSpec(name, levels) {\n      this.name = name;\n      this.levels = levels;\n      this.factorSet = {};\n      this.factorSet[this.name] = this.levels;\n      this.conditionTable = DataTable.expand(this.factorSet);\n    }\n\n    FactorSpec.prototype.cross = function(other) {\n      return new CrossedFactorSpec(this.nblocks, this.reps, [this, other]);\n    };\n\n    FactorSpec.prototype.expand = function(nblocks, reps) {\n      var blocks, concatBlocks, i, prop, vset, _i, _results;\n      prop = {};\n      prop[this.name] = this.levels;\n      vset = new DataTable(prop);\n      blocks = (function() {\n        var _i, _results;\n        _results = [];\n        for (i = _i = 1; 1 <= nblocks ? _i <= nblocks : _i >= nblocks; i = 1 <= nblocks ? ++_i : --_i) {\n          _results.push(vset.replicate(reps));\n        }\n        return _results;\n      })();\n      concatBlocks = _.reduce(blocks, function(sum, nex) {\n        return DataTable.rbind(sum, nex);\n      });\n      concatBlocks.bindcol(\"$Block\", utils.rep((function() {\n        _results = [];\n        for (var _i = 1; 1 <= nblocks ? _i <= nblocks : _i >= nblocks; 1 <= nblocks ? _i++ : _i--){ _results.push(_i); }\n        return _results;\n      }).apply(this), utils.rep(reps * vset.nrow(), nblocks)));\n      return concatBlocks;\n    };\n\n    return FactorSpec;\n\n  })(exports.VarSpec);\n\n  exports.CellTable = CellTable = (function(_super) {\n    __extends(CellTable, _super);\n\n    function CellTable(parents) {\n      var fac;\n      this.parents = parents;\n      this.parentNames = (function() {\n        var _i, _len, _ref, _results;\n        _ref = this.parents;\n        _results = [];\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          fac = _ref[_i];\n          _results.push(fac.name);\n        }\n        return _results;\n      }).call(this);\n      this.name = _.reduce(this.parentNames, function(n, n1) {\n        return n + \":\" + n1;\n      });\n      this.levels = (function() {\n        var _i, _len, _ref, _results;\n        _ref = this.parents;\n        _results = [];\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          fac = _ref[_i];\n          _results.push(fac.levels);\n        }\n        return _results;\n      }).call(this);\n      this.factorSet = _.zipObject(this.parentNames, this.levels);\n      this.table = DataTable.expand(this.factorSet);\n    }\n\n    CellTable.prototype.names = function() {\n      return this.parentNames;\n    };\n\n    CellTable.prototype.cells = function() {\n      return this.table.toRecordArray();\n    };\n\n    CellTable.prototype.conditions = function() {\n      var i, rec, _i, _ref, _results;\n      _results = [];\n      for (i = _i = 0, _ref = this.table.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        rec = this.table.record(i);\n        _results.push(_.reduce(rec, function(n, n1) {\n          return n + \":\" + n1;\n        }));\n      }\n      return _results;\n    };\n\n    CellTable.prototype.expand = function(nblocks, reps) {\n      var blocks, i;\n      return blocks = (function() {\n        var _i, _results;\n        _results = [];\n        for (i = _i = 1; 1 <= nblocks ? _i <= nblocks : _i >= nblocks; i = 1 <= nblocks ? ++_i : --_i) {\n          _results.push(this.table.replicate(reps));\n        }\n        return _results;\n      }).call(this);\n    };\n\n    return CellTable;\n\n  })(exports.VarSpec);\n\n  exports.BlockStructure = BlockStructure = (function() {\n    function BlockStructure(nblocks, trialsPerBlock) {\n      this.nblocks = nblocks;\n      this.trialsPerBlock = trialsPerBlock;\n    }\n\n    return BlockStructure;\n\n  })();\n\n  exports.TaskNode = TaskNode = (function() {\n    function TaskNode(varNodes, crossedSet) {\n      var i, vname, _i, _j, _k, _len, _len1, _ref, _ref1, _ref2;\n      this.varNodes = varNodes;\n      this.crossedSet = crossedSet != null ? crossedSet : [];\n      this.factorNames = _.map(this.varNodes, function(x) {\n        return x.name;\n      });\n      this.varmap = {};\n      for (i = _i = 0, _ref = this.factorNames.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        this.varmap[this.factorNames[i]] = this.varSpecs[i];\n      }\n      if (this.crossedSet.length > 0) {\n        _ref1 = this.crossedSet;\n        for (_j = 0, _len = _ref1.length; _j < _len; _j++) {\n          vname = _ref1[_j];\n          this.crossedVars = this.varmap[vname];\n        }\n        this.crossedSpec = new CrossedFactorSpec(this.crossedVars);\n      } else {\n        this.crossedVars = [];\n        this.crossedSpec = {};\n      }\n      this.uncrossedVars = _.difference(this.factorNames, this.crossedSet);\n      _ref2 = this.uncrossedVars;\n      for (_k = 0, _len1 = _ref2.length; _k < _len1; _k++) {\n        vname = _ref2[_k];\n        this.uncrossedSpec = this.varmap[vname];\n      }\n      ({\n        expand: function(nblocks, nreps) {\n          var ctable;\n          if (this.crossedVars.length > 0) {\n            return ctable = this.crossedSpec.expand(nblocks, nreps);\n          }\n        }\n      });\n    }\n\n    return TaskNode;\n\n  })();\n\n  FactorNode = FactorNode = (function() {\n    FactorNode.build = function(name, spec) {\n      return new FactorNode(name, spec.levels);\n    };\n\n    function FactorNode(name, levels) {\n      this.name = name;\n      this.levels = levels;\n      this.cellTable = new CellTable([this]);\n    }\n\n    FactorNode.prototype.choose = function() {\n      return utils.oneOf(this.levels);\n    };\n\n    FactorNode.prototype.chooseK = function(k) {\n      return utils.permute(this.levels, k);\n    };\n\n    FactorNode.prototype.chooseDependent = function(recArray) {\n      return this.chooseK(recArray.length);\n    };\n\n    FactorNode.prototype.expand = function(nblocks, nreps) {\n      return this.cellTable.expand(nblocks, nreps);\n    };\n\n    return FactorNode;\n\n  })();\n\n  exports.FactorNode = FactorNode;\n\n  DependentFactorNode = DependentFactorNode = (function() {\n    DependentFactorNode.build = function(name, spec) {\n      return new DependentFactorNode(name, spec.levels, spec.choose);\n    };\n\n    function DependentFactorNode(name, levels, chooseFun) {\n      this.name = name;\n      this.levels = levels;\n      this.chooseFun = chooseFun;\n      this.cellTable = new CellTable([this]);\n    }\n\n    DependentFactorNode.prototype.choose = function(record) {\n      return this.chooseFun(record);\n    };\n\n    DependentFactorNode.prototype.chooseDependent = function(recArray) {\n      return _.map(recArray, (function(_this) {\n        return function(rec) {\n          return _this.choose(rec);\n        };\n      })(this));\n    };\n\n    DependentFactorNode.prototype.expand = function(nblocks, nreps) {\n      return this.cellTable.expand(nblocks, nreps);\n    };\n\n    return DependentFactorNode;\n\n  })();\n\n  exports.DependentFactorNode = DependentFactorNode;\n\n  exports.FactorSetNode = FactorSetNode = (function() {\n    FactorSetNode.build = function(spec) {\n      var fnodes, key, value;\n      fnodes = (function() {\n        var _results;\n        _results = [];\n        for (key in spec) {\n          value = spec[key];\n          _results.push(exports.FactorNode.build(key, value));\n        }\n        return _results;\n      })();\n      return new FactorSetNode(fnodes);\n    };\n\n    function FactorSetNode(factors) {\n      var i, _i, _ref;\n      this.factors = factors;\n      this.factorNames = _.map(this.factors, function(x) {\n        return x.name;\n      });\n      this.varmap = {};\n      for (i = _i = 0, _ref = this.factorNames.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        this.varmap[this.factorNames[i]] = this.factors[i];\n      }\n      this.cellTable = new CellTable(this.factors);\n      this.name = this.cellTable.name;\n    }\n\n    FactorSetNode.prototype.levels = function() {\n      return this.cellTable.levels;\n    };\n\n    FactorSetNode.prototype.conditions = function() {\n      return this.cellTable.conditions();\n    };\n\n    FactorSetNode.prototype.cells = function() {\n      return this.cellTable.cells();\n    };\n\n    FactorSetNode.prototype.expand = function(nblocks, nreps) {\n      return this.cellTable.expand(nblocks, nreps);\n    };\n\n    FactorSetNode.prototype.trialList = function(nblocks, nreps) {\n      var blk, blocks, i, j, tlist, _i, _j, _len, _ref;\n      if (nblocks == null) {\n        nblocks = 1;\n      }\n      if (nreps == null) {\n        nreps = 1;\n      }\n      blocks = this.expand(nblocks, nreps);\n      tlist = new TrialList(nblocks);\n      for (i = _i = 0, _len = blocks.length; _i < _len; i = ++_i) {\n        blk = blocks[i];\n        for (j = _j = 0, _ref = blk.nrow(); 0 <= _ref ? _j < _ref : _j > _ref; j = 0 <= _ref ? ++_j : --_j) {\n          tlist.add(i, blk.record(j));\n        }\n      }\n      return tlist;\n    };\n\n    return FactorSetNode;\n\n  })();\n\n  exports.Iterator = Iterator = (function() {\n    function Iterator() {}\n\n    Iterator.prototype.hasNext = function() {\n      return false;\n    };\n\n    Iterator.prototype.next = function() {\n      throw \"empty iterator\";\n    };\n\n    Iterator.prototype.map = function(fun) {\n      throw \"empty iterator\";\n    };\n\n    return Iterator;\n\n  })();\n\n  exports.ArrayIterator = ArrayIterator = (function(_super) {\n    __extends(ArrayIterator, _super);\n\n    function ArrayIterator(arr) {\n      this.arr = arr;\n      this.cursor = 0;\n      ({\n        hasNext: function() {\n          return this.cursor < this.arr.length;\n        },\n        next: function() {\n          var ret;\n          ret = this.arr[this.cursor];\n          this.cursor = this.cursor + 1;\n          return ret;\n        },\n        map: function(f) {\n          return _.map(this.arr, function(el) {\n            return f(el);\n          });\n        }\n      });\n    }\n\n    return ArrayIterator;\n\n  })(Iterator);\n\n  TrialList = (function() {\n    TrialList.fromBlockArray = function(blocks) {\n      var i, rec, tlist, _i, _j, _len, _ref, _ref1;\n      tlist = new TrialList(blocks.length);\n      for (i = _i = 0, _ref = blocks.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        _ref1 = blocks[i].toRecordArray();\n        for (_j = 0, _len = _ref1.length; _j < _len; _j++) {\n          rec = _ref1[_j];\n          tlist.add(i, rec);\n        }\n      }\n      return tlist;\n    };\n\n    function TrialList(nblocks) {\n      var i, _i;\n      this.blocks = [];\n      for (i = _i = 0; 0 <= nblocks ? _i < nblocks : _i > nblocks; i = 0 <= nblocks ? ++_i : --_i) {\n        this.blocks.push([]);\n      }\n    }\n\n    TrialList.prototype.add = function(block, trial) {\n      var blen;\n      if (block >= this.blocks.length) {\n        blen = this.blocks.length;\n        throw new Error(\"block index \" + block + \" exceeds number of blocks in TrialList \" + blen);\n      }\n      return this.blocks[block].push(trial);\n    };\n\n    TrialList.prototype.get = function(block, trialNum) {\n      return this.blocks[block][trialNum];\n    };\n\n    TrialList.prototype.getBlock = function(block) {\n      return this.blocks[block];\n    };\n\n    TrialList.prototype.nblocks = function() {\n      return this.blocks.length;\n    };\n\n    TrialList.prototype.ntrials = function() {\n      var nt;\n      nt = _.map(this.blocks, function(b) {\n        return b.length;\n      });\n      return _.reduce(nt, function(x0, x1) {\n        return x0 + x1;\n      });\n    };\n\n    TrialList.prototype.shuffle = function() {\n      return this.blocks = _.map(this.blocks, function(blk) {\n        return _.shuffle(blk);\n      });\n    };\n\n    TrialList.prototype.bind = function(fun) {\n      var blk, i, out, ret, trial, _i, _j, _len, _len1, _ref;\n      out = new TrialList(this.blocks.length);\n      _ref = this.blocks;\n      for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {\n        blk = _ref[i];\n        for (_j = 0, _len1 = blk.length; _j < _len1; _j++) {\n          trial = blk[_j];\n          ret = fun(trial);\n          out.add(i, _.assign(trial, ret));\n        }\n      }\n      return out;\n    };\n\n    TrialList.prototype.blockIterator = function() {\n      return new ArrayIterator(_.map(this.blocks, function(blk) {\n        return new ArrayIterator(blk);\n      }));\n    };\n\n    return TrialList;\n\n  })();\n\n  exports.TrialList = TrialList;\n\n  trimWhiteSpace = function(records) {\n    var i, key, out, record, trimmed, value, _i, _ref;\n    trimmed = [];\n    for (i = _i = 0, _ref = records.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n      record = records[i];\n      out = {};\n      for (key in record) {\n        value = record[key];\n        out[key.trim()] = value.trim();\n      }\n      trimmed.push(out);\n    }\n    return trimmed;\n  };\n\n  exports.ItemNode = ItemNode = (function() {\n    ItemNode.build = function(name, spec) {\n      var attrs, dtable, inode, items, snode;\n      if (spec.type == null) {\n        spec.type = \"text\";\n      }\n      snode = spec.sampler != null ? SamplerNode.build(spec.sampler) : new SamplerNode(\"default\", {});\n      if (spec.data != null) {\n        dtable = DataTable.fromRecords(spec.data);\n        attrs = dtable.dropColumn(name);\n        items = dtable[name];\n        return new ItemNode(name, items, attrs, spec.type, snode.makeSampler(items));\n      } else if (spec.csv != null) {\n        inode = null;\n        $.ajax({\n          url: spec.csv.url,\n          dataType: \"text\",\n          async: false,\n          success: (function(_this) {\n            return function(data) {\n              var records;\n              records = trimWhiteSpace(csv.toObjects(data));\n              dtable = DataTable.fromRecords(records);\n              items = dtable[name];\n              attrs = dtable.dropColumn(name);\n              return inode = new ItemNode(name, items, attrs, spec.type, snode.makeSampler(items));\n            };\n          })(this),\n          error: function(x) {\n            return console.log(x);\n          }\n        });\n        return inode;\n      }\n    };\n\n    function ItemNode(name, items, attributes, type, sampler) {\n      this.name = name;\n      this.items = items;\n      this.attributes = attributes;\n      this.type = type;\n      this.sampler = sampler;\n      if (this.items.length !== this.attributes.nrow()) {\n        throw \"Number of items must equal number of attributes\";\n      }\n    }\n\n    ItemNode.prototype.sample = function(n) {\n      return this.sampler.take(n);\n    };\n\n    return ItemNode;\n\n  })();\n\n  exports.ItemSetNode = ItemSetNode = (function() {\n    ItemSetNode.build = function(spec) {\n      var key, nodes, value;\n      nodes = (function() {\n        var _results;\n        _results = [];\n        for (key in spec) {\n          value = spec[key];\n          _results.push(exports.ItemNode.build(key, value));\n        }\n        return _results;\n      })();\n      return new ItemSetNode(nodes);\n    };\n\n    function ItemSetNode(itemNodes) {\n      this.itemNodes = itemNodes;\n      this.names = _.map(this.itemNodes, function(n) {\n        return n.name;\n      });\n    }\n\n    ItemSetNode.prototype.sample = function(n) {\n      var i, items, j, name, out, record, _i, _j, _len, _ref;\n      items = _.map(this.itemNodes, function(node) {\n        return node.sample(n);\n      });\n      out = [];\n      for (i = _i = 0; 0 <= n ? _i < n : _i > n; i = 0 <= n ? ++_i : --_i) {\n        record = {};\n        _ref = this.names;\n        for (j = _j = 0, _len = _ref.length; _j < _len; j = ++_j) {\n          name = _ref[j];\n          record[name] = items[j][i];\n        }\n        out.push(record);\n      }\n      return out;\n    };\n\n    return ItemSetNode;\n\n  })();\n\n  SamplerNode = SamplerNode = (function() {\n    SamplerNode.build = function(spec) {\n      if (spec.type == null) {\n        spec.type = \"default\";\n      }\n      return new SamplerNode(spec.type, spec);\n    };\n\n    function SamplerNode(type, params) {\n      this.makeSampler = (function() {\n        switch (type) {\n          case \"default\":\n            return function(items) {\n              return new sampler.Sampler(items, params);\n            };\n          case \"exhaustive\":\n            return function(items) {\n              return new sampler.ExhaustiveSampler(items, params);\n            };\n          case \"replacement\":\n            return function(items) {\n              return new sampler.ReplacementSampler(items, params);\n            };\n          default:\n            throw new Error(\"unrecognized sampler type\", type);\n        }\n      })();\n    }\n\n    return SamplerNode;\n\n  })();\n\n  exports.SamplerNode = SamplerNode;\n\n  exports.ConditionSet = ConditionSet = (function() {\n    ConditionSet.build = function(spec) {\n      var key, value, _crossed, _uncrossed;\n      if ((spec.Crossed == null) && !spec.Uncrossed) {\n        _crossed = exports.FactorSetNode.build(spec.Crossed);\n        _uncrossed = {};\n      } else {\n        _crossed = exports.FactorSetNode.build(spec.Crossed);\n        _uncrossed = (function() {\n          var _ref, _results;\n          _ref = spec.Uncrossed;\n          _results = [];\n          for (key in _ref) {\n            value = _ref[key];\n            _results.push(DependentFactorNode.build(key, value));\n          }\n          return _results;\n        })();\n      }\n      return new ConditionSet(_crossed, _uncrossed);\n    };\n\n    function ConditionSet(crossed, uncrossed) {\n      this.crossed = crossed;\n      this.uncrossed = uncrossed;\n      this.factorNames = [].concat(this.crossed.factorNames).concat(_.map(this.uncrossed, (function(_this) {\n        return function(fac) {\n          return fac.name;\n        };\n      })(this)));\n      this.factorArray = _.clone(this.crossed.factors);\n      _.forEach(this.uncrossed, (function(_this) {\n        return function(fac) {\n          return _this.factorArray.push(fac);\n        };\n      })(this));\n      this.factorSet = _.zipObject(this.factorNames, this.factorArray);\n    }\n\n    ConditionSet.prototype.expand = function(nblocks, nreps) {\n      var blk, cellTab, i, _i, _j, _len, _ref;\n      cellTab = this.crossed.expand(nblocks, nreps);\n      for (_i = 0, _len = cellTab.length; _i < _len; _i++) {\n        blk = cellTab[_i];\n        for (i = _j = 0, _ref = this.uncrossed.length; 0 <= _ref ? _j < _ref : _j > _ref; i = 0 <= _ref ? ++_j : --_j) {\n          blk.bindcol(this.uncrossed[i].name, this.uncrossed[i].chooseDependent(blk.toRecordArray()));\n        }\n      }\n      return TrialList.fromBlockArray(cellTab);\n    };\n\n    return ConditionSet;\n\n  })();\n\n  exports.ExpDesign = ExpDesign = (function() {\n    ExpDesign.blocks = 1;\n\n    ExpDesign.validate = function(spec) {\n      var des;\n      if (!(\"Design\" in spec)) {\n        throw \"Design is undefined\";\n      }\n      des = spec[\"Design\"];\n      if (!(\"Variables\" in des)) {\n        throw \"Variables is undefined\";\n      }\n      if (!(\"Structure\" in des)) {\n        throw \"Structure is undefined\";\n      }\n      if (!(\"Items\" in spec)) {\n        throw \"Items is undefined\";\n      }\n    };\n\n    ExpDesign.splitCrossedItems = function(itemSpec, crossedVariables) {\n      var attrnames, conditionTable, i, indices, itemSets, j, keySet, levs, record, values;\n      attrnames = crossedVariables.colnames();\n      keySet = (function() {\n        var _i, _ref, _results;\n        _results = [];\n        for (i = _i = 0, _ref = crossedVariables.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n          record = crossedVariables.record(i);\n          levs = _.values(record);\n          _results.push(_.reduce(levs, (function(a, b) {\n            return a + \":\" + b;\n          })));\n        }\n        return _results;\n      })();\n      values = itemSpec[\"values\"];\n      conditionTable = new DataTable(_.pick(itemSpec, attrnames));\n      itemSets = (function() {\n        var _i, _ref, _results;\n        _results = [];\n        for (i = _i = 0, _ref = crossedVariables.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n          record = crossedVariables.record(i);\n          indices = conditionTable.whichRow(record);\n          _results.push((function() {\n            var _j, _len, _results1;\n            _results1 = [];\n            for (_j = 0, _len = indices.length; _j < _len; _j++) {\n              j = indices[_j];\n              _results1.push(values[j]);\n            }\n            return _results1;\n          })());\n        }\n        return _results;\n      })();\n      return _.zipObject(keySet, itemSets);\n    };\n\n    ExpDesign.prototype.init = function(spec) {\n      this.design = spec[\"Design\"];\n      this.variables = this.design[\"Variables\"];\n      this.itemSpec = spec[\"Items\"];\n      this.structure = this.design[\"Structure\"];\n      this.factorNames = _.keys(this.variables);\n      this.crossed = this.variables[\"Crossed\"];\n      return this.auxiliary = this.variables[\"Auxiliary\"];\n    };\n\n    ExpDesign.prototype.initStructure = function() {\n      if (this.structure[\"type\"] === \"Block\") {\n        if (!_.has(this.structure, \"reps_per_block\")) {\n          this.structure[\"reps_per_block\"] = 1;\n        }\n        this.reps_per_block = this.structure[\"reps_per_block\"];\n        return this.blocks = this.structure[\"blocks\"];\n      } else {\n        this.reps_per_block = 1;\n        return this.blocks = 1;\n      }\n    };\n\n    ExpDesign.prototype.makeConditionalSampler = function(crossedSpec, crossedItems) {\n      var crossedItemMap, crossedItemName, key;\n      crossedItemName = _.keys(crossedItems)[0];\n      console.log(\"names:\", crossedSpec.names());\n      crossedItemMap = (function() {\n        var _i, _len, _ref, _results;\n        _ref = crossedSpec.names();\n        _results = [];\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          key = _ref[_i];\n          _results.push(crossedItems[crossedItemName][key]);\n        }\n        return _results;\n      })();\n      crossedItemMap = _.zipObject(_.keys(this.crossed), crossedItemMap);\n      console.log(\"item map: \", crossedItemMap);\n      return new ConditionalSampler(crossedItems[crossedItemName].values, new DataTable(crossedItemMap), crossedSpec);\n    };\n\n    ExpDesign.prototype.makeCrossedSpec = function(crossed, nblocks, nreps) {\n      var factors, key, val;\n      factors = (function() {\n        var _results;\n        _results = [];\n        for (key in crossed) {\n          val = crossed[key];\n          _results.push(new FactorSpec(nblocks, nreps, key, val.levels));\n        }\n        return _results;\n      })();\n      return crossed = new CrossedFactorSpec(nblocks, nreps, factors);\n    };\n\n    ExpDesign.prototype.makeFactorSpec = function(fac, nblocks, nreps) {\n      return new FactorSpec(nblocks, nreps, _.keys(fac)[0], _.values(fac)[0]);\n    };\n\n    function ExpDesign(spec) {\n      var crossedItems, crossedSampler;\n      if (spec == null) {\n        spec = {};\n      }\n      ExpDesign.validate(spec);\n      this.init(spec);\n      this.initStructure();\n      this.crossedSpec = this.makeCrossedSpec(this.crossed, this.blocks, this.reps_per_block);\n      crossedItems = this.itemSpec.Crossed;\n      crossedSampler = this.makeConditionalSampler(this.crossedSpec, crossedItems);\n      this.fullDesign = this.crossedSpec.expanded.bindcol(_.keys(crossedItems)[0], crossedSampler.take(this.crossedSpec.expanded.nrow()));\n      console.log(this.crossedDesign);\n    }\n\n    return ExpDesign;\n\n  })();\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/samplers.js":{"id":7,"canonicalName":"src/samplers.js","code":"(function () {\n    var CombinatoricSampler, ConditionalSampler, DataTable, ExhaustiveSampler, GridSampler, MatchSampler, ReplacementSampler, Sampler, UniformSampler, utils, _, _ref, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        }, __slice = [].slice;\n    utils = require('5', module);\n    _ = require('16', module);\n    DataTable = require('6', module).DataTable;\n    Sampler = function () {\n        function Sampler(items) {\n            var _i, _ref, _results;\n            this.items = items;\n            this.indexBuffer = _.shuffle(function () {\n                _results = [];\n                for (var _i = 0, _ref = this.items.length; 0 <= _ref ? _i < _ref : _i > _ref; 0 <= _ref ? _i++ : _i--) {\n                    _results.push(_i);\n                }\n                return _results;\n            }.apply(this));\n        }\n        Sampler.prototype.next = function () {\n            var i, _i, _ref, _results;\n            i = this.indexBuffer.length > 0 ? this.indexBuffer.shift() : (this.indexBuffer = _.shuffle(function () {\n                _results = [];\n                for (var _i = 0, _ref = this.items.length; 0 <= _ref ? _i < _ref : _i > _ref; 0 <= _ref ? _i++ : _i--) {\n                    _results.push(_i);\n                }\n                return _results;\n            }.apply(this)), this.indexBuffer.shift());\n            return this.items[i];\n        };\n        Sampler.prototype.take = function (n) {\n            var i, ret, _i, _ref, _results;\n            if (n > this.items.length) {\n                throw 'cannot take sample larger than the number of items when using non-replacing sampler';\n            }\n            this.indexBuffer = _.shuffle(function () {\n                _results = [];\n                for (var _i = 0, _ref = this.items.length; 0 <= _ref ? _i < _ref : _i > _ref; 0 <= _ref ? _i++ : _i--) {\n                    _results.push(_i);\n                }\n                return _results;\n            }.apply(this));\n            ret = function () {\n                var _j, _results1;\n                _results1 = [];\n                for (i = _j = 0; 0 <= n ? _j < n : _j > n; i = 0 <= n ? ++_j : --_j) {\n                    _results1.push(this.next());\n                }\n                return _results1;\n            }.call(this);\n            return ret;\n        };\n        Sampler.prototype.takeOne = function () {\n            return this.take(1)[0];\n        };\n        return Sampler;\n    }();\n    exports.Sampler = Sampler;\n    exports.ReplacementSampler = ReplacementSampler = function (_super) {\n        __extends(ReplacementSampler, _super);\n        function ReplacementSampler() {\n            _ref = ReplacementSampler.__super__.constructor.apply(this, arguments);\n            return _ref;\n        }\n        ReplacementSampler.prototype.sampleFrom = function (items, n) {\n            return utils.sample(items, n, true);\n        };\n        ReplacementSampler.prototype.take = function (n) {\n            return this.sampleFrom(this.items, n);\n        };\n        return ReplacementSampler;\n    }(Sampler);\n    exports.ExhaustiveSampler = ExhaustiveSampler = function (_super) {\n        __extends(ExhaustiveSampler, _super);\n        ExhaustiveSampler.fillBuffer = function (items, n) {\n            var buf, i;\n            buf = function () {\n                var _i, _results;\n                _results = [];\n                for (i = _i = 1; 1 <= n ? _i <= n : _i >= n; i = 1 <= n ? ++_i : --_i) {\n                    _results.push(_.shuffle(items));\n                }\n                return _results;\n            }();\n            return _.flatten(buf);\n        };\n        function ExhaustiveSampler(items) {\n            this.items = items;\n            this.buffer = ExhaustiveSampler.fillBuffer(this.items, 10);\n        }\n        ExhaustiveSampler.prototype.take = function (n) {\n            var buf, buflen, res;\n            if (n <= this.buffer.length) {\n                res = _.take(this.buffer, n);\n                this.buffer = _.drop(this.buffer, n);\n                return res;\n            } else {\n                buflen = Math.max(n, 10 * this.items.length);\n                buf = ExhaustiveSampler.fillBuffer(this.items, buflen / this.items.length);\n                this.buffer = this.buffer.concat(buf);\n                return this.take(n);\n            }\n        };\n        return ExhaustiveSampler;\n    }(Sampler);\n    exports.MatchSampler = MatchSampler = function () {\n        function MatchSampler(sampler) {\n            this.sampler = sampler;\n        }\n        MatchSampler.prototype.take = function (n, match) {\n            var probe, probeIndex, sam;\n            if (match == null) {\n                match = true;\n            }\n            sam = this.sampler.take(n);\n            if (match) {\n                probe = utils.sample(sam, 1)[0];\n            } else {\n                probe = this.sampler.take(1)[0];\n            }\n            probeIndex = _.indexOf(sam, probe);\n            return {\n                targetSet: sam,\n                probe: probe,\n                probeIndex: probeIndex,\n                match: match\n            };\n        };\n        return MatchSampler;\n    }();\n    exports.UniformSampler = UniformSampler = function (_super) {\n        __extends(UniformSampler, _super);\n        UniformSampler.validate = function (range) {\n            if (range.length !== 2) {\n                throw 'range must be an array with two values (min, max)';\n            }\n            if (range[1] <= range[0]) {\n                throw 'range[1] must > range[0]';\n            }\n        };\n        function UniformSampler(range) {\n            this.range = range;\n            this.interval = this.range[1] - this.range[0];\n        }\n        UniformSampler.prototype.take = function (n) {\n            var i, nums;\n            nums = function () {\n                var _i, _results;\n                _results = [];\n                for (i = _i = 1; 1 <= n ? _i <= n : _i >= n; i = 1 <= n ? ++_i : --_i) {\n                    _results.push(Math.round(Math.random() * this.interval));\n                }\n                return _results;\n            }.call(this);\n            return nums;\n        };\n        return UniformSampler;\n    }(Sampler);\n    exports.CombinatoricSampler = CombinatoricSampler = function (_super) {\n        __extends(CombinatoricSampler, _super);\n        function CombinatoricSampler() {\n            var samplers;\n            samplers = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n            this.samplers = samplers;\n        }\n        CombinatoricSampler.prototype.take = function (n) {\n            var i, j, xs, _i, _results;\n            _results = [];\n            for (i = _i = 0; 0 <= n ? _i < n : _i > n; i = 0 <= n ? ++_i : --_i) {\n                xs = function () {\n                    var _j, _ref1, _results1;\n                    _results1 = [];\n                    for (j = _j = 0, _ref1 = this.samplers.length; 0 <= _ref1 ? _j < _ref1 : _j > _ref1; j = 0 <= _ref1 ? ++_j : --_j) {\n                        _results1.push(this.samplers[j].take(1));\n                    }\n                    return _results1;\n                }.call(this);\n                _results.push(_.flatten(xs));\n            }\n            return _results;\n        };\n        return CombinatoricSampler;\n    }(Sampler);\n    exports.GridSampler = GridSampler = function (_super) {\n        __extends(GridSampler, _super);\n        function GridSampler(x, y) {\n            var i;\n            this.x = x;\n            this.y = y;\n            this.grid = DataTable.expand({\n                x: this.x,\n                y: this.y\n            });\n            console.log('rows:', this.grid.nrow());\n            this.tuples = function () {\n                var _i, _ref1, _results;\n                _results = [];\n                for (i = _i = 0, _ref1 = this.grid.nrow(); 0 <= _ref1 ? _i < _ref1 : _i > _ref1; i = 0 <= _ref1 ? ++_i : --_i) {\n                    _results.push(_.values(this.grid.record(i)));\n                }\n                return _results;\n            }.call(this);\n        }\n        GridSampler.prototype.take = function (n) {\n            return utils.sample(this.tuples, n);\n        };\n        return GridSampler;\n    }(Sampler);\n    exports.ConditionalSampler = ConditionalSampler = function (_super) {\n        __extends(ConditionalSampler, _super);\n        ConditionalSampler.prototype.makeItemSubsets = function () {\n            var ctable, i, indices, itemSets, j, keySet, levs, record;\n            ctable = this.factorSpec.conditionTable;\n            keySet = function () {\n                var _i, _ref1, _results;\n                _results = [];\n                for (i = _i = 0, _ref1 = ctable.nrow(); 0 <= _ref1 ? _i < _ref1 : _i > _ref1; i = 0 <= _ref1 ? ++_i : --_i) {\n                    record = ctable.record(i);\n                    levs = _.values(record);\n                    _results.push(_.reduce(levs, function (a, b) {\n                        return a + ':' + b;\n                    }));\n                }\n                return _results;\n            }();\n            console.log(keySet);\n            itemSets = function () {\n                var _i, _ref1, _results;\n                _results = [];\n                for (i = _i = 0, _ref1 = ctable.nrow(); 0 <= _ref1 ? _i < _ref1 : _i > _ref1; i = 0 <= _ref1 ? ++_i : --_i) {\n                    record = ctable.record(i);\n                    indices = this.itemMap.whichRow(record);\n                    _results.push(function () {\n                        var _j, _len, _results1;\n                        _results1 = [];\n                        for (_j = 0, _len = indices.length; _j < _len; _j++) {\n                            j = indices[_j];\n                            _results1.push(this.items[j]);\n                        }\n                        return _results1;\n                    }.call(this));\n                }\n                return _results;\n            }.call(this);\n            console.log(itemSets);\n            return _.zipObject(keySet, itemSets);\n        };\n        function ConditionalSampler(items, itemMap, factorSpec) {\n            var key, value, _ref1;\n            this.items = items;\n            this.itemMap = itemMap;\n            this.factorSpec = factorSpec;\n            this.keyMap = this.makeItemSubsets();\n            this.conditions = _.keys(this.keyMap);\n            this.samplerSet = {};\n            _ref1 = this.keyMap;\n            for (key in _ref1) {\n                value = _ref1[key];\n                this.samplerSet[key] = new ExhaustiveSampler(value);\n            }\n        }\n        ConditionalSampler.prototype.take = function (n) {\n            var keys;\n            keys = utils.repLen(this.conditions, n);\n            return _.flatten(this.takeCondition(keys));\n        };\n        ConditionalSampler.prototype.takeCondition = function (keys) {\n            var key, _i, _len, _results;\n            _results = [];\n            for (_i = 0, _len = keys.length; _i < _len; _i++) {\n                key = keys[_i];\n                _results.push(this.samplerSet[key].take(1));\n            }\n            return _results;\n        };\n        return ConditionalSampler;\n    }(Sampler);\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/samplers.js\"],\"names\":[\"CombinatoricSampler\",\"ConditionalSampler\",\"DataTable\",\"ExhaustiveSampler\",\"GridSampler\",\"MatchSampler\",\"ReplacementSampler\",\"Sampler\",\"UniformSampler\",\"utils\",\"_\",\"_ref\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"__slice\",\"slice\",\"require\",\"items\",\"_i\",\"_results\",\"indexBuffer\",\"shuffle\",\"length\",\"push\",\"apply\",\"next\",\"i\",\"shift\",\"take\",\"n\",\"ret\",\"_j\",\"_results1\",\"takeOne\",\"exports\",\"_super\",\"arguments\",\"sampleFrom\",\"sample\",\"fillBuffer\",\"buf\",\"flatten\",\"buffer\",\"buflen\",\"res\",\"drop\",\"Math\",\"max\",\"concat\",\"sampler\",\"match\",\"probe\",\"probeIndex\",\"sam\",\"indexOf\",\"targetSet\",\"validate\",\"range\",\"interval\",\"nums\",\"round\",\"random\",\"samplers\",\"j\",\"xs\",\"_ref1\",\"x\",\"y\",\"grid\",\"expand\",\"console\",\"log\",\"nrow\",\"tuples\",\"values\",\"record\",\"makeItemSubsets\",\"ctable\",\"indices\",\"itemSets\",\"keySet\",\"levs\",\"factorSpec\",\"conditionTable\",\"reduce\",\"a\",\"b\",\"itemMap\",\"whichRow\",\"_len\",\"zipObject\",\"value\",\"keyMap\",\"conditions\",\"keys\",\"samplerSet\",\"repLen\",\"takeCondition\"],\"mappings\":\"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\"}","lineCount":288,"mtime":1391976456000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/src/utils.js","canonicalName":"src/utils.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/datatable.js","canonicalName":"src/datatable.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.6.3\n(function() {\n  var CombinatoricSampler, ConditionalSampler, DataTable, ExhaustiveSampler, GridSampler, MatchSampler, ReplacementSampler, Sampler, UniformSampler, utils, _, _ref,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    __slice = [].slice;\n\n  utils = require(\"./utils\");\n\n  _ = require('lodash');\n\n  DataTable = require(\"./datatable\").DataTable;\n\n  Sampler = (function() {\n    function Sampler(items) {\n      var _i, _ref, _results;\n      this.items = items;\n      this.indexBuffer = _.shuffle((function() {\n        _results = [];\n        for (var _i = 0, _ref = this.items.length; 0 <= _ref ? _i < _ref : _i > _ref; 0 <= _ref ? _i++ : _i--){ _results.push(_i); }\n        return _results;\n      }).apply(this));\n    }\n\n    Sampler.prototype.next = function() {\n      var i, _i, _ref, _results;\n      i = this.indexBuffer.length > 0 ? this.indexBuffer.shift() : (this.indexBuffer = _.shuffle((function() {\n        _results = [];\n        for (var _i = 0, _ref = this.items.length; 0 <= _ref ? _i < _ref : _i > _ref; 0 <= _ref ? _i++ : _i--){ _results.push(_i); }\n        return _results;\n      }).apply(this)), this.indexBuffer.shift());\n      return this.items[i];\n    };\n\n    Sampler.prototype.take = function(n) {\n      var i, ret, _i, _ref, _results;\n      if (n > this.items.length) {\n        throw \"cannot take sample larger than the number of items when using non-replacing sampler\";\n      }\n      this.indexBuffer = _.shuffle((function() {\n        _results = [];\n        for (var _i = 0, _ref = this.items.length; 0 <= _ref ? _i < _ref : _i > _ref; 0 <= _ref ? _i++ : _i--){ _results.push(_i); }\n        return _results;\n      }).apply(this));\n      ret = (function() {\n        var _j, _results1;\n        _results1 = [];\n        for (i = _j = 0; 0 <= n ? _j < n : _j > n; i = 0 <= n ? ++_j : --_j) {\n          _results1.push(this.next());\n        }\n        return _results1;\n      }).call(this);\n      return ret;\n    };\n\n    Sampler.prototype.takeOne = function() {\n      return this.take(1)[0];\n    };\n\n    return Sampler;\n\n  })();\n\n  exports.Sampler = Sampler;\n\n  exports.ReplacementSampler = ReplacementSampler = (function(_super) {\n    __extends(ReplacementSampler, _super);\n\n    function ReplacementSampler() {\n      _ref = ReplacementSampler.__super__.constructor.apply(this, arguments);\n      return _ref;\n    }\n\n    ReplacementSampler.prototype.sampleFrom = function(items, n) {\n      return utils.sample(items, n, true);\n    };\n\n    ReplacementSampler.prototype.take = function(n) {\n      return this.sampleFrom(this.items, n);\n    };\n\n    return ReplacementSampler;\n\n  })(Sampler);\n\n  exports.ExhaustiveSampler = ExhaustiveSampler = (function(_super) {\n    __extends(ExhaustiveSampler, _super);\n\n    ExhaustiveSampler.fillBuffer = function(items, n) {\n      var buf, i;\n      buf = (function() {\n        var _i, _results;\n        _results = [];\n        for (i = _i = 1; 1 <= n ? _i <= n : _i >= n; i = 1 <= n ? ++_i : --_i) {\n          _results.push(_.shuffle(items));\n        }\n        return _results;\n      })();\n      return _.flatten(buf);\n    };\n\n    function ExhaustiveSampler(items) {\n      this.items = items;\n      this.buffer = ExhaustiveSampler.fillBuffer(this.items, 10);\n    }\n\n    ExhaustiveSampler.prototype.take = function(n) {\n      var buf, buflen, res;\n      if (n <= this.buffer.length) {\n        res = _.take(this.buffer, n);\n        this.buffer = _.drop(this.buffer, n);\n        return res;\n      } else {\n        buflen = Math.max(n, 10 * this.items.length);\n        buf = ExhaustiveSampler.fillBuffer(this.items, buflen / this.items.length);\n        this.buffer = this.buffer.concat(buf);\n        return this.take(n);\n      }\n    };\n\n    return ExhaustiveSampler;\n\n  })(Sampler);\n\n  exports.MatchSampler = MatchSampler = (function() {\n    function MatchSampler(sampler) {\n      this.sampler = sampler;\n    }\n\n    MatchSampler.prototype.take = function(n, match) {\n      var probe, probeIndex, sam;\n      if (match == null) {\n        match = true;\n      }\n      sam = this.sampler.take(n);\n      if (match) {\n        probe = utils.sample(sam, 1)[0];\n      } else {\n        probe = this.sampler.take(1)[0];\n      }\n      probeIndex = _.indexOf(sam, probe);\n      return {\n        targetSet: sam,\n        probe: probe,\n        probeIndex: probeIndex,\n        match: match\n      };\n    };\n\n    return MatchSampler;\n\n  })();\n\n  exports.UniformSampler = UniformSampler = (function(_super) {\n    __extends(UniformSampler, _super);\n\n    UniformSampler.validate = function(range) {\n      if (range.length !== 2) {\n        throw \"range must be an array with two values (min, max)\";\n      }\n      if (range[1] <= range[0]) {\n        throw \"range[1] must > range[0]\";\n      }\n    };\n\n    function UniformSampler(range) {\n      this.range = range;\n      this.interval = this.range[1] - this.range[0];\n    }\n\n    UniformSampler.prototype.take = function(n) {\n      var i, nums;\n      nums = (function() {\n        var _i, _results;\n        _results = [];\n        for (i = _i = 1; 1 <= n ? _i <= n : _i >= n; i = 1 <= n ? ++_i : --_i) {\n          _results.push(Math.round(Math.random() * this.interval));\n        }\n        return _results;\n      }).call(this);\n      return nums;\n    };\n\n    return UniformSampler;\n\n  })(Sampler);\n\n  exports.CombinatoricSampler = CombinatoricSampler = (function(_super) {\n    __extends(CombinatoricSampler, _super);\n\n    function CombinatoricSampler() {\n      var samplers;\n      samplers = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n      this.samplers = samplers;\n    }\n\n    CombinatoricSampler.prototype.take = function(n) {\n      var i, j, xs, _i, _results;\n      _results = [];\n      for (i = _i = 0; 0 <= n ? _i < n : _i > n; i = 0 <= n ? ++_i : --_i) {\n        xs = (function() {\n          var _j, _ref1, _results1;\n          _results1 = [];\n          for (j = _j = 0, _ref1 = this.samplers.length; 0 <= _ref1 ? _j < _ref1 : _j > _ref1; j = 0 <= _ref1 ? ++_j : --_j) {\n            _results1.push(this.samplers[j].take(1));\n          }\n          return _results1;\n        }).call(this);\n        _results.push(_.flatten(xs));\n      }\n      return _results;\n    };\n\n    return CombinatoricSampler;\n\n  })(Sampler);\n\n  exports.GridSampler = GridSampler = (function(_super) {\n    __extends(GridSampler, _super);\n\n    function GridSampler(x, y) {\n      var i;\n      this.x = x;\n      this.y = y;\n      this.grid = DataTable.expand({\n        x: this.x,\n        y: this.y\n      });\n      console.log(\"rows:\", this.grid.nrow());\n      this.tuples = (function() {\n        var _i, _ref1, _results;\n        _results = [];\n        for (i = _i = 0, _ref1 = this.grid.nrow(); 0 <= _ref1 ? _i < _ref1 : _i > _ref1; i = 0 <= _ref1 ? ++_i : --_i) {\n          _results.push(_.values(this.grid.record(i)));\n        }\n        return _results;\n      }).call(this);\n    }\n\n    GridSampler.prototype.take = function(n) {\n      return utils.sample(this.tuples, n);\n    };\n\n    return GridSampler;\n\n  })(Sampler);\n\n  exports.ConditionalSampler = ConditionalSampler = (function(_super) {\n    __extends(ConditionalSampler, _super);\n\n    ConditionalSampler.prototype.makeItemSubsets = function() {\n      var ctable, i, indices, itemSets, j, keySet, levs, record;\n      ctable = this.factorSpec.conditionTable;\n      keySet = (function() {\n        var _i, _ref1, _results;\n        _results = [];\n        for (i = _i = 0, _ref1 = ctable.nrow(); 0 <= _ref1 ? _i < _ref1 : _i > _ref1; i = 0 <= _ref1 ? ++_i : --_i) {\n          record = ctable.record(i);\n          levs = _.values(record);\n          _results.push(_.reduce(levs, (function(a, b) {\n            return a + \":\" + b;\n          })));\n        }\n        return _results;\n      })();\n      console.log(keySet);\n      itemSets = (function() {\n        var _i, _ref1, _results;\n        _results = [];\n        for (i = _i = 0, _ref1 = ctable.nrow(); 0 <= _ref1 ? _i < _ref1 : _i > _ref1; i = 0 <= _ref1 ? ++_i : --_i) {\n          record = ctable.record(i);\n          indices = this.itemMap.whichRow(record);\n          _results.push((function() {\n            var _j, _len, _results1;\n            _results1 = [];\n            for (_j = 0, _len = indices.length; _j < _len; _j++) {\n              j = indices[_j];\n              _results1.push(this.items[j]);\n            }\n            return _results1;\n          }).call(this));\n        }\n        return _results;\n      }).call(this);\n      console.log(itemSets);\n      return _.zipObject(keySet, itemSets);\n    };\n\n    function ConditionalSampler(items, itemMap, factorSpec) {\n      var key, value, _ref1;\n      this.items = items;\n      this.itemMap = itemMap;\n      this.factorSpec = factorSpec;\n      this.keyMap = this.makeItemSubsets();\n      this.conditions = _.keys(this.keyMap);\n      this.samplerSet = {};\n      _ref1 = this.keyMap;\n      for (key in _ref1) {\n        value = _ref1[key];\n        this.samplerSet[key] = new ExhaustiveSampler(value);\n      }\n    }\n\n    ConditionalSampler.prototype.take = function(n) {\n      var keys;\n      keys = utils.repLen(this.conditions, n);\n      return _.flatten(this.takeCondition(keys));\n    };\n\n    ConditionalSampler.prototype.takeCondition = function(keys) {\n      var key, _i, _len, _results;\n      _results = [];\n      for (_i = 0, _len = keys.length; _i < _len; _i++) {\n        key = keys[_i];\n        _results.push(this.samplerSet[key].take(1));\n      }\n      return _results;\n    };\n\n    return ConditionalSampler;\n\n  })(Sampler);\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/dotmotion.js":{"id":4,"canonicalName":"src/dotmotion.js","code":"(function () {\n    var Base, DotSet, Kinetic, RandomDotMotion, x, _, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Base = require('8', module);\n    _ = require('16', module);\n    Kinetic = require('15', module);\n    DotSet = function () {\n        DotSet.randomDelta = function (distance) {\n            var rads;\n            rads = Math.random() * Math.PI * 2;\n            return [\n                distance * Math.cos(rads),\n                distance * Math.sin(rads)\n            ];\n        };\n        DotSet.coherentDelta = function (distance, direction) {\n            return [\n                distance * Math.cos(Math.PI * direction / 180),\n                distance * Math.sin(Math.PI * direction / 180)\n            ];\n        };\n        DotSet.pointInCircle = function () {\n            var r, t, u;\n            t = 2 * Math.PI * Math.random();\n            u = Math.random() + Math.random();\n            r = u > 1 ? 2 - u : u;\n            return [\n                r * Math.cos(t),\n                r * Math.sin(t)\n            ];\n        };\n        DotSet.inCircle = function (center_x, center_y, radius, x, y) {\n            var squareDist;\n            squareDist = Math.pow(center_x - x, 2) + Math.pow(center_y - y, 2);\n            return squareDist <= Math.pow(radius, 2);\n        };\n        function DotSet(ndots, nparts, coherence) {\n            var _this = this;\n            this.ndots = ndots;\n            this.nparts = nparts != null ? nparts : 3;\n            if (coherence == null) {\n                coherence = 0.5;\n            }\n            this.frameNum = 0;\n            this.dotsPerSet = Math.round(this.ndots / this.nparts);\n            this.dotSets = _.map([\n                0,\n                1,\n                2\n            ], function (i) {\n                var _i, _ref, _results;\n                return _.map(function () {\n                    _results = [];\n                    for (var _i = 0, _ref = _this.dotsPerSet; 0 <= _ref ? _i < _ref : _i > _ref; 0 <= _ref ? _i++ : _i--) {\n                        _results.push(_i);\n                    }\n                    return _results;\n                }.apply(this), function (d) {\n                    return [\n                        Math.random(),\n                        Math.random()\n                    ];\n                });\n            });\n        }\n        DotSet.prototype.getDotPartition = function (i) {\n            return this.dotSets[i];\n        };\n        DotSet.prototype.nextFrame = function (coherence, distance, direction) {\n            var delta, dset, i, partition, res, xy;\n            partition = this.frameNum % this.nparts;\n            dset = this.dotSets[partition];\n            res = function () {\n                var _i, _ref, _results;\n                _results = [];\n                for (i = _i = 0, _ref = dset.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                    xy = dset[i];\n                    delta = Math.random() < coherence ? DotSet.coherentDelta(distance, direction) : DotSet.randomDelta(distance);\n                    xy = [\n                        xy[0] + delta[0],\n                        xy[1] + delta[1]\n                    ];\n                    if (xy[0] < 0 || xy[0] > 1 || xy[1] < 0 || xy[1] > 1) {\n                        xy = [\n                            Math.random(),\n                            Math.random()\n                        ];\n                    }\n                    _results.push(dset[i] = xy);\n                }\n                return _results;\n            }();\n            this.frameNum = this.frameNum + 1;\n            return res;\n        };\n        return DotSet;\n    }();\n    exports.RandomDotMotion = RandomDotMotion = function (_super) {\n        __extends(RandomDotMotion, _super);\n        function RandomDotMotion(spec) {\n            if (spec == null) {\n                spec = {\n                    x: 0,\n                    y: 0,\n                    numDots: 70,\n                    apRadius: 400,\n                    dotSpeed: 0.02,\n                    dotSize: 2,\n                    coherence: 0.55,\n                    partitions: 3\n                };\n            }\n            this.numDots = spec.numDots;\n            this.apRadius = spec.apRadius;\n            this.dotSpeed = spec.dotSpeed;\n            this.dotSize = spec.dotSize;\n            this.coherence = spec.coherence;\n            this.partitions = spec.partitions;\n            this.x = spec.x;\n            this.y = spec.y;\n            this.dotSet = new DotSet(this.numDots, 3, 0.5);\n        }\n        RandomDotMotion.prototype.createDots = function () {\n            var dots, xy, _i, _len, _results;\n            dots = this.dotSet.nextFrame(this.coherence, this.dotSpeed, 180);\n            _results = [];\n            for (_i = 0, _len = dots.length; _i < _len; _i++) {\n                xy = dots[_i];\n                _results.push(new Kinetic.Rect({\n                    x: this.x + this.apRadius * xy[0],\n                    y: this.x + this.apRadius * xy[1],\n                    width: this.dotSize,\n                    height: this.dotSize,\n                    fill: 'green'\n                }));\n            }\n            return _results;\n        };\n        RandomDotMotion.prototype.createInitialDots = function () {\n            var dpart, i, xy, _i, _ref, _results;\n            _results = [];\n            for (i = _i = 0, _ref = this.partitions; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                dpart = this.dotSet.getDotPartition(i);\n                _results.push(function () {\n                    var _j, _len, _results1;\n                    _results1 = [];\n                    for (_j = 0, _len = dpart.length; _j < _len; _j++) {\n                        xy = dpart[_j];\n                        _results1.push(new Kinetic.Rect({\n                            x: this.x + this.apRadius * xy[0],\n                            y: this.x + this.apRadius * xy[1],\n                            width: this.dotSize,\n                            height: this.dotSize,\n                            fill: 'green'\n                        }));\n                    }\n                    return _results1;\n                }.call(this));\n            }\n            return _results;\n        };\n        RandomDotMotion.prototype.displayInitialDots = function (nodes, group) {\n            var node, _i, _len, _results;\n            _results = [];\n            for (_i = 0, _len = nodes.length; _i < _len; _i++) {\n                node = nodes[_i];\n                _results.push(group.add(node));\n            }\n            return _results;\n        };\n        RandomDotMotion.prototype.render = function (context, layer) {\n            var i, nodeSets, _i, _ref, _this = this;\n            this.groups = function () {\n                var _i, _ref, _results;\n                _results = [];\n                for (i = _i = 0, _ref = this.partitions; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                    _results.push(new Kinetic.Group({ listening: false }));\n                }\n                return _results;\n            }.call(this);\n            _.map(this.groups, function (g) {\n                return layer.add(g);\n            });\n            nodeSets = this.createInitialDots();\n            for (i = _i = 0, _ref = this.partitions; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                this.displayInitialDots(nodeSets[i], this.groups[i]);\n            }\n            layer.draw();\n            this.anim = new Kinetic.Animation(function (frame) {\n                var curset, dx, part, xy, _j, _ref1, _results;\n                dx = _this.dotSet.nextFrame(_this.coherence, _this.dotSpeed, 180);\n                part = _this.dotSet.frameNum % _this.partitions;\n                curset = nodeSets[part];\n                _results = [];\n                for (i = _j = 0, _ref1 = curset.length; 0 <= _ref1 ? _j < _ref1 : _j > _ref1; i = 0 <= _ref1 ? ++_j : --_j) {\n                    xy = dx[i];\n                    xy = [\n                        xy[0] * _this.apRadius,\n                        xy[1] * _this.apRadius\n                    ];\n                    console.log(xy);\n                    curset[i].setPosition(xy);\n                    if (!DotSet.inCircle(0.5 * _this.apRadius, 0.5 * _this.apRadius, _this.apRadius / 2, xy[0], xy[1])) {\n                        _results.push(curset[i].hide());\n                    } else {\n                        _results.push(curset[i].show());\n                    }\n                }\n                return _results;\n            }, layer);\n            layer.draw();\n            return this.anim.start();\n        };\n        RandomDotMotion.prototype.render2 = function (context, layer) {\n            var i, nodeSets, _i, _ref, _this = this;\n            this.layers = function () {\n                var _i, _ref, _results;\n                _results = [];\n                for (i = _i = 0, _ref = this.partitions; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                    _results.push(new Kinetic.Layer({ listening: false }));\n                }\n                return _results;\n            }.call(this);\n            _.map(this.layers, function (l) {\n                return context.stage.add(l);\n            });\n            nodeSets = this.createInitialDots();\n            for (i = _i = 0, _ref = this.partitions; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                this.displayInitialDots(nodeSets[i], this.layers[i]);\n            }\n            this.anim = new Kinetic.Animation(function (frame) {\n                var curset, dx, part, xy, _j, _ref1;\n                dx = _this.dotSet.nextFrame(_this.coherence, _this.dotSpeed, 180);\n                part = _this.dotSet.frameNum % _this.partitions;\n                curset = nodeSets[part];\n                for (i = _j = 0, _ref1 = curset.length; 0 <= _ref1 ? _j < _ref1 : _j > _ref1; i = 0 <= _ref1 ? ++_j : --_j) {\n                    xy = dx[i];\n                    xy = [\n                        xy[0] * _this.apRadius,\n                        xy[1] * _this.apRadius\n                    ];\n                    console.log(xy);\n                    curset[i].setPosition(xy);\n                }\n                return _this.layers[part].draw();\n            });\n            layer.draw();\n            return this.anim.start();\n        };\n        RandomDotMotion.prototype.stop = function (context) {\n            return this.anim.stop();\n        };\n        return RandomDotMotion;\n    }(Base.Stimulus);\n    x = new DotSet(51, 3);\n    console.log(x.dotSets);\n    console.log('NEXT', x.nextFrame(0.5, 0.01, 180));\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/dotmotion.js\"],\"names\":[\"Base\",\"DotSet\",\"Kinetic\",\"RandomDotMotion\",\"x\",\"_\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"randomDelta\",\"distance\",\"rads\",\"Math\",\"random\",\"PI\",\"cos\",\"sin\",\"coherentDelta\",\"direction\",\"pointInCircle\",\"r\",\"t\",\"u\",\"inCircle\",\"center_x\",\"center_y\",\"radius\",\"y\",\"squareDist\",\"pow\",\"ndots\",\"nparts\",\"coherence\",\"_this\",\"frameNum\",\"dotsPerSet\",\"round\",\"dotSets\",\"map\",\"i\",\"_i\",\"_ref\",\"_results\",\"push\",\"apply\",\"d\",\"getDotPartition\",\"nextFrame\",\"delta\",\"dset\",\"partition\",\"res\",\"xy\",\"length\",\"exports\",\"_super\",\"spec\",\"numDots\",\"apRadius\",\"dotSpeed\",\"dotSize\",\"partitions\",\"dotSet\",\"createDots\",\"dots\",\"_len\",\"Rect\",\"width\",\"height\",\"fill\",\"createInitialDots\",\"dpart\",\"_j\",\"_results1\",\"displayInitialDots\",\"nodes\",\"group\",\"node\",\"add\",\"render\",\"context\",\"layer\",\"nodeSets\",\"groups\",\"Group\",\"listening\",\"g\",\"draw\",\"anim\",\"Animation\",\"frame\",\"curset\",\"dx\",\"part\",\"_ref1\",\"console\",\"log\",\"setPosition\",\"hide\",\"show\",\"start\",\"render2\",\"layers\",\"Layer\",\"l\",\"stage\",\"stop\",\"Stimulus\"],\"mappings\":\"AACA,CAAC,YAAW;AAAA,IACV,IAAIA,IAAJ,EAAUC,MAAV,EAAkBC,OAAlB,EAA2BC,eAA3B,EAA4CC,CAA5C,EAA+CC,CAA/C,EACEC,SAAA,GAAY,GAAGC,cADjB,EAEEC,SAAA,GAAY,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAA,YAAE,SAASC,GAAT,IAAgBD,MAAhB,EAAwB;AAAA,gBAAE,IAAIJ,SAAA,CAAUM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ;AAAA,oBAAiCF,KAAA,CAAME,GAAN,IAAaD,MAAA,CAAOC,GAAP,CAAb,CAAnC;AAAA,aAA1B;AAAA,YAAyF,SAASE,IAAT,GAAgB;AAAA,gBAAE,KAAKC,WAAL,GAAmBL,KAAnB,CAAF;AAAA,aAAzG;AAAA,YAAuII,IAAA,CAAKE,SAAL,GAAiBL,MAAA,CAAOK,SAAxB,CAAvI;AAAA,YAA0KN,KAAA,CAAMM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA1K;AAAA,YAAwMJ,KAAA,CAAMO,SAAN,GAAkBN,MAAA,CAAOK,SAAzB,CAAxM;AAAA,YAA4O,OAAON,KAAP,CAA5O;AAAA,SAFtC,CADU;AAAA,IAKVT,IAAA,GAAOiB,OAAA,C,GAAA,E,MAAA,CAAP,CALU;AAAA,IAOVZ,CAAA,GAAIY,OAAA,C,IAAA,E,MAAA,CAAJ,CAPU;AAAA,IASVf,OAAA,GAAUe,OAAA,C,IAAA,E,MAAA,CAAV,CATU;AAAA,IAWVhB,MAAA,GAAU,YAAW;AAAA,QACnBA,MAAA,CAAOiB,WAAP,GAAqB,UAASC,QAAT,EAAmB;AAAA,YACtC,IAAIC,IAAJ,CADsC;AAAA,YAEtCA,IAAA,GAAOC,IAAA,CAAKC,MAAL,KAAgBD,IAAA,CAAKE,EAArB,GAA0B,CAAjC,CAFsC;AAAA,YAGtC,OAAO;AAAA,gBAACJ,QAAA,GAAWE,IAAA,CAAKG,GAAL,CAASJ,IAAT,CAAZ;AAAA,gBAA4BD,QAAA,GAAWE,IAAA,CAAKI,GAAL,CAASL,IAAT,CAAvC;AAAA,aAAP,CAHsC;AAAA,SAAxC,CADmB;AAAA,QAOnBnB,MAAA,CAAOyB,aAAP,GAAuB,UAASP,QAAT,EAAmBQ,SAAnB,EAA8B;AAAA,YACnD,OAAO;AAAA,gBAACR,QAAA,GAAWE,IAAA,CAAKG,GAAL,CAASH,IAAA,CAAKE,EAAL,GAAUI,SAAV,GAAsB,GAA/B,CAAZ;AAAA,gBAAiDR,QAAA,GAAWE,IAAA,CAAKI,GAAL,CAASJ,IAAA,CAAKE,EAAL,GAAUI,SAAV,GAAsB,GAA/B,CAA5D;AAAA,aAAP,CADmD;AAAA,SAArD,CAPmB;AAAA,QAWnB1B,MAAA,CAAO2B,aAAP,GAAuB,YAAW;AAAA,YAChC,IAAIC,CAAJ,EAAOC,CAAP,EAAUC,CAAV,CADgC;AAAA,YAEhCD,CAAA,GAAI,IAAIT,IAAA,CAAKE,EAAT,GAAcF,IAAA,CAAKC,MAAL,EAAlB,CAFgC;AAAA,YAGhCS,CAAA,GAAIV,IAAA,CAAKC,MAAL,KAAgBD,IAAA,CAAKC,MAAL,EAApB,CAHgC;AAAA,YAIhCO,CAAA,GAAIE,CAAA,GAAI,CAAJ,GAAQ,IAAIA,CAAZ,GAAgBA,CAApB,CAJgC;AAAA,YAKhC,OAAO;AAAA,gBAACF,CAAA,GAAIR,IAAA,CAAKG,GAAL,CAASM,CAAT,CAAL;AAAA,gBAAkBD,CAAA,GAAIR,IAAA,CAAKI,GAAL,CAASK,CAAT,CAAtB;AAAA,aAAP,CALgC;AAAA,SAAlC,CAXmB;AAAA,QAmBnB7B,MAAA,CAAO+B,QAAP,GAAkB,UAASC,QAAT,EAAmBC,QAAnB,EAA6BC,MAA7B,EAAqC/B,CAArC,EAAwCgC,CAAxC,EAA2C;AAAA,YAC3D,IAAIC,UAAJ,CAD2D;AAAA,YAE3DA,UAAA,GAAahB,IAAA,CAAKiB,GAAL,CAASL,QAAA,GAAW7B,CAApB,EAAuB,CAAvB,IAA4BiB,IAAA,CAAKiB,GAAL,CAASJ,QAAA,GAAWE,CAApB,EAAuB,CAAvB,CAAzC,CAF2D;AAAA,YAG3D,OAAOC,UAAA,IAAchB,IAAA,CAAKiB,GAAL,CAASH,MAAT,EAAiB,CAAjB,CAArB,CAH2D;AAAA,SAA7D,CAnBmB;AAAA,QAyBnB,SAASlC,MAAT,CAAgBsC,KAAhB,EAAuBC,MAAvB,EAA+BC,SAA/B,EAA0C;AAAA,YACxC,IAAIC,KAAA,GAAQ,IAAZ,CADwC;AAAA,YAExC,KAAKH,KAAL,GAAaA,KAAb,CAFwC;AAAA,YAGxC,KAAKC,MAAL,GAAcA,MAAA,IAAU,IAAV,GAAiBA,MAAjB,GAA0B,CAAxC,CAHwC;AAAA,YAIxC,IAAIC,SAAA,IAAa,IAAjB,EAAuB;AAAA,gBACrBA,SAAA,GAAY,GAAZ,CADqB;AAAA,aAJiB;AAAA,YAOxC,KAAKE,QAAL,GAAgB,CAAhB,CAPwC;AAAA,YAQxC,KAAKC,UAAL,GAAkBvB,IAAA,CAAKwB,KAAL,CAAW,KAAKN,KAAL,GAAa,KAAKC,MAA7B,CAAlB,CARwC;AAAA,YASxC,KAAKM,OAAL,GAAezC,CAAA,CAAE0C,GAAF,CAAM;AAAA,gBAAC,CAAD;AAAA,gBAAI,CAAJ;AAAA,gBAAO,CAAP;AAAA,aAAN,EAAiB,UAASC,CAAT,EAAY;AAAA,gBAC1C,IAAIC,EAAJ,EAAQC,IAAR,EAAcC,QAAd,CAD0C;AAAA,gBAE1C,OAAO9C,CAAA,CAAE0C,GAAF,CAAO,YAAW;AAAA,oBACvBI,QAAA,GAAW,EAAX,CADuB;AAAA,oBAEvB,KAAK,IAAIF,EAAA,GAAK,CAAT,EAAYC,IAAA,GAAOR,KAAA,CAAME,UAAzB,CAAL,CAA0C,KAAKM,IAAL,GAAYD,EAAA,GAAKC,IAAjB,GAAwBD,EAAA,GAAKC,IAAvE,EAA6E,KAAKA,IAAL,GAAYD,EAAA,EAAZ,GAAmBA,EAAA,EAAhG,EAAqG;AAAA,wBAAEE,QAAA,CAASC,IAAT,CAAcH,EAAd,EAAF;AAAA,qBAF9E;AAAA,oBAGvB,OAAOE,QAAP,CAHuB;AAAA,iBAAZ,CAIVE,KAJU,CAIJ,IAJI,CAAN,EAIS,UAASC,CAAT,EAAY;AAAA,oBAC1B,OAAO;AAAA,wBAACjC,IAAA,CAAKC,MAAL,EAAD;AAAA,wBAAgBD,IAAA,CAAKC,MAAL,EAAhB;AAAA,qBAAP,CAD0B;AAAA,iBAJrB,CAAP,CAF0C;AAAA,aAA7B,CAAf,CATwC;AAAA,SAzBvB;AAAA,QA8CnBrB,MAAA,CAAOc,SAAP,CAAiBwC,eAAjB,GAAmC,UAASP,CAAT,EAAY;AAAA,YAC7C,OAAO,KAAKF,OAAL,CAAaE,CAAb,CAAP,CAD6C;AAAA,SAA/C,CA9CmB;AAAA,QAkDnB/C,MAAA,CAAOc,SAAP,CAAiByC,SAAjB,GAA6B,UAASf,SAAT,EAAoBtB,QAApB,EAA8BQ,SAA9B,EAAyC;AAAA,YACpE,IAAI8B,KAAJ,EAAWC,IAAX,EAAiBV,CAAjB,EAAoBW,SAApB,EAA+BC,GAA/B,EAAoCC,EAApC,CADoE;AAAA,YAEpEF,SAAA,GAAY,KAAKhB,QAAL,GAAgB,KAAKH,MAAjC,CAFoE;AAAA,YAGpEkB,IAAA,GAAO,KAAKZ,OAAL,CAAaa,SAAb,CAAP,CAHoE;AAAA,YAIpEC,GAAA,GAAO,YAAW;AAAA,gBAChB,IAAIX,EAAJ,EAAQC,IAAR,EAAcC,QAAd,CADgB;AAAA,gBAEhBA,QAAA,GAAW,EAAX,CAFgB;AAAA,gBAGhB,KAAKH,CAAA,GAAIC,EAAA,GAAK,CAAT,EAAYC,IAAA,GAAOQ,IAAA,CAAKI,MAA7B,EAAqC,KAAKZ,IAAL,GAAYD,EAAA,GAAKC,IAAjB,GAAwBD,EAAA,GAAKC,IAAlE,EAAwEF,CAAA,GAAI,KAAKE,IAAL,GAAY,EAAED,EAAd,GAAmB,EAAEA,EAAjG,EAAqG;AAAA,oBACnGY,EAAA,GAAKH,IAAA,CAAKV,CAAL,CAAL,CADmG;AAAA,oBAEnGS,KAAA,GAAQpC,IAAA,CAAKC,MAAL,KAAgBmB,SAAhB,GAA4BxC,MAAA,CAAOyB,aAAP,CAAqBP,QAArB,EAA+BQ,SAA/B,CAA5B,GAAwE1B,MAAA,CAAOiB,WAAP,CAAmBC,QAAnB,CAAhF,CAFmG;AAAA,oBAGnG0C,EAAA,GAAK;AAAA,wBAACA,EAAA,CAAG,CAAH,IAAQJ,KAAA,CAAM,CAAN,CAAT;AAAA,wBAAmBI,EAAA,CAAG,CAAH,IAAQJ,KAAA,CAAM,CAAN,CAA3B;AAAA,qBAAL,CAHmG;AAAA,oBAInG,IAAII,EAAA,CAAG,CAAH,IAAQ,CAAR,IAAaA,EAAA,CAAG,CAAH,IAAQ,CAArB,IAA0BA,EAAA,CAAG,CAAH,IAAQ,CAAlC,IAAuCA,EAAA,CAAG,CAAH,IAAQ,CAAnD,EAAsD;AAAA,wBACpDA,EAAA,GAAK;AAAA,4BAACxC,IAAA,CAAKC,MAAL,EAAD;AAAA,4BAAgBD,IAAA,CAAKC,MAAL,EAAhB;AAAA,yBAAL,CADoD;AAAA,qBAJ6C;AAAA,oBAOnG6B,QAAA,CAASC,IAAT,CAAcM,IAAA,CAAKV,CAAL,IAAUa,EAAxB,EAPmG;AAAA,iBAHrF;AAAA,gBAYhB,OAAOV,QAAP,CAZgB;AAAA,aAAZ,EAAN,CAJoE;AAAA,YAkBpE,KAAKR,QAAL,GAAgB,KAAKA,QAAL,GAAgB,CAAhC,CAlBoE;AAAA,YAmBpE,OAAOiB,GAAP,CAnBoE;AAAA,SAAtE,CAlDmB;AAAA,QAwEnB,OAAO3D,MAAP,CAxEmB;AAAA,KAAZ,EAAT,CAXU;AAAA,IAuFV8D,OAAA,CAAQ5D,eAAR,GAA0BA,eAAA,GAAmB,UAAS6D,MAAT,EAAiB;AAAA,QAC5DxD,SAAA,CAAUL,eAAV,EAA2B6D,MAA3B,EAD4D;AAAA,QAG5D,SAAS7D,eAAT,CAAyB8D,IAAzB,EAA+B;AAAA,YAC7B,IAAIA,IAAA,IAAQ,IAAZ,EAAkB;AAAA,gBAChBA,IAAA,GAAO;AAAA,oBACL7D,CAAA,EAAG,CADE;AAAA,oBAELgC,CAAA,EAAG,CAFE;AAAA,oBAGL8B,OAAA,EAAS,EAHJ;AAAA,oBAILC,QAAA,EAAU,GAJL;AAAA,oBAKLC,QAAA,EAAU,IALL;AAAA,oBAMLC,OAAA,EAAS,CANJ;AAAA,oBAOL5B,SAAA,EAAW,IAPN;AAAA,oBAQL6B,UAAA,EAAY,CARP;AAAA,iBAAP,CADgB;AAAA,aADW;AAAA,YAa7B,KAAKJ,OAAL,GAAeD,IAAA,CAAKC,OAApB,CAb6B;AAAA,YAc7B,KAAKC,QAAL,GAAgBF,IAAA,CAAKE,QAArB,CAd6B;AAAA,YAe7B,KAAKC,QAAL,GAAgBH,IAAA,CAAKG,QAArB,CAf6B;AAAA,YAgB7B,KAAKC,OAAL,GAAeJ,IAAA,CAAKI,OAApB,CAhB6B;AAAA,YAiB7B,KAAK5B,SAAL,GAAiBwB,IAAA,CAAKxB,SAAtB,CAjB6B;AAAA,YAkB7B,KAAK6B,UAAL,GAAkBL,IAAA,CAAKK,UAAvB,CAlB6B;AAAA,YAmB7B,KAAKlE,CAAL,GAAS6D,IAAA,CAAK7D,CAAd,CAnB6B;AAAA,YAoB7B,KAAKgC,CAAL,GAAS6B,IAAA,CAAK7B,CAAd,CApB6B;AAAA,YAqB7B,KAAKmC,MAAL,GAAc,IAAItE,MAAJ,CAAW,KAAKiE,OAAhB,EAAyB,CAAzB,EAA4B,GAA5B,CAAd,CArB6B;AAAA,SAH6B;AAAA,QA2B5D/D,eAAA,CAAgBY,SAAhB,CAA0ByD,UAA1B,GAAuC,YAAW;AAAA,YAChD,IAAIC,IAAJ,EAAUZ,EAAV,EAAcZ,EAAd,EAAkByB,IAAlB,EAAwBvB,QAAxB,CADgD;AAAA,YAEhDsB,IAAA,GAAO,KAAKF,MAAL,CAAYf,SAAZ,CAAsB,KAAKf,SAA3B,EAAsC,KAAK2B,QAA3C,EAAqD,GAArD,CAAP,CAFgD;AAAA,YAGhDjB,QAAA,GAAW,EAAX,CAHgD;AAAA,YAIhD,KAAKF,EAAA,GAAK,CAAL,EAAQyB,IAAA,GAAOD,IAAA,CAAKX,MAAzB,EAAiCb,EAAA,GAAKyB,IAAtC,EAA4CzB,EAAA,EAA5C,EAAkD;AAAA,gBAChDY,EAAA,GAAKY,IAAA,CAAKxB,EAAL,CAAL,CADgD;AAAA,gBAEhDE,QAAA,CAASC,IAAT,CAAc,IAAIlD,OAAA,CAAQyE,IAAZ,CAAiB;AAAA,oBAC7BvE,CAAA,EAAG,KAAKA,CAAL,GAAS,KAAK+D,QAAL,GAAgBN,EAAA,CAAG,CAAH,CADC;AAAA,oBAE7BzB,CAAA,EAAG,KAAKhC,CAAL,GAAS,KAAK+D,QAAL,GAAgBN,EAAA,CAAG,CAAH,CAFC;AAAA,oBAG7Be,KAAA,EAAO,KAAKP,OAHiB;AAAA,oBAI7BQ,MAAA,EAAQ,KAAKR,OAJgB;AAAA,oBAK7BS,IAAA,EAAM,OALuB;AAAA,iBAAjB,CAAd,EAFgD;AAAA,aAJF;AAAA,YAchD,OAAO3B,QAAP,CAdgD;AAAA,SAAlD,CA3B4D;AAAA,QA4C5DhD,eAAA,CAAgBY,SAAhB,CAA0BgE,iBAA1B,GAA8C,YAAW;AAAA,YACvD,IAAIC,KAAJ,EAAWhC,CAAX,EAAca,EAAd,EAAkBZ,EAAlB,EAAsBC,IAAtB,EAA4BC,QAA5B,CADuD;AAAA,YAEvDA,QAAA,GAAW,EAAX,CAFuD;AAAA,YAGvD,KAAKH,CAAA,GAAIC,EAAA,GAAK,CAAT,EAAYC,IAAA,GAAO,KAAKoB,UAA7B,EAAyC,KAAKpB,IAAL,GAAYD,EAAA,GAAKC,IAAjB,GAAwBD,EAAA,GAAKC,IAAtE,EAA4EF,CAAA,GAAI,KAAKE,IAAL,GAAY,EAAED,EAAd,GAAmB,EAAEA,EAArG,EAAyG;AAAA,gBACvG+B,KAAA,GAAQ,KAAKT,MAAL,CAAYhB,eAAZ,CAA4BP,CAA5B,CAAR,CADuG;AAAA,gBAEvGG,QAAA,CAASC,IAAT,CAAe,YAAW;AAAA,oBACxB,IAAI6B,EAAJ,EAAQP,IAAR,EAAcQ,SAAd,CADwB;AAAA,oBAExBA,SAAA,GAAY,EAAZ,CAFwB;AAAA,oBAGxB,KAAKD,EAAA,GAAK,CAAL,EAAQP,IAAA,GAAOM,KAAA,CAAMlB,MAA1B,EAAkCmB,EAAA,GAAKP,IAAvC,EAA6CO,EAAA,EAA7C,EAAmD;AAAA,wBACjDpB,EAAA,GAAKmB,KAAA,CAAMC,EAAN,CAAL,CADiD;AAAA,wBAEjDC,SAAA,CAAU9B,IAAV,CAAe,IAAIlD,OAAA,CAAQyE,IAAZ,CAAiB;AAAA,4BAC9BvE,CAAA,EAAG,KAAKA,CAAL,GAAS,KAAK+D,QAAL,GAAgBN,EAAA,CAAG,CAAH,CADE;AAAA,4BAE9BzB,CAAA,EAAG,KAAKhC,CAAL,GAAS,KAAK+D,QAAL,GAAgBN,EAAA,CAAG,CAAH,CAFE;AAAA,4BAG9Be,KAAA,EAAO,KAAKP,OAHkB;AAAA,4BAI9BQ,MAAA,EAAQ,KAAKR,OAJiB;AAAA,4BAK9BS,IAAA,EAAM,OALwB;AAAA,yBAAjB,CAAf,EAFiD;AAAA,qBAH3B;AAAA,oBAaxB,OAAOI,SAAP,CAbwB;AAAA,iBAAZ,CAcXtE,IAdW,CAcN,IAdM,CAAd,EAFuG;AAAA,aAHlD;AAAA,YAqBvD,OAAOuC,QAAP,CArBuD;AAAA,SAAzD,CA5C4D;AAAA,QAoE5DhD,eAAA,CAAgBY,SAAhB,CAA0BoE,kBAA1B,GAA+C,UAASC,KAAT,EAAgBC,KAAhB,EAAuB;AAAA,YACpE,IAAIC,IAAJ,EAAUrC,EAAV,EAAcyB,IAAd,EAAoBvB,QAApB,CADoE;AAAA,YAEpEA,QAAA,GAAW,EAAX,CAFoE;AAAA,YAGpE,KAAKF,EAAA,GAAK,CAAL,EAAQyB,IAAA,GAAOU,KAAA,CAAMtB,MAA1B,EAAkCb,EAAA,GAAKyB,IAAvC,EAA6CzB,EAAA,EAA7C,EAAmD;AAAA,gBACjDqC,IAAA,GAAOF,KAAA,CAAMnC,EAAN,CAAP,CADiD;AAAA,gBAEjDE,QAAA,CAASC,IAAT,CAAciC,KAAA,CAAME,GAAN,CAAUD,IAAV,CAAd,EAFiD;AAAA,aAHiB;AAAA,YAOpE,OAAOnC,QAAP,CAPoE;AAAA,SAAtE,CApE4D;AAAA,QA8E5DhD,eAAA,CAAgBY,SAAhB,CAA0ByE,MAA1B,GAAmC,UAASC,OAAT,EAAkBC,KAAlB,EAAyB;AAAA,YAC1D,IAAI1C,CAAJ,EAAO2C,QAAP,EAAiB1C,EAAjB,EAAqBC,IAArB,EACER,KAAA,GAAQ,IADV,CAD0D;AAAA,YAG1D,KAAKkD,MAAL,GAAe,YAAW;AAAA,gBACxB,IAAI3C,EAAJ,EAAQC,IAAR,EAAcC,QAAd,CADwB;AAAA,gBAExBA,QAAA,GAAW,EAAX,CAFwB;AAAA,gBAGxB,KAAKH,CAAA,GAAIC,EAAA,GAAK,CAAT,EAAYC,IAAA,GAAO,KAAKoB,UAA7B,EAAyC,KAAKpB,IAAL,GAAYD,EAAA,GAAKC,IAAjB,GAAwBD,EAAA,GAAKC,IAAtE,EAA4EF,CAAA,GAAI,KAAKE,IAAL,GAAY,EAAED,EAAd,GAAmB,EAAEA,EAArG,EAAyG;AAAA,oBACvGE,QAAA,CAASC,IAAT,CAAc,IAAIlD,OAAA,CAAQ2F,KAAZ,CAAkB,EAC9BC,SAAA,EAAW,KADmB,EAAlB,CAAd,EADuG;AAAA,iBAHjF;AAAA,gBAQxB,OAAO3C,QAAP,CARwB;AAAA,aAAZ,CASXvC,IATW,CASN,IATM,CAAd,CAH0D;AAAA,YAa1DP,CAAA,CAAE0C,GAAF,CAAM,KAAK6C,MAAX,EAAmB,UAASG,CAAT,EAAY;AAAA,gBAC7B,OAAOL,KAAA,CAAMH,GAAN,CAAUQ,CAAV,CAAP,CAD6B;AAAA,aAA/B,EAb0D;AAAA,YAgB1DJ,QAAA,GAAW,KAAKZ,iBAAL,EAAX,CAhB0D;AAAA,YAiB1D,KAAK/B,CAAA,GAAIC,EAAA,GAAK,CAAT,EAAYC,IAAA,GAAO,KAAKoB,UAA7B,EAAyC,KAAKpB,IAAL,GAAYD,EAAA,GAAKC,IAAjB,GAAwBD,EAAA,GAAKC,IAAtE,EAA4EF,CAAA,GAAI,KAAKE,IAAL,GAAY,EAAED,EAAd,GAAmB,EAAEA,EAArG,EAAyG;AAAA,gBACvG,KAAKkC,kBAAL,CAAwBQ,QAAA,CAAS3C,CAAT,CAAxB,EAAqC,KAAK4C,MAAL,CAAY5C,CAAZ,CAArC,EADuG;AAAA,aAjB/C;AAAA,YAoB1D0C,KAAA,CAAMM,IAAN,GApB0D;AAAA,YAqB1D,KAAKC,IAAL,GAAY,IAAI/F,OAAA,CAAQgG,SAAZ,CAAsB,UAASC,KAAT,EAAgB;AAAA,gBAChD,IAAIC,MAAJ,EAAYC,EAAZ,EAAgBC,IAAhB,EAAsBzC,EAAtB,EAA0BoB,EAA1B,EAA8BsB,KAA9B,EAAqCpD,QAArC,CADgD;AAAA,gBAEhDkD,EAAA,GAAK3D,KAAA,CAAM6B,MAAN,CAAaf,SAAb,CAAuBd,KAAA,CAAMD,SAA7B,EAAwCC,KAAA,CAAM0B,QAA9C,EAAwD,GAAxD,CAAL,CAFgD;AAAA,gBAGhDkC,IAAA,GAAO5D,KAAA,CAAM6B,MAAN,CAAa5B,QAAb,GAAwBD,KAAA,CAAM4B,UAArC,CAHgD;AAAA,gBAIhD8B,MAAA,GAAST,QAAA,CAASW,IAAT,CAAT,CAJgD;AAAA,gBAKhDnD,QAAA,GAAW,EAAX,CALgD;AAAA,gBAMhD,KAAKH,CAAA,GAAIiC,EAAA,GAAK,CAAT,EAAYsB,KAAA,GAAQH,MAAA,CAAOtC,MAAhC,EAAwC,KAAKyC,KAAL,GAAatB,EAAA,GAAKsB,KAAlB,GAA0BtB,EAAA,GAAKsB,KAAvE,EAA8EvD,CAAA,GAAI,KAAKuD,KAAL,GAAa,EAAEtB,EAAf,GAAoB,EAAEA,EAAxG,EAA4G;AAAA,oBAC1GpB,EAAA,GAAKwC,EAAA,CAAGrD,CAAH,CAAL,CAD0G;AAAA,oBAE1Ga,EAAA,GAAK;AAAA,wBAACA,EAAA,CAAG,CAAH,IAAQnB,KAAA,CAAMyB,QAAf;AAAA,wBAAyBN,EAAA,CAAG,CAAH,IAAQnB,KAAA,CAAMyB,QAAvC;AAAA,qBAAL,CAF0G;AAAA,oBAG1GqC,OAAA,CAAQC,GAAR,CAAY5C,EAAZ,EAH0G;AAAA,oBAI1GuC,MAAA,CAAOpD,CAAP,EAAU0D,WAAV,CAAsB7C,EAAtB,EAJ0G;AAAA,oBAK1G,IAAI,CAAC5D,MAAA,CAAO+B,QAAP,CAAgB,MAAKU,KAAA,CAAMyB,QAA3B,EAAqC,MAAKzB,KAAA,CAAMyB,QAAhD,EAA0DzB,KAAA,CAAMyB,QAAN,GAAiB,CAA3E,EAA8EN,EAAA,CAAG,CAAH,CAA9E,EAAqFA,EAAA,CAAG,CAAH,CAArF,CAAL,EAAkG;AAAA,wBAChGV,QAAA,CAASC,IAAT,CAAcgD,MAAA,CAAOpD,CAAP,EAAU2D,IAAV,EAAd,EADgG;AAAA,qBAAlG,MAEO;AAAA,wBACLxD,QAAA,CAASC,IAAT,CAAcgD,MAAA,CAAOpD,CAAP,EAAU4D,IAAV,EAAd,EADK;AAAA,qBAPmG;AAAA,iBAN5D;AAAA,gBAiBhD,OAAOzD,QAAP,CAjBgD;AAAA,aAAtC,EAkBTuC,KAlBS,CAAZ,CArB0D;AAAA,YAwC1DA,KAAA,CAAMM,IAAN,GAxC0D;AAAA,YAyC1D,OAAO,KAAKC,IAAL,CAAUY,KAAV,EAAP,CAzC0D;AAAA,SAA5D,CA9E4D;AAAA,QA0H5D1G,eAAA,CAAgBY,SAAhB,CAA0B+F,OAA1B,GAAoC,UAASrB,OAAT,EAAkBC,KAAlB,EAAyB;AAAA,YAC3D,IAAI1C,CAAJ,EAAO2C,QAAP,EAAiB1C,EAAjB,EAAqBC,IAArB,EACER,KAAA,GAAQ,IADV,CAD2D;AAAA,YAG3D,KAAKqE,MAAL,GAAe,YAAW;AAAA,gBACxB,IAAI9D,EAAJ,EAAQC,IAAR,EAAcC,QAAd,CADwB;AAAA,gBAExBA,QAAA,GAAW,EAAX,CAFwB;AAAA,gBAGxB,KAAKH,CAAA,GAAIC,EAAA,GAAK,CAAT,EAAYC,IAAA,GAAO,KAAKoB,UAA7B,EAAyC,KAAKpB,IAAL,GAAYD,EAAA,GAAKC,IAAjB,GAAwBD,EAAA,GAAKC,IAAtE,EAA4EF,CAAA,GAAI,KAAKE,IAAL,GAAY,EAAED,EAAd,GAAmB,EAAEA,EAArG,EAAyG;AAAA,oBACvGE,QAAA,CAASC,IAAT,CAAc,IAAIlD,OAAA,CAAQ8G,KAAZ,CAAkB,EAC9BlB,SAAA,EAAW,KADmB,EAAlB,CAAd,EADuG;AAAA,iBAHjF;AAAA,gBAQxB,OAAO3C,QAAP,CARwB;AAAA,aAAZ,CASXvC,IATW,CASN,IATM,CAAd,CAH2D;AAAA,YAa3DP,CAAA,CAAE0C,GAAF,CAAM,KAAKgE,MAAX,EAAmB,UAASE,CAAT,EAAY;AAAA,gBAC7B,OAAOxB,OAAA,CAAQyB,KAAR,CAAc3B,GAAd,CAAkB0B,CAAlB,CAAP,CAD6B;AAAA,aAA/B,EAb2D;AAAA,YAgB3DtB,QAAA,GAAW,KAAKZ,iBAAL,EAAX,CAhB2D;AAAA,YAiB3D,KAAK/B,CAAA,GAAIC,EAAA,GAAK,CAAT,EAAYC,IAAA,GAAO,KAAKoB,UAA7B,EAAyC,KAAKpB,IAAL,GAAYD,EAAA,GAAKC,IAAjB,GAAwBD,EAAA,GAAKC,IAAtE,EAA4EF,CAAA,GAAI,KAAKE,IAAL,GAAY,EAAED,EAAd,GAAmB,EAAEA,EAArG,EAAyG;AAAA,gBACvG,KAAKkC,kBAAL,CAAwBQ,QAAA,CAAS3C,CAAT,CAAxB,EAAqC,KAAK+D,MAAL,CAAY/D,CAAZ,CAArC,EADuG;AAAA,aAjB9C;AAAA,YAoB3D,KAAKiD,IAAL,GAAY,IAAI/F,OAAA,CAAQgG,SAAZ,CAAsB,UAASC,KAAT,EAAgB;AAAA,gBAChD,IAAIC,MAAJ,EAAYC,EAAZ,EAAgBC,IAAhB,EAAsBzC,EAAtB,EAA0BoB,EAA1B,EAA8BsB,KAA9B,CADgD;AAAA,gBAEhDF,EAAA,GAAK3D,KAAA,CAAM6B,MAAN,CAAaf,SAAb,CAAuBd,KAAA,CAAMD,SAA7B,EAAwCC,KAAA,CAAM0B,QAA9C,EAAwD,GAAxD,CAAL,CAFgD;AAAA,gBAGhDkC,IAAA,GAAO5D,KAAA,CAAM6B,MAAN,CAAa5B,QAAb,GAAwBD,KAAA,CAAM4B,UAArC,CAHgD;AAAA,gBAIhD8B,MAAA,GAAST,QAAA,CAASW,IAAT,CAAT,CAJgD;AAAA,gBAKhD,KAAKtD,CAAA,GAAIiC,EAAA,GAAK,CAAT,EAAYsB,KAAA,GAAQH,MAAA,CAAOtC,MAAhC,EAAwC,KAAKyC,KAAL,GAAatB,EAAA,GAAKsB,KAAlB,GAA0BtB,EAAA,GAAKsB,KAAvE,EAA8EvD,CAAA,GAAI,KAAKuD,KAAL,GAAa,EAAEtB,EAAf,GAAoB,EAAEA,EAAxG,EAA4G;AAAA,oBAC1GpB,EAAA,GAAKwC,EAAA,CAAGrD,CAAH,CAAL,CAD0G;AAAA,oBAE1Ga,EAAA,GAAK;AAAA,wBAACA,EAAA,CAAG,CAAH,IAAQnB,KAAA,CAAMyB,QAAf;AAAA,wBAAyBN,EAAA,CAAG,CAAH,IAAQnB,KAAA,CAAMyB,QAAvC;AAAA,qBAAL,CAF0G;AAAA,oBAG1GqC,OAAA,CAAQC,GAAR,CAAY5C,EAAZ,EAH0G;AAAA,oBAI1GuC,MAAA,CAAOpD,CAAP,EAAU0D,WAAV,CAAsB7C,EAAtB,EAJ0G;AAAA,iBAL5D;AAAA,gBAWhD,OAAOnB,KAAA,CAAMqE,MAAN,CAAaT,IAAb,EAAmBN,IAAnB,EAAP,CAXgD;AAAA,aAAtC,CAAZ,CApB2D;AAAA,YAiC3DN,KAAA,CAAMM,IAAN,GAjC2D;AAAA,YAkC3D,OAAO,KAAKC,IAAL,CAAUY,KAAV,EAAP,CAlC2D;AAAA,SAA7D,CA1H4D;AAAA,QA+J5D1G,eAAA,CAAgBY,SAAhB,CAA0BoG,IAA1B,GAAiC,UAAS1B,OAAT,EAAkB;AAAA,YACjD,OAAO,KAAKQ,IAAL,CAAUkB,IAAV,EAAP,CADiD;AAAA,SAAnD,CA/J4D;AAAA,QAmK5D,OAAOhH,eAAP,CAnK4D;AAAA,KAAlB,CAqKzCH,IAAA,CAAKoH,QArKoC,CAA5C,CAvFU;AAAA,IA8PVhH,CAAA,GAAI,IAAIH,MAAJ,CAAW,EAAX,EAAe,CAAf,CAAJ,CA9PU;AAAA,IAgQVuG,OAAA,CAAQC,GAAR,CAAYrG,CAAA,CAAE0C,OAAd,EAhQU;AAAA,IAkQV0D,OAAA,CAAQC,GAAR,CAAY,MAAZ,EAAoBrG,CAAA,CAAEoD,SAAF,CAAY,GAAZ,EAAgB,IAAhB,EAAqB,GAArB,CAApB,EAlQU;AAAA,CAAZ,CAoQG5C,IApQH,CAoQQ,IApQR\"}","lineCount":269,"mtime":1390162536000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.6.3\n(function() {\n  var Base, DotSet, Kinetic, RandomDotMotion, x, _,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Base = require(\"./stimresp\");\n\n  _ = require('lodash');\n\n  Kinetic = require(\"../jslibs/kinetic.js\");\n\n  DotSet = (function() {\n    DotSet.randomDelta = function(distance) {\n      var rads;\n      rads = Math.random() * Math.PI * 2;\n      return [distance * Math.cos(rads), distance * Math.sin(rads)];\n    };\n\n    DotSet.coherentDelta = function(distance, direction) {\n      return [distance * Math.cos(Math.PI * direction / 180), distance * Math.sin(Math.PI * direction / 180)];\n    };\n\n    DotSet.pointInCircle = function() {\n      var r, t, u;\n      t = 2 * Math.PI * Math.random();\n      u = Math.random() + Math.random();\n      r = u > 1 ? 2 - u : u;\n      return [r * Math.cos(t), r * Math.sin(t)];\n    };\n\n    DotSet.inCircle = function(center_x, center_y, radius, x, y) {\n      var squareDist;\n      squareDist = Math.pow(center_x - x, 2) + Math.pow(center_y - y, 2);\n      return squareDist <= Math.pow(radius, 2);\n    };\n\n    function DotSet(ndots, nparts, coherence) {\n      var _this = this;\n      this.ndots = ndots;\n      this.nparts = nparts != null ? nparts : 3;\n      if (coherence == null) {\n        coherence = .5;\n      }\n      this.frameNum = 0;\n      this.dotsPerSet = Math.round(this.ndots / this.nparts);\n      this.dotSets = _.map([0, 1, 2], function(i) {\n        var _i, _ref, _results;\n        return _.map((function() {\n          _results = [];\n          for (var _i = 0, _ref = _this.dotsPerSet; 0 <= _ref ? _i < _ref : _i > _ref; 0 <= _ref ? _i++ : _i--){ _results.push(_i); }\n          return _results;\n        }).apply(this), function(d) {\n          return [Math.random(), Math.random()];\n        });\n      });\n    }\n\n    DotSet.prototype.getDotPartition = function(i) {\n      return this.dotSets[i];\n    };\n\n    DotSet.prototype.nextFrame = function(coherence, distance, direction) {\n      var delta, dset, i, partition, res, xy;\n      partition = this.frameNum % this.nparts;\n      dset = this.dotSets[partition];\n      res = (function() {\n        var _i, _ref, _results;\n        _results = [];\n        for (i = _i = 0, _ref = dset.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n          xy = dset[i];\n          delta = Math.random() < coherence ? DotSet.coherentDelta(distance, direction) : DotSet.randomDelta(distance);\n          xy = [xy[0] + delta[0], xy[1] + delta[1]];\n          if (xy[0] < 0 || xy[0] > 1 || xy[1] < 0 || xy[1] > 1) {\n            xy = [Math.random(), Math.random()];\n          }\n          _results.push(dset[i] = xy);\n        }\n        return _results;\n      })();\n      this.frameNum = this.frameNum + 1;\n      return res;\n    };\n\n    return DotSet;\n\n  })();\n\n  exports.RandomDotMotion = RandomDotMotion = (function(_super) {\n    __extends(RandomDotMotion, _super);\n\n    function RandomDotMotion(spec) {\n      if (spec == null) {\n        spec = {\n          x: 0,\n          y: 0,\n          numDots: 70,\n          apRadius: 400,\n          dotSpeed: .02,\n          dotSize: 2,\n          coherence: .55,\n          partitions: 3\n        };\n      }\n      this.numDots = spec.numDots;\n      this.apRadius = spec.apRadius;\n      this.dotSpeed = spec.dotSpeed;\n      this.dotSize = spec.dotSize;\n      this.coherence = spec.coherence;\n      this.partitions = spec.partitions;\n      this.x = spec.x;\n      this.y = spec.y;\n      this.dotSet = new DotSet(this.numDots, 3, .5);\n    }\n\n    RandomDotMotion.prototype.createDots = function() {\n      var dots, xy, _i, _len, _results;\n      dots = this.dotSet.nextFrame(this.coherence, this.dotSpeed, 180);\n      _results = [];\n      for (_i = 0, _len = dots.length; _i < _len; _i++) {\n        xy = dots[_i];\n        _results.push(new Kinetic.Rect({\n          x: this.x + this.apRadius * xy[0],\n          y: this.x + this.apRadius * xy[1],\n          width: this.dotSize,\n          height: this.dotSize,\n          fill: \"green\"\n        }));\n      }\n      return _results;\n    };\n\n    RandomDotMotion.prototype.createInitialDots = function() {\n      var dpart, i, xy, _i, _ref, _results;\n      _results = [];\n      for (i = _i = 0, _ref = this.partitions; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        dpart = this.dotSet.getDotPartition(i);\n        _results.push((function() {\n          var _j, _len, _results1;\n          _results1 = [];\n          for (_j = 0, _len = dpart.length; _j < _len; _j++) {\n            xy = dpart[_j];\n            _results1.push(new Kinetic.Rect({\n              x: this.x + this.apRadius * xy[0],\n              y: this.x + this.apRadius * xy[1],\n              width: this.dotSize,\n              height: this.dotSize,\n              fill: \"green\"\n            }));\n          }\n          return _results1;\n        }).call(this));\n      }\n      return _results;\n    };\n\n    RandomDotMotion.prototype.displayInitialDots = function(nodes, group) {\n      var node, _i, _len, _results;\n      _results = [];\n      for (_i = 0, _len = nodes.length; _i < _len; _i++) {\n        node = nodes[_i];\n        _results.push(group.add(node));\n      }\n      return _results;\n    };\n\n    RandomDotMotion.prototype.render = function(context, layer) {\n      var i, nodeSets, _i, _ref,\n        _this = this;\n      this.groups = (function() {\n        var _i, _ref, _results;\n        _results = [];\n        for (i = _i = 0, _ref = this.partitions; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n          _results.push(new Kinetic.Group({\n            listening: false\n          }));\n        }\n        return _results;\n      }).call(this);\n      _.map(this.groups, function(g) {\n        return layer.add(g);\n      });\n      nodeSets = this.createInitialDots();\n      for (i = _i = 0, _ref = this.partitions; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        this.displayInitialDots(nodeSets[i], this.groups[i]);\n      }\n      layer.draw();\n      this.anim = new Kinetic.Animation(function(frame) {\n        var curset, dx, part, xy, _j, _ref1, _results;\n        dx = _this.dotSet.nextFrame(_this.coherence, _this.dotSpeed, 180);\n        part = _this.dotSet.frameNum % _this.partitions;\n        curset = nodeSets[part];\n        _results = [];\n        for (i = _j = 0, _ref1 = curset.length; 0 <= _ref1 ? _j < _ref1 : _j > _ref1; i = 0 <= _ref1 ? ++_j : --_j) {\n          xy = dx[i];\n          xy = [xy[0] * _this.apRadius, xy[1] * _this.apRadius];\n          console.log(xy);\n          curset[i].setPosition(xy);\n          if (!DotSet.inCircle(.5 * _this.apRadius, .5 * _this.apRadius, _this.apRadius / 2, xy[0], xy[1])) {\n            _results.push(curset[i].hide());\n          } else {\n            _results.push(curset[i].show());\n          }\n        }\n        return _results;\n      }, layer);\n      layer.draw();\n      return this.anim.start();\n    };\n\n    RandomDotMotion.prototype.render2 = function(context, layer) {\n      var i, nodeSets, _i, _ref,\n        _this = this;\n      this.layers = (function() {\n        var _i, _ref, _results;\n        _results = [];\n        for (i = _i = 0, _ref = this.partitions; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n          _results.push(new Kinetic.Layer({\n            listening: false\n          }));\n        }\n        return _results;\n      }).call(this);\n      _.map(this.layers, function(l) {\n        return context.stage.add(l);\n      });\n      nodeSets = this.createInitialDots();\n      for (i = _i = 0, _ref = this.partitions; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        this.displayInitialDots(nodeSets[i], this.layers[i]);\n      }\n      this.anim = new Kinetic.Animation(function(frame) {\n        var curset, dx, part, xy, _j, _ref1;\n        dx = _this.dotSet.nextFrame(_this.coherence, _this.dotSpeed, 180);\n        part = _this.dotSet.frameNum % _this.partitions;\n        curset = nodeSets[part];\n        for (i = _j = 0, _ref1 = curset.length; 0 <= _ref1 ? _j < _ref1 : _j > _ref1; i = 0 <= _ref1 ? ++_j : --_j) {\n          xy = dx[i];\n          xy = [xy[0] * _this.apRadius, xy[1] * _this.apRadius];\n          console.log(xy);\n          curset[i].setPosition(xy);\n        }\n        return _this.layers[part].draw();\n      });\n      layer.draw();\n      return this.anim.start();\n    };\n\n    RandomDotMotion.prototype.stop = function(context) {\n      return this.anim.stop();\n    };\n\n    return RandomDotMotion;\n\n  })(Base.Stimulus);\n\n  x = new DotSet(51, 3);\n\n  console.log(x.dotSets);\n\n  console.log(\"NEXT\", x.nextFrame(.5, .01, 180));\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/elements.js":{"id":2,"canonicalName":"src/elements.js","code":"(function () {\n    var AbsoluteLayout, Background, Bacon, Base, GridLayout, Kinetic, KineticStimFactory, Layout, Q, Response, Stimulus, disableBrowserBack, doTimer, getTimestamp, input, lay, li, marked, renderable, ul, utils, _, _ref;\n    Bacon = require('22', module).Bacon;\n    Kinetic = require('15', module);\n    _ = require('16', module);\n    Q = require('17', module);\n    marked = require('45', module);\n    utils = require('5', module);\n    lay = require('9', module);\n    Base = require('8', module);\n    Stimulus = Base.Stimulus;\n    Response = Base.Response;\n    Background = require('60', module).Background;\n    _ref = require('61', module), renderable = _ref.renderable, ul = _ref.ul, li = _ref.li, input = _ref.input;\n    Layout = lay.Layout;\n    AbsoluteLayout = lay.AbsoluteLayout;\n    GridLayout = lay.GridLayout;\n    doTimer = utils.doTimer;\n    disableBrowserBack = utils.disableBrowserBack;\n    getTimestamp = utils.getTimeStamp;\n    exports.KineticStimFactory = KineticStimFactory = function () {\n        function KineticStimFactory() {\n            console.log('making stim factory');\n        }\n        KineticStimFactory.prototype.makeLayout = function (name, params, context) {\n        };\n        KineticStimFactory.prototype.makeInstructions = function (spec) {\n        };\n        KineticStimFactory.prototype.makeStimulus = function (name, params, context) {\n        };\n        KineticStimFactory.prototype.makeResponse = function (name, params, context) {\n        };\n        KineticStimFactory.prototype.makeEvent = function (stim, response) {\n        };\n        return KineticStimFactory;\n    }();\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/elements.js\"],\"names\":[\"AbsoluteLayout\",\"Background\",\"Bacon\",\"Base\",\"GridLayout\",\"Kinetic\",\"KineticStimFactory\",\"Layout\",\"Q\",\"Response\",\"Stimulus\",\"disableBrowserBack\",\"doTimer\",\"getTimestamp\",\"input\",\"lay\",\"li\",\"marked\",\"renderable\",\"ul\",\"utils\",\"_\",\"_ref\",\"require\",\"getTimeStamp\",\"exports\",\"console\",\"log\",\"prototype\",\"makeLayout\",\"name\",\"params\",\"context\",\"makeInstructions\",\"spec\",\"makeStimulus\",\"makeResponse\",\"makeEvent\",\"stim\",\"response\",\"call\"],\"mappings\":\"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\"}","lineCount":37,"mtime":1390104547000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/baconjs/dist/Bacon.js","canonicalName":"node_modules/baconjs/dist/Bacon.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/q/q.js","canonicalName":"node_modules/q/q.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/marked/lib/marked.js","canonicalName":"node_modules/marked/lib/marked.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/utils.js","canonicalName":"src/utils.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/layout.js","canonicalName":"src/layout.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/components/canvas/Background.js","canonicalName":"src/components/canvas/Background.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/teacup/lib/teacup.js","canonicalName":"node_modules/teacup/lib/teacup.js","isNpmModule":true,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.6.3\n(function() {\n  var AbsoluteLayout, Background, Bacon, Base, GridLayout, Kinetic, KineticStimFactory, Layout, Q, Response, Stimulus, disableBrowserBack, doTimer, getTimestamp, input, lay, li, marked, renderable, ul, utils, _, _ref;\n\n  Bacon = require(\"baconjs\").Bacon;\n\n  Kinetic = require(\"../jslibs/kinetic\");\n\n  _ = require('lodash');\n\n  Q = require(\"q\");\n\n  marked = require(\"marked\");\n\n  utils = require(\"./utils\");\n\n  lay = require(\"./layout\");\n\n  Base = require(\"./stimresp\");\n\n  Stimulus = Base.Stimulus;\n\n  Response = Base.Response;\n\n  Background = require(\"./components/canvas/Background\").Background;\n\n  _ref = require('teacup'), renderable = _ref.renderable, ul = _ref.ul, li = _ref.li, input = _ref.input;\n\n  Layout = lay.Layout;\n\n  AbsoluteLayout = lay.AbsoluteLayout;\n\n  GridLayout = lay.GridLayout;\n\n  doTimer = utils.doTimer;\n\n  disableBrowserBack = utils.disableBrowserBack;\n\n  getTimestamp = utils.getTimeStamp;\n\n  exports.KineticStimFactory = KineticStimFactory = (function() {\n    function KineticStimFactory() {\n      console.log(\"making stim factory\");\n    }\n\n    KineticStimFactory.prototype.makeLayout = function(name, params, context) {};\n\n    KineticStimFactory.prototype.makeInstructions = function(spec) {};\n\n    KineticStimFactory.prototype.makeStimulus = function(name, params, context) {\n      /*\n          layoutName = _.keys(params.layout)[0]\n          layoutParams = _.values(params.layout)[0]\n      \n          new Group(stims, @makeLayout(layoutName, layoutParams, context))\n      \n        when \"Instructions\" then new Instructions(params)\n        when \"Rectangle\" then new Rectangle(params)\n        when \"Text\" then new Text(params)\n        when \"HtmlIcon\" then new HtmlIcon(params)\n      \n        else throw \"No Stimulus type of name #{name}\"\n      */\n\n    };\n\n    KineticStimFactory.prototype.makeResponse = function(name, params, context) {\n      /*console.log(\"making response\", name)\n      switch name\n        when \"KeyPress\" then new KeyPressResponse(params)\n        when \"SpaceKey\" then new SpaceKeyResponse(params)\n        when \"Timeout\" then new Timeout(params)\n        else throw new Error(\"No Response type of name #{name}\")\n      */\n\n    };\n\n    KineticStimFactory.prototype.makeEvent = function(stim, response) {};\n\n    return KineticStimFactory;\n\n  })();\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/node_modules/teacup/lib/teacup.js":{"id":61,"canonicalName":"node_modules/teacup/lib/teacup.js","code":"(function () {\n    var Teacup, doctypes, elements, merge_elements, tagName, _fn, _fn1, _fn2, _i, _j, _k, _len, _len1, _len2, _ref, _ref1, _ref2, __slice = [].slice, __indexOf = [].indexOf || function (item) {\n            for (var i = 0, l = this.length; i < l; i++) {\n                if (i in this && this[i] === item)\n                    return i;\n            }\n            return -1;\n        };\n    doctypes = {\n        'default': '<!DOCTYPE html>',\n        '5': '<!DOCTYPE html>',\n        'xml': '<?xml version=\"1.0\" encoding=\"utf-8\" ?>',\n        'transitional': '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">',\n        'strict': '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">',\n        'frameset': '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Frameset//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd\">',\n        '1.1': '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.1//EN\" \"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd\">',\n        'basic': '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML Basic 1.1//EN\" \"http://www.w3.org/TR/xhtml-basic/xhtml-basic11.dtd\">',\n        'mobile': '<!DOCTYPE html PUBLIC \"-//WAPFORUM//DTD XHTML Mobile 1.2//EN\" \"http://www.openmobilealliance.org/tech/DTD/xhtml-mobile12.dtd\">',\n        'ce': '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"ce-html-1.0-transitional.dtd\">'\n    };\n    elements = {\n        regular: 'a abbr address article aside audio b bdi bdo blockquote body button canvas caption cite code colgroup datalist dd del details dfn div dl dt em fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hgroup html i iframe ins kbd label legend li map mark menu meter nav noscript object ol optgroup option output p pre progress q rp rt ruby s samp section select small span strong sub summary sup table tbody td textarea tfoot th thead time title tr u ul video',\n        raw: 'script style',\n        'void': 'area base br col command embed hr img input keygen link meta param source track wbr',\n        obsolete: 'applet acronym bgsound dir frameset noframes isindex listing nextid noembed plaintext rb strike xmp big blink center font marquee multicol nobr spacer tt',\n        obsolete_void: 'basefont frame'\n    };\n    merge_elements = function () {\n        var a, args, element, result, _i, _j, _len, _len1, _ref;\n        args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n        result = [];\n        for (_i = 0, _len = args.length; _i < _len; _i++) {\n            a = args[_i];\n            _ref = elements[a].split(' ');\n            for (_j = 0, _len1 = _ref.length; _j < _len1; _j++) {\n                element = _ref[_j];\n                if (__indexOf.call(result, element) < 0) {\n                    result.push(element);\n                }\n            }\n        }\n        return result;\n    };\n    Teacup = function () {\n        function Teacup() {\n            this.htmlOut = null;\n        }\n        Teacup.prototype.resetBuffer = function (html) {\n            var previous;\n            if (html == null) {\n                html = null;\n            }\n            previous = this.htmlOut;\n            this.htmlOut = html;\n            return previous;\n        };\n        Teacup.prototype.render = function () {\n            var args, previous, result, template;\n            template = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n            previous = this.resetBuffer('');\n            try {\n                template.apply(null, args);\n            } finally {\n                result = this.resetBuffer(previous);\n            }\n            return result;\n        };\n        Teacup.prototype.cede = function () {\n            var args;\n            args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n            return this.render.apply(this, args);\n        };\n        Teacup.prototype.renderable = function (template) {\n            var teacup;\n            teacup = this;\n            return function () {\n                var args, result;\n                args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n                if (teacup.htmlOut === null) {\n                    teacup.htmlOut = '';\n                    try {\n                        template.apply(this, args);\n                    } finally {\n                        result = teacup.resetBuffer();\n                    }\n                    return result;\n                } else {\n                    return template.apply(this, args);\n                }\n            };\n        };\n        Teacup.prototype.renderAttr = function (name, value) {\n            var k, v;\n            if (value == null) {\n                return ' ' + name;\n            }\n            if (value === false) {\n                return '';\n            }\n            if (name === 'data' && typeof value === 'object') {\n                return function () {\n                    var _results;\n                    _results = [];\n                    for (k in value) {\n                        v = value[k];\n                        _results.push(this.renderAttr('data-' + k, v));\n                    }\n                    return _results;\n                }.call(this).join('');\n            }\n            if (value === true) {\n                value = name;\n            }\n            return ' ' + name + '=' + this.quote(this.escape(value.toString()));\n        };\n        Teacup.prototype.attrOrder = [\n            'id',\n            'class'\n        ];\n        Teacup.prototype.renderAttrs = function (obj) {\n            var name, result, value, _i, _len, _ref;\n            result = '';\n            _ref = this.attrOrder;\n            for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n                name = _ref[_i];\n                if (!(name in obj)) {\n                    continue;\n                }\n                result += this.renderAttr(name, obj[name]);\n                delete obj[name];\n            }\n            for (name in obj) {\n                value = obj[name];\n                result += this.renderAttr(name, value);\n            }\n            return result;\n        };\n        Teacup.prototype.renderContents = function (contents) {\n            if (contents == null) {\n            } else if (typeof contents === 'function') {\n                return contents.call(this);\n            } else {\n                return this.text(contents);\n            }\n        };\n        Teacup.prototype.isSelector = function (string) {\n            var _ref;\n            return string.length > 1 && ((_ref = string[0]) === '#' || _ref === '.');\n        };\n        Teacup.prototype.parseSelector = function (selector) {\n            var classes, id, klass, token, _i, _len, _ref, _ref1;\n            id = null;\n            classes = [];\n            _ref = selector.split('.');\n            for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n                token = _ref[_i];\n                if (id) {\n                    classes.push(token);\n                } else {\n                    _ref1 = token.split('#'), klass = _ref1[0], id = _ref1[1];\n                    if (klass !== '') {\n                        classes.push(token);\n                    }\n                }\n            }\n            return {\n                id: id,\n                classes: classes\n            };\n        };\n        Teacup.prototype.normalizeArgs = function (args) {\n            var arg, attrs, classes, contents, id, index, selector, _i, _len;\n            attrs = {};\n            selector = null;\n            contents = null;\n            for (index = _i = 0, _len = args.length; _i < _len; index = ++_i) {\n                arg = args[index];\n                if (arg != null) {\n                    switch (typeof arg) {\n                    case 'string':\n                        if (index === 0 && this.isSelector(arg)) {\n                            selector = this.parseSelector(arg);\n                        } else {\n                            contents = arg;\n                        }\n                        break;\n                    case 'function':\n                    case 'number':\n                    case 'boolean':\n                        contents = arg;\n                        break;\n                    case 'object':\n                        if (arg.constructor === Object) {\n                            attrs = arg;\n                        } else {\n                            contents = arg;\n                        }\n                        break;\n                    default:\n                        contents = arg;\n                    }\n                }\n            }\n            if (selector != null) {\n                id = selector.id, classes = selector.classes;\n                if (id != null) {\n                    attrs.id = id;\n                }\n                if (classes != null ? classes.length : void 0) {\n                    attrs['class'] = classes.join(' ');\n                }\n            }\n            return {\n                attrs: attrs,\n                contents: contents\n            };\n        };\n        Teacup.prototype.tag = function () {\n            var args, attrs, contents, tagName, _ref;\n            tagName = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n            _ref = this.normalizeArgs(args), attrs = _ref.attrs, contents = _ref.contents;\n            this.raw('<' + tagName + this.renderAttrs(attrs) + '>');\n            this.renderContents(contents);\n            return this.raw('</' + tagName + '>');\n        };\n        Teacup.prototype.rawTag = function () {\n            var args, attrs, contents, tagName, _ref;\n            tagName = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n            _ref = this.normalizeArgs(args), attrs = _ref.attrs, contents = _ref.contents;\n            this.raw('<' + tagName + this.renderAttrs(attrs) + '>');\n            this.raw(contents);\n            return this.raw('</' + tagName + '>');\n        };\n        Teacup.prototype.selfClosingTag = function () {\n            var args, attrs, contents, tag, _ref;\n            tag = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n            _ref = this.normalizeArgs(args), attrs = _ref.attrs, contents = _ref.contents;\n            if (contents) {\n                throw new Error('Teacup: <' + tag + '/> must not have content.  Attempted to nest ' + contents);\n            }\n            return this.raw('<' + tag + this.renderAttrs(attrs) + ' />');\n        };\n        Teacup.prototype.coffeescript = function (fn) {\n            return this.raw('<script type=\"text/javascript\">(function() {\\n  var __slice = [].slice,\\n      __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },\\n      __hasProp = {}.hasOwnProperty,\\n      __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\\n  (' + fn.toString() + ')();\\n})();</script>');\n        };\n        Teacup.prototype.comment = function (text) {\n            return this.raw('<!--' + this.escape(text) + '-->');\n        };\n        Teacup.prototype.doctype = function (type) {\n            if (type == null) {\n                type = 5;\n            }\n            return this.raw(doctypes[type]);\n        };\n        Teacup.prototype.ie = function (condition, contents) {\n            this.raw('<!--[if ' + this.escape(condition) + ']>');\n            this.renderContents(contents);\n            return this.raw('<![endif]-->');\n        };\n        Teacup.prototype.text = function (s) {\n            if (this.htmlOut == null) {\n                throw new Error('Teacup: can\\'t call a tag function outside a rendering context');\n            }\n            return this.htmlOut += s != null && this.escape(s.toString()) || '';\n        };\n        Teacup.prototype.raw = function (s) {\n            if (s == null) {\n                return;\n            }\n            return this.htmlOut += s;\n        };\n        Teacup.prototype.escape = function (text) {\n            return text.toString().replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\n        };\n        Teacup.prototype.quote = function (value) {\n            return '\"' + value + '\"';\n        };\n        Teacup.prototype.tags = function () {\n            var bound, boundMethodNames, method, _fn, _i, _len, _this = this;\n            bound = {};\n            boundMethodNames = [].concat('cede coffeescript comment doctype escape ie raw render renderable script tag text'.split(' '), merge_elements('regular', 'obsolete', 'raw', 'void', 'obsolete_void'));\n            _fn = function (method) {\n                return bound[method] = function () {\n                    var args;\n                    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n                    return _this[method].apply(_this, args);\n                };\n            };\n            for (_i = 0, _len = boundMethodNames.length; _i < _len; _i++) {\n                method = boundMethodNames[_i];\n                _fn(method);\n            }\n            return bound;\n        };\n        return Teacup;\n    }();\n    _ref = merge_elements('regular', 'obsolete');\n    _fn = function (tagName) {\n        return Teacup.prototype[tagName] = function () {\n            var args;\n            args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n            return this.tag.apply(this, [tagName].concat(__slice.call(args)));\n        };\n    };\n    for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        tagName = _ref[_i];\n        _fn(tagName);\n    }\n    _ref1 = merge_elements('raw');\n    _fn1 = function (tagName) {\n        return Teacup.prototype[tagName] = function () {\n            var args;\n            args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n            return this.rawTag.apply(this, [tagName].concat(__slice.call(args)));\n        };\n    };\n    for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {\n        tagName = _ref1[_j];\n        _fn1(tagName);\n    }\n    _ref2 = merge_elements('void', 'obsolete_void');\n    _fn2 = function (tagName) {\n        return Teacup.prototype[tagName] = function () {\n            var args;\n            args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n            return this.selfClosingTag.apply(this, [tagName].concat(__slice.call(args)));\n        };\n    };\n    for (_k = 0, _len2 = _ref2.length; _k < _len2; _k++) {\n        tagName = _ref2[_k];\n        _fn2(tagName);\n    }\n    if (typeof module !== 'undefined' && module !== null ? module.exports : void 0) {\n        module.exports = new Teacup().tags();\n        module.exports.Teacup = Teacup;\n    } else if (typeof define === 'function' && define.amd) {\n        define('teacup', [], function () {\n            return new Teacup().tags();\n        });\n    } else {\n        window.teacup = new Teacup().tags();\n        window.teacup.Teacup = Teacup;\n    }\n}.call(this));","map":"{\"version\":3,\"sources\":[\"node_modules/teacup/lib/teacup.js\"],\"names\":[\"Teacup\",\"doctypes\",\"elements\",\"merge_elements\",\"tagName\",\"_fn\",\"_fn1\",\"_fn2\",\"_i\",\"_j\",\"_k\",\"_len\",\"_len1\",\"_len2\",\"_ref\",\"_ref1\",\"_ref2\",\"__slice\",\"slice\",\"__indexOf\",\"indexOf\",\"item\",\"i\",\"l\",\"length\",\"regular\",\"raw\",\"obsolete\",\"obsolete_void\",\"a\",\"args\",\"element\",\"result\",\"arguments\",\"call\",\"split\",\"push\",\"htmlOut\",\"prototype\",\"resetBuffer\",\"html\",\"previous\",\"render\",\"template\",\"apply\",\"cede\",\"renderable\",\"teacup\",\"renderAttr\",\"name\",\"value\",\"k\",\"v\",\"_results\",\"join\",\"quote\",\"escape\",\"toString\",\"attrOrder\",\"renderAttrs\",\"obj\",\"renderContents\",\"contents\",\"text\",\"isSelector\",\"string\",\"parseSelector\",\"selector\",\"classes\",\"id\",\"klass\",\"token\",\"normalizeArgs\",\"arg\",\"attrs\",\"index\",\"constructor\",\"Object\",\"tag\",\"rawTag\",\"selfClosingTag\",\"Error\",\"coffeescript\",\"fn\",\"comment\",\"doctype\",\"type\",\"ie\",\"condition\",\"s\",\"replace\",\"tags\",\"bound\",\"boundMethodNames\",\"method\",\"_this\",\"concat\",\"module\",\"exports\",\"define\",\"amd\",\"window\"],\"mappings\":\"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\"}","lineCount":344,"mtime":1376626640000,"deps":[],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":true,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.6.3\n(function() {\n  var Teacup, doctypes, elements, merge_elements, tagName, _fn, _fn1, _fn2, _i, _j, _k, _len, _len1, _len2, _ref, _ref1, _ref2,\n    __slice = [].slice,\n    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  doctypes = {\n    'default': '<!DOCTYPE html>',\n    '5': '<!DOCTYPE html>',\n    'xml': '<?xml version=\"1.0\" encoding=\"utf-8\" ?>',\n    'transitional': '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">',\n    'strict': '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">',\n    'frameset': '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Frameset//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd\">',\n    '1.1': '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.1//EN\" \"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd\">',\n    'basic': '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML Basic 1.1//EN\" \"http://www.w3.org/TR/xhtml-basic/xhtml-basic11.dtd\">',\n    'mobile': '<!DOCTYPE html PUBLIC \"-//WAPFORUM//DTD XHTML Mobile 1.2//EN\" \"http://www.openmobilealliance.org/tech/DTD/xhtml-mobile12.dtd\">',\n    'ce': '<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"ce-html-1.0-transitional.dtd\">'\n  };\n\n  elements = {\n    regular: 'a abbr address article aside audio b bdi bdo blockquote body button\\\n canvas caption cite code colgroup datalist dd del details dfn div dl dt em\\\n fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hgroup\\\n html i iframe ins kbd label legend li map mark menu meter nav noscript object\\\n ol optgroup option output p pre progress q rp rt ruby s samp section\\\n select small span strong sub summary sup table tbody td textarea tfoot\\\n th thead time title tr u ul video',\n    raw: 'script style',\n    \"void\": 'area base br col command embed hr img input keygen link meta param\\\n source track wbr',\n    obsolete: 'applet acronym bgsound dir frameset noframes isindex listing\\\n nextid noembed plaintext rb strike xmp big blink center font marquee multicol\\\n nobr spacer tt',\n    obsolete_void: 'basefont frame'\n  };\n\n  merge_elements = function() {\n    var a, args, element, result, _i, _j, _len, _len1, _ref;\n    args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n    result = [];\n    for (_i = 0, _len = args.length; _i < _len; _i++) {\n      a = args[_i];\n      _ref = elements[a].split(' ');\n      for (_j = 0, _len1 = _ref.length; _j < _len1; _j++) {\n        element = _ref[_j];\n        if (__indexOf.call(result, element) < 0) {\n          result.push(element);\n        }\n      }\n    }\n    return result;\n  };\n\n  Teacup = (function() {\n    function Teacup() {\n      this.htmlOut = null;\n    }\n\n    Teacup.prototype.resetBuffer = function(html) {\n      var previous;\n      if (html == null) {\n        html = null;\n      }\n      previous = this.htmlOut;\n      this.htmlOut = html;\n      return previous;\n    };\n\n    Teacup.prototype.render = function() {\n      var args, previous, result, template;\n      template = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n      previous = this.resetBuffer('');\n      try {\n        template.apply(null, args);\n      } finally {\n        result = this.resetBuffer(previous);\n      }\n      return result;\n    };\n\n    Teacup.prototype.cede = function() {\n      var args;\n      args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n      return this.render.apply(this, args);\n    };\n\n    Teacup.prototype.renderable = function(template) {\n      var teacup;\n      teacup = this;\n      return function() {\n        var args, result;\n        args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n        if (teacup.htmlOut === null) {\n          teacup.htmlOut = '';\n          try {\n            template.apply(this, args);\n          } finally {\n            result = teacup.resetBuffer();\n          }\n          return result;\n        } else {\n          return template.apply(this, args);\n        }\n      };\n    };\n\n    Teacup.prototype.renderAttr = function(name, value) {\n      var k, v;\n      if (value == null) {\n        return \" \" + name;\n      }\n      if (value === false) {\n        return '';\n      }\n      if (name === 'data' && typeof value === 'object') {\n        return ((function() {\n          var _results;\n          _results = [];\n          for (k in value) {\n            v = value[k];\n            _results.push(this.renderAttr(\"data-\" + k, v));\n          }\n          return _results;\n        }).call(this)).join('');\n      }\n      if (value === true) {\n        value = name;\n      }\n      return \" \" + name + \"=\" + (this.quote(this.escape(value.toString())));\n    };\n\n    Teacup.prototype.attrOrder = ['id', 'class'];\n\n    Teacup.prototype.renderAttrs = function(obj) {\n      var name, result, value, _i, _len, _ref;\n      result = '';\n      _ref = this.attrOrder;\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        name = _ref[_i];\n        if (!(name in obj)) {\n          continue;\n        }\n        result += this.renderAttr(name, obj[name]);\n        delete obj[name];\n      }\n      for (name in obj) {\n        value = obj[name];\n        result += this.renderAttr(name, value);\n      }\n      return result;\n    };\n\n    Teacup.prototype.renderContents = function(contents) {\n      if (contents == null) {\n\n      } else if (typeof contents === 'function') {\n        return contents.call(this);\n      } else {\n        return this.text(contents);\n      }\n    };\n\n    Teacup.prototype.isSelector = function(string) {\n      var _ref;\n      return string.length > 1 && ((_ref = string[0]) === '#' || _ref === '.');\n    };\n\n    Teacup.prototype.parseSelector = function(selector) {\n      var classes, id, klass, token, _i, _len, _ref, _ref1;\n      id = null;\n      classes = [];\n      _ref = selector.split('.');\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        token = _ref[_i];\n        if (id) {\n          classes.push(token);\n        } else {\n          _ref1 = token.split('#'), klass = _ref1[0], id = _ref1[1];\n          if (klass !== '') {\n            classes.push(token);\n          }\n        }\n      }\n      return {\n        id: id,\n        classes: classes\n      };\n    };\n\n    Teacup.prototype.normalizeArgs = function(args) {\n      var arg, attrs, classes, contents, id, index, selector, _i, _len;\n      attrs = {};\n      selector = null;\n      contents = null;\n      for (index = _i = 0, _len = args.length; _i < _len; index = ++_i) {\n        arg = args[index];\n        if (arg != null) {\n          switch (typeof arg) {\n            case 'string':\n              if (index === 0 && this.isSelector(arg)) {\n                selector = this.parseSelector(arg);\n              } else {\n                contents = arg;\n              }\n              break;\n            case 'function':\n            case 'number':\n            case 'boolean':\n              contents = arg;\n              break;\n            case 'object':\n              if (arg.constructor === Object) {\n                attrs = arg;\n              } else {\n                contents = arg;\n              }\n              break;\n            default:\n              contents = arg;\n          }\n        }\n      }\n      if (selector != null) {\n        id = selector.id, classes = selector.classes;\n        if (id != null) {\n          attrs.id = id;\n        }\n        if (classes != null ? classes.length : void 0) {\n          attrs[\"class\"] = classes.join(' ');\n        }\n      }\n      return {\n        attrs: attrs,\n        contents: contents\n      };\n    };\n\n    Teacup.prototype.tag = function() {\n      var args, attrs, contents, tagName, _ref;\n      tagName = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n      _ref = this.normalizeArgs(args), attrs = _ref.attrs, contents = _ref.contents;\n      this.raw(\"<\" + tagName + (this.renderAttrs(attrs)) + \">\");\n      this.renderContents(contents);\n      return this.raw(\"</\" + tagName + \">\");\n    };\n\n    Teacup.prototype.rawTag = function() {\n      var args, attrs, contents, tagName, _ref;\n      tagName = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n      _ref = this.normalizeArgs(args), attrs = _ref.attrs, contents = _ref.contents;\n      this.raw(\"<\" + tagName + (this.renderAttrs(attrs)) + \">\");\n      this.raw(contents);\n      return this.raw(\"</\" + tagName + \">\");\n    };\n\n    Teacup.prototype.selfClosingTag = function() {\n      var args, attrs, contents, tag, _ref;\n      tag = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n      _ref = this.normalizeArgs(args), attrs = _ref.attrs, contents = _ref.contents;\n      if (contents) {\n        throw new Error(\"Teacup: <\" + tag + \"/> must not have content.  Attempted to nest \" + contents);\n      }\n      return this.raw(\"<\" + tag + (this.renderAttrs(attrs)) + \" />\");\n    };\n\n    Teacup.prototype.coffeescript = function(fn) {\n      return this.raw(\"<script type=\\\"text/javascript\\\">(function() {\\n  var __slice = [].slice,\\n      __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },\\n      __hasProp = {}.hasOwnProperty,\\n      __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\\n  (\" + (fn.toString()) + \")();\\n})();</script>\");\n    };\n\n    Teacup.prototype.comment = function(text) {\n      return this.raw(\"<!--\" + (this.escape(text)) + \"-->\");\n    };\n\n    Teacup.prototype.doctype = function(type) {\n      if (type == null) {\n        type = 5;\n      }\n      return this.raw(doctypes[type]);\n    };\n\n    Teacup.prototype.ie = function(condition, contents) {\n      this.raw(\"<!--[if \" + (this.escape(condition)) + \"]>\");\n      this.renderContents(contents);\n      return this.raw(\"<![endif]-->\");\n    };\n\n    Teacup.prototype.text = function(s) {\n      if (this.htmlOut == null) {\n        throw new Error(\"Teacup: can't call a tag function outside a rendering context\");\n      }\n      return this.htmlOut += (s != null) && this.escape(s.toString()) || '';\n    };\n\n    Teacup.prototype.raw = function(s) {\n      if (s == null) {\n        return;\n      }\n      return this.htmlOut += s;\n    };\n\n    Teacup.prototype.escape = function(text) {\n      return text.toString().replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\n    };\n\n    Teacup.prototype.quote = function(value) {\n      return \"\\\"\" + value + \"\\\"\";\n    };\n\n    Teacup.prototype.tags = function() {\n      var bound, boundMethodNames, method, _fn, _i, _len,\n        _this = this;\n      bound = {};\n      boundMethodNames = [].concat('cede coffeescript comment doctype escape ie raw render renderable script tag text'.split(' '), merge_elements('regular', 'obsolete', 'raw', 'void', 'obsolete_void'));\n      _fn = function(method) {\n        return bound[method] = function() {\n          var args;\n          args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n          return _this[method].apply(_this, args);\n        };\n      };\n      for (_i = 0, _len = boundMethodNames.length; _i < _len; _i++) {\n        method = boundMethodNames[_i];\n        _fn(method);\n      }\n      return bound;\n    };\n\n    return Teacup;\n\n  })();\n\n  _ref = merge_elements('regular', 'obsolete');\n  _fn = function(tagName) {\n    return Teacup.prototype[tagName] = function() {\n      var args;\n      args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n      return this.tag.apply(this, [tagName].concat(__slice.call(args)));\n    };\n  };\n  for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n    tagName = _ref[_i];\n    _fn(tagName);\n  }\n\n  _ref1 = merge_elements('raw');\n  _fn1 = function(tagName) {\n    return Teacup.prototype[tagName] = function() {\n      var args;\n      args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n      return this.rawTag.apply(this, [tagName].concat(__slice.call(args)));\n    };\n  };\n  for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {\n    tagName = _ref1[_j];\n    _fn1(tagName);\n  }\n\n  _ref2 = merge_elements('void', 'obsolete_void');\n  _fn2 = function(tagName) {\n    return Teacup.prototype[tagName] = function() {\n      var args;\n      args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n      return this.selfClosingTag.apply(this, [tagName].concat(__slice.call(args)));\n    };\n  };\n  for (_k = 0, _len2 = _ref2.length; _k < _len2; _k++) {\n    tagName = _ref2[_k];\n    _fn2(tagName);\n  }\n\n  if (typeof module !== \"undefined\" && module !== null ? module.exports : void 0) {\n    module.exports = new Teacup().tags();\n    module.exports.Teacup = Teacup;\n  } else if (typeof define === 'function' && define.amd) {\n    define('teacup', [], function() {\n      return new Teacup().tags();\n    });\n  } else {\n    window.teacup = new Teacup().tags();\n    window.teacup.Teacup = Teacup;\n  }\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/src/components/canvas/Background.js":{"id":60,"canonicalName":"src/components/canvas/Background.js","code":"(function () {\n    var Background, ContainerDrawable, GStimulus, Kinetic, KineticDrawable, _, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Kinetic = require('15', module).Kinetic;\n    GStimulus = require('8', module).GraphicalStimulus;\n    KineticDrawable = require('8', module).KineticDrawable;\n    ContainerDrawable = require('8', module).ContainerDrawable;\n    _ = require('16', module);\n    Background = function (_super) {\n        __extends(Background, _super);\n        function Background(stims, fill) {\n            this.stims = stims != null ? stims : [];\n            this.fill = fill != null ? fill : 'white';\n            Background.__super__.constructor.call(this, {}, {});\n            if (!_.isArray(this.stims)) {\n                this.stims = [this.stims];\n            }\n        }\n        Background.prototype.render = function (context) {\n            var background, drawables, stim, _i, _len, _ref;\n            background = new Kinetic.Rect({\n                x: 0,\n                y: 0,\n                width: context.width(),\n                height: context.height(),\n                name: 'background',\n                fill: this.fill\n            });\n            drawables = [];\n            drawables.push(new KineticDrawable(background));\n            _ref = this.stims;\n            for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n                stim = _ref[_i];\n                drawables.push(stim.render(context));\n            }\n            return new ContainerDrawable(drawables);\n        };\n        return Background;\n    }(GStimulus);\n    exports.Background = Background;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"src/components/canvas/Background.js\"],\"names\":[\"Background\",\"ContainerDrawable\",\"GStimulus\",\"Kinetic\",\"KineticDrawable\",\"_\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"GraphicalStimulus\",\"_super\",\"stims\",\"fill\",\"isArray\",\"render\",\"context\",\"background\",\"drawables\",\"stim\",\"_i\",\"_len\",\"_ref\",\"Rect\",\"x\",\"y\",\"width\",\"height\",\"name\",\"push\",\"length\",\"exports\"],\"mappings\":\"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\"}","lineCount":52,"mtime":1393111728000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/src/stimresp.js","canonicalName":"src/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"// Generated by CoffeeScript 1.7.1\n(function() {\n  var Background, ContainerDrawable, GStimulus, Kinetic, KineticDrawable, _,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Kinetic = require(\"../../../jslibs/kinetic\").Kinetic;\n\n  GStimulus = require(\"../../stimresp\").GraphicalStimulus;\n\n  KineticDrawable = require(\"../../stimresp\").KineticDrawable;\n\n  ContainerDrawable = require(\"../../stimresp\").ContainerDrawable;\n\n  _ = require(\"lodash\");\n\n  Background = (function(_super) {\n    __extends(Background, _super);\n\n    function Background(stims, fill) {\n      this.stims = stims != null ? stims : [];\n      this.fill = fill != null ? fill : \"white\";\n      Background.__super__.constructor.call(this, {}, {});\n      if (!_.isArray(this.stims)) {\n        this.stims = [this.stims];\n      }\n    }\n\n    Background.prototype.render = function(context) {\n      var background, drawables, stim, _i, _len, _ref;\n      background = new Kinetic.Rect({\n        x: 0,\n        y: 0,\n        width: context.width(),\n        height: context.height(),\n        name: 'background',\n        fill: this.fill\n      });\n      drawables = [];\n      drawables.push(new KineticDrawable(background));\n      _ref = this.stims;\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        stim = _ref[_i];\n        drawables.push(stim.render(context));\n      }\n      return new ContainerDrawable(drawables);\n    };\n\n    return Background;\n\n  })(GStimulus);\n\n  exports.Background = Background;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/node_modules/powerbuild/node_modules/browser-builtins/builtin/timers.js":{"id":62,"canonicalName":"node_modules/powerbuild/node_modules/browser-builtins/builtin/timers.js","code":"try {\n    if (!setTimeout.call) {\n        var slicer = Array.prototype.slice;\n        exports.setTimeout = function (fn) {\n            var args = slicer.call(arguments, 1);\n            return setTimeout(function () {\n                return fn.apply(this, args);\n            });\n        };\n        exports.setInterval = function (fn) {\n            var args = slicer.call(arguments, 1);\n            return setInterval(function () {\n                return fn.apply(this, args);\n            });\n        };\n    } else {\n        exports.setTimeout = setTimeout;\n        exports.setInterval = setInterval;\n    }\n    exports.clearTimeout = clearTimeout;\n    exports.clearInterval = clearInterval;\n    if (window.setImmediate) {\n        exports.setImmediate = window.setImmediate;\n        exports.clearImmediate = window.clearImmediate;\n    }\n    exports.setTimeout(function () {\n    });\n} catch (_) {\n    function bind(f, context) {\n        return function () {\n            return f.apply(context, arguments);\n        };\n    }\n    if (typeof window !== 'undefined') {\n        exports.setTimeout = bind(setTimeout, window);\n        exports.setInterval = bind(setInterval, window);\n        exports.clearTimeout = bind(clearTimeout, window);\n        exports.clearInterval = bind(clearInterval, window);\n        if (window.setImmediate) {\n            exports.setImmediate = bind(window.setImmediate, window);\n            exports.clearImmediate = bind(window.clearImmediate, window);\n        }\n    } else {\n        if (typeof setTimeout !== 'undefined') {\n            exports.setTimeout = setTimeout;\n        }\n        if (typeof setInterval !== 'undefined') {\n            exports.setInterval = setInterval;\n        }\n        if (typeof clearTimeout !== 'undefined') {\n            exports.clearTimeout = clearTimeout;\n        }\n        if (typeof clearInterval === 'function') {\n            exports.clearInterval = clearInterval;\n        }\n    }\n}\nexports.unref = function unref() {\n};\nexports.ref = function ref() {\n};\nif (!exports.setImmediate) {\n    var currentKey = 0, queue = {}, active = false;\n    exports.setImmediate = function () {\n        function drain() {\n            active = false;\n            for (var key in queue) {\n                if (queue.hasOwnProperty(currentKey, key)) {\n                    var fn = queue[key];\n                    delete queue[key];\n                    fn();\n                }\n            }\n        }\n        if (typeof window !== 'undefined' && window.postMessage && window.addEventListener) {\n            window.addEventListener('message', function (ev) {\n                if (ev.source === window && ev.data === 'browserify-tick') {\n                    ev.stopPropagation();\n                    drain();\n                }\n            }, true);\n            return function setImmediate(fn) {\n                var id = ++currentKey;\n                queue[id] = fn;\n                if (!active) {\n                    active = true;\n                    window.postMessage('browserify-tick', '*');\n                }\n                return id;\n            };\n        } else {\n            return function setImmediate(fn) {\n                var id = ++currentKey;\n                queue[id] = fn;\n                if (!active) {\n                    active = true;\n                    setTimeout(drain, 0);\n                }\n                return id;\n            };\n        }\n    }();\n    exports.clearImmediate = function clearImmediate(id) {\n        delete queue[id];\n    };\n}","map":"{\"version\":3,\"sources\":[\"node_modules/powerbuild/node_modules/browser-builtins/builtin/timers.js\"],\"names\":[\"setTimeout\",\"call\",\"slicer\",\"Array\",\"prototype\",\"slice\",\"exports\",\"fn\",\"args\",\"arguments\",\"apply\",\"setInterval\",\"clearTimeout\",\"clearInterval\",\"window\",\"setImmediate\",\"clearImmediate\",\"_\",\"bind\",\"f\",\"context\",\"unref\",\"ref\",\"currentKey\",\"queue\",\"active\",\"drain\",\"key\",\"hasOwnProperty\",\"postMessage\",\"addEventListener\",\"ev\",\"source\",\"data\",\"stopPropagation\",\"id\"],\"mappings\":\"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\"}","lineCount":106,"mtime":1379366460000,"deps":[],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":true,"isCoreModule":true,"realCanonicalName":null,"src":"try {\n    // Old IE browsers that do not curry arguments\n    if (!setTimeout.call) {\n        var slicer = Array.prototype.slice;\n        exports.setTimeout = function(fn) {\n            var args = slicer.call(arguments, 1);\n            return setTimeout(function() {\n                return fn.apply(this, args);\n            })\n        };\n\n        exports.setInterval = function(fn) {\n            var args = slicer.call(arguments, 1);\n            return setInterval(function() {\n                return fn.apply(this, args);\n            });\n        };\n    } else {\n        exports.setTimeout = setTimeout;\n        exports.setInterval = setInterval;\n    }\n    exports.clearTimeout = clearTimeout;\n    exports.clearInterval = clearInterval;\n\n    if (window.setImmediate) {\n      exports.setImmediate = window.setImmediate;\n      exports.clearImmediate = window.clearImmediate;\n    }\n\n    // Chrome and PhantomJS seems to depend on `this` pseudo variable being a\n    // `window` and throws invalid invocation exception otherwise. If this code\n    // runs in such JS runtime next line will throw and `catch` clause will\n    // exported timers functions bound to a window.\n    exports.setTimeout(function() {});\n} catch (_) {\n    function bind(f, context) {\n        return function () { return f.apply(context, arguments) };\n    }\n\n    if (typeof window !== 'undefined') {\n      exports.setTimeout = bind(setTimeout, window);\n      exports.setInterval = bind(setInterval, window);\n      exports.clearTimeout = bind(clearTimeout, window);\n      exports.clearInterval = bind(clearInterval, window);\n      if (window.setImmediate) {\n        exports.setImmediate = bind(window.setImmediate, window);\n        exports.clearImmediate = bind(window.clearImmediate, window);\n      }\n    } else {\n      if (typeof setTimeout !== 'undefined') {\n        exports.setTimeout = setTimeout;\n      }\n      if (typeof setInterval !== 'undefined') {\n        exports.setInterval = setInterval;\n      }\n      if (typeof clearTimeout !== 'undefined') {\n        exports.clearTimeout = clearTimeout;\n      }\n      if (typeof clearInterval === 'function') {\n        exports.clearInterval = clearInterval;\n      }\n    }\n}\n\nexports.unref = function unref() {};\nexports.ref = function ref() {};\n\nif (!exports.setImmediate) {\n  var currentKey = 0, queue = {}, active = false;\n\n  exports.setImmediate = (function () {\n      function drain() {\n        active = false;\n        for (var key in queue) {\n          if (queue.hasOwnProperty(currentKey, key)) {\n            var fn = queue[key];\n            delete queue[key];\n            fn();\n          }\n        }\n      }\n\n      if (typeof window !== 'undefined' &&\n          window.postMessage && window.addEventListener) {\n        window.addEventListener('message', function (ev) {\n          if (ev.source === window && ev.data === 'browserify-tick') {\n            ev.stopPropagation();\n            drain();\n          }\n        }, true);\n\n        return function setImmediate(fn) {\n          var id = ++currentKey;\n          queue[id] = fn;\n          if (!active) {\n            active = true;\n            window.postMessage('browserify-tick', '*');\n          }\n          return id;\n        };\n      } else {\n        return function setImmediate(fn) {\n          var id = ++currentKey;\n          queue[id] = fn;\n          if (!active) {\n            active = true;\n            setTimeout(drain, 0);\n          }\n          return id;\n        };\n      }\n  })();\n\n  exports.clearImmediate = function clearImmediate(id) {\n    delete queue[id];\n  };\n}\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/node_modules/powerbuild/node_modules/browser-builtins/node_modules/console-browserify/index.js":{"id":63,"canonicalName":"node_modules/powerbuild/node_modules/browser-builtins/node_modules/console-browserify/index.js","code":"var util = require('util');\nvar assert = require('assert');\nvar slice = Array.prototype.slice;\nvar console;\nvar times = {};\nif (typeof global !== 'undefined' && global.console) {\n    console = global.console;\n} else if (typeof window !== 'undefined' && window.console) {\n    console = window.console;\n} else {\n    console = {};\n}\nvar functions = [\n        [\n            log,\n            'log'\n        ],\n        [\n            info,\n            'info'\n        ],\n        [\n            warn,\n            'warn'\n        ],\n        [\n            error,\n            'error'\n        ],\n        [\n            time,\n            'time'\n        ],\n        [\n            timeEnd,\n            'timeEnd'\n        ],\n        [\n            trace,\n            'trace'\n        ],\n        [\n            dir,\n            'dir'\n        ],\n        [\n            assert,\n            'assert'\n        ]\n    ];\nfor (var i = 0; i < functions.length; i++) {\n    var tuple = functions[i];\n    var f = tuple[0];\n    var name = tuple[1];\n    if (!console[name]) {\n        console[name] = f;\n    }\n}\nmodule.exports = console;\nfunction log() {\n}\nfunction info() {\n    console.log.apply(console, arguments);\n}\nfunction warn() {\n    console.log.apply(console, arguments);\n}\nfunction error() {\n    console.warn.apply(console, arguments);\n}\nfunction time(label) {\n    times[label] = Date.now();\n}\nfunction timeEnd(label) {\n    var time = times[label];\n    if (!time) {\n        throw new Error('No such label: ' + label);\n    }\n    var duration = Date.now() - time;\n    console.log(label + ': ' + duration + 'ms');\n}\nfunction trace() {\n    var err = new Error();\n    err.name = 'Trace';\n    err.message = util.format.apply(null, arguments);\n    console.error(err.stack);\n}\nfunction dir(object) {\n    console.log(util.inspect(object) + '\\n');\n}\nfunction assert(expression) {\n    if (!expression) {\n        var arr = slice.call(arguments, 1);\n        assert.ok(false, util.format.apply(null, arr));\n    }\n}","map":"{\"version\":3,\"sources\":[\"node_modules/powerbuild/node_modules/browser-builtins/node_modules/console-browserify/index.js\"],\"names\":[\"util\",\"require\",\"assert\",\"slice\",\"Array\",\"prototype\",\"console\",\"times\",\"global\",\"window\",\"functions\",\"log\",\"info\",\"warn\",\"error\",\"time\",\"timeEnd\",\"trace\",\"dir\",\"i\",\"length\",\"tuple\",\"f\",\"name\",\"module\",\"exports\",\"apply\",\"arguments\",\"label\",\"Date\",\"now\",\"Error\",\"duration\",\"err\",\"message\",\"format\",\"stack\",\"object\",\"inspect\",\"expression\",\"arr\",\"call\",\"ok\"],\"mappings\":\"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\"}","lineCount":96,"mtime":1386959597000,"deps":[],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":true,"isCoreModule":true,"realCanonicalName":null,"src":"/*global window, global*/\nvar util = require(\"util\")\nvar assert = require(\"assert\")\n\nvar slice = Array.prototype.slice\nvar console\nvar times = {}\n\nif (typeof global !== \"undefined\" && global.console) {\n    console = global.console\n} else if (typeof window !== \"undefined\" && window.console) {\n    console = window.console\n} else {\n    console = {}\n}\n\nvar functions = [\n    [log, \"log\"]\n    , [info, \"info\"]\n    , [warn, \"warn\"]\n    , [error, \"error\"]\n    , [time, \"time\"]\n    , [timeEnd, \"timeEnd\"]\n    , [trace, \"trace\"]\n    , [dir, \"dir\"]\n    , [assert, \"assert\"]\n]\n\nfor (var i = 0; i < functions.length; i++) {\n    var tuple = functions[i]\n    var f = tuple[0]\n    var name = tuple[1]\n\n    if (!console[name]) {\n        console[name] = f\n    }\n}\n\nmodule.exports = console\n\nfunction log() {}\n\nfunction info() {\n    console.log.apply(console, arguments)\n}\n\nfunction warn() {\n    console.log.apply(console, arguments)\n}\n\nfunction error() {\n    console.warn.apply(console, arguments)\n}\n\nfunction time(label) {\n    times[label] = Date.now()\n}\n\nfunction timeEnd(label) {\n    var time = times[label]\n    if (!time) {\n        throw new Error(\"No such label: \" + label)\n    }\n\n    var duration = Date.now() - time\n    console.log(label + \": \" + duration + \"ms\")\n}\n\nfunction trace() {\n    var err = new Error()\n    err.name = \"Trace\"\n    err.message = util.format.apply(null, arguments)\n    console.error(err.stack)\n}\n\nfunction dir(object) {\n    console.log(util.inspect(object) + \"\\n\")\n}\n\nfunction assert(expression) {\n    if (!expression) {\n        var arr = slice.call(arguments, 1)\n        assert.ok(false, util.format.apply(null, arr))\n    }\n}\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/main.js":{"id":65,"canonicalName":"lib/main.js","code":"(function () {\n    var Dots, Exp, Kinetic, Psy, Q, canvas, components, csv, datatable, design, factory, html, include, layout, lib, libs, match, samplers, stimresp, utils, _, _i, _len;\n    Exp = require('66', module);\n    Psy = require('67', module);\n    Dots = require('68', module);\n    utils = require('69', module);\n    datatable = require('70', module);\n    samplers = require('71', module);\n    stimresp = require('72', module);\n    layout = require('73', module);\n    design = require('74', module);\n    canvas = require('75', module);\n    html = require('76', module);\n    components = require('77', module);\n    factory = require('78', module);\n    Kinetic = require('15', module).Kinetic;\n    _ = require('16', module);\n    Q = require('17', module);\n    csv = require('18', module);\n    match = require('19', module).match;\n    include = function (lib) {\n        var key, value, _results;\n        _results = [];\n        for (key in lib) {\n            value = lib[key];\n            _results.push(exports[key] = value);\n        }\n        return _results;\n    };\n    libs = [\n        Exp,\n        Psy,\n        Dots,\n        utils,\n        datatable,\n        samplers,\n        stimresp,\n        layout,\n        design,\n        canvas,\n        html,\n        components,\n        factory,\n        match\n    ];\n    for (_i = 0, _len = libs.length; _i < _len; _i++) {\n        lib = libs[_i];\n        include(lib);\n    }\n    exports.Q = Q;\n    exports._ = _;\n    exports.Kinetic = Kinetic;\n    exports.csv = csv;\n    exports.match = match;\n    if (!String.prototype.trim) {\n        String.prototype.trim = function () {\n            return this.replace(/^\\s+|\\s+$/g, '');\n        };\n    }\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/main.js\"],\"names\":[\"Dots\",\"Exp\",\"Kinetic\",\"Psy\",\"Q\",\"canvas\",\"components\",\"csv\",\"datatable\",\"design\",\"factory\",\"html\",\"include\",\"layout\",\"lib\",\"libs\",\"match\",\"samplers\",\"stimresp\",\"utils\",\"_\",\"_i\",\"_len\",\"require\",\"key\",\"value\",\"_results\",\"push\",\"exports\",\"length\",\"String\",\"prototype\",\"trim\",\"replace\",\"call\"],\"mappings\":\"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\"}","lineCount":60,"mtime":1395245873000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/lib/elements.js","canonicalName":"lib/elements.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/psycloud.js","canonicalName":"lib/psycloud.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/dotmotion.js","canonicalName":"lib/dotmotion.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/utils.js","canonicalName":"lib/utils.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/datatable.js","canonicalName":"lib/datatable.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/samplers.js","canonicalName":"lib/samplers.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/layout.js","canonicalName":"lib/layout.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/design.js","canonicalName":"lib/design.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/canvas.js","canonicalName":"lib/components/canvas/canvas.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/html/html.js","canonicalName":"lib/components/html/html.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/components.js","canonicalName":"lib/components/components.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/factory.js","canonicalName":"lib/factory.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/q/q.js","canonicalName":"node_modules/q/q.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/jquery.csv.js","canonicalName":"jslibs/jquery.csv.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/coffee-pattern/pattern.js","canonicalName":"node_modules/coffee-pattern/pattern.js","isNpmModule":true,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"realCanonicalName":null,"src":"(function() {\n  var Dots, Exp, Kinetic, Psy, Q, canvas, components, csv, datatable, design, factory, html, include, layout, lib, libs, match, samplers, stimresp, utils, _, _i, _len;\n\n  Exp = require(\"./elements\");\n\n  Psy = require(\"./psycloud\");\n\n  Dots = require(\"./dotmotion\");\n\n  utils = require(\"./utils\");\n\n  datatable = require(\"./datatable\");\n\n  samplers = require(\"./samplers\");\n\n  stimresp = require(\"./stimresp\");\n\n  layout = require(\"./layout\");\n\n  design = require(\"./design\");\n\n  canvas = require(\"./components/canvas/canvas\");\n\n  html = require(\"./components/html/html\");\n\n  components = require(\"./components/components\");\n\n  factory = require(\"./factory\");\n\n  Kinetic = require(\"../jslibs/kinetic\").Kinetic;\n\n  _ = require('lodash');\n\n  Q = require(\"q\");\n\n  csv = require('../jslibs/jquery.csv.js');\n\n  match = require(\"coffee-pattern\").match;\n\n  include = function(lib) {\n    var key, value, _results;\n    _results = [];\n    for (key in lib) {\n      value = lib[key];\n      _results.push(exports[key] = value);\n    }\n    return _results;\n  };\n\n  libs = [Exp, Psy, Dots, utils, datatable, samplers, stimresp, layout, design, canvas, html, components, factory, match];\n\n  for (_i = 0, _len = libs.length; _i < _len; _i++) {\n    lib = libs[_i];\n    include(lib);\n  }\n\n  exports.Q = Q;\n\n  exports._ = _;\n\n  exports.Kinetic = Kinetic;\n\n  exports.csv = csv;\n\n  exports.match = match;\n\n  if (!String.prototype.trim) {\n    String.prototype.trim = function() {\n      return this.replace(/^\\s+|\\s+$/g, '');\n    };\n  }\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/factory.js":{"id":78,"canonicalName":"lib/factory.js","code":"(function () {\n    var Canvas, ComponentFactory, Components, DefaultComponentFactory, Html, Layout, Psy, _, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    _ = require('16', module);\n    Canvas = require('75', module).Canvas;\n    Html = require('76', module).Html;\n    Components = require('77', module);\n    Psy = require('67', module);\n    Layout = require('73', module);\n    ComponentFactory = function () {\n        function ComponentFactory(context) {\n            this.context = context;\n        }\n        ComponentFactory.prototype.buildStimulus = function (spec) {\n            var params, stimType;\n            stimType = _.keys(spec)[0];\n            params = _.values(spec)[0];\n            return this.makeStimulus(stimType, params);\n        };\n        ComponentFactory.prototype.buildResponse = function (spec) {\n            var params, responseType;\n            responseType = _.keys(spec)[0];\n            params = _.values(spec)[0];\n            return this.makeResponse(responseType, params);\n        };\n        ComponentFactory.prototype.buildEvent = function (spec) {\n            var response, responseSpec, stim, stimSpec;\n            if (spec.Next == null) {\n                console.log('error building event with spec: ', spec);\n                throw new Error('Event specification does not contain \\'Next\\' element');\n            }\n            stimSpec = _.omit(spec, 'Next');\n            responseSpec = _.pick(spec, 'Next');\n            stim = this.buildStimulus(stimSpec);\n            response = this.buildResponse(responseSpec.Next);\n            return this.makeEvent(stim, response);\n        };\n        ComponentFactory.prototype.make = function (name, params, registry) {\n            throw new Error('unimplemented', name, params, registry);\n        };\n        ComponentFactory.prototype.makeStimulus = function (name, params) {\n            throw new Error('unimplemented', name, params);\n        };\n        ComponentFactory.prototype.makeResponse = function (name, params) {\n            throw new Error('unimplemented', name, params);\n        };\n        ComponentFactory.prototype.makeEvent = function (stim, response) {\n            throw new Error('unimplemented', stim, response);\n        };\n        ComponentFactory.prototype.makeLayout = function (name, params, context) {\n            throw new Error('unimplemented', name, params, context);\n        };\n        return ComponentFactory;\n    }();\n    exports.ComponentFactory = ComponentFactory;\n    DefaultComponentFactory = function (_super) {\n        __extends(DefaultComponentFactory, _super);\n        function DefaultComponentFactory() {\n            this.registry = _.merge(Components, Canvas, Html);\n        }\n        DefaultComponentFactory.prototype.make = function (name, params, registry) {\n            var callee, layoutName, layoutParams, names, props, resps, stims, _i, _j, _k, _l, _ref, _ref1, _ref2, _ref3, _results, _results1, _results2, _results3;\n            callee = arguments.callee;\n            console.log('making', name);\n            switch (name) {\n            case 'Group':\n                console.log('building group');\n                names = _.map(params.stims, function (stim) {\n                    return _.keys(stim)[0];\n                });\n                props = _.map(params.stims, function (stim) {\n                    return _.values(stim)[0];\n                });\n                stims = _.map(function () {\n                    _results = [];\n                    for (var _i = 0, _ref = names.length; 0 <= _ref ? _i < _ref : _i > _ref; 0 <= _ref ? _i++ : _i--) {\n                        _results.push(_i);\n                    }\n                    return _results;\n                }.apply(this), function (_this) {\n                    return function (i) {\n                        return callee(names[i], props[i], _this.registry);\n                    };\n                }(this));\n                if (params.layout != null) {\n                    layoutName = _.keys(params.layout)[0];\n                    layoutParams = _.values(params.layout)[0];\n                    return new Components.Group(stims, this.makeLayout(layoutName, layoutParams, context));\n                } else {\n                    return new Components.Group(stims);\n                }\n                break;\n            case 'Grid':\n                names = _.map(params.stims, function (stim) {\n                    return _.keys(stim)[0];\n                });\n                props = _.map(params.stims, function (stim) {\n                    return _.values(stim)[0];\n                });\n                stims = _.map(function () {\n                    _results1 = [];\n                    for (var _j = 0, _ref1 = names.length; 0 <= _ref1 ? _j < _ref1 : _j > _ref1; 0 <= _ref1 ? _j++ : _j--) {\n                        _results1.push(_j);\n                    }\n                    return _results1;\n                }.apply(this), function (_this) {\n                    return function (i) {\n                        return callee(names[i], props[i], _this.registry);\n                    };\n                }(this));\n                return new Components.Grid(stims, params.rows || 3, params.columns || 3, params.bounds || null);\n            case 'Background':\n                console.log('building background', params);\n                names = _.keys(params);\n                props = _.values(params);\n                console.log('names', names);\n                console.log('props', props);\n                stims = _.map(function () {\n                    _results2 = [];\n                    for (var _k = 0, _ref2 = names.length; 0 <= _ref2 ? _k < _ref2 : _k > _ref2; 0 <= _ref2 ? _k++ : _k--) {\n                        _results2.push(_k);\n                    }\n                    return _results2;\n                }.apply(this), function (_this) {\n                    return function (i) {\n                        return callee(names[i], props[i], _this.registry);\n                    };\n                }(this));\n                return new Canvas.Background(stims);\n            case 'First':\n                names = _.keys(params);\n                props = _.values(params);\n                resps = _.map(function () {\n                    _results3 = [];\n                    for (var _l = 0, _ref3 = names.length; 0 <= _ref3 ? _l < _ref3 : _l > _ref3; 0 <= _ref3 ? _l++ : _l--) {\n                        _results3.push(_l);\n                    }\n                    return _results3;\n                }.apply(this), function (_this) {\n                    return function (i) {\n                        return callee(names[i], props[i], _this.registry);\n                    };\n                }(this));\n                return new Components.First(resps);\n            default:\n                if (registry[name] == null) {\n                    console.log('registry is', registry);\n                    throw new Error('DefaultComponentFactory:make cannot find component in registry named: ', name);\n                }\n                return new registry[name](params);\n            }\n        };\n        DefaultComponentFactory.prototype.makeStimulus = function (name, params) {\n            return this.make(name, params, this.registry);\n        };\n        DefaultComponentFactory.prototype.makeResponse = function (name, params) {\n            return this.make(name, params, this.registry);\n        };\n        DefaultComponentFactory.prototype.makeEvent = function (stim, response) {\n            return new Psy.Event(stim, response);\n        };\n        DefaultComponentFactory.prototype.makeLayout = function (name, params, context) {\n            switch (name) {\n            case 'Grid':\n                return new Layout.GridLayout(params[0], params[1], {\n                    x: 0,\n                    y: 0,\n                    width: context.width(),\n                    height: context.height()\n                });\n            default:\n                return console.log('unrecognized layout', name);\n            }\n        };\n        return DefaultComponentFactory;\n    }(ComponentFactory);\n    exports.DefaultComponentFactory = DefaultComponentFactory;\n    exports.componentFactory = new DefaultComponentFactory();\n    console.log('exports.DefaultComponentFactory', DefaultComponentFactory);\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/factory.js\"],\"names\":[\"Canvas\",\"ComponentFactory\",\"Components\",\"DefaultComponentFactory\",\"Html\",\"Layout\",\"Psy\",\"_\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"context\",\"buildStimulus\",\"spec\",\"params\",\"stimType\",\"keys\",\"values\",\"makeStimulus\",\"buildResponse\",\"responseType\",\"makeResponse\",\"buildEvent\",\"response\",\"responseSpec\",\"stim\",\"stimSpec\",\"Next\",\"console\",\"log\",\"Error\",\"omit\",\"pick\",\"makeEvent\",\"make\",\"name\",\"registry\",\"makeLayout\",\"exports\",\"_super\",\"merge\",\"callee\",\"layoutName\",\"layoutParams\",\"names\",\"props\",\"resps\",\"stims\",\"_i\",\"_j\",\"_k\",\"_l\",\"_ref\",\"_ref1\",\"_ref2\",\"_ref3\",\"_results\",\"_results1\",\"_results2\",\"_results3\",\"arguments\",\"map\",\"length\",\"push\",\"apply\",\"_this\",\"i\",\"layout\",\"Group\",\"Grid\",\"rows\",\"columns\",\"bounds\",\"Background\",\"First\",\"Event\",\"GridLayout\",\"x\",\"y\",\"width\",\"height\",\"componentFactory\"],\"mappings\":\"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\"}","lineCount":191,"mtime":1395245873000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/canvas.js","canonicalName":"lib/components/canvas/canvas.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/html/html.js","canonicalName":"lib/components/html/html.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/components.js","canonicalName":"lib/components/components.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/psycloud.js","canonicalName":"lib/psycloud.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/layout.js","canonicalName":"lib/layout.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false,"console":"/Users/brad/WebstormProjects/psycloud/node_modules/powerbuild/node_modules/browser-builtins/node_modules/console-browserify/index.js"},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var Canvas, ComponentFactory, Components, DefaultComponentFactory, Html, Layout, Psy, _,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  _ = require('lodash');\n\n  Canvas = require(\"./components/canvas/canvas\").Canvas;\n\n  Html = require(\"./components/html/html\").Html;\n\n  Components = require(\"./components/components\");\n\n  Psy = require(\"./psycloud\");\n\n  Layout = require(\"./layout\");\n\n  ComponentFactory = (function() {\n    function ComponentFactory(context) {\n      this.context = context;\n    }\n\n    ComponentFactory.prototype.buildStimulus = function(spec) {\n      var params, stimType;\n      stimType = _.keys(spec)[0];\n      params = _.values(spec)[0];\n      return this.makeStimulus(stimType, params);\n    };\n\n    ComponentFactory.prototype.buildResponse = function(spec) {\n      var params, responseType;\n      responseType = _.keys(spec)[0];\n      params = _.values(spec)[0];\n      return this.makeResponse(responseType, params);\n    };\n\n    ComponentFactory.prototype.buildEvent = function(spec) {\n      var response, responseSpec, stim, stimSpec;\n      if (spec.Next == null) {\n        console.log(\"error building event with spec: \", spec);\n        throw new Error(\"Event specification does not contain 'Next' element\");\n      }\n      stimSpec = _.omit(spec, \"Next\");\n      responseSpec = _.pick(spec, \"Next\");\n      stim = this.buildStimulus(stimSpec);\n      response = this.buildResponse(responseSpec.Next);\n      return this.makeEvent(stim, response);\n    };\n\n    ComponentFactory.prototype.make = function(name, params, registry) {\n      throw new Error(\"unimplemented\", name, params, registry);\n    };\n\n    ComponentFactory.prototype.makeStimulus = function(name, params) {\n      throw new Error(\"unimplemented\", name, params);\n    };\n\n    ComponentFactory.prototype.makeResponse = function(name, params) {\n      throw new Error(\"unimplemented\", name, params);\n    };\n\n    ComponentFactory.prototype.makeEvent = function(stim, response) {\n      throw new Error(\"unimplemented\", stim, response);\n    };\n\n    ComponentFactory.prototype.makeLayout = function(name, params, context) {\n      throw new Error(\"unimplemented\", name, params, context);\n    };\n\n    return ComponentFactory;\n\n  })();\n\n  exports.ComponentFactory = ComponentFactory;\n\n  DefaultComponentFactory = (function(_super) {\n    __extends(DefaultComponentFactory, _super);\n\n    function DefaultComponentFactory() {\n      this.registry = _.merge(Components, Canvas, Html);\n    }\n\n    DefaultComponentFactory.prototype.make = function(name, params, registry) {\n      var callee, layoutName, layoutParams, names, props, resps, stims, _i, _j, _k, _l, _ref, _ref1, _ref2, _ref3, _results, _results1, _results2, _results3;\n      callee = arguments.callee;\n      console.log(\"making\", name);\n      switch (name) {\n        case \"Group\":\n          console.log(\"building group\");\n          names = _.map(params.stims, function(stim) {\n            return _.keys(stim)[0];\n          });\n          props = _.map(params.stims, function(stim) {\n            return _.values(stim)[0];\n          });\n          stims = _.map((function() {\n            _results = [];\n            for (var _i = 0, _ref = names.length; 0 <= _ref ? _i < _ref : _i > _ref; 0 <= _ref ? _i++ : _i--){ _results.push(_i); }\n            return _results;\n          }).apply(this), (function(_this) {\n            return function(i) {\n              return callee(names[i], props[i], _this.registry);\n            };\n          })(this));\n          if (params.layout != null) {\n            layoutName = _.keys(params.layout)[0];\n            layoutParams = _.values(params.layout)[0];\n            return new Components.Group(stims, this.makeLayout(layoutName, layoutParams, context));\n          } else {\n            return new Components.Group(stims);\n          }\n          break;\n        case \"Grid\":\n          names = _.map(params.stims, function(stim) {\n            return _.keys(stim)[0];\n          });\n          props = _.map(params.stims, function(stim) {\n            return _.values(stim)[0];\n          });\n          stims = _.map((function() {\n            _results1 = [];\n            for (var _j = 0, _ref1 = names.length; 0 <= _ref1 ? _j < _ref1 : _j > _ref1; 0 <= _ref1 ? _j++ : _j--){ _results1.push(_j); }\n            return _results1;\n          }).apply(this), (function(_this) {\n            return function(i) {\n              return callee(names[i], props[i], _this.registry);\n            };\n          })(this));\n          return new Components.Grid(stims, params.rows || 3, params.columns || 3, params.bounds || null);\n        case \"Background\":\n          console.log(\"building background\", params);\n          names = _.keys(params);\n          props = _.values(params);\n          console.log(\"names\", names);\n          console.log(\"props\", props);\n          stims = _.map((function() {\n            _results2 = [];\n            for (var _k = 0, _ref2 = names.length; 0 <= _ref2 ? _k < _ref2 : _k > _ref2; 0 <= _ref2 ? _k++ : _k--){ _results2.push(_k); }\n            return _results2;\n          }).apply(this), (function(_this) {\n            return function(i) {\n              return callee(names[i], props[i], _this.registry);\n            };\n          })(this));\n          return new Canvas.Background(stims);\n        case \"First\":\n          names = _.keys(params);\n          props = _.values(params);\n          resps = _.map((function() {\n            _results3 = [];\n            for (var _l = 0, _ref3 = names.length; 0 <= _ref3 ? _l < _ref3 : _l > _ref3; 0 <= _ref3 ? _l++ : _l--){ _results3.push(_l); }\n            return _results3;\n          }).apply(this), (function(_this) {\n            return function(i) {\n              return callee(names[i], props[i], _this.registry);\n            };\n          })(this));\n          return new Components.First(resps);\n        default:\n          if (registry[name] == null) {\n            console.log(\"registry is\", registry);\n            throw new Error(\"DefaultComponentFactory:make cannot find component in registry named: \", name);\n          }\n          return new registry[name](params);\n      }\n    };\n\n    DefaultComponentFactory.prototype.makeStimulus = function(name, params) {\n      return this.make(name, params, this.registry);\n    };\n\n    DefaultComponentFactory.prototype.makeResponse = function(name, params) {\n      return this.make(name, params, this.registry);\n    };\n\n    DefaultComponentFactory.prototype.makeEvent = function(stim, response) {\n      return new Psy.Event(stim, response);\n    };\n\n    DefaultComponentFactory.prototype.makeLayout = function(name, params, context) {\n      switch (name) {\n        case \"Grid\":\n          return new Layout.GridLayout(params[0], params[1], {\n            x: 0,\n            y: 0,\n            width: context.width(),\n            height: context.height()\n          });\n        default:\n          return console.log(\"unrecognized layout\", name);\n      }\n    };\n\n    return DefaultComponentFactory;\n\n  })(ComponentFactory);\n\n  exports.DefaultComponentFactory = DefaultComponentFactory;\n\n  exports.componentFactory = new DefaultComponentFactory();\n\n  console.log(\"exports.DefaultComponentFactory\", DefaultComponentFactory);\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/layout.js":{"id":73,"canonicalName":"lib/layout.js","code":"(function () {\n    var AbsoluteLayout, GridLayout, Layout, computeGridCells, convertPercentageToFraction, convertToCoordinate, isPercentage, isPositionLabel, positionToCoord, toPixels, _, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    _ = require('16', module);\n    isPercentage = function (perc) {\n        return _.isString(perc) && perc.slice(-1) === '%';\n    };\n    isPositionLabel = function (pos) {\n        return _.contains([\n            'center',\n            'center-left',\n            'center-right',\n            'top-left',\n            'top-right',\n            'top-center',\n            'bottom-left',\n            'bottom-right',\n            'bottom-center',\n            'left-center',\n            'right-center',\n            'left-top',\n            'right-top',\n            'center-top',\n            'left-bottom',\n            'right-bottom',\n            'center-bottom'\n        ], pos);\n    };\n    positionToCoord = function (pos, offx, offy, width, height, xy) {\n        switch (pos) {\n        case 'center':\n            return [\n                offx + width * 0.5,\n                offy + height * 0.5\n            ];\n        case 'center-left' || 'left-center':\n            return [\n                offx + width / 6,\n                offy + height * 0.5\n            ];\n        case 'center-right' || 'right-center':\n            return [\n                offx + width * 5 / 6,\n                offy + height * 0.5\n            ];\n        case 'top-left' || 'left-top':\n            return [\n                offx + width / 6,\n                offy + height / 6\n            ];\n        case 'top-right' || 'right-top':\n            return [\n                offx + width * 5 / 6,\n                offy + height / 6\n            ];\n        case 'top-center' || 'center-top':\n            return [\n                offx + width * 0.5,\n                offy + height / 6\n            ];\n        case 'bottom-left' || 'left-bottom':\n            return [\n                offx + width / 6,\n                offy + height * 5 / 6\n            ];\n        case 'bottom-right' || 'right-bottom':\n            return [\n                offx + width * 5 / 6,\n                offy + height * 5 / 6\n            ];\n        case 'bottom-center' || 'center-bottom':\n            return [\n                offx + width * 0.5,\n                offy + height * 5 / 6\n            ];\n        default:\n            return xy;\n        }\n    };\n    toPixels = function (arg, dim) {\n        if (_.isNumber(arg)) {\n            return arg;\n        } else if (isPercentage(arg)) {\n            return convertPercentageToFraction(arg, dim);\n        } else {\n            throw new Error('toPixels: argument must either be a Number or a String-based Percentage value: ', arg);\n        }\n    };\n    convertPercentageToFraction = function (perc, dim) {\n        var frac;\n        frac = parseFloat(perc) / 100;\n        frac = Math.min(1, frac);\n        frac = Math.max(0, frac);\n        return frac * dim;\n    };\n    convertToCoordinate = function (val, d) {\n        var ret;\n        if (isPercentage(val)) {\n            return val = convertPercentageToFraction(val, d);\n        } else if (isPositionLabel(val)) {\n            ret = positionToCoord(val, 0, 0, d[0], d[1], [\n                0,\n                0\n            ]);\n            return ret;\n        } else {\n            return Math.min(val, d);\n        }\n    };\n    computeGridCells = function (rows, cols, bounds) {\n        var col, row, _i, _results;\n        _results = [];\n        for (row = _i = 0; 0 <= rows ? _i < rows : _i > rows; row = 0 <= rows ? ++_i : --_i) {\n            _results.push(function () {\n                var _j, _results1;\n                _results1 = [];\n                for (col = _j = 0; 0 <= cols ? _j < cols : _j > cols; col = 0 <= cols ? ++_j : --_j) {\n                    _results1.push({\n                        x: bounds.x + bounds.width / cols * col,\n                        y: bounds.y + bounds.height / rows * row,\n                        width: bounds.width / cols,\n                        height: bounds.height / rows\n                    });\n                }\n                return _results1;\n            }());\n        }\n        return _results;\n    };\n    exports.Layout = Layout = function () {\n        function Layout() {\n        }\n        Layout.prototype.computePosition = function (dim, constraints) {\n            throw new Error('unimplimented error');\n        };\n        Layout.prototype.convertToCoordinate = function (val, d) {\n            var ret;\n            if (isPercentage(val)) {\n                return val = convertPercentageToFraction(val, d);\n            } else if (isPositionLabel(val)) {\n                ret = positionToCoord(val, 0, 0, d[0], d[1], [\n                    0,\n                    0\n                ]);\n                return ret;\n            } else {\n                return Math.min(val, d);\n            }\n        };\n        return Layout;\n    }();\n    exports.AbsoluteLayout = AbsoluteLayout = function (_super) {\n        __extends(AbsoluteLayout, _super);\n        function AbsoluteLayout() {\n            return AbsoluteLayout.__super__.constructor.apply(this, arguments);\n        }\n        AbsoluteLayout.prototype.computePosition = function (dim, constraints) {\n            var x, y;\n            if (_.isArray(constraints)) {\n                x = convertToCoordinate(constraints[0], dim[0]);\n                y = convertToCoordinate(constraints[1], dim[1]);\n                return [\n                    x,\n                    y\n                ];\n            } else {\n                return convertToCoordinate(constraints, dim);\n            }\n        };\n        return AbsoluteLayout;\n    }(exports.Layout);\n    exports.GridLayout = GridLayout = function (_super) {\n        __extends(GridLayout, _super);\n        function GridLayout(rows, cols, bounds) {\n            this.rows = rows;\n            this.cols = cols;\n            this.bounds = bounds;\n            this.ncells = this.rows * this.cols;\n            this.cells = this.computeCells();\n        }\n        GridLayout.prototype.computeCells = function () {\n            return computeGridCells(this.rows, this.cols, this.bounds);\n        };\n        GridLayout.prototype.computePosition = function (dim, constraints) {\n            var cell;\n            if (constraints[0] > this.rows - 1) {\n                throw new Error('GridLayout.computePosition: illegal row position ' + constraints[0] + ' for grid with dimensions (' + this.rows + ', ' + this.cols + ')');\n            }\n            if (constraints[1] > this.cols - 1) {\n                throw new Error('GridLayout.computePosition: illegal column position ' + constraints[0] + ' for grid with dimensions (' + this.rows + ', ' + this.cols + ')');\n            }\n            cell = this.cells[constraints[0]][constraints[1]];\n            return [\n                cell.x + cell.width / 2,\n                cell.y + cell.height / 2\n            ];\n        };\n        return GridLayout;\n    }(exports.Layout);\n    exports.positionToCoord = positionToCoord;\n    exports.toPixels = toPixels;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/layout.js\"],\"names\":[\"AbsoluteLayout\",\"GridLayout\",\"Layout\",\"computeGridCells\",\"convertPercentageToFraction\",\"convertToCoordinate\",\"isPercentage\",\"isPositionLabel\",\"positionToCoord\",\"toPixels\",\"_\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"perc\",\"isString\",\"slice\",\"pos\",\"contains\",\"offx\",\"offy\",\"width\",\"height\",\"xy\",\"arg\",\"dim\",\"isNumber\",\"Error\",\"frac\",\"parseFloat\",\"Math\",\"min\",\"max\",\"val\",\"d\",\"ret\",\"rows\",\"cols\",\"bounds\",\"col\",\"row\",\"_i\",\"_results\",\"push\",\"_j\",\"_results1\",\"x\",\"y\",\"exports\",\"computePosition\",\"constraints\",\"_super\",\"apply\",\"arguments\",\"isArray\",\"ncells\",\"cells\",\"computeCells\",\"cell\"],\"mappings\":\"AAAA,CAAC,YAAW;AAAA,IACV,IAAIA,cAAJ,EAAoBC,UAApB,EAAgCC,MAAhC,EAAwCC,gBAAxC,EAA0DC,2BAA1D,EAAuFC,mBAAvF,EAA4GC,YAA5G,EAA0HC,eAA1H,EAA2IC,eAA3I,EAA4JC,QAA5J,EAAsKC,CAAtK,EACEC,SAAA,GAAY,GAAGC,cADjB,EAEEC,SAAA,GAAY,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAA,YAAE,SAASC,GAAT,IAAgBD,MAAhB,EAAwB;AAAA,gBAAE,IAAIJ,SAAA,CAAUM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ;AAAA,oBAAiCF,KAAA,CAAME,GAAN,IAAaD,MAAA,CAAOC,GAAP,CAAb,CAAnC;AAAA,aAA1B;AAAA,YAAyF,SAASE,IAAT,GAAgB;AAAA,gBAAE,KAAKC,WAAL,GAAmBL,KAAnB,CAAF;AAAA,aAAzG;AAAA,YAAuII,IAAA,CAAKE,SAAL,GAAiBL,MAAA,CAAOK,SAAxB,CAAvI;AAAA,YAA0KN,KAAA,CAAMM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA1K;AAAA,YAAwMJ,KAAA,CAAMO,SAAN,GAAkBN,MAAA,CAAOK,SAAzB,CAAxM;AAAA,YAA4O,OAAON,KAAP,CAA5O;AAAA,SAFtC,CADU;AAAA,IAKVJ,CAAA,GAAIY,OAAA,C,IAAA,E,MAAA,CAAJ,CALU;AAAA,IAOVhB,YAAA,GAAe,UAASiB,IAAT,EAAe;AAAA,QAC5B,OAAOb,CAAA,CAAEc,QAAF,CAAWD,IAAX,KAAoBA,IAAA,CAAKE,KAAL,CAAW,CAAC,CAAZ,MAAmB,GAA9C,CAD4B;AAAA,KAA9B,CAPU;AAAA,IAWVlB,eAAA,GAAkB,UAASmB,GAAT,EAAc;AAAA,QAC9B,OAAOhB,CAAA,CAAEiB,QAAF,CAAW;AAAA,YAAC,QAAD;AAAA,YAAW,aAAX;AAAA,YAA0B,cAA1B;AAAA,YAA0C,UAA1C;AAAA,YAAsD,WAAtD;AAAA,YAAmE,YAAnE;AAAA,YAAiF,aAAjF;AAAA,YAAgG,cAAhG;AAAA,YAAgH,eAAhH;AAAA,YAAiI,aAAjI;AAAA,YAAgJ,cAAhJ;AAAA,YAAgK,UAAhK;AAAA,YAA4K,WAA5K;AAAA,YAAyL,YAAzL;AAAA,YAAuM,aAAvM;AAAA,YAAsN,cAAtN;AAAA,YAAsO,eAAtO;AAAA,SAAX,EAAmQD,GAAnQ,CAAP,CAD8B;AAAA,KAAhC,CAXU;AAAA,IAeVlB,eAAA,GAAkB,UAASkB,GAAT,EAAcE,IAAd,EAAoBC,IAApB,EAA0BC,KAA1B,EAAiCC,MAAjC,EAAyCC,EAAzC,EAA6C;AAAA,QAC7D,QAAQN,GAAR;AAAA,QACE,KAAK,QAAL;AAAA,YACE,OAAO;AAAA,gBAACE,IAAA,GAAOE,KAAA,GAAQ,GAAhB;AAAA,gBAAoBD,IAAA,GAAOE,MAAA,GAAS,GAApC;AAAA,aAAP,CAFJ;AAAA,QAGE,KAAK,iBAAiB,aAAtB;AAAA,YACE,OAAO;AAAA,gBAACH,IAAA,GAAOE,KAAA,GAAQ,CAAhB;AAAA,gBAAmBD,IAAA,GAAOE,MAAA,GAAS,GAAnC;AAAA,aAAP,CAJJ;AAAA,QAKE,KAAK,kBAAkB,cAAvB;AAAA,YACE,OAAO;AAAA,gBAACH,IAAA,GAAOE,KAAA,GAAQ,CAAR,GAAY,CAApB;AAAA,gBAAuBD,IAAA,GAAOE,MAAA,GAAS,GAAvC;AAAA,aAAP,CANJ;AAAA,QAOE,KAAK,cAAc,UAAnB;AAAA,YACE,OAAO;AAAA,gBAACH,IAAA,GAAOE,KAAA,GAAQ,CAAhB;AAAA,gBAAmBD,IAAA,GAAOE,MAAA,GAAS,CAAnC;AAAA,aAAP,CARJ;AAAA,QASE,KAAK,eAAe,WAApB;AAAA,YACE,OAAO;AAAA,gBAACH,IAAA,GAAOE,KAAA,GAAQ,CAAR,GAAY,CAApB;AAAA,gBAAuBD,IAAA,GAAOE,MAAA,GAAS,CAAvC;AAAA,aAAP,CAVJ;AAAA,QAWE,KAAK,gBAAgB,YAArB;AAAA,YACE,OAAO;AAAA,gBAACH,IAAA,GAAOE,KAAA,GAAQ,GAAhB;AAAA,gBAAoBD,IAAA,GAAOE,MAAA,GAAS,CAApC;AAAA,aAAP,CAZJ;AAAA,QAaE,KAAK,iBAAiB,aAAtB;AAAA,YACE,OAAO;AAAA,gBAACH,IAAA,GAAOE,KAAA,GAAQ,CAAhB;AAAA,gBAAmBD,IAAA,GAAOE,MAAA,GAAS,CAAT,GAAa,CAAvC;AAAA,aAAP,CAdJ;AAAA,QAeE,KAAK,kBAAkB,cAAvB;AAAA,YACE,OAAO;AAAA,gBAACH,IAAA,GAAOE,KAAA,GAAQ,CAAR,GAAY,CAApB;AAAA,gBAAuBD,IAAA,GAAOE,MAAA,GAAS,CAAT,GAAa,CAA3C;AAAA,aAAP,CAhBJ;AAAA,QAiBE,KAAK,mBAAmB,eAAxB;AAAA,YACE,OAAO;AAAA,gBAACH,IAAA,GAAOE,KAAA,GAAQ,GAAhB;AAAA,gBAAoBD,IAAA,GAAOE,MAAA,GAAS,CAAT,GAAa,CAAxC;AAAA,aAAP,CAlBJ;AAAA,QAmBE;AAAA,YACE,OAAOC,EAAP,CApBJ;AAAA,SAD6D;AAAA,KAA/D,CAfU;AAAA,IAwCVvB,QAAA,GAAW,UAASwB,GAAT,EAAcC,GAAd,EAAmB;AAAA,QAC5B,IAAIxB,CAAA,CAAEyB,QAAF,CAAWF,GAAX,CAAJ,EAAqB;AAAA,YACnB,OAAOA,GAAP,CADmB;AAAA,SAArB,MAEO,IAAI3B,YAAA,CAAa2B,GAAb,CAAJ,EAAuB;AAAA,YAC5B,OAAO7B,2BAAA,CAA4B6B,GAA5B,EAAiCC,GAAjC,CAAP,CAD4B;AAAA,SAAvB,MAEA;AAAA,YACL,MAAM,IAAIE,KAAJ,CAAU,iFAAV,EAA6FH,GAA7F,CAAN,CADK;AAAA,SALqB;AAAA,KAA9B,CAxCU;AAAA,IAkDV7B,2BAAA,GAA8B,UAASmB,IAAT,EAAeW,GAAf,EAAoB;AAAA,QAChD,IAAIG,IAAJ,CADgD;AAAA,QAEhDA,IAAA,GAAOC,UAAA,CAAWf,IAAX,IAAmB,GAA1B,CAFgD;AAAA,QAGhDc,IAAA,GAAOE,IAAA,CAAKC,GAAL,CAAS,CAAT,EAAYH,IAAZ,CAAP,CAHgD;AAAA,QAIhDA,IAAA,GAAOE,IAAA,CAAKE,GAAL,CAAS,CAAT,EAAYJ,IAAZ,CAAP,CAJgD;AAAA,QAKhD,OAAOA,IAAA,GAAOH,GAAd,CALgD;AAAA,KAAlD,CAlDU;AAAA,IA0DV7B,mBAAA,GAAsB,UAASqC,GAAT,EAAcC,CAAd,EAAiB;AAAA,QACrC,IAAIC,GAAJ,CADqC;AAAA,QAErC,IAAItC,YAAA,CAAaoC,GAAb,CAAJ,EAAuB;AAAA,YACrB,OAAOA,GAAA,GAAMtC,2BAAA,CAA4BsC,GAA5B,EAAiCC,CAAjC,CAAb,CADqB;AAAA,SAAvB,MAEO,IAAIpC,eAAA,CAAgBmC,GAAhB,CAAJ,EAA0B;AAAA,YAC/BE,GAAA,GAAMpC,eAAA,CAAgBkC,GAAhB,EAAqB,CAArB,EAAwB,CAAxB,EAA2BC,CAAA,CAAE,CAAF,CAA3B,EAAiCA,CAAA,CAAE,CAAF,CAAjC,EAAuC;AAAA,gBAAC,CAAD;AAAA,gBAAI,CAAJ;AAAA,aAAvC,CAAN,CAD+B;AAAA,YAE/B,OAAOC,GAAP,CAF+B;AAAA,SAA1B,MAGA;AAAA,YACL,OAAOL,IAAA,CAAKC,GAAL,CAASE,GAAT,EAAcC,CAAd,CAAP,CADK;AAAA,SAP8B;AAAA,KAAvC,CA1DU;AAAA,IAsEVxC,gBAAA,GAAmB,UAAS0C,IAAT,EAAeC,IAAf,EAAqBC,MAArB,EAA6B;AAAA,QAC9C,IAAIC,GAAJ,EAASC,GAAT,EAAcC,EAAd,EAAkBC,QAAlB,CAD8C;AAAA,QAE9CA,QAAA,GAAW,EAAX,CAF8C;AAAA,QAG9C,KAAKF,GAAA,GAAMC,EAAA,GAAK,CAAhB,EAAmB,KAAKL,IAAL,GAAYK,EAAA,GAAKL,IAAjB,GAAwBK,EAAA,GAAKL,IAAhD,EAAsDI,GAAA,GAAM,KAAKJ,IAAL,GAAY,EAAEK,EAAd,GAAmB,EAAEA,EAAjF,EAAqF;AAAA,YACnFC,QAAA,CAASC,IAAT,CAAe,YAAW;AAAA,gBACxB,IAAIC,EAAJ,EAAQC,SAAR,CADwB;AAAA,gBAExBA,SAAA,GAAY,EAAZ,CAFwB;AAAA,gBAGxB,KAAKN,GAAA,GAAMK,EAAA,GAAK,CAAhB,EAAmB,KAAKP,IAAL,GAAYO,EAAA,GAAKP,IAAjB,GAAwBO,EAAA,GAAKP,IAAhD,EAAsDE,GAAA,GAAM,KAAKF,IAAL,GAAY,EAAEO,EAAd,GAAmB,EAAEA,EAAjF,EAAqF;AAAA,oBACnFC,SAAA,CAAUF,IAAV,CAAe;AAAA,wBACbG,CAAA,EAAGR,MAAA,CAAOQ,CAAP,GAAWR,MAAA,CAAOjB,KAAP,GAAegB,IAAf,GAAsBE,GADvB;AAAA,wBAEbQ,CAAA,EAAGT,MAAA,CAAOS,CAAP,GAAWT,MAAA,CAAOhB,MAAP,GAAgBc,IAAhB,GAAuBI,GAFxB;AAAA,wBAGbnB,KAAA,EAAOiB,MAAA,CAAOjB,KAAP,GAAegB,IAHT;AAAA,wBAIbf,MAAA,EAAQgB,MAAA,CAAOhB,MAAP,GAAgBc,IAJX;AAAA,qBAAf,EADmF;AAAA,iBAH7D;AAAA,gBAWxB,OAAOS,SAAP,CAXwB;AAAA,aAAZ,EAAd,EADmF;AAAA,SAHvC;AAAA,QAkB9C,OAAOH,QAAP,CAlB8C;AAAA,KAAhD,CAtEU;AAAA,IA2FVM,OAAA,CAAQvD,MAAR,GAAiBA,MAAA,GAAU,YAAW;AAAA,QACpC,SAASA,MAAT,GAAkB;AAAA,SADkB;AAAA,QAGpCA,MAAA,CAAOkB,SAAP,CAAiBsC,eAAjB,GAAmC,UAASxB,GAAT,EAAcyB,WAAd,EAA2B;AAAA,YAC5D,MAAM,IAAIvB,KAAJ,CAAU,qBAAV,CAAN,CAD4D;AAAA,SAA9D,CAHoC;AAAA,QAOpClC,MAAA,CAAOkB,SAAP,CAAiBf,mBAAjB,GAAuC,UAASqC,GAAT,EAAcC,CAAd,EAAiB;AAAA,YACtD,IAAIC,GAAJ,CADsD;AAAA,YAEtD,IAAItC,YAAA,CAAaoC,GAAb,CAAJ,EAAuB;AAAA,gBACrB,OAAOA,GAAA,GAAMtC,2BAAA,CAA4BsC,GAA5B,EAAiCC,CAAjC,CAAb,CADqB;AAAA,aAAvB,MAEO,IAAIpC,eAAA,CAAgBmC,GAAhB,CAAJ,EAA0B;AAAA,gBAC/BE,GAAA,GAAMpC,eAAA,CAAgBkC,GAAhB,EAAqB,CAArB,EAAwB,CAAxB,EAA2BC,CAAA,CAAE,CAAF,CAA3B,EAAiCA,CAAA,CAAE,CAAF,CAAjC,EAAuC;AAAA,oBAAC,CAAD;AAAA,oBAAI,CAAJ;AAAA,iBAAvC,CAAN,CAD+B;AAAA,gBAE/B,OAAOC,GAAP,CAF+B;AAAA,aAA1B,MAGA;AAAA,gBACL,OAAOL,IAAA,CAAKC,GAAL,CAASE,GAAT,EAAcC,CAAd,CAAP,CADK;AAAA,aAP+C;AAAA,SAAxD,CAPoC;AAAA,QAmBpC,OAAOzC,MAAP,CAnBoC;AAAA,KAAZ,EAA1B,CA3FU;AAAA,IAkHVuD,OAAA,CAAQzD,cAAR,GAAyBA,cAAA,GAAkB,UAAS4D,MAAT,EAAiB;AAAA,QAC1D/C,SAAA,CAAUb,cAAV,EAA0B4D,MAA1B,EAD0D;AAAA,QAG1D,SAAS5D,cAAT,GAA0B;AAAA,YACxB,OAAOA,cAAA,CAAeqB,SAAf,CAAyBF,WAAzB,CAAqC0C,KAArC,CAA2C,IAA3C,EAAiDC,SAAjD,CAAP,CADwB;AAAA,SAHgC;AAAA,QAO1D9D,cAAA,CAAeoB,SAAf,CAAyBsC,eAAzB,GAA2C,UAASxB,GAAT,EAAcyB,WAAd,EAA2B;AAAA,YACpE,IAAIJ,CAAJ,EAAOC,CAAP,CADoE;AAAA,YAEpE,IAAI9C,CAAA,CAAEqD,OAAF,CAAUJ,WAAV,CAAJ,EAA4B;AAAA,gBAC1BJ,CAAA,GAAIlD,mBAAA,CAAoBsD,WAAA,CAAY,CAAZ,CAApB,EAAoCzB,GAAA,CAAI,CAAJ,CAApC,CAAJ,CAD0B;AAAA,gBAE1BsB,CAAA,GAAInD,mBAAA,CAAoBsD,WAAA,CAAY,CAAZ,CAApB,EAAoCzB,GAAA,CAAI,CAAJ,CAApC,CAAJ,CAF0B;AAAA,gBAG1B,OAAO;AAAA,oBAACqB,CAAD;AAAA,oBAAIC,CAAJ;AAAA,iBAAP,CAH0B;AAAA,aAA5B,MAIO;AAAA,gBACL,OAAOnD,mBAAA,CAAoBsD,WAApB,EAAiCzB,GAAjC,CAAP,CADK;AAAA,aAN6D;AAAA,SAAtE,CAP0D;AAAA,QAkB1D,OAAOlC,cAAP,CAlB0D;AAAA,KAAlB,CAoBvCyD,OAAA,CAAQvD,MApB+B,CAA1C,CAlHU;AAAA,IAwIVuD,OAAA,CAAQxD,UAAR,GAAqBA,UAAA,GAAc,UAAS2D,MAAT,EAAiB;AAAA,QAClD/C,SAAA,CAAUZ,UAAV,EAAsB2D,MAAtB,EADkD;AAAA,QAGlD,SAAS3D,UAAT,CAAoB4C,IAApB,EAA0BC,IAA1B,EAAgCC,MAAhC,EAAwC;AAAA,YACtC,KAAKF,IAAL,GAAYA,IAAZ,CADsC;AAAA,YAEtC,KAAKC,IAAL,GAAYA,IAAZ,CAFsC;AAAA,YAGtC,KAAKC,MAAL,GAAcA,MAAd,CAHsC;AAAA,YAItC,KAAKiB,MAAL,GAAc,KAAKnB,IAAL,GAAY,KAAKC,IAA/B,CAJsC;AAAA,YAKtC,KAAKmB,KAAL,GAAa,KAAKC,YAAL,EAAb,CALsC;AAAA,SAHU;AAAA,QAWlDjE,UAAA,CAAWmB,SAAX,CAAqB8C,YAArB,GAAoC,YAAW;AAAA,YAC7C,OAAO/D,gBAAA,CAAiB,KAAK0C,IAAtB,EAA4B,KAAKC,IAAjC,EAAuC,KAAKC,MAA5C,CAAP,CAD6C;AAAA,SAA/C,CAXkD;AAAA,QAelD9C,UAAA,CAAWmB,SAAX,CAAqBsC,eAArB,GAAuC,UAASxB,GAAT,EAAcyB,WAAd,EAA2B;AAAA,YAChE,IAAIQ,IAAJ,CADgE;AAAA,YAEhE,IAAIR,WAAA,CAAY,CAAZ,IAAkB,KAAKd,IAAL,GAAY,CAAlC,EAAsC;AAAA,gBACpC,MAAM,IAAIT,KAAJ,CAAU,sDAAsDuB,WAAA,CAAY,CAAZ,CAAtD,GAAuE,6BAAvE,GAAuG,KAAKd,IAA5G,GAAmH,IAAnH,GAA0H,KAAKC,IAA/H,GAAsI,GAAhJ,CAAN,CADoC;AAAA,aAF0B;AAAA,YAKhE,IAAIa,WAAA,CAAY,CAAZ,IAAkB,KAAKb,IAAL,GAAY,CAAlC,EAAsC;AAAA,gBACpC,MAAM,IAAIV,KAAJ,CAAU,yDAAyDuB,WAAA,CAAY,CAAZ,CAAzD,GAA0E,6BAA1E,GAA0G,KAAKd,IAA/G,GAAsH,IAAtH,GAA6H,KAAKC,IAAlI,GAAyI,GAAnJ,CAAN,CADoC;AAAA,aAL0B;AAAA,YAQhEqB,IAAA,GAAO,KAAKF,KAAL,CAAWN,WAAA,CAAY,CAAZ,CAAX,EAA2BA,WAAA,CAAY,CAAZ,CAA3B,CAAP,CARgE;AAAA,YAShE,OAAO;AAAA,gBAACQ,IAAA,CAAKZ,CAAL,GAASY,IAAA,CAAKrC,KAAL,GAAa,CAAvB;AAAA,gBAA0BqC,IAAA,CAAKX,CAAL,GAASW,IAAA,CAAKpC,MAAL,GAAc,CAAjD;AAAA,aAAP,CATgE;AAAA,SAAlE,CAfkD;AAAA,QA2BlD,OAAO9B,UAAP,CA3BkD;AAAA,KAAlB,CA6B/BwD,OAAA,CAAQvD,MA7BuB,CAAlC,CAxIU;AAAA,IAuKVuD,OAAA,CAAQjD,eAAR,GAA0BA,eAA1B,CAvKU;AAAA,IAyKViD,OAAA,CAAQhD,QAAR,GAAmBA,QAAnB,CAzKU;AAAA,CAAZ,CA2KGQ,IA3KH,CA2KQ,IA3KR\"}","lineCount":213,"mtime":1395245873000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var AbsoluteLayout, GridLayout, Layout, computeGridCells, convertPercentageToFraction, convertToCoordinate, isPercentage, isPositionLabel, positionToCoord, toPixels, _,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  _ = require('lodash');\n\n  isPercentage = function(perc) {\n    return _.isString(perc) && perc.slice(-1) === \"%\";\n  };\n\n  isPositionLabel = function(pos) {\n    return _.contains([\"center\", \"center-left\", \"center-right\", \"top-left\", \"top-right\", \"top-center\", \"bottom-left\", \"bottom-right\", \"bottom-center\", \"left-center\", \"right-center\", \"left-top\", \"right-top\", \"center-top\", \"left-bottom\", \"right-bottom\", \"center-bottom\"], pos);\n  };\n\n  positionToCoord = function(pos, offx, offy, width, height, xy) {\n    switch (pos) {\n      case \"center\":\n        return [offx + width * .5, offy + height * .5];\n      case \"center-left\" || \"left-center\":\n        return [offx + width / 6, offy + height * .5];\n      case \"center-right\" || \"right-center\":\n        return [offx + width * 5 / 6, offy + height * .5];\n      case \"top-left\" || \"left-top\":\n        return [offx + width / 6, offy + height / 6];\n      case \"top-right\" || \"right-top\":\n        return [offx + width * 5 / 6, offy + height / 6];\n      case \"top-center\" || \"center-top\":\n        return [offx + width * .5, offy + height / 6];\n      case \"bottom-left\" || \"left-bottom\":\n        return [offx + width / 6, offy + height * 5 / 6];\n      case \"bottom-right\" || \"right-bottom\":\n        return [offx + width * 5 / 6, offy + height * 5 / 6];\n      case \"bottom-center\" || \"center-bottom\":\n        return [offx + width * .5, offy + height * 5 / 6];\n      default:\n        return xy;\n    }\n  };\n\n  toPixels = function(arg, dim) {\n    if (_.isNumber(arg)) {\n      return arg;\n    } else if (isPercentage(arg)) {\n      return convertPercentageToFraction(arg, dim);\n    } else {\n      throw new Error(\"toPixels: argument must either be a Number or a String-based Percentage value: \", arg);\n    }\n  };\n\n  convertPercentageToFraction = function(perc, dim) {\n    var frac;\n    frac = parseFloat(perc) / 100;\n    frac = Math.min(1, frac);\n    frac = Math.max(0, frac);\n    return frac * dim;\n  };\n\n  convertToCoordinate = function(val, d) {\n    var ret;\n    if (isPercentage(val)) {\n      return val = convertPercentageToFraction(val, d);\n    } else if (isPositionLabel(val)) {\n      ret = positionToCoord(val, 0, 0, d[0], d[1], [0, 0]);\n      return ret;\n    } else {\n      return Math.min(val, d);\n    }\n  };\n\n  computeGridCells = function(rows, cols, bounds) {\n    var col, row, _i, _results;\n    _results = [];\n    for (row = _i = 0; 0 <= rows ? _i < rows : _i > rows; row = 0 <= rows ? ++_i : --_i) {\n      _results.push((function() {\n        var _j, _results1;\n        _results1 = [];\n        for (col = _j = 0; 0 <= cols ? _j < cols : _j > cols; col = 0 <= cols ? ++_j : --_j) {\n          _results1.push({\n            x: bounds.x + bounds.width / cols * col,\n            y: bounds.y + bounds.height / rows * row,\n            width: bounds.width / cols,\n            height: bounds.height / rows\n          });\n        }\n        return _results1;\n      })());\n    }\n    return _results;\n  };\n\n  exports.Layout = Layout = (function() {\n    function Layout() {}\n\n    Layout.prototype.computePosition = function(dim, constraints) {\n      throw new Error(\"unimplimented error\");\n    };\n\n    Layout.prototype.convertToCoordinate = function(val, d) {\n      var ret;\n      if (isPercentage(val)) {\n        return val = convertPercentageToFraction(val, d);\n      } else if (isPositionLabel(val)) {\n        ret = positionToCoord(val, 0, 0, d[0], d[1], [0, 0]);\n        return ret;\n      } else {\n        return Math.min(val, d);\n      }\n    };\n\n    return Layout;\n\n  })();\n\n  exports.AbsoluteLayout = AbsoluteLayout = (function(_super) {\n    __extends(AbsoluteLayout, _super);\n\n    function AbsoluteLayout() {\n      return AbsoluteLayout.__super__.constructor.apply(this, arguments);\n    }\n\n    AbsoluteLayout.prototype.computePosition = function(dim, constraints) {\n      var x, y;\n      if (_.isArray(constraints)) {\n        x = convertToCoordinate(constraints[0], dim[0]);\n        y = convertToCoordinate(constraints[1], dim[1]);\n        return [x, y];\n      } else {\n        return convertToCoordinate(constraints, dim);\n      }\n    };\n\n    return AbsoluteLayout;\n\n  })(exports.Layout);\n\n  exports.GridLayout = GridLayout = (function(_super) {\n    __extends(GridLayout, _super);\n\n    function GridLayout(rows, cols, bounds) {\n      this.rows = rows;\n      this.cols = cols;\n      this.bounds = bounds;\n      this.ncells = this.rows * this.cols;\n      this.cells = this.computeCells();\n    }\n\n    GridLayout.prototype.computeCells = function() {\n      return computeGridCells(this.rows, this.cols, this.bounds);\n    };\n\n    GridLayout.prototype.computePosition = function(dim, constraints) {\n      var cell;\n      if (constraints[0] > (this.rows - 1)) {\n        throw new Error(\"GridLayout.computePosition: illegal row position \" + constraints[0] + \" for grid with dimensions (\" + this.rows + \", \" + this.cols + \")\");\n      }\n      if (constraints[1] > (this.cols - 1)) {\n        throw new Error(\"GridLayout.computePosition: illegal column position \" + constraints[0] + \" for grid with dimensions (\" + this.rows + \", \" + this.cols + \")\");\n      }\n      cell = this.cells[constraints[0]][constraints[1]];\n      return [cell.x + cell.width / 2, cell.y + cell.height / 2];\n    };\n\n    return GridLayout;\n\n  })(exports.Layout);\n\n  exports.positionToCoord = positionToCoord;\n\n  exports.toPixels = toPixels;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/psycloud.js":{"id":67,"canonicalName":"lib/psycloud.js","code":"(function () {\n    var Background, Bacon, Block, BlockSeq, Coda, DataTable, DefaultComponentFactory, Event, EventData, EventDataLog, Experiment, ExperimentContext, ExperimentState, FeedbackNode, FunctionNode, Kinetic, KineticContext, MockStimFactory, Prelude, Presenter, Q, Response, ResponseData, RunnableNode, StimFactory, Stimulus, TAFFY, Trial, buildCoda, buildEvent, buildPrelude, buildResponse, buildStimulus, buildTrial, createContext, des, functionNode, makeEventSeq, utils, _, __dummySpec, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    _ = require('16', module);\n    Q = require('17', module);\n    TAFFY = require('21', module).taffy;\n    utils = require('69', module);\n    DataTable = require('70', module).DataTable;\n    Bacon = require('22', module);\n    DefaultComponentFactory = require('78', module).DefaultComponentFactory;\n    Background = require('79', module).Background;\n    Kinetic = require('15', module).Kinetic;\n    Stimulus = require('72', module).Stimulus;\n    Response = require('72', module).Response;\n    ResponseData = require('72', module).ResponseData;\n    exports.EventData = EventData = function () {\n        function EventData(name, id, data) {\n            this.name = name;\n            this.id = id;\n            this.data = data;\n        }\n        return EventData;\n    }();\n    exports.EventDataLog = EventDataLog = function () {\n        function EventDataLog() {\n            this.eventStack = [];\n        }\n        EventDataLog.prototype.push = function (ev) {\n            return this.eventStack.push(ev);\n        };\n        EventDataLog.prototype.last = function () {\n            if (this.eventStack.length < 1) {\n                throw 'EventLog is Empty, canot access last element';\n            }\n            return this.eventStack[this.eventStack.length - 1].data;\n        };\n        EventDataLog.prototype.findAll = function (id) {\n            return _.filter(this.eventStack, function (ev) {\n                return ev.id === id;\n            });\n        };\n        EventDataLog.prototype.findLast = function (id) {\n            var i, len, _i;\n            len = this.eventStack.length - 1;\n            for (i = _i = len; len <= 0 ? _i <= 0 : _i >= 0; i = len <= 0 ? ++_i : --_i) {\n                if (this.eventStack[i].id === id) {\n                    return this.eventStack[i];\n                }\n            }\n        };\n        return EventDataLog;\n    }();\n    exports.StimFactory = StimFactory = function () {\n        function StimFactory() {\n        }\n        StimFactory.prototype.buildStimulus = function (spec, context) {\n            var params, stimType;\n            stimType = _.keys(spec)[0];\n            params = _.values(spec)[0];\n            return this.makeStimulus(stimType, params, context);\n        };\n        StimFactory.prototype.buildResponse = function (spec, context) {\n            var params, responseType;\n            responseType = _.keys(spec)[0];\n            params = _.values(spec)[0];\n            return this.makeResponse(responseType, params, context);\n        };\n        StimFactory.prototype.buildEvent = function (spec, context) {\n            var response, responseSpec, stim, stimSpec;\n            if (spec.Next == null) {\n                throw new Error('Event specification does not contain \\'Next\\' element');\n            }\n            stimSpec = _.omit(spec, 'Next');\n            responseSpec = _.pick(spec, 'Next');\n            stim = this.buildStimulus(stimSpec, context);\n            response = this.buildResponse(responseSpec.Next, context);\n            return this.makeEvent(stim, response, context);\n        };\n        StimFactory.prototype.makeStimulus = function (name, params, context) {\n            throw new Error('unimplemented');\n        };\n        StimFactory.prototype.makeResponse = function (name, params, context) {\n            throw new Error('unimplemented');\n        };\n        StimFactory.prototype.makeEvent = function (stim, response, context) {\n            throw new Error('unimplemented');\n        };\n        return StimFactory;\n    }();\n    exports.MockStimFactory = MockStimFactory = function (_super) {\n        __extends(MockStimFactory, _super);\n        function MockStimFactory() {\n            return MockStimFactory.__super__.constructor.apply(this, arguments);\n        }\n        MockStimFactory.prototype.makeStimulus = function (name, params, context) {\n            var ret;\n            ret = {};\n            ret[name] = params;\n            return ret;\n        };\n        MockStimFactory.prototype.makeResponse = function (name, params, context) {\n            var ret;\n            ret = {};\n            ret[name] = params;\n            return ret;\n        };\n        MockStimFactory.prototype.makeEvent = function (stim, response, context) {\n            return [\n                stim,\n                response\n            ];\n        };\n        return MockStimFactory;\n    }(exports.StimFactory);\n    RunnableNode = function () {\n        RunnableNode.functionList = function (nodes, context, callback) {\n            return _.map(nodes, function (node) {\n                return function (arg) {\n                    context.handleValue(arg);\n                    if (callback != null) {\n                        callback(node);\n                    }\n                    return node.start(context);\n                };\n            });\n        };\n        RunnableNode.chainFunctions = function (funArray) {\n            var fun, result, _i, _len;\n            result = Q.resolve(0);\n            for (_i = 0, _len = funArray.length; _i < _len; _i++) {\n                fun = funArray[_i];\n                result = result.then(fun, function (err) {\n                    return console.log('error stack: ', err.stack);\n                });\n            }\n            return result;\n        };\n        function RunnableNode(children) {\n            this.children = children;\n        }\n        RunnableNode.prototype.before = function (context) {\n            return new FunctionNode(function () {\n                return 0;\n            });\n        };\n        RunnableNode.prototype.after = function (context) {\n            return new FunctionNode(function () {\n                return 0;\n            });\n        };\n        RunnableNode.prototype.numChildren = function () {\n            return this.children.length;\n        };\n        RunnableNode.prototype.length = function () {\n            return this.children.length;\n        };\n        RunnableNode.prototype.start = function (context) {\n            var farray;\n            farray = RunnableNode.functionList(_.flatten([\n                this.before(context),\n                this.children,\n                this.after(context)\n            ]), context, function (node) {\n                return console.log('node done', node);\n            });\n            return RunnableNode.chainFunctions(farray);\n        };\n        RunnableNode.prototype.stop = function (context) {\n        };\n        return RunnableNode;\n    }();\n    exports.RunnableNode = RunnableNode;\n    exports.FunctionNode = FunctionNode = function (_super) {\n        __extends(FunctionNode, _super);\n        function FunctionNode(fun) {\n            this.fun = fun;\n        }\n        FunctionNode.prototype.start = function (context) {\n            return Q.fcall(this.fun);\n        };\n        return FunctionNode;\n    }(RunnableNode);\n    functionNode = function (fun) {\n        return new FunctionNode(fun);\n    };\n    exports.FeedbackNode = FeedbackNode = function (_super) {\n        __extends(FeedbackNode, _super);\n        function FeedbackNode(feedback) {\n            this.feedback = feedback;\n        }\n        FeedbackNode.prototype.numChildren = function () {\n            return 1;\n        };\n        FeedbackNode.prototype.length = function () {\n            return 1;\n        };\n        FeedbackNode.prototype.start = function (context) {\n            var args, event, idSet, obj, spec, _i, _len;\n            if (this.feedback != null) {\n                args = context.trialData().get();\n                idSet = {};\n                for (_i = 0, _len = args.length; _i < _len; _i++) {\n                    obj = args[_i];\n                    if (obj['id'] != null) {\n                        idSet[obj['id']] = obj;\n                    }\n                }\n                args = _.extend(args, idSet);\n                spec = this.feedback.apply(args);\n                event = context.stimFactory.buildEvent(spec, context);\n                return event.start(context);\n            } else {\n                return Q(0);\n            }\n        };\n        return FeedbackNode;\n    }(RunnableNode);\n    exports.Event = Event = function (_super) {\n        __extends(Event, _super);\n        function Event(stimulus, response) {\n            this.stimulus = stimulus;\n            this.response = response;\n            Event.__super__.constructor.call(this, [this.response]);\n        }\n        Event.prototype.stop = function (context) {\n            this.stimulus.stop(context);\n            return this.response.stop(context);\n        };\n        Event.prototype.before = function (context) {\n            var self;\n            self = this;\n            return functionNode(function (_this) {\n                return function () {\n                    var p;\n                    if (!context.exState.inPrelude) {\n                        context.updateState(function () {\n                            return context.exState.nextEvent(self);\n                        });\n                    }\n                    if (!_this.stimulus.overlay) {\n                        context.clearContent();\n                    }\n                    p = _this.stimulus.render(context);\n                    p.present(context);\n                    return context.draw();\n                };\n            }(this));\n        };\n        Event.prototype.after = function (context) {\n            return functionNode(function (_this) {\n                return function () {\n                    return _this.stimulus.stop(context);\n                };\n            }(this));\n        };\n        Event.prototype.start = function (context) {\n            return Event.__super__.start.call(this, context);\n        };\n        return Event;\n    }(RunnableNode);\n    exports.Trial = Trial = function (_super) {\n        __extends(Trial, _super);\n        function Trial(events, record, feedback, background) {\n            if (events == null) {\n                events = [];\n            }\n            this.record = record != null ? record : {};\n            this.feedback = feedback;\n            this.background = background;\n            Trial.__super__.constructor.call(this, events);\n        }\n        Trial.prototype.numEvents = function () {\n            return this.children.length;\n        };\n        Trial.prototype.push = function (event) {\n            return this.children.push(event);\n        };\n        Trial.prototype.before = function (context) {\n            var self;\n            self = this;\n            return functionNode(function (_this) {\n                return function () {\n                    context.updateState(function () {\n                        return context.exState.nextTrial(self);\n                    });\n                    context.clearBackground();\n                    if (_this.background != null) {\n                        console.log('drawing background');\n                        context.setBackground(_this.background);\n                        return context.drawBackground();\n                    }\n                };\n            }(this));\n        };\n        Trial.prototype.after = function (context) {\n            return new FeedbackNode(this.feedback);\n        };\n        Trial.prototype.start = function (context, callback) {\n            var farray;\n            farray = RunnableNode.functionList(_.flatten([\n                this.before(context),\n                this.children,\n                this.after(context)\n            ]), context, function (event) {\n                return console.log('event callback', event);\n            });\n            return RunnableNode.chainFunctions(farray);\n        };\n        Trial.prototype.stop = function (context) {\n        };\n        return Trial;\n    }(RunnableNode);\n    exports.Block = Block = function (_super) {\n        __extends(Block, _super);\n        function Block(children, blockSpec) {\n            this.blockSpec = blockSpec;\n            Block.__super__.constructor.call(this, children);\n        }\n        Block.prototype.showEvent = function (spec, context) {\n            var event;\n            event = buildEvent(spec, context);\n            return event.start(context);\n        };\n        Block.prototype.before = function (context) {\n            var self;\n            self = this;\n            return functionNode(function (_this) {\n                return function () {\n                    var args, spec;\n                    context.updateState(function () {\n                        return context.exState.nextBlock(self);\n                    });\n                    if (_this.blockSpec != null && _this.blockSpec.Start) {\n                        args = _.extend(context.exState.toRecord(), { context: context });\n                        spec = _this.blockSpec.Start.apply(args);\n                        return _this.showEvent(spec, context);\n                    } else {\n                        return Q.fcall(0);\n                    }\n                };\n            }(this));\n        };\n        Block.prototype.after = function (context) {\n            return functionNode(function (_this) {\n                return function () {\n                    var args, blockData, curid, ids, out, spec, _i, _len;\n                    if (_this.blockSpec != null && _this.blockSpec.End) {\n                        blockData = context.blockData();\n                        ids = _.unique(blockData.select('id'));\n                        console.log('END ids', ids);\n                        out = {};\n                        for (_i = 0, _len = ids.length; _i < _len; _i++) {\n                            curid = ids[_i];\n                            out[curid] = DataTable.fromRecords(blockData.filter({ id: curid }).get());\n                        }\n                        args = _.extend(context.exState.toRecord(), { context: context }, out);\n                        console.log('block end args');\n                        spec = _this.blockSpec.End.apply(args);\n                        return _this.showEvent(spec, context);\n                    } else {\n                        return Q.fcall(0);\n                    }\n                };\n            }(this));\n        };\n        return Block;\n    }(RunnableNode);\n    exports.BlockSeq = BlockSeq = function (_super) {\n        __extends(BlockSeq, _super);\n        function BlockSeq(children) {\n            BlockSeq.__super__.constructor.call(this, children);\n        }\n        return BlockSeq;\n    }(RunnableNode);\n    exports.Prelude = Prelude = function (_super) {\n        __extends(Prelude, _super);\n        function Prelude(children) {\n            Prelude.__super__.constructor.call(this, children);\n        }\n        Prelude.prototype.before = function (context) {\n            return functionNode(function (_this) {\n                return function () {\n                    return context.updateState(function () {\n                        return context.exState.insidePrelude();\n                    });\n                };\n            }(this));\n        };\n        Prelude.prototype.after = function (context) {\n            return functionNode(function (_this) {\n                return function () {\n                    return context.updateState(function () {\n                        return context.exState.outsidePrelude();\n                    });\n                };\n            }(this));\n        };\n        return Prelude;\n    }(RunnableNode);\n    exports.Coda = Coda = function (_super) {\n        __extends(Coda, _super);\n        function Coda(children) {\n            Coda.__super__.constructor.call(this, children);\n        }\n        return Coda;\n    }(RunnableNode);\n    exports.ExperimentState = ExperimentState = function () {\n        function ExperimentState() {\n            this.inPrelude = false;\n            this.trial = {};\n            this.block = {};\n            this.event = {};\n            this.blockNumber = 0;\n            this.trialNumber = 0;\n            this.eventNumber = 0;\n            this.stimulus = {};\n            this.response = {};\n        }\n        ExperimentState.prototype.insidePrelude = function () {\n            var ret;\n            ret = $.extend({}, this);\n            ret.inPrelude = true;\n            return ret;\n        };\n        ExperimentState.prototype.outsidePrelude = function () {\n            var ret;\n            ret = $.extend({}, this);\n            ret.inPrelude = false;\n            return ret;\n        };\n        ExperimentState.prototype.nextBlock = function (block) {\n            var ret;\n            ret = $.extend({}, this);\n            ret.blockNumber = this.blockNumber + 1;\n            ret.block = block;\n            return ret;\n        };\n        ExperimentState.prototype.nextTrial = function (trial) {\n            var ret;\n            ret = $.extend({}, this);\n            ret.trial = trial;\n            ret.trialNumber = this.trialNumber + 1;\n            return ret;\n        };\n        ExperimentState.prototype.nextEvent = function (event) {\n            var ret;\n            ret = $.extend({}, this);\n            ret.event = event;\n            ret.eventNumber = this.eventNumber + 1;\n            return ret;\n        };\n        ExperimentState.prototype.toRecord = function () {\n            var key, ret, value, _ref, _ref1, _ref10, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9;\n            ret = {\n                blockNumber: this.blockNumber,\n                trialNumber: this.trialNumber,\n                eventNumber: this.eventNumber,\n                stimulus: (_ref = this.event) != null ? (_ref1 = _ref.stimulus) != null ? (_ref2 = _ref1.constructor) != null ? _ref2.name : void 0 : void 0 : void 0,\n                response: (_ref3 = this.event) != null ? (_ref4 = _ref3.response) != null ? (_ref5 = _ref4.constructor) != null ? _ref5.name : void 0 : void 0 : void 0,\n                stimulusID: (_ref6 = this.event) != null ? (_ref7 = _ref6.stimulus) != null ? _ref7.id : void 0 : void 0,\n                responseID: (_ref8 = this.event) != null ? (_ref9 = _ref8.response) != null ? _ref9.id : void 0 : void 0\n            };\n            if (!_.isEmpty(this.trial) && this.trial.record != null) {\n                _ref10 = this.trial.record;\n                for (key in _ref10) {\n                    value = _ref10[key];\n                    ret[key] = value;\n                }\n            }\n            return ret;\n        };\n        return ExperimentState;\n    }();\n    createContext = function (id) {\n        var stage;\n        if (id == null) {\n            id = 'container';\n        }\n        stage = new Kinetic.Stage({\n            container: id,\n            width: $('#' + id).width(),\n            height: $('#' + id).height()\n        });\n        return new KineticContext(stage);\n    };\n    exports.createContext = createContext;\n    exports.ExperimentContext = ExperimentContext = function () {\n        function ExperimentContext(stimFactory) {\n            this.stimFactory = stimFactory;\n            this.userData = TAFFY({});\n            this.exState = new ExperimentState();\n            this.eventData = new EventDataLog();\n            this.log = [];\n            this.trialNumber = 0;\n            this.currentTrial = new Trial([], {});\n            this.numBlocks = 0;\n        }\n        ExperimentContext.prototype.updateState = function (fun) {\n            this.exState = fun(this.exState);\n            return this.exState;\n        };\n        ExperimentContext.prototype.pushData = function (data, withState) {\n            var record;\n            if (withState == null) {\n                withState = true;\n            }\n            console.log('pushing data', data);\n            if (withState) {\n                record = _.extend(this.exState.toRecord(), data);\n            } else {\n                record = data;\n            }\n            return this.userData.insert(record);\n        };\n        ExperimentContext.prototype.handleValue = function (arg) {\n            if (arg != null && arg instanceof ResponseData) {\n                return this.pushData(arg.data);\n            }\n        };\n        ExperimentContext.prototype.width = function () {\n            return 0;\n        };\n        ExperimentContext.prototype.height = function () {\n            return 0;\n        };\n        ExperimentContext.prototype.offsetX = function () {\n            return 0;\n        };\n        ExperimentContext.prototype.offsetY = function () {\n            return 0;\n        };\n        ExperimentContext.prototype.centerX = function () {\n            return this.width() / 2 + this.offsetX();\n        };\n        ExperimentContext.prototype.centerY = function () {\n            return this.height() / 2 + this.offsetY();\n        };\n        ExperimentContext.prototype.screenInfo = function () {\n            return {\n                width: this.width(),\n                height: this.height(),\n                offset: {\n                    x: this.offsetX(),\n                    y: this.offsetY()\n                },\n                center: {\n                    x: this.centerX(),\n                    y: this.centerY()\n                }\n            };\n        };\n        ExperimentContext.prototype.logEvent = function (key, value) {\n            var record;\n            record = _.clone(this.currentTrial.record);\n            record[key] = value;\n            this.log.push(record);\n            return console.log(this.log);\n        };\n        ExperimentContext.prototype.trialData = function () {\n            var ret;\n            ret = this.userData().filter({ trialNumber: this.exState.trialNumber });\n            if (ret.length === 1) {\n                return ret[0];\n            } else {\n                return ret;\n            }\n        };\n        ExperimentContext.prototype.blockData = function (args) {\n            if (args == null) {\n                args = {\n                    blockNum: null,\n                    name: null\n                };\n            }\n            if (args.blockNum == null) {\n                args.blockNum = this.exState.blockNumber;\n            }\n            if (!args.name) {\n                return this.userData().filter({ blockNumber: args.blockNum });\n            } else {\n                return this.userData().filter({ blockNumber: args.blockNum }).select(args.name);\n            }\n        };\n        ExperimentContext.prototype.allData = function (args) {\n            if (args == null) {\n                args = { name: null };\n            }\n            if (!args.name) {\n                return this.userData();\n            } else {\n                return this.userData().select(args.name);\n            }\n        };\n        ExperimentContext.prototype.showEvent = function (event) {\n            return event.start(this);\n        };\n        ExperimentContext.prototype.showStimulus = function (stimulus) {\n            var p;\n            p = stimulus.render(this);\n            p.present(this);\n            console.log('show Stimulus, drawing');\n            return this.draw();\n        };\n        ExperimentContext.prototype.start = function (blockList) {\n            var error, farray;\n            this.numBlocks = blockList.length();\n            try {\n                farray = RunnableNode.functionList(blockList, this, function (block) {\n                    return console.log('block callback', block);\n                });\n                return RunnableNode.chainFunctions(farray);\n            } catch (_error) {\n                error = _error;\n                return console.log('caught error:', error);\n            }\n        };\n        ExperimentContext.prototype.clearContent = function () {\n        };\n        ExperimentContext.prototype.clearBackground = function () {\n        };\n        ExperimentContext.prototype.keydownStream = function () {\n            return Bacon.fromEventTarget(window, 'keydown');\n        };\n        ExperimentContext.prototype.keypressStream = function () {\n            return Bacon.fromEventTarget(window, 'keypress');\n        };\n        ExperimentContext.prototype.mousepressStream = function () {\n        };\n        ExperimentContext.prototype.draw = function () {\n        };\n        ExperimentContext.prototype.insertHTMLDiv = function () {\n            $('canvas').css('position', 'absolute');\n            $('#container').append('<div id=\"htmlcontainer\" class=\"htmllayer\"></div>');\n            $('#htmlcontainer').css({\n                position: 'absolute',\n                'z-index': 999,\n                outline: 'none',\n                padding: '5px'\n            });\n            $('#container').attr('tabindex', 0);\n            return $('#container').css('outline', 'none');\n        };\n        ExperimentContext.prototype.clearHtml = function () {\n            $('#htmlcontainer').empty();\n            return $('#htmlcontainer').hide();\n        };\n        ExperimentContext.prototype.appendHtml = function (input) {\n            $('#htmlcontainer').addClass('htmllayer');\n            $('#htmlcontainer').append(input);\n            return $('#htmlcontainer').show();\n        };\n        ExperimentContext.prototype.hideHtml = function () {\n            return $('#htmlcontainer').hide();\n        };\n        return ExperimentContext;\n    }();\n    KineticContext = function (_super) {\n        __extends(KineticContext, _super);\n        function KineticContext(stage) {\n            this.stage = stage;\n            KineticContext.__super__.constructor.call(this, new DefaultComponentFactory());\n            this.contentLayer = new Kinetic.Layer({ clearBeforeDraw: true });\n            this.backgroundLayer = new Kinetic.Layer({ clearBeforeDraw: true });\n            this.background = new Background([], { fill: 'white' });\n            this.stage.add(this.backgroundLayer);\n            this.stage.add(this.contentLayer);\n            this.insertHTMLDiv();\n        }\n        KineticContext.prototype.insertHTMLDiv = function () {\n            KineticContext.__super__.insertHTMLDiv.apply(this, arguments);\n            return $('.kineticjs-content').css('position', 'absolute');\n        };\n        KineticContext.prototype.setBackground = function (newBackground) {\n            var p;\n            this.background = newBackground;\n            this.backgroundLayer.removeChildren();\n            p = this.background.render(this);\n            return p.present(this, this.backgroundLayer);\n        };\n        KineticContext.prototype.drawBackground = function () {\n            return this.backgroundLayer.draw();\n        };\n        KineticContext.prototype.clearBackground = function () {\n            return this.backgroundLayer.removeChildren();\n        };\n        KineticContext.prototype.clearContent = function (draw) {\n            if (draw == null) {\n                draw = false;\n            }\n            this.clearHtml();\n            this.backgroundLayer.draw();\n            this.contentLayer.removeChildren();\n            if (draw) {\n                return this.draw();\n            }\n        };\n        KineticContext.prototype.draw = function () {\n            $('#container').focus();\n            return this.contentLayer.draw();\n        };\n        KineticContext.prototype.width = function () {\n            return this.stage.getWidth();\n        };\n        KineticContext.prototype.height = function () {\n            return this.stage.getHeight();\n        };\n        KineticContext.prototype.offsetX = function () {\n            return this.stage.getOffsetX();\n        };\n        KineticContext.prototype.offsetY = function () {\n            return this.stage.getOffsetY();\n        };\n        KineticContext.prototype.showStimulus = function (stimulus) {\n            var p;\n            p = stimulus.render(this);\n            p.present(this);\n            console.log('show Stimulus, drawing');\n            return this.draw();\n        };\n        KineticContext.prototype.keydownStream = function () {\n            return Bacon.fromEventTarget(window, 'keydown');\n        };\n        KineticContext.prototype.keypressStream = function () {\n            return Bacon.fromEventTarget(window, 'keypress');\n        };\n        KineticContext.prototype.mousepressStream = function () {\n            var MouseBus;\n            MouseBus = function () {\n                function MouseBus() {\n                    this.stream = new Bacon.Bus();\n                    this.handler = function (_this) {\n                        return function (x) {\n                            return _this.stream.push(x);\n                        };\n                    }(this);\n                    this.stage.on('mousedown', this.handler);\n                }\n                MouseBus.prototype.stop = function () {\n                    this.stage.off('mousedown', this.handler);\n                    return this.stream.end();\n                };\n                return MouseBus;\n            }();\n            return new MouseBus();\n        };\n        return KineticContext;\n    }(exports.ExperimentContext);\n    exports.KineticContext = KineticContext;\n    buildStimulus = function (spec, context) {\n        var params, stimType;\n        stimType = _.keys(spec)[0];\n        params = _.values(spec)[0];\n        console.log('stimType', stimType);\n        console.log('params', params);\n        return context.stimFactory.makeStimulus(stimType, params, context);\n    };\n    buildResponse = function (spec, context) {\n        var params, responseType;\n        responseType = _.keys(spec)[0];\n        params = _.values(spec)[0];\n        return context.stimFactory.makeResponse(responseType, params, context);\n    };\n    buildEvent = function (spec, context) {\n        var response, responseSpec, stim, stimSpec;\n        stimSpec = _.omit(spec, 'Next');\n        responseSpec = _.pick(spec, 'Next');\n        if (responseSpec == null || _.isEmpty(responseSpec)) {\n            stim = buildStimulus(stimSpec, context);\n            if (!stim instanceof Response) {\n                throw new Error('buildEvent: Missing Response from event: ', spec);\n            }\n            return context.stimFactory.makeEvent(stim, stim, context);\n        } else {\n            stim = buildStimulus(stimSpec, context);\n            response = buildResponse(responseSpec.Next, context);\n            return context.stimFactory.makeEvent(stim, response, context);\n        }\n    };\n    buildTrial = function (eventSpec, record, context, feedback, backgroundSpec) {\n        var background, events, key, value;\n        events = function () {\n            var _results;\n            _results = [];\n            for (key in eventSpec) {\n                value = eventSpec[key];\n                _results.push(context.stimFactory.buildEvent(value));\n            }\n            return _results;\n        }();\n        if (backgroundSpec != null) {\n            background = context.stimFactory.makeStimulus('Background', backgroundSpec);\n            return new Trial(events, record, feedback, background);\n        } else {\n            return new Trial(events, record, feedback);\n        }\n    };\n    makeEventSeq = function (spec, context) {\n        var key, response, responseSpec, stim, stimSpec, value, _results;\n        _results = [];\n        for (key in spec) {\n            value = spec[key];\n            stimSpec = _.omit(value, 'Next');\n            responseSpec = _.pick(value, 'Next');\n            console.log('building stim', stimSpec);\n            stim = buildStimulus(stimSpec, context);\n            response = buildResponse(responseSpec.Next, context);\n            _results.push(context.stimFactory.makeEvent(stim, response, context));\n        }\n        return _results;\n    };\n    buildPrelude = function (preludeSpec, context) {\n        var events;\n        events = makeEventSeq(preludeSpec, context);\n        return new Prelude(events);\n    };\n    buildCoda = function (codaSpec, context) {\n        var events;\n        events = makeEventSeq(codaSpec, context);\n        return new Coda(events);\n    };\n    __dummySpec = {\n        Events: {\n            1: {\n                Nothing: '',\n                Next: { Timeout: { duration: 0 } }\n            }\n        }\n    };\n    exports.Presenter = Presenter = function () {\n        function Presenter(trialList, display, context) {\n            this.trialList = trialList;\n            this.display = display;\n            this.context = context;\n            this.trialBuilder = this.display.Trial;\n            this.prelude = this.display.Prelude != null ? buildPrelude(this.display.Prelude.Events, this.context) : buildPrelude(__dummySpec.Events, this.context);\n            this.coda = this.display.Coda != null ? buildCoda(this.display.Coda.Events, this.context) : (console.log('building dummy coda'), buildCoda(__dummySpec.Events, this.context));\n        }\n        Presenter.prototype.start = function () {\n            var args, block, record, trialNum, trialSpec, trials;\n            this.blockList = new BlockSeq(function () {\n                var _i, _len, _ref, _results;\n                _ref = this.trialList.blocks;\n                _results = [];\n                for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n                    block = _ref[_i];\n                    trials = function () {\n                        var _j, _ref1, _results1;\n                        _results1 = [];\n                        for (trialNum = _j = 0, _ref1 = block.length; 0 <= _ref1 ? _j < _ref1 : _j > _ref1; trialNum = 0 <= _ref1 ? ++_j : --_j) {\n                            record = _.clone(block[trialNum]);\n                            args = {};\n                            args.trial = record;\n                            args.screen = this.context.screenInfo();\n                            trialSpec = this.trialBuilder.apply(args);\n                            _results1.push(buildTrial(trialSpec.Events, record, this.context, trialSpec.Feedback, trialSpec.Background));\n                        }\n                        return _results1;\n                    }.call(this);\n                    _results.push(new Block(trials, this.display.Block));\n                }\n                return _results;\n            }.call(this));\n            return this.prelude.start(this.context).then(function (_this) {\n                return function () {\n                    return _this.blockList.start(_this.context);\n                };\n            }(this)).then(function (_this) {\n                return function () {\n                    console.log('inside coda');\n                    return _this.coda.start(_this.context);\n                };\n            }(this));\n        };\n        return Presenter;\n    }();\n    exports.Experiment = Experiment = function () {\n        function Experiment(designSpec, stimFactory) {\n            this.designSpec = designSpec;\n            this.stimFactory = stimFactory != null ? stimFactory : new MockStimFactory();\n            this.design = new ExpDesign(this.designSpec);\n            this.display = this.designSpec.Display;\n            this.trialGenerator = this.display.Trial;\n        }\n        Experiment.prototype.buildStimulus = function (event, context) {\n            var params, stimType;\n            stimType = _.keys(event)[0];\n            params = _.values(event)[0];\n            return this.stimFactory.makeStimulus(stimType, params, context);\n        };\n        Experiment.prototype.buildEvent = function (event, context) {\n            var params, responseType;\n            responseType = _.keys(event)[0];\n            params = _.values(event)[0];\n            return this.stimFactory.makeResponse(responseType, params, context);\n        };\n        Experiment.prototype.buildTrial = function (eventSpec, record, context) {\n            var events, key, response, responseSpec, stim, stimSpec, value;\n            events = function () {\n                var _results;\n                _results = [];\n                for (key in eventSpec) {\n                    value = eventSpec[key];\n                    stimSpec = _.omit(value, 'Next');\n                    responseSpec = _.pick(value, 'Next');\n                    stim = this.buildStimulus(stimSpec);\n                    response = this.buildResponse(responseSpec.Next);\n                    _results.push(this.stimFactory.makeEvent(stim, response));\n                }\n                return _results;\n            }.call(this);\n            return new Trial(events, record);\n        };\n        Experiment.prototype.start = function (context) {\n            var i, record, trialList, trialSpec, trials;\n            trials = this.design.fullDesign;\n            console.log(trials.nrow());\n            trialList = function () {\n                var _i, _ref, _results;\n                _results = [];\n                for (i = _i = 0, _ref = trials.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                    record = trials.record(i);\n                    record.$trialNumber = i;\n                    trialSpec = this.trialGenerator(record);\n                    _results.push(this.buildTrial(trialSpec, record, context));\n                }\n                return _results;\n            }.call(this);\n            return context.start(trialList);\n        };\n        return Experiment;\n    }();\n    exports.letters = [\n        'a',\n        'b',\n        'c',\n        'd',\n        'e',\n        'd',\n        'f',\n        'g',\n        'h',\n        'i',\n        'j',\n        'k',\n        'l',\n        'm',\n        'n',\n        'o',\n        'p',\n        'q',\n        'r',\n        's',\n        't',\n        'u',\n        'v',\n        'w',\n        'x',\n        'y',\n        'z'\n    ];\n    des = {\n        Design: {\n            Blocks: [\n                [{\n                        a: 1,\n                        b: 2,\n                        c: 3,\n                        a: 2,\n                        b: 3,\n                        c: 4\n                    }],\n                [{\n                        a: 5,\n                        b: 7,\n                        c: 6,\n                        a: 5,\n                        b: 7,\n                        c: 6\n                    }]\n            ]\n        }\n    };\n    console.log(des.Blocks);\n    exports.buildStimulus = buildStimulus;\n    exports.buildResponse = buildResponse;\n    exports.buildEvent = buildEvent;\n    exports.buildTrial = buildTrial;\n    exports.buildPrelude = buildPrelude;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/psycloud.js\"],\"names\":[\"Background\",\"Bacon\",\"Block\",\"BlockSeq\",\"Coda\",\"DataTable\",\"DefaultComponentFactory\",\"Event\",\"EventData\",\"EventDataLog\",\"Experiment\",\"ExperimentContext\",\"ExperimentState\",\"FeedbackNode\",\"FunctionNode\",\"Kinetic\",\"KineticContext\",\"MockStimFactory\",\"Prelude\",\"Presenter\",\"Q\",\"Response\",\"ResponseData\",\"RunnableNode\",\"StimFactory\",\"Stimulus\",\"TAFFY\",\"Trial\",\"buildCoda\",\"buildEvent\",\"buildPrelude\",\"buildResponse\",\"buildStimulus\",\"buildTrial\",\"createContext\",\"des\",\"functionNode\",\"makeEventSeq\",\"utils\",\"_\",\"__dummySpec\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"taffy\",\"exports\",\"name\",\"id\",\"data\",\"eventStack\",\"push\",\"ev\",\"last\",\"length\",\"findAll\",\"filter\",\"findLast\",\"i\",\"len\",\"_i\",\"spec\",\"context\",\"params\",\"stimType\",\"keys\",\"values\",\"makeStimulus\",\"responseType\",\"makeResponse\",\"response\",\"responseSpec\",\"stim\",\"stimSpec\",\"Next\",\"Error\",\"omit\",\"pick\",\"makeEvent\",\"_super\",\"apply\",\"arguments\",\"ret\",\"functionList\",\"nodes\",\"callback\",\"map\",\"node\",\"arg\",\"handleValue\",\"start\",\"chainFunctions\",\"funArray\",\"fun\",\"result\",\"_len\",\"resolve\",\"then\",\"err\",\"console\",\"log\",\"stack\",\"children\",\"before\",\"after\",\"numChildren\",\"farray\",\"flatten\",\"stop\",\"fcall\",\"feedback\",\"args\",\"event\",\"idSet\",\"obj\",\"trialData\",\"get\",\"extend\",\"stimFactory\",\"stimulus\",\"self\",\"_this\",\"p\",\"exState\",\"inPrelude\",\"updateState\",\"nextEvent\",\"overlay\",\"clearContent\",\"render\",\"present\",\"draw\",\"events\",\"record\",\"background\",\"numEvents\",\"nextTrial\",\"clearBackground\",\"setBackground\",\"drawBackground\",\"blockSpec\",\"showEvent\",\"nextBlock\",\"Start\",\"toRecord\",\"blockData\",\"curid\",\"ids\",\"out\",\"End\",\"unique\",\"select\",\"fromRecords\",\"insidePrelude\",\"outsidePrelude\",\"trial\",\"block\",\"blockNumber\",\"trialNumber\",\"eventNumber\",\"$\",\"value\",\"_ref\",\"_ref1\",\"_ref10\",\"_ref2\",\"_ref3\",\"_ref4\",\"_ref5\",\"_ref6\",\"_ref7\",\"_ref8\",\"_ref9\",\"stimulusID\",\"responseID\",\"isEmpty\",\"stage\",\"Stage\",\"container\",\"width\",\"height\",\"userData\",\"eventData\",\"currentTrial\",\"numBlocks\",\"pushData\",\"withState\",\"insert\",\"offsetX\",\"offsetY\",\"centerX\",\"centerY\",\"screenInfo\",\"offset\",\"x\",\"y\",\"center\",\"logEvent\",\"clone\",\"blockNum\",\"allData\",\"showStimulus\",\"blockList\",\"error\",\"_error\",\"keydownStream\",\"fromEventTarget\",\"window\",\"keypressStream\",\"mousepressStream\",\"insertHTMLDiv\",\"css\",\"append\",\"position\",\"outline\",\"padding\",\"attr\",\"clearHtml\",\"empty\",\"hide\",\"appendHtml\",\"input\",\"addClass\",\"show\",\"hideHtml\",\"contentLayer\",\"Layer\",\"clearBeforeDraw\",\"backgroundLayer\",\"fill\",\"add\",\"newBackground\",\"removeChildren\",\"focus\",\"getWidth\",\"getHeight\",\"getOffsetX\",\"getOffsetY\",\"MouseBus\",\"stream\",\"Bus\",\"handler\",\"on\",\"off\",\"end\",\"eventSpec\",\"backgroundSpec\",\"_results\",\"preludeSpec\",\"codaSpec\",\"Events\",\"Nothing\",\"Timeout\",\"duration\",\"trialList\",\"display\",\"trialBuilder\",\"prelude\",\"coda\",\"trialNum\",\"trialSpec\",\"trials\",\"blocks\",\"_j\",\"_results1\",\"screen\",\"Feedback\",\"designSpec\",\"design\",\"ExpDesign\",\"Display\",\"trialGenerator\",\"fullDesign\",\"nrow\",\"$trialNumber\",\"letters\",\"Design\",\"Blocks\",\"a\",\"b\",\"c\"],\"mappings\":\"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\"}","lineCount":1000,"mtime":1395245873000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/q/q.js","canonicalName":"node_modules/q/q.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/taffydb/taffy.js","canonicalName":"node_modules/taffydb/taffy.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/utils.js","canonicalName":"lib/utils.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/datatable.js","canonicalName":"lib/datatable.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/baconjs/dist/Bacon.js","canonicalName":"node_modules/baconjs/dist/Bacon.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/factory.js","canonicalName":"lib/factory.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/background.js","canonicalName":"lib/components/canvas/background.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var Background, Bacon, Block, BlockSeq, Coda, DataTable, DefaultComponentFactory, Event, EventData, EventDataLog, Experiment, ExperimentContext, ExperimentState, FeedbackNode, FunctionNode, Kinetic, KineticContext, MockStimFactory, Prelude, Presenter, Q, Response, ResponseData, RunnableNode, StimFactory, Stimulus, TAFFY, Trial, buildCoda, buildEvent, buildPrelude, buildResponse, buildStimulus, buildTrial, createContext, des, functionNode, makeEventSeq, utils, _, __dummySpec,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  _ = require('lodash');\n\n  Q = require(\"q\");\n\n  TAFFY = require(\"taffydb\").taffy;\n\n  utils = require(\"./utils\");\n\n  DataTable = require(\"./datatable\").DataTable;\n\n  Bacon = require(\"baconjs\");\n\n  DefaultComponentFactory = require(\"./factory\").DefaultComponentFactory;\n\n  Background = require(\"./components/canvas/background\").Background;\n\n  Kinetic = require(\"../jslibs/kinetic\").Kinetic;\n\n  Stimulus = require(\"./stimresp\").Stimulus;\n\n  Response = require(\"./stimresp\").Response;\n\n  ResponseData = require(\"./stimresp\").ResponseData;\n\n  exports.EventData = EventData = (function() {\n    function EventData(name, id, data) {\n      this.name = name;\n      this.id = id;\n      this.data = data;\n    }\n\n    return EventData;\n\n  })();\n\n  exports.EventDataLog = EventDataLog = (function() {\n    function EventDataLog() {\n      this.eventStack = [];\n    }\n\n    EventDataLog.prototype.push = function(ev) {\n      return this.eventStack.push(ev);\n    };\n\n    EventDataLog.prototype.last = function() {\n      if (this.eventStack.length < 1) {\n        throw \"EventLog is Empty, canot access last element\";\n      }\n      return this.eventStack[this.eventStack.length - 1].data;\n    };\n\n    EventDataLog.prototype.findAll = function(id) {\n      return _.filter(this.eventStack, function(ev) {\n        return ev.id === id;\n      });\n    };\n\n    EventDataLog.prototype.findLast = function(id) {\n      var i, len, _i;\n      len = this.eventStack.length - 1;\n      for (i = _i = len; len <= 0 ? _i <= 0 : _i >= 0; i = len <= 0 ? ++_i : --_i) {\n        if (this.eventStack[i].id === id) {\n          return this.eventStack[i];\n        }\n      }\n    };\n\n    return EventDataLog;\n\n  })();\n\n  exports.StimFactory = StimFactory = (function() {\n    function StimFactory() {}\n\n    StimFactory.prototype.buildStimulus = function(spec, context) {\n      var params, stimType;\n      stimType = _.keys(spec)[0];\n      params = _.values(spec)[0];\n      return this.makeStimulus(stimType, params, context);\n    };\n\n    StimFactory.prototype.buildResponse = function(spec, context) {\n      var params, responseType;\n      responseType = _.keys(spec)[0];\n      params = _.values(spec)[0];\n      return this.makeResponse(responseType, params, context);\n    };\n\n    StimFactory.prototype.buildEvent = function(spec, context) {\n      var response, responseSpec, stim, stimSpec;\n      if (spec.Next == null) {\n        throw new Error(\"Event specification does not contain 'Next' element\");\n      }\n      stimSpec = _.omit(spec, \"Next\");\n      responseSpec = _.pick(spec, \"Next\");\n      stim = this.buildStimulus(stimSpec, context);\n      response = this.buildResponse(responseSpec.Next, context);\n      return this.makeEvent(stim, response, context);\n    };\n\n    StimFactory.prototype.makeStimulus = function(name, params, context) {\n      throw new Error(\"unimplemented\");\n    };\n\n    StimFactory.prototype.makeResponse = function(name, params, context) {\n      throw new Error(\"unimplemented\");\n    };\n\n    StimFactory.prototype.makeEvent = function(stim, response, context) {\n      throw new Error(\"unimplemented\");\n    };\n\n    return StimFactory;\n\n  })();\n\n  exports.MockStimFactory = MockStimFactory = (function(_super) {\n    __extends(MockStimFactory, _super);\n\n    function MockStimFactory() {\n      return MockStimFactory.__super__.constructor.apply(this, arguments);\n    }\n\n    MockStimFactory.prototype.makeStimulus = function(name, params, context) {\n      var ret;\n      ret = {};\n      ret[name] = params;\n      return ret;\n    };\n\n    MockStimFactory.prototype.makeResponse = function(name, params, context) {\n      var ret;\n      ret = {};\n      ret[name] = params;\n      return ret;\n    };\n\n    MockStimFactory.prototype.makeEvent = function(stim, response, context) {\n      return [stim, response];\n    };\n\n    return MockStimFactory;\n\n  })(exports.StimFactory);\n\n  RunnableNode = (function() {\n    RunnableNode.functionList = function(nodes, context, callback) {\n      return _.map(nodes, function(node) {\n        return function(arg) {\n          context.handleValue(arg);\n          if (callback != null) {\n            callback(node);\n          }\n          return node.start(context);\n        };\n      });\n    };\n\n    RunnableNode.chainFunctions = function(funArray) {\n      var fun, result, _i, _len;\n      result = Q.resolve(0);\n      for (_i = 0, _len = funArray.length; _i < _len; _i++) {\n        fun = funArray[_i];\n        result = result.then(fun, function(err) {\n          return console.log(\"error stack: \", err.stack);\n        });\n      }\n      return result;\n    };\n\n    function RunnableNode(children) {\n      this.children = children;\n    }\n\n    RunnableNode.prototype.before = function(context) {\n      return new FunctionNode(function() {\n        return 0;\n      });\n    };\n\n    RunnableNode.prototype.after = function(context) {\n      return new FunctionNode(function() {\n        return 0;\n      });\n    };\n\n    RunnableNode.prototype.numChildren = function() {\n      return this.children.length;\n    };\n\n    RunnableNode.prototype.length = function() {\n      return this.children.length;\n    };\n\n    RunnableNode.prototype.start = function(context) {\n      var farray;\n      farray = RunnableNode.functionList(_.flatten([this.before(context), this.children, this.after(context)]), context, function(node) {\n        return console.log(\"node done\", node);\n      });\n      return RunnableNode.chainFunctions(farray);\n    };\n\n    RunnableNode.prototype.stop = function(context) {};\n\n    return RunnableNode;\n\n  })();\n\n  exports.RunnableNode = RunnableNode;\n\n  exports.FunctionNode = FunctionNode = (function(_super) {\n    __extends(FunctionNode, _super);\n\n    function FunctionNode(fun) {\n      this.fun = fun;\n    }\n\n    FunctionNode.prototype.start = function(context) {\n      return Q.fcall(this.fun);\n    };\n\n    return FunctionNode;\n\n  })(RunnableNode);\n\n  functionNode = function(fun) {\n    return new FunctionNode(fun);\n  };\n\n  exports.FeedbackNode = FeedbackNode = (function(_super) {\n    __extends(FeedbackNode, _super);\n\n    function FeedbackNode(feedback) {\n      this.feedback = feedback;\n    }\n\n    FeedbackNode.prototype.numChildren = function() {\n      return 1;\n    };\n\n    FeedbackNode.prototype.length = function() {\n      return 1;\n    };\n\n    FeedbackNode.prototype.start = function(context) {\n      var args, event, idSet, obj, spec, _i, _len;\n      if (this.feedback != null) {\n        args = context.trialData().get();\n        idSet = {};\n        for (_i = 0, _len = args.length; _i < _len; _i++) {\n          obj = args[_i];\n          if (obj[\"id\"] != null) {\n            idSet[obj[\"id\"]] = obj;\n          }\n        }\n        args = _.extend(args, idSet);\n        spec = this.feedback.apply(args);\n        event = context.stimFactory.buildEvent(spec, context);\n        return event.start(context);\n      } else {\n        return Q(0);\n      }\n    };\n\n    return FeedbackNode;\n\n  })(RunnableNode);\n\n  exports.Event = Event = (function(_super) {\n    __extends(Event, _super);\n\n    function Event(stimulus, response) {\n      this.stimulus = stimulus;\n      this.response = response;\n      Event.__super__.constructor.call(this, [this.response]);\n    }\n\n    Event.prototype.stop = function(context) {\n      this.stimulus.stop(context);\n      return this.response.stop(context);\n    };\n\n    Event.prototype.before = function(context) {\n      var self;\n      self = this;\n      return functionNode((function(_this) {\n        return function() {\n          var p;\n          if (!context.exState.inPrelude) {\n            context.updateState(function() {\n              return context.exState.nextEvent(self);\n            });\n          }\n          if (!_this.stimulus.overlay) {\n            context.clearContent();\n          }\n          p = _this.stimulus.render(context);\n          p.present(context);\n          return context.draw();\n        };\n      })(this));\n    };\n\n    Event.prototype.after = function(context) {\n      return functionNode((function(_this) {\n        return function() {\n          return _this.stimulus.stop(context);\n        };\n      })(this));\n    };\n\n    Event.prototype.start = function(context) {\n      return Event.__super__.start.call(this, context);\n    };\n\n    return Event;\n\n  })(RunnableNode);\n\n  exports.Trial = Trial = (function(_super) {\n    __extends(Trial, _super);\n\n    function Trial(events, record, feedback, background) {\n      if (events == null) {\n        events = [];\n      }\n      this.record = record != null ? record : {};\n      this.feedback = feedback;\n      this.background = background;\n      Trial.__super__.constructor.call(this, events);\n    }\n\n    Trial.prototype.numEvents = function() {\n      return this.children.length;\n    };\n\n    Trial.prototype.push = function(event) {\n      return this.children.push(event);\n    };\n\n    Trial.prototype.before = function(context) {\n      var self;\n      self = this;\n      return functionNode(((function(_this) {\n        return function() {\n          context.updateState(function() {\n            return context.exState.nextTrial(self);\n          });\n          context.clearBackground();\n          if (_this.background != null) {\n            console.log(\"drawing background\");\n            context.setBackground(_this.background);\n            return context.drawBackground();\n          }\n        };\n      })(this)));\n    };\n\n    Trial.prototype.after = function(context) {\n      return new FeedbackNode(this.feedback);\n    };\n\n    Trial.prototype.start = function(context, callback) {\n      var farray;\n      farray = RunnableNode.functionList(_.flatten([this.before(context), this.children, this.after(context)]), context, function(event) {\n        return console.log(\"event callback\", event);\n      });\n      return RunnableNode.chainFunctions(farray);\n    };\n\n    Trial.prototype.stop = function(context) {};\n\n    return Trial;\n\n  })(RunnableNode);\n\n  exports.Block = Block = (function(_super) {\n    __extends(Block, _super);\n\n    function Block(children, blockSpec) {\n      this.blockSpec = blockSpec;\n      Block.__super__.constructor.call(this, children);\n    }\n\n    Block.prototype.showEvent = function(spec, context) {\n      var event;\n      event = buildEvent(spec, context);\n      return event.start(context);\n    };\n\n    Block.prototype.before = function(context) {\n      var self;\n      self = this;\n      return functionNode((function(_this) {\n        return function() {\n          var args, spec;\n          context.updateState(function() {\n            return context.exState.nextBlock(self);\n          });\n          if ((_this.blockSpec != null) && _this.blockSpec.Start) {\n            args = _.extend(context.exState.toRecord(), {\n              context: context\n            });\n            spec = _this.blockSpec.Start.apply(args);\n            return _this.showEvent(spec, context);\n          } else {\n            return Q.fcall(0);\n          }\n        };\n      })(this));\n    };\n\n    Block.prototype.after = function(context) {\n      return functionNode(((function(_this) {\n        return function() {\n          var args, blockData, curid, ids, out, spec, _i, _len;\n          if ((_this.blockSpec != null) && _this.blockSpec.End) {\n            blockData = context.blockData();\n            ids = _.unique(blockData.select(\"id\"));\n            console.log(\"END ids\", ids);\n            out = {};\n            for (_i = 0, _len = ids.length; _i < _len; _i++) {\n              curid = ids[_i];\n              out[curid] = DataTable.fromRecords(blockData.filter({\n                id: curid\n              }).get());\n            }\n            args = _.extend(context.exState.toRecord(), {\n              context: context\n            }, out);\n            console.log(\"block end args\");\n            spec = _this.blockSpec.End.apply(args);\n            return _this.showEvent(spec, context);\n          } else {\n            return Q.fcall(0);\n          }\n        };\n      })(this)));\n    };\n\n    return Block;\n\n  })(RunnableNode);\n\n  exports.BlockSeq = BlockSeq = (function(_super) {\n    __extends(BlockSeq, _super);\n\n    function BlockSeq(children) {\n      BlockSeq.__super__.constructor.call(this, children);\n    }\n\n    return BlockSeq;\n\n  })(RunnableNode);\n\n  exports.Prelude = Prelude = (function(_super) {\n    __extends(Prelude, _super);\n\n    function Prelude(children) {\n      Prelude.__super__.constructor.call(this, children);\n    }\n\n    Prelude.prototype.before = function(context) {\n      return functionNode(((function(_this) {\n        return function() {\n          return context.updateState(function() {\n            return context.exState.insidePrelude();\n          });\n        };\n      })(this)));\n    };\n\n    Prelude.prototype.after = function(context) {\n      return functionNode(((function(_this) {\n        return function() {\n          return context.updateState(function() {\n            return context.exState.outsidePrelude();\n          });\n        };\n      })(this)));\n    };\n\n    return Prelude;\n\n  })(RunnableNode);\n\n  exports.Coda = Coda = (function(_super) {\n    __extends(Coda, _super);\n\n    function Coda(children) {\n      Coda.__super__.constructor.call(this, children);\n    }\n\n    return Coda;\n\n  })(RunnableNode);\n\n  exports.ExperimentState = ExperimentState = (function() {\n    function ExperimentState() {\n      this.inPrelude = false;\n      this.trial = {};\n      this.block = {};\n      this.event = {};\n      this.blockNumber = 0;\n      this.trialNumber = 0;\n      this.eventNumber = 0;\n      this.stimulus = {};\n      this.response = {};\n    }\n\n    ExperimentState.prototype.insidePrelude = function() {\n      var ret;\n      ret = $.extend({}, this);\n      ret.inPrelude = true;\n      return ret;\n    };\n\n    ExperimentState.prototype.outsidePrelude = function() {\n      var ret;\n      ret = $.extend({}, this);\n      ret.inPrelude = false;\n      return ret;\n    };\n\n    ExperimentState.prototype.nextBlock = function(block) {\n      var ret;\n      ret = $.extend({}, this);\n      ret.blockNumber = this.blockNumber + 1;\n      ret.block = block;\n      return ret;\n    };\n\n    ExperimentState.prototype.nextTrial = function(trial) {\n      var ret;\n      ret = $.extend({}, this);\n      ret.trial = trial;\n      ret.trialNumber = this.trialNumber + 1;\n      return ret;\n    };\n\n    ExperimentState.prototype.nextEvent = function(event) {\n      var ret;\n      ret = $.extend({}, this);\n      ret.event = event;\n      ret.eventNumber = this.eventNumber + 1;\n      return ret;\n    };\n\n    ExperimentState.prototype.toRecord = function() {\n      var key, ret, value, _ref, _ref1, _ref10, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9;\n      ret = {\n        blockNumber: this.blockNumber,\n        trialNumber: this.trialNumber,\n        eventNumber: this.eventNumber,\n        stimulus: (_ref = this.event) != null ? (_ref1 = _ref.stimulus) != null ? (_ref2 = _ref1.constructor) != null ? _ref2.name : void 0 : void 0 : void 0,\n        response: (_ref3 = this.event) != null ? (_ref4 = _ref3.response) != null ? (_ref5 = _ref4.constructor) != null ? _ref5.name : void 0 : void 0 : void 0,\n        stimulusID: (_ref6 = this.event) != null ? (_ref7 = _ref6.stimulus) != null ? _ref7.id : void 0 : void 0,\n        responseID: (_ref8 = this.event) != null ? (_ref9 = _ref8.response) != null ? _ref9.id : void 0 : void 0\n      };\n      if (!_.isEmpty(this.trial) && (this.trial.record != null)) {\n        _ref10 = this.trial.record;\n        for (key in _ref10) {\n          value = _ref10[key];\n          ret[key] = value;\n        }\n      }\n      return ret;\n    };\n\n    return ExperimentState;\n\n  })();\n\n  createContext = function(id) {\n    var stage;\n    if (id == null) {\n      id = \"container\";\n    }\n    stage = new Kinetic.Stage({\n      container: id,\n      width: $(\"#\" + id).width(),\n      height: $(\"#\" + id).height()\n    });\n    return new KineticContext(stage);\n  };\n\n  exports.createContext = createContext;\n\n\n  /*\n    class UserData\n    constructor: ->\n      @userData = TAFFY({})\n  \n    blockData: (blockNum=null) ->\n      if not blockNum?\n        blockNum = @exState.blockNumber\n  \n      @userData.filter({ blockNumber: blockNum })\n   */\n\n  exports.ExperimentContext = ExperimentContext = (function() {\n    function ExperimentContext(stimFactory) {\n      this.stimFactory = stimFactory;\n      this.userData = TAFFY({});\n      this.exState = new ExperimentState();\n      this.eventData = new EventDataLog();\n      this.log = [];\n      this.trialNumber = 0;\n      this.currentTrial = new Trial([], {});\n      this.numBlocks = 0;\n    }\n\n    ExperimentContext.prototype.updateState = function(fun) {\n      this.exState = fun(this.exState);\n      return this.exState;\n    };\n\n    ExperimentContext.prototype.pushData = function(data, withState) {\n      var record;\n      if (withState == null) {\n        withState = true;\n      }\n      console.log(\"pushing data\", data);\n      if (withState) {\n        record = _.extend(this.exState.toRecord(), data);\n      } else {\n        record = data;\n      }\n      return this.userData.insert(record);\n    };\n\n    ExperimentContext.prototype.handleValue = function(arg) {\n      if ((arg != null) && arg instanceof ResponseData) {\n        return this.pushData(arg.data);\n      }\n    };\n\n    ExperimentContext.prototype.width = function() {\n      return 0;\n    };\n\n    ExperimentContext.prototype.height = function() {\n      return 0;\n    };\n\n    ExperimentContext.prototype.offsetX = function() {\n      return 0;\n    };\n\n    ExperimentContext.prototype.offsetY = function() {\n      return 0;\n    };\n\n    ExperimentContext.prototype.centerX = function() {\n      return this.width() / 2 + this.offsetX();\n    };\n\n    ExperimentContext.prototype.centerY = function() {\n      return this.height() / 2 + this.offsetY();\n    };\n\n    ExperimentContext.prototype.screenInfo = function() {\n      return {\n        width: this.width(),\n        height: this.height(),\n        offset: {\n          x: this.offsetX(),\n          y: this.offsetY()\n        },\n        center: {\n          x: this.centerX(),\n          y: this.centerY()\n        }\n      };\n    };\n\n    ExperimentContext.prototype.logEvent = function(key, value) {\n      var record;\n      record = _.clone(this.currentTrial.record);\n      record[key] = value;\n      this.log.push(record);\n      return console.log(this.log);\n    };\n\n    ExperimentContext.prototype.trialData = function() {\n      var ret;\n      ret = this.userData().filter({\n        trialNumber: this.exState.trialNumber\n      });\n      if (ret.length === 1) {\n        return ret[0];\n      } else {\n        return ret;\n      }\n    };\n\n    ExperimentContext.prototype.blockData = function(args) {\n      if (args == null) {\n        args = {\n          blockNum: null,\n          name: null\n        };\n      }\n      if (args.blockNum == null) {\n        args.blockNum = this.exState.blockNumber;\n      }\n      if (!args.name) {\n        return this.userData().filter({\n          blockNumber: args.blockNum\n        });\n      } else {\n        return this.userData().filter({\n          blockNumber: args.blockNum\n        }).select(args.name);\n      }\n    };\n\n    ExperimentContext.prototype.allData = function(args) {\n      if (args == null) {\n        args = {\n          name: null\n        };\n      }\n      if (!args.name) {\n        return this.userData();\n      } else {\n        return this.userData().select(args.name);\n      }\n    };\n\n    ExperimentContext.prototype.showEvent = function(event) {\n      return event.start(this);\n    };\n\n    ExperimentContext.prototype.showStimulus = function(stimulus) {\n      var p;\n      p = stimulus.render(this);\n      p.present(this);\n      console.log(\"show Stimulus, drawing\");\n      return this.draw();\n    };\n\n    ExperimentContext.prototype.start = function(blockList) {\n      var error, farray;\n      this.numBlocks = blockList.length();\n      try {\n        farray = RunnableNode.functionList(blockList, this, function(block) {\n          return console.log(\"block callback\", block);\n        });\n        return RunnableNode.chainFunctions(farray);\n      } catch (_error) {\n        error = _error;\n        return console.log(\"caught error:\", error);\n      }\n    };\n\n    ExperimentContext.prototype.clearContent = function() {};\n\n    ExperimentContext.prototype.clearBackground = function() {};\n\n    ExperimentContext.prototype.keydownStream = function() {\n      return Bacon.fromEventTarget(window, \"keydown\");\n    };\n\n    ExperimentContext.prototype.keypressStream = function() {\n      return Bacon.fromEventTarget(window, \"keypress\");\n    };\n\n    ExperimentContext.prototype.mousepressStream = function() {};\n\n    ExperimentContext.prototype.draw = function() {};\n\n    ExperimentContext.prototype.insertHTMLDiv = function() {\n      $(\"canvas\").css(\"position\", \"absolute\");\n      $(\"#container\").append(\"<div id=\\\"htmlcontainer\\\" class=\\\"htmllayer\\\"></div>\");\n      $(\"#htmlcontainer\").css({\n        position: \"absolute\",\n        \"z-index\": 999,\n        outline: \"none\",\n        padding: \"5px\"\n      });\n      $(\"#container\").attr(\"tabindex\", 0);\n      return $(\"#container\").css(\"outline\", \"none\");\n    };\n\n    ExperimentContext.prototype.clearHtml = function() {\n      $(\"#htmlcontainer\").empty();\n      return $(\"#htmlcontainer\").hide();\n    };\n\n    ExperimentContext.prototype.appendHtml = function(input) {\n      $(\"#htmlcontainer\").addClass(\"htmllayer\");\n      $(\"#htmlcontainer\").append(input);\n      return $(\"#htmlcontainer\").show();\n    };\n\n    ExperimentContext.prototype.hideHtml = function() {\n      return $(\"#htmlcontainer\").hide();\n    };\n\n    return ExperimentContext;\n\n  })();\n\n  KineticContext = (function(_super) {\n    __extends(KineticContext, _super);\n\n    function KineticContext(stage) {\n      this.stage = stage;\n      KineticContext.__super__.constructor.call(this, new DefaultComponentFactory());\n      this.contentLayer = new Kinetic.Layer({\n        clearBeforeDraw: true\n      });\n      this.backgroundLayer = new Kinetic.Layer({\n        clearBeforeDraw: true\n      });\n      this.background = new Background([], {\n        fill: \"white\"\n      });\n      this.stage.add(this.backgroundLayer);\n      this.stage.add(this.contentLayer);\n      this.insertHTMLDiv();\n    }\n\n    KineticContext.prototype.insertHTMLDiv = function() {\n      KineticContext.__super__.insertHTMLDiv.apply(this, arguments);\n      return $(\".kineticjs-content\").css(\"position\", \"absolute\");\n    };\n\n    KineticContext.prototype.setBackground = function(newBackground) {\n      var p;\n      this.background = newBackground;\n      this.backgroundLayer.removeChildren();\n      p = this.background.render(this);\n      return p.present(this, this.backgroundLayer);\n    };\n\n    KineticContext.prototype.drawBackground = function() {\n      return this.backgroundLayer.draw();\n    };\n\n    KineticContext.prototype.clearBackground = function() {\n      return this.backgroundLayer.removeChildren();\n    };\n\n    KineticContext.prototype.clearContent = function(draw) {\n      if (draw == null) {\n        draw = false;\n      }\n      this.clearHtml();\n      this.backgroundLayer.draw();\n      this.contentLayer.removeChildren();\n      if (draw) {\n        return this.draw();\n      }\n    };\n\n    KineticContext.prototype.draw = function() {\n      $('#container').focus();\n      return this.contentLayer.draw();\n    };\n\n    KineticContext.prototype.width = function() {\n      return this.stage.getWidth();\n    };\n\n    KineticContext.prototype.height = function() {\n      return this.stage.getHeight();\n    };\n\n    KineticContext.prototype.offsetX = function() {\n      return this.stage.getOffsetX();\n    };\n\n    KineticContext.prototype.offsetY = function() {\n      return this.stage.getOffsetY();\n    };\n\n    KineticContext.prototype.showStimulus = function(stimulus) {\n      var p;\n      p = stimulus.render(this);\n      p.present(this);\n      console.log(\"show Stimulus, drawing\");\n      return this.draw();\n    };\n\n    KineticContext.prototype.keydownStream = function() {\n      return Bacon.fromEventTarget(window, \"keydown\");\n    };\n\n    KineticContext.prototype.keypressStream = function() {\n      return Bacon.fromEventTarget(window, \"keypress\");\n    };\n\n    KineticContext.prototype.mousepressStream = function() {\n      var MouseBus;\n      MouseBus = (function() {\n        function MouseBus() {\n          this.stream = new Bacon.Bus();\n          this.handler = (function(_this) {\n            return function(x) {\n              return _this.stream.push(x);\n            };\n          })(this);\n          this.stage.on(\"mousedown\", this.handler);\n        }\n\n        MouseBus.prototype.stop = function() {\n          this.stage.off(\"mousedown\", this.handler);\n          return this.stream.end();\n        };\n\n        return MouseBus;\n\n      })();\n      return new MouseBus();\n    };\n\n    return KineticContext;\n\n  })(exports.ExperimentContext);\n\n  exports.KineticContext = KineticContext;\n\n  buildStimulus = function(spec, context) {\n    var params, stimType;\n    stimType = _.keys(spec)[0];\n    params = _.values(spec)[0];\n    console.log(\"stimType\", stimType);\n    console.log(\"params\", params);\n    return context.stimFactory.makeStimulus(stimType, params, context);\n  };\n\n  buildResponse = function(spec, context) {\n    var params, responseType;\n    responseType = _.keys(spec)[0];\n    params = _.values(spec)[0];\n    return context.stimFactory.makeResponse(responseType, params, context);\n  };\n\n  buildEvent = function(spec, context) {\n    var response, responseSpec, stim, stimSpec;\n    stimSpec = _.omit(spec, \"Next\");\n    responseSpec = _.pick(spec, \"Next\");\n    if ((responseSpec == null) || _.isEmpty(responseSpec)) {\n      stim = buildStimulus(stimSpec, context);\n      if (!stim instanceof Response) {\n        throw new Error(\"buildEvent: Missing Response from event: \", spec);\n      }\n      return context.stimFactory.makeEvent(stim, stim, context);\n    } else {\n      stim = buildStimulus(stimSpec, context);\n      response = buildResponse(responseSpec.Next, context);\n      return context.stimFactory.makeEvent(stim, response, context);\n    }\n  };\n\n  buildTrial = function(eventSpec, record, context, feedback, backgroundSpec) {\n    var background, events, key, value;\n    events = (function() {\n      var _results;\n      _results = [];\n      for (key in eventSpec) {\n        value = eventSpec[key];\n        _results.push(context.stimFactory.buildEvent(value));\n      }\n      return _results;\n    })();\n    if (backgroundSpec != null) {\n      background = context.stimFactory.makeStimulus(\"Background\", backgroundSpec);\n      return new Trial(events, record, feedback, background);\n    } else {\n      return new Trial(events, record, feedback);\n    }\n  };\n\n  makeEventSeq = function(spec, context) {\n    var key, response, responseSpec, stim, stimSpec, value, _results;\n    _results = [];\n    for (key in spec) {\n      value = spec[key];\n      stimSpec = _.omit(value, \"Next\");\n      responseSpec = _.pick(value, \"Next\");\n      console.log(\"building stim\", stimSpec);\n      stim = buildStimulus(stimSpec, context);\n      response = buildResponse(responseSpec.Next, context);\n      _results.push(context.stimFactory.makeEvent(stim, response, context));\n    }\n    return _results;\n  };\n\n  buildPrelude = function(preludeSpec, context) {\n    var events;\n    events = makeEventSeq(preludeSpec, context);\n    return new Prelude(events);\n  };\n\n  buildCoda = function(codaSpec, context) {\n    var events;\n    events = makeEventSeq(codaSpec, context);\n    return new Coda(events);\n  };\n\n  __dummySpec = {\n    Events: {\n      1: {\n        Nothing: \"\",\n        Next: {\n          Timeout: {\n            duration: 0\n          }\n        }\n      }\n    }\n  };\n\n  exports.Presenter = Presenter = (function() {\n    function Presenter(trialList, display, context) {\n      this.trialList = trialList;\n      this.display = display;\n      this.context = context;\n      this.trialBuilder = this.display.Trial;\n      this.prelude = this.display.Prelude != null ? buildPrelude(this.display.Prelude.Events, this.context) : buildPrelude(__dummySpec.Events, this.context);\n      this.coda = this.display.Coda != null ? buildCoda(this.display.Coda.Events, this.context) : (console.log(\"building dummy coda\"), buildCoda(__dummySpec.Events, this.context));\n    }\n\n    Presenter.prototype.start = function() {\n      var args, block, record, trialNum, trialSpec, trials;\n      this.blockList = new BlockSeq((function() {\n        var _i, _len, _ref, _results;\n        _ref = this.trialList.blocks;\n        _results = [];\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          block = _ref[_i];\n          trials = (function() {\n            var _j, _ref1, _results1;\n            _results1 = [];\n            for (trialNum = _j = 0, _ref1 = block.length; 0 <= _ref1 ? _j < _ref1 : _j > _ref1; trialNum = 0 <= _ref1 ? ++_j : --_j) {\n              record = _.clone(block[trialNum]);\n              args = {};\n              args.trial = record;\n              args.screen = this.context.screenInfo();\n              trialSpec = this.trialBuilder.apply(args);\n              _results1.push(buildTrial(trialSpec.Events, record, this.context, trialSpec.Feedback, trialSpec.Background));\n            }\n            return _results1;\n          }).call(this);\n          _results.push(new Block(trials, this.display.Block));\n        }\n        return _results;\n      }).call(this));\n      return this.prelude.start(this.context).then((function(_this) {\n        return function() {\n          return _this.blockList.start(_this.context);\n        };\n      })(this)).then((function(_this) {\n        return function() {\n          console.log(\"inside coda\");\n          return _this.coda.start(_this.context);\n        };\n      })(this));\n    };\n\n    return Presenter;\n\n  })();\n\n  exports.Experiment = Experiment = (function() {\n    function Experiment(designSpec, stimFactory) {\n      this.designSpec = designSpec;\n      this.stimFactory = stimFactory != null ? stimFactory : new MockStimFactory();\n      this.design = new ExpDesign(this.designSpec);\n      this.display = this.designSpec.Display;\n      this.trialGenerator = this.display.Trial;\n    }\n\n    Experiment.prototype.buildStimulus = function(event, context) {\n      var params, stimType;\n      stimType = _.keys(event)[0];\n      params = _.values(event)[0];\n      return this.stimFactory.makeStimulus(stimType, params, context);\n    };\n\n    Experiment.prototype.buildEvent = function(event, context) {\n      var params, responseType;\n      responseType = _.keys(event)[0];\n      params = _.values(event)[0];\n      return this.stimFactory.makeResponse(responseType, params, context);\n    };\n\n    Experiment.prototype.buildTrial = function(eventSpec, record, context) {\n      var events, key, response, responseSpec, stim, stimSpec, value;\n      events = (function() {\n        var _results;\n        _results = [];\n        for (key in eventSpec) {\n          value = eventSpec[key];\n          stimSpec = _.omit(value, \"Next\");\n          responseSpec = _.pick(value, \"Next\");\n          stim = this.buildStimulus(stimSpec);\n          response = this.buildResponse(responseSpec.Next);\n          _results.push(this.stimFactory.makeEvent(stim, response));\n        }\n        return _results;\n      }).call(this);\n      return new Trial(events, record);\n    };\n\n    Experiment.prototype.start = function(context) {\n      var i, record, trialList, trialSpec, trials;\n      trials = this.design.fullDesign;\n      console.log(trials.nrow());\n      trialList = (function() {\n        var _i, _ref, _results;\n        _results = [];\n        for (i = _i = 0, _ref = trials.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n          record = trials.record(i);\n          record.$trialNumber = i;\n          trialSpec = this.trialGenerator(record);\n          _results.push(this.buildTrial(trialSpec, record, context));\n        }\n        return _results;\n      }).call(this);\n      return context.start(trialList);\n    };\n\n    return Experiment;\n\n  })();\n\n  exports.letters = ['a', 'b', 'c', 'd', 'e', 'd', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z'];\n\n  des = {\n    Design: {\n      Blocks: [\n        [\n          {\n            a: 1,\n            b: 2,\n            c: 3,\n            a: 2,\n            b: 3,\n            c: 4\n          }\n        ], [\n          {\n            a: 5,\n            b: 7,\n            c: 6,\n            a: 5,\n            b: 7,\n            c: 6\n          }\n        ]\n      ]\n    }\n  };\n\n  console.log(des.Blocks);\n\n  exports.buildStimulus = buildStimulus;\n\n  exports.buildResponse = buildResponse;\n\n  exports.buildEvent = buildEvent;\n\n  exports.buildTrial = buildTrial;\n\n  exports.buildPrelude = buildPrelude;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js":{"id":72,"canonicalName":"lib/stimresp.js","code":"(function () {\n    var ActionPresentable, ContainerDrawable, Drawable, GraphicalStimulus, Kinetic, KineticDrawable, KineticStimulus, Presentable, Response, ResponseData, Stimulus, lay, _, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    _ = require('16', module);\n    lay = require('73', module);\n    Kinetic = require('15', module);\n    exports.Stimulus = Stimulus = function () {\n        Stimulus.prototype.standardDefaults = {};\n        Stimulus.prototype.defaults = {};\n        function Stimulus(spec) {\n            var _ref;\n            if (spec == null) {\n                spec = {};\n            }\n            this.spec = _.defaults(spec, this.defaults);\n            this.spec = _.defaults(spec, this.standardDefaults);\n            this.spec = _.omit(this.spec, function (value, key) {\n                return value == null;\n            });\n            this.name = this.constructor.name;\n            if (((_ref = this.spec) != null ? _ref.id : void 0) != null) {\n                this.id = this.spec.id;\n            } else {\n                this.id = _.uniqueId('stim_');\n            }\n            this.stopped = false;\n            this.name = this.constructor.name;\n            this.initialize();\n        }\n        Stimulus.prototype.initialize = function () {\n        };\n        Stimulus.prototype.get = function (name) {\n            return this.spec[name];\n        };\n        Stimulus.prototype.set = function (name, value) {\n            return this.spec[name] = value;\n        };\n        Stimulus.prototype.reset = function () {\n            return this.stopped = false;\n        };\n        Stimulus.prototype.render = function (context, layer) {\n        };\n        Stimulus.prototype.stop = function (context) {\n            return this.stopped = true;\n        };\n        return Stimulus;\n    }();\n    exports.GraphicalStimulus = GraphicalStimulus = function (_super) {\n        __extends(GraphicalStimulus, _super);\n        GraphicalStimulus.prototype.standardDefaults = {\n            x: 0,\n            y: 0,\n            origin: 'top-left'\n        };\n        function GraphicalStimulus(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            if (spec.layout != null) {\n                this.layout = spec.layout;\n            } else {\n                this.layout = new lay.AbsoluteLayout();\n            }\n            this.overlay = false;\n            GraphicalStimulus.__super__.constructor.call(this, spec);\n        }\n        GraphicalStimulus.prototype.drawable = function (knode) {\n            return function (context) {\n                return console.log('GraphicalStimulus: drawable, no op');\n            };\n        };\n        GraphicalStimulus.prototype.toPixels = function (arg, dim) {\n            return lay.toPixels(arg, dim);\n        };\n        GraphicalStimulus.prototype.xyoffset = function (origin, nodeWidth, nodeHeight) {\n            switch (origin) {\n            case 'center':\n                return [\n                    -nodeWidth / 2,\n                    -nodeHeight / 2\n                ];\n            case 'center-left' || 'left-center':\n                return [\n                    0,\n                    -nodeHeight / 2\n                ];\n            case 'center-right' || 'right-center':\n                return [\n                    -nodeWidth,\n                    -nodeHeight / 2\n                ];\n            case 'top-left' || 'left-top':\n                return [\n                    0,\n                    0\n                ];\n            case 'top-right' || 'right-top':\n                return [\n                    -nodeWidth,\n                    0\n                ];\n            case 'top-center' || 'center-top':\n                return [\n                    -nodeWidth / 2,\n                    0\n                ];\n            case 'bottom-left' || 'left-bottom':\n                return [\n                    0,\n                    -nodeHeight\n                ];\n            case 'bottom-right' || 'right-bottom':\n                return [\n                    -nodeWidth,\n                    -nodeHeight\n                ];\n            case 'bottom-center' || 'center-bottom':\n                return [\n                    -nodeWidth / 2,\n                    -nodeHeight\n                ];\n            default:\n                throw new Error('failed to match \\'origin\\' argument:', origin);\n            }\n        };\n        GraphicalStimulus.prototype.computeCoordinates = function (context, position, nodeWidth, nodeHeight) {\n            var xy, xyoff;\n            if (nodeWidth == null) {\n                nodeWidth = 0;\n            }\n            if (nodeHeight == null) {\n                nodeHeight = 0;\n            }\n            xy = function () {\n                if (position != null) {\n                    return this.layout.computePosition([\n                        context.width(),\n                        context.height()\n                    ], position);\n                } else if (this.spec.x != null && this.spec.y != null) {\n                    return [\n                        this.layout.convertToCoordinate(this.spec.x, context.width()),\n                        this.layout.convertToCoordinate(this.spec.y, context.height())\n                    ];\n                } else {\n                    throw new Error('computeCoordinates: either position or x,y coordinates must be defined');\n                }\n            }.call(this);\n            if (this.spec.origin != null) {\n                xyoff = this.xyoffset(this.spec.origin, nodeWidth, nodeHeight);\n                xy[0] = xy[0] + xyoff[0];\n                xy[1] = xy[1] + xyoff[1];\n            }\n            return xy;\n        };\n        GraphicalStimulus.prototype.width = function () {\n            return 0;\n        };\n        GraphicalStimulus.prototype.height = function () {\n            return 0;\n        };\n        GraphicalStimulus.prototype.bounds = function () {\n            return {\n                x: 0,\n                y: 0,\n                width: 0,\n                height: 0\n            };\n        };\n        return GraphicalStimulus;\n    }(exports.Stimulus);\n    exports.KineticStimulus = KineticStimulus = function (_super) {\n        __extends(KineticStimulus, _super);\n        function KineticStimulus() {\n            return KineticStimulus.__super__.constructor.apply(this, arguments);\n        }\n        KineticStimulus.prototype.presentable = function (nodes) {\n            console.log('creating presentable of', nodes);\n            return new KineticDrawable(nodes);\n        };\n        KineticStimulus.nodeSize = function (node) {\n            if (node.getClassName() === 'Group') {\n                console.log('class is group!');\n                return KineticStimulus.groupSize(node);\n            } else {\n                return {\n                    width: node.getWidth(),\n                    height: node.getHeight()\n                };\n            }\n        };\n        KineticStimulus.nodePosition = function (node) {\n            var xb, yb;\n            if (node.getClassName() === 'Group') {\n                console.log('class is group!');\n                xb = KineticStimulus.groupXBounds(node);\n                yb = KineticStimulus.groupYBounds(node);\n                console.log('xb is', xb);\n                console.log('yb is', yb);\n                return {\n                    x: xb[0],\n                    y: yb[0]\n                };\n            } else {\n                return {\n                    x: node.getX(),\n                    y: node.getY()\n                };\n            }\n        };\n        KineticStimulus.groupSize = function (group) {\n            var xb, yb;\n            xb = this.groupXBounds(group);\n            yb = this.groupYBounds(group);\n            return {\n                width: xb[1] - xb[0],\n                height: yb[1] - yb[0]\n            };\n        };\n        KineticStimulus.groupXBounds = function (group) {\n            var children, i, pos, xmax, xmin, _i, _ref;\n            children = group.getChildren();\n            xmin = Number.MAX_VALUE;\n            xmax = -1;\n            for (i = _i = 0, _ref = children.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                pos = children[i].getAbsolutePosition();\n                if (pos.x < xmin) {\n                    xmin = pos.x;\n                }\n                if (pos.x + children[i].getWidth() > xmax) {\n                    xmax = pos.x + children[i].getWidth();\n                }\n            }\n            return [\n                xmin,\n                xmax\n            ];\n        };\n        KineticStimulus.groupYBounds = function (group) {\n            var children, i, pos, ymax, ymin, _i, _ref;\n            children = group.getChildren();\n            ymin = Number.MAX_VALUE;\n            ymax = -1;\n            for (i = _i = 0, _ref = children.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                pos = children[i].getAbsolutePosition();\n                if (pos.y < ymin) {\n                    ymin = children[i].getY();\n                }\n                if (pos.y + children[i].getHeight() > ymax) {\n                    ymax = pos.y + children[i].getHeight();\n                }\n            }\n            return [\n                ymin,\n                ymax\n            ];\n        };\n        KineticStimulus.groupPosition = function (group) {\n            var children, i, pos, x, y, _i, _ref;\n            children = group.getChildren();\n            if (children.length === 0) {\n                return {\n                    x: 0,\n                    y: 0\n                };\n            } else {\n                x = Number.MAX_VALUE;\n                y = -1;\n                pos = children[i].getAbsolutePosition();\n                for (i = _i = 0, _ref = children.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                    if (pos.x < x) {\n                        x = pos.x;\n                    }\n                    if (pos.y < y) {\n                        y = pos.y;\n                    }\n                }\n                return {\n                    x: x + group.getX(),\n                    y: y + group.getY()\n                };\n            }\n        };\n        return KineticStimulus;\n    }(exports.GraphicalStimulus);\n    exports.Presentable = Presentable = function () {\n        function Presentable() {\n        }\n        Presentable.prototype.present = function (context) {\n        };\n        return Presentable;\n    }();\n    exports.ActionPresentable = ActionPresentable = function (_super) {\n        var _class;\n        __extends(ActionPresentable, _super);\n        function ActionPresentable() {\n            return _class.apply(this, arguments);\n        }\n        _class = ActionPresentable.action;\n        ActionPresentable.prototype.present = function (context) {\n            return this.action.apply(context);\n        };\n        return ActionPresentable;\n    }(exports.Presentable);\n    exports.Drawable = Drawable = function (_super) {\n        __extends(Drawable, _super);\n        function Drawable() {\n            return Drawable.__super__.constructor.apply(this, arguments);\n        }\n        Drawable.prototype.present = function (context) {\n        };\n        Drawable.prototype.x = function () {\n            return 0;\n        };\n        Drawable.prototype.y = function () {\n            return 0;\n        };\n        Drawable.prototype.width = function () {\n            return 0;\n        };\n        Drawable.prototype.height = function () {\n            return 0;\n        };\n        Drawable.prototype.bounds = function () {\n            return {\n                x: this.x(),\n                y: this.y(),\n                width: this.width(),\n                height: this.height()\n            };\n        };\n        return Drawable;\n    }(exports.Presentable);\n    exports.KineticDrawable = KineticDrawable = function (_super) {\n        __extends(KineticDrawable, _super);\n        function KineticDrawable(nodes) {\n            this.nodes = nodes;\n            if (!_.isArray(this.nodes)) {\n                this.nodes = [this.nodes];\n            }\n        }\n        KineticDrawable.prototype.present = function (context, layer) {\n            var node, _i, _len, _ref, _results;\n            console.log('presenting ', this.nodes);\n            _ref = this.nodes;\n            _results = [];\n            for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n                node = _ref[_i];\n                if (layer == null) {\n                    _results.push(context.contentLayer.add(node));\n                } else {\n                    console.log('drawing in layer supplied as arg');\n                    _results.push(layer.add(node));\n                }\n            }\n            return _results;\n        };\n        KineticDrawable.prototype.x = function () {\n            var xs;\n            xs = _.map(this.nodes, function (node) {\n                return exports.KineticStimulus.nodePosition(node).x;\n            });\n            return _.min(xs);\n        };\n        KineticDrawable.prototype.y = function () {\n            var ys;\n            ys = _.map(this.nodes, function (node) {\n                return exports.KineticStimulus.nodePosition(node).y;\n            });\n            return _.min(ys);\n        };\n        KineticDrawable.prototype.xmax = function () {\n            var xs;\n            xs = _.map(this.nodes, function (node) {\n                return exports.KineticStimulus.nodePosition(node).x + exports.KineticStimulus.nodeSize(node).width;\n            });\n            return _.max(xs);\n        };\n        KineticDrawable.prototype.ymax = function () {\n            var xs;\n            xs = _.map(this.nodes, function (node) {\n                return exports.KineticStimulus.nodePosition(node).y + exports.KineticStimulus.nodeSize(node).height;\n            });\n            return _.max(xs);\n        };\n        KineticDrawable.prototype.width = function () {\n            return this.xmax() - this.x();\n        };\n        KineticDrawable.prototype.height = function () {\n            return this.ymax() - this.y();\n        };\n        return KineticDrawable;\n    }(exports.Drawable);\n    exports.ContainerDrawable = ContainerDrawable = function (_super) {\n        __extends(ContainerDrawable, _super);\n        function ContainerDrawable(nodes) {\n            this.nodes = nodes;\n            console.log('creating container drawable');\n        }\n        ContainerDrawable.prototype.present = function (context, layer) {\n            var node, _i, _len, _ref, _results;\n            _ref = this.nodes;\n            _results = [];\n            for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n                node = _ref[_i];\n                if (!layer) {\n                    _results.push(node.present(context));\n                } else {\n                    _results.push(node.present(context, layer));\n                }\n            }\n            return _results;\n        };\n        return ContainerDrawable;\n    }(exports.Drawable);\n    exports.Response = Response = function (_super) {\n        __extends(Response, _super);\n        function Response() {\n            return Response.__super__.constructor.apply(this, arguments);\n        }\n        Response.prototype.start = function (context) {\n            return this.activate(context);\n        };\n        Response.prototype.activate = function (context) {\n        };\n        return Response;\n    }(exports.Stimulus);\n    exports.ResponseData = ResponseData = function () {\n        function ResponseData(data) {\n            this.data = data;\n        }\n        return ResponseData;\n    }();\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/stimresp.js\"],\"names\":[\"ActionPresentable\",\"ContainerDrawable\",\"Drawable\",\"GraphicalStimulus\",\"Kinetic\",\"KineticDrawable\",\"KineticStimulus\",\"Presentable\",\"Response\",\"ResponseData\",\"Stimulus\",\"lay\",\"_\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"exports\",\"standardDefaults\",\"defaults\",\"spec\",\"_ref\",\"omit\",\"value\",\"name\",\"id\",\"uniqueId\",\"stopped\",\"initialize\",\"get\",\"set\",\"reset\",\"render\",\"context\",\"layer\",\"stop\",\"_super\",\"x\",\"y\",\"origin\",\"layout\",\"AbsoluteLayout\",\"overlay\",\"drawable\",\"knode\",\"console\",\"log\",\"toPixels\",\"arg\",\"dim\",\"xyoffset\",\"nodeWidth\",\"nodeHeight\",\"Error\",\"computeCoordinates\",\"position\",\"xy\",\"xyoff\",\"computePosition\",\"width\",\"height\",\"convertToCoordinate\",\"bounds\",\"apply\",\"arguments\",\"presentable\",\"nodes\",\"nodeSize\",\"node\",\"getClassName\",\"groupSize\",\"getWidth\",\"getHeight\",\"nodePosition\",\"xb\",\"yb\",\"groupXBounds\",\"groupYBounds\",\"getX\",\"getY\",\"group\",\"children\",\"i\",\"pos\",\"xmax\",\"xmin\",\"_i\",\"getChildren\",\"Number\",\"MAX_VALUE\",\"length\",\"getAbsolutePosition\",\"ymax\",\"ymin\",\"groupPosition\",\"present\",\"_class\",\"action\",\"isArray\",\"_len\",\"_results\",\"push\",\"contentLayer\",\"add\",\"xs\",\"map\",\"min\",\"ys\",\"max\",\"start\",\"activate\",\"data\"],\"mappings\":\"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\"}","lineCount":445,"mtime":1395245873000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/layout.js","canonicalName":"lib/layout.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var ActionPresentable, ContainerDrawable, Drawable, GraphicalStimulus, Kinetic, KineticDrawable, KineticStimulus, Presentable, Response, ResponseData, Stimulus, lay, _,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  _ = require('lodash');\n\n  lay = require(\"./layout\");\n\n  Kinetic = require(\"../jslibs/kinetic\");\n\n  exports.Stimulus = Stimulus = (function() {\n    Stimulus.prototype.standardDefaults = {};\n\n    Stimulus.prototype.defaults = {};\n\n    function Stimulus(spec) {\n      var _ref;\n      if (spec == null) {\n        spec = {};\n      }\n      this.spec = _.defaults(spec, this.defaults);\n      this.spec = _.defaults(spec, this.standardDefaults);\n      this.spec = _.omit(this.spec, function(value, key) {\n        return value == null;\n      });\n      this.name = this.constructor.name;\n      if (((_ref = this.spec) != null ? _ref.id : void 0) != null) {\n        this.id = this.spec.id;\n      } else {\n        this.id = _.uniqueId(\"stim_\");\n      }\n      this.stopped = false;\n      this.name = this.constructor.name;\n      this.initialize();\n    }\n\n    Stimulus.prototype.initialize = function() {};\n\n    Stimulus.prototype.get = function(name) {\n      return this.spec[name];\n    };\n\n    Stimulus.prototype.set = function(name, value) {\n      return this.spec[name] = value;\n    };\n\n    Stimulus.prototype.reset = function() {\n      return this.stopped = false;\n    };\n\n    Stimulus.prototype.render = function(context, layer) {};\n\n    Stimulus.prototype.stop = function(context) {\n      return this.stopped = true;\n    };\n\n    return Stimulus;\n\n  })();\n\n  exports.GraphicalStimulus = GraphicalStimulus = (function(_super) {\n    __extends(GraphicalStimulus, _super);\n\n    GraphicalStimulus.prototype.standardDefaults = {\n      x: 0,\n      y: 0,\n      origin: \"top-left\"\n    };\n\n    function GraphicalStimulus(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      if (spec.layout != null) {\n        this.layout = spec.layout;\n      } else {\n        this.layout = new lay.AbsoluteLayout();\n      }\n      this.overlay = false;\n      GraphicalStimulus.__super__.constructor.call(this, spec);\n    }\n\n    GraphicalStimulus.prototype.drawable = function(knode) {\n      return function(context) {\n        return console.log(\"GraphicalStimulus: drawable, no op\");\n      };\n    };\n\n    GraphicalStimulus.prototype.toPixels = function(arg, dim) {\n      return lay.toPixels(arg, dim);\n    };\n\n    GraphicalStimulus.prototype.xyoffset = function(origin, nodeWidth, nodeHeight) {\n      switch (origin) {\n        case \"center\":\n          return [-nodeWidth / 2, -nodeHeight / 2];\n        case \"center-left\" || \"left-center\":\n          return [0, -nodeHeight / 2];\n        case \"center-right\" || \"right-center\":\n          return [-nodeWidth, -nodeHeight / 2];\n        case \"top-left\" || \"left-top\":\n          return [0, 0];\n        case \"top-right\" || \"right-top\":\n          return [-nodeWidth, 0];\n        case \"top-center\" || \"center-top\":\n          return [-nodeWidth / 2, 0];\n        case \"bottom-left\" || \"left-bottom\":\n          return [0, -nodeHeight];\n        case \"bottom-right\" || \"right-bottom\":\n          return [-nodeWidth, -nodeHeight];\n        case \"bottom-center\" || \"center-bottom\":\n          return [-nodeWidth / 2, -nodeHeight];\n        default:\n          throw new Error(\"failed to match 'origin' argument:\", origin);\n      }\n    };\n\n    GraphicalStimulus.prototype.computeCoordinates = function(context, position, nodeWidth, nodeHeight) {\n      var xy, xyoff;\n      if (nodeWidth == null) {\n        nodeWidth = 0;\n      }\n      if (nodeHeight == null) {\n        nodeHeight = 0;\n      }\n      xy = (function() {\n        if (position != null) {\n          return this.layout.computePosition([context.width(), context.height()], position);\n        } else if ((this.spec.x != null) && (this.spec.y != null)) {\n          return [this.layout.convertToCoordinate(this.spec.x, context.width()), this.layout.convertToCoordinate(this.spec.y, context.height())];\n        } else {\n          throw new Error(\"computeCoordinates: either position or x,y coordinates must be defined\");\n        }\n      }).call(this);\n      if (this.spec.origin != null) {\n        xyoff = this.xyoffset(this.spec.origin, nodeWidth, nodeHeight);\n        xy[0] = xy[0] + xyoff[0];\n        xy[1] = xy[1] + xyoff[1];\n      }\n      return xy;\n    };\n\n    GraphicalStimulus.prototype.width = function() {\n      return 0;\n    };\n\n    GraphicalStimulus.prototype.height = function() {\n      return 0;\n    };\n\n    GraphicalStimulus.prototype.bounds = function() {\n      return {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0\n      };\n    };\n\n    return GraphicalStimulus;\n\n  })(exports.Stimulus);\n\n  exports.KineticStimulus = KineticStimulus = (function(_super) {\n    __extends(KineticStimulus, _super);\n\n    function KineticStimulus() {\n      return KineticStimulus.__super__.constructor.apply(this, arguments);\n    }\n\n    KineticStimulus.prototype.presentable = function(nodes) {\n      console.log(\"creating presentable of\", nodes);\n      return new KineticDrawable(nodes);\n    };\n\n    KineticStimulus.nodeSize = function(node) {\n      if (node.getClassName() === \"Group\") {\n        console.log(\"class is group!\");\n        return KineticStimulus.groupSize(node);\n      } else {\n        return {\n          width: node.getWidth(),\n          height: node.getHeight()\n        };\n      }\n    };\n\n    KineticStimulus.nodePosition = function(node) {\n      var xb, yb;\n      if (node.getClassName() === \"Group\") {\n        console.log(\"class is group!\");\n        xb = KineticStimulus.groupXBounds(node);\n        yb = KineticStimulus.groupYBounds(node);\n        console.log(\"xb is\", xb);\n        console.log(\"yb is\", yb);\n        return {\n          x: xb[0],\n          y: yb[0]\n        };\n      } else {\n        return {\n          x: node.getX(),\n          y: node.getY()\n        };\n      }\n    };\n\n    KineticStimulus.groupSize = function(group) {\n      var xb, yb;\n      xb = this.groupXBounds(group);\n      yb = this.groupYBounds(group);\n      return {\n        width: xb[1] - xb[0],\n        height: yb[1] - yb[0]\n      };\n    };\n\n    KineticStimulus.groupXBounds = function(group) {\n      var children, i, pos, xmax, xmin, _i, _ref;\n      children = group.getChildren();\n      xmin = Number.MAX_VALUE;\n      xmax = -1;\n      for (i = _i = 0, _ref = children.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        pos = children[i].getAbsolutePosition();\n        if (pos.x < xmin) {\n          xmin = pos.x;\n        }\n        if (pos.x + children[i].getWidth() > xmax) {\n          xmax = pos.x + children[i].getWidth();\n        }\n      }\n      return [xmin, xmax];\n    };\n\n    KineticStimulus.groupYBounds = function(group) {\n      var children, i, pos, ymax, ymin, _i, _ref;\n      children = group.getChildren();\n      ymin = Number.MAX_VALUE;\n      ymax = -1;\n      for (i = _i = 0, _ref = children.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        pos = children[i].getAbsolutePosition();\n        if (pos.y < ymin) {\n          ymin = children[i].getY();\n        }\n        if (pos.y + children[i].getHeight() > ymax) {\n          ymax = pos.y + children[i].getHeight();\n        }\n      }\n      return [ymin, ymax];\n    };\n\n    KineticStimulus.groupPosition = function(group) {\n      var children, i, pos, x, y, _i, _ref;\n      children = group.getChildren();\n      if (children.length === 0) {\n        return {\n          x: 0,\n          y: 0\n        };\n      } else {\n        x = Number.MAX_VALUE;\n        y = -1;\n        pos = children[i].getAbsolutePosition();\n        for (i = _i = 0, _ref = children.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n          if (pos.x < x) {\n            x = pos.x;\n          }\n          if (pos.y < y) {\n            y = pos.y;\n          }\n        }\n        return {\n          x: x + group.getX(),\n          y: y + group.getY()\n        };\n      }\n    };\n\n    return KineticStimulus;\n\n  })(exports.GraphicalStimulus);\n\n  exports.Presentable = Presentable = (function() {\n    function Presentable() {}\n\n    Presentable.prototype.present = function(context) {};\n\n    return Presentable;\n\n  })();\n\n  exports.ActionPresentable = ActionPresentable = (function(_super) {\n    var _class;\n\n    __extends(ActionPresentable, _super);\n\n    function ActionPresentable() {\n      return _class.apply(this, arguments);\n    }\n\n    _class = ActionPresentable.action;\n\n    ActionPresentable.prototype.present = function(context) {\n      return this.action.apply(context);\n    };\n\n    return ActionPresentable;\n\n  })(exports.Presentable);\n\n  exports.Drawable = Drawable = (function(_super) {\n    __extends(Drawable, _super);\n\n    function Drawable() {\n      return Drawable.__super__.constructor.apply(this, arguments);\n    }\n\n    Drawable.prototype.present = function(context) {};\n\n    Drawable.prototype.x = function() {\n      return 0;\n    };\n\n    Drawable.prototype.y = function() {\n      return 0;\n    };\n\n    Drawable.prototype.width = function() {\n      return 0;\n    };\n\n    Drawable.prototype.height = function() {\n      return 0;\n    };\n\n    Drawable.prototype.bounds = function() {\n      return {\n        x: this.x(),\n        y: this.y(),\n        width: this.width(),\n        height: this.height()\n      };\n    };\n\n    return Drawable;\n\n  })(exports.Presentable);\n\n  exports.KineticDrawable = KineticDrawable = (function(_super) {\n    __extends(KineticDrawable, _super);\n\n    function KineticDrawable(nodes) {\n      this.nodes = nodes;\n      if (!_.isArray(this.nodes)) {\n        this.nodes = [this.nodes];\n      }\n    }\n\n    KineticDrawable.prototype.present = function(context, layer) {\n      var node, _i, _len, _ref, _results;\n      console.log(\"presenting \", this.nodes);\n      _ref = this.nodes;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        node = _ref[_i];\n        if (layer == null) {\n          _results.push(context.contentLayer.add(node));\n        } else {\n          console.log(\"drawing in layer supplied as arg\");\n          _results.push(layer.add(node));\n        }\n      }\n      return _results;\n    };\n\n    KineticDrawable.prototype.x = function() {\n      var xs;\n      xs = _.map(this.nodes, function(node) {\n        return exports.KineticStimulus.nodePosition(node).x;\n      });\n      return _.min(xs);\n    };\n\n    KineticDrawable.prototype.y = function() {\n      var ys;\n      ys = _.map(this.nodes, function(node) {\n        return exports.KineticStimulus.nodePosition(node).y;\n      });\n      return _.min(ys);\n    };\n\n    KineticDrawable.prototype.xmax = function() {\n      var xs;\n      xs = _.map(this.nodes, function(node) {\n        return exports.KineticStimulus.nodePosition(node).x + exports.KineticStimulus.nodeSize(node).width;\n      });\n      return _.max(xs);\n    };\n\n    KineticDrawable.prototype.ymax = function() {\n      var xs;\n      xs = _.map(this.nodes, function(node) {\n        return exports.KineticStimulus.nodePosition(node).y + exports.KineticStimulus.nodeSize(node).height;\n      });\n      return _.max(xs);\n    };\n\n    KineticDrawable.prototype.width = function() {\n      return this.xmax() - this.x();\n    };\n\n    KineticDrawable.prototype.height = function() {\n      return this.ymax() - this.y();\n    };\n\n    return KineticDrawable;\n\n  })(exports.Drawable);\n\n  exports.ContainerDrawable = ContainerDrawable = (function(_super) {\n    __extends(ContainerDrawable, _super);\n\n    function ContainerDrawable(nodes) {\n      this.nodes = nodes;\n      console.log(\"creating container drawable\");\n    }\n\n    ContainerDrawable.prototype.present = function(context, layer) {\n      var node, _i, _len, _ref, _results;\n      _ref = this.nodes;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        node = _ref[_i];\n        if (!layer) {\n          _results.push(node.present(context));\n        } else {\n          _results.push(node.present(context, layer));\n        }\n      }\n      return _results;\n    };\n\n    return ContainerDrawable;\n\n  })(exports.Drawable);\n\n  exports.Response = Response = (function(_super) {\n    __extends(Response, _super);\n\n    function Response() {\n      return Response.__super__.constructor.apply(this, arguments);\n    }\n\n    Response.prototype.start = function(context) {\n      return this.activate(context);\n    };\n\n    Response.prototype.activate = function(context) {};\n\n    return Response;\n\n  })(exports.Stimulus);\n\n  exports.ResponseData = ResponseData = (function() {\n    function ResponseData(data) {\n      this.data = data;\n    }\n\n    return ResponseData;\n\n  })();\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/background.js":{"id":79,"canonicalName":"lib/components/canvas/background.js","code":"(function () {\n    var Background, ContainerDrawable, GStimulus, Kinetic, KineticDrawable, _, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Kinetic = require('15', module).Kinetic;\n    GStimulus = require('72', module).GraphicalStimulus;\n    KineticDrawable = require('72', module).KineticDrawable;\n    ContainerDrawable = require('72', module).ContainerDrawable;\n    _ = require('16', module);\n    Background = function (_super) {\n        __extends(Background, _super);\n        function Background(stims, fill) {\n            this.stims = stims != null ? stims : [];\n            this.fill = fill != null ? fill : 'white';\n            Background.__super__.constructor.call(this, {}, {});\n            if (!_.isArray(this.stims)) {\n                this.stims = [this.stims];\n            }\n        }\n        Background.prototype.render = function (context) {\n            var background, drawables, stim, _i, _len, _ref;\n            background = new Kinetic.Rect({\n                x: 0,\n                y: 0,\n                width: context.width(),\n                height: context.height(),\n                name: 'background',\n                fill: this.fill\n            });\n            drawables = [];\n            drawables.push(new KineticDrawable(background));\n            _ref = this.stims;\n            for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n                stim = _ref[_i];\n                drawables.push(stim.render(context));\n            }\n            return new ContainerDrawable(drawables);\n        };\n        return Background;\n    }(GStimulus);\n    exports.Background = Background;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/canvas/background.js\"],\"names\":[\"Background\",\"ContainerDrawable\",\"GStimulus\",\"Kinetic\",\"KineticDrawable\",\"_\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"GraphicalStimulus\",\"_super\",\"stims\",\"fill\",\"isArray\",\"render\",\"context\",\"background\",\"drawables\",\"stim\",\"_i\",\"_len\",\"_ref\",\"Rect\",\"x\",\"y\",\"width\",\"height\",\"name\",\"push\",\"length\",\"exports\"],\"mappings\":\"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\"}","lineCount":52,"mtime":1395245872000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var Background, ContainerDrawable, GStimulus, Kinetic, KineticDrawable, _,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Kinetic = require(\"../../../jslibs/kinetic\").Kinetic;\n\n  GStimulus = require(\"../../stimresp\").GraphicalStimulus;\n\n  KineticDrawable = require(\"../../stimresp\").KineticDrawable;\n\n  ContainerDrawable = require(\"../../stimresp\").ContainerDrawable;\n\n  _ = require(\"lodash\");\n\n  Background = (function(_super) {\n    __extends(Background, _super);\n\n    function Background(stims, fill) {\n      this.stims = stims != null ? stims : [];\n      this.fill = fill != null ? fill : \"white\";\n      Background.__super__.constructor.call(this, {}, {});\n      if (!_.isArray(this.stims)) {\n        this.stims = [this.stims];\n      }\n    }\n\n    Background.prototype.render = function(context) {\n      var background, drawables, stim, _i, _len, _ref;\n      background = new Kinetic.Rect({\n        x: 0,\n        y: 0,\n        width: context.width(),\n        height: context.height(),\n        name: 'background',\n        fill: this.fill\n      });\n      drawables = [];\n      drawables.push(new KineticDrawable(background));\n      _ref = this.stims;\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        stim = _ref[_i];\n        drawables.push(stim.render(context));\n      }\n      return new ContainerDrawable(drawables);\n    };\n\n    return Background;\n\n  })(GStimulus);\n\n  exports.Background = Background;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/datatable.js":{"id":70,"canonicalName":"lib/datatable.js","code":"(function () {\n    var DataTable, utils, _, __hasProp = {}.hasOwnProperty;\n    _ = require('16', module);\n    utils = require('69', module);\n    DataTable = function () {\n        function DataTable(vars) {\n            var key, samelen, value, varlen;\n            if (vars == null) {\n                vars = {};\n            }\n            varlen = _.map(vars, function (x) {\n                return x.length;\n            });\n            samelen = _.all(varlen, function (x) {\n                return x === varlen[0];\n            });\n            if (!samelen) {\n                throw 'arguments to DataTable must all have same length.';\n            }\n            for (key in vars) {\n                value = vars[key];\n                this[key] = value;\n            }\n        }\n        DataTable.prototype.show = function () {\n            var i, _i, _ref, _results;\n            console.log('DataTable: rows: ' + this.nrow() + ' columns: ' + this.ncol());\n            _results = [];\n            for (i = _i = 0, _ref = this.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                _results.push(console.log(this.record(i)));\n            }\n            return _results;\n        };\n        DataTable.fromRecords = function (records, union) {\n            var allkeys, key, rec, vars, _i, _j, _k, _len, _len1, _len2;\n            if (union == null) {\n                union = true;\n            }\n            if (!_.isArray(records)) {\n                throw new Error('DataTable.fromRecords: \\'records\\' arguemnt must be an array of records.');\n            }\n            allkeys = _.uniq(_.flatten(_.map(records, function (rec) {\n                return _.keys(rec);\n            })));\n            vars = {};\n            for (_i = 0, _len = allkeys.length; _i < _len; _i++) {\n                key = allkeys[_i];\n                vars[key] = [];\n            }\n            for (_j = 0, _len1 = records.length; _j < _len1; _j++) {\n                rec = records[_j];\n                for (_k = 0, _len2 = allkeys.length; _k < _len2; _k++) {\n                    key = allkeys[_k];\n                    if (rec[key] != null) {\n                        vars[key].push(rec[key]);\n                    } else {\n                        vars[key].push(null);\n                    }\n                }\n            }\n            return new DataTable(vars);\n        };\n        DataTable.build = function (vars) {\n            if (vars == null) {\n                vars = {};\n            }\n            return Object.seal(new DataTable(vars));\n        };\n        DataTable.rbind = function (tab1, tab2, union) {\n            var col1, col2, keys1, keys2, name, out, sharedKeys, _i, _len;\n            if (union == null) {\n                union = false;\n            }\n            keys1 = _.keys(tab1);\n            keys2 = _.keys(tab2);\n            sharedKeys = union ? _.union(keys1, keys2) : _.intersection(keys1, keys2);\n            out = {};\n            for (_i = 0, _len = sharedKeys.length; _i < _len; _i++) {\n                name = sharedKeys[_i];\n                col1 = tab1[name];\n                col2 = tab2[name];\n                if (!col1) {\n                    col1 = utils.repLen([null], tab1.nrow());\n                }\n                if (!col2) {\n                    col2 = utils.repLen([null], tab2.nrow());\n                }\n                out[name] = col1.concat(col2);\n            }\n            return new DataTable(out);\n        };\n        DataTable.cbind = function (tab1, tab2) {\n            var diffkeys, key, out, _i, _len;\n            if (tab1.nrow() !== tab2.nrow()) {\n                throw 'cbind requires arguments to have same number of rows';\n            }\n            out = _.cloneDeep(tab1);\n            diffkeys = _.difference(_.keys(tab2), _.keys(tab1));\n            for (_i = 0, _len = diffkeys.length; _i < _len; _i++) {\n                key = diffkeys[_i];\n                out[key] = tab2[key];\n            }\n            return out;\n        };\n        DataTable.expand = function (vars, unique, nreps) {\n            var d, i, key, name, nargs, nm, nx, orep, out, r1, r2, r3, repfac, value, _i, _j, _results;\n            if (vars == null) {\n                vars = {};\n            }\n            if (unique == null) {\n                unique = true;\n            }\n            if (nreps == null) {\n                nreps = 1;\n            }\n            if (unique) {\n                out = {};\n                for (name in vars) {\n                    value = vars[name];\n                    out[name] = _.unique(value);\n                }\n                vars = out;\n            }\n            nargs = _.size(vars);\n            nm = _.keys(vars);\n            repfac = 1;\n            d = _.map(vars, function (x) {\n                return x.length;\n            });\n            orep = _.reduce(d, function (x, acc) {\n                return x * acc;\n            });\n            out = {};\n            for (key in vars) {\n                value = vars[key];\n                nx = value.length;\n                orep = orep / nx;\n                r1 = utils.rep([repfac], nx);\n                r2 = utils.rep(function () {\n                    _results = [];\n                    for (var _i = 0; 0 <= nx ? _i < nx : _i > nx; 0 <= nx ? _i++ : _i--) {\n                        _results.push(_i);\n                    }\n                    return _results;\n                }.apply(this), r1);\n                r3 = utils.rep(r2, orep);\n                out[key] = function () {\n                    var _j, _len, _results1;\n                    _results1 = [];\n                    for (_j = 0, _len = r3.length; _j < _len; _j++) {\n                        i = r3[_j];\n                        _results1.push(value[i]);\n                    }\n                    return _results1;\n                }();\n                repfac = repfac * nx;\n            }\n            if (nreps > 1) {\n                for (i = _j = 1; 1 <= nreps ? _j <= nreps : _j >= nreps; i = 1 <= nreps ? ++_j : --_j) {\n                    out = _.merge(out, out);\n                }\n            }\n            return new DataTable(out);\n        };\n        DataTable.prototype.dropColumn = function (colname) {\n            var key, out, value;\n            out = {};\n            for (key in this) {\n                if (!__hasProp.call(this, key))\n                    continue;\n                value = this[key];\n                if (key !== colname) {\n                    out[key] = _.clone(value);\n                }\n            }\n            return new DataTable(out);\n        };\n        DataTable.prototype.subset = function (key, filter) {\n            var el, i, keep, name, out, val, value;\n            keep = function () {\n                var _i, _len, _ref, _results;\n                _ref = this[key];\n                _results = [];\n                for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n                    val = _ref[_i];\n                    if (filter(val)) {\n                        _results.push(true);\n                    } else {\n                        _results.push(false);\n                    }\n                }\n                return _results;\n            }.call(this);\n            out = {};\n            for (name in this) {\n                if (!__hasProp.call(this, name))\n                    continue;\n                value = this[name];\n                out[name] = function () {\n                    var _i, _len, _results;\n                    _results = [];\n                    for (i = _i = 0, _len = value.length; _i < _len; i = ++_i) {\n                        el = value[i];\n                        if (keep[i] === true) {\n                            _results.push(el);\n                        }\n                    }\n                    return _results;\n                }();\n            }\n            return new DataTable(out);\n        };\n        DataTable.prototype.whichRow = function (where) {\n            var count, i, key, nkeys, out, rec, value, _i, _ref;\n            out = [];\n            nkeys = _.keys(where).length;\n            for (i = _i = 0, _ref = this.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                rec = this.record(i);\n                count = utils.asArray(function () {\n                    var _results;\n                    _results = [];\n                    for (key in where) {\n                        value = where[key];\n                        _results.push(rec[key] === value);\n                    }\n                    return _results;\n                }());\n                count = _.map(count, function (x) {\n                    if (x) {\n                        return 1;\n                    } else {\n                        return 0;\n                    }\n                });\n                count = _.reduce(utils.asArray(count), function (sum, num) {\n                    return sum + num;\n                });\n                if (count === nkeys) {\n                    out.push(i);\n                }\n            }\n            return out;\n        };\n        DataTable.prototype.select = function (where) {\n            var count, i, key, nkeys, out, rec, value, _i, _ref;\n            out = [];\n            nkeys = _.keys(where).length;\n            for (i = _i = 0, _ref = this.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                rec = this.record(i);\n                count = utils.asArray(function () {\n                    var _results;\n                    _results = [];\n                    for (key in where) {\n                        value = where[key];\n                        _results.push(rec[key] === value);\n                    }\n                    return _results;\n                }());\n                count = _.map(count, function (x) {\n                    if (x) {\n                        return 1;\n                    } else {\n                        return 0;\n                    }\n                });\n                count = _.reduce(utils.asArray(count), function (sum, num) {\n                    return sum + num;\n                });\n                if (count === nkeys) {\n                    out.push(rec);\n                }\n            }\n            return out;\n        };\n        DataTable.prototype.nrow = function () {\n            var lens, name, value;\n            lens = function () {\n                var _results;\n                _results = [];\n                for (name in this) {\n                    if (!__hasProp.call(this, name))\n                        continue;\n                    value = this[name];\n                    _results.push(value.length);\n                }\n                return _results;\n            }.call(this);\n            return _.max(lens);\n        };\n        DataTable.prototype.ncol = function () {\n            return Object.keys(this).length;\n        };\n        DataTable.prototype.colnames = function () {\n            return Object.keys(this);\n        };\n        DataTable.prototype.toRecordArray = function () {\n            var i, rec, _i, _ref;\n            rec = [];\n            for (i = _i = 0, _ref = this.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                rec.push(this.record(i));\n            }\n            return rec;\n        };\n        DataTable.prototype.record = function (index) {\n            var name, rec, value;\n            rec = {};\n            for (name in this) {\n                if (!__hasProp.call(this, name))\n                    continue;\n                value = this[name];\n                rec[name] = value[index];\n            }\n            return rec;\n        };\n        DataTable.prototype.replicate = function (nreps) {\n            var name, out, value;\n            out = {};\n            for (name in this) {\n                if (!__hasProp.call(this, name))\n                    continue;\n                value = this[name];\n                out[name] = _.flatten(_.times(nreps, function (_this) {\n                    return function (n) {\n                        return value;\n                    };\n                }(this)));\n            }\n            return new DataTable(out);\n        };\n        DataTable.prototype.bindcol = function (name, column) {\n            if (column.length !== this.nrow()) {\n                throw 'new column must be same length as existing DataTable object: column.length is  ' + column.length + ' and this.length is  ' + this.nrow();\n            }\n            this[name] = column;\n            return this;\n        };\n        DataTable.prototype.bindrow = function (rows) {\n            var key, record, value, _i, _len;\n            if (!_.isArray(rows)) {\n                rows = [rows];\n            }\n            for (_i = 0, _len = rows.length; _i < _len; _i++) {\n                record = rows[_i];\n                console.log(record);\n                for (key in record) {\n                    if (!__hasProp.call(record, key))\n                        continue;\n                    value = record[key];\n                    if (!_.has(this, key)) {\n                        throw new Error('DataTable has no field named ' + key);\n                    } else {\n                        this[key].push(value);\n                    }\n                }\n            }\n            return this;\n        };\n        DataTable.prototype.shuffle = function () {\n            var i, ind, nr, out, sind, _i, _j, _results;\n            nr = this.nrow();\n            ind = function () {\n                _results = [];\n                for (var _i = 0; 0 <= nr ? _i < nr : _i > nr; 0 <= nr ? _i++ : _i--) {\n                    _results.push(_i);\n                }\n                return _results;\n            }.apply(this);\n            sind = _.shuffle(ind);\n            out = [];\n            for (i = _j = 0; 0 <= nr ? _j < nr : _j > nr; i = 0 <= nr ? ++_j : --_j) {\n                out[i] = this.record(sind[i]);\n            }\n            return DataTable.fromRecords(out);\n        };\n        return DataTable;\n    }();\n    exports.DataTable = DataTable;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/datatable.js\"],\"names\":[\"DataTable\",\"utils\",\"_\",\"__hasProp\",\"hasOwnProperty\",\"require\",\"vars\",\"key\",\"samelen\",\"value\",\"varlen\",\"map\",\"x\",\"length\",\"all\",\"prototype\",\"show\",\"i\",\"_i\",\"_ref\",\"_results\",\"console\",\"log\",\"nrow\",\"ncol\",\"push\",\"record\",\"fromRecords\",\"records\",\"union\",\"allkeys\",\"rec\",\"_j\",\"_k\",\"_len\",\"_len1\",\"_len2\",\"isArray\",\"Error\",\"uniq\",\"flatten\",\"keys\",\"build\",\"Object\",\"seal\",\"rbind\",\"tab1\",\"tab2\",\"col1\",\"col2\",\"keys1\",\"keys2\",\"name\",\"out\",\"sharedKeys\",\"intersection\",\"repLen\",\"concat\",\"cbind\",\"diffkeys\",\"cloneDeep\",\"difference\",\"expand\",\"unique\",\"nreps\",\"d\",\"nargs\",\"nm\",\"nx\",\"orep\",\"r1\",\"r2\",\"r3\",\"repfac\",\"size\",\"reduce\",\"acc\",\"rep\",\"apply\",\"_results1\",\"merge\",\"dropColumn\",\"colname\",\"call\",\"clone\",\"subset\",\"filter\",\"el\",\"keep\",\"val\",\"whichRow\",\"where\",\"count\",\"nkeys\",\"asArray\",\"sum\",\"num\",\"select\",\"lens\",\"max\",\"colnames\",\"toRecordArray\",\"index\",\"replicate\",\"times\",\"_this\",\"n\",\"bindcol\",\"column\",\"bindrow\",\"rows\",\"has\",\"shuffle\",\"ind\",\"nr\",\"sind\",\"exports\"],\"mappings\":\"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\"}","lineCount":378,"mtime":1395245873000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/utils.js","canonicalName":"lib/utils.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var DataTable, utils, _,\n    __hasProp = {}.hasOwnProperty;\n\n  _ = require('lodash');\n\n  utils = require(\"./utils\");\n\n  DataTable = (function() {\n    function DataTable(vars) {\n      var key, samelen, value, varlen;\n      if (vars == null) {\n        vars = {};\n      }\n      varlen = _.map(vars, function(x) {\n        return x.length;\n      });\n      samelen = _.all(varlen, function(x) {\n        return x === varlen[0];\n      });\n      if (!samelen) {\n        throw \"arguments to DataTable must all have same length.\";\n      }\n      for (key in vars) {\n        value = vars[key];\n        this[key] = value;\n      }\n    }\n\n    DataTable.prototype.show = function() {\n      var i, _i, _ref, _results;\n      console.log(\"DataTable: rows: \" + (this.nrow()) + \" columns: \" + (this.ncol()));\n      _results = [];\n      for (i = _i = 0, _ref = this.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        _results.push(console.log(this.record(i)));\n      }\n      return _results;\n    };\n\n    DataTable.fromRecords = function(records, union) {\n      var allkeys, key, rec, vars, _i, _j, _k, _len, _len1, _len2;\n      if (union == null) {\n        union = true;\n      }\n      if (!_.isArray(records)) {\n        throw new Error(\"DataTable.fromRecords: 'records' arguemnt must be an array of records.\");\n      }\n      allkeys = _.uniq(_.flatten(_.map(records, function(rec) {\n        return _.keys(rec);\n      })));\n      vars = {};\n      for (_i = 0, _len = allkeys.length; _i < _len; _i++) {\n        key = allkeys[_i];\n        vars[key] = [];\n      }\n      for (_j = 0, _len1 = records.length; _j < _len1; _j++) {\n        rec = records[_j];\n        for (_k = 0, _len2 = allkeys.length; _k < _len2; _k++) {\n          key = allkeys[_k];\n          if (rec[key] != null) {\n            vars[key].push(rec[key]);\n          } else {\n            vars[key].push(null);\n          }\n        }\n      }\n      return new DataTable(vars);\n    };\n\n    DataTable.build = function(vars) {\n      if (vars == null) {\n        vars = {};\n      }\n      return Object.seal(new DataTable(vars));\n    };\n\n    DataTable.rbind = function(tab1, tab2, union) {\n      var col1, col2, keys1, keys2, name, out, sharedKeys, _i, _len;\n      if (union == null) {\n        union = false;\n      }\n      keys1 = _.keys(tab1);\n      keys2 = _.keys(tab2);\n      sharedKeys = union ? _.union(keys1, keys2) : _.intersection(keys1, keys2);\n      out = {};\n      for (_i = 0, _len = sharedKeys.length; _i < _len; _i++) {\n        name = sharedKeys[_i];\n        col1 = tab1[name];\n        col2 = tab2[name];\n        if (!col1) {\n          col1 = utils.repLen([null], tab1.nrow());\n        }\n        if (!col2) {\n          col2 = utils.repLen([null], tab2.nrow());\n        }\n        out[name] = col1.concat(col2);\n      }\n      return new DataTable(out);\n    };\n\n    DataTable.cbind = function(tab1, tab2) {\n      var diffkeys, key, out, _i, _len;\n      if (tab1.nrow() !== tab2.nrow()) {\n        throw \"cbind requires arguments to have same number of rows\";\n      }\n      out = _.cloneDeep(tab1);\n      diffkeys = _.difference(_.keys(tab2), _.keys(tab1));\n      for (_i = 0, _len = diffkeys.length; _i < _len; _i++) {\n        key = diffkeys[_i];\n        out[key] = tab2[key];\n      }\n      return out;\n    };\n\n    DataTable.expand = function(vars, unique, nreps) {\n      var d, i, key, name, nargs, nm, nx, orep, out, r1, r2, r3, repfac, value, _i, _j, _results;\n      if (vars == null) {\n        vars = {};\n      }\n      if (unique == null) {\n        unique = true;\n      }\n      if (nreps == null) {\n        nreps = 1;\n      }\n      if (unique) {\n        out = {};\n        for (name in vars) {\n          value = vars[name];\n          out[name] = _.unique(value);\n        }\n        vars = out;\n      }\n      nargs = _.size(vars);\n      nm = _.keys(vars);\n      repfac = 1;\n      d = _.map(vars, function(x) {\n        return x.length;\n      });\n      orep = _.reduce(d, function(x, acc) {\n        return x * acc;\n      });\n      out = {};\n      for (key in vars) {\n        value = vars[key];\n        nx = value.length;\n        orep = orep / nx;\n        r1 = utils.rep([repfac], nx);\n        r2 = utils.rep((function() {\n          _results = [];\n          for (var _i = 0; 0 <= nx ? _i < nx : _i > nx; 0 <= nx ? _i++ : _i--){ _results.push(_i); }\n          return _results;\n        }).apply(this), r1);\n        r3 = utils.rep(r2, orep);\n        out[key] = (function() {\n          var _j, _len, _results1;\n          _results1 = [];\n          for (_j = 0, _len = r3.length; _j < _len; _j++) {\n            i = r3[_j];\n            _results1.push(value[i]);\n          }\n          return _results1;\n        })();\n        repfac = repfac * nx;\n      }\n      if (nreps > 1) {\n        for (i = _j = 1; 1 <= nreps ? _j <= nreps : _j >= nreps; i = 1 <= nreps ? ++_j : --_j) {\n          out = _.merge(out, out);\n        }\n      }\n      return new DataTable(out);\n    };\n\n    DataTable.prototype.dropColumn = function(colname) {\n      var key, out, value;\n      out = {};\n      for (key in this) {\n        if (!__hasProp.call(this, key)) continue;\n        value = this[key];\n        if (key !== colname) {\n          out[key] = _.clone(value);\n        }\n      }\n      return new DataTable(out);\n    };\n\n    DataTable.prototype.subset = function(key, filter) {\n      var el, i, keep, name, out, val, value;\n      keep = (function() {\n        var _i, _len, _ref, _results;\n        _ref = this[key];\n        _results = [];\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          val = _ref[_i];\n          if (filter(val)) {\n            _results.push(true);\n          } else {\n            _results.push(false);\n          }\n        }\n        return _results;\n      }).call(this);\n      out = {};\n      for (name in this) {\n        if (!__hasProp.call(this, name)) continue;\n        value = this[name];\n        out[name] = (function() {\n          var _i, _len, _results;\n          _results = [];\n          for (i = _i = 0, _len = value.length; _i < _len; i = ++_i) {\n            el = value[i];\n            if (keep[i] === true) {\n              _results.push(el);\n            }\n          }\n          return _results;\n        })();\n      }\n      return new DataTable(out);\n    };\n\n    DataTable.prototype.whichRow = function(where) {\n      var count, i, key, nkeys, out, rec, value, _i, _ref;\n      out = [];\n      nkeys = _.keys(where).length;\n      for (i = _i = 0, _ref = this.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        rec = this.record(i);\n        count = utils.asArray((function() {\n          var _results;\n          _results = [];\n          for (key in where) {\n            value = where[key];\n            _results.push(rec[key] === value);\n          }\n          return _results;\n        })());\n        count = _.map(count, function(x) {\n          if (x) {\n            return 1;\n          } else {\n            return 0;\n          }\n        });\n        count = _.reduce(utils.asArray(count), function(sum, num) {\n          return sum + num;\n        });\n        if (count === nkeys) {\n          out.push(i);\n        }\n      }\n      return out;\n    };\n\n    DataTable.prototype.select = function(where) {\n      var count, i, key, nkeys, out, rec, value, _i, _ref;\n      out = [];\n      nkeys = _.keys(where).length;\n      for (i = _i = 0, _ref = this.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        rec = this.record(i);\n        count = utils.asArray((function() {\n          var _results;\n          _results = [];\n          for (key in where) {\n            value = where[key];\n            _results.push(rec[key] === value);\n          }\n          return _results;\n        })());\n        count = _.map(count, function(x) {\n          if (x) {\n            return 1;\n          } else {\n            return 0;\n          }\n        });\n        count = _.reduce(utils.asArray(count), function(sum, num) {\n          return sum + num;\n        });\n        if (count === nkeys) {\n          out.push(rec);\n        }\n      }\n      return out;\n    };\n\n    DataTable.prototype.nrow = function() {\n      var lens, name, value;\n      lens = (function() {\n        var _results;\n        _results = [];\n        for (name in this) {\n          if (!__hasProp.call(this, name)) continue;\n          value = this[name];\n          _results.push(value.length);\n        }\n        return _results;\n      }).call(this);\n      return _.max(lens);\n    };\n\n    DataTable.prototype.ncol = function() {\n      return Object.keys(this).length;\n    };\n\n    DataTable.prototype.colnames = function() {\n      return Object.keys(this);\n    };\n\n    DataTable.prototype.toRecordArray = function() {\n      var i, rec, _i, _ref;\n      rec = [];\n      for (i = _i = 0, _ref = this.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        rec.push(this.record(i));\n      }\n      return rec;\n    };\n\n    DataTable.prototype.record = function(index) {\n      var name, rec, value;\n      rec = {};\n      for (name in this) {\n        if (!__hasProp.call(this, name)) continue;\n        value = this[name];\n        rec[name] = value[index];\n      }\n      return rec;\n    };\n\n    DataTable.prototype.replicate = function(nreps) {\n      var name, out, value;\n      out = {};\n      for (name in this) {\n        if (!__hasProp.call(this, name)) continue;\n        value = this[name];\n        out[name] = _.flatten(_.times(nreps, (function(_this) {\n          return function(n) {\n            return value;\n          };\n        })(this)));\n      }\n      return new DataTable(out);\n    };\n\n    DataTable.prototype.bindcol = function(name, column) {\n      if (column.length !== this.nrow()) {\n        throw \"new column must be same length as existing DataTable object: column.length is  \" + column.length + \" and this.length is  \" + (this.nrow());\n      }\n      this[name] = column;\n      return this;\n    };\n\n    DataTable.prototype.bindrow = function(rows) {\n      var key, record, value, _i, _len;\n      if (!_.isArray(rows)) {\n        rows = [rows];\n      }\n      for (_i = 0, _len = rows.length; _i < _len; _i++) {\n        record = rows[_i];\n        console.log(record);\n        for (key in record) {\n          if (!__hasProp.call(record, key)) continue;\n          value = record[key];\n          if (!_.has(this, key)) {\n            throw new Error(\"DataTable has no field named \" + key);\n          } else {\n            this[key].push(value);\n          }\n        }\n      }\n      return this;\n    };\n\n    DataTable.prototype.shuffle = function() {\n      var i, ind, nr, out, sind, _i, _j, _results;\n      nr = this.nrow();\n      ind = (function() {\n        _results = [];\n        for (var _i = 0; 0 <= nr ? _i < nr : _i > nr; 0 <= nr ? _i++ : _i--){ _results.push(_i); }\n        return _results;\n      }).apply(this);\n      sind = _.shuffle(ind);\n      out = [];\n      for (i = _j = 0; 0 <= nr ? _j < nr : _j > nr; i = 0 <= nr ? ++_j : --_j) {\n        out[i] = this.record(sind[i]);\n      }\n      return DataTable.fromRecords(out);\n    };\n\n    return DataTable;\n\n  })();\n\n  exports.DataTable = DataTable;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/utils.js":{"id":69,"canonicalName":"lib/utils.js","code":"(function () {\n    var factorial, getTimestamp, swap, _, _ref, _ref1, __slice = [].slice;\n    _ = require('16', module);\n    if (typeof window !== 'undefined' && window !== null ? (_ref = window.performance) != null ? _ref.now : void 0 : void 0) {\n        getTimestamp = function () {\n            return window.performance.now();\n        };\n    } else if (typeof window !== 'undefined' && window !== null ? (_ref1 = window.performance) != null ? _ref1.webkitNow : void 0 : void 0) {\n        getTimestamp = function () {\n            return window.performance.webkitNow();\n        };\n    } else {\n        getTimestamp = function () {\n            return new Date().getTime();\n        };\n    }\n    exports.getTimestamp = getTimestamp;\n    this.browserBackDisabled = false;\n    exports.disableBrowserBack = function () {\n        var rx;\n        if (!this.browserBackDisabled) {\n            rx = /INPUT|SELECT|TEXTAREA/i;\n            this.browserBackDisabled = true;\n            return $(document).bind('keydown keypress', function (e) {\n                if (e.which === 8) {\n                    if (!rx.test(e.target.tagName) || e.target.disabled || e.target.readOnly) {\n                        return e.preventDefault();\n                    }\n                }\n            });\n        }\n    };\n    exports.module = function (name) {\n        return global[name] = global[name] || {};\n    };\n    exports.asArray = function (value) {\n        if (_.isArray(value)) {\n            return value;\n        } else if (_.isNumber(value) || _.isBoolean(value)) {\n            return [value];\n        } else {\n            return _.toArray(value);\n        }\n    };\n    swap = function (arr, a, b) {\n        var temp;\n        temp = arr[a];\n        arr[a] = arr[b];\n        return arr[b] = temp;\n    };\n    factorial = function (n) {\n        var i, val;\n        val = 1;\n        i = 1;\n        while (i < n) {\n            val *= i;\n            i++;\n        }\n        return val;\n    };\n    exports.permute = function (perm, maxlen) {\n        var i, inc, j, out, total;\n        if (maxlen == null) {\n            maxlen = 1000;\n        }\n        console.log('maxlen', maxlen);\n        total = factorial(perm.length);\n        console.log('total', total);\n        j = 0;\n        i = 0;\n        inc = 1;\n        out = [];\n        maxlen = maxlen - 1;\n        while (j < total && out.length < maxlen) {\n            console.log('j', j);\n            while (i < perm.length - 1 && i >= 0 && out.length < maxlen) {\n                out.push(perm.slice(0));\n                swap(perm, i, i + 1);\n                i += inc;\n            }\n            out.push(perm.slice(0));\n            if (inc === 1) {\n                swap(perm, 0, 1);\n            } else {\n                swap(perm, perm.length - 1, perm.length - 2);\n            }\n            j++;\n            inc *= -1;\n            i += inc;\n        }\n        return out;\n    };\n    exports.rep = function (vec, times) {\n        var el, i, j, out;\n        if (!(times instanceof Array)) {\n            times = [times];\n        }\n        if (times.length !== 1 && vec.length !== times.length) {\n            throw 'vec.length must equal times.length or times.length must be 1';\n        }\n        if (vec.length === times.length) {\n            out = function () {\n                var _i, _len, _results;\n                _results = [];\n                for (i = _i = 0, _len = vec.length; _i < _len; i = ++_i) {\n                    el = vec[i];\n                    _results.push(function () {\n                        var _j, _ref2, _results1;\n                        _results1 = [];\n                        for (j = _j = 1, _ref2 = times[i]; 1 <= _ref2 ? _j <= _ref2 : _j >= _ref2; j = 1 <= _ref2 ? ++_j : --_j) {\n                            _results1.push(el);\n                        }\n                        return _results1;\n                    }());\n                }\n                return _results;\n            }();\n            return _.flatten(out);\n        } else {\n            out = _.times(times[0], function (_this) {\n                return function (n) {\n                    return vec;\n                };\n            }(this));\n            return _.flatten(out);\n        }\n    };\n    exports.repLen = function (vec, length) {\n        var i, _i, _results;\n        if (length < 1) {\n            throw 'repLen: length must be greater than or equal to 1';\n        }\n        _results = [];\n        for (i = _i = 0; 0 <= length ? _i < length : _i > length; i = 0 <= length ? ++_i : --_i) {\n            _results.push(vec[i % vec.length]);\n        }\n        return _results;\n    };\n    exports.sample = function (elements, n, replace) {\n        var i, _i, _results;\n        if (replace == null) {\n            replace = false;\n        }\n        if (n > elements.length && !replace) {\n            throw 'cannot take sample larger than the number of elements when \\'replace\\' argument is false';\n        }\n        if (!replace) {\n            return _.shuffle(elements).slice(0, n);\n        } else {\n            _results = [];\n            for (i = _i = 0; 0 <= n ? _i < n : _i > n; i = 0 <= n ? ++_i : --_i) {\n                _results.push(elements[Math.floor(Math.random() * elements.length)]);\n            }\n            return _results;\n        }\n    };\n    exports.oneOf = function (elements) {\n        return elements[Math.floor(Math.random() * elements.length)];\n    };\n    exports.inSet = function () {\n        var set;\n        set = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n        set = _.unique(_.flatten(set));\n        return function (a) {\n            return _.contains(set, a);\n        };\n    };\n    exports.doTimer = function (length, oncomplete) {\n        var instance, start;\n        start = getTimestamp();\n        instance = function () {\n            var diff, half;\n            diff = getTimestamp() - start;\n            if (diff >= length) {\n                return oncomplete(diff);\n            } else {\n                half = Math.max((length - diff) / 2, 1);\n                if (half < 20) {\n                    half = 1;\n                }\n                return setTimeout(instance, half);\n            }\n        };\n        return setTimeout(instance, 1);\n    };\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/utils.js\"],\"names\":[\"factorial\",\"getTimestamp\",\"swap\",\"_\",\"_ref\",\"_ref1\",\"__slice\",\"slice\",\"require\",\"window\",\"performance\",\"now\",\"webkitNow\",\"Date\",\"getTime\",\"exports\",\"browserBackDisabled\",\"disableBrowserBack\",\"rx\",\"$\",\"document\",\"bind\",\"e\",\"which\",\"test\",\"target\",\"tagName\",\"disabled\",\"readOnly\",\"preventDefault\",\"module\",\"name\",\"global\",\"asArray\",\"value\",\"isArray\",\"isNumber\",\"isBoolean\",\"toArray\",\"arr\",\"a\",\"b\",\"temp\",\"n\",\"i\",\"val\",\"permute\",\"perm\",\"maxlen\",\"inc\",\"j\",\"out\",\"total\",\"console\",\"log\",\"length\",\"push\",\"rep\",\"vec\",\"times\",\"el\",\"Array\",\"_i\",\"_len\",\"_results\",\"_j\",\"_ref2\",\"_results1\",\"flatten\",\"_this\",\"repLen\",\"sample\",\"elements\",\"replace\",\"shuffle\",\"Math\",\"floor\",\"random\",\"oneOf\",\"inSet\",\"set\",\"arguments\",\"call\",\"unique\",\"contains\",\"doTimer\",\"oncomplete\",\"instance\",\"start\",\"diff\",\"half\",\"max\",\"setTimeout\"],\"mappings\":\"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\"}","lineCount":186,"mtime":1395245873000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var factorial, getTimestamp, swap, _, _ref, _ref1,\n    __slice = [].slice;\n\n  _ = require('lodash');\n\n  if (typeof window !== \"undefined\" && window !== null ? (_ref = window.performance) != null ? _ref.now : void 0 : void 0) {\n    getTimestamp = function() {\n      return window.performance.now();\n    };\n  } else if (typeof window !== \"undefined\" && window !== null ? (_ref1 = window.performance) != null ? _ref1.webkitNow : void 0 : void 0) {\n    getTimestamp = function() {\n      return window.performance.webkitNow();\n    };\n  } else {\n    getTimestamp = function() {\n      return new Date().getTime();\n    };\n  }\n\n  exports.getTimestamp = getTimestamp;\n\n  this.browserBackDisabled = false;\n\n  exports.disableBrowserBack = function() {\n    var rx;\n    if (!this.browserBackDisabled) {\n      rx = /INPUT|SELECT|TEXTAREA/i;\n      this.browserBackDisabled = true;\n      return $(document).bind(\"keydown keypress\", function(e) {\n        if (e.which === 8) {\n          if (!rx.test(e.target.tagName) || e.target.disabled || e.target.readOnly) {\n            return e.preventDefault();\n          }\n        }\n      });\n    }\n  };\n\n  exports.module = function(name) {\n    return global[name] = global[name] || {};\n  };\n\n  exports.asArray = function(value) {\n    if (_.isArray(value)) {\n      return value;\n    } else if (_.isNumber(value) || _.isBoolean(value)) {\n      return [value];\n    } else {\n      return _.toArray(value);\n    }\n  };\n\n  swap = function(arr, a, b) {\n    var temp;\n    temp = arr[a];\n    arr[a] = arr[b];\n    return arr[b] = temp;\n  };\n\n  factorial = function(n) {\n    var i, val;\n    val = 1;\n    i = 1;\n    while (i < n) {\n      val *= i;\n      i++;\n    }\n    return val;\n  };\n\n  exports.permute = function(perm, maxlen) {\n    var i, inc, j, out, total;\n    if (maxlen == null) {\n      maxlen = 1000;\n    }\n    console.log(\"maxlen\", maxlen);\n    total = factorial(perm.length);\n    console.log(\"total\", total);\n    j = 0;\n    i = 0;\n    inc = 1;\n    out = [];\n    maxlen = maxlen - 1;\n    while (j < total && out.length < maxlen) {\n      console.log(\"j\", j);\n      while (i < perm.length - 1 && i >= 0 && out.length < maxlen) {\n        out.push(perm.slice(0));\n        swap(perm, i, i + 1);\n        i += inc;\n      }\n      out.push(perm.slice(0));\n      if (inc === 1) {\n        swap(perm, 0, 1);\n      } else {\n        swap(perm, perm.length - 1, perm.length - 2);\n      }\n      j++;\n      inc *= -1;\n      i += inc;\n    }\n    return out;\n  };\n\n\n  /*\n  exports.permute = (input) ->\n    input = _.unique(input)\n    permArr = []\n    usedChars = []\n  \n    maxlen = _.min([input.length, maxlen])\n  \n    exports.main = main = (input) ->\n  \n      for i in [0...input.length]\n        ch = input.splice(i, 1)[0]\n        usedChars.push(ch)\n        if (input.length == 0)\n          permArr.push(usedChars.slice())\n  \n        main(input)\n        input.splice(i, 0, ch)\n        usedChars.pop()\n  \n      permArr\n  \n    main(input)\n   */\n\n  exports.rep = function(vec, times) {\n    var el, i, j, out;\n    if (!(times instanceof Array)) {\n      times = [times];\n    }\n    if (times.length !== 1 && vec.length !== times.length) {\n      throw \"vec.length must equal times.length or times.length must be 1\";\n    }\n    if (vec.length === times.length) {\n      out = (function() {\n        var _i, _len, _results;\n        _results = [];\n        for (i = _i = 0, _len = vec.length; _i < _len; i = ++_i) {\n          el = vec[i];\n          _results.push((function() {\n            var _j, _ref2, _results1;\n            _results1 = [];\n            for (j = _j = 1, _ref2 = times[i]; 1 <= _ref2 ? _j <= _ref2 : _j >= _ref2; j = 1 <= _ref2 ? ++_j : --_j) {\n              _results1.push(el);\n            }\n            return _results1;\n          })());\n        }\n        return _results;\n      })();\n      return _.flatten(out);\n    } else {\n      out = _.times(times[0], (function(_this) {\n        return function(n) {\n          return vec;\n        };\n      })(this));\n      return _.flatten(out);\n    }\n  };\n\n  exports.repLen = function(vec, length) {\n    var i, _i, _results;\n    if (length < 1) {\n      throw \"repLen: length must be greater than or equal to 1\";\n    }\n    _results = [];\n    for (i = _i = 0; 0 <= length ? _i < length : _i > length; i = 0 <= length ? ++_i : --_i) {\n      _results.push(vec[i % vec.length]);\n    }\n    return _results;\n  };\n\n  exports.sample = function(elements, n, replace) {\n    var i, _i, _results;\n    if (replace == null) {\n      replace = false;\n    }\n    if (n > elements.length && !replace) {\n      throw \"cannot take sample larger than the number of elements when 'replace' argument is false\";\n    }\n    if (!replace) {\n      return _.shuffle(elements).slice(0, n);\n    } else {\n      _results = [];\n      for (i = _i = 0; 0 <= n ? _i < n : _i > n; i = 0 <= n ? ++_i : --_i) {\n        _results.push(elements[Math.floor(Math.random() * elements.length)]);\n      }\n      return _results;\n    }\n  };\n\n  exports.oneOf = function(elements) {\n    return elements[Math.floor(Math.random() * elements.length)];\n  };\n\n  exports.inSet = function() {\n    var set;\n    set = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n    set = _.unique(_.flatten(set));\n    return function(a) {\n      return _.contains(set, a);\n    };\n  };\n\n  exports.doTimer = function(length, oncomplete) {\n    var instance, start;\n    start = getTimestamp();\n    instance = function() {\n      var diff, half;\n      diff = getTimestamp() - start;\n      if (diff >= length) {\n        return oncomplete(diff);\n      } else {\n        half = Math.max((length - diff) / 2, 1);\n        if (half < 20) {\n          half = 1;\n        }\n        return setTimeout(instance, half);\n      }\n    };\n    return setTimeout(instance, 1);\n  };\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/components.js":{"id":77,"canonicalName":"lib/components/components.js","code":"(function () {\n    var KP;\n    exports.Sound = require('80', module).Sound;\n    exports.Confirm = require('81', module).Confirm;\n    exports.First = require('82', module).First;\n    exports.Group = require('83', module).Group;\n    exports.Grid = require('83', module).Grid;\n    KP = require('84', module);\n    exports.KeyPress = KP.KeyPress;\n    exports.SpaceKey = KP.SpaceKey;\n    exports.AnyKey = KP.AnyKey;\n    exports.MousePress = require('85', module).MousePress;\n    exports.Prompt = require('86', module).Prompt;\n    exports.Sequence = require('87', module).Sequence;\n    exports.Timeout = require('88', module).Timeout;\n    exports.Click = require('89', module).Click;\n    exports.Nothing = require('90', module).Nothing;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/components.js\"],\"names\":[\"KP\",\"exports\",\"Sound\",\"require\",\"Confirm\",\"First\",\"Group\",\"Grid\",\"KeyPress\",\"SpaceKey\",\"AnyKey\",\"MousePress\",\"Prompt\",\"Sequence\",\"Timeout\",\"Click\",\"Nothing\",\"call\"],\"mappings\":\"AAAA,CAAC,YAAW;AAAA,IACV,IAAIA,EAAJ,CADU;AAAA,IAGVC,OAAA,CAAQC,KAAR,GAAgBC,OAAA,C,IAAA,E,MAAA,EAAmBD,KAAnC,CAHU;AAAA,IAKVD,OAAA,CAAQG,OAAR,GAAkBD,OAAA,C,IAAA,E,MAAA,EAAqBC,OAAvC,CALU;AAAA,IAOVH,OAAA,CAAQI,KAAR,GAAgBF,OAAA,C,IAAA,E,MAAA,EAAmBE,KAAnC,CAPU;AAAA,IASVJ,OAAA,CAAQK,KAAR,GAAgBH,OAAA,C,IAAA,E,MAAA,EAAmBG,KAAnC,CATU;AAAA,IAWVL,OAAA,CAAQM,IAAR,GAAeJ,OAAA,C,IAAA,E,MAAA,EAAmBI,IAAlC,CAXU;AAAA,IAaVP,EAAA,GAAKG,OAAA,C,IAAA,E,MAAA,CAAL,CAbU;AAAA,IAeVF,OAAA,CAAQO,QAAR,GAAmBR,EAAA,CAAGQ,QAAtB,CAfU;AAAA,IAiBVP,OAAA,CAAQQ,QAAR,GAAmBT,EAAA,CAAGS,QAAtB,CAjBU;AAAA,IAmBVR,OAAA,CAAQS,MAAR,GAAiBV,EAAA,CAAGU,MAApB,CAnBU;AAAA,IAqBVT,OAAA,CAAQU,UAAR,GAAqBR,OAAA,C,IAAA,E,MAAA,EAAwBQ,UAA7C,CArBU;AAAA,IAuBVV,OAAA,CAAQW,MAAR,GAAiBT,OAAA,C,IAAA,E,MAAA,EAAoBS,MAArC,CAvBU;AAAA,IAyBVX,OAAA,CAAQY,QAAR,GAAmBV,OAAA,C,IAAA,E,MAAA,EAAsBU,QAAzC,CAzBU;AAAA,IA2BVZ,OAAA,CAAQa,OAAR,GAAkBX,OAAA,C,IAAA,E,MAAA,EAAqBW,OAAvC,CA3BU;AAAA,IA6BVb,OAAA,CAAQc,KAAR,GAAgBZ,OAAA,C,IAAA,E,MAAA,EAAmBY,KAAnC,CA7BU;AAAA,IA+BVd,OAAA,CAAQe,OAAR,GAAkBb,OAAA,C,IAAA,E,MAAA,EAAqBa,OAAvC,CA/BU;AAAA,CAAZ,CAiCGC,IAjCH,CAiCQ,IAjCR\"}","lineCount":18,"mtime":1395245872000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/sound.js","canonicalName":"lib/components/sound.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/confirm.js","canonicalName":"lib/components/confirm.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/first.js","canonicalName":"lib/components/first.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/group.js","canonicalName":"lib/components/group.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/group.js","canonicalName":"lib/components/group.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/keypress.js","canonicalName":"lib/components/keypress.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/mousepress.js","canonicalName":"lib/components/mousepress.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/prompt.js","canonicalName":"lib/components/prompt.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/sequence.js","canonicalName":"lib/components/sequence.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/timeout.js","canonicalName":"lib/components/timeout.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/click.js","canonicalName":"lib/components/click.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/nothing.js","canonicalName":"lib/components/nothing.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var KP;\n\n  exports.Sound = require(\"./sound\").Sound;\n\n  exports.Confirm = require(\"./confirm\").Confirm;\n\n  exports.First = require(\"./first\").First;\n\n  exports.Group = require(\"./group\").Group;\n\n  exports.Grid = require(\"./group\").Grid;\n\n  KP = require(\"./keypress\");\n\n  exports.KeyPress = KP.KeyPress;\n\n  exports.SpaceKey = KP.SpaceKey;\n\n  exports.AnyKey = KP.AnyKey;\n\n  exports.MousePress = require(\"./mousepress\").MousePress;\n\n  exports.Prompt = require(\"./prompt\").Prompt;\n\n  exports.Sequence = require(\"./sequence\").Sequence;\n\n  exports.Timeout = require(\"./timeout\").Timeout;\n\n  exports.Click = require(\"./click\").Click;\n\n  exports.Nothing = require(\"./nothing\").Nothing;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/nothing.js":{"id":90,"canonicalName":"lib/components/nothing.js","code":"(function () {\n    var Nothing, Stimulus, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Stimulus = require('72', module).Stimulus;\n    Nothing = function (_super) {\n        __extends(Nothing, _super);\n        function Nothing(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            Nothing.__super__.constructor.call(this, spec);\n        }\n        Nothing.prototype.render = function (context, layer) {\n        };\n        return Nothing;\n    }(Stimulus);\n    exports.Nothing = Nothing;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/nothing.js\"],\"names\":[\"Nothing\",\"Stimulus\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"spec\",\"render\",\"context\",\"layer\",\"exports\"],\"mappings\":\"AAAA,CAAC,YAAW;AAAA,IACV,IAAIA,OAAJ,EAAaC,QAAb,EACEC,SAAA,GAAY,GAAGC,cADjB,EAEEC,SAAA,GAAY,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAA,YAAE,SAASC,GAAT,IAAgBD,MAAhB,EAAwB;AAAA,gBAAE,IAAIJ,SAAA,CAAUM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ;AAAA,oBAAiCF,KAAA,CAAME,GAAN,IAAaD,MAAA,CAAOC,GAAP,CAAb,CAAnC;AAAA,aAA1B;AAAA,YAAyF,SAASE,IAAT,GAAgB;AAAA,gBAAE,KAAKC,WAAL,GAAmBL,KAAnB,CAAF;AAAA,aAAzG;AAAA,YAAuII,IAAA,CAAKE,SAAL,GAAiBL,MAAA,CAAOK,SAAxB,CAAvI;AAAA,YAA0KN,KAAA,CAAMM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA1K;AAAA,YAAwMJ,KAAA,CAAMO,SAAN,GAAkBN,MAAA,CAAOK,SAAzB,CAAxM;AAAA,YAA4O,OAAON,KAAP,CAA5O;AAAA,SAFtC,CADU;AAAA,IAKVJ,QAAA,GAAWY,OAAA,C,IAAA,E,MAAA,EAAuBZ,QAAlC,CALU;AAAA,IAOVD,OAAA,GAAW,UAASc,MAAT,EAAiB;AAAA,QAC1BV,SAAA,CAAUJ,OAAV,EAAmBc,MAAnB,EAD0B;AAAA,QAG1B,SAASd,OAAT,CAAiBe,IAAjB,EAAuB;AAAA,YACrB,IAAIA,IAAA,IAAQ,IAAZ,EAAkB;AAAA,gBAChBA,IAAA,GAAO,EAAP,CADgB;AAAA,aADG;AAAA,YAIrBf,OAAA,CAAQY,SAAR,CAAkBF,WAAlB,CAA8BF,IAA9B,CAAmC,IAAnC,EAAyCO,IAAzC,EAJqB;AAAA,SAHG;AAAA,QAU1Bf,OAAA,CAAQW,SAAR,CAAkBK,MAAlB,GAA2B,UAASC,OAAT,EAAkBC,KAAlB,EAAyB;AAAA,SAApD,CAV0B;AAAA,QAY1B,OAAOlB,OAAP,CAZ0B;AAAA,KAAlB,CAcPC,QAdO,CAAV,CAPU;AAAA,IAuBVkB,OAAA,CAAQnB,OAAR,GAAkBA,OAAlB,CAvBU;AAAA,CAAZ,CAyBGQ,IAzBH,CAyBQ,IAzBR\"}","lineCount":29,"mtime":1395245873000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var Nothing, Stimulus,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Stimulus = require(\"../stimresp\").Stimulus;\n\n  Nothing = (function(_super) {\n    __extends(Nothing, _super);\n\n    function Nothing(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      Nothing.__super__.constructor.call(this, spec);\n    }\n\n    Nothing.prototype.render = function(context, layer) {};\n\n    return Nothing;\n\n  })(Stimulus);\n\n  exports.Nothing = Nothing;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/click.js":{"id":89,"canonicalName":"lib/components/click.js","code":"(function () {\n    var Click, Q, Response, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Q = require('17', module);\n    Response = require('72', module).Response;\n    Click = function (_super) {\n        __extends(Click, _super);\n        function Click(refid) {\n            this.refid = refid;\n            Click.__super__.constructor.call(this);\n        }\n        Click.prototype.activate = function (context) {\n            var deferred, element;\n            element = context.stage.get('#' + this.refid);\n            if (!element) {\n                throw new Error('cannot find element with id' + this.refid);\n            }\n            deferred = Q.defer();\n            element.on('click', function (_this) {\n                return function (ev) {\n                    return deferred.resolve(ev);\n                };\n            }(this));\n            return deferred.promise;\n        };\n        return Click;\n    }(Response);\n    exports.Click = Click;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/click.js\"],\"names\":[\"Click\",\"Q\",\"Response\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"refid\",\"activate\",\"context\",\"deferred\",\"element\",\"stage\",\"get\",\"Error\",\"defer\",\"on\",\"_this\",\"ev\",\"resolve\",\"promise\",\"exports\"],\"mappings\":\"AAAA,CAAC,YAAW;AAAA,IACV,IAAIA,KAAJ,EAAWC,CAAX,EAAcC,QAAd,EACEC,SAAA,GAAY,GAAGC,cADjB,EAEEC,SAAA,GAAY,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAA,YAAE,SAASC,GAAT,IAAgBD,MAAhB,EAAwB;AAAA,gBAAE,IAAIJ,SAAA,CAAUM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ;AAAA,oBAAiCF,KAAA,CAAME,GAAN,IAAaD,MAAA,CAAOC,GAAP,CAAb,CAAnC;AAAA,aAA1B;AAAA,YAAyF,SAASE,IAAT,GAAgB;AAAA,gBAAE,KAAKC,WAAL,GAAmBL,KAAnB,CAAF;AAAA,aAAzG;AAAA,YAAuII,IAAA,CAAKE,SAAL,GAAiBL,MAAA,CAAOK,SAAxB,CAAvI;AAAA,YAA0KN,KAAA,CAAMM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA1K;AAAA,YAAwMJ,KAAA,CAAMO,SAAN,GAAkBN,MAAA,CAAOK,SAAzB,CAAxM;AAAA,YAA4O,OAAON,KAAP,CAA5O;AAAA,SAFtC,CADU;AAAA,IAKVL,CAAA,GAAIa,OAAA,C,IAAA,E,MAAA,CAAJ,CALU;AAAA,IAOVZ,QAAA,GAAWY,OAAA,C,IAAA,E,MAAA,EAAuBZ,QAAlC,CAPU;AAAA,IASVF,KAAA,GAAS,UAASe,MAAT,EAAiB;AAAA,QACxBV,SAAA,CAAUL,KAAV,EAAiBe,MAAjB,EADwB;AAAA,QAGxB,SAASf,KAAT,CAAegB,KAAf,EAAsB;AAAA,YACpB,KAAKA,KAAL,GAAaA,KAAb,CADoB;AAAA,YAEpBhB,KAAA,CAAMa,SAAN,CAAgBF,WAAhB,CAA4BF,IAA5B,CAAiC,IAAjC,EAFoB;AAAA,SAHE;AAAA,QAQxBT,KAAA,CAAMY,SAAN,CAAgBK,QAAhB,GAA2B,UAASC,OAAT,EAAkB;AAAA,YAC3C,IAAIC,QAAJ,EAAcC,OAAd,CAD2C;AAAA,YAE3CA,OAAA,GAAUF,OAAA,CAAQG,KAAR,CAAcC,GAAd,CAAkB,MAAM,KAAKN,KAA7B,CAAV,CAF2C;AAAA,YAG3C,IAAI,CAACI,OAAL,EAAc;AAAA,gBACZ,MAAM,IAAIG,KAAJ,CAAU,gCAAgC,KAAKP,KAA/C,CAAN,CADY;AAAA,aAH6B;AAAA,YAM3CG,QAAA,GAAWlB,CAAA,CAAEuB,KAAF,EAAX,CAN2C;AAAA,YAO3CJ,OAAA,CAAQK,EAAR,CAAW,OAAX,EAAqB,UAASC,KAAT,EAAgB;AAAA,gBACnC,OAAO,UAASC,EAAT,EAAa;AAAA,oBAClB,OAAOR,QAAA,CAASS,OAAT,CAAiBD,EAAjB,CAAP,CADkB;AAAA,iBAApB,CADmC;AAAA,aAAjB,CAIjB,IAJiB,CAApB,EAP2C;AAAA,YAY3C,OAAOR,QAAA,CAASU,OAAhB,CAZ2C;AAAA,SAA7C,CARwB;AAAA,QAuBxB,OAAO7B,KAAP,CAvBwB;AAAA,KAAlB,CAyBLE,QAzBK,CAAR,CATU;AAAA,IAoCV4B,OAAA,CAAQ9B,KAAR,GAAgBA,KAAhB,CApCU;AAAA,CAAZ,CAsCGS,IAtCH,CAsCQ,IAtCR\"}","lineCount":40,"mtime":1395245872000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/q/q.js","canonicalName":"node_modules/q/q.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var Click, Q, Response,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Q = require(\"q\");\n\n  Response = require(\"../stimresp\").Response;\n\n  Click = (function(_super) {\n    __extends(Click, _super);\n\n    function Click(refid) {\n      this.refid = refid;\n      Click.__super__.constructor.call(this);\n    }\n\n    Click.prototype.activate = function(context) {\n      var deferred, element;\n      element = context.stage.get(\"#\" + this.refid);\n      if (!element) {\n        throw new Error(\"cannot find element with id\" + this.refid);\n      }\n      deferred = Q.defer();\n      element.on(\"click\", (function(_this) {\n        return function(ev) {\n          return deferred.resolve(ev);\n        };\n      })(this));\n      return deferred.promise;\n    };\n\n    return Click;\n\n  })(Response);\n\n  exports.Click = Click;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/timeout.js":{"id":88,"canonicalName":"lib/components/timeout.js","code":"(function () {\n    var Q, Response, ResponseData, Timeout, utils, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    utils = require('69', module);\n    Q = require('17', module);\n    Response = require('72', module).Response;\n    ResponseData = require('72', module).ResponseData;\n    Timeout = function (_super) {\n        __extends(Timeout, _super);\n        function Timeout() {\n            return Timeout.__super__.constructor.apply(this, arguments);\n        }\n        Timeout.prototype.defaults = { duration: 1000 };\n        Timeout.prototype.activate = function (context) {\n            var deferred;\n            deferred = Q.defer();\n            utils.doTimer(this.spec.duration, function (_this) {\n                return function (diff) {\n                    var resp;\n                    resp = {\n                        name: 'Timeout',\n                        id: _this.id,\n                        timeElapsed: diff,\n                        timeRequested: _this.spec.duration\n                    };\n                    return deferred.resolve(new ResponseData(resp));\n                };\n            }(this));\n            return deferred.promise;\n        };\n        return Timeout;\n    }(Response);\n    exports.Timeout = Timeout;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/timeout.js\"],\"names\":[\"Q\",\"Response\",\"ResponseData\",\"Timeout\",\"utils\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"apply\",\"arguments\",\"defaults\",\"duration\",\"activate\",\"context\",\"deferred\",\"defer\",\"doTimer\",\"spec\",\"_this\",\"diff\",\"resp\",\"name\",\"id\",\"timeElapsed\",\"timeRequested\",\"resolve\",\"promise\",\"exports\"],\"mappings\":\"AAAA,CAAC,YAAW;AAAA,IACV,IAAIA,CAAJ,EAAOC,QAAP,EAAiBC,YAAjB,EAA+BC,OAA/B,EAAwCC,KAAxC,EACEC,SAAA,GAAY,GAAGC,cADjB,EAEEC,SAAA,GAAY,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAA,YAAE,SAASC,GAAT,IAAgBD,MAAhB,EAAwB;AAAA,gBAAE,IAAIJ,SAAA,CAAUM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ;AAAA,oBAAiCF,KAAA,CAAME,GAAN,IAAaD,MAAA,CAAOC,GAAP,CAAb,CAAnC;AAAA,aAA1B;AAAA,YAAyF,SAASE,IAAT,GAAgB;AAAA,gBAAE,KAAKC,WAAL,GAAmBL,KAAnB,CAAF;AAAA,aAAzG;AAAA,YAAuII,IAAA,CAAKE,SAAL,GAAiBL,MAAA,CAAOK,SAAxB,CAAvI;AAAA,YAA0KN,KAAA,CAAMM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA1K;AAAA,YAAwMJ,KAAA,CAAMO,SAAN,GAAkBN,MAAA,CAAOK,SAAzB,CAAxM;AAAA,YAA4O,OAAON,KAAP,CAA5O;AAAA,SAFtC,CADU;AAAA,IAKVJ,KAAA,GAAQY,OAAA,C,IAAA,E,MAAA,CAAR,CALU;AAAA,IAOVhB,CAAA,GAAIgB,OAAA,C,IAAA,E,MAAA,CAAJ,CAPU;AAAA,IASVf,QAAA,GAAWe,OAAA,C,IAAA,E,MAAA,EAAuBf,QAAlC,CATU;AAAA,IAWVC,YAAA,GAAec,OAAA,C,IAAA,E,MAAA,EAAuBd,YAAtC,CAXU;AAAA,IAaVC,OAAA,GAAW,UAASc,MAAT,EAAiB;AAAA,QAC1BV,SAAA,CAAUJ,OAAV,EAAmBc,MAAnB,EAD0B;AAAA,QAG1B,SAASd,OAAT,GAAmB;AAAA,YACjB,OAAOA,OAAA,CAAQY,SAAR,CAAkBF,WAAlB,CAA8BK,KAA9B,CAAoC,IAApC,EAA0CC,SAA1C,CAAP,CADiB;AAAA,SAHO;AAAA,QAO1BhB,OAAA,CAAQW,SAAR,CAAkBM,QAAlB,GAA6B,EAC3BC,QAAA,EAAU,IADiB,EAA7B,CAP0B;AAAA,QAW1BlB,OAAA,CAAQW,SAAR,CAAkBQ,QAAlB,GAA6B,UAASC,OAAT,EAAkB;AAAA,YAC7C,IAAIC,QAAJ,CAD6C;AAAA,YAE7CA,QAAA,GAAWxB,CAAA,CAAEyB,KAAF,EAAX,CAF6C;AAAA,YAG7CrB,KAAA,CAAMsB,OAAN,CAAc,KAAKC,IAAL,CAAUN,QAAxB,EAAmC,UAASO,KAAT,EAAgB;AAAA,gBACjD,OAAO,UAASC,IAAT,EAAe;AAAA,oBACpB,IAAIC,IAAJ,CADoB;AAAA,oBAEpBA,IAAA,GAAO;AAAA,wBACLC,IAAA,EAAM,SADD;AAAA,wBAELC,EAAA,EAAIJ,KAAA,CAAMI,EAFL;AAAA,wBAGLC,WAAA,EAAaJ,IAHR;AAAA,wBAILK,aAAA,EAAeN,KAAA,CAAMD,IAAN,CAAWN,QAJrB;AAAA,qBAAP,CAFoB;AAAA,oBAQpB,OAAOG,QAAA,CAASW,OAAT,CAAiB,IAAIjC,YAAJ,CAAiB4B,IAAjB,CAAjB,CAAP,CARoB;AAAA,iBAAtB,CADiD;AAAA,aAAjB,CAW/B,IAX+B,CAAlC,EAH6C;AAAA,YAe7C,OAAON,QAAA,CAASY,OAAhB,CAf6C;AAAA,SAA/C,CAX0B;AAAA,QA6B1B,OAAOjC,OAAP,CA7B0B;AAAA,KAAlB,CA+BPF,QA/BO,CAAV,CAbU;AAAA,IA8CVoC,OAAA,CAAQlC,OAAR,GAAkBA,OAAlB,CA9CU;AAAA,CAAZ,CAgDGQ,IAhDH,CAgDQ,IAhDR\"}","lineCount":45,"mtime":1395245873000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/lib/utils.js","canonicalName":"lib/utils.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/q/q.js","canonicalName":"node_modules/q/q.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var Q, Response, ResponseData, Timeout, utils,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  utils = require(\"../utils\");\n\n  Q = require(\"q\");\n\n  Response = require(\"../stimresp\").Response;\n\n  ResponseData = require(\"../stimresp\").ResponseData;\n\n  Timeout = (function(_super) {\n    __extends(Timeout, _super);\n\n    function Timeout() {\n      return Timeout.__super__.constructor.apply(this, arguments);\n    }\n\n    Timeout.prototype.defaults = {\n      duration: 1000\n    };\n\n    Timeout.prototype.activate = function(context) {\n      var deferred;\n      deferred = Q.defer();\n      utils.doTimer(this.spec.duration, (function(_this) {\n        return function(diff) {\n          var resp;\n          resp = {\n            name: \"Timeout\",\n            id: _this.id,\n            timeElapsed: diff,\n            timeRequested: _this.spec.duration\n          };\n          return deferred.resolve(new ResponseData(resp));\n        };\n      })(this));\n      return deferred.promise;\n    };\n\n    return Timeout;\n\n  })(Response);\n\n  exports.Timeout = Timeout;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/sequence.js":{"id":87,"canonicalName":"lib/components/sequence.js","code":"(function () {\n    var Presentable, Q, Sequence, Stimulus, Timeout, utils, _, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Stimulus = require('72', module).Stimulus;\n    Timeout = require('88', module).Timeout;\n    Presentable = require('72', module).Presentable;\n    Q = require('17', module);\n    utils = require('69', module);\n    _ = require('16', module);\n    Sequence = function (_super) {\n        __extends(Sequence, _super);\n        function Sequence(stims, soa, clear, times) {\n            var i;\n            this.stims = stims;\n            this.soa = soa;\n            this.clear = clear != null ? clear : true;\n            this.times = times != null ? times : 1;\n            Sequence.__super__.constructor.call(this, {});\n            if (this.soa.length !== this.stims.length) {\n                this.soa = utils.repLen(this.soa, this.stims.length);\n            }\n            this.onsets = function () {\n                var _i, _ref, _results;\n                _results = [];\n                for (i = _i = 0, _ref = this.soa.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                    _results.push(_.reduce(this.soa.slice(0, +i + 1 || 9000000000), function (x, acc) {\n                        return x + acc;\n                    }));\n                }\n                return _results;\n            }.call(this);\n        }\n        Sequence.prototype.genseq = function (context) {\n            var deferred, _i, _ref, _results;\n            deferred = Q.defer();\n            _.forEach(function () {\n                _results = [];\n                for (var _i = 0, _ref = this.stims.length; 0 <= _ref ? _i < _ref : _i > _ref; 0 <= _ref ? _i++ : _i--) {\n                    _results.push(_i);\n                }\n                return _results;\n            }.apply(this), function (_this) {\n                return function (i) {\n                    var ev, stim;\n                    ev = new Timeout({ duration: _this.onsets[i] });\n                    stim = _this.stims[i];\n                    return ev.activate(context).then(function () {\n                        var p;\n                        if (!_this.stopped) {\n                            if (_this.clear) {\n                                context.clearContent();\n                            }\n                            p = stim.render(context);\n                            p.present(context);\n                            context.draw();\n                            if (i === _this.stims.length - 1) {\n                                return deferred.resolve(1);\n                            }\n                        }\n                    });\n                };\n            }(this));\n            return deferred.promise;\n        };\n        Sequence.prototype.render = function (context) {\n            return {\n                present: function (_this) {\n                    return function (context) {\n                        var i, result, _i, _ref;\n                        result = Q.resolve(0);\n                        for (i = _i = 0, _ref = _this.times; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                            console.log('i ', i);\n                            result = result.then(function () {\n                                return _this.genseq(context);\n                            });\n                        }\n                        return result.then(function () {\n                            return context.clearContent();\n                        });\n                    };\n                }(this)\n            };\n        };\n        return Sequence;\n    }(Stimulus);\n    exports.Sequence = Sequence;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/sequence.js\"],\"names\":[\"Presentable\",\"Q\",\"Sequence\",\"Stimulus\",\"Timeout\",\"utils\",\"_\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"stims\",\"soa\",\"clear\",\"times\",\"i\",\"length\",\"repLen\",\"onsets\",\"_i\",\"_ref\",\"_results\",\"push\",\"reduce\",\"slice\",\"x\",\"acc\",\"genseq\",\"context\",\"deferred\",\"defer\",\"forEach\",\"apply\",\"_this\",\"ev\",\"stim\",\"duration\",\"activate\",\"then\",\"p\",\"stopped\",\"clearContent\",\"render\",\"present\",\"draw\",\"resolve\",\"promise\",\"result\",\"console\",\"log\",\"exports\"],\"mappings\":\"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\"}","lineCount":98,"mtime":1395245873000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/timeout.js","canonicalName":"lib/components/timeout.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/q/q.js","canonicalName":"node_modules/q/q.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/utils.js","canonicalName":"lib/utils.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var Presentable, Q, Sequence, Stimulus, Timeout, utils, _,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Stimulus = require(\"../stimresp\").Stimulus;\n\n  Timeout = require(\"./timeout\").Timeout;\n\n  Presentable = require(\"../stimresp\").Presentable;\n\n  Q = require(\"q\");\n\n  utils = require(\"../utils\");\n\n  _ = require(\"lodash\");\n\n  Sequence = (function(_super) {\n    __extends(Sequence, _super);\n\n    function Sequence(stims, soa, clear, times) {\n      var i;\n      this.stims = stims;\n      this.soa = soa;\n      this.clear = clear != null ? clear : true;\n      this.times = times != null ? times : 1;\n      Sequence.__super__.constructor.call(this, {});\n      if (this.soa.length !== this.stims.length) {\n        this.soa = utils.repLen(this.soa, this.stims.length);\n      }\n      this.onsets = (function() {\n        var _i, _ref, _results;\n        _results = [];\n        for (i = _i = 0, _ref = this.soa.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n          _results.push(_.reduce(this.soa.slice(0, +i + 1 || 9e9), function(x, acc) {\n            return x + acc;\n          }));\n        }\n        return _results;\n      }).call(this);\n    }\n\n    Sequence.prototype.genseq = function(context) {\n      var deferred, _i, _ref, _results;\n      deferred = Q.defer();\n      _.forEach((function() {\n        _results = [];\n        for (var _i = 0, _ref = this.stims.length; 0 <= _ref ? _i < _ref : _i > _ref; 0 <= _ref ? _i++ : _i--){ _results.push(_i); }\n        return _results;\n      }).apply(this), (function(_this) {\n        return function(i) {\n          var ev, stim;\n          ev = new Timeout({\n            duration: _this.onsets[i]\n          });\n          stim = _this.stims[i];\n          return ev.activate(context).then(function() {\n            var p;\n            if (!_this.stopped) {\n              if (_this.clear) {\n                context.clearContent();\n              }\n              p = stim.render(context);\n              p.present(context);\n              context.draw();\n              if (i === _this.stims.length - 1) {\n                return deferred.resolve(1);\n              }\n            }\n          });\n        };\n      })(this));\n      return deferred.promise;\n    };\n\n    Sequence.prototype.render = function(context) {\n      return {\n        present: (function(_this) {\n          return function(context) {\n            var i, result, _i, _ref;\n            result = Q.resolve(0);\n            for (i = _i = 0, _ref = _this.times; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n              console.log(\"i \", i);\n              result = result.then(function() {\n                return _this.genseq(context);\n              });\n            }\n            return result.then(function() {\n              return context.clearContent();\n            });\n          };\n        })(this)\n      };\n    };\n\n    return Sequence;\n\n  })(Stimulus);\n\n  exports.Sequence = Sequence;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/prompt.js":{"id":86,"canonicalName":"lib/components/prompt.js","code":"(function () {\n    var Prompt, Q, Response, utils, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    utils = require('69', module);\n    Q = require('17', module);\n    Response = require('72', module).Response;\n    Prompt = function (_super) {\n        __extends(Prompt, _super);\n        function Prompt() {\n            return Prompt.__super__.constructor.apply(this, arguments);\n        }\n        Prompt.prototype.defaults = {\n            title: 'Prompt',\n            delay: 0,\n            defaultValue: '',\n            theme: 'vex-theme-wireframe'\n        };\n        Prompt.prototype.activate = function (context) {\n            var deferred, promise;\n            deferred = Q.defer();\n            promise = Q.delay(this.spec.delay);\n            promise.then(function (_this) {\n                return function (f) {\n                    return vex.dialog.prompt({\n                        message: _this.spec.title,\n                        placeholder: _this.spec.defaultValue,\n                        className: 'vex-theme-wireframe',\n                        callback: function (value) {\n                            return deferred.resolve(value);\n                        }\n                    });\n                };\n            }(this));\n            return deferred.promise;\n        };\n        return Prompt;\n    }(Response);\n    exports.Prompt = Prompt;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/prompt.js\"],\"names\":[\"Prompt\",\"Q\",\"Response\",\"utils\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"apply\",\"arguments\",\"defaults\",\"title\",\"delay\",\"defaultValue\",\"theme\",\"activate\",\"context\",\"deferred\",\"promise\",\"defer\",\"spec\",\"then\",\"_this\",\"f\",\"vex\",\"dialog\",\"prompt\",\"message\",\"placeholder\",\"className\",\"callback\",\"value\",\"resolve\",\"exports\"],\"mappings\":\"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\"}","lineCount":50,"mtime":1395245873000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/lib/utils.js","canonicalName":"lib/utils.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/q/q.js","canonicalName":"node_modules/q/q.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var Prompt, Q, Response, utils,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  utils = require(\"../utils\");\n\n  Q = require(\"q\");\n\n  Response = require(\"../stimresp\").Response;\n\n  Prompt = (function(_super) {\n    __extends(Prompt, _super);\n\n    function Prompt() {\n      return Prompt.__super__.constructor.apply(this, arguments);\n    }\n\n    Prompt.prototype.defaults = {\n      title: \"Prompt\",\n      delay: 0,\n      defaultValue: \"\",\n      theme: 'vex-theme-wireframe'\n    };\n\n    Prompt.prototype.activate = function(context) {\n      var deferred, promise;\n      deferred = Q.defer();\n      promise = Q.delay(this.spec.delay);\n      promise.then((function(_this) {\n        return function(f) {\n          return vex.dialog.prompt({\n            message: _this.spec.title,\n            placeholder: _this.spec.defaultValue,\n            className: 'vex-theme-wireframe',\n            callback: function(value) {\n              return deferred.resolve(value);\n            }\n          });\n        };\n      })(this));\n      return deferred.promise;\n    };\n\n    return Prompt;\n\n  })(Response);\n\n  exports.Prompt = Prompt;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/mousepress.js":{"id":85,"canonicalName":"lib/components/mousepress.js","code":"(function () {\n    var MousePress, Q, Response, ResponseData, utils, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Q = require('17', module);\n    Response = require('72', module).Response;\n    ResponseData = require('72', module).ResponseData;\n    utils = require('69', module);\n    MousePress = function (_super) {\n        __extends(MousePress, _super);\n        function MousePress() {\n            return MousePress.__super__.constructor.apply(this, arguments);\n        }\n        MousePress.prototype.activate = function (context) {\n            var deferred, mouse, myname;\n            this.startTime = utils.getTimestamp();\n            myname = this.name;\n            deferred = Q.defer();\n            mouse = context.mousepressStream();\n            mouse.stream.take(1).onValue(function (_this) {\n                return function (event) {\n                    var resp, timestamp;\n                    timestamp = utils.getTimestamp();\n                    mouse.stop();\n                    resp = {\n                        name: myname,\n                        id: _this.id,\n                        KeyTime: timestamp,\n                        RT: timestamp - _this.startTime,\n                        Accuracy: Acc\n                    };\n                    return deferred.resolve(new ResponseData(resp));\n                };\n            }(this));\n            return deferred.promise;\n        };\n        return MousePress;\n    }(Response);\n    exports.MousePress = MousePress;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/mousepress.js\"],\"names\":[\"MousePress\",\"Q\",\"Response\",\"ResponseData\",\"utils\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"apply\",\"arguments\",\"activate\",\"context\",\"deferred\",\"mouse\",\"myname\",\"startTime\",\"getTimestamp\",\"name\",\"defer\",\"mousepressStream\",\"stream\",\"take\",\"onValue\",\"_this\",\"event\",\"resp\",\"timestamp\",\"stop\",\"id\",\"KeyTime\",\"RT\",\"Accuracy\",\"Acc\",\"resolve\",\"promise\",\"exports\"],\"mappings\":\"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\"}","lineCount":50,"mtime":1395245873000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/q/q.js","canonicalName":"node_modules/q/q.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/utils.js","canonicalName":"lib/utils.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var MousePress, Q, Response, ResponseData, utils,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Q = require(\"q\");\n\n  Response = require(\"../stimresp\").Response;\n\n  ResponseData = require(\"../stimresp\").ResponseData;\n\n  utils = require(\"../utils\");\n\n  MousePress = (function(_super) {\n    __extends(MousePress, _super);\n\n    function MousePress() {\n      return MousePress.__super__.constructor.apply(this, arguments);\n    }\n\n    MousePress.prototype.activate = function(context) {\n      var deferred, mouse, myname;\n      this.startTime = utils.getTimestamp();\n      myname = this.name;\n      deferred = Q.defer();\n      mouse = context.mousepressStream();\n      mouse.stream.take(1).onValue((function(_this) {\n        return function(event) {\n          var resp, timestamp;\n          timestamp = utils.getTimestamp();\n          mouse.stop();\n          resp = {\n            name: myname,\n            id: _this.id,\n            KeyTime: timestamp,\n            RT: timestamp - _this.startTime,\n            Accuracy: Acc\n          };\n          return deferred.resolve(new ResponseData(resp));\n        };\n      })(this));\n      return deferred.promise;\n    };\n\n    return MousePress;\n\n  })(Response);\n\n  exports.MousePress = MousePress;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/keypress.js":{"id":84,"canonicalName":"lib/components/keypress.js","code":"(function () {\n    var AnyKey, KeyPress, KeyResponse, Q, Response, ResponseData, SpaceKey, i, keyTable, utils, _, _i, _j, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Q = require('17', module);\n    Response = require('72', module).Response;\n    ResponseData = require('72', module).ResponseData;\n    utils = require('69', module);\n    _ = require('16', module);\n    keyTable = {\n        8: 'backspace',\n        9: 'tab',\n        13: 'enter',\n        16: 'shift',\n        17: 'ctrl',\n        18: 'alt',\n        20: 'capslock',\n        27: 'esc',\n        32: 'space',\n        33: 'pageup',\n        34: 'pagedown',\n        35: 'end',\n        36: 'home',\n        37: 'left',\n        38: 'up',\n        39: 'right',\n        40: 'down',\n        45: 'ins',\n        46: 'del',\n        91: 'meta',\n        93: 'meta',\n        224: 'meta',\n        106: '*',\n        107: '+',\n        109: '-',\n        110: '.',\n        111: '/',\n        186: ';',\n        187: '=',\n        188: ',',\n        189: '-',\n        190: '.',\n        191: '/',\n        192: '`',\n        219: '[',\n        220: '\\\\',\n        221: ']'\n    };\n    for (i = _i = 1; _i < 20; i = ++_i) {\n        keyTable[111 + i] = 'f' + i;\n    }\n    for (i = _j = 1; _j <= 9; i = ++_j) {\n        keyTable[i + 96];\n    }\n    KeyResponse = function (_super) {\n        __extends(KeyResponse, _super);\n        function KeyResponse() {\n            return KeyResponse.__super__.constructor.apply(this, arguments);\n        }\n        KeyResponse.prototype.defaults = {\n            keys: [\n                '1',\n                '2'\n            ],\n            correct: ['1'],\n            timeout: null\n        };\n        KeyResponse.prototype.createResponseData = function (timeStamp, startTime, Acc, char) {\n            var resp;\n            resp = {\n                name: this.name,\n                id: this.id,\n                KeyTime: timeStamp,\n                RT: timeStamp - startTime,\n                Accuracy: Acc,\n                KeyChar: char\n            };\n            return resp;\n        };\n        KeyResponse.prototype.resolveOnTimeout = function (deferred, timeout) {\n            return utils.doTimer(timeout, function (_this) {\n                return function (diff) {\n                    var Acc, resp, timeStamp;\n                    if (!deferred.isResolved) {\n                        timeStamp = utils.getTimestamp();\n                        Acc = false;\n                        resp = _this.createResponseData(timeStamp, _this.startTime, Acc, '');\n                        return deferred.resolve(new ResponseData(resp));\n                    }\n                };\n            }(this));\n        };\n        return KeyResponse;\n    }(Response);\n    KeyPress = function (_super) {\n        __extends(KeyPress, _super);\n        function KeyPress() {\n            return KeyPress.__super__.constructor.apply(this, arguments);\n        }\n        KeyPress.prototype.activate = function (context) {\n            var deferred, keyStream;\n            this.startTime = utils.getTimestamp();\n            deferred = Q.defer();\n            keyStream = context.keypressStream();\n            if (this.spec.timeout != null) {\n                this.resolveOnTimeout(deferred, this.spec.timeout);\n            }\n            keyStream.filter(function (_this) {\n                return function (event) {\n                    var char;\n                    char = String.fromCharCode(event.keyCode);\n                    return _.contains(_this.spec.keys, char);\n                };\n            }(this)).take(1).onValue(function (_this) {\n                return function (filtered) {\n                    var Acc, resp, timeStamp;\n                    timeStamp = utils.getTimestamp();\n                    Acc = _.contains(_this.spec.correct, String.fromCharCode(filtered.keyCode));\n                    resp = _this.createResponseData(timeStamp, _this.startTime, Acc, String.fromCharCode(filtered.keyCode));\n                    return deferred.resolve(new ResponseData(resp));\n                };\n            }(this));\n            return deferred.promise;\n        };\n        return KeyPress;\n    }(KeyResponse);\n    exports.KeyPress = KeyPress;\n    SpaceKey = function (_super) {\n        __extends(SpaceKey, _super);\n        function SpaceKey() {\n            return SpaceKey.__super__.constructor.apply(this, arguments);\n        }\n        SpaceKey.prototype.activate = function (context) {\n            var deferred, keyStream;\n            this.startTime = utils.getTimestamp();\n            deferred = Q.defer();\n            keyStream = context.keypressStream();\n            keyStream.filter(function (_this) {\n                return function (event) {\n                    return event.keyCode === 32;\n                };\n            }(this)).take(1).onValue(function (_this) {\n                return function (event) {\n                    var resp, timeStamp;\n                    timeStamp = utils.getTimestamp();\n                    resp = {\n                        name: 'SpaceKey',\n                        id: _this.id,\n                        KeyTime: timeStamp,\n                        RT: timeStamp - _this.startTime,\n                        KeyChar: 'space'\n                    };\n                    return deferred.resolve(new ResponseData(resp));\n                };\n            }(this));\n            return deferred.promise;\n        };\n        return SpaceKey;\n    }(Response);\n    AnyKey = function (_super) {\n        __extends(AnyKey, _super);\n        function AnyKey() {\n            return AnyKey.__super__.constructor.apply(this, arguments);\n        }\n        AnyKey.prototype.activate = function (context) {\n            var deferred, keyStream;\n            this.startTime = utils.getTimestamp();\n            deferred = Q.defer();\n            keyStream = context.keypressStream();\n            keyStream.take(1).onValue(function (_this) {\n                return function (event) {\n                    var resp, timeStamp;\n                    timeStamp = utils.getTimestamp();\n                    resp = {\n                        name: 'AnyKey',\n                        id: _this.id,\n                        KeyTime: timeStamp,\n                        RT: timeStamp - _this.startTime,\n                        KeyChar: String.fromCharCode(event.keyCode)\n                    };\n                    return deferred.resolve(new ResponseData(resp));\n                };\n            }(this));\n            return deferred.promise;\n        };\n        return AnyKey;\n    }(Response);\n    exports.SpaceKey = SpaceKey;\n    exports.AnyKey = AnyKey;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/keypress.js\"],\"names\":[\"AnyKey\",\"KeyPress\",\"KeyResponse\",\"Q\",\"Response\",\"ResponseData\",\"SpaceKey\",\"i\",\"keyTable\",\"utils\",\"_\",\"_i\",\"_j\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"apply\",\"arguments\",\"defaults\",\"keys\",\"correct\",\"timeout\",\"createResponseData\",\"timeStamp\",\"startTime\",\"Acc\",\"char\",\"resp\",\"name\",\"id\",\"KeyTime\",\"RT\",\"Accuracy\",\"KeyChar\",\"resolveOnTimeout\",\"deferred\",\"doTimer\",\"_this\",\"diff\",\"isResolved\",\"getTimestamp\",\"resolve\",\"activate\",\"context\",\"keyStream\",\"defer\",\"keypressStream\",\"spec\",\"filter\",\"event\",\"String\",\"fromCharCode\",\"keyCode\",\"contains\",\"take\",\"onValue\",\"filtered\",\"promise\",\"exports\"],\"mappings\":\"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\"}","lineCount":200,"mtime":1395245873000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/q/q.js","canonicalName":"node_modules/q/q.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/utils.js","canonicalName":"lib/utils.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var AnyKey, KeyPress, KeyResponse, Q, Response, ResponseData, SpaceKey, i, keyTable, utils, _, _i, _j,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Q = require(\"q\");\n\n  Response = require(\"../stimresp\").Response;\n\n  ResponseData = require(\"../stimresp\").ResponseData;\n\n  utils = require(\"../utils\");\n\n  _ = require('lodash');\n\n  keyTable = {\n    8: 'backspace',\n    9: 'tab',\n    13: 'enter',\n    16: 'shift',\n    17: 'ctrl',\n    18: 'alt',\n    20: 'capslock',\n    27: 'esc',\n    32: 'space',\n    33: 'pageup',\n    34: 'pagedown',\n    35: 'end',\n    36: 'home',\n    37: 'left',\n    38: 'up',\n    39: 'right',\n    40: 'down',\n    45: 'ins',\n    46: 'del',\n    91: 'meta',\n    93: 'meta',\n    224: 'meta',\n    106: '*',\n    107: '+',\n    109: '-',\n    110: '.',\n    111: '/',\n    186: ';',\n    187: '=',\n    188: ',',\n    189: '-',\n    190: '.',\n    191: '/',\n    192: '`',\n    219: '[',\n    220: \"\\\\\",\n    221: ']'\n  };\n\n  for (i = _i = 1; _i < 20; i = ++_i) {\n    keyTable[111 + i] = 'f' + i;\n  }\n\n  for (i = _j = 1; _j <= 9; i = ++_j) {\n    keyTable[i + 96];\n  }\n\n  KeyResponse = (function(_super) {\n    __extends(KeyResponse, _super);\n\n    function KeyResponse() {\n      return KeyResponse.__super__.constructor.apply(this, arguments);\n    }\n\n    KeyResponse.prototype.defaults = {\n      keys: ['1', '2'],\n      correct: ['1'],\n      timeout: null\n    };\n\n    KeyResponse.prototype.createResponseData = function(timeStamp, startTime, Acc, char) {\n      var resp;\n      resp = {\n        name: this.name,\n        id: this.id,\n        KeyTime: timeStamp,\n        RT: timeStamp - startTime,\n        Accuracy: Acc,\n        KeyChar: char\n      };\n      return resp;\n    };\n\n    KeyResponse.prototype.resolveOnTimeout = function(deferred, timeout) {\n      return utils.doTimer(timeout, (function(_this) {\n        return function(diff) {\n          var Acc, resp, timeStamp;\n          if (!deferred.isResolved) {\n            timeStamp = utils.getTimestamp();\n            Acc = false;\n            resp = _this.createResponseData(timeStamp, _this.startTime, Acc, '');\n            return deferred.resolve(new ResponseData(resp));\n          }\n        };\n      })(this));\n    };\n\n    return KeyResponse;\n\n  })(Response);\n\n  KeyPress = (function(_super) {\n    __extends(KeyPress, _super);\n\n    function KeyPress() {\n      return KeyPress.__super__.constructor.apply(this, arguments);\n    }\n\n    KeyPress.prototype.activate = function(context) {\n      var deferred, keyStream;\n      this.startTime = utils.getTimestamp();\n      deferred = Q.defer();\n      keyStream = context.keypressStream();\n      if (this.spec.timeout != null) {\n        this.resolveOnTimeout(deferred, this.spec.timeout);\n      }\n      keyStream.filter((function(_this) {\n        return function(event) {\n          var char;\n          char = String.fromCharCode(event.keyCode);\n          return _.contains(_this.spec.keys, char);\n        };\n      })(this)).take(1).onValue((function(_this) {\n        return function(filtered) {\n          var Acc, resp, timeStamp;\n          timeStamp = utils.getTimestamp();\n          Acc = _.contains(_this.spec.correct, String.fromCharCode(filtered.keyCode));\n          resp = _this.createResponseData(timeStamp, _this.startTime, Acc, String.fromCharCode(filtered.keyCode));\n          return deferred.resolve(new ResponseData(resp));\n        };\n      })(this));\n      return deferred.promise;\n    };\n\n    return KeyPress;\n\n  })(KeyResponse);\n\n  exports.KeyPress = KeyPress;\n\n  SpaceKey = (function(_super) {\n    __extends(SpaceKey, _super);\n\n    function SpaceKey() {\n      return SpaceKey.__super__.constructor.apply(this, arguments);\n    }\n\n    SpaceKey.prototype.activate = function(context) {\n      var deferred, keyStream;\n      this.startTime = utils.getTimestamp();\n      deferred = Q.defer();\n      keyStream = context.keypressStream();\n      keyStream.filter((function(_this) {\n        return function(event) {\n          return event.keyCode === 32;\n        };\n      })(this)).take(1).onValue((function(_this) {\n        return function(event) {\n          var resp, timeStamp;\n          timeStamp = utils.getTimestamp();\n          resp = {\n            name: \"SpaceKey\",\n            id: _this.id,\n            KeyTime: timeStamp,\n            RT: timeStamp - _this.startTime,\n            KeyChar: \"space\"\n          };\n          return deferred.resolve(new ResponseData(resp));\n        };\n      })(this));\n      return deferred.promise;\n    };\n\n    return SpaceKey;\n\n  })(Response);\n\n  AnyKey = (function(_super) {\n    __extends(AnyKey, _super);\n\n    function AnyKey() {\n      return AnyKey.__super__.constructor.apply(this, arguments);\n    }\n\n    AnyKey.prototype.activate = function(context) {\n      var deferred, keyStream;\n      this.startTime = utils.getTimestamp();\n      deferred = Q.defer();\n      keyStream = context.keypressStream();\n      keyStream.take(1).onValue((function(_this) {\n        return function(event) {\n          var resp, timeStamp;\n          timeStamp = utils.getTimestamp();\n          resp = {\n            name: \"AnyKey\",\n            id: _this.id,\n            KeyTime: timeStamp,\n            RT: timeStamp - _this.startTime,\n            KeyChar: String.fromCharCode(event.keyCode)\n          };\n          return deferred.resolve(new ResponseData(resp));\n        };\n      })(this));\n      return deferred.promise;\n    };\n\n    return AnyKey;\n\n  })(Response);\n\n  exports.SpaceKey = SpaceKey;\n\n  exports.AnyKey = AnyKey;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/group.js":{"id":83,"canonicalName":"lib/components/group.js","code":"(function () {\n    var ContainerDrawable, Grid, Group, Stimulus, layout, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Stimulus = require('72', module).Stimulus;\n    ContainerDrawable = require('72', module).ContainerDrawable;\n    layout = require('73', module);\n    Group = function (_super) {\n        __extends(Group, _super);\n        function Group(stims, layout) {\n            var stim, _i, _len, _ref;\n            this.stims = stims;\n            Group.__super__.constructor.call(this, {});\n            if (layout) {\n                this.layout = layout;\n                _ref = this.stims;\n                for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n                    stim = _ref[_i];\n                    stim.layout = layout;\n                }\n            }\n        }\n        Group.prototype.render = function (context) {\n            var nodes, stim;\n            nodes = function () {\n                var _i, _len, _ref, _results;\n                _ref = this.stims;\n                _results = [];\n                for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n                    stim = _ref[_i];\n                    _results.push(stim.render(context));\n                }\n                return _results;\n            }.call(this);\n            return new ContainerDrawable(nodes);\n        };\n        return Group;\n    }(Stimulus);\n    exports.Group = Group;\n    Grid = function (_super) {\n        __extends(Grid, _super);\n        function Grid(stims, rows, columns, bounds) {\n            var stim, _i, _len, _ref;\n            this.stims = stims;\n            this.rows = rows;\n            this.columns = columns;\n            this.bounds = bounds;\n            this.layout = new layout.GridLayout(this.rows, this.columns, this.bounds);\n            _ref = this.stims;\n            for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n                stim = _ref[_i];\n                stim.layout = this.layout;\n            }\n        }\n        return Grid;\n    }(Group);\n    exports.Grid = Grid;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/group.js\"],\"names\":[\"ContainerDrawable\",\"Grid\",\"Group\",\"Stimulus\",\"layout\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"stims\",\"stim\",\"_i\",\"_len\",\"_ref\",\"length\",\"render\",\"context\",\"nodes\",\"_results\",\"push\",\"exports\",\"rows\",\"columns\",\"bounds\",\"GridLayout\"],\"mappings\":\"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\"}","lineCount":68,"mtime":1395245872000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/layout.js","canonicalName":"lib/layout.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var ContainerDrawable, Grid, Group, Stimulus, layout,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Stimulus = require(\"../stimresp\").Stimulus;\n\n  ContainerDrawable = require(\"../stimresp\").ContainerDrawable;\n\n  layout = require(\"../layout\");\n\n  Group = (function(_super) {\n    __extends(Group, _super);\n\n    function Group(stims, layout) {\n      var stim, _i, _len, _ref;\n      this.stims = stims;\n      Group.__super__.constructor.call(this, {});\n      if (layout) {\n        this.layout = layout;\n        _ref = this.stims;\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          stim = _ref[_i];\n          stim.layout = layout;\n        }\n      }\n    }\n\n    Group.prototype.render = function(context) {\n      var nodes, stim;\n      nodes = (function() {\n        var _i, _len, _ref, _results;\n        _ref = this.stims;\n        _results = [];\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          stim = _ref[_i];\n          _results.push(stim.render(context));\n        }\n        return _results;\n      }).call(this);\n      return new ContainerDrawable(nodes);\n    };\n\n    return Group;\n\n  })(Stimulus);\n\n  exports.Group = Group;\n\n  Grid = (function(_super) {\n    __extends(Grid, _super);\n\n    function Grid(stims, rows, columns, bounds) {\n      var stim, _i, _len, _ref;\n      this.stims = stims;\n      this.rows = rows;\n      this.columns = columns;\n      this.bounds = bounds;\n      this.layout = new layout.GridLayout(this.rows, this.columns, this.bounds);\n      _ref = this.stims;\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        stim = _ref[_i];\n        stim.layout = this.layout;\n      }\n    }\n\n    return Grid;\n\n  })(Group);\n\n  exports.Grid = Grid;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/first.js":{"id":82,"canonicalName":"lib/components/first.js","code":"(function () {\n    var First, Q, Response, _, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    _ = require('16', module);\n    Q = require('17', module);\n    Response = require('72', module).Response;\n    First = function (_super) {\n        __extends(First, _super);\n        function First(responses) {\n            this.responses = responses;\n            First.__super__.constructor.call(this, {});\n        }\n        First.prototype.activate = function (context) {\n            var deferred, _done;\n            console.log('activating first');\n            _done = false;\n            deferred = Q.defer();\n            _.forEach(this.responses, function (_this) {\n                return function (resp) {\n                    return resp.activate(context).then(function (obj) {\n                        if (!_done) {\n                            console.log('resolving response', obj);\n                            deferred.resolve(obj);\n                            return _done = true;\n                        } else {\n                            return console.log('not resolving, already done');\n                        }\n                    });\n                };\n            }(this));\n            return deferred.promise;\n        };\n        return First;\n    }(Response);\n    exports.First = First;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/first.js\"],\"names\":[\"First\",\"Q\",\"Response\",\"_\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"responses\",\"activate\",\"context\",\"deferred\",\"_done\",\"console\",\"log\",\"defer\",\"forEach\",\"_this\",\"resp\",\"then\",\"obj\",\"resolve\",\"promise\",\"exports\"],\"mappings\":\"AAAA,CAAC,YAAW;AAAA,IACV,IAAIA,KAAJ,EAAWC,CAAX,EAAcC,QAAd,EAAwBC,CAAxB,EACEC,SAAA,GAAY,GAAGC,cADjB,EAEEC,SAAA,GAAY,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAA,YAAE,SAASC,GAAT,IAAgBD,MAAhB,EAAwB;AAAA,gBAAE,IAAIJ,SAAA,CAAUM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ;AAAA,oBAAiCF,KAAA,CAAME,GAAN,IAAaD,MAAA,CAAOC,GAAP,CAAb,CAAnC;AAAA,aAA1B;AAAA,YAAyF,SAASE,IAAT,GAAgB;AAAA,gBAAE,KAAKC,WAAL,GAAmBL,KAAnB,CAAF;AAAA,aAAzG;AAAA,YAAuII,IAAA,CAAKE,SAAL,GAAiBL,MAAA,CAAOK,SAAxB,CAAvI;AAAA,YAA0KN,KAAA,CAAMM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA1K;AAAA,YAAwMJ,KAAA,CAAMO,SAAN,GAAkBN,MAAA,CAAOK,SAAzB,CAAxM;AAAA,YAA4O,OAAON,KAAP,CAA5O;AAAA,SAFtC,CADU;AAAA,IAKVJ,CAAA,GAAIY,OAAA,C,IAAA,E,MAAA,CAAJ,CALU;AAAA,IAOVd,CAAA,GAAIc,OAAA,C,IAAA,E,MAAA,CAAJ,CAPU;AAAA,IASVb,QAAA,GAAWa,OAAA,C,IAAA,E,MAAA,EAAuBb,QAAlC,CATU;AAAA,IAWVF,KAAA,GAAS,UAASgB,MAAT,EAAiB;AAAA,QACxBV,SAAA,CAAUN,KAAV,EAAiBgB,MAAjB,EADwB;AAAA,QAGxB,SAAShB,KAAT,CAAeiB,SAAf,EAA0B;AAAA,YACxB,KAAKA,SAAL,GAAiBA,SAAjB,CADwB;AAAA,YAExBjB,KAAA,CAAMc,SAAN,CAAgBF,WAAhB,CAA4BF,IAA5B,CAAiC,IAAjC,EAAuC,EAAvC,EAFwB;AAAA,SAHF;AAAA,QAQxBV,KAAA,CAAMa,SAAN,CAAgBK,QAAhB,GAA2B,UAASC,OAAT,EAAkB;AAAA,YAC3C,IAAIC,QAAJ,EAAcC,KAAd,CAD2C;AAAA,YAE3CC,OAAA,CAAQC,GAAR,CAAY,kBAAZ,EAF2C;AAAA,YAG3CF,KAAA,GAAQ,KAAR,CAH2C;AAAA,YAI3CD,QAAA,GAAWnB,CAAA,CAAEuB,KAAF,EAAX,CAJ2C;AAAA,YAK3CrB,CAAA,CAAEsB,OAAF,CAAU,KAAKR,SAAf,EAA2B,UAASS,KAAT,EAAgB;AAAA,gBACzC,OAAO,UAASC,IAAT,EAAe;AAAA,oBACpB,OAAOA,IAAA,CAAKT,QAAL,CAAcC,OAAd,EAAuBS,IAAvB,CAA4B,UAASC,GAAT,EAAc;AAAA,wBAC/C,IAAI,CAACR,KAAL,EAAY;AAAA,4BACVC,OAAA,CAAQC,GAAR,CAAY,oBAAZ,EAAkCM,GAAlC,EADU;AAAA,4BAEVT,QAAA,CAASU,OAAT,CAAiBD,GAAjB,EAFU;AAAA,4BAGV,OAAOR,KAAA,GAAQ,IAAf,CAHU;AAAA,yBAAZ,MAIO;AAAA,4BACL,OAAOC,OAAA,CAAQC,GAAR,CAAY,6BAAZ,CAAP,CADK;AAAA,yBALwC;AAAA,qBAA1C,CAAP,CADoB;AAAA,iBAAtB,CADyC;AAAA,aAAjB,CAYvB,IAZuB,CAA1B,EAL2C;AAAA,YAkB3C,OAAOH,QAAA,CAASW,OAAhB,CAlB2C;AAAA,SAA7C,CARwB;AAAA,QA6BxB,OAAO/B,KAAP,CA7BwB;AAAA,KAAlB,CA+BLE,QA/BK,CAAR,CAXU;AAAA,IA4CV8B,OAAA,CAAQhC,KAAR,GAAgBA,KAAhB,CA5CU;AAAA,CAAZ,CA8CGU,IA9CH,CA8CQ,IA9CR\"}","lineCount":47,"mtime":1395245872000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/q/q.js","canonicalName":"node_modules/q/q.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var First, Q, Response, _,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  _ = require('lodash');\n\n  Q = require(\"q\");\n\n  Response = require(\"../stimresp\").Response;\n\n  First = (function(_super) {\n    __extends(First, _super);\n\n    function First(responses) {\n      this.responses = responses;\n      First.__super__.constructor.call(this, {});\n    }\n\n    First.prototype.activate = function(context) {\n      var deferred, _done;\n      console.log(\"activating first\");\n      _done = false;\n      deferred = Q.defer();\n      _.forEach(this.responses, (function(_this) {\n        return function(resp) {\n          return resp.activate(context).then(function(obj) {\n            if (!_done) {\n              console.log(\"resolving response\", obj);\n              deferred.resolve(obj);\n              return _done = true;\n            } else {\n              return console.log(\"not resolving, already done\");\n            }\n          });\n        };\n      })(this));\n      return deferred.promise;\n    };\n\n    return First;\n\n  })(Response);\n\n  exports.First = First;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/confirm.js":{"id":81,"canonicalName":"lib/components/confirm.js","code":"(function () {\n    var Confirm, Q, Response, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Q = require('17', module);\n    Response = require('72', module).Response;\n    Confirm = function (_super) {\n        __extends(Confirm, _super);\n        function Confirm() {\n            return Confirm.__super__.constructor.apply(this, arguments);\n        }\n        Confirm.prototype.defaults = {\n            message: '',\n            delay: 0,\n            defaultValue: '',\n            theme: 'vex-theme-wireframe'\n        };\n        Confirm.prototype.activate = function (context) {\n            var deferred, promise;\n            console.log('activating confirm dialog');\n            deferred = Q.defer();\n            promise = Q.delay(this.spec.delay);\n            promise.then(function (_this) {\n                return function (f) {\n                    console.log('rendering confirm dialog');\n                    return vex.dialog.confirm({\n                        message: _this.spec.message,\n                        className: _this.spec.theme,\n                        callback: function (value) {\n                            return deferred.resolve(value);\n                        }\n                    });\n                };\n            }(this));\n            return deferred.promise;\n        };\n        return Confirm;\n    }(Response);\n    exports.Confirm = Confirm;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/confirm.js\"],\"names\":[\"Confirm\",\"Q\",\"Response\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"apply\",\"arguments\",\"defaults\",\"message\",\"delay\",\"defaultValue\",\"theme\",\"activate\",\"context\",\"deferred\",\"promise\",\"console\",\"log\",\"defer\",\"spec\",\"then\",\"_this\",\"f\",\"vex\",\"dialog\",\"confirm\",\"className\",\"callback\",\"value\",\"resolve\",\"exports\"],\"mappings\":\"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\"}","lineCount":50,"mtime":1395245872000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/q/q.js","canonicalName":"node_modules/q/q.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var Confirm, Q, Response,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Q = require(\"q\");\n\n  Response = require(\"../stimresp\").Response;\n\n  Confirm = (function(_super) {\n    __extends(Confirm, _super);\n\n    function Confirm() {\n      return Confirm.__super__.constructor.apply(this, arguments);\n    }\n\n    Confirm.prototype.defaults = {\n      message: \"\",\n      delay: 0,\n      defaultValue: \"\",\n      theme: 'vex-theme-wireframe'\n    };\n\n    Confirm.prototype.activate = function(context) {\n      var deferred, promise;\n      console.log(\"activating confirm dialog\");\n      deferred = Q.defer();\n      promise = Q.delay(this.spec.delay);\n      promise.then((function(_this) {\n        return function(f) {\n          console.log(\"rendering confirm dialog\");\n          return vex.dialog.confirm({\n            message: _this.spec.message,\n            className: _this.spec.theme,\n            callback: function(value) {\n              return deferred.resolve(value);\n            }\n          });\n        };\n      })(this));\n      return deferred.promise;\n    };\n\n    return Confirm;\n\n  })(Response);\n\n  exports.Confirm = Confirm;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/sound.js":{"id":80,"canonicalName":"lib/components/sound.js","code":"(function () {\n    var Sound, Stimulus, buzz, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Stimulus = require('72', module).Stimulus;\n    buzz = require('35', module);\n    Sound = function (_super) {\n        __extends(Sound, _super);\n        Sound.prototype.defaults = { url: 'http://www.centraloutdoors.com/mp3/sheep/sheep.wav' };\n        function Sound(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            Sound.__super__.constructor.call(this, spec);\n            this.sound = new buzz.sound(this.spec.url);\n        }\n        Sound.prototype.render = function (context, layer) {\n            return this.sound.play();\n        };\n        return Sound;\n    }(Stimulus);\n    exports.Sound = Sound;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/sound.js\"],\"names\":[\"Sound\",\"Stimulus\",\"buzz\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"defaults\",\"url\",\"spec\",\"sound\",\"render\",\"context\",\"layer\",\"play\",\"exports\"],\"mappings\":\"AAAA,CAAC,YAAW;AAAA,IACV,IAAIA,KAAJ,EAAWC,QAAX,EAAqBC,IAArB,EACEC,SAAA,GAAY,GAAGC,cADjB,EAEEC,SAAA,GAAY,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAA,YAAE,SAASC,GAAT,IAAgBD,MAAhB,EAAwB;AAAA,gBAAE,IAAIJ,SAAA,CAAUM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ;AAAA,oBAAiCF,KAAA,CAAME,GAAN,IAAaD,MAAA,CAAOC,GAAP,CAAb,CAAnC;AAAA,aAA1B;AAAA,YAAyF,SAASE,IAAT,GAAgB;AAAA,gBAAE,KAAKC,WAAL,GAAmBL,KAAnB,CAAF;AAAA,aAAzG;AAAA,YAAuII,IAAA,CAAKE,SAAL,GAAiBL,MAAA,CAAOK,SAAxB,CAAvI;AAAA,YAA0KN,KAAA,CAAMM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA1K;AAAA,YAAwMJ,KAAA,CAAMO,SAAN,GAAkBN,MAAA,CAAOK,SAAzB,CAAxM;AAAA,YAA4O,OAAON,KAAP,CAA5O;AAAA,SAFtC,CADU;AAAA,IAKVL,QAAA,GAAWa,OAAA,C,IAAA,E,MAAA,EAAuBb,QAAlC,CALU;AAAA,IAOVC,IAAA,GAAOY,OAAA,C,IAAA,E,MAAA,CAAP,CAPU;AAAA,IASVd,KAAA,GAAS,UAASe,MAAT,EAAiB;AAAA,QACxBV,SAAA,CAAUL,KAAV,EAAiBe,MAAjB,EADwB;AAAA,QAGxBf,KAAA,CAAMY,SAAN,CAAgBI,QAAhB,GAA2B,EACzBC,GAAA,EAAK,oDADoB,EAA3B,CAHwB;AAAA,QAOxB,SAASjB,KAAT,CAAekB,IAAf,EAAqB;AAAA,YACnB,IAAIA,IAAA,IAAQ,IAAZ,EAAkB;AAAA,gBAChBA,IAAA,GAAO,EAAP,CADgB;AAAA,aADC;AAAA,YAInBlB,KAAA,CAAMa,SAAN,CAAgBF,WAAhB,CAA4BF,IAA5B,CAAiC,IAAjC,EAAuCS,IAAvC,EAJmB;AAAA,YAKnB,KAAKC,KAAL,GAAa,IAAIjB,IAAA,CAAKiB,KAAT,CAAe,KAAKD,IAAL,CAAUD,GAAzB,CAAb,CALmB;AAAA,SAPG;AAAA,QAexBjB,KAAA,CAAMY,SAAN,CAAgBQ,MAAhB,GAAyB,UAASC,OAAT,EAAkBC,KAAlB,EAAyB;AAAA,YAChD,OAAO,KAAKH,KAAL,CAAWI,IAAX,EAAP,CADgD;AAAA,SAAlD,CAfwB;AAAA,QAmBxB,OAAOvB,KAAP,CAnBwB;AAAA,KAAlB,CAqBLC,QArBK,CAAR,CATU;AAAA,IAgCVuB,OAAA,CAAQxB,KAAR,GAAgBA,KAAhB,CAhCU;AAAA,CAAZ,CAkCGS,IAlCH,CAkCQ,IAlCR\"}","lineCount":33,"mtime":1395245873000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/buzz.js","canonicalName":"jslibs/buzz.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var Sound, Stimulus, buzz,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Stimulus = require(\"../stimresp\").Stimulus;\n\n  buzz = require(\"../../jslibs/buzz\");\n\n  Sound = (function(_super) {\n    __extends(Sound, _super);\n\n    Sound.prototype.defaults = {\n      url: \"http://www.centraloutdoors.com/mp3/sheep/sheep.wav\"\n    };\n\n    function Sound(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      Sound.__super__.constructor.call(this, spec);\n      this.sound = new buzz.sound(this.spec.url);\n    }\n\n    Sound.prototype.render = function(context, layer) {\n      return this.sound.play();\n    };\n\n    return Sound;\n\n  })(Stimulus);\n\n  exports.Sound = Sound;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/html/html.js":{"id":76,"canonicalName":"lib/components/html/html.js","code":"(function () {\n    var Drawable, GStimulus, HMixResp, HMixStim, Html, HtmlMixin, HtmlResponse, HtmlStimulus, Mixen, Response, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    GStimulus = require('72', module).GraphicalStimulus;\n    Drawable = require('72', module).Drawable;\n    Response = require('72', module).Response;\n    Mixen = require('36', module);\n    HtmlMixin = function () {\n        HtmlMixin.prototype.tag = 'div';\n        HtmlMixin.prototype.div = function () {\n            return $(document.createElement('div'));\n        };\n        function HtmlMixin() {\n            this.el = document.createElement(this.tag);\n            this.el = $(this.el);\n        }\n        HtmlMixin.prototype.positionElement = function (el, x, y) {\n            return el.css({\n                position: 'absolute',\n                left: x,\n                top: y\n            });\n        };\n        HtmlMixin.prototype.centerElement = function (el) {\n            return el.css({\n                margin: '0 auto',\n                position: 'absolute',\n                left: '50%',\n                top: '50%'\n            });\n        };\n        return HtmlMixin;\n    }();\n    HMixStim = Mixen(HtmlMixin, GStimulus);\n    HMixResp = Mixen(HtmlMixin, Response);\n    HtmlStimulus = function (_super) {\n        __extends(HtmlStimulus, _super);\n        function HtmlStimulus(spec) {\n            HtmlStimulus.__super__.constructor.call(this, spec);\n        }\n        HtmlStimulus.prototype.presentable = function (element) {\n            return new (function (_super1) {\n                __extends(_Class, _super1);\n                function _Class(element) {\n                    this.element = element;\n                }\n                _Class.prototype.x = function () {\n                    return this.element.position().left;\n                };\n                _Class.prototype.y = function () {\n                    return this.element.position().top;\n                };\n                _Class.prototype.width = function () {\n                    return this.element.width();\n                };\n                _Class.prototype.height = function () {\n                    return this.element.height();\n                };\n                _Class.prototype.present = function (context) {\n                    return this.element.show();\n                };\n                return _Class;\n            }(Drawable))(element);\n        };\n        HtmlStimulus.prototype.render = function (context) {\n            var coords;\n            console.log('rendering html stimulus', this.name);\n            this.el.hide();\n            context.appendHtml(this.el);\n            console.log('@spec.position', this.spec.position);\n            console.log('@spec.x', this.spec.x);\n            console.log('@spec.y', this.spec.y);\n            console.log('@el width', this.el.width());\n            console.log('@el height', this.el.height());\n            coords = this.computeCoordinates(context, this.spec.position, this.el.width(), this.el.height());\n            console.log('coords', coords);\n            this.positionElement(this.el, coords[0], coords[1]);\n            return this.presentable(this.el);\n        };\n        return HtmlStimulus;\n    }(HMixStim);\n    HtmlResponse = function (_super) {\n        __extends(HtmlResponse, _super);\n        function HtmlResponse() {\n            HtmlResponse.__super__.constructor.apply(this, arguments);\n        }\n        return HtmlResponse;\n    }(HMixResp);\n    exports.HtmlStimulus = HtmlStimulus;\n    exports.HtmlResponse = HtmlResponse;\n    Html = {};\n    Html.HtmlButton = require('91', module).HtmlButton;\n    Html.HtmlLink = require('92', module).HtmlLink;\n    Html.HtmlLabel = require('93', module).HtmlLabel;\n    Html.HtmlIcon = require('94', module).HtmlIcon;\n    Html.Instructions = require('95', module).Instructions;\n    Html.Markdown = require('96', module).Markdown;\n    Html.Message = require('97', module).Message;\n    Html.Page = require('98', module).Page;\n    Html.HtmlResponse = HtmlResponse;\n    Html.HtmlStimulus = HtmlStimulus;\n    exports.Html = Html;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/html/html.js\"],\"names\":[\"Drawable\",\"GStimulus\",\"HMixResp\",\"HMixStim\",\"Html\",\"HtmlMixin\",\"HtmlResponse\",\"HtmlStimulus\",\"Mixen\",\"Response\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"GraphicalStimulus\",\"tag\",\"div\",\"$\",\"document\",\"createElement\",\"el\",\"positionElement\",\"x\",\"y\",\"css\",\"position\",\"left\",\"top\",\"centerElement\",\"margin\",\"_super\",\"spec\",\"presentable\",\"element\",\"_super1\",\"_Class\",\"width\",\"height\",\"present\",\"context\",\"show\",\"render\",\"coords\",\"console\",\"log\",\"name\",\"hide\",\"appendHtml\",\"computeCoordinates\",\"apply\",\"arguments\",\"exports\",\"HtmlButton\",\"HtmlLink\",\"HtmlLabel\",\"HtmlIcon\",\"Instructions\",\"Markdown\",\"Message\",\"Page\"],\"mappings\":\"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\"}","lineCount":114,"mtime":1395245873000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/mixen/mixen.js","canonicalName":"node_modules/mixen/mixen.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/html/htmlbutton.js","canonicalName":"lib/components/html/htmlbutton.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/html/htmllink.js","canonicalName":"lib/components/html/htmllink.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/html/htmllabel.js","canonicalName":"lib/components/html/htmllabel.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/html/htmlicon.js","canonicalName":"lib/components/html/htmlicon.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/html/instructions.js","canonicalName":"lib/components/html/instructions.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/html/markdown.js","canonicalName":"lib/components/html/markdown.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/html/message.js","canonicalName":"lib/components/html/message.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/html/page.js","canonicalName":"lib/components/html/page.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var Drawable, GStimulus, HMixResp, HMixStim, Html, HtmlMixin, HtmlResponse, HtmlStimulus, Mixen, Response,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  GStimulus = require(\"../../stimresp\").GraphicalStimulus;\n\n  Drawable = require(\"../../stimresp\").Drawable;\n\n  Response = require(\"../../stimresp\").Response;\n\n  Mixen = require(\"mixen\");\n\n  HtmlMixin = (function() {\n    HtmlMixin.prototype.tag = \"div\";\n\n    HtmlMixin.prototype.div = function() {\n      return $(document.createElement(\"div\"));\n    };\n\n    function HtmlMixin() {\n      this.el = document.createElement(this.tag);\n      this.el = $(this.el);\n    }\n\n    HtmlMixin.prototype.positionElement = function(el, x, y) {\n      return el.css({\n        position: \"absolute\",\n        left: x,\n        top: y\n      });\n    };\n\n    HtmlMixin.prototype.centerElement = function(el) {\n      return el.css({\n        margin: \"0 auto\",\n        position: \"absolute\",\n        left: \"50%\",\n        top: \"50%\"\n      });\n    };\n\n    return HtmlMixin;\n\n  })();\n\n  HMixStim = Mixen(HtmlMixin, GStimulus);\n\n  HMixResp = Mixen(HtmlMixin, Response);\n\n  HtmlStimulus = (function(_super) {\n    __extends(HtmlStimulus, _super);\n\n    function HtmlStimulus(spec) {\n      HtmlStimulus.__super__.constructor.call(this, spec);\n    }\n\n    HtmlStimulus.prototype.presentable = function(element) {\n      return new ((function(_super1) {\n        __extends(_Class, _super1);\n\n        function _Class(element) {\n          this.element = element;\n        }\n\n        _Class.prototype.x = function() {\n          return this.element.position().left;\n        };\n\n        _Class.prototype.y = function() {\n          return this.element.position().top;\n        };\n\n        _Class.prototype.width = function() {\n          return this.element.width();\n        };\n\n        _Class.prototype.height = function() {\n          return this.element.height();\n        };\n\n        _Class.prototype.present = function(context) {\n          return this.element.show();\n        };\n\n        return _Class;\n\n      })(Drawable))(element);\n    };\n\n    HtmlStimulus.prototype.render = function(context) {\n      var coords;\n      console.log(\"rendering html stimulus\", this.name);\n      this.el.hide();\n      context.appendHtml(this.el);\n      console.log(\"@spec.position\", this.spec.position);\n      console.log(\"@spec.x\", this.spec.x);\n      console.log(\"@spec.y\", this.spec.y);\n      console.log(\"@el width\", this.el.width());\n      console.log(\"@el height\", this.el.height());\n      coords = this.computeCoordinates(context, this.spec.position, this.el.width(), this.el.height());\n      console.log(\"coords\", coords);\n      this.positionElement(this.el, coords[0], coords[1]);\n      return this.presentable(this.el);\n    };\n\n    return HtmlStimulus;\n\n  })(HMixStim);\n\n  HtmlResponse = (function(_super) {\n    __extends(HtmlResponse, _super);\n\n    function HtmlResponse() {\n      HtmlResponse.__super__.constructor.apply(this, arguments);\n    }\n\n    return HtmlResponse;\n\n  })(HMixResp);\n\n  exports.HtmlStimulus = HtmlStimulus;\n\n  exports.HtmlResponse = HtmlResponse;\n\n  Html = {};\n\n  Html.HtmlButton = require(\"./htmlbutton\").HtmlButton;\n\n  Html.HtmlLink = require(\"./htmllink\").HtmlLink;\n\n  Html.HtmlLabel = require(\"./htmllabel\").HtmlLabel;\n\n  Html.HtmlIcon = require(\"./htmlicon\").HtmlIcon;\n\n  Html.Instructions = require(\"./instructions\").Instructions;\n\n  Html.Markdown = require(\"./markdown\").Markdown;\n\n  Html.Message = require(\"./message\").Message;\n\n  Html.Page = require(\"./page\").Page;\n\n  Html.HtmlResponse = HtmlResponse;\n\n  Html.HtmlStimulus = HtmlStimulus;\n\n  exports.Html = Html;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/html/page.js":{"id":98,"canonicalName":"lib/components/html/page.js","code":"(function () {\n    var HtmlStimulus, Page, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    HtmlStimulus = require('76', module).HtmlStimulus;\n    Page = function (_super) {\n        __extends(Page, _super);\n        Page.prototype.defaults = { html: '<p>HTML Page</p>' };\n        function Page(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            Page.__super__.constructor.call(this, spec);\n            this.el.append(this.spec.html);\n        }\n        return Page;\n    }(HtmlStimulus);\n    exports.Page = Page;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/html/page.js\"],\"names\":[\"HtmlStimulus\",\"Page\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"defaults\",\"html\",\"spec\",\"el\",\"append\",\"exports\"],\"mappings\":\"AAAA,CAAC,YAAW;AAAA,IACV,IAAIA,YAAJ,EAAkBC,IAAlB,EACEC,SAAA,GAAY,GAAGC,cADjB,EAEEC,SAAA,GAAY,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAA,YAAE,SAASC,GAAT,IAAgBD,MAAhB,EAAwB;AAAA,gBAAE,IAAIJ,SAAA,CAAUM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ;AAAA,oBAAiCF,KAAA,CAAME,GAAN,IAAaD,MAAA,CAAOC,GAAP,CAAb,CAAnC;AAAA,aAA1B;AAAA,YAAyF,SAASE,IAAT,GAAgB;AAAA,gBAAE,KAAKC,WAAL,GAAmBL,KAAnB,CAAF;AAAA,aAAzG;AAAA,YAAuII,IAAA,CAAKE,SAAL,GAAiBL,MAAA,CAAOK,SAAxB,CAAvI;AAAA,YAA0KN,KAAA,CAAMM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA1K;AAAA,YAAwMJ,KAAA,CAAMO,SAAN,GAAkBN,MAAA,CAAOK,SAAzB,CAAxM;AAAA,YAA4O,OAAON,KAAP,CAA5O;AAAA,SAFtC,CADU;AAAA,IAKVL,YAAA,GAAea,OAAA,C,IAAA,E,MAAA,EAAkBb,YAAjC,CALU;AAAA,IAOVC,IAAA,GAAQ,UAASa,MAAT,EAAiB;AAAA,QACvBV,SAAA,CAAUH,IAAV,EAAgBa,MAAhB,EADuB;AAAA,QAGvBb,IAAA,CAAKU,SAAL,CAAeI,QAAf,GAA0B,EACxBC,IAAA,EAAM,kBADkB,EAA1B,CAHuB;AAAA,QAOvB,SAASf,IAAT,CAAcgB,IAAd,EAAoB;AAAA,YAClB,IAAIA,IAAA,IAAQ,IAAZ,EAAkB;AAAA,gBAChBA,IAAA,GAAO,EAAP,CADgB;AAAA,aADA;AAAA,YAIlBhB,IAAA,CAAKW,SAAL,CAAeF,WAAf,CAA2BF,IAA3B,CAAgC,IAAhC,EAAsCS,IAAtC,EAJkB;AAAA,YAKlB,KAAKC,EAAL,CAAQC,MAAR,CAAe,KAAKF,IAAL,CAAUD,IAAzB,EALkB;AAAA,SAPG;AAAA,QAevB,OAAOf,IAAP,CAfuB;AAAA,KAAlB,CAiBJD,YAjBI,CAAP,CAPU;AAAA,IA0BVoB,OAAA,CAAQnB,IAAR,GAAeA,IAAf,CA1BU;AAAA,CAAZ,CA4BGO,IA5BH,CA4BQ,IA5BR\"}","lineCount":29,"mtime":1395245873000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/html/html.js","canonicalName":"lib/components/html/html.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var HtmlStimulus, Page,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  HtmlStimulus = require(\"./html\").HtmlStimulus;\n\n  Page = (function(_super) {\n    __extends(Page, _super);\n\n    Page.prototype.defaults = {\n      html: \"<p>HTML Page</p>\"\n    };\n\n    function Page(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      Page.__super__.constructor.call(this, spec);\n      this.el.append(this.spec.html);\n    }\n\n    return Page;\n\n  })(HtmlStimulus);\n\n  exports.Page = Page;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/html/message.js":{"id":97,"canonicalName":"lib/components/html/message.js","code":"(function () {\n    var Message, html, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    html = require('76', module);\n    Message = function (_super) {\n        __extends(Message, _super);\n        Message.prototype.defaults = {\n            title: 'Message!',\n            content: 'your content here',\n            color: '',\n            size: 'large'\n        };\n        function Message(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            Message.__super__.constructor.call(this, spec);\n            this.el.addClass(this.messageClass());\n            this.title = $('<div>' + this.spec.title + '</div>').addClass('header');\n            this.content = $('<p>' + this.spec.content + '</p>');\n            this.el.append(this.title);\n            this.el.append(this.content);\n        }\n        Message.prototype.messageClass = function () {\n            return 'ui message ' + this.spec.color + ' ' + this.spec.size;\n        };\n        return Message;\n    }(html.HtmlStimulus);\n    exports.Message = Message;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/html/message.js\"],\"names\":[\"Message\",\"html\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"defaults\",\"title\",\"content\",\"color\",\"size\",\"spec\",\"el\",\"addClass\",\"messageClass\",\"$\",\"append\",\"HtmlStimulus\",\"exports\"],\"mappings\":\"AAAA,CAAC,YAAW;AAAA,IACV,IAAIA,OAAJ,EAAaC,IAAb,EACEC,SAAA,GAAY,GAAGC,cADjB,EAEEC,SAAA,GAAY,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAA,YAAE,SAASC,GAAT,IAAgBD,MAAhB,EAAwB;AAAA,gBAAE,IAAIJ,SAAA,CAAUM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ;AAAA,oBAAiCF,KAAA,CAAME,GAAN,IAAaD,MAAA,CAAOC,GAAP,CAAb,CAAnC;AAAA,aAA1B;AAAA,YAAyF,SAASE,IAAT,GAAgB;AAAA,gBAAE,KAAKC,WAAL,GAAmBL,KAAnB,CAAF;AAAA,aAAzG;AAAA,YAAuII,IAAA,CAAKE,SAAL,GAAiBL,MAAA,CAAOK,SAAxB,CAAvI;AAAA,YAA0KN,KAAA,CAAMM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA1K;AAAA,YAAwMJ,KAAA,CAAMO,SAAN,GAAkBN,MAAA,CAAOK,SAAzB,CAAxM;AAAA,YAA4O,OAAON,KAAP,CAA5O;AAAA,SAFtC,CADU;AAAA,IAKVJ,IAAA,GAAOY,OAAA,C,IAAA,E,MAAA,CAAP,CALU;AAAA,IAOVb,OAAA,GAAW,UAASc,MAAT,EAAiB;AAAA,QAC1BV,SAAA,CAAUJ,OAAV,EAAmBc,MAAnB,EAD0B;AAAA,QAG1Bd,OAAA,CAAQW,SAAR,CAAkBI,QAAlB,GAA6B;AAAA,YAC3BC,KAAA,EAAO,UADoB;AAAA,YAE3BC,OAAA,EAAS,mBAFkB;AAAA,YAG3BC,KAAA,EAAO,EAHoB;AAAA,YAI3BC,IAAA,EAAM,OAJqB;AAAA,SAA7B,CAH0B;AAAA,QAU1B,SAASnB,OAAT,CAAiBoB,IAAjB,EAAuB;AAAA,YACrB,IAAIA,IAAA,IAAQ,IAAZ,EAAkB;AAAA,gBAChBA,IAAA,GAAO,EAAP,CADgB;AAAA,aADG;AAAA,YAIrBpB,OAAA,CAAQY,SAAR,CAAkBF,WAAlB,CAA8BF,IAA9B,CAAmC,IAAnC,EAAyCY,IAAzC,EAJqB;AAAA,YAKrB,KAAKC,EAAL,CAAQC,QAAR,CAAiB,KAAKC,YAAL,EAAjB,EALqB;AAAA,YAMrB,KAAKP,KAAL,GAAaQ,CAAA,CAAE,UAAU,KAAKJ,IAAL,CAAUJ,KAApB,GAA4B,QAA9B,EAAwCM,QAAxC,CAAiD,QAAjD,CAAb,CANqB;AAAA,YAOrB,KAAKL,OAAL,GAAeO,CAAA,CAAE,QAAQ,KAAKJ,IAAL,CAAUH,OAAlB,GAA4B,MAA9B,CAAf,CAPqB;AAAA,YAQrB,KAAKI,EAAL,CAAQI,MAAR,CAAe,KAAKT,KAApB,EARqB;AAAA,YASrB,KAAKK,EAAL,CAAQI,MAAR,CAAe,KAAKR,OAApB,EATqB;AAAA,SAVG;AAAA,QAsB1BjB,OAAA,CAAQW,SAAR,CAAkBY,YAAlB,GAAiC,YAAW;AAAA,YAC1C,OAAO,gBAAgB,KAAKH,IAAL,CAAUF,KAA1B,GAAkC,GAAlC,GAAwC,KAAKE,IAAL,CAAUD,IAAzD,CAD0C;AAAA,SAA5C,CAtB0B;AAAA,QA0B1B,OAAOnB,OAAP,CA1B0B;AAAA,KAAlB,CA4BPC,IAAA,CAAKyB,YA5BE,CAAV,CAPU;AAAA,IAqCVC,OAAA,CAAQ3B,OAAR,GAAkBA,OAAlB,CArCU;AAAA,CAAZ,CAuCGQ,IAvCH,CAuCQ,IAvCR\"}","lineCount":41,"mtime":1395245873000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/html/html.js","canonicalName":"lib/components/html/html.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var Message, html,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  html = require(\"./html\");\n\n  Message = (function(_super) {\n    __extends(Message, _super);\n\n    Message.prototype.defaults = {\n      title: \"Message!\",\n      content: \"your content here\",\n      color: \"\",\n      size: \"large\"\n    };\n\n    function Message(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      Message.__super__.constructor.call(this, spec);\n      this.el.addClass(this.messageClass());\n      this.title = $(\"<div>\" + this.spec.title + \"</div>\").addClass(\"header\");\n      this.content = $(\"<p>\" + this.spec.content + \"</p>\");\n      this.el.append(this.title);\n      this.el.append(this.content);\n    }\n\n    Message.prototype.messageClass = function() {\n      return \"ui message \" + this.spec.color + \" \" + this.spec.size;\n    };\n\n    return Message;\n\n  })(html.HtmlStimulus);\n\n  exports.Message = Message;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/html/markdown.js":{"id":96,"canonicalName":"lib/components/html/markdown.js","code":"(function () {\n    var Markdown, html, marked, _, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    html = require('76', module);\n    marked = require('45', module);\n    _ = require('16', module);\n    Markdown = function (_super) {\n        __extends(Markdown, _super);\n        function Markdown(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            Markdown.__super__.constructor.call(this, spec);\n            if (_.isString(spec)) {\n                this.spec = {};\n                this.spec.x = 0;\n                this.spec.y = 0;\n                this.spec.content = spec;\n            }\n            if (this.spec.url != null) {\n                $.ajax({\n                    url: this.spec.url,\n                    success: function (_this) {\n                        return function (result) {\n                            _this.spec.content = result;\n                            return _this.el.append(marked(_this.spec.content));\n                        };\n                    }(this),\n                    error: function (_this) {\n                        return function (result) {\n                            return console.log('ajax failure', result);\n                        };\n                    }(this)\n                });\n            } else {\n                this.el.append($(marked(this.spec.content)));\n            }\n            this.el.addClass('markdown');\n        }\n        return Markdown;\n    }(html.HtmlStimulus);\n    exports.Markdown = Markdown;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/html/markdown.js\"],\"names\":[\"Markdown\",\"html\",\"marked\",\"_\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"spec\",\"isString\",\"x\",\"y\",\"content\",\"url\",\"$\",\"ajax\",\"success\",\"_this\",\"result\",\"el\",\"append\",\"error\",\"console\",\"log\",\"addClass\",\"HtmlStimulus\",\"exports\"],\"mappings\":\"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\"}","lineCount":54,"mtime":1395245873000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/html/html.js","canonicalName":"lib/components/html/html.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/marked/lib/marked.js","canonicalName":"node_modules/marked/lib/marked.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var Markdown, html, marked, _,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  html = require(\"./html\");\n\n  marked = require(\"marked\");\n\n  _ = require('lodash');\n\n  Markdown = (function(_super) {\n    __extends(Markdown, _super);\n\n    function Markdown(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      Markdown.__super__.constructor.call(this, spec);\n      if (_.isString(spec)) {\n        this.spec = {};\n        this.spec.x = 0;\n        this.spec.y = 0;\n        this.spec.content = spec;\n      }\n      if (this.spec.url != null) {\n        $.ajax({\n          url: this.spec.url,\n          success: (function(_this) {\n            return function(result) {\n              _this.spec.content = result;\n              return _this.el.append(marked(_this.spec.content));\n            };\n          })(this),\n          error: (function(_this) {\n            return function(result) {\n              return console.log(\"ajax failure\", result);\n            };\n          })(this)\n        });\n      } else {\n        this.el.append($(marked(this.spec.content)));\n      }\n      this.el.addClass(\"markdown\");\n    }\n\n    return Markdown;\n\n  })(html.HtmlStimulus);\n\n  exports.Markdown = Markdown;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/html/instructions.js":{"id":95,"canonicalName":"lib/components/html/instructions.js","code":"(function () {\n    var Instructions, Markdown, Q, html, _, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    html = require('76', module);\n    Q = require('17', module);\n    Markdown = require('96', module).Markdown;\n    _ = require('16', module);\n    Instructions = function (_super) {\n        __extends(Instructions, _super);\n        function Instructions(spec) {\n            var content, div, i, itm, key, md, type, value;\n            if (spec == null) {\n                spec = {};\n            }\n            Instructions.__super__.constructor.call(this, spec);\n            this.pages = function () {\n                var _ref, _results;\n                _ref = this.spec.pages;\n                _results = [];\n                for (key in _ref) {\n                    value = _ref[key];\n                    type = _.keys(value)[0];\n                    content = _.values(value)[0];\n                    md = new Markdown(content);\n                    div = this.div();\n                    div.addClass('ui stacked segment').append(md.el);\n                    _results.push(div);\n                }\n                return _results;\n            }.call(this);\n            this.menu = this.div();\n            this.menu.addClass('ui borderless pagination menu');\n            this.back = $('<a class=\"item\">\\n  <i class=\"icon left arrow\"></i>  Previous\\n </a>').attr('id', 'instructions_back');\n            this.next = $('<a class=\"item\">\\nNext <i class=\"icon right arrow\"></i>\\n</a>').attr('id', 'instructions_next');\n            this.menu.append(this.back).append('\\n');\n            this.items = function () {\n                var _i, _ref, _results;\n                _results = [];\n                for (i = _i = 1, _ref = this.pages.length; 1 <= _ref ? _i <= _ref : _i >= _ref; i = 1 <= _ref ? ++_i : --_i) {\n                    itm = $('<a class=\"item\">' + i + ' of ' + this.pages.length + '</a>');\n                    this.menu.append(itm).append('\\n');\n                    _results.push(itm);\n                }\n                return _results;\n            }.call(this);\n            this.items[0].addClass('active');\n            this.menu.append(this.next).css('position', 'absolute').css('right', '15px');\n            this.currentPage = 0;\n            this.el.append(this.pages[this.currentPage]);\n            this.el.append(this.menu);\n        }\n        Instructions.prototype.activate = function (context) {\n            this.deferred = Q.defer();\n            return this.deferred.promise;\n        };\n        Instructions.prototype.updateEl = function (currentPage) {\n            this.el.empty();\n            this.el.append(this.pages[this.currentPage]);\n            return this.el.append(this.menu);\n        };\n        Instructions.prototype.render = function (context, layer) {\n            this.next.click(function (_this) {\n                return function (e) {\n                    if (_this.currentPage < _this.pages.length - 1) {\n                        _this.items[_this.currentPage].removeClass('active');\n                        _this.currentPage += 1;\n                        _this.items[_this.currentPage].addClass('active');\n                        _this.updateEl(_this.currentPage);\n                        return _this.render(context);\n                    } else {\n                        return _this.deferred.resolve(0);\n                    }\n                };\n            }(this));\n            this.back.click(function (_this) {\n                return function (e) {\n                    if (_this.currentPage > 0) {\n                        _this.items[_this.currentPage].removeClass('active');\n                        _this.currentPage -= 1;\n                        _this.items[_this.currentPage].addClass('active');\n                        _this.updateEl(_this.currentPage);\n                        return _this.render(context);\n                    }\n                };\n            }(this));\n            if (this.currentPage > 0) {\n                this.back.removeClass('disabled');\n            }\n            $(this.pages[this.currentPage]).css({ 'min-height': context.height() - 50 });\n            return context.appendHtml(this.el);\n        };\n        return Instructions;\n    }(html.HtmlResponse);\n    exports.Instructions = Instructions;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/html/instructions.js\"],\"names\":[\"Instructions\",\"Markdown\",\"Q\",\"html\",\"_\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"spec\",\"content\",\"div\",\"i\",\"itm\",\"md\",\"type\",\"value\",\"pages\",\"_ref\",\"_results\",\"keys\",\"values\",\"addClass\",\"append\",\"el\",\"push\",\"menu\",\"back\",\"$\",\"attr\",\"next\",\"items\",\"_i\",\"length\",\"css\",\"currentPage\",\"activate\",\"context\",\"deferred\",\"defer\",\"promise\",\"updateEl\",\"empty\",\"render\",\"layer\",\"click\",\"_this\",\"e\",\"removeClass\",\"resolve\",\"height\",\"appendHtml\",\"HtmlResponse\",\"exports\"],\"mappings\":\"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\"}","lineCount":106,"mtime":1395245873000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/html/html.js","canonicalName":"lib/components/html/html.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/q/q.js","canonicalName":"node_modules/q/q.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/html/markdown.js","canonicalName":"lib/components/html/markdown.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var Instructions, Markdown, Q, html, _,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  html = require(\"./html\");\n\n  Q = require(\"q\");\n\n  Markdown = require(\"./markdown\").Markdown;\n\n  _ = require('lodash');\n\n  Instructions = (function(_super) {\n    __extends(Instructions, _super);\n\n    function Instructions(spec) {\n      var content, div, i, itm, key, md, type, value;\n      if (spec == null) {\n        spec = {};\n      }\n      Instructions.__super__.constructor.call(this, spec);\n      this.pages = (function() {\n        var _ref, _results;\n        _ref = this.spec.pages;\n        _results = [];\n        for (key in _ref) {\n          value = _ref[key];\n          type = _.keys(value)[0];\n          content = _.values(value)[0];\n          md = new Markdown(content);\n          div = this.div();\n          div.addClass(\"ui stacked segment\").append(md.el);\n          _results.push(div);\n        }\n        return _results;\n      }).call(this);\n      this.menu = this.div();\n      this.menu.addClass(\"ui borderless pagination menu\");\n      this.back = $(\"<a class=\\\"item\\\">\\n  <i class=\\\"icon left arrow\\\"></i>  Previous\\n </a>\").attr(\"id\", \"instructions_back\");\n      this.next = $(\"<a class=\\\"item\\\">\\nNext <i class=\\\"icon right arrow\\\"></i>\\n</a>\").attr(\"id\", \"instructions_next\");\n      this.menu.append(this.back).append(\"\\n\");\n      this.items = (function() {\n        var _i, _ref, _results;\n        _results = [];\n        for (i = _i = 1, _ref = this.pages.length; 1 <= _ref ? _i <= _ref : _i >= _ref; i = 1 <= _ref ? ++_i : --_i) {\n          itm = $(\"<a class=\\\"item\\\">\" + i + \" of \" + this.pages.length + \"</a>\");\n          this.menu.append(itm).append(\"\\n\");\n          _results.push(itm);\n        }\n        return _results;\n      }).call(this);\n      this.items[0].addClass(\"active\");\n      this.menu.append(this.next).css(\"position\", \"absolute\").css(\"right\", \"15px\");\n      this.currentPage = 0;\n      this.el.append(this.pages[this.currentPage]);\n      this.el.append(this.menu);\n    }\n\n    Instructions.prototype.activate = function(context) {\n      this.deferred = Q.defer();\n      return this.deferred.promise;\n    };\n\n    Instructions.prototype.updateEl = function(currentPage) {\n      this.el.empty();\n      this.el.append(this.pages[this.currentPage]);\n      return this.el.append(this.menu);\n    };\n\n    Instructions.prototype.render = function(context, layer) {\n      this.next.click((function(_this) {\n        return function(e) {\n          if (_this.currentPage < (_this.pages.length - 1)) {\n            _this.items[_this.currentPage].removeClass(\"active\");\n            _this.currentPage += 1;\n            _this.items[_this.currentPage].addClass(\"active\");\n            _this.updateEl(_this.currentPage);\n            return _this.render(context);\n          } else {\n            return _this.deferred.resolve(0);\n          }\n        };\n      })(this));\n      this.back.click((function(_this) {\n        return function(e) {\n          if (_this.currentPage > 0) {\n            _this.items[_this.currentPage].removeClass(\"active\");\n            _this.currentPage -= 1;\n            _this.items[_this.currentPage].addClass(\"active\");\n            _this.updateEl(_this.currentPage);\n            return _this.render(context);\n          }\n        };\n      })(this));\n      if (this.currentPage > 0) {\n        this.back.removeClass(\"disabled\");\n      }\n      $(this.pages[this.currentPage]).css({\n        \"min-height\": context.height() - 50\n      });\n      return context.appendHtml(this.el);\n    };\n\n    return Instructions;\n\n  })(html.HtmlResponse);\n\n  exports.Instructions = Instructions;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/html/htmlicon.js":{"id":94,"canonicalName":"lib/components/html/htmlicon.js","code":"(function () {\n    var HtmlIcon, html, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    html = require('76', module);\n    HtmlIcon = function (_super) {\n        __extends(HtmlIcon, _super);\n        HtmlIcon.prototype.defaults = {\n            glyph: 'plane',\n            size: 'massive'\n        };\n        function HtmlIcon(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            HtmlIcon.__super__.constructor.call(this, spec);\n            this.html = $('<i></i>');\n            this.html.addClass(this.spec.glyph + ' ' + this.spec.size + ' icon');\n            this.el.append(this.html);\n        }\n        return HtmlIcon;\n    }(html.HtmlStimulus);\n    exports.HtmlIcon = HtmlIcon;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/html/htmlicon.js\"],\"names\":[\"HtmlIcon\",\"html\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"defaults\",\"glyph\",\"size\",\"spec\",\"$\",\"addClass\",\"el\",\"append\",\"HtmlStimulus\",\"exports\"],\"mappings\":\"AAAA,CAAC,YAAW;AAAA,IACV,IAAIA,QAAJ,EAAcC,IAAd,EACEC,SAAA,GAAY,GAAGC,cADjB,EAEEC,SAAA,GAAY,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAA,YAAE,SAASC,GAAT,IAAgBD,MAAhB,EAAwB;AAAA,gBAAE,IAAIJ,SAAA,CAAUM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ;AAAA,oBAAiCF,KAAA,CAAME,GAAN,IAAaD,MAAA,CAAOC,GAAP,CAAb,CAAnC;AAAA,aAA1B;AAAA,YAAyF,SAASE,IAAT,GAAgB;AAAA,gBAAE,KAAKC,WAAL,GAAmBL,KAAnB,CAAF;AAAA,aAAzG;AAAA,YAAuII,IAAA,CAAKE,SAAL,GAAiBL,MAAA,CAAOK,SAAxB,CAAvI;AAAA,YAA0KN,KAAA,CAAMM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA1K;AAAA,YAAwMJ,KAAA,CAAMO,SAAN,GAAkBN,MAAA,CAAOK,SAAzB,CAAxM;AAAA,YAA4O,OAAON,KAAP,CAA5O;AAAA,SAFtC,CADU;AAAA,IAKVJ,IAAA,GAAOY,OAAA,C,IAAA,E,MAAA,CAAP,CALU;AAAA,IAOVb,QAAA,GAAY,UAASc,MAAT,EAAiB;AAAA,QAC3BV,SAAA,CAAUJ,QAAV,EAAoBc,MAApB,EAD2B;AAAA,QAG3Bd,QAAA,CAASW,SAAT,CAAmBI,QAAnB,GAA8B;AAAA,YAC5BC,KAAA,EAAO,OADqB;AAAA,YAE5BC,IAAA,EAAM,SAFsB;AAAA,SAA9B,CAH2B;AAAA,QAQ3B,SAASjB,QAAT,CAAkBkB,IAAlB,EAAwB;AAAA,YACtB,IAAIA,IAAA,IAAQ,IAAZ,EAAkB;AAAA,gBAChBA,IAAA,GAAO,EAAP,CADgB;AAAA,aADI;AAAA,YAItBlB,QAAA,CAASY,SAAT,CAAmBF,WAAnB,CAA+BF,IAA/B,CAAoC,IAApC,EAA0CU,IAA1C,EAJsB;AAAA,YAKtB,KAAKjB,IAAL,GAAYkB,CAAA,CAAE,SAAF,CAAZ,CALsB;AAAA,YAMtB,KAAKlB,IAAL,CAAUmB,QAAV,CAAmB,KAAKF,IAAL,CAAUF,KAAV,GAAkB,GAAlB,GAAwB,KAAKE,IAAL,CAAUD,IAAlC,GAAyC,OAA5D,EANsB;AAAA,YAOtB,KAAKI,EAAL,CAAQC,MAAR,CAAe,KAAKrB,IAApB,EAPsB;AAAA,SARG;AAAA,QAkB3B,OAAOD,QAAP,CAlB2B;AAAA,KAAlB,CAoBRC,IAAA,CAAKsB,YApBG,CAAX,CAPU;AAAA,IA6BVC,OAAA,CAAQxB,QAAR,GAAmBA,QAAnB,CA7BU;AAAA,CAAZ,CA+BGQ,IA/BH,CA+BQ,IA/BR\"}","lineCount":34,"mtime":1395245873000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/html/html.js","canonicalName":"lib/components/html/html.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var HtmlIcon, html,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  html = require(\"./html\");\n\n  HtmlIcon = (function(_super) {\n    __extends(HtmlIcon, _super);\n\n    HtmlIcon.prototype.defaults = {\n      glyph: \"plane\",\n      size: \"massive\"\n    };\n\n    function HtmlIcon(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      HtmlIcon.__super__.constructor.call(this, spec);\n      this.html = $(\"<i></i>\");\n      this.html.addClass(this.spec.glyph + \" \" + this.spec.size + \" icon\");\n      this.el.append(this.html);\n    }\n\n    return HtmlIcon;\n\n  })(html.HtmlStimulus);\n\n  exports.HtmlIcon = HtmlIcon;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/html/htmllabel.js":{"id":93,"canonicalName":"lib/components/html/htmllabel.js","code":"(function () {\n    var HtmlLabel, html, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    html = require('76', module);\n    HtmlLabel = function (_super) {\n        __extends(HtmlLabel, _super);\n        HtmlLabel.prototype.defaults = {\n            glyph: null,\n            size: 'large',\n            text: 'label',\n            color: 'orange'\n        };\n        function HtmlLabel(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            HtmlLabel.__super__.constructor.call(this, spec);\n            this.el.addClass('ui ' + this.spec.color + ' ' + this.spec.size + ' label');\n            this.el.append(this.spec.text + ' ');\n            if (this.spec.glyph != null) {\n                this.el.append('<i class=\"' + this.spec.glyph + ' ' + this.spec.size + '  icon\"></i>');\n            }\n        }\n        return HtmlLabel;\n    }(html.HtmlStimulus);\n    exports.HtmlLabel = HtmlLabel;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/html/htmllabel.js\"],\"names\":[\"HtmlLabel\",\"html\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"defaults\",\"glyph\",\"size\",\"text\",\"color\",\"spec\",\"el\",\"addClass\",\"append\",\"HtmlStimulus\",\"exports\"],\"mappings\":\"AAAA,CAAC,YAAW;AAAA,IACV,IAAIA,SAAJ,EAAeC,IAAf,EACEC,SAAA,GAAY,GAAGC,cADjB,EAEEC,SAAA,GAAY,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAA,YAAE,SAASC,GAAT,IAAgBD,MAAhB,EAAwB;AAAA,gBAAE,IAAIJ,SAAA,CAAUM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ;AAAA,oBAAiCF,KAAA,CAAME,GAAN,IAAaD,MAAA,CAAOC,GAAP,CAAb,CAAnC;AAAA,aAA1B;AAAA,YAAyF,SAASE,IAAT,GAAgB;AAAA,gBAAE,KAAKC,WAAL,GAAmBL,KAAnB,CAAF;AAAA,aAAzG;AAAA,YAAuII,IAAA,CAAKE,SAAL,GAAiBL,MAAA,CAAOK,SAAxB,CAAvI;AAAA,YAA0KN,KAAA,CAAMM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA1K;AAAA,YAAwMJ,KAAA,CAAMO,SAAN,GAAkBN,MAAA,CAAOK,SAAzB,CAAxM;AAAA,YAA4O,OAAON,KAAP,CAA5O;AAAA,SAFtC,CADU;AAAA,IAKVJ,IAAA,GAAOY,OAAA,C,IAAA,E,MAAA,CAAP,CALU;AAAA,IAOVb,SAAA,GAAa,UAASc,MAAT,EAAiB;AAAA,QAC5BV,SAAA,CAAUJ,SAAV,EAAqBc,MAArB,EAD4B;AAAA,QAG5Bd,SAAA,CAAUW,SAAV,CAAoBI,QAApB,GAA+B;AAAA,YAC7BC,KAAA,EAAO,IADsB;AAAA,YAE7BC,IAAA,EAAM,OAFuB;AAAA,YAG7BC,IAAA,EAAM,OAHuB;AAAA,YAI7BC,KAAA,EAAO,QAJsB;AAAA,SAA/B,CAH4B;AAAA,QAU5B,SAASnB,SAAT,CAAmBoB,IAAnB,EAAyB;AAAA,YACvB,IAAIA,IAAA,IAAQ,IAAZ,EAAkB;AAAA,gBAChBA,IAAA,GAAO,EAAP,CADgB;AAAA,aADK;AAAA,YAIvBpB,SAAA,CAAUY,SAAV,CAAoBF,WAApB,CAAgCF,IAAhC,CAAqC,IAArC,EAA2CY,IAA3C,EAJuB;AAAA,YAKvB,KAAKC,EAAL,CAAQC,QAAR,CAAiB,QAAQ,KAAKF,IAAL,CAAUD,KAAlB,GAA0B,GAA1B,GAAgC,KAAKC,IAAL,CAAUH,IAA1C,GAAiD,QAAlE,EALuB;AAAA,YAMvB,KAAKI,EAAL,CAAQE,MAAR,CAAe,KAAKH,IAAL,CAAUF,IAAV,GAAiB,GAAhC,EANuB;AAAA,YAOvB,IAAI,KAAKE,IAAL,CAAUJ,KAAV,IAAmB,IAAvB,EAA6B;AAAA,gBAC3B,KAAKK,EAAL,CAAQE,MAAR,CAAe,eAAgB,KAAKH,IAAL,CAAUJ,KAA1B,GAAkC,GAAlC,GAAwC,KAAKI,IAAL,CAAUH,IAAlD,GAAyD,cAAxE,EAD2B;AAAA,aAPN;AAAA,SAVG;AAAA,QAsB5B,OAAOjB,SAAP,CAtB4B;AAAA,KAAlB,CAwBTC,IAAA,CAAKuB,YAxBI,CAAZ,CAPU;AAAA,IAiCVC,OAAA,CAAQzB,SAAR,GAAoBA,SAApB,CAjCU;AAAA,CAAZ,CAmCGQ,IAnCH,CAmCQ,IAnCR\"}","lineCount":38,"mtime":1395245873000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/html/html.js","canonicalName":"lib/components/html/html.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var HtmlLabel, html,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  html = require(\"./html\");\n\n  HtmlLabel = (function(_super) {\n    __extends(HtmlLabel, _super);\n\n    HtmlLabel.prototype.defaults = {\n      glyph: null,\n      size: \"large\",\n      text: \"label\",\n      color: \"orange\"\n    };\n\n    function HtmlLabel(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      HtmlLabel.__super__.constructor.call(this, spec);\n      this.el.addClass(\"ui \" + this.spec.color + \" \" + this.spec.size + \" label\");\n      this.el.append(this.spec.text + \" \");\n      if (this.spec.glyph != null) {\n        this.el.append(\"<i class=\\\"\" + this.spec.glyph + \" \" + this.spec.size + \"  icon\\\"></i>\");\n      }\n    }\n\n    return HtmlLabel;\n\n  })(html.HtmlStimulus);\n\n  exports.HtmlLabel = HtmlLabel;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/html/htmllink.js":{"id":92,"canonicalName":"lib/components/html/htmllink.js","code":"(function () {\n    var HtmlLink, html, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    html = require('76', module);\n    HtmlLink = function (_super) {\n        __extends(HtmlLink, _super);\n        HtmlLink.prototype.defaults = { label: 'link' };\n        function HtmlLink(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            HtmlLink.__super__.constructor.call(this, spec);\n            this.html = $('<a href=\\'#\\'>' + this.spec.label + '</a>');\n            this.el.append(this.html);\n        }\n        return HtmlLink;\n    }(html.HtmlStimulus);\n    exports.HtmlLink = HtmlLink;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/html/htmllink.js\"],\"names\":[\"HtmlLink\",\"html\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"defaults\",\"label\",\"spec\",\"$\",\"el\",\"append\",\"HtmlStimulus\",\"exports\"],\"mappings\":\"AAAA,CAAC,YAAW;AAAA,IACV,IAAIA,QAAJ,EAAcC,IAAd,EACEC,SAAA,GAAY,GAAGC,cADjB,EAEEC,SAAA,GAAY,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAA,YAAE,SAASC,GAAT,IAAgBD,MAAhB,EAAwB;AAAA,gBAAE,IAAIJ,SAAA,CAAUM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ;AAAA,oBAAiCF,KAAA,CAAME,GAAN,IAAaD,MAAA,CAAOC,GAAP,CAAb,CAAnC;AAAA,aAA1B;AAAA,YAAyF,SAASE,IAAT,GAAgB;AAAA,gBAAE,KAAKC,WAAL,GAAmBL,KAAnB,CAAF;AAAA,aAAzG;AAAA,YAAuII,IAAA,CAAKE,SAAL,GAAiBL,MAAA,CAAOK,SAAxB,CAAvI;AAAA,YAA0KN,KAAA,CAAMM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA1K;AAAA,YAAwMJ,KAAA,CAAMO,SAAN,GAAkBN,MAAA,CAAOK,SAAzB,CAAxM;AAAA,YAA4O,OAAON,KAAP,CAA5O;AAAA,SAFtC,CADU;AAAA,IAKVJ,IAAA,GAAOY,OAAA,C,IAAA,E,MAAA,CAAP,CALU;AAAA,IAOVb,QAAA,GAAY,UAASc,MAAT,EAAiB;AAAA,QAC3BV,SAAA,CAAUJ,QAAV,EAAoBc,MAApB,EAD2B;AAAA,QAG3Bd,QAAA,CAASW,SAAT,CAAmBI,QAAnB,GAA8B,EAC5BC,KAAA,EAAO,MADqB,EAA9B,CAH2B;AAAA,QAO3B,SAAShB,QAAT,CAAkBiB,IAAlB,EAAwB;AAAA,YACtB,IAAIA,IAAA,IAAQ,IAAZ,EAAkB;AAAA,gBAChBA,IAAA,GAAO,EAAP,CADgB;AAAA,aADI;AAAA,YAItBjB,QAAA,CAASY,SAAT,CAAmBF,WAAnB,CAA+BF,IAA/B,CAAoC,IAApC,EAA0CS,IAA1C,EAJsB;AAAA,YAKtB,KAAKhB,IAAL,GAAYiB,CAAA,CAAE,mBAAiB,KAAKD,IAAL,CAAUD,KAA3B,GAAmC,MAArC,CAAZ,CALsB;AAAA,YAMtB,KAAKG,EAAL,CAAQC,MAAR,CAAe,KAAKnB,IAApB,EANsB;AAAA,SAPG;AAAA,QAgB3B,OAAOD,QAAP,CAhB2B;AAAA,KAAlB,CAkBRC,IAAA,CAAKoB,YAlBG,CAAX,CAPU;AAAA,IA2BVC,OAAA,CAAQtB,QAAR,GAAmBA,QAAnB,CA3BU;AAAA,CAAZ,CA6BGQ,IA7BH,CA6BQ,IA7BR\"}","lineCount":30,"mtime":1395245873000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/html/html.js","canonicalName":"lib/components/html/html.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var HtmlLink, html,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  html = require(\"./html\");\n\n  HtmlLink = (function(_super) {\n    __extends(HtmlLink, _super);\n\n    HtmlLink.prototype.defaults = {\n      label: \"link\"\n    };\n\n    function HtmlLink(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      HtmlLink.__super__.constructor.call(this, spec);\n      this.html = $(\"<a href='#'>\" + this.spec.label + \"</a>\");\n      this.el.append(this.html);\n    }\n\n    return HtmlLink;\n\n  })(html.HtmlStimulus);\n\n  exports.HtmlLink = HtmlLink;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/html/htmlbutton.js":{"id":91,"canonicalName":"lib/components/html/htmlbutton.js","code":"(function () {\n    var HtmlButton, html, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    html = require('76', module);\n    HtmlButton = function (_super) {\n        __extends(HtmlButton, _super);\n        HtmlButton.prototype.defaults = {\n            label: 'Next',\n            'class': ''\n        };\n        function HtmlButton(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            HtmlButton.__super__.constructor.call(this, spec);\n            this.el.addClass('ui button');\n            this.el.addClass(this.spec['class']);\n            this.el.append(this.spec.label);\n        }\n        return HtmlButton;\n    }(html.HtmlStimulus);\n    exports.HtmlButton = HtmlButton;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/html/htmlbutton.js\"],\"names\":[\"HtmlButton\",\"html\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"defaults\",\"label\",\"spec\",\"el\",\"addClass\",\"append\",\"HtmlStimulus\",\"exports\"],\"mappings\":\"AAAA,CAAC,YAAW;AAAA,IACV,IAAIA,UAAJ,EAAgBC,IAAhB,EACEC,SAAA,GAAY,GAAGC,cADjB,EAEEC,SAAA,GAAY,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAA,YAAE,SAASC,GAAT,IAAgBD,MAAhB,EAAwB;AAAA,gBAAE,IAAIJ,SAAA,CAAUM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ;AAAA,oBAAiCF,KAAA,CAAME,GAAN,IAAaD,MAAA,CAAOC,GAAP,CAAb,CAAnC;AAAA,aAA1B;AAAA,YAAyF,SAASE,IAAT,GAAgB;AAAA,gBAAE,KAAKC,WAAL,GAAmBL,KAAnB,CAAF;AAAA,aAAzG;AAAA,YAAuII,IAAA,CAAKE,SAAL,GAAiBL,MAAA,CAAOK,SAAxB,CAAvI;AAAA,YAA0KN,KAAA,CAAMM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA1K;AAAA,YAAwMJ,KAAA,CAAMO,SAAN,GAAkBN,MAAA,CAAOK,SAAzB,CAAxM;AAAA,YAA4O,OAAON,KAAP,CAA5O;AAAA,SAFtC,CADU;AAAA,IAKVJ,IAAA,GAAOY,OAAA,C,IAAA,E,MAAA,CAAP,CALU;AAAA,IAOVb,UAAA,GAAc,UAASc,MAAT,EAAiB;AAAA,QAC7BV,SAAA,CAAUJ,UAAV,EAAsBc,MAAtB,EAD6B;AAAA,QAG7Bd,UAAA,CAAWW,SAAX,CAAqBI,QAArB,GAAgC;AAAA,YAC9BC,KAAA,EAAO,MADuB;AAAA,YAE9B,SAAS,EAFqB;AAAA,SAAhC,CAH6B;AAAA,QAQ7B,SAAShB,UAAT,CAAoBiB,IAApB,EAA0B;AAAA,YACxB,IAAIA,IAAA,IAAQ,IAAZ,EAAkB;AAAA,gBAChBA,IAAA,GAAO,EAAP,CADgB;AAAA,aADM;AAAA,YAIxBjB,UAAA,CAAWY,SAAX,CAAqBF,WAArB,CAAiCF,IAAjC,CAAsC,IAAtC,EAA4CS,IAA5C,EAJwB;AAAA,YAKxB,KAAKC,EAAL,CAAQC,QAAR,CAAiB,WAAjB,EALwB;AAAA,YAMxB,KAAKD,EAAL,CAAQC,QAAR,CAAiB,KAAKF,IAAL,CAAU,OAAV,CAAjB,EANwB;AAAA,YAOxB,KAAKC,EAAL,CAAQE,MAAR,CAAe,KAAKH,IAAL,CAAUD,KAAzB,EAPwB;AAAA,SARG;AAAA,QAkB7B,OAAOhB,UAAP,CAlB6B;AAAA,KAAlB,CAoBVC,IAAA,CAAKoB,YApBK,CAAb,CAPU;AAAA,IA6BVC,OAAA,CAAQtB,UAAR,GAAqBA,UAArB,CA7BU;AAAA,CAAZ,CA+BGQ,IA/BH,CA+BQ,IA/BR\"}","lineCount":34,"mtime":1395245873000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/html/html.js","canonicalName":"lib/components/html/html.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var HtmlButton, html,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  html = require(\"./html\");\n\n  HtmlButton = (function(_super) {\n    __extends(HtmlButton, _super);\n\n    HtmlButton.prototype.defaults = {\n      label: \"Next\",\n      \"class\": \"\"\n    };\n\n    function HtmlButton(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      HtmlButton.__super__.constructor.call(this, spec);\n      this.el.addClass(\"ui button\");\n      this.el.addClass(this.spec[\"class\"]);\n      this.el.append(this.spec.label);\n    }\n\n    return HtmlButton;\n\n  })(html.HtmlStimulus);\n\n  exports.HtmlButton = HtmlButton;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/canvas.js":{"id":75,"canonicalName":"lib/components/canvas/canvas.js","code":"(function () {\n    var Canvas;\n    Canvas = {};\n    Canvas.Arrow = require('99', module).Arrow;\n    Canvas.Background = require('79', module).Background;\n    Canvas.Blank = require('100', module).Blank;\n    Canvas.Circle = require('101', module).Circle;\n    Canvas.Clear = require('102', module).Clear;\n    Canvas.FixationCross = require('103', module).FixationCross;\n    Canvas.CanvasBorder = require('104', module).CanvasBorder;\n    Canvas.GridLines = require('105', module).GridLines;\n    Canvas.Picture = require('106', module).Picture;\n    Canvas.Rectangle = require('107', module).Rectangle;\n    Canvas.StartButton = require('108', module).StartButton;\n    Canvas.Text = require('109', module).Text;\n    Canvas.TextInput = require('110', module).TextInput;\n    Canvas.LabeledElement = require('111', module).LabeledElement;\n    exports.Canvas = Canvas;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/canvas/canvas.js\"],\"names\":[\"Canvas\",\"Arrow\",\"require\",\"Background\",\"Blank\",\"Circle\",\"Clear\",\"FixationCross\",\"CanvasBorder\",\"GridLines\",\"Picture\",\"Rectangle\",\"StartButton\",\"Text\",\"TextInput\",\"LabeledElement\",\"exports\",\"call\"],\"mappings\":\"AAAA,CAAC,YAAW;AAAA,IACV,IAAIA,MAAJ,CADU;AAAA,IAGVA,MAAA,GAAS,EAAT,CAHU;AAAA,IAKVA,MAAA,CAAOC,KAAP,GAAeC,OAAA,C,IAAA,E,MAAA,EAAmBD,KAAlC,CALU;AAAA,IAOVD,MAAA,CAAOG,UAAP,GAAoBD,OAAA,C,IAAA,E,MAAA,EAAwBC,UAA5C,CAPU;AAAA,IASVH,MAAA,CAAOI,KAAP,GAAeF,OAAA,C,KAAA,E,MAAA,EAAmBE,KAAlC,CATU;AAAA,IAWVJ,MAAA,CAAOK,MAAP,GAAgBH,OAAA,C,KAAA,E,MAAA,EAAoBG,MAApC,CAXU;AAAA,IAaVL,MAAA,CAAOM,KAAP,GAAeJ,OAAA,C,KAAA,E,MAAA,EAAmBI,KAAlC,CAbU;AAAA,IAeVN,MAAA,CAAOO,aAAP,GAAuBL,OAAA,C,KAAA,E,MAAA,EAA2BK,aAAlD,CAfU;AAAA,IAiBVP,MAAA,CAAOQ,YAAP,GAAsBN,OAAA,C,KAAA,E,MAAA,EAA0BM,YAAhD,CAjBU;AAAA,IAmBVR,MAAA,CAAOS,SAAP,GAAmBP,OAAA,C,KAAA,E,MAAA,EAAuBO,SAA1C,CAnBU;AAAA,IAqBVT,MAAA,CAAOU,OAAP,GAAiBR,OAAA,C,KAAA,E,MAAA,EAAqBQ,OAAtC,CArBU;AAAA,IAuBVV,MAAA,CAAOW,SAAP,GAAmBT,OAAA,C,KAAA,E,MAAA,EAAuBS,SAA1C,CAvBU;AAAA,IAyBVX,MAAA,CAAOY,WAAP,GAAqBV,OAAA,C,KAAA,E,MAAA,EAAyBU,WAA9C,CAzBU;AAAA,IA2BVZ,MAAA,CAAOa,IAAP,GAAcX,OAAA,C,KAAA,E,MAAA,EAAkBW,IAAhC,CA3BU;AAAA,IA6BVb,MAAA,CAAOc,SAAP,GAAmBZ,OAAA,C,KAAA,E,MAAA,EAAuBY,SAA1C,CA7BU;AAAA,IA+BVd,MAAA,CAAOe,cAAP,GAAwBb,OAAA,C,KAAA,E,MAAA,EAAqBa,cAA7C,CA/BU;AAAA,IAiCVC,OAAA,CAAQhB,MAAR,GAAiBA,MAAjB,CAjCU;AAAA,CAAZ,CAmCGiB,IAnCH,CAmCQ,IAnCR\"}","lineCount":19,"mtime":1395245872000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/arrow.js","canonicalName":"lib/components/canvas/arrow.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/background.js","canonicalName":"lib/components/canvas/background.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/blank.js","canonicalName":"lib/components/canvas/blank.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/circle.js","canonicalName":"lib/components/canvas/circle.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/clear.js","canonicalName":"lib/components/canvas/clear.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/fixationcross.js","canonicalName":"lib/components/canvas/fixationcross.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/canvasborder.js","canonicalName":"lib/components/canvas/canvasborder.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/gridlines.js","canonicalName":"lib/components/canvas/gridlines.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/picture.js","canonicalName":"lib/components/canvas/picture.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/rectangle.js","canonicalName":"lib/components/canvas/rectangle.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/startbutton.js","canonicalName":"lib/components/canvas/startbutton.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/text.js","canonicalName":"lib/components/canvas/text.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/textinput.js","canonicalName":"lib/components/canvas/textinput.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/labeled.js","canonicalName":"lib/components/canvas/labeled.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var Canvas;\n\n  Canvas = {};\n\n  Canvas.Arrow = require(\"./arrow\").Arrow;\n\n  Canvas.Background = require(\"./background\").Background;\n\n  Canvas.Blank = require(\"./blank\").Blank;\n\n  Canvas.Circle = require(\"./circle\").Circle;\n\n  Canvas.Clear = require(\"./clear\").Clear;\n\n  Canvas.FixationCross = require(\"./fixationcross\").FixationCross;\n\n  Canvas.CanvasBorder = require(\"./canvasborder\").CanvasBorder;\n\n  Canvas.GridLines = require(\"./gridlines\").GridLines;\n\n  Canvas.Picture = require(\"./picture\").Picture;\n\n  Canvas.Rectangle = require(\"./rectangle\").Rectangle;\n\n  Canvas.StartButton = require(\"./startbutton\").StartButton;\n\n  Canvas.Text = require(\"./text\").Text;\n\n  Canvas.TextInput = require(\"./textinput\").TextInput;\n\n  Canvas.LabeledElement = require(\"./labeled\").LabeledElement;\n\n  exports.Canvas = Canvas;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/labeled.js":{"id":111,"canonicalName":"lib/components/canvas/labeled.js","code":"(function () {\n    var Kinetic, LabeledElement, StimResp, Text, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Kinetic = require('15', module).Kinetic;\n    Text = require('112', module).Text;\n    StimResp = require('72', module);\n    LabeledElement = function (_super) {\n        __extends(LabeledElement, _super);\n        LabeledElement.prototype.defaults = {\n            position: 'below',\n            content: 'Label',\n            align: 'center',\n            gap: 10,\n            fontSize: 32,\n            fill: 'black',\n            fontFamily: 'Arial'\n        };\n        function LabeledElement(element, spec) {\n            this.element = element;\n            if (spec == null) {\n                spec = {};\n            }\n            LabeledElement.__super__.constructor.call(this, spec);\n        }\n        LabeledElement.prototype.render = function (context) {\n            var target;\n            target = this.element.render(context);\n            this.text = new Kinetic.Text({\n                x: 0,\n                y: 0,\n                text: this.spec.content,\n                fontSize: this.spec.fontSize,\n                fill: this.spec.fill,\n                align: this.spec.align,\n                width: target.width(),\n                fontFamily: this.spec.fontFamily,\n                padding: 2\n            });\n            console.log('labeled text', this.text.getPosition());\n            console.log('labeled target width:', target.width());\n            console.log('labeled target height:', target.height());\n            switch (this.spec.position) {\n            case 'below':\n                this.text.setPosition({\n                    x: target.x(),\n                    y: target.y() + target.height() + this.spec.gap\n                });\n                break;\n            case 'above':\n                this.text.setPosition({\n                    x: target.x(),\n                    y: target.y() - this.text.getTextHeight()\n                });\n                break;\n            case 'left':\n                this.text.setPosition({\n                    x: target.x() - this.text.getTextWidth() - this.spec.gap,\n                    y: target.y()\n                });\n                break;\n            case 'right':\n                this.text.setPosition({\n                    x: target.x() + target.width() + this.spec.gap,\n                    y: target.y()\n                });\n            }\n            return new StimResp.ContainerDrawable([\n                target,\n                new StimResp.KineticDrawable(this.text)\n            ]);\n        };\n        return LabeledElement;\n    }(StimResp.Stimulus);\n    exports.LabeledElement = LabeledElement;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/canvas/labeled.js\"],\"names\":[\"Kinetic\",\"LabeledElement\",\"StimResp\",\"Text\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"_super\",\"defaults\",\"position\",\"content\",\"align\",\"gap\",\"fontSize\",\"fill\",\"fontFamily\",\"element\",\"spec\",\"render\",\"context\",\"target\",\"text\",\"x\",\"y\",\"width\",\"padding\",\"console\",\"log\",\"getPosition\",\"height\",\"setPosition\",\"getTextHeight\",\"getTextWidth\",\"ContainerDrawable\",\"KineticDrawable\",\"Stimulus\",\"exports\"],\"mappings\":\"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\"}","lineCount":86,"mtime":1395245872000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/Text.js","canonicalName":"lib/components/canvas/Text.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var Kinetic, LabeledElement, StimResp, Text,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Kinetic = require(\"../../../jslibs/kinetic\").Kinetic;\n\n  Text = require(\"./Text\").Text;\n\n  StimResp = require(\"../../stimresp\");\n\n  LabeledElement = (function(_super) {\n    __extends(LabeledElement, _super);\n\n    LabeledElement.prototype.defaults = {\n      position: \"below\",\n      content: \"Label\",\n      align: \"center\",\n      gap: 10,\n      fontSize: 32,\n      fill: \"black\",\n      fontFamily: \"Arial\"\n    };\n\n    function LabeledElement(element, spec) {\n      this.element = element;\n      if (spec == null) {\n        spec = {};\n      }\n      LabeledElement.__super__.constructor.call(this, spec);\n    }\n\n    LabeledElement.prototype.render = function(context) {\n      var target;\n      target = this.element.render(context);\n      this.text = new Kinetic.Text({\n        x: 0,\n        y: 0,\n        text: this.spec.content,\n        fontSize: this.spec.fontSize,\n        fill: this.spec.fill,\n        align: this.spec.align,\n        width: target.width(),\n        fontFamily: this.spec.fontFamily,\n        padding: 2\n      });\n      console.log(\"labeled text\", this.text.getPosition());\n      console.log(\"labeled target width:\", target.width());\n      console.log(\"labeled target height:\", target.height());\n      switch (this.spec.position) {\n        case \"below\":\n          this.text.setPosition({\n            x: target.x(),\n            y: target.y() + target.height() + this.spec.gap\n          });\n          break;\n        case \"above\":\n          this.text.setPosition({\n            x: target.x(),\n            y: target.y() - this.text.getTextHeight()\n          });\n          break;\n        case \"left\":\n          this.text.setPosition({\n            x: target.x() - this.text.getTextWidth() - this.spec.gap,\n            y: target.y()\n          });\n          break;\n        case \"right\":\n          this.text.setPosition({\n            x: target.x() + target.width() + this.spec.gap,\n            y: target.y()\n          });\n      }\n      return new StimResp.ContainerDrawable([target, new StimResp.KineticDrawable(this.text)]);\n    };\n\n    return LabeledElement;\n\n  })(StimResp.Stimulus);\n\n  exports.LabeledElement = LabeledElement;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/Text.js":{"id":112,"canonicalName":"lib/components/canvas/Text.js","code":"(function () {\n    var KStimulus, Kinetic, Text, layout, _, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    layout = require('73', module);\n    Kinetic = require('15', module).Kinetic;\n    _ = require('16', module);\n    KStimulus = require('72', module).KineticStimulus;\n    Text = function (_super) {\n        __extends(Text, _super);\n        Text.prototype.defaults = {\n            content: 'Text',\n            x: 5,\n            y: 5,\n            width: null,\n            fill: 'black',\n            fontSize: 40,\n            fontFamily: 'Arial',\n            align: 'center',\n            position: null\n        };\n        function Text(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            if (spec.content != null && _.isArray(spec.content)) {\n                spec.content = spec.content.join(' \\n ');\n                if (spec.lineHeight == null) {\n                    spec.lineHeight = 2;\n                }\n            }\n            Text.__super__.constructor.call(this, spec);\n        }\n        Text.prototype.initialize = function () {\n            return this.text = new Kinetic.Text({\n                x: 0,\n                y: 0,\n                text: this.spec.content,\n                fontSize: this.spec.fontSize,\n                fontFamily: this.spec.fontFamily,\n                fill: this.spec.fill,\n                lineHeight: this.spec.lineHeight || 1,\n                width: this.spec.width,\n                listening: false,\n                align: this.spec.align\n            });\n        };\n        Text.prototype.render = function (context, layer) {\n            var coords;\n            coords = this.computeCoordinates(context, this.spec.position, this.text.getWidth(), this.text.getHeight());\n            this.text.setPosition({\n                x: coords[0],\n                y: coords[1]\n            });\n            return this.presentable(this.text);\n        };\n        return Text;\n    }(KStimulus);\n    exports.Text = Text;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/canvas/Text.js\"],\"names\":[\"KStimulus\",\"Kinetic\",\"Text\",\"layout\",\"_\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"KineticStimulus\",\"_super\",\"defaults\",\"content\",\"x\",\"y\",\"width\",\"fill\",\"fontSize\",\"fontFamily\",\"align\",\"position\",\"spec\",\"isArray\",\"join\",\"lineHeight\",\"initialize\",\"text\",\"listening\",\"render\",\"context\",\"layer\",\"coords\",\"computeCoordinates\",\"getWidth\",\"getHeight\",\"setPosition\",\"presentable\",\"exports\"],\"mappings\":\"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\"}","lineCount":70,"mtime":1395245872000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/lib/layout.js","canonicalName":"lib/layout.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var KStimulus, Kinetic, Text, layout, _,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  layout = require(\"../../layout\");\n\n  Kinetic = require(\"../../../jslibs/kinetic\").Kinetic;\n\n  _ = require('lodash');\n\n  KStimulus = require(\"../../stimresp\").KineticStimulus;\n\n  Text = (function(_super) {\n    __extends(Text, _super);\n\n    Text.prototype.defaults = {\n      content: \"Text\",\n      x: 5,\n      y: 5,\n      width: null,\n      fill: \"black\",\n      fontSize: 40,\n      fontFamily: \"Arial\",\n      align: \"center\",\n      position: null\n    };\n\n    function Text(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      if ((spec.content != null) && _.isArray(spec.content)) {\n        spec.content = spec.content.join(' \\n ');\n        if (spec.lineHeight == null) {\n          spec.lineHeight = 2;\n        }\n      }\n      Text.__super__.constructor.call(this, spec);\n    }\n\n    Text.prototype.initialize = function() {\n      return this.text = new Kinetic.Text({\n        x: 0,\n        y: 0,\n        text: this.spec.content,\n        fontSize: this.spec.fontSize,\n        fontFamily: this.spec.fontFamily,\n        fill: this.spec.fill,\n        lineHeight: this.spec.lineHeight || 1,\n        width: this.spec.width,\n        listening: false,\n        align: this.spec.align\n      });\n    };\n\n    Text.prototype.render = function(context, layer) {\n      var coords;\n      coords = this.computeCoordinates(context, this.spec.position, this.text.getWidth(), this.text.getHeight());\n      this.text.setPosition({\n        x: coords[0],\n        y: coords[1]\n      });\n      return this.presentable(this.text);\n    };\n\n    return Text;\n\n  })(KStimulus);\n\n  exports.Text = Text;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/textinput.js":{"id":110,"canonicalName":"lib/components/canvas/textinput.js","code":"(function () {\n    var KStimulus, Kinetic, TextInput, utils, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    utils = require('69', module);\n    Kinetic = require('15', module).Kinetic;\n    KStimulus = require('72', module).KineticStimulus;\n    TextInput = function (_super) {\n        __extends(TextInput, _super);\n        TextInput.prototype.defaults = {\n            x: 100,\n            y: 100,\n            width: 200,\n            height: 40,\n            defaultValue: '',\n            fill: '#FAF5E6',\n            stroke: '#0099FF',\n            strokeWidth: 1,\n            content: ''\n        };\n        function TextInput(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            TextInput.__super__.constructor.call(this, spec);\n            utils.disableBrowserBack();\n        }\n        TextInput.prototype.getChar = function (e) {\n            if (e.keyCode !== 16) {\n                if (e.keyCode >= 65 && e.keyCode <= 90) {\n                    if (e.shiftKey) {\n                        return String.fromCharCode(e.keyCode);\n                    } else {\n                        return String.fromCharCode(e.keyCode + 32);\n                    }\n                } else if (e.keyCode >= 48 && e.keyCode <= 57) {\n                    return String.fromCharCode(e.keyCode);\n                } else {\n                    switch (e.keyCode) {\n                    case 186:\n                        return ';';\n                    case 187:\n                        return '=';\n                    case 188:\n                        return ',';\n                    case 189:\n                        return '-';\n                    default:\n                        return '';\n                    }\n                }\n            } else {\n                return String.fromCharCode(e.keyCode);\n            }\n        };\n        TextInput.prototype.animateCursor = function (layer, cursor) {\n            var flashTime;\n            flashTime = 0;\n            return new Kinetic.Animation(function (_this) {\n                return function (frame) {\n                    if (frame.time > flashTime + 500) {\n                        flashTime = frame.time;\n                        if (cursor.getOpacity() === 1) {\n                            cursor.setOpacity(0);\n                        } else {\n                            cursor.setOpacity(1);\n                        }\n                        return layer.draw();\n                    }\n                };\n            }(this), layer);\n        };\n        TextInput.prototype.render = function (context, layer) {\n            var cursor, cursorBlink, enterPressed, fsize, group, keyStream, text, textContent, textRect;\n            textRect = new Kinetic.Rect({\n                x: this.spec.x,\n                y: this.spec.y,\n                width: this.spec.width,\n                height: this.spec.height,\n                fill: this.spec.fill,\n                cornerRadius: 4,\n                lineJoin: 'round',\n                stroke: this.spec.stroke,\n                strokeWidth: this.spec.strokeWidth\n            });\n            textContent = this.spec.content;\n            fsize = 0.85 * this.spec.height;\n            text = new Kinetic.Text({\n                text: this.spec.content,\n                x: this.spec.x + 2,\n                y: this.spec.y - 5,\n                height: this.spec.height,\n                fontSize: fsize,\n                fill: 'black',\n                padding: 10,\n                align: 'left'\n            });\n            cursor = new Kinetic.Rect({\n                x: text.getX() + text.getWidth() - 7,\n                y: this.spec.y + 5,\n                width: 1.5,\n                height: text.getHeight() - 10,\n                fill: 'black'\n            });\n            enterPressed = false;\n            keyStream = context.keydownStream();\n            keyStream.takeWhile(function (_this) {\n                return function (x) {\n                    return enterPressed === false && !_this.stopped;\n                };\n            }(this)).onValue(function (_this) {\n                return function (event) {\n                    var char;\n                    if (event.keyCode === 13) {\n                        return enterPressed = true;\n                    } else if (event.keyCode === 8) {\n                        textContent = textContent.slice(0, -1);\n                        text.setText(textContent);\n                        cursor.setX(text.getX() + text.getWidth() - 7);\n                        return layer.draw();\n                    } else if (text.getWidth() > textRect.getWidth()) {\n                    } else {\n                        char = _this.getChar(event);\n                        textContent += char;\n                        text.setText(textContent);\n                        cursor.setX(text.getX() + text.getWidth() - 7);\n                        return layer.draw();\n                    }\n                };\n            }(this));\n            cursorBlink = this.animateCursor(layer, cursor);\n            cursorBlink.start();\n            group = new Kinetic.Group({});\n            group.add(textRect);\n            group.add(cursor);\n            group.add(text);\n            return layer.add(group);\n        };\n        return TextInput;\n    }(KStimulus);\n    exports.TextInput = TextInput;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/canvas/textinput.js\"],\"names\":[\"KStimulus\",\"Kinetic\",\"TextInput\",\"utils\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"KineticStimulus\",\"_super\",\"defaults\",\"x\",\"y\",\"width\",\"height\",\"defaultValue\",\"fill\",\"stroke\",\"strokeWidth\",\"content\",\"spec\",\"disableBrowserBack\",\"getChar\",\"e\",\"keyCode\",\"shiftKey\",\"String\",\"fromCharCode\",\"animateCursor\",\"layer\",\"cursor\",\"flashTime\",\"Animation\",\"_this\",\"frame\",\"time\",\"getOpacity\",\"setOpacity\",\"draw\",\"render\",\"context\",\"cursorBlink\",\"enterPressed\",\"fsize\",\"group\",\"keyStream\",\"text\",\"textContent\",\"textRect\",\"Rect\",\"cornerRadius\",\"lineJoin\",\"Text\",\"fontSize\",\"padding\",\"align\",\"getX\",\"getWidth\",\"getHeight\",\"keydownStream\",\"takeWhile\",\"stopped\",\"onValue\",\"event\",\"char\",\"slice\",\"setText\",\"setX\",\"start\",\"Group\",\"add\",\"exports\"],\"mappings\":\"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\"}","lineCount":152,"mtime":1395245872000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/lib/utils.js","canonicalName":"lib/utils.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var KStimulus, Kinetic, TextInput, utils,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  utils = require(\"../../utils\");\n\n  Kinetic = require(\"../../../jslibs/kinetic\").Kinetic;\n\n  KStimulus = require(\"../../stimresp\").KineticStimulus;\n\n  TextInput = (function(_super) {\n    __extends(TextInput, _super);\n\n    TextInput.prototype.defaults = {\n      x: 100,\n      y: 100,\n      width: 200,\n      height: 40,\n      defaultValue: \"\",\n      fill: \"#FAF5E6\",\n      stroke: \"#0099FF\",\n      strokeWidth: 1,\n      content: \"\"\n    };\n\n    function TextInput(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      TextInput.__super__.constructor.call(this, spec);\n      utils.disableBrowserBack();\n    }\n\n    TextInput.prototype.getChar = function(e) {\n      if (e.keyCode !== 16) {\n        if (e.keyCode >= 65 && e.keyCode <= 90) {\n          if (e.shiftKey) {\n            return String.fromCharCode(e.keyCode);\n          } else {\n            return String.fromCharCode(e.keyCode + 32);\n          }\n        } else if (e.keyCode >= 48 && e.keyCode <= 57) {\n          return String.fromCharCode(e.keyCode);\n        } else {\n          switch (e.keyCode) {\n            case 186:\n              return \";\";\n            case 187:\n              return \"=\";\n            case 188:\n              return \",\";\n            case 189:\n              return \"-\";\n            default:\n              return \"\";\n          }\n        }\n      } else {\n        return String.fromCharCode(e.keyCode);\n      }\n    };\n\n    TextInput.prototype.animateCursor = function(layer, cursor) {\n      var flashTime;\n      flashTime = 0;\n      return new Kinetic.Animation((function(_this) {\n        return function(frame) {\n          if (frame.time > (flashTime + 500)) {\n            flashTime = frame.time;\n            if (cursor.getOpacity() === 1) {\n              cursor.setOpacity(0);\n            } else {\n              cursor.setOpacity(1);\n            }\n            return layer.draw();\n          }\n        };\n      })(this), layer);\n    };\n\n    TextInput.prototype.render = function(context, layer) {\n      var cursor, cursorBlink, enterPressed, fsize, group, keyStream, text, textContent, textRect;\n      textRect = new Kinetic.Rect({\n        x: this.spec.x,\n        y: this.spec.y,\n        width: this.spec.width,\n        height: this.spec.height,\n        fill: this.spec.fill,\n        cornerRadius: 4,\n        lineJoin: \"round\",\n        stroke: this.spec.stroke,\n        strokeWidth: this.spec.strokeWidth\n      });\n      textContent = this.spec.content;\n      fsize = .85 * this.spec.height;\n      text = new Kinetic.Text({\n        text: this.spec.content,\n        x: this.spec.x + 2,\n        y: this.spec.y - 5,\n        height: this.spec.height,\n        fontSize: fsize,\n        fill: \"black\",\n        padding: 10,\n        align: \"left\"\n      });\n      cursor = new Kinetic.Rect({\n        x: text.getX() + text.getWidth() - 7,\n        y: this.spec.y + 5,\n        width: 1.5,\n        height: text.getHeight() - 10,\n        fill: \"black\"\n      });\n      enterPressed = false;\n      keyStream = context.keydownStream();\n      keyStream.takeWhile((function(_this) {\n        return function(x) {\n          return enterPressed === false && !_this.stopped;\n        };\n      })(this)).onValue((function(_this) {\n        return function(event) {\n          var char;\n          if (event.keyCode === 13) {\n            return enterPressed = true;\n          } else if (event.keyCode === 8) {\n            textContent = textContent.slice(0, -1);\n            text.setText(textContent);\n            cursor.setX(text.getX() + text.getWidth() - 7);\n            return layer.draw();\n          } else if (text.getWidth() > textRect.getWidth()) {\n\n          } else {\n            char = _this.getChar(event);\n            textContent += char;\n            text.setText(textContent);\n            cursor.setX(text.getX() + text.getWidth() - 7);\n            return layer.draw();\n          }\n        };\n      })(this));\n      cursorBlink = this.animateCursor(layer, cursor);\n      cursorBlink.start();\n      group = new Kinetic.Group({});\n      group.add(textRect);\n      group.add(cursor);\n      group.add(text);\n      return layer.add(group);\n    };\n\n    return TextInput;\n\n  })(KStimulus);\n\n  exports.TextInput = TextInput;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/text.js":{"id":109,"canonicalName":"lib/components/canvas/text.js","code":"(function () {\n    var KStimulus, Kinetic, Text, layout, _, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    layout = require('73', module);\n    Kinetic = require('15', module).Kinetic;\n    _ = require('16', module);\n    KStimulus = require('72', module).KineticStimulus;\n    Text = function (_super) {\n        __extends(Text, _super);\n        Text.prototype.defaults = {\n            content: 'Text',\n            x: 5,\n            y: 5,\n            width: null,\n            fill: 'black',\n            fontSize: 40,\n            fontFamily: 'Arial',\n            align: 'center',\n            position: null\n        };\n        function Text(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            if (spec.content != null && _.isArray(spec.content)) {\n                spec.content = spec.content.join(' \\n ');\n                if (spec.lineHeight == null) {\n                    spec.lineHeight = 2;\n                }\n            }\n            Text.__super__.constructor.call(this, spec);\n        }\n        Text.prototype.initialize = function () {\n            return this.text = new Kinetic.Text({\n                x: 0,\n                y: 0,\n                text: this.spec.content,\n                fontSize: this.spec.fontSize,\n                fontFamily: this.spec.fontFamily,\n                fill: this.spec.fill,\n                lineHeight: this.spec.lineHeight || 1,\n                width: this.spec.width,\n                listening: false,\n                align: this.spec.align\n            });\n        };\n        Text.prototype.render = function (context, layer) {\n            var coords;\n            coords = this.computeCoordinates(context, this.spec.position, this.text.getWidth(), this.text.getHeight());\n            this.text.setPosition({\n                x: coords[0],\n                y: coords[1]\n            });\n            return this.presentable(this.text);\n        };\n        return Text;\n    }(KStimulus);\n    exports.Text = Text;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/canvas/text.js\"],\"names\":[\"KStimulus\",\"Kinetic\",\"Text\",\"layout\",\"_\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"KineticStimulus\",\"_super\",\"defaults\",\"content\",\"x\",\"y\",\"width\",\"fill\",\"fontSize\",\"fontFamily\",\"align\",\"position\",\"spec\",\"isArray\",\"join\",\"lineHeight\",\"initialize\",\"text\",\"listening\",\"render\",\"context\",\"layer\",\"coords\",\"computeCoordinates\",\"getWidth\",\"getHeight\",\"setPosition\",\"presentable\",\"exports\"],\"mappings\":\"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\"}","lineCount":70,"mtime":1395245872000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/lib/layout.js","canonicalName":"lib/layout.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var KStimulus, Kinetic, Text, layout, _,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  layout = require(\"../../layout\");\n\n  Kinetic = require(\"../../../jslibs/kinetic\").Kinetic;\n\n  _ = require('lodash');\n\n  KStimulus = require(\"../../stimresp\").KineticStimulus;\n\n  Text = (function(_super) {\n    __extends(Text, _super);\n\n    Text.prototype.defaults = {\n      content: \"Text\",\n      x: 5,\n      y: 5,\n      width: null,\n      fill: \"black\",\n      fontSize: 40,\n      fontFamily: \"Arial\",\n      align: \"center\",\n      position: null\n    };\n\n    function Text(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      if ((spec.content != null) && _.isArray(spec.content)) {\n        spec.content = spec.content.join(' \\n ');\n        if (spec.lineHeight == null) {\n          spec.lineHeight = 2;\n        }\n      }\n      Text.__super__.constructor.call(this, spec);\n    }\n\n    Text.prototype.initialize = function() {\n      return this.text = new Kinetic.Text({\n        x: 0,\n        y: 0,\n        text: this.spec.content,\n        fontSize: this.spec.fontSize,\n        fontFamily: this.spec.fontFamily,\n        fill: this.spec.fill,\n        lineHeight: this.spec.lineHeight || 1,\n        width: this.spec.width,\n        listening: false,\n        align: this.spec.align\n      });\n    };\n\n    Text.prototype.render = function(context, layer) {\n      var coords;\n      coords = this.computeCoordinates(context, this.spec.position, this.text.getWidth(), this.text.getHeight());\n      this.text.setPosition({\n        x: coords[0],\n        y: coords[1]\n      });\n      return this.presentable(this.text);\n    };\n\n    return Text;\n\n  })(KStimulus);\n\n  exports.Text = Text;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/startbutton.js":{"id":108,"canonicalName":"lib/components/canvas/startbutton.js","code":"(function () {\n    var KStimulus, Kinetic, StartButton, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Kinetic = require('15', module).Kinetic;\n    KStimulus = require('72', module).KineticStimulus;\n    StartButton = function (_super) {\n        __extends(StartButton, _super);\n        function StartButton() {\n            return StartButton.__super__.constructor.apply(this, arguments);\n        }\n        StartButton.prototype.defaults = {\n            width: 150,\n            height: 75\n        };\n        StartButton.prototype.render = function (context) {\n            var button, group, text, xcenter, ycenter;\n            xcenter = context.width() / 2;\n            ycenter = context.height() / 2;\n            group = new Kinetic.Group({ id: this.spec.id });\n            text = new Kinetic.Text({\n                text: 'Start',\n                x: xcenter - this.spec.width / 2,\n                y: ycenter - this.spec.height / 2,\n                width: this.spec.width,\n                height: this.spec.height,\n                fontSize: 30,\n                fill: 'white',\n                fontFamily: 'Arial',\n                align: 'center',\n                padding: 20\n            });\n            button = new Kinetic.Rect({\n                x: xcenter - this.spec.width / 2,\n                y: ycenter - text.getHeight() / 2,\n                width: this.spec.width,\n                height: text.getHeight(),\n                fill: 'black',\n                cornerRadius: 10,\n                stroke: 'LightSteelBlue',\n                strokeWidth: 5\n            });\n            group.add(button);\n            group.add(text);\n            return this.presentable(group);\n        };\n        return StartButton;\n    }(KStimulus);\n    exports.StartButton = StartButton;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/canvas/startbutton.js\"],\"names\":[\"KStimulus\",\"Kinetic\",\"StartButton\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"KineticStimulus\",\"_super\",\"apply\",\"arguments\",\"defaults\",\"width\",\"height\",\"render\",\"context\",\"button\",\"group\",\"text\",\"xcenter\",\"ycenter\",\"Group\",\"id\",\"spec\",\"Text\",\"x\",\"y\",\"fontSize\",\"fill\",\"fontFamily\",\"align\",\"padding\",\"Rect\",\"getHeight\",\"cornerRadius\",\"stroke\",\"strokeWidth\",\"add\",\"presentable\",\"exports\"],\"mappings\":\"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\"}","lineCount":60,"mtime":1395245872000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var KStimulus, Kinetic, StartButton,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Kinetic = require(\"../../../jslibs/kinetic\").Kinetic;\n\n  KStimulus = require(\"../../stimresp\").KineticStimulus;\n\n  StartButton = (function(_super) {\n    __extends(StartButton, _super);\n\n    function StartButton() {\n      return StartButton.__super__.constructor.apply(this, arguments);\n    }\n\n    StartButton.prototype.defaults = {\n      width: 150,\n      height: 75\n    };\n\n    StartButton.prototype.render = function(context) {\n      var button, group, text, xcenter, ycenter;\n      xcenter = context.width() / 2;\n      ycenter = context.height() / 2;\n      group = new Kinetic.Group({\n        id: this.spec.id\n      });\n      text = new Kinetic.Text({\n        text: \"Start\",\n        x: xcenter - this.spec.width / 2,\n        y: ycenter - this.spec.height / 2,\n        width: this.spec.width,\n        height: this.spec.height,\n        fontSize: 30,\n        fill: \"white\",\n        fontFamily: \"Arial\",\n        align: \"center\",\n        padding: 20\n      });\n      button = new Kinetic.Rect({\n        x: xcenter - this.spec.width / 2,\n        y: ycenter - text.getHeight() / 2,\n        width: this.spec.width,\n        height: text.getHeight(),\n        fill: \"black\",\n        cornerRadius: 10,\n        stroke: \"LightSteelBlue\",\n        strokeWidth: 5\n      });\n      group.add(button);\n      group.add(text);\n      return this.presentable(group);\n    };\n\n    return StartButton;\n\n  })(KStimulus);\n\n  exports.StartButton = StartButton;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/rectangle.js":{"id":107,"canonicalName":"lib/components/canvas/rectangle.js","code":"(function () {\n    var KStimulus, Kinetic, Rectangle, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Kinetic = require('15', module).Kinetic;\n    KStimulus = require('72', module).KineticStimulus;\n    Rectangle = function (_super) {\n        __extends(Rectangle, _super);\n        Rectangle.prototype.defaults = {\n            x: 0,\n            y: 0,\n            width: 100,\n            height: 100,\n            opacity: 1,\n            fill: 'black'\n        };\n        function Rectangle(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            Rectangle.__super__.constructor.call(this, spec);\n        }\n        Rectangle.prototype.render = function (context) {\n            var coords, rect;\n            console.log('rendering rectangle');\n            coords = this.computeCoordinates(context, this.spec.position, this.spec.width, this.spec.height);\n            rect = new Kinetic.Rect({\n                x: coords[0],\n                y: coords[1],\n                width: this.spec.width,\n                height: this.spec.height,\n                fill: this.spec.fill,\n                stroke: this.spec.stroke,\n                strokeWidth: this.spec.strokeWidth,\n                opacity: this.spec.opacity\n            });\n            return this.presentable(rect);\n        };\n        return Rectangle;\n    }(KStimulus);\n    exports.Rectangle = Rectangle;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/canvas/rectangle.js\"],\"names\":[\"KStimulus\",\"Kinetic\",\"Rectangle\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"KineticStimulus\",\"_super\",\"defaults\",\"x\",\"y\",\"width\",\"height\",\"opacity\",\"fill\",\"spec\",\"render\",\"context\",\"coords\",\"rect\",\"console\",\"log\",\"computeCoordinates\",\"position\",\"Rect\",\"stroke\",\"strokeWidth\",\"presentable\",\"exports\"],\"mappings\":\"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\"}","lineCount":52,"mtime":1395245872000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var KStimulus, Kinetic, Rectangle,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Kinetic = require(\"../../../jslibs/kinetic\").Kinetic;\n\n  KStimulus = require(\"../../stimresp\").KineticStimulus;\n\n  Rectangle = (function(_super) {\n    __extends(Rectangle, _super);\n\n    Rectangle.prototype.defaults = {\n      x: 0,\n      y: 0,\n      width: 100,\n      height: 100,\n      opacity: 1,\n      fill: \"black\"\n    };\n\n    function Rectangle(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      Rectangle.__super__.constructor.call(this, spec);\n    }\n\n    Rectangle.prototype.render = function(context) {\n      var coords, rect;\n      console.log(\"rendering rectangle\");\n      coords = this.computeCoordinates(context, this.spec.position, this.spec.width, this.spec.height);\n      rect = new Kinetic.Rect({\n        x: coords[0],\n        y: coords[1],\n        width: this.spec.width,\n        height: this.spec.height,\n        fill: this.spec.fill,\n        stroke: this.spec.stroke,\n        strokeWidth: this.spec.strokeWidth,\n        opacity: this.spec.opacity\n      });\n      return this.presentable(rect);\n    };\n\n    return Rectangle;\n\n  })(KStimulus);\n\n  exports.Rectangle = Rectangle;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/picture.js":{"id":106,"canonicalName":"lib/components/canvas/picture.js","code":"(function () {\n    var KStimulus, Kinetic, Picture, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Kinetic = require('15', module).Kinetic;\n    KStimulus = require('72', module).KineticStimulus;\n    Picture = function (_super) {\n        __extends(Picture, _super);\n        Picture.prototype.defaults = {\n            url: 'http://www.html5canvastutorials.com/demos/assets/yoda.jpg',\n            x: 0,\n            y: 0\n        };\n        function Picture(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            Picture.__super__.constructor.call(this, spec);\n            this.imageObj = new Image();\n            this.image = null;\n            this.imageObj.onload = function (_this) {\n                return function () {\n                    return _this.image = new Kinetic.Image({\n                        x: _this.spec.x,\n                        y: _this.spec.y,\n                        image: _this.imageObj,\n                        width: _this.spec.width || _this.imageObj.width,\n                        height: _this.spec.height || _this.imageObj.height\n                    });\n                };\n            }(this);\n            this.imageObj.src = this.spec.url;\n        }\n        Picture.prototype.render = function (context) {\n            return this.presentable(this.image);\n        };\n        return Picture;\n    }(KStimulus);\n    exports.Picture = Picture;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/canvas/picture.js\"],\"names\":[\"KStimulus\",\"Kinetic\",\"Picture\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"KineticStimulus\",\"_super\",\"defaults\",\"url\",\"x\",\"y\",\"spec\",\"imageObj\",\"Image\",\"image\",\"onload\",\"_this\",\"width\",\"height\",\"src\",\"render\",\"context\",\"presentable\",\"exports\"],\"mappings\":\"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\"}","lineCount":50,"mtime":1395245872000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var KStimulus, Kinetic, Picture,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Kinetic = require(\"../../../jslibs/kinetic\").Kinetic;\n\n  KStimulus = require(\"../../stimresp\").KineticStimulus;\n\n  Picture = (function(_super) {\n    __extends(Picture, _super);\n\n    Picture.prototype.defaults = {\n      url: \"http://www.html5canvastutorials.com/demos/assets/yoda.jpg\",\n      x: 0,\n      y: 0\n    };\n\n    function Picture(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      Picture.__super__.constructor.call(this, spec);\n      this.imageObj = new Image();\n      this.image = null;\n      this.imageObj.onload = (function(_this) {\n        return function() {\n          return _this.image = new Kinetic.Image({\n            x: _this.spec.x,\n            y: _this.spec.y,\n            image: _this.imageObj,\n            width: _this.spec.width || _this.imageObj.width,\n            height: _this.spec.height || _this.imageObj.height\n          });\n        };\n      })(this);\n      this.imageObj.src = this.spec.url;\n    }\n\n    Picture.prototype.render = function(context) {\n      return this.presentable(this.image);\n    };\n\n    return Picture;\n\n  })(KStimulus);\n\n  exports.Picture = Picture;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/gridlines.js":{"id":105,"canonicalName":"lib/components/canvas/gridlines.js","code":"(function () {\n    var GridLines, KStimulus, Kinetic, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Kinetic = require('15', module).Kinetic;\n    KStimulus = require('72', module).KineticStimulus;\n    GridLines = function (_super) {\n        __extends(GridLines, _super);\n        GridLines.prototype.defaults = {\n            x: 0,\n            y: 0,\n            width: null,\n            height: null,\n            rows: 3,\n            cols: 3,\n            stroke: 'black',\n            strokeWidth: 2,\n            dashArray: null\n        };\n        function GridLines(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            GridLines.__super__.constructor.call(this, spec);\n        }\n        GridLines.prototype.render = function (context) {\n            var group, height, i, line, width, x, y, _i, _j, _ref, _ref1;\n            if (this.spec.height == null) {\n                height = context.height();\n            } else {\n                height = this.spec.height;\n            }\n            if (this.spec.width == null) {\n                width = context.width();\n            } else {\n                width = this.spec.width;\n            }\n            group = new Kinetic.Group();\n            for (i = _i = 0, _ref = this.spec.rows; 0 <= _ref ? _i <= _ref : _i >= _ref; i = 0 <= _ref ? ++_i : --_i) {\n                y = this.spec.y + i * height / this.spec.rows;\n                line = new Kinetic.Line({\n                    points: [\n                        this.spec.x,\n                        y,\n                        this.spec.x + width,\n                        y\n                    ],\n                    stroke: this.spec.stroke,\n                    strokeWidth: this.spec.strokeWidth,\n                    dashArray: this.spec.dashArray\n                });\n                group.add(line);\n            }\n            for (i = _j = 0, _ref1 = this.spec.cols; 0 <= _ref1 ? _j <= _ref1 : _j >= _ref1; i = 0 <= _ref1 ? ++_j : --_j) {\n                x = this.spec.x + i * width / this.spec.cols;\n                line = new Kinetic.Line({\n                    points: [\n                        x,\n                        this.spec.y,\n                        x,\n                        this.spec.y + height\n                    ],\n                    stroke: this.spec.stroke,\n                    strokeWidth: this.spec.strokeWidth,\n                    dashArray: this.spec.dashArray\n                });\n                group.add(line);\n            }\n            return this.presentable(group);\n        };\n        return GridLines;\n    }(KStimulus);\n    exports.GridLines = GridLines;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/canvas/gridlines.js\"],\"names\":[\"GridLines\",\"KStimulus\",\"Kinetic\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"KineticStimulus\",\"_super\",\"defaults\",\"x\",\"y\",\"width\",\"height\",\"rows\",\"cols\",\"stroke\",\"strokeWidth\",\"dashArray\",\"spec\",\"render\",\"context\",\"group\",\"i\",\"line\",\"_i\",\"_j\",\"_ref\",\"_ref1\",\"Group\",\"Line\",\"points\",\"add\",\"presentable\",\"exports\"],\"mappings\":\"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\"}","lineCount":84,"mtime":1395245872000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var GridLines, KStimulus, Kinetic,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Kinetic = require(\"../../../jslibs/kinetic\").Kinetic;\n\n  KStimulus = require(\"../../stimresp\").KineticStimulus;\n\n  GridLines = (function(_super) {\n    __extends(GridLines, _super);\n\n    GridLines.prototype.defaults = {\n      x: 0,\n      y: 0,\n      width: null,\n      height: null,\n      rows: 3,\n      cols: 3,\n      stroke: \"black\",\n      strokeWidth: 2,\n      dashArray: null\n    };\n\n    function GridLines(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      GridLines.__super__.constructor.call(this, spec);\n    }\n\n    GridLines.prototype.render = function(context) {\n      var group, height, i, line, width, x, y, _i, _j, _ref, _ref1;\n      if (this.spec.height == null) {\n        height = context.height();\n      } else {\n        height = this.spec.height;\n      }\n      if (this.spec.width == null) {\n        width = context.width();\n      } else {\n        width = this.spec.width;\n      }\n      group = new Kinetic.Group();\n      for (i = _i = 0, _ref = this.spec.rows; 0 <= _ref ? _i <= _ref : _i >= _ref; i = 0 <= _ref ? ++_i : --_i) {\n        y = this.spec.y + (i * height / this.spec.rows);\n        line = new Kinetic.Line({\n          points: [this.spec.x, y, this.spec.x + width, y],\n          stroke: this.spec.stroke,\n          strokeWidth: this.spec.strokeWidth,\n          dashArray: this.spec.dashArray\n        });\n        group.add(line);\n      }\n      for (i = _j = 0, _ref1 = this.spec.cols; 0 <= _ref1 ? _j <= _ref1 : _j >= _ref1; i = 0 <= _ref1 ? ++_j : --_j) {\n        x = this.spec.x + (i * width / this.spec.cols);\n        line = new Kinetic.Line({\n          points: [x, this.spec.y, x, this.spec.y + height],\n          stroke: this.spec.stroke,\n          strokeWidth: this.spec.strokeWidth,\n          dashArray: this.spec.dashArray\n        });\n        group.add(line);\n      }\n      return this.presentable(group);\n    };\n\n    return GridLines;\n\n  })(KStimulus);\n\n  exports.GridLines = GridLines;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/canvasborder.js":{"id":104,"canonicalName":"lib/components/canvas/canvasborder.js","code":"(function () {\n    var CanvasBorder, KStimulus, Kinetic, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Kinetic = require('15', module).Kinetic;\n    KStimulus = require('72', module).KineticStimulus;\n    CanvasBorder = function (_super) {\n        __extends(CanvasBorder, _super);\n        CanvasBorder.prototype.defaults = {\n            strokeWidth: 5,\n            stroke: 'black'\n        };\n        function CanvasBorder(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            CanvasBorder.__super__.constructor.call(this, spec);\n        }\n        CanvasBorder.prototype.render = function (context) {\n            var border;\n            border = new Kinetic.Rect({\n                x: 0,\n                y: 0,\n                width: context.width(),\n                height: context.height(),\n                strokeWidth: this.spec.strokeWidth,\n                stroke: this.spec.stroke\n            });\n            return this.presentable(border);\n        };\n        return CanvasBorder;\n    }(KStimulus);\n    exports.CanvasBorder = CanvasBorder;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/canvas/canvasborder.js\"],\"names\":[\"CanvasBorder\",\"KStimulus\",\"Kinetic\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"KineticStimulus\",\"_super\",\"defaults\",\"strokeWidth\",\"stroke\",\"spec\",\"render\",\"context\",\"border\",\"Rect\",\"x\",\"y\",\"width\",\"height\",\"presentable\",\"exports\"],\"mappings\":\"AAAA,CAAC,YAAW;AAAA,IACV,IAAIA,YAAJ,EAAkBC,SAAlB,EAA6BC,OAA7B,EACEC,SAAA,GAAY,GAAGC,cADjB,EAEEC,SAAA,GAAY,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAA,YAAE,SAASC,GAAT,IAAgBD,MAAhB,EAAwB;AAAA,gBAAE,IAAIJ,SAAA,CAAUM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ;AAAA,oBAAiCF,KAAA,CAAME,GAAN,IAAaD,MAAA,CAAOC,GAAP,CAAb,CAAnC;AAAA,aAA1B;AAAA,YAAyF,SAASE,IAAT,GAAgB;AAAA,gBAAE,KAAKC,WAAL,GAAmBL,KAAnB,CAAF;AAAA,aAAzG;AAAA,YAAuII,IAAA,CAAKE,SAAL,GAAiBL,MAAA,CAAOK,SAAxB,CAAvI;AAAA,YAA0KN,KAAA,CAAMM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA1K;AAAA,YAAwMJ,KAAA,CAAMO,SAAN,GAAkBN,MAAA,CAAOK,SAAzB,CAAxM;AAAA,YAA4O,OAAON,KAAP,CAA5O;AAAA,SAFtC,CADU;AAAA,IAKVJ,OAAA,GAAUY,OAAA,C,IAAA,E,MAAA,EAAmCZ,OAA7C,CALU;AAAA,IAOVD,SAAA,GAAYa,OAAA,C,IAAA,E,MAAA,EAA0BC,eAAtC,CAPU;AAAA,IASVf,YAAA,GAAgB,UAASgB,MAAT,EAAiB;AAAA,QAC/BX,SAAA,CAAUL,YAAV,EAAwBgB,MAAxB,EAD+B;AAAA,QAG/BhB,YAAA,CAAaY,SAAb,CAAuBK,QAAvB,GAAkC;AAAA,YAChCC,WAAA,EAAa,CADmB;AAAA,YAEhCC,MAAA,EAAQ,OAFwB;AAAA,SAAlC,CAH+B;AAAA,QAQ/B,SAASnB,YAAT,CAAsBoB,IAAtB,EAA4B;AAAA,YAC1B,IAAIA,IAAA,IAAQ,IAAZ,EAAkB;AAAA,gBAChBA,IAAA,GAAO,EAAP,CADgB;AAAA,aADQ;AAAA,YAI1BpB,YAAA,CAAaa,SAAb,CAAuBF,WAAvB,CAAmCF,IAAnC,CAAwC,IAAxC,EAA8CW,IAA9C,EAJ0B;AAAA,SARG;AAAA,QAe/BpB,YAAA,CAAaY,SAAb,CAAuBS,MAAvB,GAAgC,UAASC,OAAT,EAAkB;AAAA,YAChD,IAAIC,MAAJ,CADgD;AAAA,YAEhDA,MAAA,GAAS,IAAIrB,OAAA,CAAQsB,IAAZ,CAAiB;AAAA,gBACxBC,CAAA,EAAG,CADqB;AAAA,gBAExBC,CAAA,EAAG,CAFqB;AAAA,gBAGxBC,KAAA,EAAOL,OAAA,CAAQK,KAAR,EAHiB;AAAA,gBAIxBC,MAAA,EAAQN,OAAA,CAAQM,MAAR,EAJgB;AAAA,gBAKxBV,WAAA,EAAa,KAAKE,IAAL,CAAUF,WALC;AAAA,gBAMxBC,MAAA,EAAQ,KAAKC,IAAL,CAAUD,MANM;AAAA,aAAjB,CAAT,CAFgD;AAAA,YAUhD,OAAO,KAAKU,WAAL,CAAiBN,MAAjB,CAAP,CAVgD;AAAA,SAAlD,CAf+B;AAAA,QA4B/B,OAAOvB,YAAP,CA5B+B;AAAA,KAAlB,CA8BZC,SA9BY,CAAf,CATU;AAAA,IAyCV6B,OAAA,CAAQ9B,YAAR,GAAuBA,YAAvB,CAzCU;AAAA,CAAZ,CA2CGS,IA3CH,CA2CQ,IA3CR\"}","lineCount":44,"mtime":1395245872000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var CanvasBorder, KStimulus, Kinetic,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Kinetic = require(\"../../../jslibs/kinetic\").Kinetic;\n\n  KStimulus = require(\"../../stimresp\").KineticStimulus;\n\n  CanvasBorder = (function(_super) {\n    __extends(CanvasBorder, _super);\n\n    CanvasBorder.prototype.defaults = {\n      strokeWidth: 5,\n      stroke: \"black\"\n    };\n\n    function CanvasBorder(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      CanvasBorder.__super__.constructor.call(this, spec);\n    }\n\n    CanvasBorder.prototype.render = function(context) {\n      var border;\n      border = new Kinetic.Rect({\n        x: 0,\n        y: 0,\n        width: context.width(),\n        height: context.height(),\n        strokeWidth: this.spec.strokeWidth,\n        stroke: this.spec.stroke\n      });\n      return this.presentable(border);\n    };\n\n    return CanvasBorder;\n\n  })(KStimulus);\n\n  exports.CanvasBorder = CanvasBorder;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/fixationcross.js":{"id":103,"canonicalName":"lib/components/canvas/fixationcross.js","code":"(function () {\n    var FixationCross, KStimulus, Kinetic, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Kinetic = require('15', module).Kinetic;\n    KStimulus = require('72', module).KineticStimulus;\n    FixationCross = function (_super) {\n        __extends(FixationCross, _super);\n        FixationCross.prototype.defaults = {\n            strokeWidth: 8,\n            length: 150,\n            fill: 'black'\n        };\n        function FixationCross(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            FixationCross.__super__.constructor.call(this, spec);\n        }\n        FixationCross.prototype.render = function (context) {\n            var group, horz, len, vert, x, y;\n            x = context.width() / 2;\n            y = context.height() / 2;\n            len = this.toPixels(this.spec.length, context.width());\n            console.log('FIX len is', len);\n            horz = new Kinetic.Rect({\n                x: x - len / 2,\n                y: y,\n                width: len,\n                height: this.spec.strokeWidth,\n                fill: this.spec.fill\n            });\n            vert = new Kinetic.Rect({\n                x: x - this.spec.strokeWidth / 2,\n                y: y - len / 2 + this.spec.strokeWidth / 2,\n                width: this.spec.strokeWidth,\n                height: len,\n                fill: this.spec.fill\n            });\n            group = new Kinetic.Group();\n            group.add(horz);\n            group.add(vert);\n            return this.presentable(group);\n        };\n        return FixationCross;\n    }(KStimulus);\n    exports.FixationCross = FixationCross;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/canvas/fixationcross.js\"],\"names\":[\"FixationCross\",\"KStimulus\",\"Kinetic\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"KineticStimulus\",\"_super\",\"defaults\",\"strokeWidth\",\"length\",\"fill\",\"spec\",\"render\",\"context\",\"group\",\"horz\",\"len\",\"vert\",\"x\",\"y\",\"width\",\"height\",\"toPixels\",\"console\",\"log\",\"Rect\",\"Group\",\"add\",\"presentable\",\"exports\"],\"mappings\":\"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\"}","lineCount":58,"mtime":1395245872000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var FixationCross, KStimulus, Kinetic,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Kinetic = require(\"../../../jslibs/kinetic\").Kinetic;\n\n  KStimulus = require(\"../../stimresp\").KineticStimulus;\n\n  FixationCross = (function(_super) {\n    __extends(FixationCross, _super);\n\n    FixationCross.prototype.defaults = {\n      strokeWidth: 8,\n      length: 150,\n      fill: 'black'\n    };\n\n    function FixationCross(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      FixationCross.__super__.constructor.call(this, spec);\n    }\n\n    FixationCross.prototype.render = function(context) {\n      var group, horz, len, vert, x, y;\n      x = context.width() / 2;\n      y = context.height() / 2;\n      len = this.toPixels(this.spec.length, context.width());\n      console.log(\"FIX len is\", len);\n      horz = new Kinetic.Rect({\n        x: x - len / 2,\n        y: y,\n        width: len,\n        height: this.spec.strokeWidth,\n        fill: this.spec.fill\n      });\n      vert = new Kinetic.Rect({\n        x: x - this.spec.strokeWidth / 2,\n        y: y - len / 2 + this.spec.strokeWidth / 2,\n        width: this.spec.strokeWidth,\n        height: len,\n        fill: this.spec.fill\n      });\n      group = new Kinetic.Group();\n      group.add(horz);\n      group.add(vert);\n      return this.presentable(group);\n    };\n\n    return FixationCross;\n\n  })(KStimulus);\n\n  exports.FixationCross = FixationCross;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/clear.js":{"id":102,"canonicalName":"lib/components/canvas/clear.js","code":"(function () {\n    var ActionPresentable, Clear, GStimulus, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    GStimulus = require('72', module).GraphicalStimulus;\n    ActionPresentable = require('72', module).ActionPresentable;\n    Clear = function (_super) {\n        __extends(Clear, _super);\n        function Clear() {\n            return Clear.__super__.constructor.apply(this, arguments);\n        }\n        Clear.prototype.render = function (context) {\n            return new ActionPresentable(function (context) {\n                return context.clearContent(true);\n            });\n        };\n        return Clear;\n    }(GStimulus);\n    exports.Clear = Clear;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/canvas/clear.js\"],\"names\":[\"ActionPresentable\",\"Clear\",\"GStimulus\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"GraphicalStimulus\",\"_super\",\"apply\",\"arguments\",\"render\",\"context\",\"clearContent\",\"exports\"],\"mappings\":\"AAAA,CAAC,YAAW;AAAA,IACV,IAAIA,iBAAJ,EAAuBC,KAAvB,EAA8BC,SAA9B,EACEC,SAAA,GAAY,GAAGC,cADjB,EAEEC,SAAA,GAAY,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAA,YAAE,SAASC,GAAT,IAAgBD,MAAhB,EAAwB;AAAA,gBAAE,IAAIJ,SAAA,CAAUM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ;AAAA,oBAAiCF,KAAA,CAAME,GAAN,IAAaD,MAAA,CAAOC,GAAP,CAAb,CAAnC;AAAA,aAA1B;AAAA,YAAyF,SAASE,IAAT,GAAgB;AAAA,gBAAE,KAAKC,WAAL,GAAmBL,KAAnB,CAAF;AAAA,aAAzG;AAAA,YAAuII,IAAA,CAAKE,SAAL,GAAiBL,MAAA,CAAOK,SAAxB,CAAvI;AAAA,YAA0KN,KAAA,CAAMM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA1K;AAAA,YAAwMJ,KAAA,CAAMO,SAAN,GAAkBN,MAAA,CAAOK,SAAzB,CAAxM;AAAA,YAA4O,OAAON,KAAP,CAA5O;AAAA,SAFtC,CADU;AAAA,IAKVJ,SAAA,GAAYY,OAAA,C,IAAA,E,MAAA,EAA0BC,iBAAtC,CALU;AAAA,IAOVf,iBAAA,GAAoBc,OAAA,C,IAAA,E,MAAA,EAA0Bd,iBAA9C,CAPU;AAAA,IASVC,KAAA,GAAS,UAASe,MAAT,EAAiB;AAAA,QACxBX,SAAA,CAAUJ,KAAV,EAAiBe,MAAjB,EADwB;AAAA,QAGxB,SAASf,KAAT,GAAiB;AAAA,YACf,OAAOA,KAAA,CAAMY,SAAN,CAAgBF,WAAhB,CAA4BM,KAA5B,CAAkC,IAAlC,EAAwCC,SAAxC,CAAP,CADe;AAAA,SAHO;AAAA,QAOxBjB,KAAA,CAAMW,SAAN,CAAgBO,MAAhB,GAAyB,UAASC,OAAT,EAAkB;AAAA,YACzC,OAAO,IAAIpB,iBAAJ,CAAsB,UAASoB,OAAT,EAAkB;AAAA,gBAC7C,OAAOA,OAAA,CAAQC,YAAR,CAAqB,IAArB,CAAP,CAD6C;AAAA,aAAxC,CAAP,CADyC;AAAA,SAA3C,CAPwB;AAAA,QAaxB,OAAOpB,KAAP,CAbwB;AAAA,KAAlB,CAeLC,SAfK,CAAR,CATU;AAAA,IA0BVoB,OAAA,CAAQrB,KAAR,GAAgBA,KAAhB,CA1BU;AAAA,CAAZ,CA4BGQ,IA5BH,CA4BQ,IA5BR\"}","lineCount":30,"mtime":1395245872000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var ActionPresentable, Clear, GStimulus,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  GStimulus = require(\"../../stimresp\").GraphicalStimulus;\n\n  ActionPresentable = require(\"../../stimresp\").ActionPresentable;\n\n  Clear = (function(_super) {\n    __extends(Clear, _super);\n\n    function Clear() {\n      return Clear.__super__.constructor.apply(this, arguments);\n    }\n\n    Clear.prototype.render = function(context) {\n      return new ActionPresentable(function(context) {\n        return context.clearContent(true);\n      });\n    };\n\n    return Clear;\n\n  })(GStimulus);\n\n  exports.Clear = Clear;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/circle.js":{"id":101,"canonicalName":"lib/components/canvas/circle.js","code":"(function () {\n    var Circle, KDrawable, KStimulus, Kinetic, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Kinetic = require('15', module).Kinetic;\n    KStimulus = require('72', module).KineticStimulus;\n    KDrawable = require('72', module).KineticDrawable;\n    Circle = function (_super) {\n        __extends(Circle, _super);\n        Circle.prototype.defaults = {\n            x: 50,\n            y: 50,\n            radius: 50,\n            fill: 'red',\n            opacity: 1,\n            origin: 'center'\n        };\n        function Circle(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            Circle.__super__.constructor.call(this, spec);\n        }\n        Circle.prototype.initialize = function () {\n            return this.circle = new Kinetic.Circle({\n                x: this.spec.x,\n                y: this.spec.y,\n                radius: this.spec.radius,\n                fill: this.spec.fill,\n                stroke: this.spec.stroke,\n                strokeWidth: this.spec.strokeWidth,\n                opacity: this.spec.opacity\n            });\n        };\n        Circle.prototype.render = function (context) {\n            var coords;\n            coords = this.computeCoordinates(context, this.spec.position, this.circle.getWidth(), this.circle.getHeight());\n            this.circle.setPosition({\n                x: coords[0] + this.circle.getWidth() / 2,\n                y: coords[1] + this.circle.getHeight() / 2\n            });\n            return new (function (_super1) {\n                __extends(_Class, _super1);\n                function _Class() {\n                    return _Class.__super__.constructor.apply(this, arguments);\n                }\n                _Class.prototype.x = function () {\n                    return this.nodes[0].getX() - this.nodes[0].getWidth() / 2;\n                };\n                _Class.prototype.y = function () {\n                    return this.nodes[0].getY() - this.nodes[0].getHeight() / 2;\n                };\n                _Class.prototype.width = function () {\n                    return this.nodes[0].getWidth();\n                };\n                _Class.prototype.height = function () {\n                    return this.nodes[0].getHeight();\n                };\n                return _Class;\n            }(KDrawable))(this.circle);\n        };\n        return Circle;\n    }(KStimulus);\n    exports.Circle = Circle;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/canvas/circle.js\"],\"names\":[\"Circle\",\"KDrawable\",\"KStimulus\",\"Kinetic\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"KineticStimulus\",\"KineticDrawable\",\"_super\",\"defaults\",\"x\",\"y\",\"radius\",\"fill\",\"opacity\",\"origin\",\"spec\",\"initialize\",\"circle\",\"stroke\",\"strokeWidth\",\"render\",\"context\",\"coords\",\"computeCoordinates\",\"position\",\"getWidth\",\"getHeight\",\"setPosition\",\"_super1\",\"_Class\",\"apply\",\"arguments\",\"nodes\",\"getX\",\"getY\",\"width\",\"height\",\"exports\"],\"mappings\":\"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\"}","lineCount":75,"mtime":1395245872000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var Circle, KDrawable, KStimulus, Kinetic,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Kinetic = require(\"../../../jslibs/kinetic\").Kinetic;\n\n  KStimulus = require(\"../../stimresp\").KineticStimulus;\n\n  KDrawable = require(\"../../stimresp\").KineticDrawable;\n\n  Circle = (function(_super) {\n    __extends(Circle, _super);\n\n    Circle.prototype.defaults = {\n      x: 50,\n      y: 50,\n      radius: 50,\n      fill: 'red',\n      opacity: 1,\n      origin: \"center\"\n    };\n\n    function Circle(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      Circle.__super__.constructor.call(this, spec);\n    }\n\n    Circle.prototype.initialize = function() {\n      return this.circle = new Kinetic.Circle({\n        x: this.spec.x,\n        y: this.spec.y,\n        radius: this.spec.radius,\n        fill: this.spec.fill,\n        stroke: this.spec.stroke,\n        strokeWidth: this.spec.strokeWidth,\n        opacity: this.spec.opacity\n      });\n    };\n\n    Circle.prototype.render = function(context) {\n      var coords;\n      coords = this.computeCoordinates(context, this.spec.position, this.circle.getWidth(), this.circle.getHeight());\n      this.circle.setPosition({\n        x: coords[0] + this.circle.getWidth() / 2,\n        y: coords[1] + this.circle.getHeight() / 2\n      });\n      return new ((function(_super1) {\n        __extends(_Class, _super1);\n\n        function _Class() {\n          return _Class.__super__.constructor.apply(this, arguments);\n        }\n\n        _Class.prototype.x = function() {\n          return this.nodes[0].getX() - this.nodes[0].getWidth() / 2;\n        };\n\n        _Class.prototype.y = function() {\n          return this.nodes[0].getY() - this.nodes[0].getHeight() / 2;\n        };\n\n        _Class.prototype.width = function() {\n          return this.nodes[0].getWidth();\n        };\n\n        _Class.prototype.height = function() {\n          return this.nodes[0].getHeight();\n        };\n\n        return _Class;\n\n      })(KDrawable))(this.circle);\n    };\n\n    return Circle;\n\n  })(KStimulus);\n\n  exports.Circle = Circle;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/blank.js":{"id":100,"canonicalName":"lib/components/canvas/blank.js","code":"(function () {\n    var Blank, KStimulus, Kinetic, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Kinetic = require('15', module).Kinetic;\n    KStimulus = require('72', module).KineticStimulus;\n    Blank = function (_super) {\n        __extends(Blank, _super);\n        function Blank() {\n            return Blank.__super__.constructor.apply(this, arguments);\n        }\n        Blank.prototype.defaults = {\n            fill: 'white',\n            opacity: 1\n        };\n        Blank.prototype.render = function (context) {\n            var blank;\n            blank = new Kinetic.Rect({\n                x: 0,\n                y: 0,\n                width: context.width(),\n                height: context.height(),\n                fill: this.spec.fill,\n                opacity: this.spec.opacity\n            });\n            return this.presentable(blank);\n        };\n        return Blank;\n    }(KStimulus);\n    exports.Blank = Blank;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/canvas/blank.js\"],\"names\":[\"Blank\",\"KStimulus\",\"Kinetic\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"KineticStimulus\",\"_super\",\"apply\",\"arguments\",\"defaults\",\"fill\",\"opacity\",\"render\",\"context\",\"blank\",\"Rect\",\"x\",\"y\",\"width\",\"height\",\"spec\",\"presentable\",\"exports\"],\"mappings\":\"AAAA,CAAC,YAAW;AAAA,IACV,IAAIA,KAAJ,EAAWC,SAAX,EAAsBC,OAAtB,EACEC,SAAA,GAAY,GAAGC,cADjB,EAEEC,SAAA,GAAY,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAAA,YAAE,SAASC,GAAT,IAAgBD,MAAhB,EAAwB;AAAA,gBAAE,IAAIJ,SAAA,CAAUM,IAAV,CAAeF,MAAf,EAAuBC,GAAvB,CAAJ;AAAA,oBAAiCF,KAAA,CAAME,GAAN,IAAaD,MAAA,CAAOC,GAAP,CAAb,CAAnC;AAAA,aAA1B;AAAA,YAAyF,SAASE,IAAT,GAAgB;AAAA,gBAAE,KAAKC,WAAL,GAAmBL,KAAnB,CAAF;AAAA,aAAzG;AAAA,YAAuII,IAAA,CAAKE,SAAL,GAAiBL,MAAA,CAAOK,SAAxB,CAAvI;AAAA,YAA0KN,KAAA,CAAMM,SAAN,GAAkB,IAAIF,IAAJ,EAAlB,CAA1K;AAAA,YAAwMJ,KAAA,CAAMO,SAAN,GAAkBN,MAAA,CAAOK,SAAzB,CAAxM;AAAA,YAA4O,OAAON,KAAP,CAA5O;AAAA,SAFtC,CADU;AAAA,IAKVJ,OAAA,GAAUY,OAAA,C,IAAA,E,MAAA,EAAmCZ,OAA7C,CALU;AAAA,IAOVD,SAAA,GAAYa,OAAA,C,IAAA,E,MAAA,EAA0BC,eAAtC,CAPU;AAAA,IASVf,KAAA,GAAS,UAASgB,MAAT,EAAiB;AAAA,QACxBX,SAAA,CAAUL,KAAV,EAAiBgB,MAAjB,EADwB;AAAA,QAGxB,SAAShB,KAAT,GAAiB;AAAA,YACf,OAAOA,KAAA,CAAMa,SAAN,CAAgBF,WAAhB,CAA4BM,KAA5B,CAAkC,IAAlC,EAAwCC,SAAxC,CAAP,CADe;AAAA,SAHO;AAAA,QAOxBlB,KAAA,CAAMY,SAAN,CAAgBO,QAAhB,GAA2B;AAAA,YACzBC,IAAA,EAAM,OADmB;AAAA,YAEzBC,OAAA,EAAS,CAFgB;AAAA,SAA3B,CAPwB;AAAA,QAYxBrB,KAAA,CAAMY,SAAN,CAAgBU,MAAhB,GAAyB,UAASC,OAAT,EAAkB;AAAA,YACzC,IAAIC,KAAJ,CADyC;AAAA,YAEzCA,KAAA,GAAQ,IAAItB,OAAA,CAAQuB,IAAZ,CAAiB;AAAA,gBACvBC,CAAA,EAAG,CADoB;AAAA,gBAEvBC,CAAA,EAAG,CAFoB;AAAA,gBAGvBC,KAAA,EAAOL,OAAA,CAAQK,KAAR,EAHgB;AAAA,gBAIvBC,MAAA,EAAQN,OAAA,CAAQM,MAAR,EAJe;AAAA,gBAKvBT,IAAA,EAAM,KAAKU,IAAL,CAAUV,IALO;AAAA,gBAMvBC,OAAA,EAAS,KAAKS,IAAL,CAAUT,OANI;AAAA,aAAjB,CAAR,CAFyC;AAAA,YAUzC,OAAO,KAAKU,WAAL,CAAiBP,KAAjB,CAAP,CAVyC;AAAA,SAA3C,CAZwB;AAAA,QAyBxB,OAAOxB,KAAP,CAzBwB;AAAA,KAAlB,CA2BLC,SA3BK,CAAR,CATU;AAAA,IAsCV+B,OAAA,CAAQhC,KAAR,GAAgBA,KAAhB,CAtCU;AAAA,CAAZ,CAwCGS,IAxCH,CAwCQ,IAxCR\"}","lineCount":41,"mtime":1395245872000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var Blank, KStimulus, Kinetic,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Kinetic = require(\"../../../jslibs/kinetic\").Kinetic;\n\n  KStimulus = require(\"../../stimresp\").KineticStimulus;\n\n  Blank = (function(_super) {\n    __extends(Blank, _super);\n\n    function Blank() {\n      return Blank.__super__.constructor.apply(this, arguments);\n    }\n\n    Blank.prototype.defaults = {\n      fill: \"white\",\n      opacity: 1\n    };\n\n    Blank.prototype.render = function(context) {\n      var blank;\n      blank = new Kinetic.Rect({\n        x: 0,\n        y: 0,\n        width: context.width(),\n        height: context.height(),\n        fill: this.spec.fill,\n        opacity: this.spec.opacity\n      });\n      return this.presentable(blank);\n    };\n\n    return Blank;\n\n  })(KStimulus);\n\n  exports.Blank = Blank;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/arrow.js":{"id":99,"canonicalName":"lib/components/canvas/arrow.js","code":"(function () {\n    var Arrow, KStimulus, Kinetic, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    KStimulus = require('72', module).KineticStimulus;\n    Kinetic = require('15', module).Kinetic;\n    Arrow = function (_super) {\n        __extends(Arrow, _super);\n        Arrow.prototype.defaults = {\n            x: 100,\n            y: 100,\n            length: 100,\n            direction: 'right',\n            thickness: 40,\n            fill: 'black',\n            arrowSize: 25,\n            angle: null\n        };\n        function Arrow(spec) {\n            if (spec == null) {\n                spec = {};\n            }\n            Arrow.__super__.constructor.call(this, spec);\n        }\n        Arrow.prototype.initialize = function () {\n            var height, len, shaftLength, _this;\n            if (this.spec.angle != null) {\n                this.angle = this.spec.angle;\n            } else {\n                this.angle = function () {\n                    switch (this.spec.direction) {\n                    case 'right':\n                        return 0;\n                    case 'left':\n                        return 180;\n                    case 'up':\n                        return 90;\n                    case 'down':\n                        return 270;\n                    default:\n                        return 0;\n                    }\n                }.call(this);\n            }\n            shaftLength = this.spec.length - this.spec.arrowSize;\n            this.arrowShaft = new Kinetic.Rect({\n                x: 0,\n                y: 0,\n                width: shaftLength,\n                height: this.spec.thickness,\n                fill: this.spec.fill,\n                stroke: this.spec.stroke,\n                strokeWidth: this.spec.strokeWidth,\n                opacity: this.spec.opacity\n            });\n            _this = this;\n            this.arrowHead = new Kinetic.Shape({\n                drawFunc: function (cx) {\n                    cx.beginPath();\n                    cx.moveTo(shaftLength, -_this.spec.arrowSize / 2);\n                    cx.lineTo(shaftLength + _this.spec.arrowSize, _this.spec.thickness / 2);\n                    cx.lineTo(shaftLength, _this.spec.thickness + _this.spec.arrowSize / 2);\n                    cx.closePath();\n                    return cx.fillStrokeShape(this);\n                },\n                fill: _this.spec.fill,\n                stroke: this.spec.stroke,\n                strokeWidth: this.spec.strokeWidth,\n                opacity: this.spec.opacity,\n                width: _this.spec.arrowSize,\n                height: _this.spec.arrowSize + _this.spec.thickness\n            });\n            len = shaftLength + this.spec.arrowSize;\n            height = this.spec.thickness;\n            this.node = new Kinetic.Group({\n                x: 0,\n                y: 0,\n                rotationDeg: this.angle,\n                offset: [\n                    len / 2,\n                    height / 2\n                ]\n            });\n            this.node.add(this.arrowShaft);\n            return this.node.add(this.arrowHead);\n        };\n        Arrow.prototype.render = function (context) {\n            var coords;\n            coords = this.computeCoordinates(context, this.spec.position, this.arrowShaft.getWidth(), this.arrowShaft.getHeight());\n            this.node.setPosition({\n                x: coords[0] + (this.arrowShaft.getWidth() + this.spec.arrowSize) / 2,\n                y: coords[1] + this.spec.thickness / 2\n            });\n            return this.presentable(this.node);\n        };\n        return Arrow;\n    }(KStimulus);\n    exports.Arrow = Arrow;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/canvas/arrow.js\"],\"names\":[\"Arrow\",\"KStimulus\",\"Kinetic\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"KineticStimulus\",\"_super\",\"defaults\",\"x\",\"y\",\"length\",\"direction\",\"thickness\",\"fill\",\"arrowSize\",\"angle\",\"spec\",\"initialize\",\"height\",\"len\",\"shaftLength\",\"_this\",\"arrowShaft\",\"Rect\",\"width\",\"stroke\",\"strokeWidth\",\"opacity\",\"arrowHead\",\"Shape\",\"drawFunc\",\"cx\",\"beginPath\",\"moveTo\",\"lineTo\",\"closePath\",\"fillStrokeShape\",\"node\",\"Group\",\"rotationDeg\",\"offset\",\"add\",\"render\",\"context\",\"coords\",\"computeCoordinates\",\"position\",\"getWidth\",\"getHeight\",\"setPosition\",\"presentable\",\"exports\"],\"mappings\":\"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\"}","lineCount":109,"mtime":1395245872000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var Arrow, KStimulus, Kinetic,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  KStimulus = require(\"../../stimresp\").KineticStimulus;\n\n  Kinetic = require(\"../../../jslibs/kinetic\").Kinetic;\n\n  Arrow = (function(_super) {\n    __extends(Arrow, _super);\n\n    Arrow.prototype.defaults = {\n      x: 100,\n      y: 100,\n      length: 100,\n      direction: \"right\",\n      thickness: 40,\n      fill: \"black\",\n      arrowSize: 25,\n      angle: null\n    };\n\n    function Arrow(spec) {\n      if (spec == null) {\n        spec = {};\n      }\n      Arrow.__super__.constructor.call(this, spec);\n    }\n\n    Arrow.prototype.initialize = function() {\n      var height, len, shaftLength, _this;\n      if (this.spec.angle != null) {\n        this.angle = this.spec.angle;\n      } else {\n        this.angle = (function() {\n          switch (this.spec.direction) {\n            case \"right\":\n              return 0;\n            case \"left\":\n              return 180;\n            case \"up\":\n              return 90;\n            case \"down\":\n              return 270;\n            default:\n              return 0;\n          }\n        }).call(this);\n      }\n      shaftLength = this.spec.length - this.spec.arrowSize;\n      this.arrowShaft = new Kinetic.Rect({\n        x: 0,\n        y: 0,\n        width: shaftLength,\n        height: this.spec.thickness,\n        fill: this.spec.fill,\n        stroke: this.spec.stroke,\n        strokeWidth: this.spec.strokeWidth,\n        opacity: this.spec.opacity\n      });\n      _this = this;\n      this.arrowHead = new Kinetic.Shape({\n        drawFunc: function(cx) {\n          cx.beginPath();\n          cx.moveTo(shaftLength, -_this.spec.arrowSize / 2.0);\n          cx.lineTo(shaftLength + _this.spec.arrowSize, _this.spec.thickness / 2.0);\n          cx.lineTo(shaftLength, _this.spec.thickness + _this.spec.arrowSize / 2.0);\n          cx.closePath();\n          return cx.fillStrokeShape(this);\n        },\n        fill: _this.spec.fill,\n        stroke: this.spec.stroke,\n        strokeWidth: this.spec.strokeWidth,\n        opacity: this.spec.opacity,\n        width: _this.spec.arrowSize,\n        height: _this.spec.arrowSize + _this.spec.thickness\n      });\n      len = shaftLength + this.spec.arrowSize;\n      height = this.spec.thickness;\n      this.node = new Kinetic.Group({\n        x: 0,\n        y: 0,\n        rotationDeg: this.angle,\n        offset: [len / 2, height / 2]\n      });\n      this.node.add(this.arrowShaft);\n      return this.node.add(this.arrowHead);\n    };\n\n    Arrow.prototype.render = function(context) {\n      var coords;\n      coords = this.computeCoordinates(context, this.spec.position, this.arrowShaft.getWidth(), this.arrowShaft.getHeight());\n      this.node.setPosition({\n        x: coords[0] + (this.arrowShaft.getWidth() + this.spec.arrowSize) / 2,\n        y: coords[1] + this.spec.thickness / 2\n      });\n      return this.presentable(this.node);\n    };\n\n    return Arrow;\n\n  })(KStimulus);\n\n  exports.Arrow = Arrow;\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/design.js":{"id":74,"canonicalName":"lib/design.js","code":"(function () {\n    var ArrayIterator, BlockStructure, CellTable, ConditionSet, DataTable, DependentFactorNode, ExpDesign, Factor, FactorNode, FactorSetNode, FactorSpec, ItemNode, ItemSetNode, Iterator, SamplerNode, TaskNode, TrialList, VarSpec, csv, sampler, trimWhiteSpace, utils, _, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    _ = require('16', module);\n    utils = require('69', module);\n    DataTable = require('70', module).DataTable;\n    csv = require('18', module);\n    sampler = require('71', module);\n    exports.Factor = Factor = function (_super) {\n        __extends(Factor, _super);\n        Factor.asFactor = function (arr) {\n            return function (func, args, ctor) {\n                ctor.prototype = func.prototype;\n                var child = new ctor(), result = func.apply(child, args);\n                return Object(result) === result ? result : child;\n            }(Factor, arr, function () {\n            });\n        };\n        function Factor(arr) {\n            var arg, _i, _len;\n            for (_i = 0, _len = arr.length; _i < _len; _i++) {\n                arg = arr[_i];\n                this.push(arg);\n            }\n            this.levels = _.uniq(arr).sort();\n        }\n        return Factor;\n    }(Array);\n    exports.VarSpec = VarSpec = function () {\n        function VarSpec() {\n        }\n        VarSpec.name = '';\n        VarSpec.nblocks = 1;\n        VarSpec.reps = 1;\n        VarSpec.expanded = {};\n        VarSpec.prototype.names = function () {\n            return this.name;\n        };\n        VarSpec.prototype.ntrials = function () {\n            return this.nblocks * this.reps;\n        };\n        VarSpec.prototype.valueAt = function (block, trial) {\n        };\n        return VarSpec;\n    }();\n    exports.FactorSpec = FactorSpec = function (_super) {\n        __extends(FactorSpec, _super);\n        function FactorSpec(name, levels) {\n            this.name = name;\n            this.levels = levels;\n            this.factorSet = {};\n            this.factorSet[this.name] = this.levels;\n            this.conditionTable = DataTable.expand(this.factorSet);\n        }\n        FactorSpec.prototype.cross = function (other) {\n            return new CrossedFactorSpec(this.nblocks, this.reps, [\n                this,\n                other\n            ]);\n        };\n        FactorSpec.prototype.expand = function (nblocks, reps) {\n            var blocks, concatBlocks, i, prop, vset, _i, _results;\n            prop = {};\n            prop[this.name] = this.levels;\n            vset = new DataTable(prop);\n            blocks = function () {\n                var _i, _results;\n                _results = [];\n                for (i = _i = 1; 1 <= nblocks ? _i <= nblocks : _i >= nblocks; i = 1 <= nblocks ? ++_i : --_i) {\n                    _results.push(vset.replicate(reps));\n                }\n                return _results;\n            }();\n            concatBlocks = _.reduce(blocks, function (sum, nex) {\n                return DataTable.rbind(sum, nex);\n            });\n            concatBlocks.bindcol('$Block', utils.rep(function () {\n                _results = [];\n                for (var _i = 1; 1 <= nblocks ? _i <= nblocks : _i >= nblocks; 1 <= nblocks ? _i++ : _i--) {\n                    _results.push(_i);\n                }\n                return _results;\n            }.apply(this), utils.rep(reps * vset.nrow(), nblocks)));\n            return concatBlocks;\n        };\n        return FactorSpec;\n    }(exports.VarSpec);\n    exports.CellTable = CellTable = function (_super) {\n        __extends(CellTable, _super);\n        function CellTable(parents) {\n            var fac;\n            this.parents = parents;\n            this.parentNames = function () {\n                var _i, _len, _ref, _results;\n                _ref = this.parents;\n                _results = [];\n                for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n                    fac = _ref[_i];\n                    _results.push(fac.name);\n                }\n                return _results;\n            }.call(this);\n            this.name = _.reduce(this.parentNames, function (n, n1) {\n                return n + ':' + n1;\n            });\n            this.levels = function () {\n                var _i, _len, _ref, _results;\n                _ref = this.parents;\n                _results = [];\n                for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n                    fac = _ref[_i];\n                    _results.push(fac.levels);\n                }\n                return _results;\n            }.call(this);\n            this.factorSet = _.zipObject(this.parentNames, this.levels);\n            this.table = DataTable.expand(this.factorSet);\n        }\n        CellTable.prototype.names = function () {\n            return this.parentNames;\n        };\n        CellTable.prototype.cells = function () {\n            return this.table.toRecordArray();\n        };\n        CellTable.prototype.conditions = function () {\n            var i, rec, _i, _ref, _results;\n            _results = [];\n            for (i = _i = 0, _ref = this.table.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                rec = this.table.record(i);\n                _results.push(_.reduce(rec, function (n, n1) {\n                    return n + ':' + n1;\n                }));\n            }\n            return _results;\n        };\n        CellTable.prototype.expand = function (nblocks, reps) {\n            var blocks, i;\n            return blocks = function () {\n                var _i, _results;\n                _results = [];\n                for (i = _i = 1; 1 <= nblocks ? _i <= nblocks : _i >= nblocks; i = 1 <= nblocks ? ++_i : --_i) {\n                    _results.push(this.table.replicate(reps));\n                }\n                return _results;\n            }.call(this);\n        };\n        return CellTable;\n    }(exports.VarSpec);\n    exports.BlockStructure = BlockStructure = function () {\n        function BlockStructure(nblocks, trialsPerBlock) {\n            this.nblocks = nblocks;\n            this.trialsPerBlock = trialsPerBlock;\n        }\n        return BlockStructure;\n    }();\n    exports.TaskNode = TaskNode = function () {\n        function TaskNode(varNodes, crossedSet) {\n            var i, vname, _i, _j, _k, _len, _len1, _ref, _ref1, _ref2;\n            this.varNodes = varNodes;\n            this.crossedSet = crossedSet != null ? crossedSet : [];\n            this.factorNames = _.map(this.varNodes, function (x) {\n                return x.name;\n            });\n            this.varmap = {};\n            for (i = _i = 0, _ref = this.factorNames.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                this.varmap[this.factorNames[i]] = this.varSpecs[i];\n            }\n            if (this.crossedSet.length > 0) {\n                _ref1 = this.crossedSet;\n                for (_j = 0, _len = _ref1.length; _j < _len; _j++) {\n                    vname = _ref1[_j];\n                    this.crossedVars = this.varmap[vname];\n                }\n                this.crossedSpec = new CrossedFactorSpec(this.crossedVars);\n            } else {\n                this.crossedVars = [];\n                this.crossedSpec = {};\n            }\n            this.uncrossedVars = _.difference(this.factorNames, this.crossedSet);\n            _ref2 = this.uncrossedVars;\n            for (_k = 0, _len1 = _ref2.length; _k < _len1; _k++) {\n                vname = _ref2[_k];\n                this.uncrossedSpec = this.varmap[vname];\n            }\n            ({\n                expand: function (nblocks, nreps) {\n                    var ctable;\n                    if (this.crossedVars.length > 0) {\n                        return ctable = this.crossedSpec.expand(nblocks, nreps);\n                    }\n                }\n            });\n        }\n        return TaskNode;\n    }();\n    FactorNode = FactorNode = function () {\n        FactorNode.build = function (name, spec) {\n            return new FactorNode(name, spec.levels);\n        };\n        function FactorNode(name, levels) {\n            this.name = name;\n            this.levels = levels;\n            this.cellTable = new CellTable([this]);\n        }\n        FactorNode.prototype.choose = function () {\n            return utils.oneOf(this.levels);\n        };\n        FactorNode.prototype.chooseK = function (k) {\n            return utils.permute(this.levels, k);\n        };\n        FactorNode.prototype.chooseDependent = function (recArray) {\n            return this.chooseK(recArray.length);\n        };\n        FactorNode.prototype.expand = function (nblocks, nreps) {\n            return this.cellTable.expand(nblocks, nreps);\n        };\n        return FactorNode;\n    }();\n    exports.FactorNode = FactorNode;\n    DependentFactorNode = DependentFactorNode = function () {\n        DependentFactorNode.build = function (name, spec) {\n            return new DependentFactorNode(name, spec.levels, spec.choose);\n        };\n        function DependentFactorNode(name, levels, chooseFun) {\n            this.name = name;\n            this.levels = levels;\n            this.chooseFun = chooseFun;\n            this.cellTable = new CellTable([this]);\n        }\n        DependentFactorNode.prototype.choose = function (record) {\n            return this.chooseFun(record);\n        };\n        DependentFactorNode.prototype.chooseDependent = function (recArray) {\n            return _.map(recArray, function (_this) {\n                return function (rec) {\n                    return _this.choose(rec);\n                };\n            }(this));\n        };\n        DependentFactorNode.prototype.expand = function (nblocks, nreps) {\n            return this.cellTable.expand(nblocks, nreps);\n        };\n        return DependentFactorNode;\n    }();\n    exports.DependentFactorNode = DependentFactorNode;\n    exports.FactorSetNode = FactorSetNode = function () {\n        FactorSetNode.build = function (spec) {\n            var fnodes, key, value;\n            fnodes = function () {\n                var _results;\n                _results = [];\n                for (key in spec) {\n                    value = spec[key];\n                    _results.push(exports.FactorNode.build(key, value));\n                }\n                return _results;\n            }();\n            return new FactorSetNode(fnodes);\n        };\n        function FactorSetNode(factors) {\n            var i, _i, _ref;\n            this.factors = factors;\n            this.factorNames = _.map(this.factors, function (x) {\n                return x.name;\n            });\n            this.varmap = {};\n            for (i = _i = 0, _ref = this.factorNames.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                this.varmap[this.factorNames[i]] = this.factors[i];\n            }\n            this.cellTable = new CellTable(this.factors);\n            this.name = this.cellTable.name;\n        }\n        FactorSetNode.prototype.levels = function () {\n            return this.cellTable.levels;\n        };\n        FactorSetNode.prototype.conditions = function () {\n            return this.cellTable.conditions();\n        };\n        FactorSetNode.prototype.cells = function () {\n            return this.cellTable.cells();\n        };\n        FactorSetNode.prototype.expand = function (nblocks, nreps) {\n            return this.cellTable.expand(nblocks, nreps);\n        };\n        FactorSetNode.prototype.trialList = function (nblocks, nreps) {\n            var blk, blocks, i, j, tlist, _i, _j, _len, _ref;\n            if (nblocks == null) {\n                nblocks = 1;\n            }\n            if (nreps == null) {\n                nreps = 1;\n            }\n            blocks = this.expand(nblocks, nreps);\n            tlist = new TrialList(nblocks);\n            for (i = _i = 0, _len = blocks.length; _i < _len; i = ++_i) {\n                blk = blocks[i];\n                for (j = _j = 0, _ref = blk.nrow(); 0 <= _ref ? _j < _ref : _j > _ref; j = 0 <= _ref ? ++_j : --_j) {\n                    tlist.add(i, blk.record(j));\n                }\n            }\n            return tlist;\n        };\n        return FactorSetNode;\n    }();\n    exports.Iterator = Iterator = function () {\n        function Iterator() {\n        }\n        Iterator.prototype.hasNext = function () {\n            return false;\n        };\n        Iterator.prototype.next = function () {\n            throw 'empty iterator';\n        };\n        Iterator.prototype.map = function (fun) {\n            throw 'empty iterator';\n        };\n        return Iterator;\n    }();\n    exports.ArrayIterator = ArrayIterator = function (_super) {\n        __extends(ArrayIterator, _super);\n        function ArrayIterator(arr) {\n            this.arr = arr;\n            this.cursor = 0;\n            ({\n                hasNext: function () {\n                    return this.cursor < this.arr.length;\n                },\n                next: function () {\n                    var ret;\n                    ret = this.arr[this.cursor];\n                    this.cursor = this.cursor + 1;\n                    return ret;\n                },\n                map: function (f) {\n                    return _.map(this.arr, function (el) {\n                        return f(el);\n                    });\n                }\n            });\n        }\n        return ArrayIterator;\n    }(Iterator);\n    TrialList = function () {\n        TrialList.fromBlockArray = function (blocks) {\n            var i, rec, tlist, _i, _j, _len, _ref, _ref1;\n            tlist = new TrialList(blocks.length);\n            for (i = _i = 0, _ref = blocks.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                _ref1 = blocks[i].toRecordArray();\n                for (_j = 0, _len = _ref1.length; _j < _len; _j++) {\n                    rec = _ref1[_j];\n                    tlist.add(i, rec);\n                }\n            }\n            return tlist;\n        };\n        function TrialList(nblocks) {\n            var i, _i;\n            this.blocks = [];\n            for (i = _i = 0; 0 <= nblocks ? _i < nblocks : _i > nblocks; i = 0 <= nblocks ? ++_i : --_i) {\n                this.blocks.push([]);\n            }\n        }\n        TrialList.prototype.add = function (block, trial) {\n            var blen;\n            if (block >= this.blocks.length) {\n                blen = this.blocks.length;\n                throw new Error('block index ' + block + ' exceeds number of blocks in TrialList ' + blen);\n            }\n            return this.blocks[block].push(trial);\n        };\n        TrialList.prototype.get = function (block, trialNum) {\n            return this.blocks[block][trialNum];\n        };\n        TrialList.prototype.getBlock = function (block) {\n            return this.blocks[block];\n        };\n        TrialList.prototype.nblocks = function () {\n            return this.blocks.length;\n        };\n        TrialList.prototype.ntrials = function () {\n            var nt;\n            nt = _.map(this.blocks, function (b) {\n                return b.length;\n            });\n            return _.reduce(nt, function (x0, x1) {\n                return x0 + x1;\n            });\n        };\n        TrialList.prototype.shuffle = function () {\n            return this.blocks = _.map(this.blocks, function (blk) {\n                return _.shuffle(blk);\n            });\n        };\n        TrialList.prototype.bind = function (fun) {\n            var blk, i, out, ret, trial, _i, _j, _len, _len1, _ref;\n            out = new TrialList(this.blocks.length);\n            _ref = this.blocks;\n            for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {\n                blk = _ref[i];\n                for (_j = 0, _len1 = blk.length; _j < _len1; _j++) {\n                    trial = blk[_j];\n                    ret = fun(trial);\n                    out.add(i, _.assign(trial, ret));\n                }\n            }\n            return out;\n        };\n        TrialList.prototype.blockIterator = function () {\n            return new ArrayIterator(_.map(this.blocks, function (blk) {\n                return new ArrayIterator(blk);\n            }));\n        };\n        return TrialList;\n    }();\n    exports.TrialList = TrialList;\n    trimWhiteSpace = function (records) {\n        var i, key, out, record, trimmed, value, _i, _ref;\n        trimmed = [];\n        for (i = _i = 0, _ref = records.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n            record = records[i];\n            out = {};\n            for (key in record) {\n                value = record[key];\n                out[key.trim()] = value.trim();\n            }\n            trimmed.push(out);\n        }\n        return trimmed;\n    };\n    exports.ItemNode = ItemNode = function () {\n        ItemNode.build = function (name, spec) {\n            var attrs, dtable, inode, items, snode;\n            if (spec.type == null) {\n                spec.type = 'text';\n            }\n            snode = spec.sampler != null ? SamplerNode.build(spec.sampler) : new SamplerNode('default', {});\n            if (spec.data != null) {\n                dtable = DataTable.fromRecords(spec.data);\n                attrs = dtable.dropColumn(name);\n                items = dtable[name];\n                return new ItemNode(name, items, attrs, spec.type, snode.makeSampler(items));\n            } else if (spec.csv != null) {\n                inode = null;\n                $.ajax({\n                    url: spec.csv.url,\n                    dataType: 'text',\n                    async: false,\n                    success: function (_this) {\n                        return function (data) {\n                            var records;\n                            records = trimWhiteSpace(csv.toObjects(data));\n                            dtable = DataTable.fromRecords(records);\n                            items = dtable[name];\n                            attrs = dtable.dropColumn(name);\n                            return inode = new ItemNode(name, items, attrs, spec.type, snode.makeSampler(items));\n                        };\n                    }(this),\n                    error: function (x) {\n                        return console.log(x);\n                    }\n                });\n                return inode;\n            }\n        };\n        function ItemNode(name, items, attributes, type, sampler) {\n            this.name = name;\n            this.items = items;\n            this.attributes = attributes;\n            this.type = type;\n            this.sampler = sampler;\n            if (this.items.length !== this.attributes.nrow()) {\n                throw 'Number of items must equal number of attributes';\n            }\n        }\n        ItemNode.prototype.sample = function (n) {\n            return this.sampler.take(n);\n        };\n        return ItemNode;\n    }();\n    exports.ItemSetNode = ItemSetNode = function () {\n        ItemSetNode.build = function (spec) {\n            var key, nodes, value;\n            nodes = function () {\n                var _results;\n                _results = [];\n                for (key in spec) {\n                    value = spec[key];\n                    _results.push(exports.ItemNode.build(key, value));\n                }\n                return _results;\n            }();\n            return new ItemSetNode(nodes);\n        };\n        function ItemSetNode(itemNodes) {\n            this.itemNodes = itemNodes;\n            this.names = _.map(this.itemNodes, function (n) {\n                return n.name;\n            });\n        }\n        ItemSetNode.prototype.sample = function (n) {\n            var i, items, j, name, out, record, _i, _j, _len, _ref;\n            items = _.map(this.itemNodes, function (node) {\n                return node.sample(n);\n            });\n            out = [];\n            for (i = _i = 0; 0 <= n ? _i < n : _i > n; i = 0 <= n ? ++_i : --_i) {\n                record = {};\n                _ref = this.names;\n                for (j = _j = 0, _len = _ref.length; _j < _len; j = ++_j) {\n                    name = _ref[j];\n                    record[name] = items[j][i];\n                }\n                out.push(record);\n            }\n            return out;\n        };\n        return ItemSetNode;\n    }();\n    SamplerNode = SamplerNode = function () {\n        SamplerNode.build = function (spec) {\n            if (spec.type == null) {\n                spec.type = 'default';\n            }\n            return new SamplerNode(spec.type, spec);\n        };\n        function SamplerNode(type, params) {\n            this.makeSampler = function () {\n                switch (type) {\n                case 'default':\n                    return function (items) {\n                        return new sampler.Sampler(items, params);\n                    };\n                case 'exhaustive':\n                    return function (items) {\n                        return new sampler.ExhaustiveSampler(items, params);\n                    };\n                case 'replacement':\n                    return function (items) {\n                        return new sampler.ReplacementSampler(items, params);\n                    };\n                default:\n                    throw new Error('unrecognized sampler type', type);\n                }\n            }();\n        }\n        return SamplerNode;\n    }();\n    exports.SamplerNode = SamplerNode;\n    exports.ConditionSet = ConditionSet = function () {\n        ConditionSet.build = function (spec) {\n            var key, value, _crossed, _uncrossed;\n            if (spec.Crossed == null && !spec.Uncrossed) {\n                _crossed = exports.FactorSetNode.build(spec.Crossed);\n                _uncrossed = {};\n            } else {\n                _crossed = exports.FactorSetNode.build(spec.Crossed);\n                _uncrossed = function () {\n                    var _ref, _results;\n                    _ref = spec.Uncrossed;\n                    _results = [];\n                    for (key in _ref) {\n                        value = _ref[key];\n                        _results.push(DependentFactorNode.build(key, value));\n                    }\n                    return _results;\n                }();\n            }\n            return new ConditionSet(_crossed, _uncrossed);\n        };\n        function ConditionSet(crossed, uncrossed) {\n            this.crossed = crossed;\n            this.uncrossed = uncrossed;\n            this.factorNames = [].concat(this.crossed.factorNames).concat(_.map(this.uncrossed, function (_this) {\n                return function (fac) {\n                    return fac.name;\n                };\n            }(this)));\n            this.factorArray = _.clone(this.crossed.factors);\n            _.forEach(this.uncrossed, function (_this) {\n                return function (fac) {\n                    return _this.factorArray.push(fac);\n                };\n            }(this));\n            this.factorSet = _.zipObject(this.factorNames, this.factorArray);\n        }\n        ConditionSet.prototype.expand = function (nblocks, nreps) {\n            var blk, cellTab, i, _i, _j, _len, _ref;\n            cellTab = this.crossed.expand(nblocks, nreps);\n            for (_i = 0, _len = cellTab.length; _i < _len; _i++) {\n                blk = cellTab[_i];\n                for (i = _j = 0, _ref = this.uncrossed.length; 0 <= _ref ? _j < _ref : _j > _ref; i = 0 <= _ref ? ++_j : --_j) {\n                    blk.bindcol(this.uncrossed[i].name, this.uncrossed[i].chooseDependent(blk.toRecordArray()));\n                }\n            }\n            return TrialList.fromBlockArray(cellTab);\n        };\n        return ConditionSet;\n    }();\n    exports.ExpDesign = ExpDesign = function () {\n        ExpDesign.blocks = 1;\n        ExpDesign.validate = function (spec) {\n            var des;\n            if (!('Design' in spec)) {\n                throw 'Design is undefined';\n            }\n            des = spec['Design'];\n            if (!('Variables' in des)) {\n                throw 'Variables is undefined';\n            }\n            if (!('Structure' in des)) {\n                throw 'Structure is undefined';\n            }\n            if (!('Items' in spec)) {\n                throw 'Items is undefined';\n            }\n        };\n        ExpDesign.splitCrossedItems = function (itemSpec, crossedVariables) {\n            var attrnames, conditionTable, i, indices, itemSets, j, keySet, levs, record, values;\n            attrnames = crossedVariables.colnames();\n            keySet = function () {\n                var _i, _ref, _results;\n                _results = [];\n                for (i = _i = 0, _ref = crossedVariables.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                    record = crossedVariables.record(i);\n                    levs = _.values(record);\n                    _results.push(_.reduce(levs, function (a, b) {\n                        return a + ':' + b;\n                    }));\n                }\n                return _results;\n            }();\n            values = itemSpec['values'];\n            conditionTable = new DataTable(_.pick(itemSpec, attrnames));\n            itemSets = function () {\n                var _i, _ref, _results;\n                _results = [];\n                for (i = _i = 0, _ref = crossedVariables.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                    record = crossedVariables.record(i);\n                    indices = conditionTable.whichRow(record);\n                    _results.push(function () {\n                        var _j, _len, _results1;\n                        _results1 = [];\n                        for (_j = 0, _len = indices.length; _j < _len; _j++) {\n                            j = indices[_j];\n                            _results1.push(values[j]);\n                        }\n                        return _results1;\n                    }());\n                }\n                return _results;\n            }();\n            return _.zipObject(keySet, itemSets);\n        };\n        ExpDesign.prototype.init = function (spec) {\n            this.design = spec['Design'];\n            this.variables = this.design['Variables'];\n            this.itemSpec = spec['Items'];\n            this.structure = this.design['Structure'];\n            this.factorNames = _.keys(this.variables);\n            this.crossed = this.variables['Crossed'];\n            return this.auxiliary = this.variables['Auxiliary'];\n        };\n        ExpDesign.prototype.initStructure = function () {\n            if (this.structure['type'] === 'Block') {\n                if (!_.has(this.structure, 'reps_per_block')) {\n                    this.structure['reps_per_block'] = 1;\n                }\n                this.reps_per_block = this.structure['reps_per_block'];\n                return this.blocks = this.structure['blocks'];\n            } else {\n                this.reps_per_block = 1;\n                return this.blocks = 1;\n            }\n        };\n        ExpDesign.prototype.makeConditionalSampler = function (crossedSpec, crossedItems) {\n            var crossedItemMap, crossedItemName, key;\n            crossedItemName = _.keys(crossedItems)[0];\n            console.log('names:', crossedSpec.names());\n            crossedItemMap = function () {\n                var _i, _len, _ref, _results;\n                _ref = crossedSpec.names();\n                _results = [];\n                for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n                    key = _ref[_i];\n                    _results.push(crossedItems[crossedItemName][key]);\n                }\n                return _results;\n            }();\n            crossedItemMap = _.zipObject(_.keys(this.crossed), crossedItemMap);\n            console.log('item map: ', crossedItemMap);\n            return new ConditionalSampler(crossedItems[crossedItemName].values, new DataTable(crossedItemMap), crossedSpec);\n        };\n        ExpDesign.prototype.makeCrossedSpec = function (crossed, nblocks, nreps) {\n            var factors, key, val;\n            factors = function () {\n                var _results;\n                _results = [];\n                for (key in crossed) {\n                    val = crossed[key];\n                    _results.push(new FactorSpec(nblocks, nreps, key, val.levels));\n                }\n                return _results;\n            }();\n            return crossed = new CrossedFactorSpec(nblocks, nreps, factors);\n        };\n        ExpDesign.prototype.makeFactorSpec = function (fac, nblocks, nreps) {\n            return new FactorSpec(nblocks, nreps, _.keys(fac)[0], _.values(fac)[0]);\n        };\n        function ExpDesign(spec) {\n            var crossedItems, crossedSampler;\n            if (spec == null) {\n                spec = {};\n            }\n            ExpDesign.validate(spec);\n            this.init(spec);\n            this.initStructure();\n            this.crossedSpec = this.makeCrossedSpec(this.crossed, this.blocks, this.reps_per_block);\n            crossedItems = this.itemSpec.Crossed;\n            crossedSampler = this.makeConditionalSampler(this.crossedSpec, crossedItems);\n            this.fullDesign = this.crossedSpec.expanded.bindcol(_.keys(crossedItems)[0], crossedSampler.take(this.crossedSpec.expanded.nrow()));\n            console.log(this.crossedDesign);\n        }\n        return ExpDesign;\n    }();\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/design.js\"],\"names\":[\"ArrayIterator\",\"BlockStructure\",\"CellTable\",\"ConditionSet\",\"DataTable\",\"DependentFactorNode\",\"ExpDesign\",\"Factor\",\"FactorNode\",\"FactorSetNode\",\"FactorSpec\",\"ItemNode\",\"ItemSetNode\",\"Iterator\",\"SamplerNode\",\"TaskNode\",\"TrialList\",\"VarSpec\",\"csv\",\"sampler\",\"trimWhiteSpace\",\"utils\",\"_\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"exports\",\"_super\",\"asFactor\",\"arr\",\"func\",\"args\",\"result\",\"apply\",\"Object\",\"arg\",\"_i\",\"_len\",\"length\",\"push\",\"levels\",\"uniq\",\"sort\",\"Array\",\"name\",\"nblocks\",\"reps\",\"expanded\",\"names\",\"ntrials\",\"valueAt\",\"block\",\"trial\",\"factorSet\",\"conditionTable\",\"expand\",\"cross\",\"other\",\"CrossedFactorSpec\",\"blocks\",\"concatBlocks\",\"i\",\"prop\",\"vset\",\"_results\",\"replicate\",\"reduce\",\"sum\",\"nex\",\"rbind\",\"bindcol\",\"rep\",\"nrow\",\"parents\",\"fac\",\"parentNames\",\"_ref\",\"n\",\"n1\",\"zipObject\",\"table\",\"cells\",\"toRecordArray\",\"conditions\",\"rec\",\"record\",\"trialsPerBlock\",\"varNodes\",\"crossedSet\",\"vname\",\"_j\",\"_k\",\"_len1\",\"_ref1\",\"_ref2\",\"factorNames\",\"map\",\"x\",\"varmap\",\"varSpecs\",\"crossedVars\",\"crossedSpec\",\"uncrossedVars\",\"difference\",\"uncrossedSpec\",\"nreps\",\"ctable\",\"build\",\"spec\",\"cellTable\",\"choose\",\"oneOf\",\"chooseK\",\"k\",\"permute\",\"chooseDependent\",\"recArray\",\"chooseFun\",\"_this\",\"fnodes\",\"value\",\"factors\",\"trialList\",\"blk\",\"j\",\"tlist\",\"add\",\"hasNext\",\"next\",\"fun\",\"cursor\",\"ret\",\"f\",\"el\",\"fromBlockArray\",\"blen\",\"Error\",\"get\",\"trialNum\",\"getBlock\",\"nt\",\"b\",\"x0\",\"x1\",\"shuffle\",\"bind\",\"out\",\"assign\",\"blockIterator\",\"records\",\"trimmed\",\"trim\",\"attrs\",\"dtable\",\"inode\",\"items\",\"snode\",\"type\",\"data\",\"fromRecords\",\"dropColumn\",\"makeSampler\",\"$\",\"ajax\",\"url\",\"dataType\",\"async\",\"success\",\"toObjects\",\"error\",\"console\",\"log\",\"attributes\",\"sample\",\"take\",\"nodes\",\"itemNodes\",\"node\",\"params\",\"Sampler\",\"ExhaustiveSampler\",\"ReplacementSampler\",\"_crossed\",\"_uncrossed\",\"Crossed\",\"Uncrossed\",\"crossed\",\"uncrossed\",\"concat\",\"factorArray\",\"clone\",\"forEach\",\"cellTab\",\"validate\",\"des\",\"splitCrossedItems\",\"itemSpec\",\"crossedVariables\",\"attrnames\",\"indices\",\"itemSets\",\"keySet\",\"levs\",\"values\",\"colnames\",\"a\",\"pick\",\"whichRow\",\"_results1\",\"init\",\"design\",\"variables\",\"structure\",\"keys\",\"auxiliary\",\"initStructure\",\"has\",\"reps_per_block\",\"makeConditionalSampler\",\"crossedItems\",\"crossedItemMap\",\"crossedItemName\",\"ConditionalSampler\",\"makeCrossedSpec\",\"val\",\"makeFactorSpec\",\"crossedSampler\",\"fullDesign\",\"crossedDesign\"],\"mappings\":\"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\"}","lineCount":736,"mtime":1395245873000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/utils.js","canonicalName":"lib/utils.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/datatable.js","canonicalName":"lib/datatable.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/jquery.csv.js","canonicalName":"jslibs/jquery.csv.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/samplers.js","canonicalName":"lib/samplers.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var ArrayIterator, BlockStructure, CellTable, ConditionSet, DataTable, DependentFactorNode, ExpDesign, Factor, FactorNode, FactorSetNode, FactorSpec, ItemNode, ItemSetNode, Iterator, SamplerNode, TaskNode, TrialList, VarSpec, csv, sampler, trimWhiteSpace, utils, _,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  _ = require('lodash');\n\n  utils = require(\"./utils\");\n\n  DataTable = require(\"./datatable\").DataTable;\n\n  csv = require('../jslibs/jquery.csv.js');\n\n  sampler = require(\"./samplers\");\n\n  exports.Factor = Factor = (function(_super) {\n    __extends(Factor, _super);\n\n    Factor.asFactor = function(arr) {\n      return (function(func, args, ctor) {\n        ctor.prototype = func.prototype;\n        var child = new ctor, result = func.apply(child, args);\n        return Object(result) === result ? result : child;\n      })(Factor, arr, function(){});\n    };\n\n    function Factor(arr) {\n      var arg, _i, _len;\n      for (_i = 0, _len = arr.length; _i < _len; _i++) {\n        arg = arr[_i];\n        this.push(arg);\n      }\n      this.levels = _.uniq(arr).sort();\n    }\n\n    return Factor;\n\n  })(Array);\n\n  exports.VarSpec = VarSpec = (function() {\n    function VarSpec() {}\n\n    VarSpec.name = \"\";\n\n    VarSpec.nblocks = 1;\n\n    VarSpec.reps = 1;\n\n    VarSpec.expanded = {};\n\n    VarSpec.prototype.names = function() {\n      return this.name;\n    };\n\n    VarSpec.prototype.ntrials = function() {\n      return this.nblocks * this.reps;\n    };\n\n    VarSpec.prototype.valueAt = function(block, trial) {};\n\n    return VarSpec;\n\n  })();\n\n  exports.FactorSpec = FactorSpec = (function(_super) {\n    __extends(FactorSpec, _super);\n\n    function FactorSpec(name, levels) {\n      this.name = name;\n      this.levels = levels;\n      this.factorSet = {};\n      this.factorSet[this.name] = this.levels;\n      this.conditionTable = DataTable.expand(this.factorSet);\n    }\n\n    FactorSpec.prototype.cross = function(other) {\n      return new CrossedFactorSpec(this.nblocks, this.reps, [this, other]);\n    };\n\n    FactorSpec.prototype.expand = function(nblocks, reps) {\n      var blocks, concatBlocks, i, prop, vset, _i, _results;\n      prop = {};\n      prop[this.name] = this.levels;\n      vset = new DataTable(prop);\n      blocks = (function() {\n        var _i, _results;\n        _results = [];\n        for (i = _i = 1; 1 <= nblocks ? _i <= nblocks : _i >= nblocks; i = 1 <= nblocks ? ++_i : --_i) {\n          _results.push(vset.replicate(reps));\n        }\n        return _results;\n      })();\n      concatBlocks = _.reduce(blocks, function(sum, nex) {\n        return DataTable.rbind(sum, nex);\n      });\n      concatBlocks.bindcol(\"$Block\", utils.rep((function() {\n        _results = [];\n        for (var _i = 1; 1 <= nblocks ? _i <= nblocks : _i >= nblocks; 1 <= nblocks ? _i++ : _i--){ _results.push(_i); }\n        return _results;\n      }).apply(this), utils.rep(reps * vset.nrow(), nblocks)));\n      return concatBlocks;\n    };\n\n    return FactorSpec;\n\n  })(exports.VarSpec);\n\n  exports.CellTable = CellTable = (function(_super) {\n    __extends(CellTable, _super);\n\n    function CellTable(parents) {\n      var fac;\n      this.parents = parents;\n      this.parentNames = (function() {\n        var _i, _len, _ref, _results;\n        _ref = this.parents;\n        _results = [];\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          fac = _ref[_i];\n          _results.push(fac.name);\n        }\n        return _results;\n      }).call(this);\n      this.name = _.reduce(this.parentNames, function(n, n1) {\n        return n + \":\" + n1;\n      });\n      this.levels = (function() {\n        var _i, _len, _ref, _results;\n        _ref = this.parents;\n        _results = [];\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          fac = _ref[_i];\n          _results.push(fac.levels);\n        }\n        return _results;\n      }).call(this);\n      this.factorSet = _.zipObject(this.parentNames, this.levels);\n      this.table = DataTable.expand(this.factorSet);\n    }\n\n    CellTable.prototype.names = function() {\n      return this.parentNames;\n    };\n\n    CellTable.prototype.cells = function() {\n      return this.table.toRecordArray();\n    };\n\n    CellTable.prototype.conditions = function() {\n      var i, rec, _i, _ref, _results;\n      _results = [];\n      for (i = _i = 0, _ref = this.table.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        rec = this.table.record(i);\n        _results.push(_.reduce(rec, function(n, n1) {\n          return n + \":\" + n1;\n        }));\n      }\n      return _results;\n    };\n\n    CellTable.prototype.expand = function(nblocks, reps) {\n      var blocks, i;\n      return blocks = (function() {\n        var _i, _results;\n        _results = [];\n        for (i = _i = 1; 1 <= nblocks ? _i <= nblocks : _i >= nblocks; i = 1 <= nblocks ? ++_i : --_i) {\n          _results.push(this.table.replicate(reps));\n        }\n        return _results;\n      }).call(this);\n    };\n\n    return CellTable;\n\n  })(exports.VarSpec);\n\n  exports.BlockStructure = BlockStructure = (function() {\n    function BlockStructure(nblocks, trialsPerBlock) {\n      this.nblocks = nblocks;\n      this.trialsPerBlock = trialsPerBlock;\n    }\n\n    return BlockStructure;\n\n  })();\n\n  exports.TaskNode = TaskNode = (function() {\n    function TaskNode(varNodes, crossedSet) {\n      var i, vname, _i, _j, _k, _len, _len1, _ref, _ref1, _ref2;\n      this.varNodes = varNodes;\n      this.crossedSet = crossedSet != null ? crossedSet : [];\n      this.factorNames = _.map(this.varNodes, function(x) {\n        return x.name;\n      });\n      this.varmap = {};\n      for (i = _i = 0, _ref = this.factorNames.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        this.varmap[this.factorNames[i]] = this.varSpecs[i];\n      }\n      if (this.crossedSet.length > 0) {\n        _ref1 = this.crossedSet;\n        for (_j = 0, _len = _ref1.length; _j < _len; _j++) {\n          vname = _ref1[_j];\n          this.crossedVars = this.varmap[vname];\n        }\n        this.crossedSpec = new CrossedFactorSpec(this.crossedVars);\n      } else {\n        this.crossedVars = [];\n        this.crossedSpec = {};\n      }\n      this.uncrossedVars = _.difference(this.factorNames, this.crossedSet);\n      _ref2 = this.uncrossedVars;\n      for (_k = 0, _len1 = _ref2.length; _k < _len1; _k++) {\n        vname = _ref2[_k];\n        this.uncrossedSpec = this.varmap[vname];\n      }\n      ({\n        expand: function(nblocks, nreps) {\n          var ctable;\n          if (this.crossedVars.length > 0) {\n            return ctable = this.crossedSpec.expand(nblocks, nreps);\n          }\n        }\n      });\n    }\n\n    return TaskNode;\n\n  })();\n\n  FactorNode = FactorNode = (function() {\n    FactorNode.build = function(name, spec) {\n      return new FactorNode(name, spec.levels);\n    };\n\n    function FactorNode(name, levels) {\n      this.name = name;\n      this.levels = levels;\n      this.cellTable = new CellTable([this]);\n    }\n\n    FactorNode.prototype.choose = function() {\n      return utils.oneOf(this.levels);\n    };\n\n    FactorNode.prototype.chooseK = function(k) {\n      return utils.permute(this.levels, k);\n    };\n\n    FactorNode.prototype.chooseDependent = function(recArray) {\n      return this.chooseK(recArray.length);\n    };\n\n    FactorNode.prototype.expand = function(nblocks, nreps) {\n      return this.cellTable.expand(nblocks, nreps);\n    };\n\n    return FactorNode;\n\n  })();\n\n  exports.FactorNode = FactorNode;\n\n  DependentFactorNode = DependentFactorNode = (function() {\n    DependentFactorNode.build = function(name, spec) {\n      return new DependentFactorNode(name, spec.levels, spec.choose);\n    };\n\n    function DependentFactorNode(name, levels, chooseFun) {\n      this.name = name;\n      this.levels = levels;\n      this.chooseFun = chooseFun;\n      this.cellTable = new CellTable([this]);\n    }\n\n    DependentFactorNode.prototype.choose = function(record) {\n      return this.chooseFun(record);\n    };\n\n    DependentFactorNode.prototype.chooseDependent = function(recArray) {\n      return _.map(recArray, (function(_this) {\n        return function(rec) {\n          return _this.choose(rec);\n        };\n      })(this));\n    };\n\n    DependentFactorNode.prototype.expand = function(nblocks, nreps) {\n      return this.cellTable.expand(nblocks, nreps);\n    };\n\n    return DependentFactorNode;\n\n  })();\n\n  exports.DependentFactorNode = DependentFactorNode;\n\n  exports.FactorSetNode = FactorSetNode = (function() {\n    FactorSetNode.build = function(spec) {\n      var fnodes, key, value;\n      fnodes = (function() {\n        var _results;\n        _results = [];\n        for (key in spec) {\n          value = spec[key];\n          _results.push(exports.FactorNode.build(key, value));\n        }\n        return _results;\n      })();\n      return new FactorSetNode(fnodes);\n    };\n\n    function FactorSetNode(factors) {\n      var i, _i, _ref;\n      this.factors = factors;\n      this.factorNames = _.map(this.factors, function(x) {\n        return x.name;\n      });\n      this.varmap = {};\n      for (i = _i = 0, _ref = this.factorNames.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        this.varmap[this.factorNames[i]] = this.factors[i];\n      }\n      this.cellTable = new CellTable(this.factors);\n      this.name = this.cellTable.name;\n    }\n\n    FactorSetNode.prototype.levels = function() {\n      return this.cellTable.levels;\n    };\n\n    FactorSetNode.prototype.conditions = function() {\n      return this.cellTable.conditions();\n    };\n\n    FactorSetNode.prototype.cells = function() {\n      return this.cellTable.cells();\n    };\n\n    FactorSetNode.prototype.expand = function(nblocks, nreps) {\n      return this.cellTable.expand(nblocks, nreps);\n    };\n\n    FactorSetNode.prototype.trialList = function(nblocks, nreps) {\n      var blk, blocks, i, j, tlist, _i, _j, _len, _ref;\n      if (nblocks == null) {\n        nblocks = 1;\n      }\n      if (nreps == null) {\n        nreps = 1;\n      }\n      blocks = this.expand(nblocks, nreps);\n      tlist = new TrialList(nblocks);\n      for (i = _i = 0, _len = blocks.length; _i < _len; i = ++_i) {\n        blk = blocks[i];\n        for (j = _j = 0, _ref = blk.nrow(); 0 <= _ref ? _j < _ref : _j > _ref; j = 0 <= _ref ? ++_j : --_j) {\n          tlist.add(i, blk.record(j));\n        }\n      }\n      return tlist;\n    };\n\n    return FactorSetNode;\n\n  })();\n\n  exports.Iterator = Iterator = (function() {\n    function Iterator() {}\n\n    Iterator.prototype.hasNext = function() {\n      return false;\n    };\n\n    Iterator.prototype.next = function() {\n      throw \"empty iterator\";\n    };\n\n    Iterator.prototype.map = function(fun) {\n      throw \"empty iterator\";\n    };\n\n    return Iterator;\n\n  })();\n\n  exports.ArrayIterator = ArrayIterator = (function(_super) {\n    __extends(ArrayIterator, _super);\n\n    function ArrayIterator(arr) {\n      this.arr = arr;\n      this.cursor = 0;\n      ({\n        hasNext: function() {\n          return this.cursor < this.arr.length;\n        },\n        next: function() {\n          var ret;\n          ret = this.arr[this.cursor];\n          this.cursor = this.cursor + 1;\n          return ret;\n        },\n        map: function(f) {\n          return _.map(this.arr, function(el) {\n            return f(el);\n          });\n        }\n      });\n    }\n\n    return ArrayIterator;\n\n  })(Iterator);\n\n  TrialList = (function() {\n    TrialList.fromBlockArray = function(blocks) {\n      var i, rec, tlist, _i, _j, _len, _ref, _ref1;\n      tlist = new TrialList(blocks.length);\n      for (i = _i = 0, _ref = blocks.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        _ref1 = blocks[i].toRecordArray();\n        for (_j = 0, _len = _ref1.length; _j < _len; _j++) {\n          rec = _ref1[_j];\n          tlist.add(i, rec);\n        }\n      }\n      return tlist;\n    };\n\n    function TrialList(nblocks) {\n      var i, _i;\n      this.blocks = [];\n      for (i = _i = 0; 0 <= nblocks ? _i < nblocks : _i > nblocks; i = 0 <= nblocks ? ++_i : --_i) {\n        this.blocks.push([]);\n      }\n    }\n\n    TrialList.prototype.add = function(block, trial) {\n      var blen;\n      if (block >= this.blocks.length) {\n        blen = this.blocks.length;\n        throw new Error(\"block index \" + block + \" exceeds number of blocks in TrialList \" + blen);\n      }\n      return this.blocks[block].push(trial);\n    };\n\n    TrialList.prototype.get = function(block, trialNum) {\n      return this.blocks[block][trialNum];\n    };\n\n    TrialList.prototype.getBlock = function(block) {\n      return this.blocks[block];\n    };\n\n    TrialList.prototype.nblocks = function() {\n      return this.blocks.length;\n    };\n\n    TrialList.prototype.ntrials = function() {\n      var nt;\n      nt = _.map(this.blocks, function(b) {\n        return b.length;\n      });\n      return _.reduce(nt, function(x0, x1) {\n        return x0 + x1;\n      });\n    };\n\n    TrialList.prototype.shuffle = function() {\n      return this.blocks = _.map(this.blocks, function(blk) {\n        return _.shuffle(blk);\n      });\n    };\n\n    TrialList.prototype.bind = function(fun) {\n      var blk, i, out, ret, trial, _i, _j, _len, _len1, _ref;\n      out = new TrialList(this.blocks.length);\n      _ref = this.blocks;\n      for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {\n        blk = _ref[i];\n        for (_j = 0, _len1 = blk.length; _j < _len1; _j++) {\n          trial = blk[_j];\n          ret = fun(trial);\n          out.add(i, _.assign(trial, ret));\n        }\n      }\n      return out;\n    };\n\n    TrialList.prototype.blockIterator = function() {\n      return new ArrayIterator(_.map(this.blocks, function(blk) {\n        return new ArrayIterator(blk);\n      }));\n    };\n\n    return TrialList;\n\n  })();\n\n  exports.TrialList = TrialList;\n\n  trimWhiteSpace = function(records) {\n    var i, key, out, record, trimmed, value, _i, _ref;\n    trimmed = [];\n    for (i = _i = 0, _ref = records.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n      record = records[i];\n      out = {};\n      for (key in record) {\n        value = record[key];\n        out[key.trim()] = value.trim();\n      }\n      trimmed.push(out);\n    }\n    return trimmed;\n  };\n\n  exports.ItemNode = ItemNode = (function() {\n    ItemNode.build = function(name, spec) {\n      var attrs, dtable, inode, items, snode;\n      if (spec.type == null) {\n        spec.type = \"text\";\n      }\n      snode = spec.sampler != null ? SamplerNode.build(spec.sampler) : new SamplerNode(\"default\", {});\n      if (spec.data != null) {\n        dtable = DataTable.fromRecords(spec.data);\n        attrs = dtable.dropColumn(name);\n        items = dtable[name];\n        return new ItemNode(name, items, attrs, spec.type, snode.makeSampler(items));\n      } else if (spec.csv != null) {\n        inode = null;\n        $.ajax({\n          url: spec.csv.url,\n          dataType: \"text\",\n          async: false,\n          success: (function(_this) {\n            return function(data) {\n              var records;\n              records = trimWhiteSpace(csv.toObjects(data));\n              dtable = DataTable.fromRecords(records);\n              items = dtable[name];\n              attrs = dtable.dropColumn(name);\n              return inode = new ItemNode(name, items, attrs, spec.type, snode.makeSampler(items));\n            };\n          })(this),\n          error: function(x) {\n            return console.log(x);\n          }\n        });\n        return inode;\n      }\n    };\n\n    function ItemNode(name, items, attributes, type, sampler) {\n      this.name = name;\n      this.items = items;\n      this.attributes = attributes;\n      this.type = type;\n      this.sampler = sampler;\n      if (this.items.length !== this.attributes.nrow()) {\n        throw \"Number of items must equal number of attributes\";\n      }\n    }\n\n    ItemNode.prototype.sample = function(n) {\n      return this.sampler.take(n);\n    };\n\n    return ItemNode;\n\n  })();\n\n  exports.ItemSetNode = ItemSetNode = (function() {\n    ItemSetNode.build = function(spec) {\n      var key, nodes, value;\n      nodes = (function() {\n        var _results;\n        _results = [];\n        for (key in spec) {\n          value = spec[key];\n          _results.push(exports.ItemNode.build(key, value));\n        }\n        return _results;\n      })();\n      return new ItemSetNode(nodes);\n    };\n\n    function ItemSetNode(itemNodes) {\n      this.itemNodes = itemNodes;\n      this.names = _.map(this.itemNodes, function(n) {\n        return n.name;\n      });\n    }\n\n    ItemSetNode.prototype.sample = function(n) {\n      var i, items, j, name, out, record, _i, _j, _len, _ref;\n      items = _.map(this.itemNodes, function(node) {\n        return node.sample(n);\n      });\n      out = [];\n      for (i = _i = 0; 0 <= n ? _i < n : _i > n; i = 0 <= n ? ++_i : --_i) {\n        record = {};\n        _ref = this.names;\n        for (j = _j = 0, _len = _ref.length; _j < _len; j = ++_j) {\n          name = _ref[j];\n          record[name] = items[j][i];\n        }\n        out.push(record);\n      }\n      return out;\n    };\n\n    return ItemSetNode;\n\n  })();\n\n  SamplerNode = SamplerNode = (function() {\n    SamplerNode.build = function(spec) {\n      if (spec.type == null) {\n        spec.type = \"default\";\n      }\n      return new SamplerNode(spec.type, spec);\n    };\n\n    function SamplerNode(type, params) {\n      this.makeSampler = (function() {\n        switch (type) {\n          case \"default\":\n            return function(items) {\n              return new sampler.Sampler(items, params);\n            };\n          case \"exhaustive\":\n            return function(items) {\n              return new sampler.ExhaustiveSampler(items, params);\n            };\n          case \"replacement\":\n            return function(items) {\n              return new sampler.ReplacementSampler(items, params);\n            };\n          default:\n            throw new Error(\"unrecognized sampler type\", type);\n        }\n      })();\n    }\n\n    return SamplerNode;\n\n  })();\n\n  exports.SamplerNode = SamplerNode;\n\n  exports.ConditionSet = ConditionSet = (function() {\n    ConditionSet.build = function(spec) {\n      var key, value, _crossed, _uncrossed;\n      if ((spec.Crossed == null) && !spec.Uncrossed) {\n        _crossed = exports.FactorSetNode.build(spec.Crossed);\n        _uncrossed = {};\n      } else {\n        _crossed = exports.FactorSetNode.build(spec.Crossed);\n        _uncrossed = (function() {\n          var _ref, _results;\n          _ref = spec.Uncrossed;\n          _results = [];\n          for (key in _ref) {\n            value = _ref[key];\n            _results.push(DependentFactorNode.build(key, value));\n          }\n          return _results;\n        })();\n      }\n      return new ConditionSet(_crossed, _uncrossed);\n    };\n\n    function ConditionSet(crossed, uncrossed) {\n      this.crossed = crossed;\n      this.uncrossed = uncrossed;\n      this.factorNames = [].concat(this.crossed.factorNames).concat(_.map(this.uncrossed, (function(_this) {\n        return function(fac) {\n          return fac.name;\n        };\n      })(this)));\n      this.factorArray = _.clone(this.crossed.factors);\n      _.forEach(this.uncrossed, (function(_this) {\n        return function(fac) {\n          return _this.factorArray.push(fac);\n        };\n      })(this));\n      this.factorSet = _.zipObject(this.factorNames, this.factorArray);\n    }\n\n    ConditionSet.prototype.expand = function(nblocks, nreps) {\n      var blk, cellTab, i, _i, _j, _len, _ref;\n      cellTab = this.crossed.expand(nblocks, nreps);\n      for (_i = 0, _len = cellTab.length; _i < _len; _i++) {\n        blk = cellTab[_i];\n        for (i = _j = 0, _ref = this.uncrossed.length; 0 <= _ref ? _j < _ref : _j > _ref; i = 0 <= _ref ? ++_j : --_j) {\n          blk.bindcol(this.uncrossed[i].name, this.uncrossed[i].chooseDependent(blk.toRecordArray()));\n        }\n      }\n      return TrialList.fromBlockArray(cellTab);\n    };\n\n    return ConditionSet;\n\n  })();\n\n  exports.ExpDesign = ExpDesign = (function() {\n    ExpDesign.blocks = 1;\n\n    ExpDesign.validate = function(spec) {\n      var des;\n      if (!(\"Design\" in spec)) {\n        throw \"Design is undefined\";\n      }\n      des = spec[\"Design\"];\n      if (!(\"Variables\" in des)) {\n        throw \"Variables is undefined\";\n      }\n      if (!(\"Structure\" in des)) {\n        throw \"Structure is undefined\";\n      }\n      if (!(\"Items\" in spec)) {\n        throw \"Items is undefined\";\n      }\n    };\n\n    ExpDesign.splitCrossedItems = function(itemSpec, crossedVariables) {\n      var attrnames, conditionTable, i, indices, itemSets, j, keySet, levs, record, values;\n      attrnames = crossedVariables.colnames();\n      keySet = (function() {\n        var _i, _ref, _results;\n        _results = [];\n        for (i = _i = 0, _ref = crossedVariables.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n          record = crossedVariables.record(i);\n          levs = _.values(record);\n          _results.push(_.reduce(levs, (function(a, b) {\n            return a + \":\" + b;\n          })));\n        }\n        return _results;\n      })();\n      values = itemSpec[\"values\"];\n      conditionTable = new DataTable(_.pick(itemSpec, attrnames));\n      itemSets = (function() {\n        var _i, _ref, _results;\n        _results = [];\n        for (i = _i = 0, _ref = crossedVariables.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n          record = crossedVariables.record(i);\n          indices = conditionTable.whichRow(record);\n          _results.push((function() {\n            var _j, _len, _results1;\n            _results1 = [];\n            for (_j = 0, _len = indices.length; _j < _len; _j++) {\n              j = indices[_j];\n              _results1.push(values[j]);\n            }\n            return _results1;\n          })());\n        }\n        return _results;\n      })();\n      return _.zipObject(keySet, itemSets);\n    };\n\n    ExpDesign.prototype.init = function(spec) {\n      this.design = spec[\"Design\"];\n      this.variables = this.design[\"Variables\"];\n      this.itemSpec = spec[\"Items\"];\n      this.structure = this.design[\"Structure\"];\n      this.factorNames = _.keys(this.variables);\n      this.crossed = this.variables[\"Crossed\"];\n      return this.auxiliary = this.variables[\"Auxiliary\"];\n    };\n\n    ExpDesign.prototype.initStructure = function() {\n      if (this.structure[\"type\"] === \"Block\") {\n        if (!_.has(this.structure, \"reps_per_block\")) {\n          this.structure[\"reps_per_block\"] = 1;\n        }\n        this.reps_per_block = this.structure[\"reps_per_block\"];\n        return this.blocks = this.structure[\"blocks\"];\n      } else {\n        this.reps_per_block = 1;\n        return this.blocks = 1;\n      }\n    };\n\n    ExpDesign.prototype.makeConditionalSampler = function(crossedSpec, crossedItems) {\n      var crossedItemMap, crossedItemName, key;\n      crossedItemName = _.keys(crossedItems)[0];\n      console.log(\"names:\", crossedSpec.names());\n      crossedItemMap = (function() {\n        var _i, _len, _ref, _results;\n        _ref = crossedSpec.names();\n        _results = [];\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          key = _ref[_i];\n          _results.push(crossedItems[crossedItemName][key]);\n        }\n        return _results;\n      })();\n      crossedItemMap = _.zipObject(_.keys(this.crossed), crossedItemMap);\n      console.log(\"item map: \", crossedItemMap);\n      return new ConditionalSampler(crossedItems[crossedItemName].values, new DataTable(crossedItemMap), crossedSpec);\n    };\n\n    ExpDesign.prototype.makeCrossedSpec = function(crossed, nblocks, nreps) {\n      var factors, key, val;\n      factors = (function() {\n        var _results;\n        _results = [];\n        for (key in crossed) {\n          val = crossed[key];\n          _results.push(new FactorSpec(nblocks, nreps, key, val.levels));\n        }\n        return _results;\n      })();\n      return crossed = new CrossedFactorSpec(nblocks, nreps, factors);\n    };\n\n    ExpDesign.prototype.makeFactorSpec = function(fac, nblocks, nreps) {\n      return new FactorSpec(nblocks, nreps, _.keys(fac)[0], _.values(fac)[0]);\n    };\n\n    function ExpDesign(spec) {\n      var crossedItems, crossedSampler;\n      if (spec == null) {\n        spec = {};\n      }\n      ExpDesign.validate(spec);\n      this.init(spec);\n      this.initStructure();\n      this.crossedSpec = this.makeCrossedSpec(this.crossed, this.blocks, this.reps_per_block);\n      crossedItems = this.itemSpec.Crossed;\n      crossedSampler = this.makeConditionalSampler(this.crossedSpec, crossedItems);\n      this.fullDesign = this.crossedSpec.expanded.bindcol(_.keys(crossedItems)[0], crossedSampler.take(this.crossedSpec.expanded.nrow()));\n      console.log(this.crossedDesign);\n    }\n\n    return ExpDesign;\n\n  })();\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/samplers.js":{"id":71,"canonicalName":"lib/samplers.js","code":"(function () {\n    var CombinatoricSampler, ConditionalSampler, DataTable, ExhaustiveSampler, GridSampler, MatchSampler, ReplacementSampler, Sampler, UniformSampler, utils, _, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        }, __slice = [].slice;\n    utils = require('69', module);\n    _ = require('16', module);\n    DataTable = require('70', module).DataTable;\n    Sampler = function () {\n        function Sampler(items) {\n            var _i, _ref, _results;\n            this.items = items;\n            this.indexBuffer = _.shuffle(function () {\n                _results = [];\n                for (var _i = 0, _ref = this.items.length; 0 <= _ref ? _i < _ref : _i > _ref; 0 <= _ref ? _i++ : _i--) {\n                    _results.push(_i);\n                }\n                return _results;\n            }.apply(this));\n        }\n        Sampler.prototype.next = function () {\n            var i, _i, _ref, _results;\n            i = this.indexBuffer.length > 0 ? this.indexBuffer.shift() : (this.indexBuffer = _.shuffle(function () {\n                _results = [];\n                for (var _i = 0, _ref = this.items.length; 0 <= _ref ? _i < _ref : _i > _ref; 0 <= _ref ? _i++ : _i--) {\n                    _results.push(_i);\n                }\n                return _results;\n            }.apply(this)), this.indexBuffer.shift());\n            return this.items[i];\n        };\n        Sampler.prototype.take = function (n) {\n            var i, ret, _i, _ref, _results;\n            if (n > this.items.length) {\n                throw 'cannot take sample larger than the number of items when using non-replacing sampler';\n            }\n            this.indexBuffer = _.shuffle(function () {\n                _results = [];\n                for (var _i = 0, _ref = this.items.length; 0 <= _ref ? _i < _ref : _i > _ref; 0 <= _ref ? _i++ : _i--) {\n                    _results.push(_i);\n                }\n                return _results;\n            }.apply(this));\n            ret = function () {\n                var _j, _results1;\n                _results1 = [];\n                for (i = _j = 0; 0 <= n ? _j < n : _j > n; i = 0 <= n ? ++_j : --_j) {\n                    _results1.push(this.next());\n                }\n                return _results1;\n            }.call(this);\n            return ret;\n        };\n        Sampler.prototype.takeOne = function () {\n            return this.take(1)[0];\n        };\n        return Sampler;\n    }();\n    exports.Sampler = Sampler;\n    exports.ReplacementSampler = ReplacementSampler = function (_super) {\n        __extends(ReplacementSampler, _super);\n        function ReplacementSampler() {\n            return ReplacementSampler.__super__.constructor.apply(this, arguments);\n        }\n        ReplacementSampler.prototype.sampleFrom = function (items, n) {\n            return utils.sample(items, n, true);\n        };\n        ReplacementSampler.prototype.take = function (n) {\n            return this.sampleFrom(this.items, n);\n        };\n        return ReplacementSampler;\n    }(Sampler);\n    exports.ExhaustiveSampler = ExhaustiveSampler = function (_super) {\n        __extends(ExhaustiveSampler, _super);\n        ExhaustiveSampler.fillBuffer = function (items, n) {\n            var buf, i;\n            buf = function () {\n                var _i, _results;\n                _results = [];\n                for (i = _i = 1; 1 <= n ? _i <= n : _i >= n; i = 1 <= n ? ++_i : --_i) {\n                    _results.push(_.shuffle(items));\n                }\n                return _results;\n            }();\n            return _.flatten(buf);\n        };\n        function ExhaustiveSampler(items) {\n            this.items = items;\n            this.buffer = ExhaustiveSampler.fillBuffer(this.items, 10);\n        }\n        ExhaustiveSampler.prototype.take = function (n) {\n            var buf, buflen, res;\n            if (n <= this.buffer.length) {\n                res = _.take(this.buffer, n);\n                this.buffer = _.drop(this.buffer, n);\n                return res;\n            } else {\n                buflen = Math.max(n, 10 * this.items.length);\n                buf = ExhaustiveSampler.fillBuffer(this.items, buflen / this.items.length);\n                this.buffer = this.buffer.concat(buf);\n                return this.take(n);\n            }\n        };\n        return ExhaustiveSampler;\n    }(Sampler);\n    exports.MatchSampler = MatchSampler = function () {\n        function MatchSampler(sampler) {\n            this.sampler = sampler;\n        }\n        MatchSampler.prototype.take = function (n, match) {\n            var probe, probeIndex, sam;\n            if (match == null) {\n                match = true;\n            }\n            sam = this.sampler.take(n);\n            if (match) {\n                probe = utils.sample(sam, 1)[0];\n            } else {\n                probe = this.sampler.take(1)[0];\n            }\n            probeIndex = _.indexOf(sam, probe);\n            return {\n                targetSet: sam,\n                probe: probe,\n                probeIndex: probeIndex,\n                match: match\n            };\n        };\n        return MatchSampler;\n    }();\n    exports.UniformSampler = UniformSampler = function (_super) {\n        __extends(UniformSampler, _super);\n        UniformSampler.validate = function (range) {\n            if (range.length !== 2) {\n                throw 'range must be an array with two values (min, max)';\n            }\n            if (range[1] <= range[0]) {\n                throw 'range[1] must > range[0]';\n            }\n        };\n        function UniformSampler(range) {\n            this.range = range;\n            this.interval = this.range[1] - this.range[0];\n        }\n        UniformSampler.prototype.take = function (n) {\n            var i, nums;\n            nums = function () {\n                var _i, _results;\n                _results = [];\n                for (i = _i = 1; 1 <= n ? _i <= n : _i >= n; i = 1 <= n ? ++_i : --_i) {\n                    _results.push(Math.round(Math.random() * this.interval));\n                }\n                return _results;\n            }.call(this);\n            return nums;\n        };\n        return UniformSampler;\n    }(Sampler);\n    exports.CombinatoricSampler = CombinatoricSampler = function (_super) {\n        __extends(CombinatoricSampler, _super);\n        function CombinatoricSampler() {\n            var samplers;\n            samplers = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n            this.samplers = samplers;\n        }\n        CombinatoricSampler.prototype.take = function (n) {\n            var i, j, xs, _i, _results;\n            _results = [];\n            for (i = _i = 0; 0 <= n ? _i < n : _i > n; i = 0 <= n ? ++_i : --_i) {\n                xs = function () {\n                    var _j, _ref, _results1;\n                    _results1 = [];\n                    for (j = _j = 0, _ref = this.samplers.length; 0 <= _ref ? _j < _ref : _j > _ref; j = 0 <= _ref ? ++_j : --_j) {\n                        _results1.push(this.samplers[j].take(1));\n                    }\n                    return _results1;\n                }.call(this);\n                _results.push(_.flatten(xs));\n            }\n            return _results;\n        };\n        return CombinatoricSampler;\n    }(Sampler);\n    exports.GridSampler = GridSampler = function (_super) {\n        __extends(GridSampler, _super);\n        function GridSampler(x, y) {\n            var i;\n            this.x = x;\n            this.y = y;\n            this.grid = DataTable.expand({\n                x: this.x,\n                y: this.y\n            });\n            console.log('rows:', this.grid.nrow());\n            this.tuples = function () {\n                var _i, _ref, _results;\n                _results = [];\n                for (i = _i = 0, _ref = this.grid.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                    _results.push(_.values(this.grid.record(i)));\n                }\n                return _results;\n            }.call(this);\n        }\n        GridSampler.prototype.take = function (n) {\n            return utils.sample(this.tuples, n);\n        };\n        return GridSampler;\n    }(Sampler);\n    exports.ConditionalSampler = ConditionalSampler = function (_super) {\n        __extends(ConditionalSampler, _super);\n        ConditionalSampler.prototype.makeItemSubsets = function () {\n            var ctable, i, indices, itemSets, j, keySet, levs, record;\n            ctable = this.factorSpec.conditionTable;\n            keySet = function () {\n                var _i, _ref, _results;\n                _results = [];\n                for (i = _i = 0, _ref = ctable.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                    record = ctable.record(i);\n                    levs = _.values(record);\n                    _results.push(_.reduce(levs, function (a, b) {\n                        return a + ':' + b;\n                    }));\n                }\n                return _results;\n            }();\n            console.log(keySet);\n            itemSets = function () {\n                var _i, _ref, _results;\n                _results = [];\n                for (i = _i = 0, _ref = ctable.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                    record = ctable.record(i);\n                    indices = this.itemMap.whichRow(record);\n                    _results.push(function () {\n                        var _j, _len, _results1;\n                        _results1 = [];\n                        for (_j = 0, _len = indices.length; _j < _len; _j++) {\n                            j = indices[_j];\n                            _results1.push(this.items[j]);\n                        }\n                        return _results1;\n                    }.call(this));\n                }\n                return _results;\n            }.call(this);\n            console.log(itemSets);\n            return _.zipObject(keySet, itemSets);\n        };\n        function ConditionalSampler(items, itemMap, factorSpec) {\n            var key, value, _ref;\n            this.items = items;\n            this.itemMap = itemMap;\n            this.factorSpec = factorSpec;\n            this.keyMap = this.makeItemSubsets();\n            this.conditions = _.keys(this.keyMap);\n            this.samplerSet = {};\n            _ref = this.keyMap;\n            for (key in _ref) {\n                value = _ref[key];\n                this.samplerSet[key] = new ExhaustiveSampler(value);\n            }\n        }\n        ConditionalSampler.prototype.take = function (n) {\n            var keys;\n            keys = utils.repLen(this.conditions, n);\n            return _.flatten(this.takeCondition(keys));\n        };\n        ConditionalSampler.prototype.takeCondition = function (keys) {\n            var key, _i, _len, _results;\n            _results = [];\n            for (_i = 0, _len = keys.length; _i < _len; _i++) {\n                key = keys[_i];\n                _results.push(this.samplerSet[key].take(1));\n            }\n            return _results;\n        };\n        return ConditionalSampler;\n    }(Sampler);\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/samplers.js\"],\"names\":[\"CombinatoricSampler\",\"ConditionalSampler\",\"DataTable\",\"ExhaustiveSampler\",\"GridSampler\",\"MatchSampler\",\"ReplacementSampler\",\"Sampler\",\"UniformSampler\",\"utils\",\"_\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"__slice\",\"slice\",\"require\",\"items\",\"_i\",\"_ref\",\"_results\",\"indexBuffer\",\"shuffle\",\"length\",\"push\",\"apply\",\"next\",\"i\",\"shift\",\"take\",\"n\",\"ret\",\"_j\",\"_results1\",\"takeOne\",\"exports\",\"_super\",\"arguments\",\"sampleFrom\",\"sample\",\"fillBuffer\",\"buf\",\"flatten\",\"buffer\",\"buflen\",\"res\",\"drop\",\"Math\",\"max\",\"concat\",\"sampler\",\"match\",\"probe\",\"probeIndex\",\"sam\",\"indexOf\",\"targetSet\",\"validate\",\"range\",\"interval\",\"nums\",\"round\",\"random\",\"samplers\",\"j\",\"xs\",\"x\",\"y\",\"grid\",\"expand\",\"console\",\"log\",\"nrow\",\"tuples\",\"values\",\"record\",\"makeItemSubsets\",\"ctable\",\"indices\",\"itemSets\",\"keySet\",\"levs\",\"factorSpec\",\"conditionTable\",\"reduce\",\"a\",\"b\",\"itemMap\",\"whichRow\",\"_len\",\"zipObject\",\"value\",\"keyMap\",\"conditions\",\"keys\",\"samplerSet\",\"repLen\",\"takeCondition\"],\"mappings\":\"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\"}","lineCount":287,"mtime":1395245873000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/lib/utils.js","canonicalName":"lib/utils.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/datatable.js","canonicalName":"lib/datatable.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var CombinatoricSampler, ConditionalSampler, DataTable, ExhaustiveSampler, GridSampler, MatchSampler, ReplacementSampler, Sampler, UniformSampler, utils, _,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    __slice = [].slice;\n\n  utils = require(\"./utils\");\n\n  _ = require('lodash');\n\n  DataTable = require(\"./datatable\").DataTable;\n\n  Sampler = (function() {\n    function Sampler(items) {\n      var _i, _ref, _results;\n      this.items = items;\n      this.indexBuffer = _.shuffle((function() {\n        _results = [];\n        for (var _i = 0, _ref = this.items.length; 0 <= _ref ? _i < _ref : _i > _ref; 0 <= _ref ? _i++ : _i--){ _results.push(_i); }\n        return _results;\n      }).apply(this));\n    }\n\n    Sampler.prototype.next = function() {\n      var i, _i, _ref, _results;\n      i = this.indexBuffer.length > 0 ? this.indexBuffer.shift() : (this.indexBuffer = _.shuffle((function() {\n        _results = [];\n        for (var _i = 0, _ref = this.items.length; 0 <= _ref ? _i < _ref : _i > _ref; 0 <= _ref ? _i++ : _i--){ _results.push(_i); }\n        return _results;\n      }).apply(this)), this.indexBuffer.shift());\n      return this.items[i];\n    };\n\n    Sampler.prototype.take = function(n) {\n      var i, ret, _i, _ref, _results;\n      if (n > this.items.length) {\n        throw \"cannot take sample larger than the number of items when using non-replacing sampler\";\n      }\n      this.indexBuffer = _.shuffle((function() {\n        _results = [];\n        for (var _i = 0, _ref = this.items.length; 0 <= _ref ? _i < _ref : _i > _ref; 0 <= _ref ? _i++ : _i--){ _results.push(_i); }\n        return _results;\n      }).apply(this));\n      ret = (function() {\n        var _j, _results1;\n        _results1 = [];\n        for (i = _j = 0; 0 <= n ? _j < n : _j > n; i = 0 <= n ? ++_j : --_j) {\n          _results1.push(this.next());\n        }\n        return _results1;\n      }).call(this);\n      return ret;\n    };\n\n    Sampler.prototype.takeOne = function() {\n      return this.take(1)[0];\n    };\n\n    return Sampler;\n\n  })();\n\n  exports.Sampler = Sampler;\n\n  exports.ReplacementSampler = ReplacementSampler = (function(_super) {\n    __extends(ReplacementSampler, _super);\n\n    function ReplacementSampler() {\n      return ReplacementSampler.__super__.constructor.apply(this, arguments);\n    }\n\n    ReplacementSampler.prototype.sampleFrom = function(items, n) {\n      return utils.sample(items, n, true);\n    };\n\n    ReplacementSampler.prototype.take = function(n) {\n      return this.sampleFrom(this.items, n);\n    };\n\n    return ReplacementSampler;\n\n  })(Sampler);\n\n  exports.ExhaustiveSampler = ExhaustiveSampler = (function(_super) {\n    __extends(ExhaustiveSampler, _super);\n\n    ExhaustiveSampler.fillBuffer = function(items, n) {\n      var buf, i;\n      buf = (function() {\n        var _i, _results;\n        _results = [];\n        for (i = _i = 1; 1 <= n ? _i <= n : _i >= n; i = 1 <= n ? ++_i : --_i) {\n          _results.push(_.shuffle(items));\n        }\n        return _results;\n      })();\n      return _.flatten(buf);\n    };\n\n    function ExhaustiveSampler(items) {\n      this.items = items;\n      this.buffer = ExhaustiveSampler.fillBuffer(this.items, 10);\n    }\n\n    ExhaustiveSampler.prototype.take = function(n) {\n      var buf, buflen, res;\n      if (n <= this.buffer.length) {\n        res = _.take(this.buffer, n);\n        this.buffer = _.drop(this.buffer, n);\n        return res;\n      } else {\n        buflen = Math.max(n, 10 * this.items.length);\n        buf = ExhaustiveSampler.fillBuffer(this.items, buflen / this.items.length);\n        this.buffer = this.buffer.concat(buf);\n        return this.take(n);\n      }\n    };\n\n    return ExhaustiveSampler;\n\n  })(Sampler);\n\n  exports.MatchSampler = MatchSampler = (function() {\n    function MatchSampler(sampler) {\n      this.sampler = sampler;\n    }\n\n    MatchSampler.prototype.take = function(n, match) {\n      var probe, probeIndex, sam;\n      if (match == null) {\n        match = true;\n      }\n      sam = this.sampler.take(n);\n      if (match) {\n        probe = utils.sample(sam, 1)[0];\n      } else {\n        probe = this.sampler.take(1)[0];\n      }\n      probeIndex = _.indexOf(sam, probe);\n      return {\n        targetSet: sam,\n        probe: probe,\n        probeIndex: probeIndex,\n        match: match\n      };\n    };\n\n    return MatchSampler;\n\n  })();\n\n  exports.UniformSampler = UniformSampler = (function(_super) {\n    __extends(UniformSampler, _super);\n\n    UniformSampler.validate = function(range) {\n      if (range.length !== 2) {\n        throw \"range must be an array with two values (min, max)\";\n      }\n      if (range[1] <= range[0]) {\n        throw \"range[1] must > range[0]\";\n      }\n    };\n\n    function UniformSampler(range) {\n      this.range = range;\n      this.interval = this.range[1] - this.range[0];\n    }\n\n    UniformSampler.prototype.take = function(n) {\n      var i, nums;\n      nums = (function() {\n        var _i, _results;\n        _results = [];\n        for (i = _i = 1; 1 <= n ? _i <= n : _i >= n; i = 1 <= n ? ++_i : --_i) {\n          _results.push(Math.round(Math.random() * this.interval));\n        }\n        return _results;\n      }).call(this);\n      return nums;\n    };\n\n    return UniformSampler;\n\n  })(Sampler);\n\n  exports.CombinatoricSampler = CombinatoricSampler = (function(_super) {\n    __extends(CombinatoricSampler, _super);\n\n    function CombinatoricSampler() {\n      var samplers;\n      samplers = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n      this.samplers = samplers;\n    }\n\n    CombinatoricSampler.prototype.take = function(n) {\n      var i, j, xs, _i, _results;\n      _results = [];\n      for (i = _i = 0; 0 <= n ? _i < n : _i > n; i = 0 <= n ? ++_i : --_i) {\n        xs = (function() {\n          var _j, _ref, _results1;\n          _results1 = [];\n          for (j = _j = 0, _ref = this.samplers.length; 0 <= _ref ? _j < _ref : _j > _ref; j = 0 <= _ref ? ++_j : --_j) {\n            _results1.push(this.samplers[j].take(1));\n          }\n          return _results1;\n        }).call(this);\n        _results.push(_.flatten(xs));\n      }\n      return _results;\n    };\n\n    return CombinatoricSampler;\n\n  })(Sampler);\n\n  exports.GridSampler = GridSampler = (function(_super) {\n    __extends(GridSampler, _super);\n\n    function GridSampler(x, y) {\n      var i;\n      this.x = x;\n      this.y = y;\n      this.grid = DataTable.expand({\n        x: this.x,\n        y: this.y\n      });\n      console.log(\"rows:\", this.grid.nrow());\n      this.tuples = (function() {\n        var _i, _ref, _results;\n        _results = [];\n        for (i = _i = 0, _ref = this.grid.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n          _results.push(_.values(this.grid.record(i)));\n        }\n        return _results;\n      }).call(this);\n    }\n\n    GridSampler.prototype.take = function(n) {\n      return utils.sample(this.tuples, n);\n    };\n\n    return GridSampler;\n\n  })(Sampler);\n\n  exports.ConditionalSampler = ConditionalSampler = (function(_super) {\n    __extends(ConditionalSampler, _super);\n\n    ConditionalSampler.prototype.makeItemSubsets = function() {\n      var ctable, i, indices, itemSets, j, keySet, levs, record;\n      ctable = this.factorSpec.conditionTable;\n      keySet = (function() {\n        var _i, _ref, _results;\n        _results = [];\n        for (i = _i = 0, _ref = ctable.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n          record = ctable.record(i);\n          levs = _.values(record);\n          _results.push(_.reduce(levs, (function(a, b) {\n            return a + \":\" + b;\n          })));\n        }\n        return _results;\n      })();\n      console.log(keySet);\n      itemSets = (function() {\n        var _i, _ref, _results;\n        _results = [];\n        for (i = _i = 0, _ref = ctable.nrow(); 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n          record = ctable.record(i);\n          indices = this.itemMap.whichRow(record);\n          _results.push((function() {\n            var _j, _len, _results1;\n            _results1 = [];\n            for (_j = 0, _len = indices.length; _j < _len; _j++) {\n              j = indices[_j];\n              _results1.push(this.items[j]);\n            }\n            return _results1;\n          }).call(this));\n        }\n        return _results;\n      }).call(this);\n      console.log(itemSets);\n      return _.zipObject(keySet, itemSets);\n    };\n\n    function ConditionalSampler(items, itemMap, factorSpec) {\n      var key, value, _ref;\n      this.items = items;\n      this.itemMap = itemMap;\n      this.factorSpec = factorSpec;\n      this.keyMap = this.makeItemSubsets();\n      this.conditions = _.keys(this.keyMap);\n      this.samplerSet = {};\n      _ref = this.keyMap;\n      for (key in _ref) {\n        value = _ref[key];\n        this.samplerSet[key] = new ExhaustiveSampler(value);\n      }\n    }\n\n    ConditionalSampler.prototype.take = function(n) {\n      var keys;\n      keys = utils.repLen(this.conditions, n);\n      return _.flatten(this.takeCondition(keys));\n    };\n\n    ConditionalSampler.prototype.takeCondition = function(keys) {\n      var key, _i, _len, _results;\n      _results = [];\n      for (_i = 0, _len = keys.length; _i < _len; _i++) {\n        key = keys[_i];\n        _results.push(this.samplerSet[key].take(1));\n      }\n      return _results;\n    };\n\n    return ConditionalSampler;\n\n  })(Sampler);\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/dotmotion.js":{"id":68,"canonicalName":"lib/dotmotion.js","code":"(function () {\n    var Base, DotSet, Kinetic, RandomDotMotion, x, _, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Base = require('72', module);\n    _ = require('16', module);\n    Kinetic = require('15', module);\n    DotSet = function () {\n        DotSet.randomDelta = function (distance) {\n            var rads;\n            rads = Math.random() * Math.PI * 2;\n            return [\n                distance * Math.cos(rads),\n                distance * Math.sin(rads)\n            ];\n        };\n        DotSet.coherentDelta = function (distance, direction) {\n            return [\n                distance * Math.cos(Math.PI * direction / 180),\n                distance * Math.sin(Math.PI * direction / 180)\n            ];\n        };\n        DotSet.pointInCircle = function () {\n            var r, t, u;\n            t = 2 * Math.PI * Math.random();\n            u = Math.random() + Math.random();\n            r = u > 1 ? 2 - u : u;\n            return [\n                r * Math.cos(t),\n                r * Math.sin(t)\n            ];\n        };\n        DotSet.inCircle = function (center_x, center_y, radius, x, y) {\n            var squareDist;\n            squareDist = Math.pow(center_x - x, 2) + Math.pow(center_y - y, 2);\n            return squareDist <= Math.pow(radius, 2);\n        };\n        function DotSet(ndots, nparts, coherence) {\n            this.ndots = ndots;\n            this.nparts = nparts != null ? nparts : 3;\n            if (coherence == null) {\n                coherence = 0.5;\n            }\n            this.frameNum = 0;\n            this.dotsPerSet = Math.round(this.ndots / this.nparts);\n            this.dotSets = _.map([\n                0,\n                1,\n                2\n            ], function (_this) {\n                return function (i) {\n                    var _i, _ref, _results;\n                    return _.map(function () {\n                        _results = [];\n                        for (var _i = 0, _ref = _this.dotsPerSet; 0 <= _ref ? _i < _ref : _i > _ref; 0 <= _ref ? _i++ : _i--) {\n                            _results.push(_i);\n                        }\n                        return _results;\n                    }.apply(this), function (d) {\n                        return [\n                            Math.random(),\n                            Math.random()\n                        ];\n                    });\n                };\n            }(this));\n        }\n        DotSet.prototype.getDotPartition = function (i) {\n            return this.dotSets[i];\n        };\n        DotSet.prototype.nextFrame = function (coherence, distance, direction) {\n            var delta, dset, i, partition, res, xy;\n            partition = this.frameNum % this.nparts;\n            dset = this.dotSets[partition];\n            res = function () {\n                var _i, _ref, _results;\n                _results = [];\n                for (i = _i = 0, _ref = dset.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                    xy = dset[i];\n                    delta = Math.random() < coherence ? DotSet.coherentDelta(distance, direction) : DotSet.randomDelta(distance);\n                    xy = [\n                        xy[0] + delta[0],\n                        xy[1] + delta[1]\n                    ];\n                    if (xy[0] < 0 || xy[0] > 1 || xy[1] < 0 || xy[1] > 1) {\n                        xy = [\n                            Math.random(),\n                            Math.random()\n                        ];\n                    }\n                    _results.push(dset[i] = xy);\n                }\n                return _results;\n            }();\n            this.frameNum = this.frameNum + 1;\n            return res;\n        };\n        return DotSet;\n    }();\n    exports.RandomDotMotion = RandomDotMotion = function (_super) {\n        __extends(RandomDotMotion, _super);\n        function RandomDotMotion(spec) {\n            if (spec == null) {\n                spec = {\n                    x: 0,\n                    y: 0,\n                    numDots: 70,\n                    apRadius: 400,\n                    dotSpeed: 0.02,\n                    dotSize: 2,\n                    coherence: 0.55,\n                    partitions: 3\n                };\n            }\n            this.numDots = spec.numDots;\n            this.apRadius = spec.apRadius;\n            this.dotSpeed = spec.dotSpeed;\n            this.dotSize = spec.dotSize;\n            this.coherence = spec.coherence;\n            this.partitions = spec.partitions;\n            this.x = spec.x;\n            this.y = spec.y;\n            this.dotSet = new DotSet(this.numDots, 3, 0.5);\n        }\n        RandomDotMotion.prototype.createDots = function () {\n            var dots, xy, _i, _len, _results;\n            dots = this.dotSet.nextFrame(this.coherence, this.dotSpeed, 180);\n            _results = [];\n            for (_i = 0, _len = dots.length; _i < _len; _i++) {\n                xy = dots[_i];\n                _results.push(new Kinetic.Rect({\n                    x: this.x + this.apRadius * xy[0],\n                    y: this.x + this.apRadius * xy[1],\n                    width: this.dotSize,\n                    height: this.dotSize,\n                    fill: 'green'\n                }));\n            }\n            return _results;\n        };\n        RandomDotMotion.prototype.createInitialDots = function () {\n            var dpart, i, xy, _i, _ref, _results;\n            _results = [];\n            for (i = _i = 0, _ref = this.partitions; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                dpart = this.dotSet.getDotPartition(i);\n                _results.push(function () {\n                    var _j, _len, _results1;\n                    _results1 = [];\n                    for (_j = 0, _len = dpart.length; _j < _len; _j++) {\n                        xy = dpart[_j];\n                        _results1.push(new Kinetic.Rect({\n                            x: this.x + this.apRadius * xy[0],\n                            y: this.x + this.apRadius * xy[1],\n                            width: this.dotSize,\n                            height: this.dotSize,\n                            fill: 'green'\n                        }));\n                    }\n                    return _results1;\n                }.call(this));\n            }\n            return _results;\n        };\n        RandomDotMotion.prototype.displayInitialDots = function (nodes, group) {\n            var node, _i, _len, _results;\n            _results = [];\n            for (_i = 0, _len = nodes.length; _i < _len; _i++) {\n                node = nodes[_i];\n                _results.push(group.add(node));\n            }\n            return _results;\n        };\n        RandomDotMotion.prototype.render = function (context, layer) {\n            var i, nodeSets, _i, _ref;\n            this.groups = function () {\n                var _i, _ref, _results;\n                _results = [];\n                for (i = _i = 0, _ref = this.partitions; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                    _results.push(new Kinetic.Group({ listening: false }));\n                }\n                return _results;\n            }.call(this);\n            _.map(this.groups, function (g) {\n                return layer.add(g);\n            });\n            nodeSets = this.createInitialDots();\n            for (i = _i = 0, _ref = this.partitions; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                this.displayInitialDots(nodeSets[i], this.groups[i]);\n            }\n            layer.draw();\n            this.anim = new Kinetic.Animation(function (_this) {\n                return function (frame) {\n                    var curset, dx, part, xy, _j, _ref1, _results;\n                    dx = _this.dotSet.nextFrame(_this.coherence, _this.dotSpeed, 180);\n                    part = _this.dotSet.frameNum % _this.partitions;\n                    curset = nodeSets[part];\n                    _results = [];\n                    for (i = _j = 0, _ref1 = curset.length; 0 <= _ref1 ? _j < _ref1 : _j > _ref1; i = 0 <= _ref1 ? ++_j : --_j) {\n                        xy = dx[i];\n                        xy = [\n                            xy[0] * _this.apRadius,\n                            xy[1] * _this.apRadius\n                        ];\n                        console.log(xy);\n                        curset[i].setPosition(xy);\n                        if (!DotSet.inCircle(0.5 * _this.apRadius, 0.5 * _this.apRadius, _this.apRadius / 2, xy[0], xy[1])) {\n                            _results.push(curset[i].hide());\n                        } else {\n                            _results.push(curset[i].show());\n                        }\n                    }\n                    return _results;\n                };\n            }(this), layer);\n            layer.draw();\n            return this.anim.start();\n        };\n        RandomDotMotion.prototype.render2 = function (context, layer) {\n            var i, nodeSets, _i, _ref;\n            this.layers = function () {\n                var _i, _ref, _results;\n                _results = [];\n                for (i = _i = 0, _ref = this.partitions; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                    _results.push(new Kinetic.Layer({ listening: false }));\n                }\n                return _results;\n            }.call(this);\n            _.map(this.layers, function (l) {\n                return context.stage.add(l);\n            });\n            nodeSets = this.createInitialDots();\n            for (i = _i = 0, _ref = this.partitions; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n                this.displayInitialDots(nodeSets[i], this.layers[i]);\n            }\n            this.anim = new Kinetic.Animation(function (_this) {\n                return function (frame) {\n                    var curset, dx, part, xy, _j, _ref1;\n                    dx = _this.dotSet.nextFrame(_this.coherence, _this.dotSpeed, 180);\n                    part = _this.dotSet.frameNum % _this.partitions;\n                    curset = nodeSets[part];\n                    for (i = _j = 0, _ref1 = curset.length; 0 <= _ref1 ? _j < _ref1 : _j > _ref1; i = 0 <= _ref1 ? ++_j : --_j) {\n                        xy = dx[i];\n                        xy = [\n                            xy[0] * _this.apRadius,\n                            xy[1] * _this.apRadius\n                        ];\n                        console.log(xy);\n                        curset[i].setPosition(xy);\n                    }\n                    return _this.layers[part].draw();\n                };\n            }(this));\n            layer.draw();\n            return this.anim.start();\n        };\n        RandomDotMotion.prototype.stop = function (context) {\n            return this.anim.stop();\n        };\n        return RandomDotMotion;\n    }(Base.Stimulus);\n    x = new DotSet(51, 3);\n    console.log(x.dotSets);\n    console.log('NEXT', x.nextFrame(0.5, 0.01, 180));\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/dotmotion.js\"],\"names\":[\"Base\",\"DotSet\",\"Kinetic\",\"RandomDotMotion\",\"x\",\"_\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"randomDelta\",\"distance\",\"rads\",\"Math\",\"random\",\"PI\",\"cos\",\"sin\",\"coherentDelta\",\"direction\",\"pointInCircle\",\"r\",\"t\",\"u\",\"inCircle\",\"center_x\",\"center_y\",\"radius\",\"y\",\"squareDist\",\"pow\",\"ndots\",\"nparts\",\"coherence\",\"frameNum\",\"dotsPerSet\",\"round\",\"dotSets\",\"map\",\"_this\",\"i\",\"_i\",\"_ref\",\"_results\",\"push\",\"apply\",\"d\",\"getDotPartition\",\"nextFrame\",\"delta\",\"dset\",\"partition\",\"res\",\"xy\",\"length\",\"exports\",\"_super\",\"spec\",\"numDots\",\"apRadius\",\"dotSpeed\",\"dotSize\",\"partitions\",\"dotSet\",\"createDots\",\"dots\",\"_len\",\"Rect\",\"width\",\"height\",\"fill\",\"createInitialDots\",\"dpart\",\"_j\",\"_results1\",\"displayInitialDots\",\"nodes\",\"group\",\"node\",\"add\",\"render\",\"context\",\"layer\",\"nodeSets\",\"groups\",\"Group\",\"listening\",\"g\",\"draw\",\"anim\",\"Animation\",\"frame\",\"curset\",\"dx\",\"part\",\"_ref1\",\"console\",\"log\",\"setPosition\",\"hide\",\"show\",\"start\",\"render2\",\"layers\",\"Layer\",\"l\",\"stage\",\"stop\",\"Stimulus\"],\"mappings\":\"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\"}","lineCount":274,"mtime":1395245873000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var Base, DotSet, Kinetic, RandomDotMotion, x, _,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Base = require(\"./stimresp\");\n\n  _ = require('lodash');\n\n  Kinetic = require(\"../jslibs/kinetic.js\");\n\n  DotSet = (function() {\n    DotSet.randomDelta = function(distance) {\n      var rads;\n      rads = Math.random() * Math.PI * 2;\n      return [distance * Math.cos(rads), distance * Math.sin(rads)];\n    };\n\n    DotSet.coherentDelta = function(distance, direction) {\n      return [distance * Math.cos(Math.PI * direction / 180), distance * Math.sin(Math.PI * direction / 180)];\n    };\n\n    DotSet.pointInCircle = function() {\n      var r, t, u;\n      t = 2 * Math.PI * Math.random();\n      u = Math.random() + Math.random();\n      r = u > 1 ? 2 - u : u;\n      return [r * Math.cos(t), r * Math.sin(t)];\n    };\n\n    DotSet.inCircle = function(center_x, center_y, radius, x, y) {\n      var squareDist;\n      squareDist = Math.pow(center_x - x, 2) + Math.pow(center_y - y, 2);\n      return squareDist <= Math.pow(radius, 2);\n    };\n\n    function DotSet(ndots, nparts, coherence) {\n      this.ndots = ndots;\n      this.nparts = nparts != null ? nparts : 3;\n      if (coherence == null) {\n        coherence = .5;\n      }\n      this.frameNum = 0;\n      this.dotsPerSet = Math.round(this.ndots / this.nparts);\n      this.dotSets = _.map([0, 1, 2], (function(_this) {\n        return function(i) {\n          var _i, _ref, _results;\n          return _.map((function() {\n            _results = [];\n            for (var _i = 0, _ref = _this.dotsPerSet; 0 <= _ref ? _i < _ref : _i > _ref; 0 <= _ref ? _i++ : _i--){ _results.push(_i); }\n            return _results;\n          }).apply(this), function(d) {\n            return [Math.random(), Math.random()];\n          });\n        };\n      })(this));\n    }\n\n    DotSet.prototype.getDotPartition = function(i) {\n      return this.dotSets[i];\n    };\n\n    DotSet.prototype.nextFrame = function(coherence, distance, direction) {\n      var delta, dset, i, partition, res, xy;\n      partition = this.frameNum % this.nparts;\n      dset = this.dotSets[partition];\n      res = (function() {\n        var _i, _ref, _results;\n        _results = [];\n        for (i = _i = 0, _ref = dset.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n          xy = dset[i];\n          delta = Math.random() < coherence ? DotSet.coherentDelta(distance, direction) : DotSet.randomDelta(distance);\n          xy = [xy[0] + delta[0], xy[1] + delta[1]];\n          if (xy[0] < 0 || xy[0] > 1 || xy[1] < 0 || xy[1] > 1) {\n            xy = [Math.random(), Math.random()];\n          }\n          _results.push(dset[i] = xy);\n        }\n        return _results;\n      })();\n      this.frameNum = this.frameNum + 1;\n      return res;\n    };\n\n    return DotSet;\n\n  })();\n\n  exports.RandomDotMotion = RandomDotMotion = (function(_super) {\n    __extends(RandomDotMotion, _super);\n\n    function RandomDotMotion(spec) {\n      if (spec == null) {\n        spec = {\n          x: 0,\n          y: 0,\n          numDots: 70,\n          apRadius: 400,\n          dotSpeed: .02,\n          dotSize: 2,\n          coherence: .55,\n          partitions: 3\n        };\n      }\n      this.numDots = spec.numDots;\n      this.apRadius = spec.apRadius;\n      this.dotSpeed = spec.dotSpeed;\n      this.dotSize = spec.dotSize;\n      this.coherence = spec.coherence;\n      this.partitions = spec.partitions;\n      this.x = spec.x;\n      this.y = spec.y;\n      this.dotSet = new DotSet(this.numDots, 3, .5);\n    }\n\n    RandomDotMotion.prototype.createDots = function() {\n      var dots, xy, _i, _len, _results;\n      dots = this.dotSet.nextFrame(this.coherence, this.dotSpeed, 180);\n      _results = [];\n      for (_i = 0, _len = dots.length; _i < _len; _i++) {\n        xy = dots[_i];\n        _results.push(new Kinetic.Rect({\n          x: this.x + this.apRadius * xy[0],\n          y: this.x + this.apRadius * xy[1],\n          width: this.dotSize,\n          height: this.dotSize,\n          fill: \"green\"\n        }));\n      }\n      return _results;\n    };\n\n    RandomDotMotion.prototype.createInitialDots = function() {\n      var dpart, i, xy, _i, _ref, _results;\n      _results = [];\n      for (i = _i = 0, _ref = this.partitions; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        dpart = this.dotSet.getDotPartition(i);\n        _results.push((function() {\n          var _j, _len, _results1;\n          _results1 = [];\n          for (_j = 0, _len = dpart.length; _j < _len; _j++) {\n            xy = dpart[_j];\n            _results1.push(new Kinetic.Rect({\n              x: this.x + this.apRadius * xy[0],\n              y: this.x + this.apRadius * xy[1],\n              width: this.dotSize,\n              height: this.dotSize,\n              fill: \"green\"\n            }));\n          }\n          return _results1;\n        }).call(this));\n      }\n      return _results;\n    };\n\n    RandomDotMotion.prototype.displayInitialDots = function(nodes, group) {\n      var node, _i, _len, _results;\n      _results = [];\n      for (_i = 0, _len = nodes.length; _i < _len; _i++) {\n        node = nodes[_i];\n        _results.push(group.add(node));\n      }\n      return _results;\n    };\n\n    RandomDotMotion.prototype.render = function(context, layer) {\n      var i, nodeSets, _i, _ref;\n      this.groups = (function() {\n        var _i, _ref, _results;\n        _results = [];\n        for (i = _i = 0, _ref = this.partitions; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n          _results.push(new Kinetic.Group({\n            listening: false\n          }));\n        }\n        return _results;\n      }).call(this);\n      _.map(this.groups, function(g) {\n        return layer.add(g);\n      });\n      nodeSets = this.createInitialDots();\n      for (i = _i = 0, _ref = this.partitions; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        this.displayInitialDots(nodeSets[i], this.groups[i]);\n      }\n      layer.draw();\n      this.anim = new Kinetic.Animation((function(_this) {\n        return function(frame) {\n          var curset, dx, part, xy, _j, _ref1, _results;\n          dx = _this.dotSet.nextFrame(_this.coherence, _this.dotSpeed, 180);\n          part = _this.dotSet.frameNum % _this.partitions;\n          curset = nodeSets[part];\n          _results = [];\n          for (i = _j = 0, _ref1 = curset.length; 0 <= _ref1 ? _j < _ref1 : _j > _ref1; i = 0 <= _ref1 ? ++_j : --_j) {\n            xy = dx[i];\n            xy = [xy[0] * _this.apRadius, xy[1] * _this.apRadius];\n            console.log(xy);\n            curset[i].setPosition(xy);\n            if (!DotSet.inCircle(.5 * _this.apRadius, .5 * _this.apRadius, _this.apRadius / 2, xy[0], xy[1])) {\n              _results.push(curset[i].hide());\n            } else {\n              _results.push(curset[i].show());\n            }\n          }\n          return _results;\n        };\n      })(this), layer);\n      layer.draw();\n      return this.anim.start();\n    };\n\n    RandomDotMotion.prototype.render2 = function(context, layer) {\n      var i, nodeSets, _i, _ref;\n      this.layers = (function() {\n        var _i, _ref, _results;\n        _results = [];\n        for (i = _i = 0, _ref = this.partitions; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n          _results.push(new Kinetic.Layer({\n            listening: false\n          }));\n        }\n        return _results;\n      }).call(this);\n      _.map(this.layers, function(l) {\n        return context.stage.add(l);\n      });\n      nodeSets = this.createInitialDots();\n      for (i = _i = 0, _ref = this.partitions; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        this.displayInitialDots(nodeSets[i], this.layers[i]);\n      }\n      this.anim = new Kinetic.Animation((function(_this) {\n        return function(frame) {\n          var curset, dx, part, xy, _j, _ref1;\n          dx = _this.dotSet.nextFrame(_this.coherence, _this.dotSpeed, 180);\n          part = _this.dotSet.frameNum % _this.partitions;\n          curset = nodeSets[part];\n          for (i = _j = 0, _ref1 = curset.length; 0 <= _ref1 ? _j < _ref1 : _j > _ref1; i = 0 <= _ref1 ? ++_j : --_j) {\n            xy = dx[i];\n            xy = [xy[0] * _this.apRadius, xy[1] * _this.apRadius];\n            console.log(xy);\n            curset[i].setPosition(xy);\n          }\n          return _this.layers[part].draw();\n        };\n      })(this));\n      layer.draw();\n      return this.anim.start();\n    };\n\n    RandomDotMotion.prototype.stop = function(context) {\n      return this.anim.stop();\n    };\n\n    return RandomDotMotion;\n\n  })(Base.Stimulus);\n\n  x = new DotSet(51, 3);\n\n  console.log(x.dotSets);\n\n  console.log(\"NEXT\", x.nextFrame(.5, .01, 180));\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/elements.js":{"id":66,"canonicalName":"lib/elements.js","code":"(function () {\n    var AbsoluteLayout, Background, Bacon, Base, GridLayout, Kinetic, KineticStimFactory, Layout, Q, Response, Stimulus, disableBrowserBack, doTimer, getTimestamp, input, lay, li, marked, renderable, ul, utils, _, _ref;\n    Bacon = require('22', module).Bacon;\n    Kinetic = require('15', module);\n    _ = require('16', module);\n    Q = require('17', module);\n    marked = require('45', module);\n    utils = require('69', module);\n    lay = require('73', module);\n    Base = require('72', module);\n    Stimulus = Base.Stimulus;\n    Response = Base.Response;\n    Background = require('113', module).Background;\n    _ref = require('61', module), renderable = _ref.renderable, ul = _ref.ul, li = _ref.li, input = _ref.input;\n    Layout = lay.Layout;\n    AbsoluteLayout = lay.AbsoluteLayout;\n    GridLayout = lay.GridLayout;\n    doTimer = utils.doTimer;\n    disableBrowserBack = utils.disableBrowserBack;\n    getTimestamp = utils.getTimeStamp;\n    exports.KineticStimFactory = KineticStimFactory = function () {\n        function KineticStimFactory() {\n            console.log('making stim factory');\n        }\n        KineticStimFactory.prototype.makeLayout = function (name, params, context) {\n        };\n        KineticStimFactory.prototype.makeInstructions = function (spec) {\n        };\n        KineticStimFactory.prototype.makeStimulus = function (name, params, context) {\n        };\n        KineticStimFactory.prototype.makeResponse = function (name, params, context) {\n        };\n        KineticStimFactory.prototype.makeEvent = function (stim, response) {\n        };\n        return KineticStimFactory;\n    }();\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/elements.js\"],\"names\":[\"AbsoluteLayout\",\"Background\",\"Bacon\",\"Base\",\"GridLayout\",\"Kinetic\",\"KineticStimFactory\",\"Layout\",\"Q\",\"Response\",\"Stimulus\",\"disableBrowserBack\",\"doTimer\",\"getTimestamp\",\"input\",\"lay\",\"li\",\"marked\",\"renderable\",\"ul\",\"utils\",\"_\",\"_ref\",\"require\",\"getTimeStamp\",\"exports\",\"console\",\"log\",\"prototype\",\"makeLayout\",\"name\",\"params\",\"context\",\"makeInstructions\",\"spec\",\"makeStimulus\",\"makeResponse\",\"makeEvent\",\"stim\",\"response\",\"call\"],\"mappings\":\"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\"}","lineCount":37,"mtime":1395245873000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/baconjs/dist/Bacon.js","canonicalName":"node_modules/baconjs/dist/Bacon.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/q/q.js","canonicalName":"node_modules/q/q.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/marked/lib/marked.js","canonicalName":"node_modules/marked/lib/marked.js","isNpmModule":true,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/utils.js","canonicalName":"lib/utils.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/layout.js","canonicalName":"lib/layout.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/Background.js","canonicalName":"lib/components/canvas/Background.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/teacup/lib/teacup.js","canonicalName":"node_modules/teacup/lib/teacup.js","isNpmModule":true,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var AbsoluteLayout, Background, Bacon, Base, GridLayout, Kinetic, KineticStimFactory, Layout, Q, Response, Stimulus, disableBrowserBack, doTimer, getTimestamp, input, lay, li, marked, renderable, ul, utils, _, _ref;\n\n  Bacon = require(\"baconjs\").Bacon;\n\n  Kinetic = require(\"../jslibs/kinetic\");\n\n  _ = require('lodash');\n\n  Q = require(\"q\");\n\n  marked = require(\"marked\");\n\n  utils = require(\"./utils\");\n\n  lay = require(\"./layout\");\n\n  Base = require(\"./stimresp\");\n\n  Stimulus = Base.Stimulus;\n\n  Response = Base.Response;\n\n  Background = require(\"./components/canvas/Background\").Background;\n\n  _ref = require('teacup'), renderable = _ref.renderable, ul = _ref.ul, li = _ref.li, input = _ref.input;\n\n  Layout = lay.Layout;\n\n  AbsoluteLayout = lay.AbsoluteLayout;\n\n  GridLayout = lay.GridLayout;\n\n  doTimer = utils.doTimer;\n\n  disableBrowserBack = utils.disableBrowserBack;\n\n  getTimestamp = utils.getTimeStamp;\n\n  exports.KineticStimFactory = KineticStimFactory = (function() {\n    function KineticStimFactory() {\n      console.log(\"making stim factory\");\n    }\n\n    KineticStimFactory.prototype.makeLayout = function(name, params, context) {};\n\n    KineticStimFactory.prototype.makeInstructions = function(spec) {};\n\n    KineticStimFactory.prototype.makeStimulus = function(name, params, context) {\n\n      /*\n          layoutName = _.keys(params.layout)[0]\n          layoutParams = _.values(params.layout)[0]\n      \n          new Group(stims, @makeLayout(layoutName, layoutParams, context))\n      \n        when \"Instructions\" then new Instructions(params)\n        when \"Rectangle\" then new Rectangle(params)\n        when \"Text\" then new Text(params)\n        when \"HtmlIcon\" then new HtmlIcon(params)\n      \n        else throw \"No Stimulus type of name #{name}\"\n       */\n    };\n\n    KineticStimFactory.prototype.makeResponse = function(name, params, context) {\n\n      /*console.log(\"making response\", name)\n      switch name\n        when \"KeyPress\" then new KeyPressResponse(params)\n        when \"SpaceKey\" then new SpaceKeyResponse(params)\n        when \"Timeout\" then new Timeout(params)\n        else throw new Error(\"No Response type of name #{name}\")\n       */\n    };\n\n    KineticStimFactory.prototype.makeEvent = function(stim, response) {};\n\n    return KineticStimFactory;\n\n  })();\n\n}).call(this);\n","disableSourceMap":false},"/Users/brad/WebstormProjects/psycloud/lib/components/canvas/Background.js":{"id":113,"canonicalName":"lib/components/canvas/Background.js","code":"(function () {\n    var Background, ContainerDrawable, GStimulus, Kinetic, KineticDrawable, _, __hasProp = {}.hasOwnProperty, __extends = function (child, parent) {\n            for (var key in parent) {\n                if (__hasProp.call(parent, key))\n                    child[key] = parent[key];\n            }\n            function ctor() {\n                this.constructor = child;\n            }\n            ctor.prototype = parent.prototype;\n            child.prototype = new ctor();\n            child.__super__ = parent.prototype;\n            return child;\n        };\n    Kinetic = require('15', module).Kinetic;\n    GStimulus = require('72', module).GraphicalStimulus;\n    KineticDrawable = require('72', module).KineticDrawable;\n    ContainerDrawable = require('72', module).ContainerDrawable;\n    _ = require('16', module);\n    Background = function (_super) {\n        __extends(Background, _super);\n        function Background(stims, fill) {\n            this.stims = stims != null ? stims : [];\n            this.fill = fill != null ? fill : 'white';\n            Background.__super__.constructor.call(this, {}, {});\n            if (!_.isArray(this.stims)) {\n                this.stims = [this.stims];\n            }\n        }\n        Background.prototype.render = function (context) {\n            var background, drawables, stim, _i, _len, _ref;\n            background = new Kinetic.Rect({\n                x: 0,\n                y: 0,\n                width: context.width(),\n                height: context.height(),\n                name: 'background',\n                fill: this.fill\n            });\n            drawables = [];\n            drawables.push(new KineticDrawable(background));\n            _ref = this.stims;\n            for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n                stim = _ref[_i];\n                drawables.push(stim.render(context));\n            }\n            return new ContainerDrawable(drawables);\n        };\n        return Background;\n    }(GStimulus);\n    exports.Background = Background;\n}.call(this));","map":"{\"version\":3,\"sources\":[\"lib/components/canvas/Background.js\"],\"names\":[\"Background\",\"ContainerDrawable\",\"GStimulus\",\"Kinetic\",\"KineticDrawable\",\"_\",\"__hasProp\",\"hasOwnProperty\",\"__extends\",\"child\",\"parent\",\"key\",\"call\",\"ctor\",\"constructor\",\"prototype\",\"__super__\",\"require\",\"GraphicalStimulus\",\"_super\",\"stims\",\"fill\",\"isArray\",\"render\",\"context\",\"background\",\"drawables\",\"stim\",\"_i\",\"_len\",\"_ref\",\"Rect\",\"x\",\"y\",\"width\",\"height\",\"name\",\"push\",\"length\",\"exports\"],\"mappings\":\"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\"}","lineCount":52,"mtime":1395245872000,"deps":[{"filename":"/Users/brad/WebstormProjects/psycloud/jslibs/kinetic.js","canonicalName":"jslibs/kinetic.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/lib/stimresp.js","canonicalName":"lib/stimresp.js","isNpmModule":false,"isCoreModule":false},{"filename":"/Users/brad/WebstormProjects/psycloud/node_modules/lodash/dist/lodash.js","canonicalName":"node_modules/lodash/dist/lodash.js","isNpmModule":true,"isCoreModule":false}],"nodeFeatures":{"__filename":false,"__dirname":false},"isNpmModule":false,"isCoreModule":false,"realCanonicalName":null,"src":"(function() {\n  var Background, ContainerDrawable, GStimulus, Kinetic, KineticDrawable, _,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Kinetic = require(\"../../../jslibs/kinetic\").Kinetic;\n\n  GStimulus = require(\"../../stimresp\").GraphicalStimulus;\n\n  KineticDrawable = require(\"../../stimresp\").KineticDrawable;\n\n  ContainerDrawable = require(\"../../stimresp\").ContainerDrawable;\n\n  _ = require(\"lodash\");\n\n  Background = (function(_super) {\n    __extends(Background, _super);\n\n    function Background(stims, fill) {\n      this.stims = stims != null ? stims : [];\n      this.fill = fill != null ? fill : \"white\";\n      Background.__super__.constructor.call(this, {}, {});\n      if (!_.isArray(this.stims)) {\n        this.stims = [this.stims];\n      }\n    }\n\n    Background.prototype.render = function(context) {\n      var background, drawables, stim, _i, _len, _ref;\n      background = new Kinetic.Rect({\n        x: 0,\n        y: 0,\n        width: context.width(),\n        height: context.height(),\n        name: 'background',\n        fill: this.fill\n      });\n      drawables = [];\n      drawables.push(new KineticDrawable(background));\n      _ref = this.stims;\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        stim = _ref[_i];\n        drawables.push(stim.render(context));\n      }\n      return new ContainerDrawable(drawables);\n    };\n\n    return Background;\n\n  })(GStimulus);\n\n  exports.Background = Background;\n\n}).call(this);\n","disableSourceMap":false}},"uids":{"next":114,"names":{"src/main.coffee":1,"src/elements.js":2,"src/psycloud.js":3,"src/dotmotion.js":4,"src/utils.js":5,"src/datatable.js":6,"src/samplers.js":7,"src/stimresp.js":8,"src/layout.js":9,"src/design.js":10,"src/components/canvas/canvas.js":11,"src/components/html/html.js":12,"src/components/components.js":13,"src/factory.js":14,"jslibs/kinetic.js":15,"node_modules/lodash/dist/lodash.js":16,"node_modules/q/q.js":17,"jslibs/jquery.csv.js":18,"node_modules/coffee-pattern/pattern.js":19,"jslibs/kinetic-v4.7.1.js":20,"node_modules/taffydb/taffy.js":21,"node_modules/baconjs/dist/Bacon.js":22,"src/components/canvas/background.js":23,"src/components/sound.js":24,"src/components/confirm.js":25,"src/components/first.js":26,"src/components/group.js":27,"src/components/keypress.js":28,"src/components/mousepress.js":29,"src/components/prompt.js":30,"src/components/sequence.js":31,"src/components/timeout.js":32,"src/components/click.js":33,"src/components/nothing.js":34,"jslibs/buzz.js":35,"node_modules/mixen/mixen.js":36,"src/components/html/htmlbutton.js":37,"src/components/html/htmllink.js":38,"src/components/html/htmllabel.js":39,"src/components/html/htmlicon.js":40,"src/components/html/instructions.js":41,"src/components/html/markdown.js":42,"src/components/html/message.js":43,"src/components/html/page.js":44,"node_modules/marked/lib/marked.js":45,"src/components/canvas/arrow.js":46,"src/components/canvas/blank.js":47,"src/components/canvas/circle.js":48,"src/components/canvas/clear.js":49,"src/components/canvas/fixationcross.js":50,"src/components/canvas/canvasborder.js":51,"src/components/canvas/gridlines.js":52,"src/components/canvas/picture.js":53,"src/components/canvas/rectangle.js":54,"src/components/canvas/startbutton.js":55,"src/components/canvas/text.js":56,"src/components/canvas/textinput.js":57,"src/components/canvas/labeled.js":58,"src/components/canvas/Text.js":59,"src/components/canvas/Background.js":60,"node_modules/teacup/lib/teacup.js":61,"node_modules/powerbuild/node_modules/browser-builtins/builtin/timers.js":62,"node_modules/powerbuild/node_modules/browser-builtins/node_modules/console-browserify/index.js":63,"src/main.js":64,"lib/main.js":65,"lib/elements.js":66,"lib/psycloud.js":67,"lib/dotmotion.js":68,"lib/utils.js":69,"lib/datatable.js":70,"lib/samplers.js":71,"lib/stimresp.js":72,"lib/layout.js":73,"lib/design.js":74,"lib/components/canvas/canvas.js":75,"lib/components/html/html.js":76,"lib/components/components.js":77,"lib/factory.js":78,"lib/components/canvas/background.js":79,"lib/components/sound.js":80,"lib/components/confirm.js":81,"lib/components/first.js":82,"lib/components/group.js":83,"lib/components/keypress.js":84,"lib/components/mousepress.js":85,"lib/components/prompt.js":86,"lib/components/sequence.js":87,"lib/components/timeout.js":88,"lib/components/click.js":89,"lib/components/nothing.js":90,"lib/components/html/htmlbutton.js":91,"lib/components/html/htmllink.js":92,"lib/components/html/htmllabel.js":93,"lib/components/html/htmlicon.js":94,"lib/components/html/instructions.js":95,"lib/components/html/markdown.js":96,"lib/components/html/message.js":97,"lib/components/html/page.js":98,"lib/components/canvas/arrow.js":99,"lib/components/canvas/blank.js":100,"lib/components/canvas/circle.js":101,"lib/components/canvas/clear.js":102,"lib/components/canvas/fixationcross.js":103,"lib/components/canvas/canvasborder.js":104,"lib/components/canvas/gridlines.js":105,"lib/components/canvas/picture.js":106,"lib/components/canvas/rectangle.js":107,"lib/components/canvas/startbutton.js":108,"lib/components/canvas/text.js":109,"lib/components/canvas/textinput.js":110,"lib/components/canvas/labeled.js":111,"lib/components/canvas/Text.js":112,"lib/components/canvas/Background.js":113}},"node":false}